/**
 * @license
 *
 * Copyright 2026 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(g,f){if(typeof exports=="object"&&typeof module<"u"){module.exports=f(require)}else if("function"==typeof define && define.amd){define("CoveoHeadlessCommerce",["crypto"],function(_d_0){var d={"crypto": _d_0},r=function(m){if(m in d) return d[m];if(typeof require=="function") return require(m);throw new Error("Cannot find module '"+m+"'")};return f(r)})}else {var gN={"crypto":"crypto"},gReq=function(r){var mod = r in gN ? g[gN[r]] : g[r]; return mod };g["CoveoHeadlessCommerce"]=f(gReq)}}(typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : this,function(require){var exports={};var __exports=exports;var module={exports};
"use strict";var mA=Object.create;var qa=Object.defineProperty;var pA=Object.getOwnPropertyDescriptor;var fA=Object.getOwnPropertyNames;var gA=Object.getPrototypeOf,yA=Object.prototype.hasOwnProperty;var hA=(e,t,r)=>t in e?qa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ta=(e,t)=>()=>(e&&(t=e(e=0)),t);var Le=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),yl=(e,t)=>{for(var r in t)qa(e,r,{get:t[r],enumerable:!0})},Qp=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of fA(t))!yA.call(e,o)&&o!==r&&qa(e,o,{get:()=>t[o],enumerable:!(n=pA(t,o))||n.enumerable});return e};var Ot=(e,t,r)=>(r=e!=null?mA(gA(e)):{},Qp(t||!e||!e.__esModule?qa(r,"default",{value:e,enumerable:!0}):r,e)),SA=e=>Qp(qa({},"__esModule",{value:!0}),e);var xe=(e,t,r)=>hA(e,typeof t!="symbol"?t+"":t,r);var y,s=Ta(()=>{"use strict";y=typeof globalThis<"u"?globalThis:window});function Xi(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xi=function(t){return typeof t}:Xi=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xi(e)}function vA(){"navigator"in this||(this.navigator={}),typeof this.navigator.sendBeacon!="function"&&(this.navigator.sendBeacon=RA.bind(this))}function RA(e,t){var r=this.event&&this.event.type,n=r==="unload"||r==="beforeunload",o="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("POST",e,!n),o.withCredentials=!0,o.setRequestHeader("Accept","*/*"),CA(t)?(o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.responseType="text"):xA(t)&&t.type&&o.setRequestHeader("Content-Type",t.type);try{o.send(t)}catch{return!1}return!0}var CA,xA,c=Ta(()=>{"use strict";CA=function(t){return typeof t=="string"},xA=function(t){return t instanceof Blob};vA.call((typeof window>"u"?"undefined":Xi(window))==="object"?window:{})});var Rl=Le(Oa=>{"use strict";l();s();u();c();Object.defineProperty(Oa,"__esModule",{value:!0});function Up(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function AA(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FA(e,t,r){return t=Zn(t),bA(e,zp()?Reflect.construct(t,r||[],Zn(e).constructor):t.apply(e,r))}function Cl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qA(n.key),n)}}function xl(e,t,r){return t&&Bp(e.prototype,t),r&&Bp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _p(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=TA(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,d=!0,m=!1;return{s:function(){r=r.call(e)},n:function(){var f=r.next();return d=f.done,f},e:function(f){m=!0,a=f},f:function(){try{d||r.return==null||r.return()}finally{if(m)throw a}}}}function hl(){return hl=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=wA(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},hl.apply(null,arguments)}function Zn(e){return Zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zn(e)}function PA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sl(e,t)}function zp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zp=function(){return!!e})()}function bA(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AA(e)}function Sl(e,t){return Sl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Sl(e,t)}function wA(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=Zn(e))!==null;);return e}function IA(e,t,r,n){var o=hl(Zn(1&n?e.prototype:e),t,r);return 2&n&&typeof o=="function"?function(a){return o.apply(r,a)}:o}function EA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qA(e){var t=EA(e,"string");return typeof t=="symbol"?t:t+""}function TA(e,t){if(e){if(typeof e=="string")return Up(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Up(e,t):void 0}}(function(e){return{NativeAbortSignal:e.AbortSignal,NativeAbortController:e.AbortController}})(typeof self<"u"?self:global);function OA(e){var t;try{t=new Event("abort")}catch{typeof document<"u"?document.createEvent?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):(t=document.createEventObject(),t.type="abort"):t={type:"abort",bubbles:!1,cancelable:!1}}return t.reason=e,t}function kA(e){if(e===void 0)if(typeof document>"u")e=new Error("This operation was aborted"),e.name="AbortError";else try{e=new DOMException("signal is aborted without reason"),Object.defineProperty(e,"name",{value:"AbortError"})}catch{e=new Error("This operation was aborted"),e.name="AbortError"}return e}var $p=function(){function e(){Cl(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return xl(e,[{key:"addEventListener",value:function(r,n,o){r in this.listeners||(this.listeners[r]=[]),this.listeners[r].push({callback:n,options:o})}},{key:"removeEventListener",value:function(r,n){if(r in this.listeners){for(var o=this.listeners[r],a=0,d=o.length;a<d;a++)if(o[a].callback===n){o.splice(a,1);return}}}},{key:"dispatchEvent",value:function(r){var n=this;if(r.type in this.listeners){for(var o=this.listeners[r.type],a=o.slice(),d=function(){var g=a[m];try{g.callback.call(n,r)}catch(C){Promise.resolve().then(function(){throw C})}g.options&&g.options.once&&n.removeEventListener(r.type,g.callback)},m=0,f=a.length;m<f;m++)d();return!r.defaultPrevented}}}])}(),vl=function(e){function t(){var r;return Cl(this,t),r=FA(this,t),r.listeners||$p.call(r),Object.defineProperty(r,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(r,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(r,"reason",{value:void 0,writable:!0,configurable:!0}),r}return PA(t,e),xl(t,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(n){n.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,n)),IA(t,"dispatchEvent",this,3)([n])}},{key:"throwIfAborted",value:function(){var n=this.aborted,o=this.reason,a=o===void 0?"Aborted":o;if(n)throw a}}],[{key:"timeout",value:function(n){var o=new Zi;return setTimeout(function(){return o.abort(new DOMException("This signal is timeout in ".concat(n,"ms"),"TimeoutError"))},n),o.signal}},{key:"any",value:function(n){var o=new Zi;function a(){o.abort(this.reason),d()}function d(){var g=_p(n),C;try{for(g.s();!(C=g.n()).done;){var v=C.value;v.removeEventListener("abort",a)}}catch(x){g.e(x)}finally{g.f()}}var m=_p(n),f;try{for(m.s();!(f=m.n()).done;){var p=f.value;if(p.aborted){o.abort(p.reason);break}else p.addEventListener("abort",a)}}catch(g){m.e(g)}finally{m.f()}return o.signal}}])}($p),Zi=function(){function e(){Cl(this,e),Object.defineProperty(this,"signal",{value:new vl,writable:!0,configurable:!0})}return xl(e,[{key:"abort",value:function(r){var n=kA(r),o=OA(n);this.signal.reason=n,this.signal.dispatchEvent(o)}},{key:"toString",value:function(){return"[object AbortController]"}}])}();typeof Symbol<"u"&&Symbol.toStringTag&&(Zi.prototype[Symbol.toStringTag]="AbortController",vl.prototype[Symbol.toStringTag]="AbortSignal");function jA(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof e.Request=="function"&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}function VA(e){typeof e=="function"&&(e={fetch:e});var t=e,r=t.fetch,n=t.Request,o=n===void 0?r.Request:n,a=t.AbortController,d=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,m=d===void 0?!1:d;if(!jA({fetch:r,Request:o,AbortController:a,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:m}))return{fetch:r,Request:f};var f=o;(f&&!f.prototype.hasOwnProperty("signal")||m)&&(f=function(v,x){var R;x&&x.signal&&(R=x.signal,delete x.signal);var F=new o(v,x);return R&&Object.defineProperty(F,"signal",{writable:!1,enumerable:!1,configurable:!0,value:R}),F},f.prototype=o.prototype);var p=r,g=function(v,x){var R=f&&f.prototype.isPrototypeOf(v)?v.signal:x?x.signal:void 0;if(R){var F;try{F=new DOMException("Aborted","AbortError")}catch{F=new Error("Aborted"),F.name="AbortError"}if(R.aborted)return Promise.reject(F);var w=new Promise(function(P,q){R.addEventListener("abort",function(){return q(F)},{once:!0})});return x&&x.signal&&delete x.signal,Promise.race([w,p(v,x)])}return p(v,x)};return{fetch:g,Request:f}}Oa.AbortController=Zi;Oa.AbortSignal=vl;Oa.abortableFetch=VA});var Hp,i,h,u=Ta(()=>{"use strict";Hp=Ot(Rl(),1),i=Ot(Rl(),1),{fetch:h}=(0,Hp.abortableFetch)({fetch})});function ka(e){if(zA.test(e)||e.trim()==="")throw new TypeError("Invalid character in header field name");return e.trim().toLowerCase()}function Al(e){return e.replace(HA,"")}function ja(e){if(typeof e!="string"||e.length===0)return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r>127||!GA(r))return!1}return!0}function GA(e){return![127,32,"(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"].includes(e)}function Wp(e){if(typeof e!="string"||e.trim()!==e)return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r===0||r===10||r===13)return!1}return!0}var DA,Zp,NA,ef,MA,LA,QA,UA,BA,_A,$A,zA,Gp,HA,eo,Fl,Kp,Yp,Jp,Xp,S,rf=Ta(()=>{"use strict";l();s();u();c();DA=Object.create,Zp=Object.defineProperty,NA=Object.getOwnPropertyDescriptor,ef=Object.getOwnPropertyNames,MA=Object.getPrototypeOf,LA=Object.prototype.hasOwnProperty,QA=(e,t)=>function(){return t||(0,e[ef(e)[0]])((t={exports:{}}).exports,t),t.exports},UA=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ef(t))!LA.call(e,o)&&o!==r&&Zp(e,o,{get:()=>t[o],enumerable:!(n=NA(t,o))||n.enumerable});return e},BA=(e,t,r)=>(r=e!=null?DA(MA(e)):{},UA(t||!e||!e.__esModule?Zp(r,"default",{value:e,enumerable:!0}):r,e)),_A=QA({"node_modules/set-cookie-parser/lib/set-cookie.js"(e,t){"use strict";var r={decodeValues:!0,map:!1,silent:!1};function n(f){return typeof f=="string"&&!!f.trim()}function o(f,p){var g=f.split(";").filter(n),C=g.shift(),v=a(C),x=v.name,R=v.value;p=p?Object.assign({},r,p):r;try{R=p.decodeValues?decodeURIComponent(R):R}catch(w){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+R+"'. Set options.decodeValues to false to disable this feature.",w)}var F={name:x,value:R};return g.forEach(function(w){var P=w.split("="),q=P.shift().trimLeft().toLowerCase(),b=P.join("=");q==="expires"?F.expires=new Date(b):q==="max-age"?F.maxAge=parseInt(b,10):q==="secure"?F.secure=!0:q==="httponly"?F.httpOnly=!0:q==="samesite"?F.sameSite=b:F[q]=b}),F}function a(f){var p="",g="",C=f.split("=");return C.length>1?(p=C.shift(),g=C.join("=")):g=f,{name:p,value:g}}function d(f,p){if(p=p?Object.assign({},r,p):r,!f)return p.map?{}:[];if(f.headers)if(typeof f.headers.getSetCookie=="function")f=f.headers.getSetCookie();else if(f.headers["set-cookie"])f=f.headers["set-cookie"];else{var g=f.headers[Object.keys(f.headers).find(function(v){return v.toLowerCase()==="set-cookie"})];!g&&f.headers.cookie&&!p.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),f=g}if(Array.isArray(f)||(f=[f]),p=p?Object.assign({},r,p):r,p.map){var C={};return f.filter(n).reduce(function(v,x){var R=o(x,p);return v[R.name]=R,v},C)}else return f.filter(n).map(function(v){return o(v,p)})}function m(f){if(Array.isArray(f))return f;if(typeof f!="string")return[];var p=[],g=0,C,v,x,R,F;function w(){for(;g<f.length&&/\s/.test(f.charAt(g));)g+=1;return g<f.length}function P(){return v=f.charAt(g),v!=="="&&v!==";"&&v!==","}for(;g<f.length;){for(C=g,F=!1;w();)if(v=f.charAt(g),v===","){for(x=g,g+=1,w(),R=g;g<f.length&&P();)g+=1;g<f.length&&f.charAt(g)==="="?(F=!0,g=R,p.push(f.substring(C,x)),C=g):g=x+1}else g+=1;(!F||g>=f.length)&&p.push(f.substring(C,f.length))}return p}t.exports=d,t.exports.parse=d,t.exports.parseString=o,t.exports.splitCookiesString=m}}),$A=BA(_A()),zA=/[^a-z0-9\-#$%&'*+.^_`|~]/i;Gp=[`
`,"\r","	"," "],HA=new RegExp(`(^[${Gp.join("")}]|$[${Gp.join("")}])`,"g");eo=Symbol("normalizedHeaders"),Fl=Symbol("rawHeaderNames"),Kp=", ",S=class tf{constructor(t){this[Yp]={},this[Jp]=new Map,this[Xp]="Headers",["Headers","HeadersPolyfill"].includes(t?.constructor.name)||t instanceof tf||typeof y.Headers<"u"&&t instanceof y.Headers?t.forEach((n,o)=>{this.append(o,n)},this):Array.isArray(t)?t.forEach(([r,n])=>{this.append(r,Array.isArray(n)?n.join(Kp):n)}):t&&Object.getOwnPropertyNames(t).forEach(r=>{let n=t[r];this.append(r,Array.isArray(n)?n.join(Kp):n)})}[(Yp=eo,Jp=Fl,Xp=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}*keys(){for(let[t]of this.entries())yield t}*values(){for(let[,t]of this.entries())yield t}*entries(){let t=Object.keys(this[eo]).sort((r,n)=>r.localeCompare(n));for(let r of t)if(r==="set-cookie")for(let n of this.getSetCookie())yield[r,n];else yield[r,this.get(r)]}has(t){if(!ja(t))throw new TypeError(`Invalid header name "${t}"`);return this[eo].hasOwnProperty(ka(t))}get(t){if(!ja(t))throw TypeError(`Invalid header name "${t}"`);return this[eo][ka(t)]??null}set(t,r){if(!ja(t)||!Wp(r))return;let n=ka(t),o=Al(r);this[eo][n]=Al(o),this[Fl].set(n,t)}append(t,r){if(!ja(t)||!Wp(r))return;let n=ka(t),o=Al(r),a=this.has(n)?`${this.get(n)}, ${o}`:o;this.set(t,a)}delete(t){if(!ja(t)||!this.has(t))return;let r=ka(t);delete this[eo][r],this[Fl].delete(r)}forEach(t,r){for(let[n,o]of this.entries())t.call(r,o,n,this)}getSetCookie(){let t=this.get("set-cookie");return t===null?[]:t===""?[""]:(0,$A.splitCookiesString)(t)}}});var l=Ta(()=>{"use strict";rf()});var hg=Le(ei=>{"use strict";l();s();u();c();var bs=ei&&ei.__assign||function(){return bs=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},bs.apply(this,arguments)};Object.defineProperty(ei,"__esModule",{value:!0});var cP={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function uP(e){var t=bs(bs({},cP),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}ei.getSanitizedOptions=uP});var Sg=Le(ed=>{"use strict";l();s();u();c();Object.defineProperty(ed,"__esModule",{value:!0});function lP(e){var t=Math.random()*e;return Math.round(t)}ed.fullJitter=lP});var Cg=Le(td=>{"use strict";l();s();u();c();Object.defineProperty(td,"__esModule",{value:!0});function dP(e){return e}td.noJitter=dP});var xg=Le(rd=>{"use strict";l();s();u();c();Object.defineProperty(rd,"__esModule",{value:!0});var mP=Sg(),pP=Cg();function fP(e){switch(e.jitter){case"full":return mP.fullJitter;case"none":default:return pP.noJitter}}rd.JitterFactory=fP});var od=Le(nd=>{"use strict";l();s();u();c();Object.defineProperty(nd,"__esModule",{value:!0});var gP=xg(),yP=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=gP.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,n=this.numOfDelayedAttempts,o=t*Math.pow(r,n);return Math.min(o,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();nd.Delay=yP});var vg=Le(lr=>{"use strict";l();s();u();c();var hP=lr&&lr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SP=lr&&lr.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(d){d(a)})}return new(r||(r=Promise))(function(a,d){function m(g){try{p(n.next(g))}catch(C){d(C)}}function f(g){try{p(n.throw(g))}catch(C){d(C)}}function p(g){g.done?a(g.value):o(g.value).then(m,f)}p((n=n.apply(e,t||[])).next())})},CP=lr&&lr.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(p){return function(g){return f([p,g])}}function f(p){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=p[0]&2?o.return:p[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,p[1])).done)return a;switch(o=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,o=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){r.label=p[1];break}if(p[0]===6&&r.label<a[1]){r.label=a[1],a=p;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(p);break}a[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(g){p=[6,g],o=0}finally{n=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}};Object.defineProperty(lr,"__esModule",{value:!0});var xP=od(),vP=function(e){hP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return SP(this,void 0,void 0,function(){return CP(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(xP.Delay);lr.SkipFirstDelay=vP});var Rg=Le(ti=>{"use strict";l();s();u();c();var RP=ti&&ti.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ti,"__esModule",{value:!0});var AP=od(),FP=function(e){RP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(AP.Delay);ti.AlwaysDelay=FP});var Ag=Le(ad=>{"use strict";l();s();u();c();Object.defineProperty(ad,"__esModule",{value:!0});var PP=vg(),bP=Rg();function wP(e,t){var r=IP(e);return r.setAttemptNumber(t),r}ad.DelayFactory=wP;function IP(e){return e.delayFirstAttempt?new bP.AlwaysDelay(e):new PP.SkipFirstDelay(e)}});var Fg=Le(Rn=>{"use strict";l();s();u();c();var id=Rn&&Rn.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(d){d(a)})}return new(r||(r=Promise))(function(a,d){function m(g){try{p(n.next(g))}catch(C){d(C)}}function f(g){try{p(n.throw(g))}catch(C){d(C)}}function p(g){g.done?a(g.value):o(g.value).then(m,f)}p((n=n.apply(e,t||[])).next())})},sd=Rn&&Rn.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(p){return function(g){return f([p,g])}}function f(p){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=p[0]&2?o.return:p[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,p[1])).done)return a;switch(o=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,o=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){r.label=p[1];break}if(p[0]===6&&r.label<a[1]){r.label=a[1],a=p;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(p);break}a[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(g){p=[6,g],o=0}finally{n=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}};Object.defineProperty(Rn,"__esModule",{value:!0});var EP=hg(),qP=Ag();function TP(e,t){return t===void 0&&(t={}),id(this,void 0,void 0,function(){var r,n;return sd(this,function(o){switch(o.label){case 0:return r=EP.getSanitizedOptions(t),n=new OP(e,r),[4,n.execute()];case 1:return[2,o.sent()]}})})}Rn.backOff=TP;var OP=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return id(this,void 0,void 0,function(){var t,r;return sd(this,function(n){switch(n.label){case 0:if(this.attemptLimitReached)return[3,7];n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return n.sent(),[4,this.request()];case 3:return[2,n.sent()];case 4:return t=n.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=n.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return id(this,void 0,void 0,function(){var t;return sd(this,function(r){switch(r.label){case 0:return t=qP.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var hc=Le((om,am)=>{"use strict";l();s();u();c();(function(e,t){typeof om=="object"&&typeof am<"u"?am.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof y<"u"?y:e||self).dayjs=t()})(om,function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",o="second",a="minute",d="hour",m="day",f="week",p="month",g="quarter",C="year",v="date",x="Invalid Date",R=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,F=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(z){var _=["th","st","nd","rd"],B=z%100;return"["+z+(_[(B-20)%10]||_[B]||_[0])+"]"}},P=function(z,_,B){var H=String(z);return!H||H.length>=_?z:""+Array(_+1-H.length).join(B)+z},q={s:P,z:function(z){var _=-z.utcOffset(),B=Math.abs(_),H=Math.floor(B/60),$=B%60;return(_<=0?"+":"-")+P(H,2,"0")+":"+P($,2,"0")},m:function z(_,B){if(_.date()<B.date())return-z(B,_);var H=12*(B.year()-_.year())+(B.month()-_.month()),$=_.clone().add(H,p),Y=B-$<0,J=_.clone().add(H+(Y?-1:1),p);return+(-(H+(B-$)/(Y?$-J:J-$))||0)},a:function(z){return z<0?Math.ceil(z)||0:Math.floor(z)},p:function(z){return{M:p,y:C,w:f,d:m,D:v,h:d,m:a,s:o,ms:n,Q:g}[z]||String(z||"").toLowerCase().replace(/s$/,"")},u:function(z){return z===void 0}},b="en",E={};E[b]=w;var Q="$isDayjsObject",k=function(z){return z instanceof U||!(!z||!z[Q])},T=function z(_,B,H){var $;if(!_)return b;if(typeof _=="string"){var Y=_.toLowerCase();E[Y]&&($=Y),B&&(E[Y]=B,$=Y);var J=_.split("-");if(!$&&J.length>1)return z(J[0])}else{var oe=_.name;E[oe]=_,$=oe}return!H&&$&&(b=$),$||!H&&b},O=function(z,_){if(k(z))return z.clone();var B=typeof _=="object"?_:{};return B.date=z,B.args=arguments,new U(B)},j=q;j.l=T,j.i=k,j.w=function(z,_){return O(z,{locale:_.$L,utc:_.$u,x:_.$x,$offset:_.$offset})};var U=function(){function z(B){this.$L=T(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[Q]=!0}var _=z.prototype;return _.parse=function(B){this.$d=function(H){var $=H.date,Y=H.utc;if($===null)return new Date(NaN);if(j.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var J=$.match(R);if(J){var oe=J[2]-1||0,de=(J[7]||"0").substring(0,3);return Y?new Date(Date.UTC(J[1],oe,J[3]||1,J[4]||0,J[5]||0,J[6]||0,de)):new Date(J[1],oe,J[3]||1,J[4]||0,J[5]||0,J[6]||0,de)}}return new Date($)}(B),this.init()},_.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},_.$utils=function(){return j},_.isValid=function(){return this.$d.toString()!==x},_.isSame=function(B,H){var $=O(B);return this.startOf(H)<=$&&$<=this.endOf(H)},_.isAfter=function(B,H){return O(B)<this.startOf(H)},_.isBefore=function(B,H){return this.endOf(H)<O(B)},_.$g=function(B,H,$){return j.u(B)?this[H]:this.set($,B)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(B,H){var $=this,Y=!!j.u(H)||H,J=j.p(B),oe=function(he,Fe){var Ie=j.w($.$u?Date.UTC($.$y,Fe,he):new Date($.$y,Fe,he),$);return Y?Ie:Ie.endOf(m)},de=function(he,Fe){return j.w($.toDate()[he].apply($.toDate("s"),(Y?[0,0,0,0]:[23,59,59,999]).slice(Fe)),$)},ye=this.$W,ce=this.$M,me=this.$D,se="set"+(this.$u?"UTC":"");switch(J){case C:return Y?oe(1,0):oe(31,11);case p:return Y?oe(1,ce):oe(0,ce+1);case f:var fe=this.$locale().weekStart||0,be=(ye<fe?ye+7:ye)-fe;return oe(Y?me-be:me+(6-be),ce);case m:case v:return de(se+"Hours",0);case d:return de(se+"Minutes",1);case a:return de(se+"Seconds",2);case o:return de(se+"Milliseconds",3);default:return this.clone()}},_.endOf=function(B){return this.startOf(B,!1)},_.$set=function(B,H){var $,Y=j.p(B),J="set"+(this.$u?"UTC":""),oe=($={},$[m]=J+"Date",$[v]=J+"Date",$[p]=J+"Month",$[C]=J+"FullYear",$[d]=J+"Hours",$[a]=J+"Minutes",$[o]=J+"Seconds",$[n]=J+"Milliseconds",$)[Y],de=Y===m?this.$D+(H-this.$W):H;if(Y===p||Y===C){var ye=this.clone().set(v,1);ye.$d[oe](de),ye.init(),this.$d=ye.set(v,Math.min(this.$D,ye.daysInMonth())).$d}else oe&&this.$d[oe](de);return this.init(),this},_.set=function(B,H){return this.clone().$set(B,H)},_.get=function(B){return this[j.p(B)]()},_.add=function(B,H){var $,Y=this;B=Number(B);var J=j.p(H),oe=function(ce){var me=O(Y);return j.w(me.date(me.date()+Math.round(ce*B)),Y)};if(J===p)return this.set(p,this.$M+B);if(J===C)return this.set(C,this.$y+B);if(J===m)return oe(1);if(J===f)return oe(7);var de=($={},$[a]=t,$[d]=r,$[o]=e,$)[J]||1,ye=this.$d.getTime()+B*de;return j.w(ye,this)},_.subtract=function(B,H){return this.add(-1*B,H)},_.format=function(B){var H=this,$=this.$locale();if(!this.isValid())return $.invalidDate||x;var Y=B||"YYYY-MM-DDTHH:mm:ssZ",J=j.z(this),oe=this.$H,de=this.$m,ye=this.$M,ce=$.weekdays,me=$.months,se=$.meridiem,fe=function(Fe,Ie,ot,gt){return Fe&&(Fe[Ie]||Fe(H,Y))||ot[Ie].slice(0,gt)},be=function(Fe){return j.s(oe%12||12,Fe,"0")},he=se||function(Fe,Ie,ot){var gt=Fe<12?"AM":"PM";return ot?gt.toLowerCase():gt};return Y.replace(F,function(Fe,Ie){return Ie||function(ot){switch(ot){case"YY":return String(H.$y).slice(-2);case"YYYY":return j.s(H.$y,4,"0");case"M":return ye+1;case"MM":return j.s(ye+1,2,"0");case"MMM":return fe($.monthsShort,ye,me,3);case"MMMM":return fe(me,ye);case"D":return H.$D;case"DD":return j.s(H.$D,2,"0");case"d":return String(H.$W);case"dd":return fe($.weekdaysMin,H.$W,ce,2);case"ddd":return fe($.weekdaysShort,H.$W,ce,3);case"dddd":return ce[H.$W];case"H":return String(oe);case"HH":return j.s(oe,2,"0");case"h":return be(1);case"hh":return be(2);case"a":return he(oe,de,!0);case"A":return he(oe,de,!1);case"m":return String(de);case"mm":return j.s(de,2,"0");case"s":return String(H.$s);case"ss":return j.s(H.$s,2,"0");case"SSS":return j.s(H.$ms,3,"0");case"Z":return J}return null}(Fe)||J.replace(":","")})},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(B,H,$){var Y,J=this,oe=j.p(H),de=O(B),ye=(de.utcOffset()-this.utcOffset())*t,ce=this-de,me=function(){return j.m(J,de)};switch(oe){case C:Y=me()/12;break;case p:Y=me();break;case g:Y=me()/3;break;case f:Y=(ce-ye)/6048e5;break;case m:Y=(ce-ye)/864e5;break;case d:Y=ce/r;break;case a:Y=ce/t;break;case o:Y=ce/e;break;default:Y=ce}return $?Y:j.a(Y)},_.daysInMonth=function(){return this.endOf(p).$D},_.$locale=function(){return E[this.$L]},_.locale=function(B,H){if(!B)return this.$L;var $=this.clone(),Y=T(B,H,!0);return Y&&($.$L=Y),$},_.clone=function(){return j.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},z}(),G=U.prototype;return O.prototype=G,[["$ms",n],["$s",o],["$m",a],["$H",d],["$W",m],["$M",p],["$y",C],["$D",v]].forEach(function(z){G[z[1]]=function(_){return this.$g(_,z[0],z[1])}}),O.extend=function(z,_){return z.$i||(z(_,U,O),z.$i=!0),O},O.locale=T,O.isDayjs=k,O.unix=function(z){return O(1e3*z)},O.en=E[b],O.Ls=E,O.p={},O})});var Sh=Le((im,sm)=>{"use strict";l();s();u();c();(function(e,t){typeof im=="object"&&typeof sm<"u"?sm.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof y<"u"?y:e||self).dayjs_plugin_quarterOfYear=t()})(im,function(){"use strict";var e="month",t="quarter";return function(r,n){var o=n.prototype;o.quarter=function(m){return this.$utils().u(m)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(m-1))};var a=o.add;o.add=function(m,f){return m=Number(m),this.$utils().p(f)===t?this.add(3*m,e):a.bind(this)(m,f)};var d=o.startOf;o.startOf=function(m,f){var p=this.$utils(),g=!!p.u(f)||f;if(p.p(m)===t){var C=this.quarter()-1;return g?this.month(3*C).startOf(e).startOf("day"):this.month(3*C+2).endOf(e).endOf("day")}return d.bind(this)(m,f)}}})});var Ch=Le((cm,um)=>{"use strict";l();s();u();c();(function(e,t){typeof cm=="object"&&typeof um<"u"?um.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof y<"u"?y:e||self).dayjs_plugin_customParseFormat=t()})(cm,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,n=/\d\d/,o=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,d={},m=function(R){return(R=+R)+(R>68?1900:2e3)},f=function(R){return function(F){this[R]=+F}},p=[/[+-]\d\d:?(\d\d)?|Z/,function(R){(this.zone||(this.zone={})).offset=function(F){if(!F||F==="Z")return 0;var w=F.match(/([+-]|\d\d)/g),P=60*w[1]+(+w[2]||0);return P===0?0:w[0]==="+"?-P:P}(R)}],g=function(R){var F=d[R];return F&&(F.indexOf?F:F.s.concat(F.f))},C=function(R,F){var w,P=d.meridiem;if(P){for(var q=1;q<=24;q+=1)if(R.indexOf(P(q,0,F))>-1){w=q>12;break}}else w=R===(F?"pm":"PM");return w},v={A:[a,function(R){this.afternoon=C(R,!1)}],a:[a,function(R){this.afternoon=C(R,!0)}],Q:[r,function(R){this.month=3*(R-1)+1}],S:[r,function(R){this.milliseconds=100*+R}],SS:[n,function(R){this.milliseconds=10*+R}],SSS:[/\d{3}/,function(R){this.milliseconds=+R}],s:[o,f("seconds")],ss:[o,f("seconds")],m:[o,f("minutes")],mm:[o,f("minutes")],H:[o,f("hours")],h:[o,f("hours")],HH:[o,f("hours")],hh:[o,f("hours")],D:[o,f("day")],DD:[n,f("day")],Do:[a,function(R){var F=d.ordinal,w=R.match(/\d+/);if(this.day=w[0],F)for(var P=1;P<=31;P+=1)F(P).replace(/\[|\]/g,"")===R&&(this.day=P)}],w:[o,f("week")],ww:[n,f("week")],M:[o,f("month")],MM:[n,f("month")],MMM:[a,function(R){var F=g("months"),w=(g("monthsShort")||F.map(function(P){return P.slice(0,3)})).indexOf(R)+1;if(w<1)throw new Error;this.month=w%12||w}],MMMM:[a,function(R){var F=g("months").indexOf(R)+1;if(F<1)throw new Error;this.month=F%12||F}],Y:[/[+-]?\d+/,f("year")],YY:[n,function(R){this.year=m(R)}],YYYY:[/\d{4}/,f("year")],Z:p,ZZ:p};function x(R){var F,w;F=R,w=d&&d.formats;for(var P=(R=F.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(O,j,U){var G=U&&U.toUpperCase();return j||w[U]||e[U]||w[G].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(z,_,B){return _||B.slice(1)})})).match(t),q=P.length,b=0;b<q;b+=1){var E=P[b],Q=v[E],k=Q&&Q[0],T=Q&&Q[1];P[b]=T?{regex:k,parser:T}:E.replace(/^\[|\]$/g,"")}return function(O){for(var j={},U=0,G=0;U<q;U+=1){var z=P[U];if(typeof z=="string")G+=z.length;else{var _=z.regex,B=z.parser,H=O.slice(G),$=_.exec(H)[0];B.call(j,$),O=O.replace($,"")}}return function(Y){var J=Y.afternoon;if(J!==void 0){var oe=Y.hours;J?oe<12&&(Y.hours+=12):oe===12&&(Y.hours=0),delete Y.afternoon}}(j),j}}return function(R,F,w){w.p.customParseFormat=!0,R&&R.parseTwoDigitYear&&(m=R.parseTwoDigitYear);var P=F.prototype,q=P.parse;P.parse=function(b){var E=b.date,Q=b.utc,k=b.args;this.$u=Q;var T=k[1];if(typeof T=="string"){var O=k[2]===!0,j=k[3]===!0,U=O||j,G=k[2];j&&(G=k[2]),d=this.$locale(),!O&&G&&(d=w.Ls[G]),this.$d=function(H,$,Y,J){try{if(["x","X"].indexOf($)>-1)return new Date(($==="X"?1e3:1)*H);var oe=x($)(H),de=oe.year,ye=oe.month,ce=oe.day,me=oe.hours,se=oe.minutes,fe=oe.seconds,be=oe.milliseconds,he=oe.zone,Fe=oe.week,Ie=new Date,ot=ce||(de||ye?1:Ie.getDate()),gt=de||Ie.getFullYear(),Pr=0;de&&!ye||(Pr=ye>0?ye-1:Ie.getMonth());var Jn,Xn=me||0,Ea=se||0,fl=fe||0,gl=be||0;return he?new Date(Date.UTC(gt,Pr,ot,Xn,Ea,fl,gl+60*he.offset*1e3)):Y?new Date(Date.UTC(gt,Pr,ot,Xn,Ea,fl,gl)):(Jn=new Date(gt,Pr,ot,Xn,Ea,fl,gl),Fe&&(Jn=J(Jn).week(Fe).toDate()),Jn)}catch{return new Date("")}}(E,T,Q,w),this.init(),G&&G!==!0&&(this.$L=this.locale(G).$L),U&&E!=this.format(T)&&(this.$d=new Date("")),d={}}else if(T instanceof Array)for(var z=T.length,_=1;_<=z;_+=1){k[1]=T[_-1];var B=w.apply(this,k);if(B.isValid()){this.$d=B.$d,this.$L=B.$L,this.init();break}_===z&&(this.$d=new Date(""))}else q.call(this,b)}}})});var Ax=Le((op,ap)=>{"use strict";l();s();u();c();(function(e,t){typeof op=="object"&&typeof ap<"u"?ap.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof y<"u"?y:e||self).dayjs_plugin_timezone=t()})(op,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,o){var a,d=function(g,C,v){v===void 0&&(v={});var x=new Date(g),R=function(F,w){w===void 0&&(w={});var P=w.timeZoneName||"short",q=F+"|"+P,b=t[q];return b||(b=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:F,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:P}),t[q]=b),b}(C,v);return R.formatToParts(x)},m=function(g,C){for(var v=d(g,C),x=[],R=0;R<v.length;R+=1){var F=v[R],w=F.type,P=F.value,q=e[w];q>=0&&(x[q]=parseInt(P,10))}var b=x[3],E=b===24?0:b,Q=x[0]+"-"+x[1]+"-"+x[2]+" "+E+":"+x[4]+":"+x[5]+":000",k=+g;return(o.utc(Q).valueOf()-(k-=k%1e3))/6e4},f=n.prototype;f.tz=function(g,C){g===void 0&&(g=a);var v,x=this.utcOffset(),R=this.toDate(),F=R.toLocaleString("en-US",{timeZone:g}),w=Math.round((R-new Date(F))/1e3/60),P=15*-Math.round(R.getTimezoneOffset()/15)-w;if(!Number(P))v=this.utcOffset(0,C);else if(v=o(F,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(P,!0),C){var q=v.utcOffset();v=v.add(x-q,"minute")}return v.$x.$timezone=g,v},f.offsetName=function(g){var C=this.$x.$timezone||o.tz.guess(),v=d(this.valueOf(),C,{timeZoneName:g}).find(function(x){return x.type.toLowerCase()==="timezonename"});return v&&v.value};var p=f.startOf;f.startOf=function(g,C){if(!this.$x||!this.$x.$timezone)return p.call(this,g,C);var v=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return p.call(v,g,C).tz(this.$x.$timezone,!0)},o.tz=function(g,C,v){var x=v&&C,R=v||C||a,F=m(+o(),R);if(typeof g!="string")return o(g).tz(R);var w=function(E,Q,k){var T=E-60*Q*1e3,O=m(T,k);if(Q===O)return[T,Q];var j=m(T-=60*(O-Q)*1e3,k);return O===j?[T,O]:[E-60*Math.min(O,j)*1e3,Math.max(O,j)]}(o.utc(g,x).valueOf(),F,R),P=w[0],q=w[1],b=o(P).utcOffset(q);return b.$x.$timezone=R,b},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(g){a=g}}})});var Fx=Le((ip,sp)=>{"use strict";l();s();u();c();(function(e,t){typeof ip=="object"&&typeof sp<"u"?sp.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof y<"u"?y:e||self).dayjs_plugin_utc=t()})(ip,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,o,a){var d=o.prototype;a.utc=function(x){var R={date:x,utc:!0,args:arguments};return new o(R)},d.utc=function(x){var R=a(this.toDate(),{locale:this.$L,utc:!0});return x?R.add(this.utcOffset(),e):R},d.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var m=d.parse;d.parse=function(x){x.utc&&(this.$u=!0),this.$utils().u(x.$offset)||(this.$offset=x.$offset),m.call(this,x)};var f=d.init;d.init=function(){if(this.$u){var x=this.$d;this.$y=x.getUTCFullYear(),this.$M=x.getUTCMonth(),this.$D=x.getUTCDate(),this.$W=x.getUTCDay(),this.$H=x.getUTCHours(),this.$m=x.getUTCMinutes(),this.$s=x.getUTCSeconds(),this.$ms=x.getUTCMilliseconds()}else f.call(this)};var p=d.utcOffset;d.utcOffset=function(x,R){var F=this.$utils().u;if(F(x))return this.$u?0:F(this.$offset)?p.call(this):this.$offset;if(typeof x=="string"&&(x=function(b){b===void 0&&(b="");var E=b.match(t);if(!E)return null;var Q=(""+E[0]).match(r)||["-",0,0],k=Q[0],T=60*+Q[1]+ +Q[2];return T===0?0:k==="+"?T:-T}(x),x===null))return this;var w=Math.abs(x)<=16?60*x:x,P=this;if(R)return P.$offset=w,P.$u=x===0,P;if(x!==0){var q=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(P=this.local().add(w+q,e)).$offset=w,P.$x.$localOffset=q}else P=this.utc();return P};var g=d.format;d.format=function(x){var R=x||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,R)},d.valueOf=function(){var x=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*x},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var C=d.toDate;d.toDate=function(x){return x==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():C.call(this)};var v=d.diff;d.diff=function(x,R,F){if(x&&this.$u===x.$u)return v.call(this,x,R,F);var w=this.local(),P=a(x).local();return v.call(w,P,R,F)}}})});var Mx=Le((pfe,Nx)=>{"use strict";l();s();u();c();function cT(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}Nx.exports=uT;function uT(e,t,r){var n=r&&r.stringify||cT,o=1;if(typeof e=="object"&&e!==null){var a=t.length+o;if(a===1)return e;var d=new Array(a);d[0]=n(e);for(var m=1;m<a;m++)d[m]=n(t[m]);return d.join(" ")}if(typeof e!="string")return e;var f=t.length;if(f===0)return e;for(var p="",g=1-o,C=-1,v=e&&e.length||0,x=0;x<v;){if(e.charCodeAt(x)===37&&x+1<v){switch(C=C>-1?C:0,e.charCodeAt(x+1)){case 100:case 102:if(g>=f||t[g]==null)break;C<x&&(p+=e.slice(C,x)),p+=Number(t[g]),C=x+2,x++;break;case 105:if(g>=f||t[g]==null)break;C<x&&(p+=e.slice(C,x)),p+=Math.floor(Number(t[g])),C=x+2,x++;break;case 79:case 111:case 106:if(g>=f||t[g]===void 0)break;C<x&&(p+=e.slice(C,x));var R=typeof t[g];if(R==="string"){p+="'"+t[g]+"'",C=x+2,x++;break}if(R==="function"){p+=t[g].name||"<anonymous>",C=x+2,x++;break}p+=n(t[g]),C=x+2,x++;break;case 115:if(g>=f)break;C<x&&(p+=e.slice(C,x)),p+=String(t[g]),C=x+2,x++;break;case 37:C<x&&(p+=e.slice(C,x)),p+="%",C=x+2,x++,g--;break}++g}++x}return C===-1?e:(C<v&&(p+=e.slice(C)),p)}});var $x=Le((Sfe,Ou)=>{"use strict";l();s();u();c();var Lx=Mx();Ou.exports=Fr;var _i=FT().console||{},lT={mapHttpRequest:Tu,mapHttpResponse:Tu,wrapRequestSerializer:dp,wrapResponseSerializer:dp,wrapErrorSerializer:dp,req:Tu,res:Tu,err:Ux,errWithCause:Ux};function cn(e,t){return e==="silent"?1/0:t.levels.values[e]}var fp=Symbol("pino.logFuncs"),mp=Symbol("pino.hierarchy"),dT={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Qx(e,t){let r={logger:t,parent:e[mp]};t[mp]=r}function mT(e,t,r){let n={};t.forEach(o=>{n[o]=r[o]?r[o]:_i[o]||_i[dT[o]||"log"]||fa}),e[fp]=n}function pT(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Fr(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||_i;e.browser.write&&(e.browser.asObject=!0);let n=e.serializers||{},o=pT(e.browser.serialize,n),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);let d=Object.keys(e.customLevels||{}),m=["error","fatal","warn","info","debug","trace"].concat(d);typeof r=="function"&&m.forEach(function(F){r[F]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let f=e.level||"info",p=Object.create(r);p.log||(p.log=fa),mT(p,m,r),Qx({},p),Object.defineProperty(p,"levelVal",{get:C}),Object.defineProperty(p,"level",{get:v,set:x});let g={transmit:t,serialize:o,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:m,timestamp:vT(e),messageKey:e.messageKey||"msg",onChild:e.onChild||fa};p.levels=fT(e),p.level=f,p.isLevelEnabled=function(F){return this.levels.values[F]?this.levels.values[F]>=this.levels.values[this.level]:!1},p.setMaxListeners=p.getMaxListeners=p.emit=p.addListener=p.on=p.prependListener=p.once=p.prependOnceListener=p.removeListener=p.removeAllListeners=p.listeners=p.listenerCount=p.eventNames=p.write=p.flush=fa,p.serializers=n,p._serialize=o,p._stdErrSerialize=a,p.child=function(...F){return R.call(this,g,...F)},t&&(p._logEvent=pp());function C(){return cn(this.level,this)}function v(){return this._level}function x(F){if(F!=="silent"&&!this.levels.values[F])throw Error("unknown level "+F);this._level=F,_n(this,g,p,"error"),_n(this,g,p,"fatal"),_n(this,g,p,"warn"),_n(this,g,p,"info"),_n(this,g,p,"debug"),_n(this,g,p,"trace"),d.forEach(w=>{_n(this,g,p,w)})}function R(F,w,P){if(!w)throw new Error("missing bindings for child Pino");P=P||{},o&&w.serializers&&(P.serializers=w.serializers);let q=P.serializers;if(o&&q){var b=Object.assign({},n,q),E=e.browser.serialize===!0?Object.keys(b):o;delete w.serializers,gp([w],E,b,this._stdErrSerialize)}function Q(T){this._childLevel=(T._childLevel|0)+1,this.bindings=w,b&&(this.serializers=b,this._serialize=E),t&&(this._logEvent=pp([].concat(T._logEvent.bindings,w)))}Q.prototype=this;let k=new Q(this);return Qx(this,k),k.child=function(...T){return R.call(this,F,...T)},k.level=P.level||this.level,F.onChild(k),k}return p}function fT(e){let t=e.customLevels||{},r=Object.assign({},Fr.levels.values,t),n=Object.assign({},Fr.levels.labels,gT(t));return{values:r,labels:n}}function gT(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}Fr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Fr.stdSerializers=lT;Fr.stdTimeFunctions=Object.assign({},{nullTime:Bx,epochTime:_x,unixTime:RT,isoTime:AT});function yT(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[mp];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function _n(e,t,r,n){if(Object.defineProperty(e,n,{value:cn(e.level,r)>cn(n,r)?fa:r[fp][n],writable:!0,enumerable:!0,configurable:!0}),e[n]===fa){if(!t.transmit)return;let a=t.transmit.level||e.level,d=cn(a,r);if(cn(n,r)<d)return}e[n]=ST(e,t,r,n);let o=yT(e);o.length!==0&&(e[n]=hT(o,e[n]))}function hT(e,t){return function(){return t.apply(this,[...e,...arguments])}}function ST(e,t,r,n){return function(o){return function(){let d=t.timestamp(),m=new Array(arguments.length),f=Object.getPrototypeOf&&Object.getPrototypeOf(this)===_i?_i:this;for(var p=0;p<m.length;p++)m[p]=arguments[p];var g=!1;if(t.serialize&&(gp(m,this._serialize,this.serializers,this._stdErrSerialize),g=!0),t.asObject||t.formatters?o.call(f,...CT(this,n,m,d,t)):o.apply(f,m),t.transmit){let C=t.transmit.level||e._level,v=cn(C,r),x=cn(n,r);if(x<v)return;xT(this,{ts:d,methodLevel:n,methodValue:x,transmitLevel:C,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:cn(e._level,r)},m,g)}}}(e[fp][n])}function CT(e,t,r,n,o){let{level:a,log:d=C=>C}=o.formatters||{},m=r.slice(),f=m[0],p={},g=(e._childLevel|0)+1;if(g<1&&(g=1),n&&(p.time=n),a){let C=a(t,e.levels.values[t]);Object.assign(p,C)}else p.level=e.levels.values[t];if(o.asObjectBindingsOnly){if(f!==null&&typeof f=="object")for(;g--&&typeof m[0]=="object";)Object.assign(p,m.shift());return[d(p),...m]}else{if(f!==null&&typeof f=="object"){for(;g--&&typeof m[0]=="object";)Object.assign(p,m.shift());f=m.length?Lx(m.shift(),m):void 0}else typeof f=="string"&&(f=Lx(m.shift(),m));return f!==void 0&&(p[o.messageKey]=f),[d(p)]}}function gp(e,t,r,n){for(let o in e)if(n&&e[o]instanceof Error)e[o]=Fr.stdSerializers.err(e[o]);else if(typeof e[o]=="object"&&!Array.isArray(e[o])&&t)for(let a in e[o])t.indexOf(a)>-1&&a in r&&(e[o][a]=r[a](e[o][a]))}function xT(e,t,r,n=!1){let o=t.send,a=t.ts,d=t.methodLevel,m=t.methodValue,f=t.val,p=e._logEvent.bindings;n||gp(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=a,e._logEvent.messages=r.filter(function(g){return p.indexOf(g)===-1}),e._logEvent.level.label=d,e._logEvent.level.value=m,o(d,e._logEvent,f),e._logEvent=pp(p)}function pp(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function Ux(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function vT(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?Bx:_x}function Tu(){return{}}function dp(e){return e}function fa(){}function Bx(){return!1}function _x(){return Date.now()}function RT(){return Math.round(Date.now()/1e3)}function AT(){return new Date(Date.now()).toISOString()}function FT(){function e(t){return typeof t<"u"&&t}try{return typeof y<"u"?y:(Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),y)}catch{return e(self)||e(window)||e(this)||{}}}Ou.exports.default=Fr;Ou.exports.pino=Fr});var cV={};yl(cV,{HighlightUtils:()=>Zl,ProductTemplatesHelpers:()=>uA,ResultType:()=>Fn,Selectors:()=>Kl,SortBy:()=>kt,SortDirection:()=>Cn,VERSION:()=>Tr,buildCart:()=>ey,buildCategoryFilterSuggestions:()=>al,buildCommerceEngine:()=>Jx,buildContext:()=>Pv,buildController:()=>ie,buildDateRange:()=>Cr,buildFieldSuggestionsGenerator:()=>qv,buildFieldsSortCriterion:()=>Ya,buildFilterSuggestions:()=>sl,buildFilterSuggestionsGenerator:()=>sR,buildInstantProducts:()=>cR,buildNotifyTrigger:()=>aA,buildProductEnrichment:()=>uR,buildProductListing:()=>GR,buildProductTemplatesManager:()=>dA,buildProductView:()=>WR,buildQueryTrigger:()=>iA,buildRecentQueriesList:()=>KR,buildRecommendations:()=>YR,buildRedirectionTrigger:()=>sA,buildRelevanceSortCriterion:()=>jt,buildSearch:()=>JR,buildSearchBox:()=>ml,buildStandaloneSearchBox:()=>oA,deserializeRelativeDate:()=>Eh,getAnalyticsNextApiBaseUrl:()=>ws,getCommerceApiBaseUrl:()=>Es,getOrganizationEndpoint:()=>Ee,getSampleCommerceEngineConfiguration:()=>Yx,loadCartActions:()=>TT,loadCategoryFacetSetActions:()=>kT,loadConfigurationActions:()=>qT,loadContextActions:()=>OT,loadCoreFacetActions:()=>jT,loadDateFacetActions:()=>VT,loadInstantProductsActions:()=>BT,loadLocationFacetActions:()=>DT,loadNumericFacetActions:()=>NT,loadPaginationActions:()=>_T,loadProductActions:()=>$T,loadProductEnrichmentActions:()=>WT,loadProductListingActions:()=>KT,loadProductListingParametersActions:()=>YT,loadQueryActions:()=>JT,loadQuerySetActions:()=>ZT,loadQuerySuggestActions:()=>tO,loadRecentQueriesActions:()=>rO,loadRecommendationsActions:()=>nO,loadRegularFacetActions:()=>MT,loadSearchActions:()=>oO,loadSearchParametersActions:()=>aO,loadSortActions:()=>iO,loadSpotlightContentActions:()=>sO,loadStandaloneSearchBoxSetActions:()=>lO,loadTriggersActions:()=>dO,productListingSerializer:()=>nl,searchSerializer:()=>dn,validateRelativeDate:()=>_r});module.exports=SA(cV);l();s();u();c();var Kl={};yl(Kl,{ProductListing:()=>Wl,Search:()=>Gl});l();s();u();c();l();s();u();c();var nf="coveo-headless-internal-state",K=Symbol.for(nf),of=e=>new Proxy(e,{ownKeys(t){return Reflect.ownKeys(t).filter(r=>r!==K)},get(t,r,n){return typeof r=="symbol"&&r.description===nf&&r!==K&&e.logger.warn(`You might be loading Headless twice. Please check your setup.
If you are trying to access the inner state... Don't`),Reflect.get(t,r,n)}});l();s();u();c();l();s();u();c();function WA(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Va(r)}var Va=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},pe=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let o in this.definition){let a=this.definition[o].validate(r[o]);a&&n.push(`${o}: ${a}`)}if(n.length)throw WA(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},ve=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&ee(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function to(e){return e===void 0}function KA(e){return e===null}function ee(e){return to(e)||KA(e)}var X=class{constructor(e={}){xe(this,"value");this.value=new ve(e)}validate(e){let t=this.value.validate(e);return t||(YA(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function YA(e){return to(e)||af(e)}function af(e){return typeof e=="boolean"}var W=class{constructor(e={}){xe(this,"value");this.config=e,this.value=new ve(e)}validate(e){let t=this.value.validate(e);return t||(JA(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function JA(e){return to(e)||sf(e)}function sf(e){return typeof e=="number"&&!Number.isNaN(e)}var XA=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,V=class{constructor(e={}){xe(this,"value");xe(this,"config");this.config={emptyAllowed:!0,url:!1,...e},this.value=new ve(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:o,ISODate:a}=this.config,d=this.value.validate(e);if(d)return d;if(to(e))return null;if(!es(e))return"value is not a string.";if(!t&&!e.length)return"value is an empty string.";if(r)try{new URL(e)}catch{return"value is not a valid URL."}return n&&!n.test(e)?`value did not match provided regex ${n}`:o&&!o.includes(e)?`value should be one of: ${o.join(", ")}.`:a&&!(XA.test(e)&&new Date(e).toString()!=="Invalid Date")?"value is not a valid ISO8601 date string":null}get default(){return this.value.default}get required(){return this.value.required}};function es(e){return Object.prototype.toString.call(e)==="[object String]"}var L=class{constructor(e={}){xe(this,"config");this.config={options:{required:!1},values:{},...e}}validate(e){if(to(e))return this.config.options.required?"value is required and is currently undefined":null;if(!cf(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&ee(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let o=e[r],a=n.validate(o);a!==null&&(t+=` ${a}`)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function cf(e){return e!==void 0&&typeof e=="object"}var ae=class{constructor(e={}){xe(this,"value");this.config=e,this.value=new ve(this.config)}validate(e){if(!ee(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(ee(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&ee(n)&&(r=`value is null or undefined: ${e.join(",")}`);let o=this.validatePrimitiveValue(n,this.config.each);o!==null&&(r+=` ${o}`)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return af(e)||es(e)||sf(e)||cf(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function ts(e){return Array.isArray(e)}var br=class{constructor(e){xe(this,"value");this.config=e,this.value=new ve(e)}validate(e){let t=this.value.validate(e);return t!==null?t:to(e)||Object.values(this.config.enum).find(n=>n===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};l();s();u();c();l();s();u();c();function Qe(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ZA=typeof Symbol=="function"&&Symbol.observable||"@@observable",uf=ZA,Pl=()=>Math.random().toString(36).substring(7).split("").join("."),eF={INIT:`@@redux/INIT${Pl()}`,REPLACE:`@@redux/REPLACE${Pl()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Pl()}`},rs=eF;function Lt(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function bl(e,t,r){if(typeof e!="function")throw new Error(Qe(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Qe(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Qe(1));return r(bl)(e,t)}let n=e,o=t,a=new Map,d=a,m=0,f=!1;function p(){d===a&&(d=new Map,a.forEach((w,P)=>{d.set(P,w)}))}function g(){if(f)throw new Error(Qe(3));return o}function C(w){if(typeof w!="function")throw new Error(Qe(4));if(f)throw new Error(Qe(5));let P=!0;p();let q=m++;return d.set(q,w),function(){if(P){if(f)throw new Error(Qe(6));P=!1,p(),d.delete(q),a=null}}}function v(w){if(!Lt(w))throw new Error(Qe(7));if(typeof w.type>"u")throw new Error(Qe(8));if(typeof w.type!="string")throw new Error(Qe(17));if(f)throw new Error(Qe(9));try{f=!0,o=n(o,w)}finally{f=!1}return(a=d).forEach(q=>{q()}),w}function x(w){if(typeof w!="function")throw new Error(Qe(10));n=w,v({type:rs.REPLACE})}function R(){let w=C;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(Qe(11));function q(){let E=P;E.next&&E.next(g())}return q(),{unsubscribe:w(q)}},[uf](){return this}}}return v({type:rs.INIT}),{dispatch:v,subscribe:C,getState:g,replaceReducer:x,[uf]:R}}function tF(e){Object.keys(e).forEach(t=>{let r=e[t];if(typeof r(void 0,{type:rs.INIT})>"u")throw new Error(Qe(12));if(typeof r(void 0,{type:rs.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Qe(13))})}function ro(e){let t=Object.keys(e),r={};for(let d=0;d<t.length;d++){let m=t[d];typeof e[m]=="function"&&(r[m]=e[m])}let n=Object.keys(r),o,a;try{tF(r)}catch(d){a=d}return function(m={},f){if(a)throw a;let p=!1,g={};for(let C=0;C<n.length;C++){let v=n[C],x=r[v],R=m[v],F=x(R,f);if(typeof F>"u"){let w=f&&f.type;throw new Error(Qe(14))}g[v]=F,p=p||F!==R}return p=p||n.length!==Object.keys(m).length,p?g:m}}function no(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function lf(...e){return t=>(r,n)=>{let o=t(r,n),a=()=>{throw new Error(Qe(15))},d={getState:o.getState,dispatch:(f,...p)=>a(f,...p)},m=e.map(f=>f(d));return a=no(...m)(o.dispatch),{...o,dispatch:a}}}function oo(e){return Lt(e)&&"type"in e&&typeof e.type=="string"}l();s();u();c();var Dl=Symbol.for("immer-nothing"),Da=Symbol.for("immer-draftable"),at=Symbol.for("immer-state");function Ue(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ao=Object.getPrototypeOf;function dt(e){return!!e&&!!e[at]}function it(e){return e?yf(e)||Array.isArray(e)||!!e[Da]||!!e.constructor?.[Da]||io(e)||Ba(e):!1}var rF=Object.prototype.constructor.toString(),df=new WeakMap;function yf(e){if(!e||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=df.get(r);return n===void 0&&(n=Function.toString.call(r),df.set(r,n)),n===rF}function Nl(e){return dt(e)||Ue(15,e),e[at].base_}function Na(e,t,r=!0){pn(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(o=>{t(o,e[o],e)}):e.forEach((n,o)=>t(o,n,e))}function pn(e){let t=e[at];return t?t.type_:Array.isArray(e)?1:io(e)?2:Ba(e)?3:0}function Ma(e,t){return pn(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function wl(e,t){return pn(e)===2?e.get(t):e[t]}function hf(e,t,r){let n=pn(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function nF(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function io(e){return e instanceof Map}function Ba(e){return e instanceof Set}function mn(e){return e.copy_||e.base_}function ql(e,t){if(io(e))return new Map(e);if(Ba(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=yf(e);if(t===!0||t==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(e);delete n[at];let o=Reflect.ownKeys(n);for(let a=0;a<o.length;a++){let d=o[a],m=n[d];m.writable===!1&&(m.writable=!0,m.configurable=!0),(m.get||m.set)&&(n[d]={configurable:!0,writable:!0,enumerable:m.enumerable,value:e[d]})}return Object.create(ao(e),n)}else{let n=ao(e);if(n!==null&&r)return{...e};let o=Object.create(n);return Object.assign(o,e)}}function is(e,t=!1){return ss(e)||dt(e)||!it(e)||(pn(e)>1&&Object.defineProperties(e,{set:ns,add:ns,clear:ns,delete:ns}),Object.freeze(e),t&&Object.values(e).forEach(r=>is(r,!0))),e}function oF(){Ue(2)}var ns={value:oF};function ss(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Tl={};function fn(e){let t=Tl[e];return t||Ue(0,e),t}function aF(e,t){Tl[e]||(Tl[e]=t)}var La;function Sf(){return La}function iF(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function mf(e,t){t&&(fn("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ol(e){kl(e),e.drafts_.forEach(sF),e.drafts_=null}function kl(e){e===La&&(La=e.parent_)}function pf(e){return La=iF(La,e)}function sF(e){let t=e[at];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ff(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[at].modified_&&(Ol(t),Ue(4)),it(e)&&(e=os(t,e),t.parent_||as(t,e)),t.patches_&&fn("Patches").generateReplacementPatches_(r[at].base_,e,t.patches_,t.inversePatches_)):e=os(t,r,[]),Ol(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Dl?e:void 0}function os(e,t,r){if(ss(t))return t;let n=e.immer_.shouldUseStrictIteration(),o=t[at];if(!o)return Na(t,(a,d)=>gf(e,o,t,a,d,r),n),t;if(o.scope_!==e)return t;if(!o.modified_)return as(e,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;let a=o.copy_,d=a,m=!1;o.type_===3&&(d=new Set(a),a.clear(),m=!0),Na(d,(f,p)=>gf(e,o,a,f,p,r,m),n),as(e,a,!1),r&&e.patches_&&fn("Patches").generatePatches_(o,r,e.patches_,e.inversePatches_)}return o.copy_}function gf(e,t,r,n,o,a,d){if(o==null||typeof o!="object"&&!d)return;let m=ss(o);if(!(m&&!d)){if(dt(o)){let f=a&&t&&t.type_!==3&&!Ma(t.assigned_,n)?a.concat(n):void 0,p=os(e,o,f);if(hf(r,n,p),dt(p))e.canAutoFreeze_=!1;else return}else d&&r.add(o);if(it(o)&&!m){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===o&&m)return;os(e,o),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(io(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&as(e,o)}}}function as(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&is(t,r)}function cF(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Sf(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},o=n,a=Ml;r&&(o=[n],a=Qa);let{revoke:d,proxy:m}=Proxy.revocable(o,a);return n.draft_=m,n.revoke_=d,m}var Ml={get(e,t){if(t===at)return e;let r=mn(e);if(!Ma(r,t))return uF(e,r,t);let n=r[t];return e.finalized_||!it(n)?n:n===Il(e.base_,t)?(El(e),e.copy_[t]=Vl(n,e)):n},has(e,t){return t in mn(e)},ownKeys(e){return Reflect.ownKeys(mn(e))},set(e,t,r){let n=Cf(mn(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let o=Il(mn(e),t),a=o?.[at];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(nF(r,o)&&(r!==void 0||Ma(e.base_,t)))return!0;El(e),jl(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Il(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,El(e),jl(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=mn(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Ue(11)},getPrototypeOf(e){return ao(e.base_)},setPrototypeOf(){Ue(12)}},Qa={};Na(Ml,(e,t)=>{Qa[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Qa.deleteProperty=function(e,t){return Qa.set.call(this,e,t,void 0)};Qa.set=function(e,t,r){return Ml.set.call(this,e[0],t,r,e[0])};function Il(e,t){let r=e[at];return(r?mn(r):e)[t]}function uF(e,t,r){let n=Cf(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function Cf(e,t){if(!(t in e))return;let r=ao(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=ao(r)}}function jl(e){e.modified_||(e.modified_=!0,e.parent_&&jl(e.parent_))}function El(e){e.copy_||(e.copy_=ql(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var lF=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let a=r;r=t;let d=this;return function(f=a,...p){return d.produce(f,g=>r.call(this,g,...p))}}typeof r!="function"&&Ue(6),n!==void 0&&typeof n!="function"&&Ue(7);let o;if(it(t)){let a=pf(this),d=Vl(t,void 0),m=!0;try{o=r(d),m=!1}finally{m?Ol(a):kl(a)}return mf(a,n),ff(o,a)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===Dl&&(o=void 0),this.autoFreeze_&&is(o,!0),n){let a=[],d=[];fn("Patches").generateReplacementPatches_(t,o,a,d),n(a,d)}return o}else Ue(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(d,...m)=>this.produceWithPatches(d,f=>t(f,...m));let n,o;return[this.produce(t,r,(d,m)=>{n=d,o=m}),n,o]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){it(e)||Ue(8),dt(e)&&(e=xf(e));let t=pf(this),r=Vl(e,void 0);return r[at].isManual_=!0,kl(t),r}finishDraft(e,t){let r=e&&e[at];(!r||!r.isManual_)&&Ue(9);let{scope_:n}=r;return mf(n,t),ff(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));let n=fn("Patches").applyPatches_;return dt(e)?n(e,t):this.produce(e,o=>n(o,t))}};function Vl(e,t){let r=io(e)?fn("MapSet").proxyMap_(e,t):Ba(e)?fn("MapSet").proxySet_(e,t):cF(e,t);return(t?t.scope_:Sf()).drafts_.push(r),r}function xf(e){return dt(e)||Ue(10,e),vf(e)}function vf(e){if(!it(e)||ss(e))return e;let t=e[at],r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=ql(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=ql(e,!0);return Na(r,(o,a)=>{hf(r,o,vf(a))},n),t&&(t.finalized_=!1),r}function Rf(){let t="replace",r="add",n="remove";function o(v,x,R,F){switch(v.type_){case 0:case 2:return d(v,x,R,F);case 1:return a(v,x,R,F);case 3:return m(v,x,R,F)}}function a(v,x,R,F){let{base_:w,assigned_:P}=v,q=v.copy_;q.length<w.length&&([w,q]=[q,w],[R,F]=[F,R]);for(let b=0;b<w.length;b++)if(P[b]&&q[b]!==w[b]){let E=x.concat([b]);R.push({op:t,path:E,value:C(q[b])}),F.push({op:t,path:E,value:C(w[b])})}for(let b=w.length;b<q.length;b++){let E=x.concat([b]);R.push({op:r,path:E,value:C(q[b])})}for(let b=q.length-1;w.length<=b;--b){let E=x.concat([b]);F.push({op:n,path:E})}}function d(v,x,R,F){let{base_:w,copy_:P}=v;Na(v.assigned_,(q,b)=>{let E=wl(w,q),Q=wl(P,q),k=b?Ma(w,q)?t:r:n;if(E===Q&&k===t)return;let T=x.concat(q);R.push(k===n?{op:k,path:T}:{op:k,path:T,value:Q}),F.push(k===r?{op:n,path:T}:k===n?{op:r,path:T,value:C(E)}:{op:t,path:T,value:C(E)})})}function m(v,x,R,F){let{base_:w,copy_:P}=v,q=0;w.forEach(b=>{if(!P.has(b)){let E=x.concat([q]);R.push({op:n,path:E,value:b}),F.unshift({op:r,path:E,value:b})}q++}),q=0,P.forEach(b=>{if(!w.has(b)){let E=x.concat([q]);R.push({op:r,path:E,value:b}),F.unshift({op:n,path:E,value:b})}q++})}function f(v,x,R,F){R.push({op:t,path:[],value:x===Dl?void 0:x}),F.push({op:t,path:[],value:v})}function p(v,x){return x.forEach(R=>{let{path:F,op:w}=R,P=v;for(let Q=0;Q<F.length-1;Q++){let k=pn(P),T=F[Q];typeof T!="string"&&typeof T!="number"&&(T=""+T),(k===0||k===1)&&(T==="__proto__"||T==="constructor")&&Ue(19),typeof P=="function"&&T==="prototype"&&Ue(19),P=wl(P,T),typeof P!="object"&&Ue(18,F.join("/"))}let q=pn(P),b=g(R.value),E=F[F.length-1];switch(w){case t:switch(q){case 2:return P.set(E,b);case 3:Ue(16);default:return P[E]=b}case r:switch(q){case 1:return E==="-"?P.push(b):P.splice(E,0,b);case 2:return P.set(E,b);case 3:return P.add(b);default:return P[E]=b}case n:switch(q){case 1:return P.splice(E,1);case 2:return P.delete(E);case 3:return P.delete(R.value);default:return delete P[E]}default:Ue(17,w)}}),v}function g(v){if(!it(v))return v;if(Array.isArray(v))return v.map(g);if(io(v))return new Map(Array.from(v.entries()).map(([R,F])=>[R,g(F)]));if(Ba(v))return new Set(Array.from(v).map(g));let x=Object.create(ao(v));for(let R in v)x[R]=g(v[R]);return Ma(v,Da)&&(x[Da]=v[Da]),x}function C(v){return dt(v)?g(v):v}aF("Patches",{applyPatches_:p,generatePatches_:o,generateReplacementPatches_:f})}var Ua=new lF,cr=Ua.produce,cs=Ua.produceWithPatches.bind(Ua);var Ll=Ua.applyPatches.bind(Ua);l();s();u();c();function dF(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function mF(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function pF(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Af=e=>Array.isArray(e)?e:[e];function fF(e){let t=Array.isArray(e[0])?e[0]:e;return pF(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function gF(e,t){let r=[],{length:n}=e;for(let o=0;o<n;o++)r.push(e[o].apply(null,t));return r}var rD=Symbol();var nD=Object.getPrototypeOf({});var yF=class{constructor(e){this.value=e}deref(){return this.value}},hF=typeof WeakRef<"u"?WeakRef:yF,SF=0,Ff=1;function us(){return{s:SF,v:void 0,o:null,p:null}}function so(e,t={}){let r=us(),{resultEqualityCheck:n}=t,o,a=0;function d(){let m=r,{length:f}=arguments;for(let C=0,v=f;C<v;C++){let x=arguments[C];if(typeof x=="function"||typeof x=="object"&&x!==null){let R=m.o;R===null&&(m.o=R=new WeakMap);let F=R.get(x);F===void 0?(m=us(),R.set(x,m)):m=F}else{let R=m.p;R===null&&(m.p=R=new Map);let F=R.get(x);F===void 0?(m=us(),R.set(x,m)):m=F}}let p=m,g;if(m.s===Ff)g=m.v;else if(g=e.apply(null,arguments),a++,n){let C=o?.deref?.()??o;C!=null&&n(C,g)&&(g=C,a!==0&&a--),o=typeof g=="object"&&g!==null||typeof g=="function"?new hF(g):g}return p.s=Ff,p.v=g,g}return d.clearCache=()=>{r=us(),d.resetResultsCount()},d.resultsCount=()=>a,d.resetResultsCount=()=>{a=0},d}function Pf(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...o)=>{let a=0,d=0,m,f={},p=o.pop();typeof p=="object"&&(f=p,p=o.pop()),dF(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);let g={...r,...f},{memoize:C,memoizeOptions:v=[],argsMemoize:x=so,argsMemoizeOptions:R=[],devModeChecks:F={}}=g,w=Af(v),P=Af(R),q=fF(o),b=C(function(){return a++,p.apply(null,arguments)},...w),E=!0,Q=x(function(){d++;let T=gF(q,arguments);return m=b.apply(null,T),m},...P);return Object.assign(Q,{resultFunc:p,memoizedResultFunc:b,dependencies:q,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>m,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:C,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var re=Pf(so),CF=Object.assign((e,t=re)=>{mF(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((d,m,f)=>(d[r[f]]=m,d),{}))},{withTypes:()=>CF});l();s();u();c();function bf(e){return({dispatch:r,getState:n})=>o=>a=>typeof a=="function"?a(r,n,e):o(a)}var wf=bf(),If=bf;var xF=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?no:no.apply(null,arguments)},vD=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}},vF=e=>e&&typeof e.match=="function";function A(e,t){function r(...n){if(t){let o=t(...n);if(!o)throw new Error(tt(0));return{type:e,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>oo(n)&&n.type===e,r}var Df=class _a extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,_a.prototype)}static get[Symbol.species](){return _a}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new _a(...t[0].concat(this)):new _a(...t.concat(this))}};function Ef(e){return it(e)?cr(e,()=>{}):e}function qf(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function RF(e){return typeof e=="boolean"}var AF=()=>function(t){let{thunk:r=!0,immutableCheck:n=!0,serializableCheck:o=!0,actionCreatorCheck:a=!0}=t??{},d=new Df;return r&&(RF(r)?d.push(wf):d.push(If(r.extraArgument))),d},$a="RTK_autoBatch",lo=()=>e=>({payload:e,meta:{[$a]:!0}}),Tf=e=>t=>{setTimeout(t,e)},FF=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),o=!0,a=!1,d=!1,m=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Tf(10):e.type==="callback"?e.queueNotification:Tf(e.timeout),p=()=>{d=!1,a&&(a=!1,m.forEach(g=>g()))};return Object.assign({},n,{subscribe(g){let C=()=>o&&g(),v=n.subscribe(C);return m.add(g),()=>{v(),m.delete(g)}},dispatch(g){try{return o=!g?.meta?.[$a],a=!o,a&&(d||(d=!0,f(p))),n.dispatch(g)}finally{o=!0}}})},PF=e=>function(r){let{autoBatch:n=!0}=r??{},o=new Df(e);return n&&o.push(FF(typeof n=="object"?n:void 0)),o};function Nf(e){let t=AF(),{reducer:r=void 0,middleware:n,devTools:o=!0,preloadedState:a=void 0,enhancers:d=void 0}=e||{},m;if(typeof r=="function")m=r;else if(Lt(r))m=ro(r);else throw new Error(tt(1));let f;typeof n=="function"?f=n(t):f=t();let p=no;o&&(p=xF({trace:!1,...typeof o=="object"&&o}));let g=lf(...f),C=PF(g),v=typeof d=="function"?d(C):C(),x=p(...v);return bl(m,a,x)}function Mf(e){let t={},r=[],n,o={addCase(a,d){let m=typeof a=="string"?a:a.type;if(!m)throw new Error(tt(28));if(m in t)throw new Error(tt(29));return t[m]=d,o},addMatcher(a,d){return r.push({matcher:a,reducer:d}),o},addDefaultCase(a){return n=a,o}};return e(o),[t,r,n]}function bF(e){return typeof e=="function"}function Z(e,t){let[r,n,o]=Mf(t),a;if(bF(e))a=()=>Ef(e());else{let m=Ef(e);a=()=>m}function d(m=a(),f){let p=[r[f.type],...n.filter(({matcher:g})=>g(f)).map(({reducer:g})=>g)];return p.filter(g=>!!g).length===0&&(p=[o]),p.reduce((g,C)=>{if(C)if(dt(g)){let x=C(g,f);return x===void 0?g:x}else{if(it(g))return cr(g,v=>C(v,f));{let v=C(g,f);if(v===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return g},m)}return d.getInitialState=a,d}var Lf=(e,t)=>vF(e)?e.match(t):e(t);function Qt(...e){return t=>e.some(r=>Lf(r,t))}function uo(...e){return t=>e.every(r=>Lf(r,t))}function ps(e,t){if(!e||!e.meta)return!1;let r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function za(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function fs(...e){return e.length===0?t=>ps(t,["pending"]):za(e)?Qt(...e.map(t=>t.pending)):fs()(e[0])}function hn(...e){return e.length===0?t=>ps(t,["rejected"]):za(e)?Qt(...e.map(t=>t.rejected)):hn()(e[0])}function Ha(...e){let t=r=>r&&r.meta&&r.meta.rejectedWithValue;return e.length===0?uo(hn(...e),t):za(e)?uo(hn(...e),t):Ha()(e[0])}function ur(...e){return e.length===0?t=>ps(t,["fulfilled"]):za(e)?Qt(...e.map(t=>t.fulfilled)):ur()(e[0])}function gs(...e){return e.length===0?t=>ps(t,["pending","fulfilled","rejected"]):za(e)?Qt(...e.flatMap(t=>[t.pending,t.rejected,t.fulfilled])):gs()(e[0])}var wF="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Ga=(e=21)=>{let t="",r=e;for(;r--;)t+=wF[Math.random()*64|0];return t},IF=["name","message","stack","code"],Ql=class{constructor(e,t){xe(this,"_type");this.payload=e,this.meta=t}},Of=class{constructor(e,t){xe(this,"_type");this.payload=e,this.meta=t}},EF=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of IF)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},te=(()=>{function e(t,r,n){let o=A(t+"/fulfilled",(f,p,g,C)=>({payload:f,meta:{...C||{},arg:g,requestId:p,requestStatus:"fulfilled"}})),a=A(t+"/pending",(f,p,g)=>({payload:void 0,meta:{...g||{},arg:p,requestId:f,requestStatus:"pending"}})),d=A(t+"/rejected",(f,p,g,C,v)=>({payload:C,error:(n&&n.serializeError||EF)(f||"Rejected"),meta:{...v||{},arg:g,requestId:p,rejectedWithValue:!!C,requestStatus:"rejected",aborted:f?.name==="AbortError",condition:f?.name==="ConditionError"}}));function m(f){return(p,g,C)=>{let v=n?.idGenerator?n.idGenerator(f):Ga(),x=new i.AbortController,R,F;function w(q){F=q,x.abort()}let P=async function(){let q;try{let E=n?.condition?.(f,{getState:g,extra:C});if(TF(E)&&(E=await E),E===!1||x.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let Q=new Promise((k,T)=>{R=()=>{T({name:"AbortError",message:F||"Aborted"})},x.signal.addEventListener("abort",R)});p(a(v,f,n?.getPendingMeta?.({requestId:v,arg:f},{getState:g,extra:C}))),q=await Promise.race([Q,Promise.resolve(r(f,{dispatch:p,getState:g,extra:C,requestId:v,signal:x.signal,abort:w,rejectWithValue:(k,T)=>new Ql(k,T),fulfillWithValue:(k,T)=>new Of(k,T)})).then(k=>{if(k instanceof Ql)throw k;return k instanceof Of?o(k.payload,v,f,k.meta):o(k,v,f)})])}catch(E){q=E instanceof Ql?d(null,v,f,E.payload,E.meta):d(E,v,f)}finally{R&&x.signal.removeEventListener("abort",R)}return n&&!n.dispatchConditionRejection&&d.match(q)&&q.meta.condition||p(q),q}();return Object.assign(P,{abort:w,requestId:v,arg:f,unwrap(){return P.then(qF)}})}}return Object.assign(m,{pending:a,rejected:d,fulfilled:o,settled:Qt(d,o),typePrefix:t})}return e.withTypes=()=>e,e})();function qF(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function TF(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Qf=Symbol.for("rtk-slice-createasyncthunk"),bD={[Qf]:te};function OF(e,t){return`${e}/${t}`}function kF({creators:e}={}){let t=e?.asyncThunk?.[Qf];return function(n){let{name:o,reducerPath:a=o}=n;if(!o)throw new Error(tt(11));typeof process<"u";let d=(typeof n.reducers=="function"?n.reducers(VF()):n.reducers)||{},m=Object.keys(d),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(q,b){let E=typeof q=="string"?q:q.type;if(!E)throw new Error(tt(12));if(E in f.sliceCaseReducersByType)throw new Error(tt(13));return f.sliceCaseReducersByType[E]=b,p},addMatcher(q,b){return f.sliceMatchers.push({matcher:q,reducer:b}),p},exposeAction(q,b){return f.actionCreators[q]=b,p},exposeCaseReducer(q,b){return f.sliceCaseReducersByName[q]=b,p}};m.forEach(q=>{let b=d[q],E={reducerName:q,type:OF(o,q),createNotation:typeof n.reducers=="function"};NF(b)?LF(E,b,p,t):DF(E,b,p)});function g(){let[q={},b=[],E=void 0]=typeof n.extraReducers=="function"?Mf(n.extraReducers):[n.extraReducers],Q={...q,...f.sliceCaseReducersByType};return Z(n.initialState,k=>{for(let T in Q)k.addCase(T,Q[T]);for(let T of f.sliceMatchers)k.addMatcher(T.matcher,T.reducer);for(let T of b)k.addMatcher(T.matcher,T.reducer);E&&k.addDefaultCase(E)})}let C=q=>q,v=new Map,x;function R(q,b){return x||(x=g()),x(q,b)}function F(){return x||(x=g()),x.getInitialState()}function w(q,b=!1){function E(k){let T=k[q];return typeof T>"u"&&b&&(T=F()),T}function Q(k=C){let T=qf(v,b,()=>new WeakMap);return qf(T,k,()=>{let O={};for(let[j,U]of Object.entries(n.selectors??{}))O[j]=jF(U,k,F,b);return O})}return{reducerPath:q,getSelectors:Q,get selectors(){return Q(E)},selectSlice:E}}let P={name:o,reducer:R,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:F,...w(a),injectInto(q,{reducerPath:b,...E}={}){let Q=b??a;return q.inject({reducerPath:Q,reducer:R},E),{...P,...w(Q,!0)}}};return P}}function jF(e,t,r,n){function o(a,...d){let m=t(a);return typeof m>"u"&&n&&(m=r()),e(m,...d)}return o.unwrapped=e,o}var Sn=kF();function VF(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function DF({type:e,reducerName:t,createNotation:r},n,o){let a,d;if("reducer"in n){if(r&&!MF(n))throw new Error(tt(17));a=n.reducer,d=n.prepare}else a=n;o.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,d?A(e,d):A(e))}function NF(e){return e._reducerDefinitionType==="asyncThunk"}function MF(e){return e._reducerDefinitionType==="reducerWithPrepare"}function LF({type:e,reducerName:t},r,n,o){if(!o)throw new Error(tt(18));let{payloadCreator:a,fulfilled:d,pending:m,rejected:f,settled:p,options:g}=r,C=o(e,a,g);n.exposeAction(t,C),d&&n.addCase(C.fulfilled,d),m&&n.addCase(C.pending,m),f&&n.addCase(C.rejected,f),p&&n.addMatcher(C.settled,p),n.exposeCaseReducer(t,{fulfilled:d||ls,pending:m||ls,rejected:f||ls,settled:p||ls})}function ls(){}var QF="task",Uf="listener",Bf="completed",_l="cancelled",UF=`task-${_l}`,BF=`task-${Bf}`,Ul=`${Uf}-${_l}`,_F=`${Uf}-${Bf}`,ys=class{constructor(e){xe(this,"name","TaskAbortError");xe(this,"message");this.code=e,this.message=`${QF} ${_l} (reason: ${e})`}},$l=(e,t)=>{if(typeof e!="function")throw new TypeError(tt(32))},ds=()=>{},_f=(e,t=ds)=>(e.catch(t),e),$f=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),gn=(e,t)=>{let r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},yn=e=>{if(e.aborted){let{reason:t}=e;throw new ys(t)}};function zf(e,t){let r=ds;return new Promise((n,o)=>{let a=()=>o(new ys(e.reason));if(e.aborted){a();return}r=$f(e,a),t.finally(()=>r()).then(n,o)}).finally(()=>{r=ds})}var $F=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ys?"cancelled":"rejected",error:r}}finally{t?.()}},ms=e=>t=>_f(zf(e,t).then(r=>(yn(e),r))),Hf=e=>{let t=ms(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:co}=Object,kf={},hs="listenerMiddleware",zF=(e,t)=>{let r=n=>$f(e,()=>gn(n,e.reason));return(n,o)=>{$l(n,"taskExecutor");let a=new i.AbortController;r(a);let d=$F(async()=>{yn(e),yn(a.signal);let m=await n({pause:ms(a.signal),delay:Hf(a.signal),signal:a.signal});return yn(a.signal),m},()=>gn(a,BF));return o?.autoJoin&&t.push(d.catch(ds)),{result:ms(e)(d),cancel(){gn(a,UF)}}}},HF=(e,t)=>{let r=async(n,o)=>{yn(t);let a=()=>{},m=[new Promise((f,p)=>{let g=e({predicate:n,effect:(C,v)=>{v.unsubscribe(),f([C,v.getState(),v.getOriginalState()])}});a=()=>{g(),p()}})];o!=null&&m.push(new Promise(f=>setTimeout(f,o,null)));try{let f=await zf(t,Promise.race(m));return yn(t),f}finally{a()}};return(n,o)=>_f(r(n,o))},Gf=e=>{let{type:t,actionCreator:r,matcher:n,predicate:o,effect:a}=e;if(t)o=A(t).match;else if(r)t=r.type,o=r.match;else if(n)o=n;else if(!o)throw new Error(tt(21));return $l(a,"options.listener"),{predicate:o,type:t,effect:a}},Wf=co(e=>{let{type:t,predicate:r,effect:n}=Gf(e);return{id:Ga(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(tt(22))}}},{withTypes:()=>Wf}),jf=(e,t)=>{let{type:r,effect:n,predicate:o}=Gf(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===o)&&a.effect===n)},Bl=e=>{e.pending.forEach(t=>{gn(t,Ul)})},GF=e=>()=>{e.forEach(Bl),e.clear()},Vf=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Kf=co(A(`${hs}/add`),{withTypes:()=>Kf}),WF=A(`${hs}/removeAll`),Yf=co(A(`${hs}/remove`),{withTypes:()=>Yf}),KF=(...e)=>{console.error(`${hs}/error`,...e)},Jf=(e={})=>{let t=new Map,{extra:r,onError:n=KF}=e;$l(n,"onError");let o=g=>(g.unsubscribe=()=>t.delete(g.id),t.set(g.id,g),C=>{g.unsubscribe(),C?.cancelActive&&Bl(g)}),a=g=>{let C=jf(t,g)??Wf(g);return o(C)};co(a,{withTypes:()=>a});let d=g=>{let C=jf(t,g);return C&&(C.unsubscribe(),g.cancelActive&&Bl(C)),!!C};co(d,{withTypes:()=>d});let m=async(g,C,v,x)=>{let R=new i.AbortController,F=HF(a,R.signal),w=[];try{g.pending.add(R),await Promise.resolve(g.effect(C,co({},v,{getOriginalState:x,condition:(P,q)=>F(P,q).then(Boolean),take:F,delay:Hf(R.signal),pause:ms(R.signal),extra:r,signal:R.signal,fork:zF(R.signal,w),unsubscribe:g.unsubscribe,subscribe:()=>{t.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((P,q,b)=>{P!==R&&(gn(P,Ul),b.delete(P))})},cancel:()=>{gn(R,Ul),g.pending.delete(R)},throwIfCancelled:()=>{yn(R.signal)}})))}catch(P){P instanceof ys||Vf(n,P,{raisedBy:"effect"})}finally{await Promise.all(w),gn(R,_F),g.pending.delete(R)}},f=GF(t);return{middleware:g=>C=>v=>{if(!oo(v))return C(v);if(Kf.match(v))return a(v.payload);if(WF.match(v)){f();return}if(Yf.match(v))return d(v.payload);let x=g.getState(),R=()=>{if(x===kf)throw new Error(tt(23));return x},F;try{if(F=C(v),t.size>0){let w=g.getState(),P=Array.from(t.values());for(let q of P){let b=!1;try{b=q.predicate(v,w,x)}catch(E){b=!1,Vf(n,E,{raisedBy:"predicate"})}b&&m(q,v,g,R)}}}finally{x=kf}return F},startListening:a,stopListening:d,clearListeners:f}};var ID=Symbol.for("rtk-state-proxy-original");function tt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}l();s();u();c();var wr=e=>e.commercePagination?.principal.perPage||0,Ss=(e,t)=>e.commercePagination?.recommendations[t]?.perPage||0,Ir=e=>e.commercePagination?.principal.totalEntries||0,Cs=(e,t)=>e.commercePagination?.recommendations[t]?.totalEntries||0,xs=e=>e.commercePagination?.principal.page||0,Xf=(e,t)=>e.commercePagination?.recommendations[t]?.page||0;var Wa=e=>e.productListing.responseId,Zf=e=>e.productListing.requestId,Ka=e=>e.productListing?.results.length||e.productListing?.products.length||0,eg=re(e=>({total:Ir(e),current:Ka(e)}),({current:e,total:t})=>e<t),tg=e=>{let t=e.productListing?.isLoading;return ee(t)?!1:t},rg=e=>e.productListing?.error??null;l();s();u();c();l();s();u();c();function zl(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{q:n}:{}}function Hl(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{sortCriteria:n}:{}}function Ut(e,t,r,n){if(e===void 0)return{};let o=Object.entries(e).filter(([a])=>t(a)).map(([a,{request:d}])=>{let m=r(d);return m.length?{[a]:m}:{}}).reduce((a,d)=>({...a,...d}),{});return Object.keys(o).length?{[n]:o}:{}}l();s();u();c();l();s();u();c();function Bt(e){let{activeValue:t,ancestryMap:r}=JF(e);return t?XF(t,r):[]}function JF(e){let t=[...e],r=new Map;for(;t.length>0;){let n=t.shift();if(n.state==="selected")return{activeValue:n,ancestryMap:r};if(r)for(let o of n.children)r.set(o,n);t.unshift(...n.children)}return{}}function XF(e,t){let r=[];if(!e)return[];let n=e;do r.unshift(n),n=t.get(n);while(n);return r}l();s();u();c();function ng(){return{principal:Er(),recommendations:{}}}function Er(){return{page:0,perPage:0,totalEntries:0,totalPages:0}}l();s();u();c();l();s();u();c();l();s();u();c();var kt=(r=>(r.Relevance="relevance",r.Fields="fields",r))(kt||{}),Cn=(r=>(r.Ascending="asc",r.Descending="desc",r))(Cn||{}),jt=()=>({by:"relevance"});var Ya=e=>({by:"fields",fields:e}),og=new L({options:{required:!1},values:{by:new br({enum:kt,required:!0}),fields:new ae({each:new L({values:{field:new V({required:!0}),direction:new br({enum:Cn}),displayName:new V}})})}});function xn(){return{appliedSort:jt(),availableSorts:[jt()]}}function vs(e){return{...ZF(e?.commercePagination,t=>t.principal.page,Er().page),...eP(e?.commercePagination,t=>t.principal.perPage,Er().perPage),...Hl(e?.commerceSort,t=>t.appliedSort,xn().appliedSort),...Ut(e.commerceFacetSet,qr(e,"regular"),tP,"f"),...Ut(e.commerceFacetSet,qr(e,"regular"),rP,"fExcluded"),...Ut(e.commerceFacetSet,qr(e,"location"),nP,"lf"),...Ut(e.commerceFacetSet,qr(e,"hierarchical"),oP,"cf"),...Ut(e.commerceFacetSet,qr(e,"dateRange"),ag,"df"),...Ut(e.commerceFacetSet,qr(e,"dateRange"),ig,"dfExcluded"),...Ut(e.commerceFacetSet,qr(e,"numericalRange"),ag,"nf"),...Ut(e.commerceFacetSet,qr(e,"numericalRange"),ig,"nfExcluded"),...sg("selected",e.manualNumericFacetSet),...sg("excluded",e.manualNumericFacetSet)}}function ZF(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{page:n}:{}}function eP(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{perPage:n}:{}}function tP(e){return e.values.filter(t=>t.state==="selected").map(t=>t.value)}function rP(e){return e.values.filter(t=>t.state==="excluded").map(t=>t.value)}function nP(e){return e.values.filter(t=>t.state==="selected").map(t=>t.value)}function ag(e){return e.values.filter(t=>t.state==="selected")}function ig(e){return e.values.filter(t=>t.state==="excluded")}function sg(e,t){if(!t||e==="idle")return{};let r=Object.entries(t).map(([n,o])=>{if(!(o.manualRange===void 0||o.manualRange.state!==e))return{[n]:[o.manualRange]}}).filter(n=>n!==void 0).reduce((n,o)=>({...n,...o}),{});return e==="selected"?{mnf:r}:{mnfExcluded:r}}function oP(e){return Bt(e.values).map(r=>r.value)}function qr(e,t){return r=>e.commerceFacetSet[r].request.type===t}l();s();u();c();var Rs=()=>({query:""});var Ja=e=>e.commerceSearch.responseId,cg=e=>e.commerceSearch.requestId,Xa=e=>e.commerceSearch?.products.length||0,ug=re(e=>({total:Ir(e),current:Xa(e)}),({current:e,total:t})=>e<t),lg=e=>{let t=e.commerceSearch?.isLoading;return ee(t)?!1:t},dg=e=>e.commerceSearch?.error??null,As=e=>e.commerceQuery?.query??"",aP=e=>e.commerceSearch?.queryExecuted,mg=(e,t)=>ee(t.queryCorrection?.correctedQuery)?As(e):t.queryCorrection.correctedQuery,pg=e=>({...zl(e?.commerceQuery,t=>t.query,Rs().query),...vs(e)});function fg(e){return{query:aP(e)||""}}var Gl;(t=>t.responseIdSelector=gg(Ja))(Gl||(Gl={}));var Wl;(t=>t.responseIdSelector=gg(Wa))(Wl||(Wl={}));function gg(e){return t=>e(t[K])}var Zl={};yl(Zl,{escapeHtml:()=>mo,getHighlightedSuggestion:()=>Xl,highlightString:()=>sP});l();s();u();c();l();s();u();c();var vn=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function Yl(e){return Array.isArray(e)}function Fs(e){return e.trim()===""}function yg(e){let t={};for(let[r,n]of e)t[r]=n;return t}function Za(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function Ps(e,t,r={}){let n;return(...o)=>{let a=r.isImmediate&&!n;if(clearTimeout(n),n=setTimeout(()=>{n=void 0,r.isImmediate||e.apply(void 0,o)},t),a)return e.apply(void 0,o)}}function sP(e){if(Fs(e.openingDelimiter)||Fs(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(ee(e.content)||Fs(e.content))return e.content;if(e.highlights.length===0)return mo(e.content);let t=e.content.length,r="",n=0;for(let o=0;o<e.highlights.length;o++){let a=e.highlights[o],d=a.offset,m=d+a.length;if(m>t)break;r+=mo(e.content.slice(n,d)),r+=e.openingDelimiter,r+=mo(e.content.slice(d,m)),r+=e.closingDelimiter,n=m}return n!==t&&(r+=mo(e.content.slice(n))),r}function Xl(e,t){return e=mo(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,n,o,a)=>n?Jl(n,t.notMatchDelimiters):o?Jl(o,t.exactMatchDelimiters):a?Jl(a,t.correctionDelimiters):r)}function Jl(e,t){return t?t.open+e+t.close:e}function mo(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=`(?:${Object.keys(t).join("|")})`,n=RegExp(r),o=RegExp(r,"g");return n.test(e)?e.replace(o,a=>t[a]):e}l();s();u();c();l();s();u();c();var Ig=Ot(Fg(),1);l();s();u();c();var ne=new Error("Failed to load reducers."),po=class extends Error{constructor(){super(),this.name="UnauthorizedTokenError",this.message="The token being used to perform the request is unauthorized. It may be expired or invalid."}},An=class extends Error{constructor(r,n){super();xe(this,"statusCode");this.name="Disconnected",this.message=`Client could not connect to the following URL: ${r}`,this.statusCode=n??0}};l();s();u();c();function Pg(e){let t=[];for(let r in e){let n=encodeURIComponent(r),o=encodeURIComponent(e[r]);t.push(`${n}=${o}`)}return t.join("&")}function bg(e){return typeof e!="object"||!e?!1:Object.values(e).every(kP)}function kP(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function wg(e){return e===429}var fo=class e{static async call(t){let r=jP(t),{logger:n}=t,o=await e.preprocessRequest(r,t);n.info(o,"Platform request");let{url:a,...d}=o,m=async()=>{let f=await h(a,d);if(wg(f.status))throw f;return f};try{let f=await(0,Ig.backOff)(m,{startingDelay:100,timeMultiple:2,maxDelay:800,numOfAttempts:4,jitter:"full",retry:async p=>{let g=p&&wg(p.status);return g&&(n.info("Platform retrying request"),await new Promise(C=>setTimeout(C,1e3))),g}});switch(f.status){case 419:case 401:throw n.info("Platform renewing token"),new po;case 404:throw new An(a,f.status);default:return n.info({response:f,requestInfo:o},"Platform response"),f}}catch(f){return f.message==="Failed to fetch"?new An(a):f}}static async preprocessRequest(t,r){let{origin:n,preprocessRequest:o,logger:a,requestMetadata:d}=r,{signal:m,...f}=t,p=Za(f);try{let g=await o(t,n,d);return{...t,...g}}catch(g){a.error(g,"Platform request preprocessing failed. Returning default request options.")}return p}};function Ee(e,t="prod",r="platform"){let n=t==="prod"?"":t,o=r==="platform"?"":`.${r}`;return`https://${e}${o}.org${n}.coveo.com`}function yt(e,t="prod"){return`${Ee(e,t)}/rest/search/v2`}function ws(e,t="prod"){return`${Ee(e,t,"analytics")}/rest/organizations/${e}/events/v1`}function jP(e){let{url:t,method:r,requestParams:n,contentType:o,accessToken:a,signal:d}=e,m=e.method==="POST"||e.method==="PUT",f=VP(n,o);return{url:t,method:r,headers:{"Content-Type":o,Authorization:`Bearer ${a}`,...e.headers},...m&&{body:f},signal:d}}function VP(e,t){return t==="application/x-www-form-urlencoded"?bg(e)?Pg(e):"":JSON.stringify(e)}l();s();u();c();function DP(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function NP(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function cd(e,t){if(t&&e.name==="AbortError")return{error:NP(e)};if(e instanceof An)return{error:DP(e)};throw e}l();s();u();c();l();s();u();c();var Eg=["badges"];var ri=(e,t)=>({...dr(e,t),requestParams:MP(e)}),MP=e=>{let{trackingId:t,clientId:r,context:n,language:o,country:a,currency:d,page:m,perPage:f,facets:p,sort:g}=e;return{trackingId:t,clientId:r,context:n,language:o,country:a,currency:d,page:m,perPage:f,facets:p,sort:g}},dr=(e,t)=>{let{url:r,trackingId:n,accessToken:o}=e,a=LP(r,n,t);return{accessToken:o,method:"POST",contentType:"application/json",url:a,origin:"commerceApiFetch",requestMetadata:{method:t}}},LP=(e,t,r)=>t&&Eg.includes(r)?`${e}/tracking-ids/${t}/${r}`:`${e}/${r}`;l();s();u();c();var qg=e=>({...dr(e,"badges"),requestParams:QP(e)}),QP=e=>{let{language:t,country:r,currency:n,placementIds:o,context:a,clientId:d}=e;return{language:t,country:r,currency:n,placementIds:o,context:a,...d&&{clientId:d}}};l();s();u();c();var Tg=(e,t)=>({...dr(e,t),requestParams:UP(e)}),UP=e=>{let{slotId:t,trackingId:r,clientId:n,context:o,language:a,country:d,currency:m,page:f,perPage:p}=e;return{slotId:t,trackingId:r,clientId:n,context:o,language:a,country:d,currency:m,page:f,perPage:p}};l();s();u();c();var Og=e=>({...dr(e,"search/redirect"),requestParams:BP(e)}),BP=e=>{let{trackingId:t,query:r,clientId:n,context:o,language:a,country:d,currency:m}=e;return{trackingId:t,query:r,clientId:n,context:o,language:a,country:d,currency:m}};l();s();u();c();var kg=e=>({...dr(e,"search/querySuggest"),requestParams:_P(e)}),_P=e=>{let{trackingId:t,query:r,clientId:n,context:o,language:a,country:d,currency:m}=e;return{trackingId:t,query:r,clientId:n,context:o,language:a,country:d,currency:m}};var He=e=>e.error!==void 0,Is=class{constructor(t){this.options=t}async getProductListing(t){let r=ri(t,"listing");return this.query({...r,requestParams:{...r.requestParams,enableResults:!!t?.enableResults},...this.options})}async search(t){let r=ri(t,"search");return this.query({...r,requestParams:{...r.requestParams,query:t?.query,enableResults:!!t?.enableResults},...this.options})}async getRecommendations(t){return this.query({...Tg(t,"recommendations"),...this.options})}async productSuggestions(t){let r=ri(t,"search/productSuggest");return this.query({...r,requestParams:{...r.requestParams,query:t?.query},...this.options})}async querySuggest(t){let r=kg(t);return this.query({...r,requestParams:{...r.requestParams,query:t?.query},...this.options})}async facetSearch(t,r){let n=ri(t,"facet");return this.query({...n,url:`${n.url}?type=${r}`,requestParams:{...n.requestParams,facetId:t?.facetId,facetQuery:t?.facetQuery,query:t?.query,numberOfValues:t?.numberOfValues},...this.options})}async getBadges(t){return this.query({...qg(t),...this.options})}async plan(t){let r=Og(t);return this.query({...r,requestParams:{...r.requestParams,query:t?.query},...this.options})}async query(t){let r=await fo.call(t);if(r instanceof Error)return cd(r);let n=await r.json();return r.ok?{success:n}:{error:n}}};function Es(e,t="prod"){return`${Ee(e,t)}/rest/organizations/${e}/commerce/v2`}l();s();u();c();var Fn=(n=>(n.CHILD_PRODUCT="childProduct",n.PRODUCT="product",n.SPOTLIGHT="spotlight",n))(Fn||{});l();s();u();c();l();s();u();c();var qs=e=>e;l();s();u();c();l();s();u();c();var N=new V({required:!0,emptyAllowed:!1}),Re=new V({required:!1,emptyAllowed:!1}),qe=new V({required:!0,emptyAllowed:!0}),jg=new V({required:!1,emptyAllowed:!0}),Vg=new ae({each:N,required:!0}),Dg=new V({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),Ng=new V({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),Mg=new V({required:!0,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),rt=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),je=(e,t)=>{if("required"in t)return{payload:new pe({value:t}).validate({value:e}).value};let o=new L({options:{required:!0},values:t}).validate(e);if(o)throw new Va(o);return{payload:e}},I=(e,t)=>{try{return je(e,t)}catch(r){return{payload:e,error:rt(r)}}},Ge=(e,t,r,n)=>{let o=`Check the initialState of ${n}`;return Lg(e,t,r,o,"Controller initialization error")},nt=(e,t,r,n)=>{let o=`Check the options of ${n}`;return Lg(e,t,r,o,"Controller initialization error")},Lg=(e,t,r,n,o)=>{try{return t.validate(r,n)}catch(a){throw e.logger.error(a,o),a}};l();s();u();c();l();s();u();c();var Tr="3.45.0",Qg=["@coveo/atomic","@coveo/quantic"];var ud=()=>Re,Ug=()=>N,Pn=A("configuration/updateBasicConfiguration",e=>I(e,{accessToken:Re,environment:new V({required:!1,constrainTo:["prod","hipaa","stg","dev"]}),organizationId:Re})),Bg=A("configuration/updateSearchConfiguration",e=>I(e,{proxyBaseUrl:new V({required:!1,url:!0}),pipeline:new V({required:!1,emptyAllowed:!0}),searchHub:Re,timezone:Re,locale:Re,authenticationProviders:new ae({required:!1,each:N})})),ni={enabled:new X({default:!0}),originContext:ud(),originLevel2:ud(),originLevel3:ud(),proxyBaseUrl:new V({required:!1,url:!0}),runtimeEnvironment:new ve,anonymous:new X({default:!1}),deviceId:Re,userDisplayName:Re,documentLocation:Re,trackingId:Ng,analyticsMode:new V({constrainTo:["legacy","next"],required:!1,default:"next"}),source:new L({options:{required:!1},values:Qg.reduce((e,t)=>(e[t]=Dg,e),{})})},ld=A("configuration/updateAnalyticsConfiguration",e=>I(e,ni)),Ts=A("configuration/analytics/disable"),Os=A("configuration/analytics/enable"),_g=A("configuration/analytics/originlevel2",e=>I(e,{originLevel2:Ug()})),$g=A("configuration/analytics/originlevel3",e=>I(e,{originLevel3:Ug()})),zg=A("knowledge/setAgentId",e=>I(e,new V({required:!0})));var go=A("commerce/configuration/updateBasicConfiguration",e=>I(e,{accessToken:Re,environment:new V({required:!1,constrainTo:["prod","hipaa","stg","dev"]}),organizationId:Re})),yo=A("commerce/configuration/updateProxyBaseUrl",e=>I(e,{proxyBaseUrl:new V({required:!1,url:!0})})),ho=A("commerce/configuration/updateAnalyticsConfiguration",e=>I(e,{enabled:ni.enabled,proxyBaseUrl:ni.proxyBaseUrl,source:ni.source,trackingId:Mg})),ks=A("commerce/configuration/analytics/disable"),js=A("commerce/configuration/analytics/enable");l();s();u();c();l();s();u();c();var Hg=()=>({accessToken:"",environment:"prod",organizationId:"",analytics:{enabled:!0,trackingId:"",source:{}},commerce:{}});var dd=Z(Hg(),e=>e.addCase(go,(t,r)=>{Gg(t,r.payload)}).addCase(Pn,(t,r)=>{Gg(t,r.payload)}).addCase(yo,(t,r)=>{$P(t,r.payload)}).addCase(ho,(t,r)=>{zP(t,r.payload)}).addCase(ks,t=>{t.analytics.enabled=!1}).addCase(js,t=>{t.analytics.enabled=!0}));function Gg(e,t){ee(t.accessToken)||(e.accessToken=t.accessToken),e.environment=t.environment??"prod",ee(t.organizationId)||(e.organizationId=t.organizationId)}function $P(e,t){ee(t.proxyBaseUrl)||(e.commerce.apiBaseUrl=t.proxyBaseUrl)}function zP(e,t){ee(t.enabled)||(e.analytics.enabled=t.enabled),ee(t.proxyBaseUrl)||(e.analytics.apiBaseUrl=t.proxyBaseUrl),ee(t.source)||(e.analytics.source=t.source),ee(t.trackingId)||(e.analytics.trackingId=t.trackingId)}l();s();u();c();l();s();u();c();l();s();u();c();function So(e){return e.currency}var Wg=(e,t)=>({currency:So(t.commerceContext),products:HP(t.cart),transaction:e}),Kg=(e,t)=>({currency:So(t.commerceContext),...e}),bn=re(e=>e.cart,e=>e.cartItems,(e,t)=>t.map(r=>e[r])),HP=re(bn,e=>e.map(({quantity:t,...r})=>({quantity:t,product:r})));l();s();u();c();var md={productId:N,quantity:new W({required:!0,min:0}),name:new V({required:!1}),price:new W({required:!1,min:0})},pd=new ae({each:new L({values:{...md}})}),fd={items:pd},Yg=new pe(fd);var Or=A("commerce/cart/setItems",e=>I(e,pd)),Co=A("commerce/cart/updateItemQuantity",e=>I(e,md)),xo=A("commerce/cart/purchase"),Vs=te("commerce/cart/emit/purchaseEvent",async(e,{extra:t,getState:r})=>{let n=Wg(e,r()),{relay:o}=t;o.emit("ec.purchase",n)}),Ds=te("commerce/cart/emit/cartActionEvent",async(e,{extra:t,getState:r})=>{let n=Kg(e,r()),{relay:o}=t;o.emit("ec.cartAction",n)});l();s();u();c();l();s();u();c();l();s();u();c();function ie(e){let t,r=new Map,n=()=>r.size===0,o=a=>{try{let d=JSON.stringify(a),m=t!==d;return t=d,m}catch(d){return console.warn('Could not detect if state has changed, check the controller "get state method"',d),!0}};return{subscribe(a){a();let d=Symbol(),m;return n()&&(t=JSON.stringify(this.state),m=e.subscribe(()=>{o(this.state)&&r.forEach(f=>f())})),r.set(d,a),()=>{r.delete(d),n()&&m?.()}},get state(){return{}}}}l();s();u();c();function Jg(e,t){return e.cart[wn(t)]}var Xg=re(bn,e=>e.reduce((t,r)=>t+r.quantity,0)),Zg=re(bn,e=>e.reduce((t,r)=>t+r.price*r.quantity,0));function ey(e,t={}){if(!GP(e))throw ne;let{dispatch:r}=e,n=ie(e),o=()=>e[K].cart,a={...t.initialState};Ge(e,Yg,a,"buildCart"),a.items!==void 0&&r(Or(a.items));function d(g,C){return C?C.quantity!==g.quantity:!0}function m(g,C){return!C||g.quantity>C.quantity?"add":"remove"}function f(g,C){return C?g.name===C.name&&g.price===C.price&&g.quantity===C.quantity:!1}function p(g,C){let{quantity:v,...x}=g,R=m(g,C),F=C?Math.abs(v-C.quantity):v;return{action:R,quantity:F,product:x}}return{...n,empty:function(){for(let g of bn(o()))this.updateItemQuantity({...g,quantity:0})},purchase(g){r(Vs(g)),r(xo())},updateItemQuantity(g){let C=Jg(o(),g);!C&&g.quantity<=0||f(g,C)||(d(g,C)&&r(Ds(p(g,C))),r(Co(g)))},get state(){let g=o();return{items:bn(g),totalQuantity:Xg(g),totalPrice:Zg(g)}}}}function wn(e){return`${e.productId},${e.name},${e.price}`}function GP(e){return e.addReducers({cart:vo}),!0}l();s();u();c();var Ns=()=>({cartItems:[],cart:{},purchasedItems:[],purchased:{}}),ty=e=>ny(e.cartItems,e.cart),ry=e=>ny(e.purchasedItems,e.purchased);function ny(e,t){let r=e.reduce((n,o)=>{let{productId:a,quantity:d}=t[o];return a in n||(n[a]={productId:a,quantity:0}),n[a].quantity+=d,n},{});return[...Object.values(r)]}var vo=Z(Ns(),e=>{e.addCase(Or,(t,{payload:r})=>{let{cart:n,cartItems:o}=r.reduce((a,d)=>{let m=wn(d);return{cartItems:[...a.cartItems,m],cart:{...a.cart,[m]:d},purchasedItems:[],purchased:{}}},Ns());oy(t,o,n)}).addCase(Co,(t,{payload:r})=>{let n=wn(r);if(!(n in t.cart)){WP(r,t);return}if(r.quantity<=0){KP(r,t);return}t.cart[n]=r}).addCase(xo,t=>{YP(t);let{cart:r,cartItems:n}=Ns();oy(t,n,r)})});function oy(e,t,r){e.cartItems=t,e.cart=r}function WP(e,t){if(e.quantity<=0)return;let r=wn(e);t.cartItems=[...t.cartItems,r],t.cart[r]=e}function KP(e,t){let r=wn(e);t.cartItems=t.cartItems.filter(n=>n!==r),delete t.cart[r]}function YP(e){for(let t of e.cartItems){if(t in e.purchased){e.purchased[t].quantity+=e.cart[t].quantity;continue}e.purchasedItems=[...e.purchasedItems,t],e.purchased[t]=e.cart[t]}}l();s();u();c();l();s();u();c();var JP=Intl.supportedValuesOf("currency"),XP=new V({required:!0,emptyAllowed:!1,constrainTo:JP}),gd={url:N},yd={latitude:new W({min:-90,max:90,required:!0}),longitude:new W({min:-180,max:180,required:!0})},ay={custom:new L({options:{required:!1}})},oi={language:N,country:N,currency:XP,view:new L({options:{required:!0},values:gd}),location:new L({options:{required:!1},values:yd}),custom:new L({options:{required:!1}})},iy=new pe(oi);var Pe=A("commerce/context/set",e=>I(e,oi)),we=A("commerce/context/setView",e=>I(e,gd)),Ro=A("commerce/context/setLocation",e=>I(e,yd)),Ao=A("commerce/context/setCustom",e=>I({custom:e},ay));l();s();u();c();l();s();u();c();var sy=()=>({language:"",country:"",currency:"",view:{url:""}});var _t=Z(sy(),e=>{e.addCase(Pe,(t,{payload:r})=>r).addCase(we,(t,{payload:r})=>{t.view=r}).addCase(Ro,(t,{payload:r})=>{t.location=r}).addCase(Ao,(t,{payload:r})=>{t.custom=r.custom})});l();s();u();c();l();s();u();c();var Ms=()=>({correctedQuery:"",corrections:[],originalQuery:""});l();s();u();c();l();s();u();c();l();s();u();c();var kr=re(e=>e.source,e=>Object.entries(e).map(([t,r])=>`${t}@${r}`).concat(`@coveo/headless@${Tr}`));var $t=(e,t)=>{let{view:r,location:n,custom:o,...a}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.commerce.apiBaseUrl??Es(e.configuration.organizationId,e.configuration.environment),organizationId:e.configuration.organizationId,trackingId:e.configuration.analytics.trackingId,...a,...e.configuration.analytics.enabled?{clientId:t.clientId}:{},context:{user:{...n,...t.userAgent?{userAgent:t.userAgent}:{}},view:{...r,...t.referrer?{referrer:t.referrer}:{}},capture:t.capture??(e.configuration.analytics.enabled&&t.clientId!==""),cart:ty(e.cart),source:kr(e.configuration.analytics),...o?{custom:o}:{}}}};l();s();u();c();l();s();u();c();var Ls=(e,t,r)=>({...$t(e,t),...ZP(e,r)}),ZP=(e,t)=>{let r=t?e.commercePagination?.recommendations[t]:e.commercePagination?.principal;return r&&{page:r.page,...r.perPage&&{perPage:r.perPage}}};var ht=(e,t)=>({...Ls(e,t),facets:[...eb(e)],...e.commerceSort&&{sort:tb(e.commerceSort.appliedSort)}});function eb(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.filter(t=>e.commerceFacetSet?.[t]).map(t=>e.manualNumericFacetSet?.[t]?.manualRange?{facetId:t,field:t,numberOfValues:1,isFieldExpanded:!1,preventAutoSelect:!0,type:"numericalRange",values:[e.manualNumericFacetSet[t].manualRange],initialNumberOfValues:1}:e.commerceFacetSet[t].request).filter(t=>t&&t.values.length>0)}function tb(e){return e.by==="relevance"?{sortCriteria:"relevance"}:{sortCriteria:"fields",fields:e.fields.map(({name:t,direction:r})=>({field:t,direction:r}))}}l();s();u();c();var In=A("commerce/facets/core/updateNumberOfValues",e=>I(e,{facetId:N,numberOfValues:new W({required:!0,min:1})})),En=A("commerce/facets/core/updateIsFieldExpanded",e=>I(e,{facetId:N,isFieldExpanded:new X({required:!0})})),Ve=A("commerce/facets/core/clearAll"),jr=A("commerce/facets/core/deleteAll"),We=A("commerce/facets/core/deselectAllValues",e=>I(e,{facetId:N})),qn=A("commerce/facets/core/updateFreezeCurrentValues",e=>I(e,{facetId:N,freezeCurrentValues:new X({required:!0})})),Fo=A("commerce/facets/core/updateAutoSelectionForAll",e=>I(e,{allow:new X({required:!0})}));l();s();u();c();var Qs={slotId:jg},rb={...Qs,pageSize:new W({required:!0,min:0})},mr=A("commerce/pagination/setPageSize",e=>I(e,rb)),nb={...Qs,page:new W({required:!0,min:0})},zt=A("commerce/pagination/selectPage",e=>I(e,nb)),Vr=A("commerce/pagination/nextPage",e=>I(e,Qs)),Dr=A("commerce/pagination/previousPage",e=>I(e,Qs)),Po=A("commerce/pagination/registerRecommendationsSlot",e=>I(e,{slotId:N}));l();s();u();c();var Te=A("commerce/query/update",e=>I(e,{query:new V}));l();s();u();c();l();s();u();c();var Nr=A("commerce/triggers/query/updateIgnore",e=>I(e,{q:new V({emptyAllowed:!0,required:!0})})),bo=A("commerce/triggers/query/applyModification",e=>I(e,new L({values:{originalQuery:Re,modification:Re}})));var ai=class{constructor(t){this.config=t}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}async fetchFromAPI(t){let r=Date.now(),n=await this.extra.apiClient.search(t),o=Date.now()-r,a=this.getState().commerceQuery.query||"";return{response:n,duration:o,queryExecuted:a,requestExecuted:t,enableResults:!!("enableResults"in t&&t.enableResults)}}processSuccessResponse(t){return{...t,response:this.getSuccessResponse(t),originalQuery:this.getCurrentQuery()}}processQueryErrorOrContinue(t){return He(t.response)?this.rejectWithValue(t.response.error):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{queryCorrection:o}=n;if(!(!ee(o)&&!ee(o.correctedQuery)))return null;let{correctedQuery:d,originalQuery:m}=n.queryCorrection;return this.onUpdateQueryForCorrection(d??""),{...t,response:{...n},queryExecuted:mg(r,n),originalQuery:m??""}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(m=>m.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(Nr({q:""})),null;let a=this.getCurrentQuery(),d=await this.automaticallyRetryQueryWithTriggerModification(n,t.enableResults);return He(d.response)?this.rejectWithValue(d.response.error):{...d,response:{...d.response.success},originalQuery:a}}async automaticallyRetryQueryWithTriggerModification(t,r){return this.dispatch(bo({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI({...ht(this.getState(),this.navigatorContext),query:t,enableResults:!!r})}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getState(){return this.config.getState()}get navigatorContext(){return this.config.extra.navigatorContext}getCurrentQuery(){let t=this.getState();return t.commerceQuery.query!==void 0?t.commerceQuery.query:""}getSuccessResponse(t){return He(t.response)?null:t.response.success}get extra(){return this.config.extra}onUpdateQueryForCorrection(t){this.dispatch(Te({query:t}))}};var ue=te("commerce/search/executeSearch",async(e={},t)=>{let{getState:r}=t,n=r(),{navigatorContext:o}=t.extra,a=ht(n,o),d=As(n),m=new ai(t),f=await m.fetchFromAPI({...a,query:d,enableResults:!!e?.enableResults});return m.process(f)}),Mr=te("commerce/search/fetchMoreProducts",async(e={},t)=>{let{getState:r}=t,n=r(),{navigatorContext:o}=t.extra;if(!ug(n))return null;let d=wr(n),f=Xa(n)/d,p=As(n),g=ht(n,o),C=new ai(t),v=await C.fetchFromAPI({...g,query:p,page:f,enableResults:!!e?.enableResults});return C.process(v)}),wo=te("commerce/search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;I(e,{query:new V,clearFilters:new X}),e.clearFilters&&r(jr()),r(Fo({allow:!0})),r(Te({query:e.query})),r(zt({page:0}))}),Io=te("commerce/search/fetchInstantProducts",async(e,{getState:t,rejectWithValue:r,extra:n})=>{let o=t(),{apiClient:a,navigatorContext:d}=n,{q:m}=e,f=await a.productSuggestions({...$t(o,d),query:m});return He(f)?r(f.error):{response:{...f.success,products:f.success.products}}}),ob={child:new L({options:{required:!0},values:{permanentid:new V({required:!0})}})},Eo=A("commerce/search/promoteChildToParent",e=>I(e,ob));l();s();u();c();function cy(){return{wasCorrectedTo:"",queryCorrection:Ms(),originalQuery:""}}var Us=Z(cy(),e=>{e.addCase(ue.pending,t=>{t.queryCorrection=Ms(),t.wasCorrectedTo=""}).addCase(ue.fulfilled,(t,r)=>{let{queryCorrection:n}=r.payload.response;t.originalQuery=r.payload.originalQuery,t.wasCorrectedTo=n?.correctedQuery??"",t.queryCorrection={correctedQuery:n?.correctedQuery??n?.corrections[0]?.correctedQuery??"",wordCorrections:n?.corrections[0]?.wordCorrections??[]}})});l();s();u();c();l();s();u();c();l();s();u();c();var le=N;l();s();u();c();var ii={facetId:le,captions:new L({options:{required:!1}}),numberOfValues:new W({required:!1,min:1}),query:new V({required:!1,emptyAllowed:!0})};var ab={path:new ae({required:!0,each:N}),displayValue:qe,rawValue:qe,count:new W({required:!0,min:0})},St=A("categoryFacet/selectSearchResult",e=>I(e,{facetId:le,value:new L({values:ab})})),Bs=A("categoryFacetSearch/register",e=>I(e,ii));l();s();u();c();var uy={facetId:le,value:new L({values:{displayValue:qe,rawValue:qe,count:new W({required:!0,min:0})}})},_s=A("facetSearch/register",e=>I(e,ii)),Lr=A("facetSearch/update",e=>I(e,ii)),mt=A("facetSearch/toggleSelectValue",e=>I(e,uy)),Vt=A("facetSearch/toggleExcludeValue",e=>I(e,uy));l();s();u();c();l();s();u();c();var Ht=A("breadcrumb/deselectAll"),$s=A("breadcrumb/deselectAllNonBreadcrumbs");l();s();u();c();var pr=A("facetOptions/update",(e={freezeFacetOrder:!0})=>I(e,{freezeFacetOrder:new X({required:!1})})),hd=A("facetOptions/facet/enable",e=>I(e,le)),fr=A("facetOptions/facet/disable",e=>I(e,le));l();s();u();c();var ib=A("history/undo"),sb=A("history/redo"),Gt=A("history/snapshot"),d$=te("history/back",async(e,{dispatch:t})=>{t(ib()),await t(De())}),m$=te("history/forward",async(e,{dispatch:t})=>{t(sb()),await t(De())}),De=te("history/change",async(e,{getState:t})=>t().history.present);l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var qo=class e{static set(t,r,n){let o,a,d;n&&(a=new Date,a.setTime(a.getTime()+n));let m=window.location.hostname,f=/^(\d{1,3}\.){3}\d{1,3}$/,p=/^([0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}$/;f.test(m)||p.test(m)||m.indexOf(".")===-1?Sd(t,r,a):(d=m.split("."),o=d[d.length-2]+"."+d[d.length-1],Sd(t,r,a,o))}static get(t){let r=t+"=",n=document.cookie.split(";");for(let o=0;o<n.length;o++){let a=n[o];if(a=a.replace(/^\s+/,""),a.lastIndexOf(r,0)===0)return a.substring(r.length,a.length)}return null}static erase(t){e.set(t,"",-1)}};function Sd(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}l();s();u();c();function cb(){return typeof navigator<"u"}function ly(){try{return typeof localStorage<"u"}catch{return!1}}function dy(){try{return typeof sessionStorage<"u"}catch{return!1}}function my(){return!!(cb()&&navigator.cookieEnabled)}var py=null;function fy(){return py||(ly()?localStorage:my()?new Cd:dy()?sessionStorage:new xd)}var To=class To{getItem(t){return qo.get(`${To.prefix}${t}`)}removeItem(t){qo.erase(`${To.prefix}${t}`)}setItem(t,r,n){qo.set(`${To.prefix}${t}`,r,n)}};xe(To,"prefix","coveo_");var Cd=To;var xd=class{getItem(t){return null}removeItem(t){}setItem(t,r){}};var zs="__coveo.analytics.history",ub=20,lb=1e3*60,db=75,Tn=class Tn{constructor(t){xe(this,"store");this.store=t||fy()}static getInstance(t){return Tn.instance||(Tn.instance=new Tn(t)),Tn.instance}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}async addElementAsync(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=await this.getHistoryWithInternalTimeAsync();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}async getHistoryAsync(){let t=await this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryWithInternalTime(){try{let t=this.store.getItem(zs);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}async getHistoryWithInternalTimeAsync(){try{let t=await this.store.getItem(zs);return t?JSON.parse(t):[]}catch{return[]}}setHistory(t){try{this.store.setItem(zs,JSON.stringify(t.slice(0,ub)))}catch{}}clear(){try{this.store.removeItem(zs)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,o)=>(o.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,db)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value===t.value?(t.internalTime||0)-(r.internalTime||0)>lb:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:o,value:a}=r;return{name:n,time:o,value:a}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:o}=t;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};xe(Tn,"instance",null);var vd=Tn,Ct=vd;l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var gy=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function mb(e){return typeof e=="string"&&gy.test(e)}var Rd=mb;l();s();u();c();var Be=[];for(let e=0;e<256;++e)Be.push((e+256).toString(16).slice(1));function yy(e,t=0){return(Be[e[t+0]]+Be[e[t+1]]+Be[e[t+2]]+Be[e[t+3]]+"-"+Be[e[t+4]]+Be[e[t+5]]+"-"+Be[e[t+6]]+Be[e[t+7]]+"-"+Be[e[t+8]]+Be[e[t+9]]+"-"+Be[e[t+10]]+Be[e[t+11]]+Be[e[t+12]]+Be[e[t+13]]+Be[e[t+14]]+Be[e[t+15]]).toLowerCase()}l();s();u();c();var Ad,pb=new Uint8Array(16);function Fd(){if(!Ad){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ad=crypto.getRandomValues.bind(crypto)}return Ad(pb)}l();s();u();c();l();s();u();c();var fb=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Pd={randomUUID:fb};function gb(e,t,r){e=e||{};let n=e.random??e.rng?.()??Fd();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)t[r+o]=n[o];return t}return yy(n)}function yb(e,t,r){return Pd.randomUUID&&!t&&!e?Pd.randomUUID():gb(e,t,r)}var bd=yb;l();s();u();c();function hy(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}function hb({config:e,environment:t,event:r,listenerManager:n}){let{url:o,token:a,mode:d}=e;d!=="disabled"&&(n.call(r),t.send(o,a,r))}var Sy="visitorId";function Sb(e){return{getClientId:()=>{let t=e.get(),r=t.storage,n=r.getItem(Sy),o=n&&Rd(n)?n:t.generateUUID();return r.setItem(Sy,o),o}}}var Ay="1.2.15",wd=128,Fy=192,Cy=224,xy=240,Cb=248;function xb(e){return(e&Cb)===xy?4:(e&xy)===Cy?3:(e&Cy)===Fy?2:1}function vb(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let n=Number.parseInt(e.substring(r-2,r),16);if((n&wd)!=wd)break;if(r-=3,(n&Fy)!=wd){t-r>=xb(n)*3&&(r=t);break}}return e.substring(0,r)}function Rb(e){let{trackingId:t}=e;return{trackingId:t}}function Ab(e){return(e.source||[]).concat([`relay@${Ay}`])}function Py(e,t,r,n){let{getReferrer:o,getLocation:a,getUserAgent:d}=r,m=Rb(t),f=n.getClientId();return Object.freeze({type:e,config:m,ts:Date.now(),source:Ab(t),clientId:f,userAgent:d(),referrer:vy(o()),location:vy(a())})}function vy(e){return e!==null?vb(e,1024):null}function Fb(e,t,r,n,o){return{...t,meta:Py(e,r,n,o)}}var Pb="*";function bb(){let e=[];function t({type:f,callback:p}){return e.findIndex(g=>g.type===f&&g.callback===p)}function r(f,p){return f.type==="*"||p===f.type}function n(f){return t(f)<0&&e.push(f),()=>m(f.type,f.callback)}function o(f){e.forEach(p=>{if(r(p,f.meta.type))try{p.callback(f)}catch(g){console.error(g)}})}function a(f){if(f===Pb)e.length=0;else for(let p=e.length-1;p>=0;p--)e[p].type===f&&e.splice(p,1)}function d(f){let p=t(f);p>=0&&e.splice(p,1)}function m(f,p){p?d({type:f,callback:p}):a(f)}return{add:n,call:o,remove:m}}function Ry({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source},...!!n.environment&&{environment:n.environment}})}function wb(e){let t=Ry(e);return{get:()=>t,update:r=>{t=Ry({...t,...r})}}}var Id=Ib();function Ib(){let e="coveo_",t=r=>{let n=r.split(".").slice(-2);return n.length==2?n.join("."):""};return{getItem(r){let n=`${e}${r}=`,o=document.cookie.split(";");for(let a of o){let d=a.replace(/^\s+/,"");if(d.lastIndexOf(n,0)===0)return d.substring(n.length,d.length)}return null},setItem(r,n,o){let a=t(window.location.hostname),d=`;expires=${new Date(new Date().getTime()+o).toUTCString()}`,m=a?`;domain=${a}`:"";document.cookie=`${e}${r}=${n}${d}${m};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function Eb(){return{getItem(e){return Id.getItem(e)||localStorage.getItem(e)},removeItem(e){Id.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),Id.setItem(e,t,31556952e3)}}}function qb(){let e=document.referrer;return e===""?null:e}function Ed(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(hy().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>qb(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>bd(),storage:Eb()}}function Tb(){try{let e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return e instanceof DOMException&&e.name==="QuotaExceededError"&&localStorage&&localStorage.length!==0}}function Ob(){return{getItem(){return null},removeItem(){},setItem(){}}}function kb(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:Ob()}}function jb(e){let t=e.get().mode!=="disabled",r=e.get().environment,n=kb();return t&&r?{storage:n.storage,...r,runtime:"custom"}:t&&Vb()&&Tb()?Ed():n}function Vb(){try{return typeof window=="object"}catch{return!1}}function Db(e){return{get:()=>Object.freeze(jb(e))}}function by(e){let t=wb(e),r=bb(),n=Db(t),o=Sb(n);return{emit:(a,d)=>{let m=t.get(),f=n.get(),p=Fb(a,d,m,f,o);return hb({config:m,environment:f,event:p,listenerManager:r})},getMeta:a=>Py(a,t.get(),n.get(),o),on:(a,d)=>r.add({type:a,callback:d}),off:(a,d)=>r.remove(a,d),updateConfig:a=>t.update(a),version:Ay}}l();s();u();c();function wy(){return typeof window<"u"&&typeof document<"u"}var si=re(e=>e.configuration.organizationId,e=>e.configuration.environment,e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>kr(e.configuration.analytics),(e,t)=>t,(e,t,r,{trackingId:n,apiBaseUrl:o,enabled:a},d,m)=>{let f=Mb(m);return by({mode:a?"emit":"disabled",url:o??ws(e,t),token:r,trackingId:n??null,source:d,environment:f})}),Nb={generateUUID:()=>"",getLocation:()=>null,getReferrer:()=>null,getUserAgent:()=>null,send:()=>{},storage:{getItem:()=>null,setItem:()=>{},removeItem:()=>{}}},Mb=e=>{if(!e)return;let t=e();return{...wy()?Ed():Nb,generateUUID:()=>t.clientId,getLocation:()=>t.location,getReferrer:()=>t.referrer,getUserAgent:()=>t.userAgent}};l();s();u();c();l();s();u();c();function gr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function D(e,t,r,n){function o(a){return a instanceof r?a:new r(function(d){d(a)})}return new(r||(r=Promise))(function(a,d){function m(g){try{p(n.next(g))}catch(C){d(C)}}function f(g){try{p(n.throw(g))}catch(C){d(C)}}function p(g){g.done?a(g.value):o(g.value).then(m,f)}p((n=n.apply(e,t||[])).next())})}var ge;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(ge||(ge={}));function Od(){return typeof window<"u"}function zd(){return typeof navigator<"u"}function Oo(){return typeof document<"u"}function kd(){try{return typeof localStorage<"u"}catch{return!1}}function Lb(){try{return typeof sessionStorage<"u"}catch{return!1}}function Uy(){return zd()&&navigator.cookieEnabled}var Qb=[ge.click,ge.custom,ge.search,ge.view],Ub=(e,t)=>Qb.indexOf(e)!==-1?Object.assign({language:Oo()?document.documentElement.lang:"unknown",userAgent:zd()?navigator.userAgent:"unknown"},t):t,ui=class e{static set(t,r,n){var o,a,d,m;n&&(a=new Date,a.setTime(a.getTime()+n)),m=window.location.hostname,m.indexOf(".")===-1?Iy(t,r,a):(d=m.split("."),o=d[d.length-2]+"."+d[d.length-1],Iy(t,r,a,o))}static get(t){for(var r=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var a=n[o];if(a=a.replace(/^\s+/,""),a.lastIndexOf(r,0)===0)return a.substring(r.length,a.length)}return null}static erase(t){e.set(t,"",-1)}};function Iy(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function Bb(){return kd()?localStorage:Uy()?new li:Lb()?sessionStorage:new jo}var li=class e{getItem(t){return ui.get(`${e.prefix}${t}`)}removeItem(t){ui.erase(`${e.prefix}${t}`)}setItem(t,r,n){ui.set(`${e.prefix}${t}`,r,n)}};li.prefix="coveo_";var jd=class{constructor(){this.cookieStorage=new li}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3)}},jo=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},Hs="__coveo.analytics.history",_b=20,$b=1e3*60,zb=75,Ks=class{constructor(t){this.store=t||Bb()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return D(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return D(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(Hs);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return D(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(Hs);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(Hs,JSON.stringify(t.slice(0,_b)))}catch{}}clear(){try{this.store.removeItem(Hs)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,o)=>(o.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,zb)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>$b:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:o,value:a}=r;return{name:n,time:o,value:a}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:o}=t;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};var Hb=(e,t)=>D(void 0,void 0,void 0,function*(){return e===ge.view?(yield Gb(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),Gb=e=>D(void 0,void 0,void 0,function*(){let t=new Ks,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),Gs,Wb=new Uint8Array(16);function Kb(){if(!Gs&&(Gs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Gs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Gs(Wb)}var Yb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ys(e){return typeof e=="string"&&Yb.test(e)}var _e=[];for(let e=0;e<256;++e)_e.push((e+256).toString(16).slice(1));function By(e,t=0){return _e[e[t+0]]+_e[e[t+1]]+_e[e[t+2]]+_e[e[t+3]]+"-"+_e[e[t+4]]+_e[e[t+5]]+"-"+_e[e[t+6]]+_e[e[t+7]]+"-"+_e[e[t+8]]+_e[e[t+9]]+"-"+_e[e[t+10]]+_e[e[t+11]]+_e[e[t+12]]+_e[e[t+13]]+_e[e[t+14]]+_e[e[t+15]]}function Jb(e){if(!Ys(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function Xb(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var Zb="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ew="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function tw(e,t,r){function n(o,a,d,m){var f;if(typeof o=="string"&&(o=Xb(o)),typeof a=="string"&&(a=Jb(a)),((f=a)===null||f===void 0?void 0:f.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let p=new Uint8Array(16+o.length);if(p.set(a),p.set(o,a.length),p=r(p),p[6]=p[6]&15|t,p[8]=p[8]&63|128,d){m=m||0;for(let g=0;g<16;++g)d[m+g]=p[g];return d}return By(p)}try{n.name=e}catch{}return n.DNS=Zb,n.URL=ew,n}var rw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ey={randomUUID:rw};function On(e,t,r){if(Ey.randomUUID&&!t&&!e)return Ey.randomUUID();e=e||{};let n=e.random||(e.rng||Kb)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return By(n)}function nw(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function qd(e,t){return e<<t|e>>>32-t}function ow(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let d=unescape(encodeURIComponent(e));e=[];for(let m=0;m<d.length;++m)e.push(d.charCodeAt(m))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,o=Math.ceil(n/16),a=new Array(o);for(let d=0;d<o;++d){let m=new Uint32Array(16);for(let f=0;f<16;++f)m[f]=e[d*64+f*4]<<24|e[d*64+f*4+1]<<16|e[d*64+f*4+2]<<8|e[d*64+f*4+3];a[d]=m}a[o-1][14]=(e.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(e.length-1)*8&4294967295;for(let d=0;d<o;++d){let m=new Uint32Array(80);for(let x=0;x<16;++x)m[x]=a[d][x];for(let x=16;x<80;++x)m[x]=qd(m[x-3]^m[x-8]^m[x-14]^m[x-16],1);let f=r[0],p=r[1],g=r[2],C=r[3],v=r[4];for(let x=0;x<80;++x){let R=Math.floor(x/20),F=qd(f,5)+nw(R,p,g,C)+v+t[R]+m[x]>>>0;v=C,C=g,g=qd(p,30)>>>0,p=f,f=F}r[0]=r[0]+f>>>0,r[1]=r[1]+p>>>0,r[2]=r[2]+g>>>0,r[3]=r[3]+C>>>0,r[4]=r[4]+v>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var aw=tw("v5",80,ow),qy=aw,_y="2.30.52",Ty=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,ci={pageview:"pageview",event:"event"},Js=class{constructor({client:t,uuidGenerator:r=On}){this.client=t,this.uuidGenerator=r}},Vd=class extends Js{constructor({client:t,uuidGenerator:r=On}){super({client:t,uuidGenerator:r}),this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=Ty(window.location),this.lastReferrer=Oo()?document.referrer:"",this.addHooks()}getApi(t){switch(t){case"setAction":return this.setAction;default:return null}}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:Oo()?document.title:"",encoding:Oo()?document.characterSet:"UTF-8"},n={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},o={language:navigator.language,userAgent:navigator.userAgent},a={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},a),n),o),r)}updateLocationForNextPageView(t,r){let{pageViewId:n,referrer:o,location:a}=this.getNextValues(t,r);this.lastReferrer=o,this.pageViewId=n,this.currentLocation=a,t===ci.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===ci.pageview?this.nextPageViewId:this.pageViewId,referrer:t===ci.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===ci.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=o=>o.replace(/^\/?(.*)$/,"/$1");return`${(o=>o.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return Ty(window.location)}},Qr=class e{constructor(t,r){if(!Ys(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let n=new URL(t);return r.some(o=>new RegExp(o.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(n.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,o]=r;if(n.length!==32||isNaN(parseInt(o)))return null;let a=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return Ys(a)?new e(a,Number.parseInt(o)*1e3):null}};Qr.cvo_cid="cvo_cid";Qr.expirationTime=120;var Dd=class extends Js{constructor({client:t,uuidGenerator:r=On}){super({client:t,uuidGenerator:r})}getApi(t){switch(t){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(t){return D(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(t),n=yield this.client.getCurrentVisitorId();return r.searchParams.set(Qr.cvo_cid,new Qr(n,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(t){this.client.setAcceptedLinkReferrers(t)}};Dd.Id="link";var vt=Object.keys;function Ws(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var Td=128,$y=192,Oy=224,ky=240;function iw(e){return(e&248)===ky?4:(e&ky)===Oy?3:(e&Oy)===$y?2:1}function sw(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let n=Number.parseInt(e.substring(r-2,r),16);if((n&Td)!=Td)break;if(r-=3,(n&$y)!=Td){t-r>=iw(n)*3&&(r=t);break}}return e.substring(0,r)}var Nd={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},cw=vt(Nd).map(e=>Nd[e]),uw=[...cw].join("|"),lw=new RegExp(`^(${uw}$)`),dw={svcAction:"svc_action",svcActionData:"svc_action_data"},mw=e=>vt(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let n=Nd[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})},{}),pw=e=>lw.test(e),fw=[pw],jy={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Vy={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Ke={action:"pa",list:"pal",listSource:"pls"},Xs={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},gw=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Md={id:"quoteId",affiliation:"quoteAffiliation"},Ld={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},yw={add:Ke,bookmark_add:Ke,bookmark_remove:Ke,click:Ke,checkout:Ke,checkout_option:Ke,detail:Ke,impression:Ke,remove:Ke,refund:Object.assign(Object.assign({},Ke),Xs),purchase:Object.assign(Object.assign({},Ke),Xs),quickview:Ke,quote:Object.assign(Object.assign({},Ke),Md),review:Object.assign(Object.assign({},Ke),Ld)},hw=vt(jy).map(e=>jy[e]),Sw=vt(Vy).map(e=>Vy[e]),Cw=vt(Ke).map(e=>Ke[e]),xw=vt(Xs).map(e=>Xs[e]),vw=vt(Ld).map(e=>Ld[e]),Rw=vt(Md).map(e=>Md[e]),Aw=[...hw,"custom"].join("|"),Fw=[...Sw,"custom"].join("|"),zy="(pr[0-9]+)",Hy="(il[0-9]+pi[0-9]+)",Pw=new RegExp(`^${zy}(${Aw})$`),bw=new RegExp(`^(${Hy}(${Fw}))|(il[0-9]+nm)$`),ww=new RegExp(`^(${Cw.join("|")})$`),Iw=new RegExp(`^(${xw.join("|")})$`),Ew=new RegExp(`^${zy}custom$`),qw=new RegExp(`^${Hy}custom$`),Tw=new RegExp(`^(${[...gw,...vw,...Rw].join("|")})$`),Ow=e=>Pw.test(e),kw=e=>bw.test(e),jw=e=>ww.test(e),Vw=e=>Iw.test(e),Dw=e=>Tw.test(e),Nw=[kw,Ow,jw,Vw,Dw],Mw=[Ew,qw],Lw={anonymizeIp:"aip"},Qw={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},Uw={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},Bw=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],_w=Object.assign(Object.assign(Object.assign(Object.assign({},Lw),Qw),Uw),Bw.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),Qd=Object.assign(Object.assign({},_w),dw),$w=e=>{let t=!!e.action&&yw[e.action]||{};return vt(e).reduce((r,n)=>{let o=t[n]||Qd[n]||n;return Object.assign(Object.assign({},r),{[o]:e[n]})},{})},zw=vt(Qd).map(e=>Qd[e]),Hw=e=>zw.indexOf(e)!==-1,Gw=e=>e==="custom",Ww=e=>[...Nw,...fw,Hw,Gw].some(t=>t(e)),Kw=e=>vt(e).reduce((t,r)=>{let n=Yw(r);return n?Object.assign(Object.assign({},t),Jw(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),Yw=e=>{let t;return[...Mw].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t}),t},Jw=(e,t)=>vt(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),Ud=class{constructor(t){this.opts=t}sendEvent(t,r){return D(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:n,preprocessRequest:o}=this.opts,a=yield this.getQueryParamsForEventType(t),{url:d,payload:m}=yield this.preProcessRequestAsPotentialJSONString(`${n}/analytics/${t}?${a}`,r,o),f=this.encodeForEventType(t,m),p=new Blob([f],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(d,p)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,n){return D(this,void 0,void 0,function*(){let o=t,a=r;if(n){let d=yield n({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:m,body:f}=d;o=m||t;try{a=JSON.parse(f)}catch(p){console.error("Unable to process the request body as a JSON string",p)}}return{payload:a,url:o}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeEventToJson(t,r):this.encodeEventToJson(t,r,this.opts.token)}getQueryParamsForEventType(t){return D(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:n}=this.opts,o=yield n.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",o?`visitorId=${o}`:"","discardVisitInfo=true"].filter(a=>!!a).join("&")})}isEventTypeLegacy(t){return[ge.click,ge.custom,ge.search,ge.view].indexOf(t)!==-1}encodeEventToJson(t,r,n){let o=`${t}Event=${encodeURIComponent(JSON.stringify(r))}`;return n&&(o=`access_token=${encodeURIComponent(n)}&${o}`),o}},Bd=class{sendEvent(t,r){return D(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return D(this,void 0,void 0,function*(){return Promise.resolve()})}},Dy=y.fetch,Zs=class{constructor(t){this.opts=t}sendEvent(t,r){return D(this,void 0,void 0,function*(){let{baseUrl:n,visitorIdProvider:o,preprocessRequest:a}=this.opts,d=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",m={url:`${n}/analytics/${t}${d}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},f=Object.assign(Object.assign({},m),a?yield a(m,"analyticsFetch"):{}),{url:p}=f,g=gr(f,["url"]),C;try{C=yield Dy(p,g)}catch(v){console.error("An error has occured when sending the event.",v);return}if(C.ok){let v=yield C.json();return v.visitorId&&o.setCurrentVisitorId(v.visitorId),v}else{try{C.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,C,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return D(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield Dy(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(t){return[ge.click,ge.custom,ge.search,ge.view].indexOf(t)!==-1}getVisitorIdParam(){return D(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},_d=class{constructor(t,r){kd()&&Uy()?this.storage=new jd:kd()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new jo),this.client=new Zs(t),this.beaconClient=new Ud(t),window.addEventListener("beforeunload",()=>{let n=r();for(let{eventType:o,payload:a}of n)this.beaconClient.sendEvent(o,a)})}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},$d=class{constructor(t,r){this.storage=r||new jo,this.client=new Zs(t)}getClientDependingOnEventType(t){return this.client}},ec=class{constructor(){this.storage=new jo,this.client=new Bd}getClientDependingOnEventType(t){return this.client}},Xw="xx",Zw=e=>e?.startsWith(Xw)||!1,eI=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function tI(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var rI=["1",1,"yes",!0];function tc(){let e=[];return Od()&&e.push(window.doNotTrack),zd()&&e.push(navigator.doNotTrack,navigator.msDoNotTrack,navigator.globalPrivacyControl),e.some(t=>rI.indexOf(t)!==-1)}var Gy="v15",Wy={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function nI(e=Wy.default,t=Gy,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var oI="38824e1f-37f5-42d3-8372-a4b8fa9df946",Wt=class{get defaultOptions(){return{endpoint:Wy.default,isCustomEndpoint:!1,token:"",version:Gy,beforeSendHooks:[],afterSendHooks:[]}}get version(){return _y}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Hb,Ub].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};tc()?this.runtime=new ec:this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),this.addEventTypeMapping(ge.view,{newEventType:ge.view,addClientIdParameter:!0}),this.addEventTypeMapping(ge.click,{newEventType:ge.click,addClientIdParameter:!0}),this.addEventTypeMapping(ge.custom,{newEventType:ge.custom,addClientIdParameter:!0}),this.addEventTypeMapping(ge.search,{newEventType:ge.search,addClientIdParameter:!0})}initRuntime(t){return Od()&&Oo()?new _d(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(tI()&&console.warn(eI),new $d(t))}get storage(){return this.runtime.storage}determineVisitorId(){return D(this,void 0,void 0,function*(){try{return Od()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||On()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),On()}})}getCurrentVisitorId(){return D(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return D(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}setClientId(t,r){return D(this,void 0,void 0,function*(){if(Ys(t))this.setCurrentVisitorId(t.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(qy(t,qy(r,oI)))}})}getParameters(t,...r){return D(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return D(this,void 0,void 0,function*(){let n=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,n)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(On()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}extractClientIdFromLink(t){if(tc())return null;try{let r=new URL(t).searchParams.get(Qr.cvo_cid);if(r==null)return null;let n=Qr.fromString(r);return!n||!Oo()||!n.validate(document.referrer,this.acceptedLinkReferrers)?null:n.clientId}catch{}return null}resolveParameters(t,...r){return D(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:n=[],addVisitorIdParameter:o=!1,usesMeasurementProtocol:a=!1,addClientIdParameter:d=!1}=this.eventTypeMapping[t]||{};return yield[x=>n.length>0?this.parseVariableArgumentsPayload(n,x):x[0],x=>D(this,void 0,void 0,function*(){return Object.assign(Object.assign({},x),{visitorId:o?yield this.getCurrentVisitorId():""})}),x=>D(this,void 0,void 0,function*(){return d?Object.assign(Object.assign({},x),{clientId:yield this.getCurrentVisitorId()}):x}),x=>a?this.ensureAnonymousUserWhenUsingApiKey(x):x,x=>this.beforeSendHooks.reduce((R,F)=>D(this,void 0,void 0,function*(){let w=yield R;return yield F(t,w)}),x)].reduce((x,R)=>D(this,void 0,void 0,function*(){let F=yield x;return yield R(F)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return D(this,void 0,void 0,function*(){let{usesMeasurementProtocol:n=!1}=this.eventTypeMapping[t]||{};return yield[C=>this.setTrackingIdIfTrackingIdNotPresent(C),C=>this.removeEmptyPayloadValues(C,t),C=>this.validateParams(C,t),C=>n?$w(C):C,C=>n?this.removeUnknownParameters(C):C,C=>n?this.processCustomParameters(C):this.mapCustomParametersToCustomData(C)].reduce((C,v)=>D(this,void 0,void 0,function*(){let x=yield C;return yield v(x)}),Promise.resolve(r))})}makeEvent(t,...r){return D(this,void 0,void 0,function*(){let{newEventType:n=t}=this.eventTypeMapping[t]||{},o=yield this.resolveParameters(t,...r),a=yield this.resolvePayloadForParameters(t,o);return{eventType:n,payload:a,log:d=>D(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:n,payload:Object.assign(Object.assign({},a),d)}),yield Promise.all(this.afterSendHooks.map(m=>m(t,Object.assign(Object.assign({},o),d)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return D(this,void 0,void 0,function*(){return(yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return D(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:n}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,n)}})}clear(){this.storage.removeItem("visitorId"),new Ks().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(t){return D(this,void 0,void 0,function*(){return this.makeEvent(ge.search,t)})}sendSearchEvent(t){return D(this,void 0,void 0,function*(){var{searchQueryUid:r}=t,n=gr(t,["searchQueryUid"]);return(yield this.makeSearchEvent(n)).log({searchQueryUid:r})})}makeClickEvent(t){return D(this,void 0,void 0,function*(){return this.makeEvent(ge.click,t)})}sendClickEvent(t){return D(this,void 0,void 0,function*(){var{searchQueryUid:r}=t,n=gr(t,["searchQueryUid"]);return(yield this.makeClickEvent(n)).log({searchQueryUid:r})})}makeCustomEvent(t){return D(this,void 0,void 0,function*(){return this.makeEvent(ge.custom,t)})}sendCustomEvent(t){return D(this,void 0,void 0,function*(){var{lastSearchQueryUid:r}=t,n=gr(t,["lastSearchQueryUid"]);return(yield this.makeCustomEvent(n)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return D(this,void 0,void 0,function*(){return this.makeEvent(ge.view,t)})}sendViewEvent(t){return D(this,void 0,void 0,function*(){return(yield this.makeViewEvent(t)).log({})})}getVisit(){return D(this,void 0,void 0,function*(){let r=yield(yield h(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return D(this,void 0,void 0,function*(){return yield(yield h(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let n={};for(let o=0,a=r.length;o<a;o++){let d=r[o];if(typeof d=="string")n[t[o]]=d;else if(typeof d=="object")return Object.assign(Object.assign({},n),d)}return n}isKeyAllowedEmpty(t,r){return({[ge.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let n=o=>typeof o<"u"&&o!==null&&o!=="";return Object.keys(t).filter(o=>this.isKeyAllowedEmpty(r,o)||n(t[o])).reduce((o,a)=>Object.assign(Object.assign({},o),{[a]:t[a]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(n=>{if(Ww(n))return!0;console.log(n,"is not processed by coveoua")}).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:t[o]}),{})}processCustomParameters(t){let{custom:r}=t,n=gr(t,["custom"]),o={};r&&Ws(r)&&(o=this.lowercaseKeys(r));let a=Kw(n);return Object.assign(Object.assign({},o),a)}mapCustomParametersToCustomData(t){let{custom:r}=t,n=gr(t,["custom"]);if(r&&Ws(r)){let o=this.lowercaseKeys(r);return Object.assign(Object.assign({},n),{customData:Object.assign(Object.assign({},o),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),n={};return r.forEach(o=>{n[o.toLowerCase()]=t[o]}),n}validateParams(t,r){let{anonymizeIp:n}=t,o=gr(t,["anonymizeIp"]);return n!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${n}`.toLowerCase())==-1&&(o.anonymizeIp=1),(r==ge.view||r==ge.click||r==ge.search||r==ge.custom)&&(o.originLevel3=this.limit(o.originLevel3,1024)),r==ge.view&&(o.location=this.limit(o.location,1024)),(r=="pageview"||r=="event")&&(o.referrer=this.limit(o.referrer,2048),o.location=this.limit(o.location,2048),o.page=this.limit(o.page,2048)),o}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,n=gr(t,["userId"]);return Zw(this.options.token)&&!r?(n.userId="anonymous",n):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,n=gr(t,["trackingId"]);return r?t:(n.hasOwnProperty("custom")&&Ws(n.custom)&&(n.custom.hasOwnProperty("context_website")||n.custom.hasOwnProperty("siteName"))&&(n.trackingId=n.custom.context_website||n.custom.siteName),n.hasOwnProperty("customData")&&Ws(n.customData)&&(n.customData.hasOwnProperty("context_website")||n.customData.hasOwnProperty("siteName"))&&(n.trackingId=n.customData.context_website||n.customData.siteName),n)}limit(t,r){return typeof t=="string"?sw(t,r):t}get baseUrl(){return nI(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},yr;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(yr||(yr={}));var M;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2",e.generatedAnswerCitationClick="generatedAnswerCitationClick",e.generatedAnswerCitationDocumentAttach="generatedAnswerCitationDocumentAttach"})(M||(M={}));var Ny={[M.triggerNotify]:"queryPipelineTriggers",[M.triggerExecute]:"queryPipelineTriggers",[M.triggerQuery]:"queryPipelineTriggers",[M.triggerRedirect]:"queryPipelineTriggers",[M.queryErrorBack]:"errors",[M.queryErrorClear]:"errors",[M.queryErrorRetry]:"errors",[M.pagerNext]:"getMoreResults",[M.pagerPrevious]:"getMoreResults",[M.pagerNumber]:"getMoreResults",[M.pagerResize]:"getMoreResults",[M.pagerScrolling]:"getMoreResults",[M.facetSearch]:"facet",[M.facetShowLess]:"facet",[M.facetShowMore]:"facet",[M.recommendation]:"recommendation",[M.likeSmartSnippet]:"smartSnippet",[M.dislikeSmartSnippet]:"smartSnippet",[M.expandSmartSnippet]:"smartSnippet",[M.collapseSmartSnippet]:"smartSnippet",[M.openSmartSnippetFeedbackModal]:"smartSnippet",[M.closeSmartSnippetFeedbackModal]:"smartSnippet",[M.sendSmartSnippetReason]:"smartSnippet",[M.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[M.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[M.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[M.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[M.clearRecentQueries]:"recentQueries",[M.recentResultClick]:"recentlyClickedDocuments",[M.clearRecentResults]:"recentlyClickedDocuments",[M.showLessFoldedResults]:"folding",[M.caseDetach]:"case",[M.likeGeneratedAnswer]:"generatedAnswer",[M.dislikeGeneratedAnswer]:"generatedAnswer",[M.openGeneratedAnswerSource]:"generatedAnswer",[M.generatedAnswerStreamEnd]:"generatedAnswer",[M.generatedAnswerSourceHover]:"generatedAnswer",[M.generatedAnswerCopyToClipboard]:"generatedAnswer",[M.generatedAnswerHideAnswers]:"generatedAnswer",[M.generatedAnswerShowAnswers]:"generatedAnswer",[M.generatedAnswerExpand]:"generatedAnswer",[M.generatedAnswerCollapse]:"generatedAnswer",[M.generatedAnswerFeedbackSubmit]:"generatedAnswer",[M.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[yr.expandToFullUI]:"interface",[yr.openUserActions]:"User Actions",[yr.showPrecedingSessions]:"User Actions",[yr.showFollowingSessions]:"User Actions",[yr.clickViewedDocument]:"User Actions",[yr.clickPageView]:"User Actions",[yr.createArticle]:"createArticle"},Vo=class{constructor(){this.runtime=new ec,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(ge.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(ge.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(ge.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(ge.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return _y}};function aI(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function iI(e){return e.map(t=>t.replace(/;/g,""))}function Ky(e){let r=e.join(";");return r.length<=256?r:Ky(e.slice(1))}var My=e=>{let t=iI(e),r=aI(t);return Ky(r)};function Ly(e){let t=typeof e.partialQueries=="string"?e.partialQueries:My(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:My(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var rc=class{constructor(t,r){this.opts=t,this.provider=r;let n=t.enableAnalytics===!1||tc();this.coveoAnalyticsClient=n?new Vo:new Wt(t)}disable(){this.coveoAnalyticsClient=new Vo}enable(){this.coveoAnalyticsClient=new Wt(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(M.interfaceLoad)}logInterfaceLoad(){return D(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(M.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return D(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(M.recommendation)}logRecommendation(){return D(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(M.recommendationOpen,t,r)}logRecommendationOpen(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(M.staticFilterClearAll,t)}logStaticFilterClearAll(t){return D(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(M.staticFilterSelect,t)}logStaticFilterSelect(t){return D(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(M.staticFilterDeselect,t)}logStaticFilterDeselect(t){return D(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(M.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return D(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(M.interfaceChange,t)}logInterfaceChange(t){return D(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(M.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return D(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(M.didyoumeanClick)}logDidYouMeanClick(){return D(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(M.resultsSort,t)}logResultsSort(t){return D(this,void 0,void 0,function*(){return(yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(M.searchboxSubmit)}logSearchboxSubmit(){return D(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(M.searchboxClear)}logSearchboxClear(){return D(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(M.searchboxAsYouType)}logSearchboxAsYouType(){return D(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(M.breadcrumbFacet,t)}logBreadcrumbFacet(t){return D(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(M.breadcrumbResetAll)}logBreadcrumbResetAll(){return D(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(M.documentQuickview,t,r)}logDocumentQuickview(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(M.documentOpen,t,r)}logDocumentOpen(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(M.omniboxAnalytics,Ly(t))}logOmniboxAnalytics(t){return D(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(M.omniboxFromLink,Ly(t))}logOmniboxFromLink(t){return D(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(M.searchFromLink)}logSearchFromLink(){return D(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(M.triggerNotify,t)}logTriggerNotify(t){return D(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(M.triggerExecute,t)}logTriggerExecute(t){return D(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(M.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return D(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(M.undoTriggerQuery,t)}logUndoTriggerQuery(t){return D(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(M.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return D(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(M.pagerResize,t)}logPagerResize(t){return D(this,void 0,void 0,function*(){return(yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(M.pagerNumber,t)}logPagerNumber(t){return D(this,void 0,void 0,function*(){return(yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(M.pagerNext,t)}logPagerNext(t){return D(this,void 0,void 0,function*(){return(yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(M.pagerPrevious,t)}logPagerPrevious(t){return D(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(M.pagerScrolling)}logPagerScrolling(){return D(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(M.facetClearAll,t)}logFacetClearAll(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(M.facetSearch,t)}logFacetSearch(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(M.facetSelect,t)}logFacetSelect(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(M.facetDeselect,t)}logFacetDeselect(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(M.facetExclude,t)}logFacetExclude(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(M.facetUnexclude,t)}logFacetUnexclude(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(M.facetSelectAll,t)}logFacetSelectAll(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(M.facetUpdateSort,t)}logFacetUpdateSort(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(M.facetShowMore,t)}logFacetShowMore(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(M.facetShowLess,t)}logFacetShowLess(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(M.queryError,t)}logQueryError(t){return D(this,void 0,void 0,function*(){return(yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return D(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(M.queryErrorBack);return{description:t.description,log:()=>D(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(M.queryErrorBack)})}})}logQueryErrorBack(){return D(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return D(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(M.queryErrorRetry);return{description:t.description,log:()=>D(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(M.queryErrorRetry)})}})}logQueryErrorRetry(){return D(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return D(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(M.queryErrorClear);return{description:t.description,log:()=>D(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(M.queryErrorClear)})}})}logQueryErrorClear(){return D(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(M.likeSmartSnippet)}logLikeSmartSnippet(){return D(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(M.dislikeSmartSnippet)}logDislikeSmartSnippet(){return D(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(M.expandSmartSnippet)}logExpandSmartSnippet(){return D(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(M.collapseSmartSnippet)}logCollapseSmartSnippet(){return D(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(M.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return D(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(M.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return D(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(M.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(M.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return D(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(M.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return D(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(M.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return D(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(M.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return D(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(M.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(M.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(M.copyToClipboard,t,r)}logCopyToClipboard(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(M.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(M.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(M.recentQueryClick)}logRecentQueryClick(){return D(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(M.clearRecentQueries)}logClearRecentQueries(){return D(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(M.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(M.clearRecentResults)}logClearRecentResults(){return D(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(M.noResultsBack)}logNoResultsBack(){return D(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(M.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(M.showLessFoldedResults)}logShowLessFoldedResults(){return D(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var n;return{actionCause:r,customData:(n=t.payload)===null||n===void 0?void 0:n.customData}}makeCustomEvent(t,r){return D(this,arguments,void 0,function*(n,o,a=Ny[n]){this.coveoAnalyticsClient.getParameters;let d=Object.assign(Object.assign({},this.provider.getBaseMetadata()),o),m=Object.assign(Object.assign({},yield this.getBaseEventRequest(d)),{eventType:a,eventValue:n}),f=yield this.coveoAnalyticsClient.makeCustomEvent(m);return{description:this.makeEventDescription(f,n),log:({searchUID:p})=>f.log({lastSearchQueryUid:p})}})}logCustomEvent(t,r){return D(this,arguments,void 0,function*(n,o,a=Ny[n]){return(yield this.makeCustomEvent(n,o,a)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,n){return D(this,void 0,void 0,function*(){let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),n),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(o)),{eventType:r,eventValue:t}),d=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(d,t),log:({searchUID:m})=>d.log({lastSearchQueryUid:m})}})}logCustomEventWithType(t,r,n){return D(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(t,r,n)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return D(this,void 0,void 0,function*(){let n=yield this.getBaseSearchEventRequest(t,r),o=yield this.coveoAnalyticsClient.makeSearchEvent(n);return{description:this.makeEventDescription(o,t),log:({searchUID:a})=>o.log({searchQueryUid:a})}})}makeClickEvent(t,r,n,o){return D(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),d=yield this.coveoAnalyticsClient.makeClickEvent(a);return{description:this.makeEventDescription(d,t),log:({searchUID:m})=>d.log({searchQueryUid:m})}})}logClickEvent(t,r,n,o){return D(this,void 0,void 0,function*(){return(yield this.makeClickEvent(t,r,n,o)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){return D(this,void 0,void 0,function*(){var n,o;return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(o=(n=this.provider).getGeneratedAnswerMetadata)===null||o===void 0?void 0:o.call(n)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return D(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Wt?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(M.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return D(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(M.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return D(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(M.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return D(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCitationClick(t,r){return this.makeClickEvent(M.generatedAnswerCitationClick,Object.assign(Object.assign({},t),{documentPosition:1}),{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logGeneratedAnswerCitationClick(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCitationClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(M.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(M.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(M.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(M.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(t){return this.makeCustomEvent(M.generatedAnswerExpand,t)}logGeneratedAnswerExpand(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerExpand(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(t){return this.makeCustomEvent(M.generatedAnswerCollapse,t)}logGeneratedAnswerCollapse(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCollapse(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(M.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmitV2(t){return this.makeCustomEvent(M.generatedAnswerFeedbackSubmitV2,t)}logGeneratedAnswerFeedbackSubmitV2(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(M.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return D(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(M.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return D(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(M.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},nc=Object.assign({},ci),Qy=Object.keys(nc).map(e=>nc[e]),ko=class extends Vd{constructor({client:t,uuidGenerator:r=On}){super({client:t,uuidGenerator:r}),this.ticket={}}getApi(t){let r=super.getApi(t);if(r!==null)return r;switch(t){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>Qy.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(Qy.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(nc.pageview,{newEventType:ge.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(nc.event,{newEventType:ge.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var n;let o=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((n=this.actionData)!==null&&n!==void 0?n:{}).length>0?{svcActionData:this.actionData}:{}),a=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},a),o),r)}getTicketPayload(){return mw(this.ticket)}};ko.Id="svc";var oc;(function(e){e.click="click",e.flowStart="flowStart"})(oc||(oc={}));var xt;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.documentSuggestionClick="documentSuggestionClick",e.documentSuggestionQuickview="documentSuggestionQuickview",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(xt||(xt={}));var ac;(function(e){e.quit="Quit",e.solved="Solved"})(ac||(ac={}));var ic=class{constructor(t,r){var n;this.options=t,this.provider=r;let o=((n=t.enableAnalytics)!==null&&n!==void 0?n:!0)&&!tc();this.coveoAnalyticsClient=o?new Wt(t):new Vo,this.svc=new ko({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient=new Vo,this.svc=new ko({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new Wt(this.options),this.svc=new ko({client:this.coveoAnalyticsClient})}logEnterInterface(t){return this.svc.setAction(xt.enterInterface),this.svc.setTicket(t.ticket),this.sendFlowStartEvent()}logUpdateCaseField(t){return this.svc.setAction(xt.fieldUpdate,{fieldName:t.fieldName}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectFieldSuggestion(t){return this.svc.setAction(xt.fieldSuggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(t){return this.logClickEvent(xt.documentSuggestionClick,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logQuickviewDocumentSuggestion(t){return this.logClickEvent(xt.documentSuggestionQuickview,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logRateDocumentSuggestion(t){return this.svc.setAction(xt.suggestionRate,Object.assign({rate:t.rating},t.suggestion)),this.svc.setTicket(t.ticket),this.sendClickEvent()}logMoveToNextCaseStep(t){return this.svc.setAction(xt.nextCaseStep,{stage:t?.stage}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCancelled(t){return this.svc.setAction(xt.caseCancelled,{reason:ac.quit}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseSolved(t){return this.svc.setAction(xt.caseSolved,{reason:ac.solved}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCreated(t){return this.svc.setAction(xt.caseCreated),this.svc.setTicket(t.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",oc.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",oc.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}getBaseEventRequest(t){return D(this,void 0,void 0,function*(){var r,n;let o=Object.assign({},t);return Object.assign(Object.assign({},this.getOrigins()),{customData:o,language:(r=this.provider)===null||r===void 0?void 0:r.getLanguage(),anonymous:(n=this.provider)===null||n===void 0?void 0:n.getIsAnonymous(),clientId:yield this.getClientId()})})}getClientId(){return this.coveoAnalyticsClient instanceof Wt?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getOrigins(){var t,r,n,o,a;return{originContext:(r=(t=this.provider)===null||t===void 0?void 0:t.getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:(n=this.provider)===null||n===void 0?void 0:n.getOriginLevel1(),originLevel2:(o=this.provider)===null||o===void 0?void 0:o.getOriginLevel2(),originLevel3:(a=this.provider)===null||a===void 0?void 0:a.getOriginLevel3()}}logClickEvent(t,r,n,o){return D(this,void 0,void 0,function*(){var a,d;let m=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{searchQueryUid:(d=(a=this.provider)===null||a===void 0?void 0:a.getSearchUID())!==null&&d!==void 0?d:"",actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(m)})}};l();s();u();c();l();s();u();c();var sc=()=>"default";var sI=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},kn=class{constructor(t){this.getState=t;xe(this,"state");this.state=t()}getLanguage(){return sI(this.state)}getBaseMetadata(){let{context:t,configuration:r}=this.state,n=t?.contextValues||{},o={};for(let[a,d]of Object.entries(n)){let m=`context_${a}`;o[m]=d}return r.analytics.analyticsMode==="legacy"&&(o.coveoHeadlessVersion=Tr),o}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||sc()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};l();s();u();c();var Yy=e=>new Wt(e).getCurrentVisitorId(),di=(e,t)=>typeof t=="function"?(...r)=>{let n=Za(r[0]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,mi=(e,t)=>(...r)=>{let n=Za(r[1]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics hook. Returning original request."),n}};var pi=class extends kn{getSearchUID(){return this.state.documentSuggestion?.status.lastResponseId??""}},Jy=({logger:e,getState:t,analyticsClientMiddleware:r=(a,d)=>d,preprocessRequest:n,provider:o=new pi(t)})=>{let a=t(),d=a.configuration.accessToken,m=a.configuration.analytics.apiBaseUrl??Ee(a.configuration.organizationId,a.configuration.environment,"analytics"),f=a.configuration.analytics.runtimeEnvironment,p=a.configuration.analytics.enabled,g=new ic({enableAnalytics:p,token:d,endpoint:m,runtimeEnvironment:f,preprocessRequest:di(e,n),beforeSendHooks:[mi(e,r),(C,v)=>(e.info({...v,type:C,endpoint:m,token:d},"Analytics request"),v)]},o);return p||g.disable(),g};l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();function cc(){return{desiredCount:5,numberOfValues:8,set:{}}}l();s();u();c();l();s();u();c();var uI=(e,t)=>e.categoryFacetSet[t]?.request;var Wd=(e,t)=>{let r=uI(e,t);return Bt(r?.currentValues??[])};l();s();u();c();function uc(){return{}}l();s();u();c();function Xy(e){return{request:e}}function Do(){return{}}l();s();u();c();function Zy(e){return{request:e}}function No(){return{}}l();s();u();c();function eh(e){return{request:e,hasBreadcrumbs:!0}}function Mo(){return{}}function lc(e){return{facetSet:e.facetSet??Mo(),categoryFacetSet:e.categoryFacetSet??uc(),dateFacetSet:e.dateFacetSet??Do(),numericFacetSet:e.numericFacetSet??No(),automaticFacetSet:e.automaticFacetSet??cc()}}var Kd=e=>{let t=[];return mI(e).forEach((r,n)=>{let o=xI(e,r.facetId),a=SI(r,n+1);if(dI(r)){if(!!!Wd(e,r.facetId).length)return;t.push({...a,...yI(e,r.facetId),facetType:o,state:"selected"});return}r.currentValues.forEach((d,m)=>{if(d.state==="idle")return;let f=th(d,m+1,o),p=lI(r)?rh(d):fI(d);t.push({...a,...f,...p})})}),pI(e).forEach((r,n)=>{let o=hI(r,n+1);r.values.forEach((a,d)=>{if(a.state==="idle")return;let m=th(a,d+1,"specific"),f=rh(a);t.push({...o,...m,...f})})}),t},lI=e=>e.type==="specific",dI=e=>e.type==="hierarchical",mI=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),pI=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),th=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),fI=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),rh=e=>({displayValue:e.value,value:e.value}),gI=(e,t)=>Wd(e,t).map(n=>n.value).join(";"),yI=(e,t)=>{let n=gI(e,t);return{value:n,valuePosition:1,displayValue:n}},hI=(e,t)=>({title:nh(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),SI=(e,t)=>({title:nh(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),nh=(e,t)=>`${e}_${t}`,CI=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,xI=(e,t)=>{let r=CI(e,t);return r?r.type:"specific"};l();s();u();c();l();s();u();c();var Yd=e=>e.configuration.search.locale,oh=e=>e.configuration.search.timezone,Lo=e=>e.configuration?.knowledge?.agentId;var jn=e=>{if(vI(e)||Jd(e))return e.generatedAnswer?.answerId;if(RI(e))return e.search?.response?.extendedResults?.generativeQuestionAnsweringId},vI=e=>"answer"in e&&"generatedAnswer"in e&&!ee(e.generatedAnswer?.answerConfigurationId),Jd=e=>{let t=Lo(e);return"answerGenerationApi"in e&&"generatedAnswer"in e&&typeof t=="string"&&t.trim().length>0},RI=e=>"search"in e&&e.search!==void 0&&typeof e.search=="object",Xd=e=>e.generatedAnswer?.fieldsToIncludeInCitations,AI=re(e=>e.generatedAnswer?.citations,(e,t)=>t,(e,t)=>e?.find(r=>r.id===t));l();s();u();c();var Ye=()=>({q:"",enableQuerySyntax:!1});l();s();u();c();function fi(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function pt(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:fi(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:fi(),extendedResults:{},searchAction:void 0}}l();s();u();c();l();s();u();c();l();s();u();c();var ah=(r=>(r.Ascending="ascending",r.Descending="descending",r))(ah||{}),ih=(a=>(a.Relevancy="relevancy",a.QRE="qre",a.Date="date",a.Field="field",a.NoSort="nosort",a))(ih||{}),Zd=e=>{if(ts(e))return e.map(t=>Zd(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},sh=()=>({by:"relevancy"});var vW=new L({values:{by:new br({enum:ih,required:!0}),order:new br({enum:ah}),field:new V}});function Vn(){return Zd(sh())}var gi=class gi extends kn{constructor(){super(...arguments);xe(this,"getFacetRequest",r=>this.state.facetSet?.[r]?.request||this.state.categoryFacetSet?.[r]?.request||this.state.dateFacetSet?.[r]?.request||this.state.numericFacetSet?.[r]?.request||this.state.automaticFacetSet?.set[r]?.response)}getFacetState(){return Kd(lc(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||gi.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let r=this.getState();return r.search?.searchResponseId||r.search?.response.searchUid||pt().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let r=!!this.getSplitTestRunName(),n=this.state.search?.response.pipeline||this.state.pipeline||gi.fallbackPipelineName;return r?n:void 0}getBaseMetadata(){let r=this.getState(),n=super.getBaseMetadata(),o=jn(r);return o&&(n.generativeQuestionAnsweringId=o),n}getFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,facetValue:n,facetTitle:`${a}_${r}`}}getFacetClearAllMetadata(r){let o=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:o,facetTitle:`${o}_${r}`}}getFacetUpdateSortMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,criteria:n,facetTitle:`${a}_${r}`}}getRangeBreadcrumbFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,facetRangeEnd:n.end,facetRangeEndInclusive:n.endInclusive,facetRangeStart:n.start,facetTitle:`${a}_${r}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??Vn()}}getStaticFilterToggleMetadata(r,n){return{...this.getBaseMetadata(),staticFilterId:r,staticFilterValue:n}}getStaticFilterClearAllMetadata(r){return{...this.getBaseMetadata(),staticFilterId:r}}getUndoTriggerQueryMetadata(r){return{...this.getBaseMetadata(),undoneQuery:r}}getCategoryBreadcrumbFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:r,categoryFacetField:a,categoryFacetPath:n,categoryFacetTitle:`${a}_${r}`}}getOmniboxAnalyticsMetadata(r,n){let o=this.state.querySuggest?.[r],a=o.completions.map(p=>p.expression),d=o.partialQueries.length-1,m=o.partialQueries[d]||"",f=o.responseId;return{...this.getBaseMetadata(),suggestionRanking:a.indexOf(n),partialQuery:m,partialQueries:o.partialQueries.length>0?o.partialQueries:"",suggestions:a.length>0?a:"",querySuggestResponseId:f}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(r){return{...this.getBaseMetadata(),...r}}getGeneratedAnswerMetadata(){let r=this.getState(),n={};return r.generatedAnswer?.isVisible!==void 0&&(n.showGeneratedAnswer=r.generatedAnswer.isVisible),n}get resultURIs(){return this.results?.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||Ye().q}get responseTime(){return this.state.search?.duration||pt().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||pt().response.totalCountFiltered}};xe(gi,"fallbackPipelineName","default");var Ur=gi,ch=({logger:e,getState:t,analyticsClientMiddleware:r=(a,d)=>d,preprocessRequest:n,provider:o})=>{let a=t(),d=a.configuration.accessToken,m=a.configuration.analytics.apiBaseUrl??Ee(a.configuration.organizationId,a.configuration.environment,"analytics"),f=a.configuration.analytics.runtimeEnvironment,p=a.configuration.analytics.enabled,g=new rc({token:d,endpoint:m,runtimeEnvironment:f,preprocessRequest:di(e,n),beforeSendHooks:[mi(e,r),(C,v)=>(e.info({...v,type:C,endpoint:m,token:d},"Analytics request"),v)]},o);return p||g.disable(),g},em=()=>{let t=Ct.getInstance().getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};l();s();u();c();l();s();u();c();var tm=()=>"";function uh(e,t){return{...new Ur(t).getBaseMetadata(),actionCause:e,type:e}}function FI(e){return Object.assign(e,{instantlyCallable:!0})}function PI(e,t){let r=a=>FI(te(e,a)),n=r(async(a,{getState:d,extra:m})=>{let{analyticsClientMiddleware:f,preprocessRequest:p,logger:g}=m;return await(await t({getState:d,analyticsClientMiddleware:f,preprocessRequest:p,logger:g})).log({state:d(),extra:m})});return Object.assign(n,{prepare:async({getState:a,analyticsClientMiddleware:d,preprocessRequest:m,logger:f})=>{let{description:p,log:g}=await t({getState:a,analyticsClientMiddleware:d,preprocessRequest:m,logger:f});return{description:p,action:r(async(C,{getState:v,extra:x})=>await g({state:v(),extra:x}))}}}),n}var lh=(e,t,r)=>{function n(...o){let a=o.length===1?{...o[0],__legacy__getBuilder:t(o[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:o[0],__legacy__getBuilder:t(o[1]),__legacy__provider:o[2],analyticsConfigurator:e,providerClass:r};return II(a)}return n},bI=e=>e.configuration.analytics.analyticsMode==="legacy",wI=e=>e.configuration.analytics.analyticsMode==="next",II=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:o,analyticsConfigurator:a,providerClass:d})=>(r??(r=m=>new d(m)),PI(e,async({getState:m,analyticsClientMiddleware:f,preprocessRequest:p,logger:g})=>{let C=[],v={log:async({state:P})=>{for(let q of C)await q(P)}},x=m(),R=a({getState:m,logger:g,analyticsClientMiddleware:f,preprocessRequest:p,provider:r(m)}),F=await t(R,m());v.description=F?.description,C.push(async P=>{bI(P)&&await EI(F,r,P,g,R.coveoAnalyticsClient)});let{emit:w}=si(x);return C.push(async P=>{if(wI(P)&&o&&n){let q=n(P);await OI(w,o,q)}}),v}));async function EI(e,t,r,n,o){t(()=>r);let a=await e?.log({searchUID:t(()=>r).getSearchUID()});n.info({client:o,response:a},"Analytics response")}var qI=e=>r=>(n,o)=>Promise.resolve({description:{actionCause:e},log:async a=>{r(n,o)}}),Oe=lh(e=>ch({...e,provider:e.provider||new Ur(e.getState)}),e=>e,Ur),C2=lh(Jy,qI("caseAssist"),pi);var TI={urihash:new V,sourcetype:new V,permanentid:new V},x2={uniqueId:N,raw:new L({values:TI}),title:N,uri:N,clickUri:N,rankingModifier:new V({required:!1,emptyAllowed:!0})};async function OI(e,t,r){await e(t,r)}l();s();u();c();l();s();u();c();var dc=A("facet/updateFacetAutoSelection",e=>I(e,{allow:new X({required:!0})}));l();s();u();c();l();s();u();c();var mc=class extends Ur{constructor(r){super(r);this.getState=r}get activeInstantResultQuery(){let r=this.getState().instantResults;for(let n in r)for(let o in r[n].cache)if(r[n].cache[o].isActive)return r[n].q;return null}get activeInstantResultCache(){let r=this.getState().instantResults;for(let n in r)for(let o in r[n].cache)if(r[n].cache[o].isActive)return r[n].cache[o];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??Ye().q}get responseTime(){return this.activeInstantResultCache?.duration??pt().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??pt().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var dh=()=>Oe("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new mc(e)),mh=()=>({actionCause:"searchboxAsYouType"});l();s();u();c();var rm={id:N},DI={...rm,q:qe},nK=A("instantResults/register",e=>I(e,rm)),pc=A("instantResults/updateQuery",e=>I(e,DI)),oK=A("instantResults/clearExpired",e=>I(e,rm));l();s();u();c();var fc=new W({required:!0,min:0}),ph=A("pagination/registerNumberOfResults",e=>I(e,fc)),fh=A("pagination/updateNumberOfResults",e=>I(e,fc)),gh=A("pagination/registerPage",e=>I(e,fc)),gc=A("pagination/updatePage",e=>I(e,fc)),yh=A("pagination/nextPage"),hh=A("pagination/previousPage");l();s();u();c();var hr=A("query/updateQuery",e=>I(e,{q:new V,enableQuerySyntax:new X}));l();s();u();c();l();s();u();c();var Sr=(e,t,r)=>({analytics:{clientId:t.clientId,clientTimestamp:new Date().toISOString(),documentReferrer:t.referrer,documentLocation:t.location,originContext:e.originContext,...r&&{actionCause:r.actionCause},...r&&{customData:r.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.deviceId&&{deviceId:e.deviceId},...e.trackingId&&{trackingId:e.trackingId},capture:t.capture??t.clientId!=="",source:kr(e)}});var yc=(e,t,r)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??yt(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:t.referrer,timezone:e.configuration.search.timezone,...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&Sr(e.configuration.analytics,t,r),...e.excerptLength&&!ee(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});l();s();u();c();l();s();u();c();l();s();u();c();var Qo=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await Yy(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...em()&&{pageId:em()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:kr(e)}}}};var Uo=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??yt(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{actionsHistory:Ct.getInstance().getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Qo(e.configuration.analytics,t),...e.excerptLength&&!ee(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});l();s();u();c();l();s();u();c();var Dn=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var nm=()=>Oe("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),Br=e=>Oe("search/queryError",(t,r)=>t.makeQueryError({query:r.query?.q||Ye().q,aq:r.advancedSearchQueries?.aq||Dn().aq,cq:r.advancedSearchQueries?.cq||Dn().cq,dq:r.advancedSearchQueries?.dq||Dn().dq,errorType:e.type,errorMessage:e.message}));l();s();u();c();l();s();u();c();var hi=Ot(hc(),1),Rh=Ot(Sh(),1);l();s();u();c();var Sc=Ot(hc(),1),xh=Ot(Ch(),1);Sc.default.extend(xh.default);var Cc="YYYY/MM/DD@HH:mm:ss",NI="1401-01-01";function Nn(e,t){let r=(0,Sc.default)(e,t);return!r.isValid()&&!t?(0,Sc.default)(e,Cc):r}function yi(e){return e.format(Cc)}function vh(e){return yi(Nn(e))===e}function xc(e,t){let r=Nn(e,t);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",o=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?o:n}`)}lm(r)}function lm(e){if(e.isBefore(NI))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}hi.default.extend(Rh.default);var Ah=["past","now","next"],Fh=["minute","hour","day","week","month","quarter","year"],MI=e=>{let t=e==="now";return{amount:new W({required:!t,min:1}),unit:new V({required:!t,constrainTo:Fh}),period:new V({required:!0,constrainTo:Ah})}};function _r(e){if(typeof e=="string"&&!Yt(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?dm(e):e;new pe(MI(t.period)).validate(t);let r=bh(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);lm(r)}function Ph(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function bh(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,hi.default)().subtract(r,n);case"next":return(0,hi.default)().add(r,n);case"now":return(0,hi.default)()}}function Si(e){return yi(bh(dm(e)))}function wh(e){return e.toLocaleLowerCase().split("-")}function Yt(e){let[t,r,n]=wh(e);if(t==="now")return!0;if(!Ah.includes(t)||!Fh.includes(n))return!1;let o=parseInt(r);return!(Number.isNaN(o)||o<=0)}function Ih(e){return!!e&&typeof e=="object"&&"period"in e}function dm(e){let[t,r,n]=wh(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function Eh(e){return _r(e),dm(e)}l();s();u();c();function qh(e){return e.type==="dateRange"}function Th(e){return`start${e}`}function Oh(e){return`end${e}`}var mm=()=>({dateFacetValueMap:{}});function LI(e,t,r){let n=e.start,o=e.end;return Yt(n)&&(n=Si(n),r.dateFacetValueMap[t][Th(n)]=e.start),Yt(o)&&(o=Si(o),r.dateFacetValueMap[t][Oh(o)]=e.end),{...e,start:n,end:o}}function pm(e,t){if(qh(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(o=>LI(o,r,t))}}return e}function $r(e){let t=mm();return{request:{...e,facets:e.facets?.map(n=>pm(n,t))},mappings:t}}function QI(e,t,r){return{...e,start:r.dateFacetValueMap[t][Th(e.start)]||e.start,end:r.dateFacetValueMap[t][Oh(e.end)]||e.end}}function UI(e,t){return e.facetId in t.dateFacetValueMap}function BI(e,t){return UI(e,t)?{...e,values:e.values.map(r=>QI(r,e.facetId,t))}:e}function vc(e,t){return"success"in e?{success:{...e.success,facets:e.success.facets?.map(n=>BI(n,t))}}:e}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Rc=e=>e.success!==void 0,Rt=e=>e.error!==void 0;l();s();u();c();var r4=A("didYouMean/enable"),n4=A("didYouMean/disable"),o4=A("didYouMean/automaticCorrections/disable"),a4=A("didYouMean/automaticCorrections/enable"),Bo=A("didYouMean/correction",e=>I(e,N)),i4=A("didYouMean/automaticCorrections/mode",e=>I(e,new V({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0})));l();s();u();c();var fm=()=>Oe("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic());var kh=()=>({actionCause:"didYouMeanAutomatic"});l();s();u();c();l();s();u();c();function jh(){return{contextValues:{}}}l();s();u();c();var Ac=()=>!1;l();s();u();c();function Vh(){return{contextValues:{}}}l();s();u();c();function gm(){return{enabled:!0,tabs:{}}}function Fc(){return{freezeFacetOrder:!1,facets:{}}}l();s();u();c();function _o(){return[]}l();s();u();c();function zr(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}l();s();u();c();function Pc(){return{}}l();s();u();c();function Dh(){return{}}l();s();u();c();function Nh(){return{}}function Jt(e){return{context:e.context||jh(),dictionaryFieldContext:e.dictionaryFieldContext||Vh(),facetSet:e.facetSet||Mo(),numericFacetSet:e.numericFacetSet||No(),dateFacetSet:e.dateFacetSet||Do(),categoryFacetSet:e.categoryFacetSet||uc(),automaticFacetSet:e.automaticFacetSet??cc(),pagination:e.pagination||zr(),query:e.query||Ye(),tabSet:e.tabSet||Nh(),advancedSearchQueries:e.advancedSearchQueries||Dn(),staticFilterSet:e.staticFilterSet||Dh(),querySet:e.querySet||Pc(),sortCriteria:e.sortCriteria||Vn(),pipeline:e.pipeline||tm(),searchHub:e.searchHub||sc(),facetOptions:e.facetOptions||Fc(),facetOrder:e.facetOrder??_o(),debug:e.debug??Ac()}}l();s();u();c();var N6=new L({values:{undoneQuery:qe},options:{required:!0}}),Mh=()=>Oe("analytics/trigger/query",(e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null);l();s();u();c();var bc=A("trigger/query/ignore",e=>I(e,new V({emptyAllowed:!0,required:!0}))),wc=A("trigger/query/modification",e=>I(e,new L({values:{originalQuery:Re,modification:Re}})));l();s();u();c();l();s();u();c();l();s();u();c();function Hr(e){return Object.values(e).map(t=>t.request)}function ym(e,t){let r={};e.forEach(a=>{r[a.facetId]=a});let n=[];t.forEach(a=>{a in r&&(n.push(r[a]),delete r[a])});let o=Object.values(r);return[...n,...o]}function Lh(e){return Hr(e).map(t=>{let n=t.currentValues.some(({state:o})=>o!=="idle");return t.generateAutomaticRanges&&!n?{...t,currentValues:[]}:t})}var hm={alphanumericDescending:{type:"alphanumeric",order:"descending"},alphanumericNaturalDescending:{type:"alphanumericNatural",order:"descending"}};function GI(e){return Hr(e).map(t=>{let r=hm[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function WI(e){return[...GI(e.facetSet??{}),...Lh(e.numericFacetSet??{}),...Lh(e.dateFacetSet??{}),...Hr(e.categoryFacetSet??{})]}function KI(e){return WI(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function Ic(e){return ym(KI(e),e.facetOrder??[])}l();s();u();c();var Gr=async(e,t)=>{let r=XI(e),n=Ic(e),o=YI(e),a=await Uo(e,t),d=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return $r({...a,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:d(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:o}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function YI(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(JI).filter(r=>r.currentValues.length>0):void 0}function JI(e){let{field:t,label:r,values:n}=e,o=n.filter(a=>a.state==="selected");return{field:t,label:r,currentValues:o}}function XI(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(a=>a.isActive)?.expression.trim()||"",o=ZI(e);return[t,n,...o].filter(a=>!!a).join(" AND ")}function ZI(e){return Object.values(e.staticFilterSet||{}).map(r=>{let n=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),o=n.map(a=>a.expression).join(" OR ");return n.length>1?`(${o})`:o})}var Wr=class{constructor(t,r=n=>{this.dispatch(hr({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let o=Date.now(),a=vc(await this.extra.apiClient.search(r,n),t),d=Date.now()-o,m=this.getState().query?.q||"";return{response:a,duration:d,queryExecuted:m,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Rt(t.response)?(this.dispatch(Br(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:a}=r.didYouMean,{results:d,queryCorrections:m,queryCorrection:f}=n;if(!o||!a)return null;let p=d.length===0&&m&&m.length!==0,g=!ee(f)&&!ee(f.correctedQuery);if(!p&&!g)return null;let v=p?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(Gt(Jt(this.getState()))),v}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(o);return Rt(a.response)?(this.dispatch(Br(a.response.error)),this.rejectWithValue(a.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(t),this.dispatch(Gt(Jt(this.getState()))),{...a,response:{...a.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r,analyticsAction:fm()})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o,analyticsAction:fm()}}logOriginalAnalyticsQueryBeforeAutoCorrection(t){let r=this.getState(),n=this.getSuccessResponse(t);this.analyticsAction?.()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,n),this.extra)}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(m=>m.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(bc("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let a=this.getCurrentQuery(),d=await this.automaticallyRetryQueryWithTriggerModification(n);return Rt(d.response)?(this.dispatch(Br(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(Gt(Jt(this.getState()))),{...d,response:{...d.response.success},automaticallyCorrected:!1,originalQuery:a,analyticsAction:Mh()})}getStateAfterResponse(t,r,n,o){return{...n,query:{q:t,enableQuerySyntax:n.query?.enableQuerySyntax??Ye().enableQuerySyntax},search:{...pt(),duration:r,response:o,results:o.results}}}processSuccessResponse(t){return this.dispatch(Gt(Jt(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return Rc(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await Gr(this.getState()),{origin:"mainSearch"});return this.dispatch(Bo(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(wc({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Gr(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var X8=te("search/executeSearch",async(e,t)=>{let r=t.getState();return await Ec(r,t,e)}),Z8=te("search/fetchPage",async(e,t)=>{let r=t.getState();return await Cm(r,t,e)}),e5=te("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await xm(t,r)}),t5=te("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await nE(t,e,r)}),r5=te("search/fetchInstantResults",async(e,t)=>Sm(e,t)),eE=async(e,t)=>{let r=await Gr(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},tE=async(e,t,r)=>{let n=await Uo(e);return $r({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},rE=async(e,t)=>{let r=await Gr(e,t);return r.request.numberOfResults=0,r},Qh=e=>{e.configuration.analytics.enabled&&Ct.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})};async function Sm(e,t){I(e,{id:N,q:N,maxResultsPerQuery:new W({required:!0,min:1}),cacheTimeout:new W});let{q:r,maxResultsPerQuery:n}=e,o=t.getState(),a=new Wr({...t,analyticsAction:dh()},p=>{t.dispatch(pc({q:p,id:e.id}))}),d=await tE(o,r,n),m=await a.fetchFromAPI(d,{origin:"instantResults",disableAbortWarning:!0}),f=await a.process(m);return"response"in f?{results:f.response.results,searchUid:f.response.searchUid,analyticsAction:f.analyticsAction,totalCountFiltered:f.response.totalCountFiltered,duration:f.duration}:f}async function Cm(e,t,r){Qh(e);let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=t.extra,{description:d}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),m=new Wr({...t,analyticsAction:r}),f=await Gr(e,d),p=await m.fetchFromAPI(f,{origin:"mainSearch"});return await m.process(p)}async function xm(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:o}=e.extra,{description:a}=await nm().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:o}),d=new Wr({...e,analyticsAction:nm()}),m=await eE(t,a),f=await d.fetchFromAPI(m,{origin:"mainSearch"});return await d.process(f)}async function nE(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=e.extra,{description:d}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),m=new Wr({...e,analyticsAction:t}),f=await rE(r,d),p=await m.fetchFromAPI(f,{origin:"facetValues"});return await m.process(p)}async function Ec(e,t,r){Qh(e);let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=t.extra,{description:d}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),m=await Gr(e,d),f=new Wr({...t,analyticsAction:r}),p=await f.fetchFromAPI(m,{origin:"mainSearch"});return await f.process(p)}l();s();u();c();l();s();u();c();l();s();u();c();var Uh=re(e=>e.staticFilterSet,e=>Object.values(e||{}).map(r=>{let n=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),o=n.map(a=>a.expression).join(" OR ");return n.length>1?`(${o})`:o}));var At=async(e,t,r)=>{let n=Rm(e),o=oE(e),a=aE(e),d=e.configuration.analytics.analyticsMode==="legacy"?await Uo(e,r):yc(e,t,r);return $r({...d,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...n&&{cq:n},...o.length&&{facets:o},...e.pagination&&{numberOfResults:vm(e),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:a}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function vm(e){return e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0}function oE(e){return ym(sE(e),e.facetOrder??[])}function aE(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(iE).filter(r=>r.currentValues.length>0):void 0}function iE(e){let{field:t,label:r,values:n}=e,o=n.filter(a=>a.state==="selected");return{field:t,label:r,currentValues:o}}function sE(e){return cE(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function cE(e){return[...uE(e.facetSet??{}),...Bh(e.numericFacetSet??{}),...Bh(e.dateFacetSet??{}),...Hr(e.categoryFacetSet??{})]}function uE(e){return Hr(e).map(t=>{let r=hm[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function Bh(e){return Hr(e).map(t=>{let r=t.currentValues,n=r.some(({state:a})=>a!=="idle"),o=r.some(a=>a.previousState);return t.generateAutomaticRanges&&!n&&!o?{...t,currentValues:[]}:t})}function Rm(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(a=>a.isActive)?.expression.trim()||"",o=Uh(e);return[t,n,...o].filter(a=>!!a).join(" AND ")}var Kr=class{constructor(t,r=n=>{this.dispatch(hr({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let o=Date.now(),a=vc(await this.extra.apiClient.search(r,n),t),d=Date.now()-o,m=this.getState().query?.q||"";return{response:a,duration:d,queryExecuted:m,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Rt(t.response)?(this.dispatch(Br(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:a}=r.didYouMean,{results:d,queryCorrections:m,queryCorrection:f}=n;if(!o||!a)return null;let p=d.length===0&&m&&m.length!==0,g=!ee(f)&&!ee(f.correctedQuery);if(!p&&!g)return null;let v=p?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(Gt(Jt(this.getState()))),v}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(o);return Rt(a.response)?(this.dispatch(Br(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(Gt(Jt(this.getState()))),{...a,response:{...a.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(m=>m.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(bc("")),null;let a=this.getCurrentQuery(),d=await this.automaticallyRetryQueryWithTriggerModification(n);return Rt(d.response)?(this.dispatch(Br(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(Gt(Jt(this.getState()))),{...d,response:{...d.response.success},automaticallyCorrected:!1,originalQuery:a})}processSuccessResponse(t){return this.dispatch(Gt(Jt(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(t){return Rc(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=this.getState(),{actionCause:n}=kh(),o=await this.fetchFromAPI(await At(r,this.extra.navigatorContext,{actionCause:n}),{origin:"mainSearch"});return this.dispatch(Bo(t)),o}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(wc({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await At(this.getState(),this.extra.navigatorContext),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};var lE=te("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;I(e,{q:new V,enableQuerySyntax:new X,clearFilters:new X}),e.clearFilters&&(r(Ht()),r($s())),r(dc({allow:!0})),r(hr({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(gc(1))}),_h=A("search/updateSearchAction"),Se=te("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Ec(r,t,e.legacy);$h(r);let n=e.next?zh(e.next):void 0,o=await At(r,t.extra.navigatorContext,n),a=new Kr({...t,analyticsAction:n??{}}),d=await a.fetchFromAPI(o,{origin:"mainSearch"});return await a.process(d)}),$o=te("search/fetchPage",async(e,t)=>{let r=t.getState();if($h(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Cm(r,t,e.legacy);let n=new Kr({...t,analyticsAction:e.next}),o=await At(r,t.extra.navigatorContext,e.next),a=await n.fetchFromAPI(o,{origin:"mainSearch"});return await n.process(a)}),qc=te("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return xm(t,r);let n=uh("browseResults",t.getState),o=new Kr({...t,analyticsAction:n}),a=await dE(r,t.extra.navigatorContext,n),d=await o.fetchFromAPI(a,{origin:"mainSearch"});return await o.process(d)}),Tc=te("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Ec(r,t,e.legacy);let n=new Kr({...t,analyticsAction:{}}),o=await pE(r,t.extra.navigatorContext),a=await n.fetchFromAPI(o,{origin:"facetValues"});return await n.process(a)}),aJ=te("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Sm(e,t);I(e,{id:N,q:N,maxResultsPerQuery:new W({required:!0,min:1}),cacheTimeout:new W});let{q:n,maxResultsPerQuery:o}=e,a=zh(mh()),d=await mE(r,t.extra.navigatorContext,n,o,a),m=new Kr({...t,analyticsAction:a},g=>{t.dispatch(pc({q:g,id:e.id}))}),f=await m.fetchFromAPI(d,{origin:"instantResults",disableAbortWarning:!0}),p=await m.process(f);return"response"in p?{results:p.response.results,searchUid:p.response.searchUid,totalCountFiltered:p.response.totalCountFiltered,duration:p.duration}:p}),dE=async(e,t,r)=>{let n=await At(e,t,r);return n.request={...n.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},n},mE=async(e,t,r,n,o)=>{let a=yc(e,t,o);return $r({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:n,q:r})},pE=async(e,t,r)=>{let n=await At(e,t,r);return n.request.numberOfResults=0,n},$h=e=>{e.configuration.analytics.enabled&&Ct.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},zh=e=>({actionCause:e.actionCause,type:e.actionCause});l();s();u();c();l();s();u();c();var Oc={q:new V,enableQuerySyntax:new X,aq:new V,cq:new V,firstResult:new W({min:0}),numberOfResults:new W({min:0}),sortCriteria:new V,f:new L,fExcluded:new L,cf:new L,nf:new L,mnf:new L,df:new L,debug:new X,sf:new L,tab:new V,af:new L};var $e=A("searchParameters/restore",e=>I(e,Oc)),Hh=A("searchParameters/restoreTab",e=>I(e,N));l();s();u();c();function zo(e,t){let{facetId:r,criterion:n}=t,o=e[r]?.request;o&&(o.sortCriteria=n)}function Ci(e){e&&(e.currentValues=e.currentValues.map(t=>({...t,previousState:t.state!=="idle"?t.state:void 0,state:"idle"})),e.preventAutoSelect=!0)}function Gh(e,t){e&&(e.numberOfValues=t)}l();s();u();c();l();s();u();c();var kc=new V({regex:/^[a-zA-Z0-9-_]+$/}),jc=new V({required:!0}),TJ=new ae({each:new V}),OJ=new V,kJ=new X,Vc=new X,Dc=new W({min:0}),xi=new W({min:1}),Nc=new X({required:!0}),fE=new L,gE=new V,yE={captions:fE,numberOfValues:xi,query:gE},jJ=new L({values:yE}),Wh=new L({options:{required:!1},values:{type:new V({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new ae({required:!0,max:25,each:new V({emptyAllowed:!1,required:!0})})}}),VJ=new X,Kh=new ae({min:1,max:25,required:!1,each:new V({emptyAllowed:!1,required:!0})});l();s();u();c();var Xt={value:N,numberOfResults:new W({min:0}),state:N};var hE={facetId:le,field:new V({required:!0,emptyAllowed:!0}),tabs:new L({options:{required:!1},values:{included:new ae({each:new V}),excluded:new ae({each:new V})}}),activeTab:new V({required:!1}),filterFacetCount:new X({required:!1}),injectionDepth:new W({required:!1,min:0}),numberOfValues:new W({required:!1,min:1}),sortCriteria:new ve({required:!1}),resultsMustMatch:new ve({required:!1}),allowedValues:Wh,customSort:Kh},Mc=A("facet/register",e=>I(e,hE)),Lc=A("facet/toggleSelectValue",e=>I(e,{facetId:le,selection:new L({values:Xt})})),Qc=A("facet/toggleExcludeValue",e=>I(e,{facetId:le,selection:new L({values:Xt})})),st=A("facet/deselectAll",e=>I(e,le)),Yh=A("facet/updateSortCriterion",e=>I(e,{facetId:le,criterion:new ve({required:!0})})),Jh=A("facet/updateNumberOfValues",e=>I(e,{facetId:le,numberOfValues:new W({required:!0,min:1})})),Xh=A("facet/updateIsFieldExpanded",e=>I(e,{facetId:le,isFieldExpanded:new X({required:!0})})),Zh=A("facet/updateFreezeCurrentValues",e=>I(e,{facetId:le,freezeCurrentValues:new X({required:!0})}));var y9=Z(Mo(),e=>{e.addCase(Mc,(t,r)=>{let{facetId:n}=r.payload;n in t||(t[n]=eh(CE(r.payload)))}).addCase(De.fulfilled,(t,r)=>{if(r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase($e,(t,r)=>{let n=r.payload.f||{},o=r.payload.fExcluded||{};Object.keys(t).forEach(d=>{let{request:m}=t[d],f=n[d]||[],p=o[d]||[],g=f.length+p.length,C=m.currentValues.filter(v=>!f.includes(v.value)&&!p.includes(v.value));m.currentValues=[...f.map(tS),...p.map(rS),...C.map(xE)],m.preventAutoSelect=g>0,m.numberOfValues=Math.max(g,m.numberOfValues)})}).addCase(Lc,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a)return;a.preventAutoSelect=!0;let d=a.currentValues.find(f=>f.value===o.value);if(!d){Uc(a,o);return}let m=d.state==="selected";d.previousState=d.state,d.state=m?"idle":"selected",a.freezeCurrentValues=!0}).addCase(Qc,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a)return;a.preventAutoSelect=!0;let d=a.currentValues.find(f=>f.value===o.value);if(!d){Uc(a,o);return}let m=d.state==="excluded";d.previousState=d.state,d.state=m?"idle":"excluded",a.freezeCurrentValues=!0}).addCase(Zh,(t,r)=>{let{facetId:n,freezeCurrentValues:o}=r.payload,a=t[n]?.request;a&&(a.freezeCurrentValues=o)}).addCase(st,(t,r)=>{Ci(t[r.payload]?.request)}).addCase(Ht,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Ci(r))}).addCase($s,t=>{Object.values(t).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Ci(r))}).addCase(dc,(t,r)=>Object.values(t).forEach(n=>{n.request.preventAutoSelect=!r.payload.allow})).addCase(Yh,(t,r)=>{zo(t,r.payload)}).addCase(Jh,(t,r)=>{let{facetId:n,numberOfValues:o}=r.payload;Gh(t[n]?.request,o)}).addCase(Xh,(t,r)=>{let{facetId:n,isFieldExpanded:o}=r.payload,a=t[n]?.request;a&&(a.isFieldExpanded=o)}).addCase(Se.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>eS(t[o.facetId]?.request,o))}).addCase(Tc.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>eS(t[o.facetId]?.request,o))}).addCase(mt,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n]?.request;if(!a)return;let{rawValue:d}=o,{currentValues:m}=a,f=m.find(g=>g.value===d);if(f){f.state="selected";return}let p=tS(d);Uc(a,p),a.freezeCurrentValues=!0,a.preventAutoSelect=!0}).addCase(Vt,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n]?.request;if(!a)return;let{rawValue:d}=o,{currentValues:m}=a,f=m.find(g=>g.value===d);if(f){f.state="excluded";return}let p=rS(d);Uc(a,p),a.freezeCurrentValues=!0,a.preventAutoSelect=!0}).addCase(fr,(t,r)=>{if(!(r.payload in t))return;let{request:n}=t[r.payload];Ci(n)})});function Uc(e,t){let{currentValues:r}=e,n=r.findIndex(a=>a.state==="idle"),o=n===-1?r.length:n;e.currentValues.splice(o,0,t),n>-1&&e.currentValues.pop(),e.numberOfValues=e.currentValues.length}function eS(e,t){e&&(e.currentValues=t.values.map(Am),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var SE={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function CE(e){return{...SE,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function Am(e){let{value:t,state:r}=e;return{value:t,state:r}}function tS(e){return{value:e,state:"selected"}}function rS(e){return{value:e,state:"excluded"}}function xE(e){return{...e,state:"idle"}}l();s();u();c();l();s();u();c();var _c={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function $c(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let o=nS(r);r.numberOfValues=o,e[n]=t}function zc(e,t,r){let n=e[t]?.request;n&&(n.currentValues=r,n.numberOfValues=nS(n))}function Hc(e,t,r){let n=e[t]?.request;if(!n)return;let o=Bc(n.currentValues,r);if(!o)return;let a=o.state==="selected";o.previousState=o.state,o.state=a?"idle":"selected",n.preventAutoSelect=!0}function Gc(e,t,r){let n=e[t]?.request;if(!n)return;let o=Bc(n.currentValues,r);if(!o)return;let a=o.state==="excluded";o.previousState=o.state,o.state=a?"idle":"excluded",n.preventAutoSelect=!0}function Yr(e,t){let r=e[t]?.request;r&&r.currentValues.forEach(n=>{n.state!=="idle"&&(n.previousState=n.state),n.state="idle"})}function Wc(e,t){Object.entries(e).forEach(([r,{request:n}])=>{let o=t[r]||[];n.currentValues.forEach(m=>(!!Bc(o,m)&&(m.state="selected"),m));let a=o.filter(m=>!Bc(n.currentValues,m)),d=n.currentValues;d.push(...a),n.numberOfValues=Math.max(n.numberOfValues,d.length)})}function Kc(e,t,r){t.forEach(n=>{let o=n.facetId,a=e[o]?.request;if(!a)return;let d=r(n.values);a.currentValues=d,a.preventAutoSelect=!1})}function Bc(e,t){let{start:r,end:n}=t;return e.find(o=>o.start===r&&o.end===n)}function vi(e,t){let{start:r,end:n,endInclusive:o}=t;return e.find(a=>a.start===r&&a.end===n&&a.endInclusive===o)}function nS(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}l();s();u();c();l();s();u();c();function Cr(e){let t=oS(e.start,e),r=oS(e.end,e),n=e.endInclusive??!1,o=e.state??"idle";return{start:t,end:r,endInclusive:n,state:o}}function oS(e,t){let{dateFormat:r}=t;return Ih(e)?(_r(e),Ph(e)):typeof e=="string"&&Yt(e)?(_r(e),e):(xc(e,r),yi(Nn(e,r)))}l();s();u();c();var Ri=A("rangeFacet/updateSortCriterion",e=>I(e,{facetId:le,criterion:new ve({required:!0})}));l();s();u();c();var Ln={state:N,start:new W({required:!0}),end:new W({required:!0}),endInclusive:new X({required:!0}),numberOfResults:new W({required:!0,min:0})},Dt={start:N,end:N,endInclusive:new X({required:!0}),state:N,numberOfResults:new W({required:!0,min:0})},Fm=e=>({facetId:le,selection:typeof e.start=="string"?new L({values:Dt}):new L({values:Ln})});var vE={start:N,end:N,endInclusive:new X({required:!0}),state:N},RE={facetId:le,field:N,tabs:new L({options:{required:!1},values:{included:new ae({each:new V}),excluded:new ae({each:new V})}}),activeTab:new V({required:!1}),currentValues:new ae({required:!1,each:new L({values:vE})}),generateAutomaticRanges:new X({required:!0}),filterFacetCount:new X({required:!1}),injectionDepth:new W({required:!1,min:0}),numberOfValues:new W({required:!1,min:1}),sortCriteria:new ve({required:!1}),rangeAlgorithm:new ve({required:!1})};function aS(e){return Yt(e)?Si(e):e}function Ai(e){e.currentValues&&e.currentValues.forEach(t=>{let{start:r,end:n}=Cr(t);if(Nn(aS(r)).isAfter(Nn(aS(n))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var Fi=A("dateFacet/register",e=>{try{return je(e,RE),Ai(e),{payload:e,error:null}}catch(t){return{payload:e,error:rt(t)}}}),Ho=A("dateFacet/toggleSelectValue",e=>I(e,{facetId:le,selection:new L({values:Dt})})),Go=A("dateFacet/toggleExcludeValue",e=>I(e,{facetId:le,selection:new L({values:Dt})})),Yc=A("dateFacet/updateFacetValues",e=>{try{return je(e,{facetId:le,values:new ae({each:new L({values:Dt})})}),Ai({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:rt(t)}}}),iS=Ri,sS=st;var AE=Z(Do(),e=>{e.addCase(Fi,(t,r)=>{let{payload:n}=r,o=FE(n);$c(t,Xy(o))}).addCase(De.fulfilled,(t,r)=>r.payload?.dateFacetSet??t).addCase($e,(t,r)=>{let n=r.payload.df||{};Wc(t,n)}).addCase(Ho,(t,r)=>{let{facetId:n,selection:o}=r.payload;Hc(t,n,o)}).addCase(Go,(t,r)=>{let{facetId:n,selection:o}=r.payload;Gc(t,n,o)}).addCase(Yc,(t,r)=>{let{facetId:n,values:o}=r.payload;zc(t,n,o)}).addCase(sS,(t,r)=>{Yr(t,r.payload)}).addCase(Ht,t=>{Object.keys(t).forEach(r=>{Yr(t,r)})}).addCase(iS,(t,r)=>{zo(t,r.payload)}).addCase(Se.fulfilled,(t,r)=>{let n=r.payload.response.facets;Kc(t,n,Jc)}).addCase(fr,(t,r)=>{Yr(t,r.payload)})});function FE(e){return{..._c,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function Jc(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}l();s();u();c();l();s();u();c();var PE={state:N,start:new W({required:!0}),end:new W({required:!0}),endInclusive:new X({required:!0})},bE={facetId:le,field:N,tabs:new L({options:{required:!1},values:{included:new ae({each:new V}),excluded:new ae({each:new V})}}),activeTab:new V({required:!1}),currentValues:new ae({required:!1,each:new L({values:PE})}),generateAutomaticRanges:new X({required:!0}),filterFacetCount:new X({required:!1}),injectionDepth:new W({required:!1,min:0}),numberOfValues:new W({required:!1,min:1}),sortCriteria:new ve({required:!1}),rangeAlgorithm:new ve({required:!1})};function Pi(e){e.currentValues&&e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var bi=A("numericFacet/register",e=>{try{return I(e,bE),Pi(e),{payload:e,error:null}}catch(t){return{payload:e,error:rt(t)}}}),Wo=A("numericFacet/toggleSelectValue",e=>I(e,{facetId:le,selection:new L({values:Ln})})),Ko=A("numericFacet/toggleExcludeValue",e=>I(e,{facetId:le,selection:new L({values:Ln})})),Xc=A("numericFacet/updateFacetValues",e=>{try{return je(e,{facetId:le,values:new ae({each:new L({values:Ln})})}),Pi({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:rt(t)}}}),cS=Ri,uS=st;var lS=Z(No(),e=>{e.addCase(bi,(t,r)=>{let{payload:n}=r,o=wE(n);$c(t,Zy(o))}).addCase(De.fulfilled,(t,r)=>r.payload?.numericFacetSet??t).addCase($e,(t,r)=>{let n=r.payload.nf||{};Wc(t,n)}).addCase(Wo,(t,r)=>{let{facetId:n,selection:o}=r.payload;Hc(t,n,o)}).addCase(Ko,(t,r)=>{let{facetId:n,selection:o}=r.payload;Gc(t,n,o)}).addCase(Xc,(t,r)=>{let{facetId:n,values:o}=r.payload;zc(t,n,o)}).addCase(uS,(t,r)=>{Yr(t,r.payload)}).addCase(Ht,t=>{Object.keys(t).forEach(r=>{Yr(t,r)})}).addCase(cS,(t,r)=>{zo(t,r.payload)}).addCase(Se.fulfilled,(t,r)=>{let n=r.payload.response.facets;Kc(t,n,Pm)}).addCase(fr,(t,r)=>{Yr(t,r.payload)})});function wE(e){return{..._c,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function Pm(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}l();s();u();c();var Ae=te("commerce/productListing/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let a=t(),d=ht(a,o),m=await n.getProductListing({...d,enableResults:!!e?.enableResults});return He(m)?r(m.error):{response:m.success}}),Jr=te("commerce/productListing/fetchMoreProducts",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let a=t();if(!eg(a))return null;let m=wr(a),p=Ka(a)/m,g=await n.getProductListing({...ht(a,o),enableResults:!!e?.enableResults,page:p});return He(g)?r(g.error):{response:g.success}}),IE={child:new L({options:{required:!0},values:{permanentid:new V({required:!0})}})},Yo=A("commerce/productListing/promoteChildToParent",e=>I(e,IE));l();s();u();c();l();s();u();c();var Jo={f:new L,fExcluded:new L,lf:new L,cf:new L,nf:new L,nfExcluded:new L,mnf:new L,mnfExcluded:new L,df:new L,dfExcluded:new L,sortCriteria:new L,page:new W({min:0}),perPage:new W({min:1})};var Je=A("commerce/productListingParameters/restore",e=>I(e,Jo));l();s();u();c();l();s();u();c();var dS=(e,t,r)=>({...$t(t,r),query:t.querySet[e]});var Xr=A("commerce/querySuggest/clear",e=>I(e,{id:N})),Xe=te("commerce/querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:o,navigatorContext:a}})=>{o(e,{id:N});let d=t(),m=dS(e.id,d,a),f=await n.querySuggest(m);return He(f)?r(f.error):{id:e.id,query:m.query,...f.success}}),Xo=A("commerce/querySuggest/register",e=>I(e,{id:N,count:new W({min:0})})),Zt=A("commerce/querySuggest/selectSuggestion",e=>I(e,{id:N,expression:qe}));l();s();u();c();l();s();u();c();var Zc={q:new V,...Jo};var ke=A("commerce/searchParameters/restore",e=>I(e,Zc));l();s();u();c();l();s();u();c();var EE={state:new ve({required:!0}),numberOfResults:new W({required:!0,min:0}),value:new V({required:!0,emptyAllowed:!0}),path:new ae({required:!0,each:N}),moreValuesAvailable:new X({required:!1})};function wi(e){e.children.forEach(t=>{wi(t)}),je({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},EE)}var Qn=A("commerce/facets/categoryFacet/updateNumberOfValues",e=>I(e,{facetId:N,numberOfValues:new W({required:!1,min:1})})),er=A("commerce/facets/categoryFacet/toggleSelectValue",e=>{try{return je(e.facetId,N),wi(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:rt(t)}}});l();s();u();c();var Ft=A("commerce/facets/dateFacet/toggleSelectValue",e=>I(e,{facetId:N,selection:new L({values:Dt})})),Pt=A("commerce/facets/dateFacet/toggleExcludeValue",e=>I(e,{facetId:N,selection:new L({values:Dt})})),Zo=A("commerce/facets/dateFacet/updateValues",e=>{try{return je(e,{facetId:N,values:new ae({each:new L({values:Dt})})}),Ai({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:rt(t)}}});l();s();u();c();l();s();u();c();var mS=(e,t,r,n)=>{let o=t.categoryFacetSearchSet[e].options.query,a=`*${o}*`,d=t.commerceFacetSet[Ii(e)]?.request,m=d&&qE(d)?d&&TE(d):[],f=m.length?[m]:[],p=r?o:t.commerceQuery?.query,g=t.categoryFacetSearchSet[e].options.numberOfValues,{url:C,accessToken:v,organizationId:x,trackingId:R,language:F,country:w,currency:P,clientId:q,context:b,...E}=ht(t,n);return{url:C,accessToken:v,organizationId:x,facetId:Ii(e),facetQuery:r?"*":a,numberOfValues:g,ignorePaths:f,trackingId:R,language:F,country:w,currency:P,clientId:q,context:b,query:p,...!r&&{...E}}};function qE(e){return e.type==="hierarchical"}var TE=e=>{let t=[],r=e.values[0];for(;r;)t.push(r.value),r=r.children[0];return t};l();s();u();c();var pS=(e,t,r,n)=>{let o=t.facetSearchSet[e].options.query,a=t.facetSearchSet[e].options.numberOfValues,d=`*${o}*`,m=r?o:t.commerceQuery?.query,{url:f,accessToken:p,organizationId:g,trackingId:C,language:v,country:x,currency:R,clientId:F,context:w,...P}=ht(t,n);return{url:f,accessToken:p,organizationId:g,facetId:Ii(e),facetQuery:r?"*":d,numberOfValues:a,trackingId:C,language:v,country:x,currency:R,clientId:F,context:w,query:m,...!r&&{...P}}};var fS=e=>async({facetId:t,facetSearchType:r},{getState:n,extra:{validatePayload:o,navigatorContext:a,apiClient:d}})=>{let m=n();o(t,N);let f=OE(m,t)||kE(m,t)?pS(t,m,e,a):mS(t,m,e,a),p=await d.facetSearch(f,r);return{facetId:t,response:p}},bt=te("commerce/facetSearch/executeSearch",fS(!1)),ct=te("commerce/facetSearch/facetFieldSuggest",fS(!0)),OE=(e,t)=>"facetSearchSet"in e&&e.facetSearchSet[t]!==void 0&&e.commerceFacetSet[t]!==void 0,kE=(e,t)=>"fieldSuggestionsOrder"in e?e.fieldSuggestionsOrder.some(r=>r.facetId===t&&r.type==="regular"):!1,eu="field_suggestion:";function Ii(e){return e.startsWith(eu)?e.slice(eu.length):e}function ze(e){return e.startsWith(eu)?e:`${eu}${e}`}l();s();u();c();var wt=A("commerce/facets/locationFacet/toggleSelectValue",e=>I(e,{facetId:N,selection:new L({values:Xt})}));l();s();u();c();var ut=A("commerce/facets/numericFacet/toggleSelectValue",e=>I(e,{facetId:N,selection:new L({values:ru})})),lt=A("commerce/facets/numericFacet/toggleExcludeValue",e=>I(e,{facetId:N,selection:new L({values:ru})})),tu=A("commerce/facets/numericFacet/updateValues",e=>{try{return je(e,{facetId:N,values:new ae({each:new L({values:ru})})}),Pi({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:rt(t)}}}),Zr=A("commerce/facets/numericFacet/updateManualRange",e=>je(e,{facetId:N,...ru})),ru={state:new V({required:!0,constrainTo:["idle","selected","excluded"]}),start:new W({required:!0}),end:new W({required:!0}),endInclusive:new X({required:!0})};l();s();u();c();var It=A("commerce/facets/regularFacet/toggleExcludeValue",e=>I(e,{facetId:N,selection:new L({values:Xt})})),Et=A("commerce/facets/regularFacet/toggleSelectValue",e=>I(e,{facetId:N,selection:new L({values:Xt})}));l();s();u();c();function bm(e,t){for(let r of Object.keys(e))delete e[r];t.payload.f&&gS(e,t.payload.f,"regular"),t.payload.lf&&gS(e,t.payload.lf,"location"),t.payload.nf&&yS(e,t.payload.nf,"numericalRange"),t.payload.mnf&&jE(e,t.payload.mnf),t.payload.df&&yS(e,t.payload.df,"dateRange"),t.payload.cf&&VE(e,t.payload.cf)}function gS(e,t,r){let n=Object.entries(t);for(let[o,a]of n)e[o]={request:{...nu(o),type:r,values:a.map(d=>{let m={...wm(),value:d};switch(r){case"regular":return m;case"location":return m}})}}}function yS(e,t,r){let n=Object.entries(t);for(let[o,a]of n)e[o]={request:{...nu(o),type:r,values:a.map(d=>{let m={start:d.start,end:d.end,endInclusive:d.endInclusive,...wm()};switch(r){case"dateRange":return m;case"numericalRange":return m}})}}}function jE(e,t){let r=Object.entries(t);for(let[n,o]of r)e[n]={request:{...nu(n),type:"numericalRange",interval:"continuous",values:o.map(a=>({start:a.start,end:a.end,endInclusive:a.endInclusive,...wm()}))}}}function VE(e,t){let r=Object.entries(t);for(let[n,o]of r)e[n]={request:{...nu(n),type:"hierarchical",values:[],delimitingCharacter:"|",retrieveCount:8}},Im(e[n].request,o)}function nu(e){return{facetId:e,field:e,isFieldExpanded:!1,preventAutoSelect:!1}}function wm(){return{state:"selected",isAutoSelected:!1,isSuggested:!1,moreValuesAvailable:!0}}function hS(e){return{state:"selected",value:e}}function Im(e,t,r){e.values=DE(t),e.numberOfValues=r,e.preventAutoSelect=!0}function DE(e){if(!e.length)return[];let t=Ei(e[0]),r=t,[n,...o]=e;for(let a of o){let d=Ei(a);r.children.push(d),r=d}return r.state="selected",[t]}function Ei(e){return{children:[],state:"idle",value:e}}l();s();u();c();function SS(){return{}}var Ce=Z(SS(),e=>{e.addCase(Ae.fulfilled,CS).addCase(ue.fulfilled,CS).addCase(ct.fulfilled,(t,r)=>xS(t,ze(r.payload.facetId))).addCase(Xe.fulfilled,(t,r)=>{if(r.payload.fieldSuggestionsFacets)for(let{facetId:n}of r.payload.fieldSuggestionsFacets)xS(t,ze(n))}).addCase(Et,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a||!ou(a))return;a.preventAutoSelect=!0;let d=a.values.find(m=>m.value===o.value);if(!d){vr(a,o);return}xr(d,"select"),a.freezeCurrentValues=!0}).addCase(wt,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a||!NE(a))return;let d=a.values.find(m=>m.value===o.value);if(!d){vr(a,o);return}xr(d,"select")}).addCase(ut,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a||!Em(a))return;a.preventAutoSelect=!0;let d=vi(a.values,o);if(!d){vr(a,o);return}if(xr(d,"select"),a.numberOfValues=a.initialNumberOfValues,a.interval==="continuous"&&d.state==="idle"){a.values=[];return}}).addCase(Ft,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a||!qm(a))return;a.preventAutoSelect=!0;let d=vi(a.values,o);if(!d){vr(a,o);return}xr(d,"select")}).addCase(er,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!au(a))return;let{path:d}=o,m=d.slice(0,d.length-1),f=ME(a,m),p=f.find(g=>g.value===o.value);p||(p=Ei(o.value),f.push(p)),p.state=p.state==="idle"?"selected":"idle",p.state==="selected"&&(a.numberOfValues=a.initialNumberOfValues,a.retrieveCount=a.initialNumberOfValues)}).addCase(It,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a||!ou(a))return;a.preventAutoSelect=!0;let d=a.values.find(m=>m.value===o.value);if(!d){vr(a,o);return}xr(d,"exclude"),a.freezeCurrentValues=!0}).addCase(lt,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a||!Em(a))return;a.preventAutoSelect=!0;let d=vi(a.values,o);if(!d){vr(a,o);return}if(xr(d,"exclude"),a.numberOfValues=a.initialNumberOfValues,a.interval==="continuous"&&d.state==="idle"){a.values=[];return}}).addCase(Pt,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a||!qm(a))return;a.preventAutoSelect=!0;let d=vi(a.values,o);if(!d){vr(a,o);return}xr(d,"exclude"),a.numberOfValues=a.initialNumberOfValues}).addCase(Qn,(t,r)=>{let{facetId:n,numberOfValues:o}=r.payload,a=t[n]?.request;au(a)&&_E(a,o)}).addCase(mt,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n]?.request;if(!a||!ou(a))return;let{rawValue:d}=o;a.freezeCurrentValues=!0,a.preventAutoSelect=!0;let m=a.values.find(f=>f.value===d);if(!m){vr(a,hS(d));return}xr(m,"select")}).addCase(Vt,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n]?.request;if(!a||!ou(a))return;let{rawValue:d}=o;a.freezeCurrentValues=!0,a.preventAutoSelect=!0;let m=a.values.find(f=>f.value===d);if(!m){vr(a,{state:"excluded",value:d});return}xr(m,"exclude")}).addCase(St,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n]?.request;if(!au(a))return;let d=[...o.path,o.rawValue];Im(a,d,a.initialNumberOfValues)}).addCase(tu,(t,r)=>{let{facetId:n,values:o}=r.payload,a=t[n]?.request;!a||!Em(a)||(a.values=o,a.numberOfValues=o.length)}).addCase(Zo,(t,r)=>{let{facetId:n,values:o}=r.payload,a=t[n]?.request;!a||!qm(a)||(a.values=Jc(o),a.numberOfValues=o.length)}).addCase(In,(t,r)=>{let{facetId:n,numberOfValues:o}=r.payload,a=t[n]?.request;a&&(a.numberOfValues=o)}).addCase(En,(t,r)=>{let{facetId:n,isFieldExpanded:o}=r.payload,a=t[n]?.request;a&&(a.isFieldExpanded=o)}).addCase(Fo,(t,r)=>Object.values(t).forEach(n=>{n.request.preventAutoSelect=!r.payload.allow})).addCase(qn,(t,r)=>{let{facetId:n,freezeCurrentValues:o}=r.payload,a=t[n]?.request;a&&(a.freezeCurrentValues=o)}).addCase(We,(t,r)=>{let{facetId:n}=r.payload,o=t[n]?.request;o&&Om(o)}).addCase(Zr,(t,r)=>{let{facetId:n}=r.payload,o=t[n]?.request;o&&Om(o)}).addCase(Ve,BE).addCase(jr,Tm).addCase(Pe,Tm).addCase(we,Tm).addCase(ke,bm).addCase(Je,bm)});function ou(e){return e.type==="regular"}function NE(e){return e.type==="location"}function Em(e){return e.type==="numericalRange"}function qm(e){return e.type==="dateRange"}function au(e){return e?.type==="hierarchical"}function CS(e,t){let r=new Set(Object.keys(e)),n=t.payload.response.facets;for(let o of n)LE(e,o,r);for(let o of r)delete e[o]}function xS(e,t){let r=e[t]?.request;r||(e[t]={request:{}},r=e[t].request,r.initialNumberOfValues=10,r.values=[])}function Om(e){let t=()=>{e.values.forEach(r=>{r.state="idle"})};switch(e.type){case"hierarchical":e.initialNumberOfValues=void 0,e.numberOfValues=void 0,e.values=[],e.preventAutoSelect=!0;break;case"numericalRange":e.numberOfValues=e.initialNumberOfValues,t();break;default:t();break}}function ME(e,t){let r=e.values;for(let n of t){let o=r[0];(!o||n!==o.value)&&(o=Ei(n),r.length=0,r.push(o)),o.state="idle",r=o.children}return r}function xr(e,t){switch(e.state){case"idle":e.state=t==="exclude"?"excluded":"selected";break;case"excluded":e.state=t==="exclude"?"idle":"selected";break;case"selected":e.state=t==="exclude"?"excluded":"idle";break;default:break}}function LE(e,t,r){let n=t.facetId??t.field,o=e[n]?.request;o?r.delete(n):(e[n]={request:{}},o=e[n].request),o.initialNumberOfValues===void 0&&(o.initialNumberOfValues=t.numberOfValues),o.facetId=n,o.displayName=t.displayName,o.numberOfValues=t.numberOfValues,o.field=t.field,o.type=t.type,o.values=QE(t)??[],o.freezeCurrentValues=!1,o.preventAutoSelect=!1,t.type==="hierarchical"&&au(o)?o.delimitingCharacter=t.delimitingCharacter:t.type==="numericalRange"&&(o.interval=t.interval,t.domain&&(o.domain={min:t.domain.min,max:t.domain.max,increment:t.domain.increment}))}function QE(e){switch(e.type){case"numericalRange":return Pm(e.values);case"dateRange":return Jc(e.values);case"hierarchical":return e.values.map(vS);case"regular":return e.values.map(Am);case"location":return e.values.map(UE);default:return}}function vS(e){let t=e.children.map(vS),{state:r,value:n}=e;return{children:t,state:r,value:n}}function UE(e){let{value:t,state:r}=e;return{value:t,state:r}}function vr(e,t){let{values:r}=e,n=r.findIndex(a=>a.state==="idle"),o=n===-1?r.length:n;e.values.splice(o,0,t),n>-1&&e.values.pop(),e.numberOfValues=e.values.length}function BE(e){Object.values(e).forEach(t=>Om(t.request))}function Tm(e){Object.values(e).forEach(t=>{t.request.values=[]})}function _E(e,t){e.numberOfValues=t,e.retrieveCount=t}l();s();u();c();l();s();u();c();function RS(){return[]}var qt=Z(RS(),e=>{e.addCase(Xe.fulfilled,(t,r)=>r.payload.fieldSuggestionsFacets??[])});l();s();u();c();l();s();u();c();function AS(){return{}}var su=Z(AS(),e=>e.addCase(Zr,(t,r)=>{let{facetId:n,...o}=r.payload;t[n]={manualRange:o}}).addCase(lt,(t,r)=>{iu(t,r.payload.facetId)}).addCase(ut,(t,r)=>{iu(t,r.payload.facetId)}).addCase(We,(t,r)=>{iu(t,r.payload.facetId)}).addCase(ke,(t,r)=>{FS(t,r.payload.mnf)}).addCase(Je,(t,r)=>{FS(t,r.payload.mnf)}).addCase(Ve,t=>{for(let r of Object.keys(t))iu(t,r)})),iu=(e,t)=>{e[t]&&(e[t]={manualRange:void 0})},FS=(e,t)=>{for(let r of Object.keys(e))delete e[r];t&&Object.entries(t).forEach(([r,n])=>{let o=n[0];e[r]={manualRange:o}})};l();s();u();c();l();s();u();c();l();s();u();c();var cu={slotId:N,productId:new V({required:!1,emptyAllowed:!1})},PS=new pe(cu);l();s();u();c();var qi=(e,t)=>e.recommendations&&e.recommendations[t]?.products.length||0,bS=re((e,t)=>({total:Cs(e,t),current:qi(e,t)}),({current:e,total:t})=>e<t),wS=(e,t)=>{let r=e.recommendations?e.recommendations[t]?.isLoading:!1;return ee(r)?!1:r};var IS=(e,t,r,n)=>{let o=Ls(t,r,e);return{...o,context:{...o.context,...n?{product:{productId:n}}:{},purchased:ry(t.cart)},slotId:e}},Nt=te("commerce/recommendations/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let{slotId:a,productId:d}=e,m=IS(a,t(),o,d),f=await n.getRecommendations(m);return He(f)?r(f.error):{response:f.success}}),en=te("commerce/recommendations/fetchMore",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let a=e.slotId,d=t();if(bS(d,a))return null;let f=Ss(d,a),g=qi(d,a)/f,C={...IS(a,d,o),page:g},v=await n.getRecommendations(C);return He(v)?r(v.error):{response:v.success}}),ea=A("commerce/recommendations/registerSlot",e=>I(e,cu)),$E={child:new L({options:{required:!0},values:{permanentid:new V({required:!0})}}),...cu},ta=A("commerce/recommendations/promoteChildToParent",e=>I(e,$E));l();s();u();c();var Mt=A("commerce/sort/apply",e=>I(e,{by:new br({enum:kt,required:!0})}));var tr=Z(ng(),e=>{e.addCase(Vr,(t,r)=>{let n=uu(t,r.payload?.slotId);n&&n.page<n.totalPages-1&&++n.page}).addCase(Dr,(t,r)=>{let n=uu(t,r.payload?.slotId);n&&n.page>0&&--n.page}).addCase(zt,(t,r)=>{let n=uu(t,r.payload.slotId);n&&r.payload.page>=0&&r.payload.page<n.totalPages&&(n.page=r.payload.page)}).addCase(mr,(t,r)=>{let n=uu(t,r.payload.slotId);n&&(n.page=0,n.perPage=r.payload.pageSize)}).addCase(Ae.fulfilled,(t,r)=>{t.principal=r.payload.response.pagination}).addCase(ue.fulfilled,(t,r)=>{t.principal=r.payload.response.pagination}).addCase(Nt.fulfilled,(t,r)=>{t.recommendations[r.meta.arg.slotId]=r.payload.response.pagination}).addCase(Po,(t,r)=>{let n=r.payload.slotId;n in t.recommendations||(t.recommendations[n]=Er())}).addCase(Ve,ft).addCase(We,ft).addCase(Et,ft).addCase(It,ft).addCase(wt,ft).addCase(ut,ft).addCase(lt,ft).addCase(Ft,ft).addCase(Pt,ft).addCase(er,ft).addCase(Mt,ft).addCase(Pe,ft).addCase(we,ft).addCase(ke,ES).addCase(Je,ES)});function uu(e,t){return t?e.recommendations[t]:e.principal}function ft(e){e.principal.page=Er().page}function ES(e,t){t.payload.page?e.principal.page=t.payload.page:e.principal.page=Er().page,t.payload.perPage&&(e.principal.perPage=t.payload.perPage)}l();s();u();c();l();s();u();c();var Tt=A("app/setError");l();s();u();c();var lu=()=>({error:null,isLoading:!1,requestId:"",responseId:"",facets:[],products:[],results:[]});var ra=Z(lu(),e=>{e.addCase(Ae.rejected,(t,r)=>{km(t,r.payload)}).addCase(Jr.rejected,(t,r)=>{km(t,r.payload)}).addCase(Ae.fulfilled,(t,r)=>{let n=OS(r.payload);qS(t,r.payload.response),t.products=kS(r.payload.response.products,n,r.payload.response.responseId),t.results=jS(r.payload.response.results,n,r.payload.response.responseId)}).addCase(Jr.fulfilled,(t,r)=>{if(!r.payload)return;let n=OS(r.payload);qS(t,r.payload.response),t.products=t.products.concat(kS(r.payload.response.products,n,r.payload.response.responseId)),t.results=t.results.concat(jS(r.payload.response.results,n,r.payload.response.responseId))}).addCase(Ae.pending,(t,r)=>{TS(t,r.meta.requestId)}).addCase(Jr.pending,(t,r)=>{TS(t,r.meta.requestId)}).addCase(Yo,(t,r)=>{let n=t.results.length>0?t.results:t.products,o,a=n.findIndex(v=>v.resultType==="spotlight"?!1:(o=v.children.find(x=>x.permanentid===r.payload.child.permanentid),!!o)),d=n[a];if(a===-1||o===void 0||d.resultType==="spotlight")return;let m=d.responseId,f=d.position,{children:p,totalNumberOfChildren:g}=d,C={...o,resultType:"product",children:p,totalNumberOfChildren:g,position:f,responseId:m};n.splice(a,1,C)}).addCase(we,()=>lu()).addCase(Pe,()=>lu()).addCase(Tt,(t,r)=>{km(t,r.payload)})});function km(e,t){e.error=t||null,e.isLoading=!1}function qS(e,t){e.error=null,e.facets=t.facets,e.responseId=t.responseId,e.isLoading=!1}function TS(e,t){e.isLoading=!0,e.requestId=t}function OS(e){let t=e.response.pagination;return t.page*t.perPage}function kS(e,t,r){return e.map((n,o)=>VS(n,t+o+1,r))}function jS(e,t,r){return e.map((n,o)=>zE(n,t+o+1,r))}function zE(e,t,r){return e.resultType==="spotlight"?HE(e,t,r):VS(e,t,r)}function VS(e,t,r){let n=e.children.some(m=>m.permanentid===e.permanentid);if(e.children.length===0||n)return{...e,position:t,responseId:r};let{children:o,totalNumberOfChildren:a,...d}=e;return{...e,children:[d,...o],position:t,responseId:r}}function HE(e,t,r){return{...e,position:t,responseId:r}}l();s();u();c();var Ne=Z(Rs(),e=>{e.addCase(Te,(t,r)=>({...t,...r.payload})).addCase(ke,(t,r)=>{t.query=r.payload.q??""}).addCase(Zt,(t,r)=>{t.query=r.payload.expression})});l();s();u();c();l();s();u();c();var DS=()=>({}),NS=()=>({headline:"",error:null,isLoading:!1,responseId:"",products:[],productId:void 0});var na=Z(DS(),e=>{e.addCase(ea,(t,r)=>{let n=r.payload.slotId,o=r.payload.productId;if(!(n in t)){if(!o){t[n]=MS();return}t[n]=MS({productId:o})}}).addCase(Nt.rejected,(t,r)=>{jm(t,r.meta.arg.slotId,r.payload)}).addCase(en.rejected,(t,r)=>{jm(t,r.meta.arg.slotId,r.payload)}).addCase(Nt.fulfilled,(t,r)=>{let n=r.meta.arg.slotId,o=r.payload.response;LS(t,n,o);let a=t[n];if(!a)return;let d=US(r.payload);a.products=o.products.map((m,f)=>BS(m,d+f+1,o.responseId))}).addCase(en.fulfilled,(t,r)=>{if(!r.payload)return;let n=r.meta.arg.slotId,o=r.payload.response;LS(t,n,o);let a=t[n];if(!a)return;let d=US(r.payload);a.products=a.products.concat(o.products.map((m,f)=>BS(m,d+f+1,o.responseId)))}).addCase(Nt.pending,(t,r)=>{QS(t,r.meta.arg.slotId)}).addCase(en.pending,(t,r)=>{QS(t,r.meta.arg.slotId)}).addCase(ta,(t,r)=>{let n=t[r.payload.slotId];if(!n)return;let{products:o}=n,a,d=o.findIndex(v=>(a=v.children.find(x=>x.permanentid===r.payload.child.permanentid),!!a));if(d===-1||a===void 0)return;let m=o[d].responseId,f=o[d].position,{children:p,totalNumberOfChildren:g}=o[d],C={...a,resultType:"product",children:p,totalNumberOfChildren:g,position:f,responseId:m};o.splice(d,1,C)}).addCase(Tt,(t,r)=>{Object.keys(t).forEach(n=>{jm(t,n,r.payload)})})});function MS(e){return{...NS(),...e}}function jm(e,t,r){let n=e[t];n&&(n.error=r??null,n.isLoading=!1)}function LS(e,t,r){let n=e[t];n&&(n.error=null,n.headline=r.headline,n.responseId=r.responseId,n.isLoading=!1)}function QS(e,t){let r=e[t];r&&(r.isLoading=!0)}function US(e){let t=e.response.pagination;return t.page*t.perPage}function BS(e,t,r){let n=e.children.some(m=>m.permanentid===e.permanentid);if(e.children.length===0||n)return{...e,position:t,responseId:r};let{children:o,totalNumberOfChildren:a,...d}=e;return{...e,children:[d,...o],position:t,responseId:r}}l();s();u();c();l();s();u();c();var du=()=>({error:null,isLoading:!1,requestId:"",responseId:"",products:[],results:[],facets:[],queryExecuted:""});var rr=Z(du(),e=>{e.addCase(ue.rejected,(t,r)=>{_S(t,r.payload)}).addCase(Mr.rejected,(t,r)=>{_S(t,r.payload)}).addCase(ue.fulfilled,(t,r)=>{let n=HS(r.payload);zS(t,r.payload.response,r.payload.queryExecuted),t.products=r.payload.response.products.map((o,a)=>Vm(o,n+a+1,r.payload.response.responseId)),t.results=GS(r.payload.response.results,n,r.payload.response.responseId)}).addCase(Mr.fulfilled,(t,r)=>{if(!r.payload)return;let n=HS(r.payload);zS(t,r.payload.response,r.payload.queryExecuted),t.products=t.products.concat(r.payload.response.products.map((o,a)=>Vm(o,n+a+1,r.payload?.response.responseId))),t.results=t.results.concat(GS(r.payload.response.results,n,r.payload.response.responseId))}).addCase(ue.pending,(t,r)=>{$S(t,r.meta.requestId)}).addCase(Mr.pending,(t,r)=>{$S(t,r.meta.requestId)}).addCase(Eo,(t,r)=>{let n=t.results.length>0?t.results:t.products,o,a=n.findIndex(v=>v.resultType==="spotlight"?!1:(o=v.children.find(x=>x.permanentid===r.payload.child.permanentid),!!o)),d=n[a];if(a===-1||o===void 0||d.resultType==="spotlight")return;let m=d.responseId,f=d.position,{children:p,totalNumberOfChildren:g}=d,C={...o,resultType:"product",children:p,totalNumberOfChildren:g,position:f,responseId:m};n.splice(a,1,C)}).addCase(we,()=>du()).addCase(Pe,()=>du()).addCase(Tt,(t,r)=>{t.error=r.payload,t.isLoading=!1})});function _S(e,t){e.error=t||null,e.isLoading=!1}function $S(e,t){e.isLoading=!0,e.requestId=t}function zS(e,t,r){e.error=null,e.facets=t.facets,e.responseId=t.responseId,e.isLoading=!1,e.queryExecuted=r??""}function HS(e){let t=e.response.pagination;return t.page*t.perPage}function Vm(e,t,r){let n=e.children.some(m=>m.permanentid===e.permanentid);if(e.children.length===0||n)return{...e,position:t,responseId:r};let{children:o,totalNumberOfChildren:a,...d}=e;return{...e,children:[d,...o],position:t,responseId:r}}function GS(e,t,r){return e.map((n,o)=>GE(n,t+o+1,r))}function GE(e,t,r){return e.resultType==="spotlight"?WE(e,t,r):Vm(e,t,r)}function WE(e,t,r){return{...e,position:t,responseId:r}}l();s();u();c();var nr=Z(xn(),e=>{e.addCase(Mt,(t,r)=>{t.appliedSort=r.payload}).addCase(Ae.fulfilled,WS).addCase(ue.fulfilled,WS).addCase(Pe,xn).addCase(we,xn).addCase(ke,YS).addCase(Je,YS)});function WS(e,t){let r=t.payload.response;e.appliedSort=KS(r.sort.appliedSort),e.availableSorts=r.sort.availableSorts.map(KS)}var KS=e=>e.sortCriteria==="relevance"?jt():{by:"fields",fields:(e.fields||[]).map(({field:t,direction:r,displayName:n})=>({name:t,direction:r,displayName:n}))};function YS(e,t){if(t.payload.sortCriteria){e.appliedSort=t.payload.sortCriteria;return}e.appliedSort=xn().appliedSort}l();s();u();c();l();s();u();c();function Dm(e){return e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore},e}function Nm(e,t){let r=[],n=[],o=[],a=[];return t.forEach(d=>{switch(d.type){case"redirect":r.push(d.content);break;case"query":n.push(d.content);break;case"execute":o.push({functionName:d.content.name,params:d.content.params});break;case"notify":a.push(d.content);break}}),e.redirectTo=r[0]??"",e.query=e.queryModification.newQuery,e.executions=o,e.notifications=a,e}function JS(e,t){return e.queryModification={...t,queryToIgnore:""},e}function XS(e,t){return e.queryModification.queryToIgnore=t,e}l();s();u();c();var ZS=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});var or=Z(ZS(),e=>e.addCase(ue.pending,Dm).addCase(ue.fulfilled,(t,r)=>Nm(t,r.payload.response.triggers)).addCase(Ae.pending,Dm).addCase(Ae.fulfilled,(t,r)=>Nm(t,r.payload.response.triggers)).addCase(bo,(t,r)=>JS(t,r.payload)).addCase(Nr,(t,r)=>XS(t,r.payload.q)));l();s();u();c();var Mm=Z(Tr,e=>e);l();s();u();c();var ar=Z(_o(),e=>{e.addCase(Se.fulfilled,Lm).addCase(Ae.fulfilled,Lm).addCase(ue.fulfilled,Lm).addCase(ke,eC).addCase(Je,eC).addCase(De.fulfilled,(t,r)=>r.payload?.facetOrder??t).addCase(we,()=>_o()).addCase(Pe,()=>_o())});function Lm(e,t){return t.payload.response.facets.map(r=>r.facetId)}function eC(e,t){return[...Object.keys(t.payload.f??{}),...Object.keys(t.payload.lf??{}),...Object.keys(t.payload.nf??{}),...Object.keys(t.payload.df??{}),...Object.keys(t.payload.cf??{}),...Object.keys(t.payload.mnf??{})]}l();s();u();c();l();s();u();c();function Ti(e,t,r){let{facetId:n}=t;if(e[n])return;let o=!1,a={...tn,...t},d=r();e[n]={options:a,isLoading:o,response:d,initialNumberOfValues:a.numberOfValues,requestId:""}}function mu(e,t){let{facetId:r,...n}=t,o=e[r];o&&(o.options={...o.options,...n})}function rn(e,t,r){let n=e[t];n&&(n.requestId=r,n.isLoading=!0)}function nn(e,t){let r=e[t];r&&(r.isLoading=!1)}function pu(e,t,r){let{facetId:n,response:o}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,a.response=o)}function fu(e,t,r){let{facetId:n,response:o}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,"success"in o&&(a.response=o.success))}function gu(e,t,r,n){let{facetId:o,response:a}=t,d=ze(o),m=e[d];if(!m)Ti(e,{facetId:d},n),m=e[d];else if(m.requestId!==r)return;m.isLoading=!1,"success"in a&&(m.response=a.success)}function tC(e,t,r,n){if(t.fieldSuggestionsFacets)for(let o of t.fieldSuggestionsFacets)o.facetId in e||o.type!=="regular"||(e[o.facetId]={options:{...tn,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:tn.numberOfValues,requestId:r})}function rC(e,t,r,n){if(t.fieldSuggestionsFacets)for(let o of t.fieldSuggestionsFacets){let a=ze(o.facetId);a in e||o.type!=="hierarchical"||(e[a]={options:{...tn,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:tn.numberOfValues,requestId:r})}}function Oi(e,t,r){let{facetId:n}=t,o=e[n];o&&(o.requestId="",o.isLoading=!1,o.response=r(),o.options.numberOfValues=o.initialNumberOfValues,o.options.query=tn.query)}function Rr(e,t){Object.keys(e).forEach(r=>Oi(e,{facetId:r},t))}var tn={captions:{},numberOfValues:10,query:""};l();s();u();c();l();s();u();c();var nC=async(e,t,r,n)=>{let o=t.categoryFacetSearchSet[e].options,a=t.categoryFacetSet[e].request,{captions:d,query:m,numberOfValues:f}=o,{field:p,delimitingCharacter:g,basePath:C,filterFacetCount:v}=a,x=KE(a),R=x.length?[x]:[],F=`*${m}*`;return{url:t.configuration.search.apiBaseUrl??yt(t.configuration.organizationId,t.configuration.environment),accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:C,captions:d,numberOfValues:f,query:F,field:p,delimitingCharacter:g,ignorePaths:R,filterFacetCount:v,type:"hierarchical",...n?{}:{searchContext:(await At(t,r)).request}}},KE=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};l();s();u();c();var oC=async(e,t,r,n)=>{let{captions:o,query:a,numberOfValues:d}=t.facetSearchSet[e].options,{field:m,currentValues:f,filterFacetCount:p}=t.facetSet[e].request,g=f.filter(v=>v.state!=="idle").map(v=>v.value),C=`*${a}*`;return{url:t.configuration.search.apiBaseUrl??yt(t.configuration.organizationId,t.configuration.environment),accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:o,numberOfValues:d,query:C,field:m,ignoreValues:g,filterFacetCount:p,type:"specific",...n?{}:{searchContext:(await At(t,r)).request}}};var aC=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:o,navigatorContext:a}})=>{let d=r(),m;o(t,N),YE(d,t)?m=await oC(t,d,a,e):m=await nC(t,d,a,e);let f=await n.facetSearch(m);return{facetId:t,response:f}},on=te("facetSearch/executeSearch",aC(!1)),Fae=te("facetSearch/executeSearch",aC(!0)),oa=A("facetSearch/clearResults",e=>I(e,{facetId:le})),YE=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;l();s();u();c();function iC(){return{}}var an=Z(iC(),e=>{e.addCase(Bs,(t,r)=>{let n=r.payload;Ti(t,n,Un)}).addCase(Lr,(t,r)=>{mu(t,r.payload)}).addCase(bt.pending,(t,r)=>{let{facetId:n}=r.meta.arg;rn(t,n,r.meta.requestId)}).addCase(ct.pending,(t,r)=>{let{facetId:n}=r.meta.arg;rn(t,n,r.meta.requestId)}).addCase(on.pending,(t,r)=>{let n=r.meta.arg;rn(t,n,r.meta.requestId)}).addCase(bt.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;nn(t,n)}).addCase(ct.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;nn(t,ze(n))}).addCase(on.rejected,(t,r)=>{let n=r.meta.arg;nn(t,n)}).addCase(bt.fulfilled,(t,r)=>{fu(t,r.payload,r.meta.requestId)}).addCase(ct.fulfilled,(t,r)=>{gu(t,r.payload,r.meta.requestId,Un)}).addCase(Xe.fulfilled,(t,r)=>{rC(t,r.payload,r.meta.requestId,Un)}).addCase(on.fulfilled,(t,r)=>{pu(t,r.payload,r.meta.requestId)}).addCase(oa,(t,{payload:{facetId:r}})=>{Oi(t,{facetId:r},Un)}).addCase(Ae.fulfilled,t=>Rr(t,Un)).addCase(ue.fulfilled,t=>Rr(t,Un)).addCase(Se.fulfilled,t=>{Rr(t,Un)})});function Un(){return{moreValuesAvailable:!1,values:[]}}l();s();u();c();l();s();u();c();function sC(){return{}}var aa=Z(sC(),e=>{e.addCase(_s,(t,r)=>{let n=r.payload;Ti(t,n,sn)}).addCase(Lr,(t,r)=>{mu(t,r.payload)}).addCase(bt.pending,(t,r)=>{let{facetId:n}=r.meta.arg;rn(t,n,r.meta.requestId)}).addCase(ct.pending,(t,r)=>{let{facetId:n}=r.meta.arg;rn(t,ze(n),r.meta.requestId)}).addCase(on.pending,(t,r)=>{let n=r.meta.arg;rn(t,n,r.meta.requestId)}).addCase(bt.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;nn(t,n)}).addCase(ct.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;nn(t,ze(n))}).addCase(on.rejected,(t,r)=>{let n=r.meta.arg;nn(t,n)}).addCase(bt.fulfilled,(t,r)=>{fu(t,r.payload,r.meta.requestId)}).addCase(ct.fulfilled,(t,r)=>{gu(t,r.payload,r.meta.requestId,sn)}).addCase(Xe.fulfilled,(t,r)=>{tC(t,r.payload,r.meta.requestId,sn)}).addCase(on.fulfilled,(t,r)=>{pu(t,r.payload,r.meta.requestId)}).addCase(oa,(t,{payload:r})=>{Oi(t,r,sn)}).addCase(Se.fulfilled,t=>{Rr(t,sn)}).addCase(Ae.fulfilled,t=>Rr(t,sn)).addCase(ue.fulfilled,t=>Rr(t,sn)).addCase(we,t=>Rr(t,sn))});function sn(){return{moreValuesAvailable:!1,values:[]}}l();s();u();c();l();s();u();c();l();s();u();c();function cC(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}var uC=Lt;function vC(e,t){if(e===t||!(uC(e)&&uC(t)||Array.isArray(e)&&Array.isArray(t)))return t;let r=Object.keys(t),n=Object.keys(e),o=r.length===n.length,a=Array.isArray(t)?[]:{};for(let d of r)a[d]=vC(e[d],t[d]),o&&(o=e[d]===a[d]);return o?e:a}function ia(e){let t=0;for(let r in e)t++;return t}var lC=e=>[].concat(...e);function JE(e){return new RegExp("(^|:)//").test(e)}function XE(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function Su(e){return e!=null}function ZE(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var eq=e=>e.replace(/\/$/,""),tq=e=>e.replace(/^\//,"");function rq(e,t){if(!e)return t;if(!t)return e;if(JE(t))return t;let r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=eq(e),t=tq(t),`${e}${r}${t}`}function nq(e,t,r){return e.has(t)?e.get(t):e.set(t,r).get(t)}var dC=(...e)=>h(...e),oq=e=>e.status>=200&&e.status<=299,aq=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function mC(e){if(!Lt(e))return e;let t={...e};for(let[r,n]of Object.entries(t))n===void 0&&delete t[r];return t}function RC({baseUrl:e,prepareHeaders:t=C=>C,fetchFn:r=dC,paramsSerializer:n,isJsonContentType:o=aq,jsonContentType:a="application/json",jsonReplacer:d,timeout:m,responseHandler:f,validateStatus:p,...g}={}){return typeof h>"u"&&r===dC&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(v,x,R)=>{let{getState:F,extra:w,endpoint:P,forced:q,type:b}=x,E,{url:Q,headers:k=new S(g.headers),params:T=void 0,responseHandler:O=f??"json",validateStatus:j=p??oq,timeout:U=m,...G}=typeof v=="string"?{url:v}:v,z,_=x.signal;U&&(z=new i.AbortController,x.signal.addEventListener("abort",z.abort),_=z.signal);let B={...g,signal:_,...G};k=new S(mC(k)),B.headers=await t(k,{getState:F,arg:v,extra:w,endpoint:P,forced:q,type:b,extraOptions:R})||k;let H=se=>typeof se=="object"&&(Lt(se)||Array.isArray(se)||typeof se.toJSON=="function");if(!B.headers.has("content-type")&&H(B.body)&&B.headers.set("content-type",a),H(B.body)&&o(B.headers)&&(B.body=JSON.stringify(B.body,d)),T){let se=~Q.indexOf("?")?"&":"?",fe=n?n(T):new URLSearchParams(mC(T));Q+=se+fe}Q=rq(e,Q);let $=new Request(Q,B);E={request:new Request(Q,B)};let J,oe=!1,de=z&&setTimeout(()=>{oe=!0,z.abort()},U);try{J=await r($)}catch(se){return{error:{status:oe?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(se)},meta:E}}finally{de&&clearTimeout(de),z?.signal.removeEventListener("abort",z.abort)}let ye=J.clone();E.response=ye;let ce,me="";try{let se;if(await Promise.all([C(J,O).then(fe=>ce=fe,fe=>se=fe),ye.text().then(fe=>me=fe,()=>{})]),se)throw se}catch(se){return{error:{status:"PARSING_ERROR",originalStatus:J.status,data:me,error:String(se)},meta:E}}return j(J,ce)?{data:ce,meta:E}:{error:{status:J.status,data:ce},meta:E}};async function C(v,x){if(typeof x=="function")return x(v);if(x==="content-type"&&(x=o(v.headers)?"json":"text"),x==="json"){let R=await v.text();return R.length?JSON.parse(R):null}return v.text()}}var sa=class{constructor(e,t=void 0){this.value=e,this.meta=t}};async function iq(e=0,t=5){let r=Math.min(e,t),n=~~((Math.random()+.4)*(300<<r));await new Promise(o=>setTimeout(a=>o(a),n))}function sq(e,t){throw Object.assign(new sa({error:e,meta:t}),{throwImmediately:!0})}var pC={},cq=(e,t)=>async(r,n,o)=>{let a=[5,(t||pC).maxRetries,(o||pC).maxRetries].filter(g=>g!==void 0),[d]=a.slice(-1),f={maxRetries:d,backoff:iq,retryCondition:(g,C,{attempt:v})=>v<=d,...t,...o},p=0;for(;;)try{let g=await e(r,n,o);if(g.error)throw new sa(g);return g}catch(g){if(p++,g.throwImmediately){if(g instanceof sa)return g.value;throw g}if(g instanceof sa&&!f.retryCondition(g.value.error,r,{attempt:p,baseQueryApi:n,extraOptions:o}))return g.value;await f.backoff(p,f.maxRetries)}},Cu=Object.assign(cq,{fail:sq}),$m=A("__rtkq/focused"),AC=A("__rtkq/unfocused"),zm=A("__rtkq/online"),FC=A("__rtkq/offline");function Hm(e){return e.type==="query"}function uq(e){return e.type==="mutation"}function Gm(e){return e.type==="infinitequery"}function Wm(e,t,r,n,o,a){return lq(e)?e(t,r,n,o).filter(Su).map(Um).map(a):Array.isArray(e)?e.map(Um).map(a):[]}function lq(e){return typeof e=="function"}function Um(e){return typeof e=="string"?{type:e}:e}function dq(e,t){return e.catch(t)}var ji=Symbol("forceQueryFn"),Bm=e=>typeof e[ji]=="function";function mq({serializeQueryArgs:e,queryThunk:t,infiniteQueryThunk:r,mutationThunk:n,api:o,context:a}){let d=new Map,m=new Map,{unsubscribeQueryResult:f,removeMutationResult:p,updateSubscriptionOptions:g}=o.internalActions;return{buildInitiateQuery:P,buildInitiateInfiniteQuery:q,buildInitiateMutation:b,getRunningQueryThunk:C,getRunningMutationThunk:v,getRunningQueriesThunk:x,getRunningMutationsThunk:R};function C(E,Q){return k=>{let T=a.endpointDefinitions[E],O=e({queryArgs:Q,endpointDefinition:T,endpointName:E});return d.get(k)?.[O]}}function v(E,Q){return k=>m.get(k)?.[Q]}function x(){return E=>Object.values(d.get(E)||{}).filter(Su)}function R(){return E=>Object.values(m.get(E)||{}).filter(Su)}function F(E){}function w(E,Q){let k=(T,{subscribe:O=!0,forceRefetch:j,subscriptionOptions:U,[ji]:G,...z}={})=>(_,B)=>{let H=e({queryArgs:T,endpointDefinition:Q,endpointName:E}),$,Y={...z,type:"query",subscribe:O,forceRefetch:j,subscriptionOptions:U,endpointName:E,originalArgs:T,queryCacheKey:H,[ji]:G};if(Hm(Q))$=t(Y);else{let{direction:he,initialPageParam:Fe}=z;$=r({...Y,direction:he,initialPageParam:Fe})}let J=o.endpoints[E].select(T),oe=_($),de=J(B());let{requestId:ye,abort:ce}=oe,me=de.requestId!==ye,se=d.get(_)?.[H],fe=()=>J(B()),be=Object.assign(G?oe.then(fe):me&&!se?Promise.resolve(de):Promise.all([se,oe]).then(fe),{arg:T,requestId:ye,subscriptionOptions:U,queryCacheKey:H,abort:ce,async unwrap(){let he=await be;if(he.isError)throw he.error;return he.data},refetch:()=>_(k(T,{subscribe:!1,forceRefetch:!0})),unsubscribe(){O&&_(f({queryCacheKey:H,requestId:ye}))},updateSubscriptionOptions(he){be.subscriptionOptions=he,_(g({endpointName:E,requestId:ye,queryCacheKey:H,options:he}))}});if(!se&&!me&&!G){let he=nq(d,_,{});he[H]=be,be.then(()=>{delete he[H],ia(he)||d.delete(_)})}return be};return k}function P(E,Q){return w(E,Q)}function q(E,Q){return w(E,Q)}function b(E){return(Q,{track:k=!0,fixedCacheKey:T}={})=>(O,j)=>{let U=n({type:"mutation",endpointName:E,originalArgs:Q,track:k,fixedCacheKey:T}),G=O(U);let{requestId:z,abort:_,unwrap:B}=G,H=dq(G.unwrap().then(oe=>({data:oe})),oe=>({error:oe})),$=()=>{O(p({requestId:z,fixedCacheKey:T}))},Y=Object.assign(H,{arg:G.arg,requestId:z,abort:_,unwrap:B,reset:$}),J=m.get(O)||{};return m.set(O,J),J[z]=Y,Y.then(()=>{delete J[z],ia(J)||m.delete(O)}),T&&(J[T]=Y,Y.then(()=>{J[T]===Y&&(delete J[T],ia(J)||m.delete(O))})),Y}}}function pq(e){return e}var yu=(e={})=>({...e,[$a]:!0});function fq({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:n,api:o,assertTagType:a,selectors:d}){let m=(O,j,U,G)=>(z,_)=>{let B=r[O],H=n({queryArgs:j,endpointDefinition:B,endpointName:O});if(z(o.internalActions.queryResultPatched({queryCacheKey:H,patches:U})),!G)return;let $=o.endpoints[O].select(j)(_()),Y=Wm(B.providesTags,$.data,void 0,j,{},a);z(o.internalActions.updateProvidedBy({queryCacheKey:H,providedTags:Y}))};function f(O,j,U=0){let G=[j,...O];return U&&G.length>U?G.slice(0,-1):G}function p(O,j,U=0){let G=[...O,j];return U&&G.length>U?G.slice(1):G}let g=(O,j,U,G=!0)=>(z,_)=>{let H=o.endpoints[O].select(j)(_()),$={patches:[],inversePatches:[],undo:()=>z(o.util.patchQueryData(O,j,$.inversePatches,G))};if(H.status==="uninitialized")return $;let Y;if("data"in H)if(it(H.data)){let[J,oe,de]=cs(H.data,U);$.patches.push(...oe),$.inversePatches.push(...de),Y=J}else Y=U(H.data),$.patches.push({op:"replace",path:[],value:Y}),$.inversePatches.push({op:"replace",path:[],value:H.data});return $.patches.length===0||z(o.util.patchQueryData(O,j,$.patches,G)),$},C=(O,j,U)=>G=>G(o.endpoints[O].initiate(j,{subscribe:!1,forceRefetch:!0,[ji]:()=>({data:U})})),v=(O,j)=>O.query&&O[j]?O[j]:pq,x=async(O,{signal:j,abort:U,rejectWithValue:G,fulfillWithValue:z,dispatch:_,getState:B,extra:H})=>{let $=r[O.endpointName];try{let Y=v($,"transformResponse"),J={signal:j,abort:U,dispatch:_,getState:B,extra:H,endpoint:O.endpointName,type:O.type,forced:O.type==="query"?R(O,B()):void 0,queryCacheKey:O.type==="query"?O.queryCacheKey:void 0},oe=O.type==="query"?O[ji]:void 0,de,ye=async(me,se,fe,be)=>{if(se==null&&me.pages.length)return Promise.resolve({data:me});let he={queryArg:O.originalArgs,pageParam:se},Fe=await ce(he),Ie=be?f:p;return{data:{pages:Ie(me.pages,Fe.data,fe),pageParams:Ie(me.pageParams,se,fe)}}};async function ce(me){let se,{extraOptions:fe}=$;if(oe?se=oe():$.query?se=await t($.query(me),J,fe):se=await $.queryFn(me,J,fe,he=>t(he,J,fe)),typeof process<"u",se.error)throw new sa(se.error,se.meta);let be=await Y(se.data,se.meta,me);return{...se,data:be}}if(O.type==="query"&&"infiniteQueryOptions"in $){let{infiniteQueryOptions:me}=$,{maxPages:se=1/0}=me,fe,be={pages:[],pageParams:[]},he=d.selectQueryEntry(B(),O.queryCacheKey)?.data,Ie=R(O,B())&&!O.direction||!he?be:he;if("direction"in O&&O.direction&&Ie.pages.length){let ot=O.direction==="backward",Pr=(ot?PC:_m)(me,Ie);fe=await ye(Ie,Pr,se,ot)}else{let{initialPageParam:ot=me.initialPageParam}=O,gt=he?.pageParams??[],Pr=gt[0]??ot,Jn=gt.length;fe=await ye(Ie,Pr,se),oe&&(fe={data:fe.data.pages[0]});for(let Xn=1;Xn<Jn;Xn++){let Ea=_m(me,fe.data);fe=await ye(fe.data,Ea,se)}}de=fe}else de=await ce(O.originalArgs);return z(de.data,yu({fulfilledTimeStamp:Date.now(),baseQueryMeta:de.meta}))}catch(Y){let J=Y;if(J instanceof sa){let oe=v($,"transformErrorResponse");try{return G(await oe(J.value,J.meta,O.originalArgs),yu({baseQueryMeta:J.meta}))}catch(de){J=de}}throw typeof process<"u",console.error(J),J}};function R(O,j){let U=d.selectQueryEntry(j,O.queryCacheKey),G=d.selectConfig(j).refetchOnMountOrArgChange,z=U?.fulfilledTimeStamp,_=O.forceRefetch??(O.subscribe&&G);return _?_===!0||(Number(new Date)-Number(z))/1e3>=_:!1}let F=()=>te(`${e}/executeQuery`,x,{getPendingMeta({arg:j}){let U=r[j.endpointName];return yu({startedTimeStamp:Date.now(),...Gm(U)?{direction:j.direction}:{}})},condition(j,{getState:U}){let G=U(),z=d.selectQueryEntry(G,j.queryCacheKey),_=z?.fulfilledTimeStamp,B=j.originalArgs,H=z?.originalArgs,$=r[j.endpointName],Y=j.direction;return Bm(j)?!0:z?.status==="pending"?!1:R(j,G)||Hm($)&&$?.forceRefetch?.({currentArg:B,previousArg:H,endpointState:z,state:G})?!0:!(_&&!Y)},dispatchConditionRejection:!0}),w=F(),P=F(),q=te(`${e}/executeMutation`,x,{getPendingMeta(){return yu({startedTimeStamp:Date.now()})}}),b=O=>"force"in O,E=O=>"ifOlderThan"in O,Q=(O,j,U)=>(G,z)=>{let _=b(U)&&U.force,B=E(U)&&U.ifOlderThan,H=(Y=!0)=>{let J={forceRefetch:Y,isPrefetch:!0};return o.endpoints[O].initiate(j,J)},$=o.endpoints[O].select(j)(z());if(_)G(H());else if(B){let Y=$?.fulfilledTimeStamp;if(!Y){G(H());return}(Number(new Date)-Number(new Date(Y)))/1e3>=B&&G(H())}else G(H(!1))};function k(O){return j=>j?.meta?.arg?.endpointName===O}function T(O,j){return{matchPending:uo(fs(O),k(j)),matchFulfilled:uo(ur(O),k(j)),matchRejected:uo(hn(O),k(j))}}return{queryThunk:w,mutationThunk:q,infiniteQueryThunk:P,prefetch:Q,updateQueryData:g,upsertQueryData:C,patchQueryData:m,buildMatchThunkActions:T}}function _m(e,{pages:t,pageParams:r}){let n=t.length-1;return e.getNextPageParam(t[n],t,r[n],r)}function PC(e,{pages:t,pageParams:r}){return e.getPreviousPageParam?.(t[0],t,r[0],r)}function bC(e,t,r,n){return Wm(r[e.meta.arg.endpointName][t],ur(e)?e.payload:void 0,Ha(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function hu(e,t,r){let n=e[t];n&&r(n)}function Vi(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function fC(e,t,r){let n=e[Vi(t)];n&&r(n)}var ki={};function gq({reducerPath:e,queryThunk:t,mutationThunk:r,serializeQueryArgs:n,context:{endpointDefinitions:o,apiUid:a,extractRehydrationInfo:d,hasRehydrationInfo:m},assertTagType:f,config:p}){let g=A(`${e}/resetApiState`);function C(k,T,O,j){var U;k[U=T.queryCacheKey]??(k[U]={status:"uninitialized",endpointName:T.endpointName}),hu(k,T.queryCacheKey,G=>{G.status="pending",G.requestId=O&&G.requestId?G.requestId:j.requestId,T.originalArgs!==void 0&&(G.originalArgs=T.originalArgs),G.startedTimeStamp=j.startedTimeStamp;let z=o[j.arg.endpointName];Gm(z)&&"direction"in T&&(G.direction=T.direction)})}function v(k,T,O,j){hu(k,T.arg.queryCacheKey,U=>{if(U.requestId!==T.requestId&&!j)return;let{merge:G}=o[T.arg.endpointName];if(U.status="fulfilled",G)if(U.data!==void 0){let{fulfilledTimeStamp:z,arg:_,baseQueryMeta:B,requestId:H}=T,$=cr(U.data,Y=>G(Y,O,{arg:_.originalArgs,baseQueryMeta:B,fulfilledTimeStamp:z,requestId:H}));U.data=$}else U.data=O;else U.data=o[T.arg.endpointName].structuralSharing??!0?vC(dt(U.data)?Nl(U.data):U.data,O):O;delete U.error,U.fulfilledTimeStamp=T.fulfilledTimeStamp})}let x=Sn({name:`${e}/queries`,initialState:ki,reducers:{removeQueryResult:{reducer(k,{payload:{queryCacheKey:T}}){delete k[T]},prepare:lo()},cacheEntriesUpserted:{reducer(k,T){for(let O of T.payload){let{queryDescription:j,value:U}=O;C(k,j,!0,{arg:j,requestId:T.meta.requestId,startedTimeStamp:T.meta.timestamp}),v(k,{arg:j,requestId:T.meta.requestId,fulfilledTimeStamp:T.meta.timestamp,baseQueryMeta:{}},U,!0)}},prepare:k=>({payload:k.map(j=>{let{endpointName:U,arg:G,value:z}=j,_=o[U];return{queryDescription:{type:"query",endpointName:U,originalArgs:j.arg,queryCacheKey:n({queryArgs:G,endpointDefinition:_,endpointName:U})},value:z}}),meta:{[$a]:!0,requestId:Ga(),timestamp:Date.now()}})},queryResultPatched:{reducer(k,{payload:{queryCacheKey:T,patches:O}}){hu(k,T,j=>{j.data=Ll(j.data,O.concat())})},prepare:lo()}},extraReducers(k){k.addCase(t.pending,(T,{meta:O,meta:{arg:j}})=>{let U=Bm(j);C(T,j,U,O)}).addCase(t.fulfilled,(T,{meta:O,payload:j})=>{let U=Bm(O.arg);v(T,O,j,U)}).addCase(t.rejected,(T,{meta:{condition:O,arg:j,requestId:U},error:G,payload:z})=>{hu(T,j.queryCacheKey,_=>{if(!O){if(_.requestId!==U)return;_.status="rejected",_.error=z??G}})}).addMatcher(m,(T,O)=>{let{queries:j}=d(O);for(let[U,G]of Object.entries(j))(G?.status==="fulfilled"||G?.status==="rejected")&&(T[U]=G)})}}),R=Sn({name:`${e}/mutations`,initialState:ki,reducers:{removeMutationResult:{reducer(k,{payload:T}){let O=Vi(T);O in k&&delete k[O]},prepare:lo()}},extraReducers(k){k.addCase(r.pending,(T,{meta:O,meta:{requestId:j,arg:U,startedTimeStamp:G}})=>{U.track&&(T[Vi(O)]={requestId:j,status:"pending",endpointName:U.endpointName,startedTimeStamp:G})}).addCase(r.fulfilled,(T,{payload:O,meta:j})=>{j.arg.track&&fC(T,j,U=>{U.requestId===j.requestId&&(U.status="fulfilled",U.data=O,U.fulfilledTimeStamp=j.fulfilledTimeStamp)})}).addCase(r.rejected,(T,{payload:O,error:j,meta:U})=>{U.arg.track&&fC(T,U,G=>{G.requestId===U.requestId&&(G.status="rejected",G.error=O??j)})}).addMatcher(m,(T,O)=>{let{mutations:j}=d(O);for(let[U,G]of Object.entries(j))(G?.status==="fulfilled"||G?.status==="rejected")&&U!==G?.requestId&&(T[U]=G)})}}),F=Sn({name:`${e}/invalidation`,initialState:ki,reducers:{updateProvidedBy:{reducer(k,T){var U,G;let{queryCacheKey:O,providedTags:j}=T.payload;for(let z of Object.values(k))for(let _ of Object.values(z)){let B=_.indexOf(O);B!==-1&&_.splice(B,1)}for(let{type:z,id:_}of j){let B=(U=k[z]??(k[z]={}))[G=_||"__internal_without_id"]??(U[G]=[]);B.includes(O)||B.push(O)}},prepare:lo()}},extraReducers(k){k.addCase(x.actions.removeQueryResult,(T,{payload:{queryCacheKey:O}})=>{for(let j of Object.values(T))for(let U of Object.values(j)){let G=U.indexOf(O);G!==-1&&U.splice(G,1)}}).addMatcher(m,(T,O)=>{var U,G;let{provided:j}=d(O);for(let[z,_]of Object.entries(j))for(let[B,H]of Object.entries(_)){let $=(U=T[z]??(T[z]={}))[G=B||"__internal_without_id"]??(U[G]=[]);for(let Y of H)$.includes(Y)||$.push(Y)}}).addMatcher(Qt(ur(t),Ha(t)),(T,O)=>{let j=bC(O,"providesTags",o,f),{queryCacheKey:U}=O.meta.arg;F.caseReducers.updateProvidedBy(T,F.actions.updateProvidedBy({queryCacheKey:U,providedTags:j}))})}}),w=Sn({name:`${e}/subscriptions`,initialState:ki,reducers:{updateSubscriptionOptions(k,T){},unsubscribeQueryResult(k,T){},internal_getRTKQSubscriptions(){}}}),P=Sn({name:`${e}/internalSubscriptions`,initialState:ki,reducers:{subscriptionsUpdated:{reducer(k,T){return Ll(k,T.payload)},prepare:lo()}}}),q=Sn({name:`${e}/config`,initialState:{online:ZE(),focused:XE(),middlewareRegistered:!1,...p},reducers:{middlewareRegistered(k,{payload:T}){k.middlewareRegistered=k.middlewareRegistered==="conflict"||a!==T?"conflict":!0}},extraReducers:k=>{k.addCase(zm,T=>{T.online=!0}).addCase(FC,T=>{T.online=!1}).addCase($m,T=>{T.focused=!0}).addCase(AC,T=>{T.focused=!1}).addMatcher(m,T=>({...T}))}}),b=ro({queries:x.reducer,mutations:R.reducer,provided:F.reducer,subscriptions:P.reducer,config:q.reducer}),E=(k,T)=>b(g.match(T)?void 0:k,T),Q={...q.actions,...x.actions,...w.actions,...P.actions,...R.actions,...F.actions,resetApiState:g};return{reducer:E,actions:Q}}var Qm=Symbol.for("RTKQ/skipToken"),wC={status:"uninitialized"},gC=cr(wC,()=>{}),yC=cr(wC,()=>{});function yq({serializeQueryArgs:e,reducerPath:t,createSelector:r}){let n=b=>gC,o=b=>yC;return{buildQuerySelector:v,buildInfiniteQuerySelector:x,buildMutationSelector:R,selectInvalidatedBy:F,selectCachedArgsForQuery:w,selectApiState:d,selectQueries:m,selectMutations:p,selectQueryEntry:f,selectConfig:g};function a(b){return{...b,...cC(b.status)}}function d(b){return b[t]}function m(b){return d(b)?.queries}function f(b,E){return m(b)?.[E]}function p(b){return d(b)?.mutations}function g(b){return d(b)?.config}function C(b,E,Q){return k=>{if(k===Qm)return r(n,Q);let T=e({queryArgs:k,endpointDefinition:E,endpointName:b});return r(j=>f(j,T)??gC,Q)}}function v(b,E){return C(b,E,a)}function x(b,E){let{infiniteQueryOptions:Q}=E;function k(T){let O={...T,...cC(T.status)},{isLoading:j,isError:U,direction:G}=O,z=G==="forward",_=G==="backward";return{...O,hasNextPage:P(Q,O.data),hasPreviousPage:q(Q,O.data),isFetchingNextPage:j&&z,isFetchingPreviousPage:j&&_,isFetchNextPageError:U&&z,isFetchPreviousPageError:U&&_}}return C(b,E,k)}function R(){return b=>{let E;return typeof b=="object"?E=Vi(b)??Qm:E=b,r(E===Qm?o:T=>d(T)?.mutations?.[E]??yC,a)}}function F(b,E){let Q=b[t],k=new Set;for(let T of E.filter(Su).map(Um)){let O=Q.provided[T.type];if(!O)continue;let j=(T.id!==void 0?O[T.id]:lC(Object.values(O)))??[];for(let U of j)k.add(U)}return lC(Array.from(k.values()).map(T=>{let O=Q.queries[T];return O?[{queryCacheKey:T,endpointName:O.endpointName,originalArgs:O.originalArgs}]:[]}))}function w(b,E){return Object.values(m(b)).filter(Q=>Q?.endpointName===E&&Q.status!=="uninitialized").map(Q=>Q.originalArgs)}function P(b,E){return E?_m(b,E)!=null:!1}function q(b,E){return!E||!b.getPreviousPageParam?!1:PC(b,E)!=null}}var hC=WeakMap?new WeakMap:void 0,SC=({endpointName:e,queryArgs:t})=>{let r="",n=hC?.get(t);if(typeof n=="string")r=n;else{let o=JSON.stringify(t,(a,d)=>(d=typeof d=="bigint"?{$bigint:d.toString()}:d,d=Lt(d)?Object.keys(d).sort().reduce((m,f)=>(m[f]=d[f],m),{}):d,d));Lt(t)&&hC?.set(t,o),r=o}return`${e}(${r})`};function hq(...e){return function(r){let n=so(p=>r.extractRehydrationInfo?.(p,{reducerPath:r.reducerPath??"api"})),o={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...r,extractRehydrationInfo:n,serializeQueryArgs(p){let g=SC;if("serializeQueryArgs"in p.endpointDefinition){let C=p.endpointDefinition.serializeQueryArgs;g=v=>{let x=C(v);return typeof x=="string"?x:SC({...v,queryArgs:x})}}else r.serializeQueryArgs&&(g=r.serializeQueryArgs);return g(p)},tagTypes:[...r.tagTypes||[]]},a={endpointDefinitions:{},batch(p){p()},apiUid:Ga(),extractRehydrationInfo:n,hasRehydrationInfo:so(p=>n(p)!=null)},d={injectEndpoints:f,enhanceEndpoints({addTagTypes:p,endpoints:g}){if(p)for(let C of p)o.tagTypes.includes(C)||o.tagTypes.push(C);if(g)for(let[C,v]of Object.entries(g))typeof v=="function"?v(a.endpointDefinitions[C]):Object.assign(a.endpointDefinitions[C]||{},v);return d}},m=e.map(p=>p.init(d,o,a));function f(p){let g=p.endpoints({query:C=>({...C,type:"query"}),mutation:C=>({...C,type:"mutation"}),infiniteQuery:C=>({...C,type:"infinitequery"})});for(let[C,v]of Object.entries(g)){if(p.overrideExisting!==!0&&C in a.endpointDefinitions){if(p.overrideExisting==="throw")throw new Error(tt(39));typeof process<"u";continue}typeof process<"u",a.endpointDefinitions[C]=v;for(let x of m)x.injectEndpoint(C,v)}return d}return d.injectEndpoints({endpoints:r.endpoints})}}function Ar(e,...t){return Object.assign(e,...t)}var Sq=({api:e,queryThunk:t,internalState:r})=>{let n=`${e.reducerPath}/subscriptions`,o=null,a=null,{updateSubscriptionOptions:d,unsubscribeQueryResult:m}=e.internalActions,f=(x,R)=>{var w,P;if(d.match(R)){let{queryCacheKey:q,requestId:b,options:E}=R.payload;return x?.[q]?.[b]&&(x[q][b]=E),!0}if(m.match(R)){let{queryCacheKey:q,requestId:b}=R.payload;return x[q]&&delete x[q][b],!0}if(e.internalActions.removeQueryResult.match(R))return delete x[R.payload.queryCacheKey],!0;if(t.pending.match(R)){let{meta:{arg:q,requestId:b}}=R,E=x[w=q.queryCacheKey]??(x[w]={});return E[`${b}_running`]={},q.subscribe&&(E[b]=q.subscriptionOptions??E[b]??{}),!0}let F=!1;if(t.fulfilled.match(R)||t.rejected.match(R)){let q=x[R.meta.arg.queryCacheKey]||{},b=`${R.meta.requestId}_running`;F||(F=!!q[b]),delete q[b]}if(t.rejected.match(R)){let{meta:{condition:q,arg:b,requestId:E}}=R;if(q&&b.subscribe){let Q=x[P=b.queryCacheKey]??(x[P]={});Q[E]=b.subscriptionOptions??Q[E]??{},F=!0}}return F},p=()=>r.currentSubscriptions,v={getSubscriptions:p,getSubscriptionCount:x=>{let F=p()[x]??{};return ia(F)},isRequestSubscribed:(x,R)=>!!p()?.[x]?.[R]};return(x,R)=>{if(o||(o=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(x))return o=r.currentSubscriptions={},a=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(x))return[!1,v];let F=f(r.currentSubscriptions,x),w=!0;if(F){a||(a=setTimeout(()=>{let b=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,E]=cs(o,()=>b);R.next(e.internalActions.subscriptionsUpdated(E)),o=b,a=null},500));let P=typeof x.type=="string"&&!!x.type.startsWith(n),q=t.rejected.match(x)&&x.meta.condition&&!!x.meta.arg.subscribe;w=!P&&!q}return[w,!1]}};function Cq(e){for(let t in e)return!1;return!0}var xq=2147483647/1e3-1,vq=({reducerPath:e,api:t,queryThunk:r,context:n,internalState:o,selectors:{selectQueryEntry:a,selectConfig:d}})=>{let{removeQueryResult:m,unsubscribeQueryResult:f,cacheEntriesUpserted:p}=t.internalActions,g=Qt(f.match,r.fulfilled,r.rejected,p.match);function C(w){let P=o.currentSubscriptions[w];return!!P&&!Cq(P)}let v={},x=(w,P,q)=>{let b=P.getState(),E=d(b);if(g(w)){let Q;if(p.match(w))Q=w.payload.map(k=>k.queryDescription.queryCacheKey);else{let{queryCacheKey:k}=f.match(w)?w.payload:w.meta.arg;Q=[k]}R(Q,P,E)}if(t.util.resetApiState.match(w))for(let[Q,k]of Object.entries(v))k&&clearTimeout(k),delete v[Q];if(n.hasRehydrationInfo(w)){let{queries:Q}=n.extractRehydrationInfo(w);R(Object.keys(Q),P,E)}};function R(w,P,q){let b=P.getState();for(let E of w){let Q=a(b,E);F(E,Q?.endpointName,P,q)}}function F(w,P,q,b){let Q=n.endpointDefinitions[P]?.keepUnusedDataFor??b.keepUnusedDataFor;if(Q===1/0)return;let k=Math.max(0,Math.min(Q,xq));if(!C(w)){let T=v[w];T&&clearTimeout(T),v[w]=setTimeout(()=>{C(w)||q.dispatch(m({queryCacheKey:w})),delete v[w]},k*1e3)}}return x},CC=new Error("Promise never resolved before cacheEntryRemoved."),Rq=({api:e,reducerPath:t,context:r,queryThunk:n,mutationThunk:o,internalState:a,selectors:{selectQueryEntry:d,selectApiState:m}})=>{let f=gs(n),p=gs(o),g=ur(n,o),C={};function v(P,q,b){let E=C[P];E?.valueResolved&&(E.valueResolved({data:q,meta:b}),delete E.valueResolved)}function x(P){let q=C[P];q&&(delete C[P],q.cacheEntryRemoved())}let R=(P,q,b)=>{let E=F(P);function Q(k,T,O,j){let U=d(b,T),G=d(q.getState(),T);!U&&G&&w(k,j,T,q,O)}if(n.pending.match(P))Q(P.meta.arg.endpointName,E,P.meta.requestId,P.meta.arg.originalArgs);else if(e.internalActions.cacheEntriesUpserted.match(P))for(let{queryDescription:k,value:T}of P.payload){let{endpointName:O,originalArgs:j,queryCacheKey:U}=k;Q(O,U,P.meta.requestId,j),v(U,T,{})}else if(o.pending.match(P))q.getState()[t].mutations[E]&&w(P.meta.arg.endpointName,P.meta.arg.originalArgs,E,q,P.meta.requestId);else if(g(P))v(E,P.payload,P.meta.baseQueryMeta);else if(e.internalActions.removeQueryResult.match(P)||e.internalActions.removeMutationResult.match(P))x(E);else if(e.util.resetApiState.match(P))for(let k of Object.keys(C))x(k)};function F(P){return f(P)?P.meta.arg.queryCacheKey:p(P)?P.meta.arg.fixedCacheKey??P.meta.requestId:e.internalActions.removeQueryResult.match(P)?P.payload.queryCacheKey:e.internalActions.removeMutationResult.match(P)?Vi(P.payload):""}function w(P,q,b,E,Q){let k=r.endpointDefinitions[P],T=k?.onCacheEntryAdded;if(!T)return;let O={},j=new Promise(H=>{O.cacheEntryRemoved=H}),U=Promise.race([new Promise(H=>{O.valueResolved=H}),j.then(()=>{throw CC})]);U.catch(()=>{}),C[b]=O;let G=e.endpoints[P].select(k.type==="query"?q:b),z=E.dispatch((H,$,Y)=>Y),_={...E,getCacheEntry:()=>G(E.getState()),requestId:Q,extra:z,updateCachedData:k.type==="query"?H=>E.dispatch(e.util.updateQueryData(P,q,H)):void 0,cacheDataLoaded:U,cacheEntryRemoved:j},B=T(q,_);Promise.resolve(B).catch(H=>{if(H!==CC)throw H})}return R},Aq=({api:e,context:{apiUid:t},reducerPath:r})=>(n,o)=>{e.util.resetApiState.match(n)&&o.dispatch(e.internalActions.middlewareRegistered(t)),typeof process<"u"},Fq=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:n,queryThunk:o,api:a,assertTagType:d,refetchQuery:m,internalState:f})=>{let{removeQueryResult:p}=a.internalActions,g=Qt(ur(n),Ha(n)),C=Qt(ur(n,o),hn(n,o)),v=[],x=(w,P)=>{g(w)?F(bC(w,"invalidatesTags",r,d),P):C(w)?F([],P):a.util.invalidateTags.match(w)&&F(Wm(w.payload,void 0,void 0,void 0,void 0,d),P)};function R(w){let{queries:P,mutations:q}=w;for(let b of[P,q])for(let E in b)if(b[E]?.status==="pending")return!0;return!1}function F(w,P){let q=P.getState(),b=q[e];if(v.push(...w),b.config.invalidationBehavior==="delayed"&&R(b))return;let E=v;if(v=[],E.length===0)return;let Q=a.util.selectInvalidatedBy(q,E);t.batch(()=>{let k=Array.from(Q.values());for(let{queryCacheKey:T}of k){let O=b.queries[T],j=f.currentSubscriptions[T]??{};O&&(ia(j)===0?P.dispatch(p({queryCacheKey:T})):O.status!=="uninitialized"&&P.dispatch(m(O)))}})}return x},Pq=({reducerPath:e,queryThunk:t,api:r,refetchQuery:n,internalState:o})=>{let a={},d=(x,R)=>{(r.internalActions.updateSubscriptionOptions.match(x)||r.internalActions.unsubscribeQueryResult.match(x))&&p(x.payload,R),(t.pending.match(x)||t.rejected.match(x)&&x.meta.condition)&&p(x.meta.arg,R),(t.fulfilled.match(x)||t.rejected.match(x)&&!x.meta.condition)&&f(x.meta.arg,R),r.util.resetApiState.match(x)&&C()};function m(x,R){let w=R.getState()[e].queries[x],P=o.currentSubscriptions[x];if(!(!w||w.status==="uninitialized"))return P}function f({queryCacheKey:x},R){let F=R.getState()[e],w=F.queries[x],P=o.currentSubscriptions[x];if(!w||w.status==="uninitialized")return;let{lowestPollingInterval:q,skipPollingIfUnfocused:b}=v(P);if(!Number.isFinite(q))return;let E=a[x];E?.timeout&&(clearTimeout(E.timeout),E.timeout=void 0);let Q=Date.now()+q;a[x]={nextPollTimestamp:Q,pollingInterval:q,timeout:setTimeout(()=>{(F.config.focused||!b)&&R.dispatch(n(w)),f({queryCacheKey:x},R)},q)}}function p({queryCacheKey:x},R){let w=R.getState()[e].queries[x],P=o.currentSubscriptions[x];if(!w||w.status==="uninitialized")return;let{lowestPollingInterval:q}=v(P);if(!Number.isFinite(q)){g(x);return}let b=a[x],E=Date.now()+q;(!b||E<b.nextPollTimestamp)&&f({queryCacheKey:x},R)}function g(x){let R=a[x];R?.timeout&&clearTimeout(R.timeout),delete a[x]}function C(){for(let x of Object.keys(a))g(x)}function v(x={}){let R=!1,F=Number.POSITIVE_INFINITY;for(let w in x)x[w].pollingInterval&&(F=Math.min(x[w].pollingInterval,F),R=x[w].skipPollingIfUnfocused||R);return{lowestPollingInterval:F,skipPollingIfUnfocused:R}}return d},bq=({api:e,context:t,queryThunk:r,mutationThunk:n})=>{let o=fs(r,n),a=hn(r,n),d=ur(r,n),m={};return(p,g)=>{if(o(p)){let{requestId:C,arg:{endpointName:v,originalArgs:x}}=p.meta,R=t.endpointDefinitions[v],F=R?.onQueryStarted;if(F){let w={},P=new Promise((Q,k)=>{w.resolve=Q,w.reject=k});P.catch(()=>{}),m[C]=w;let q=e.endpoints[v].select(R.type==="query"?x:C),b=g.dispatch((Q,k,T)=>T),E={...g,getCacheEntry:()=>q(g.getState()),requestId:C,extra:b,updateCachedData:R.type==="query"?Q=>g.dispatch(e.util.updateQueryData(v,x,Q)):void 0,queryFulfilled:P};F(x,E)}}else if(d(p)){let{requestId:C,baseQueryMeta:v}=p.meta;m[C]?.resolve({data:p.payload,meta:v}),delete m[C]}else if(a(p)){let{requestId:C,rejectedWithValue:v,baseQueryMeta:x}=p.meta;m[C]?.reject({error:p.payload??p.error,isUnhandledError:!v,meta:x}),delete m[C]}}},wq=({reducerPath:e,context:t,api:r,refetchQuery:n,internalState:o})=>{let{removeQueryResult:a}=r.internalActions,d=(f,p)=>{$m.match(f)&&m(p,"refetchOnFocus"),zm.match(f)&&m(p,"refetchOnReconnect")};function m(f,p){let g=f.getState()[e],C=g.queries,v=o.currentSubscriptions;t.batch(()=>{for(let x of Object.keys(v)){let R=C[x],F=v[x];if(!F||!R)continue;(Object.values(F).some(P=>P[p]===!0)||Object.values(F).every(P=>P[p]===void 0)&&g.config[p])&&(ia(F)===0?f.dispatch(a({queryCacheKey:x})):R.status!=="uninitialized"&&f.dispatch(n(R)))}})}return d};function Iq(e){let{reducerPath:t,queryThunk:r,api:n,context:o}=e,{apiUid:a}=o,d={invalidateTags:A(`${t}/invalidateTags`)},m=C=>C.type.startsWith(`${t}/`),f=[Aq,vq,Fq,Pq,Rq,bq];return{middleware:C=>{let v=!1,R={...e,internalState:{currentSubscriptions:{}},refetchQuery:g,isThisApiSliceAction:m},F=f.map(q=>q(R)),w=Sq(R),P=wq(R);return q=>b=>{if(!oo(b))return q(b);v||(v=!0,C.dispatch(n.internalActions.middlewareRegistered(a)));let E={...C,next:q},Q=C.getState(),[k,T]=w(b,E,Q),O;if(k?O=q(b):O=T,C.getState()[t]&&(P(b,E,Q),m(b)||o.hasRehydrationInfo(b)))for(let j of F)j(b,E,Q);return O}},actions:d};function g(C){return e.api.endpoints[C.endpointName].initiate(C.originalArgs,{subscribe:!1,forceRefetch:!0})}}var xC=Symbol(),Eq=({createSelector:e=re}={})=>({name:xC,init(t,{baseQuery:r,tagTypes:n,reducerPath:o,serializeQueryArgs:a,keepUnusedDataFor:d,refetchOnMountOrArgChange:m,refetchOnFocus:f,refetchOnReconnect:p,invalidationBehavior:g},C){Rf();let v=ce=>(typeof process<"u",ce);Object.assign(t,{reducerPath:o,endpoints:{},internalActions:{onOnline:zm,onOffline:FC,onFocus:$m,onFocusLost:AC},util:{}});let x=yq({serializeQueryArgs:a,reducerPath:o,createSelector:e}),{selectInvalidatedBy:R,selectCachedArgsForQuery:F,buildQuerySelector:w,buildInfiniteQuerySelector:P,buildMutationSelector:q}=x;Ar(t.util,{selectInvalidatedBy:R,selectCachedArgsForQuery:F});let{queryThunk:b,infiniteQueryThunk:E,mutationThunk:Q,patchQueryData:k,updateQueryData:T,upsertQueryData:O,prefetch:j,buildMatchThunkActions:U}=fq({baseQuery:r,reducerPath:o,context:C,api:t,serializeQueryArgs:a,assertTagType:v,selectors:x}),{reducer:G,actions:z}=gq({context:C,queryThunk:b,infiniteQueryThunk:E,mutationThunk:Q,serializeQueryArgs:a,reducerPath:o,assertTagType:v,config:{refetchOnFocus:f,refetchOnReconnect:p,refetchOnMountOrArgChange:m,keepUnusedDataFor:d,reducerPath:o,invalidationBehavior:g}});Ar(t.util,{patchQueryData:k,updateQueryData:T,upsertQueryData:O,prefetch:j,resetApiState:z.resetApiState,upsertQueryEntries:z.cacheEntriesUpserted}),Ar(t.internalActions,z);let{middleware:_,actions:B}=Iq({reducerPath:o,context:C,queryThunk:b,mutationThunk:Q,infiniteQueryThunk:E,api:t,assertTagType:v,selectors:x});Ar(t.util,B),Ar(t,{reducer:G,middleware:_});let{buildInitiateQuery:H,buildInitiateInfiniteQuery:$,buildInitiateMutation:Y,getRunningMutationThunk:J,getRunningMutationsThunk:oe,getRunningQueriesThunk:de,getRunningQueryThunk:ye}=mq({queryThunk:b,mutationThunk:Q,infiniteQueryThunk:E,api:t,serializeQueryArgs:a,context:C});return Ar(t.util,{getRunningMutationThunk:J,getRunningMutationsThunk:oe,getRunningQueryThunk:ye,getRunningQueriesThunk:de}),{name:xC,injectEndpoint(ce,me){var be;let fe=(be=t.endpoints)[ce]??(be[ce]={});Hm(me)&&Ar(fe,{name:ce,select:w(ce,me),initiate:H(ce,me)},U(b,ce)),uq(me)&&Ar(fe,{name:ce,select:q(),initiate:Y(ce)},U(Q,ce)),Gm(me)&&Ar(fe,{name:ce,select:P(ce,me),initiate:$(ce,me)},U(b,ce))}}}}),xu=hq(Eq());l();s();u();c();var Km=async(e,t,r)=>{let n=t.getState(),{accessToken:o,environment:a,organizationId:d}=n.configuration,m=n.generatedAnswer.answerConfigurationId,f={...e,headers:{...e?.headers||{},Authorization:`Bearer ${o}`}};try{let p=Ee(d,a);return{data:RC({baseUrl:`${p}/rest/organizations/${d}/answer/v1/configs/${m}`,fetchFn:async C=>{if(C instanceof String)throw new Error("The provided 'request' must be a Request object.");let v=C.url,x={};return["method","headers","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal"].forEach(R=>{x[R]=C[R]}),x.duplex="half",x.body=await C.text(),h(v,x)}})(f,{...t,signal:null},r)}}catch(p){return{error:p}}},IC=xu({reducerPath:"answer",baseQuery:Cu(Km,{maxRetries:3}),endpoints:()=>({})});var ca=xu({reducerPath:"answerGenerationApi",refetchOnMountOrArgChange:!0,baseQuery:Cu(Km,{maxRetries:3}),endpoints:()=>({})});l();s();u();c();l();s();u();c();l();s();u();c();var Bn=e=>e.query,EC=e=>e.query?.enableQuerySyntax;var tse=re(e=>Bn(e)?.q,e=>e.search.requestId,e=>e.generatedAnswer.cannotAnswer,e=>e.configuration.analytics.analyticsMode,e=>e.search.searchAction?.actionCause,(e,t,r,n,o)=>({q:e,requestId:t,cannotAnswer:r,analyticsMode:n,actionCause:o})),qq=re(e=>e.generatedAnswer?.answerApiQueryParams,e=>e);l();s();u();c();l();s();u();c();l();s();u();c();var vu=()=>({contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!1,isLoading:!0});l();s();u();c();l();s();u();c();l();s();u();c();async function TC(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value)}function OC(e){let t,r,n,o=!1;return function(d){t===void 0?(t=d,r=0,n=-1):t=Oq(t,d);let m=t.length,f=0;for(;r<m;){o&&(t[r]===10&&(f=++r),o=!1);let p=-1;for(;r<m&&p===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-f);break;case 13:o=!0,p=r;break;case 10:p=r;break}if(p===-1)break;e(t.subarray(f,p),n),f=r,n=-1}f===m?t=void 0:f!==0&&(t=t.subarray(f),r-=f)}}function kC(e,t,r){let n=qC(),o=new TextDecoder;return function(d,m){if(d.length===0)r?.(n),n=qC();else if(m>0){let f=o.decode(d.subarray(0,m)),p=m+(d[m+1]===32?2:1),g=o.decode(d.subarray(p));switch(f){case"data":n.data=n.data?`${n.data}
${g}`:g;break;case"event":n.event=g;break;case"id":e(n.id=g);break;case"retry":Tq(g,n,t);break}}}}function Tq(e,t,r){let n=parseInt(e,10);Number.isNaN(n)||r(t.retry=n)}function Oq(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function qC(){return{data:"",event:"",id:"",retry:void 0}}var Ym="text/event-stream",kq=1e3,jC="last-event-id";function VC(){return typeof window<"u"}function Ru(e,{signal:t,headers:r,onopen:n,onmessage:o,onclose:a,onerror:d,openWhenHidden:m,fetch:f,...p}){return new Promise((g,C)=>{let v={...r};v.accept||(v.accept=Ym);let x;function R(){x?.abort(),document.hidden||E()}!m&&VC()&&document.addEventListener("visibilitychange",R);let F=kq,w;function P(){VC()&&document.removeEventListener("visibilitychange",R),clearTimeout(w),x?.abort()}t?.addEventListener("abort",()=>{P(),g()});let q=f??h,b=n??jq;async function E(){x=i.AbortController?new i.AbortController:null;try{let Q=await q(e,{...p,headers:v,signal:x?.signal});await b(Q),await TC(Q.body,OC(kC(k=>{k?v[jC]=k:delete v[jC]},k=>{F=k},o))),a?.(),P(),g()}catch(Q){if(!x?.signal?.aborted)try{let k=d?.(Q)??F;clearTimeout(w),w=setTimeout(E,k)}catch(k){P(),C(k)}}}E()})}function jq(e){let t=e.headers.get("content-type");if(!t?.startsWith(Ym))throw new Error(`Expected content-type to be ${Ym}, Actual: ${t}`)}l();s();u();c();l();s();u();c();var DC=(e,t)=>{t&&(e.answerId=t)},NC=(e,t)=>{let{contentFormat:r}=t;e.contentFormat=r,e.isStreaming=!0,e.isLoading=!1},MC=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},LC=(e,t)=>{e.citations=t.citations},QC=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},UC=(e,t)=>{let r=t.errorMessage||"Unknown error occurred";e.error={message:r,code:t.code??500},e.isStreaming=!1,e.isLoading=!1,console.error(`Generated answer error: ${r} (code: ${t.code})`)};var Au={handleOpen:(e,t)=>{let r=e.headers.get("x-answer-id");r&&t(n=>{DC(n,r)})},handleMessage:{"agentInteraction.answerHeader":(e,t)=>{t(r=>{NC(r,{contentFormat:"text/markdown"})})},"generativeengines.messageType":(e,t)=>{e?.payload?.textDelta&&t(r=>{MC(r,e.payload)})},"agentInteraction.citations":(e,t)=>{e?.payload?.citations!==void 0&&t(r=>{LC(r,e.payload)})},"generativeengines.endOfStreamType":(e,t)=>{t(r=>{QC(r,e.payload)})},error:(e,t)=>{e.finishReason==="ERROR"&&t(r=>{UC(r,e)})}}};var Fu=(e,t,r,n)=>{let{dispatch:o,updateCachedData:a,getState:d}=r,{configuration:{accessToken:m}}=d();return Ru(e,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${m}`,Accept:"text/event-stream","Content-Type":"application/json","Accept-Encoding":"*"},fetch:h,onopen:async f=>{Au.handleOpen(f,a),n.handleOpen(f,o)},onclose:()=>{n.handleClose?.(o)},onerror:f=>{n.handleError(f)},onmessage:f=>{let p=Vq(f.data);if(!p)return;Au.handleMessage.error?.(p,a),n.handleMessage.error?.(p,o);let g=p.payloadType;Au.handleMessage[g]?.(p,a),n.handleMessage[g]?.(p,o)}})};function Vq(e){if(!e?.length)return null;try{return JSON.parse(e)}catch(t){return console.warn("Failed to parse message",{payload:e,error:t}),null}}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var BC=e=>{let{configuration:t}=e,{organizationId:r,environment:n,knowledge:{agentId:o}}=t,a=Ee(r,n),d=o?.trim();if(!a||!r||!d)throw new Error("Missing required parameters for follow up endpoint");let m=`/api/preview/organizations/${r}/agents`;return`${a}${m}/${d}/follow-up`};var Dq=ca.injectEndpoints({overrideExisting:!0,endpoints:e=>({generateFollowUpAnswer:e.query({queryFn:()=>({data:vu()}),async onQueryStarted(t,{getState:r,updateCachedData:n,dispatch:o}){let{strategyKey:a,...d}=t,m=BC(r());await Fu(m,d,{getState:r,updateCachedData:n,dispatch:o},Pu[a]?.())}})})}),_C=e=>Dq.endpoints.generateFollowUpAnswer.initiate(e);l();s();u();c();var $C=(e,t)=>({conversationId:t.followUpAnswers?.conversationId??"",q:e});var Nq=new V({required:!0}),zC=A("followUpAnswers/setIsEnabled",e=>I(e,new X({required:!0}))),HC=A("followUpAnswers/setFollowUpAnswersConversationId",e=>I(e,N)),Mq=A("followUpAnswers/createFollowUpAnswer",e=>I(e,{question:N})),GC=A("followUpAnswers/setActiveFollowUpAnswerId",e=>I(e,N)),WC=A("followUpAnswers/setFollowUpAnswerContentFormat",e=>I(e,{contentFormat:bu,answerId:N})),KC=A("followUpAnswers/setFollowUpIsLoading",e=>I(e,{isLoading:new X({required:!0}),answerId:N})),YC=A("followUpAnswers/followUpMessageChunkReceived",e=>I(e,{textDelta:Nq,answerId:N})),JC=A("followUpAnswers/followUpCitationsReceived",e=>I(e,{citations:new ae({required:!0,each:new L({values:Jm})}),answerId:N})),XC=A("followUpAnswers/followUpCompleted",e=>I(e,{answerId:N,cannotAnswer:new X({required:!1})})),ZC=A("followUpAnswers/followUpFailed",e=>I(e,{message:new V,code:new W({min:0}),answerId:N})),gce=A("followUpAnswers/likeFollowUp",e=>I(e,{answerId:N})),yce=A("followUpAnswers/dislikeFollowUp",e=>I(e,{answerId:N})),hce=A("followUpAnswers/submitFollowUpFeedback",e=>I(e,{answerId:N})),ex=A("followUpAnswers/resetFollowUpAnswers"),Sce=te("generatedAnswerWithFollowUps/generateFollowUpAnswer",async(e,{getState:t,dispatch:r,extra:{logger:n}})=>{let o=t(),a=Lo(o)?.trim(),d=$C(e,o);if(!a){n.warn("Missing agentId in engine configuration. The generateFollowUpAnswer action requires an agent ID.");return}if(!d.conversationId){n.warn("Missing conversationId when generating a follow-up answer. The generateFollowUpAnswer action requires an existing conversation.");return}r(Mq({question:e})),await r(_C({strategyKey:"follow-up-answer",...d}))});var tx=()=>{let e=null;return{handleOpen:(t,r)=>{e=t.headers.get("x-answer-id"),e&&(r(GC(e)),r(KC({answerId:e,isLoading:!0})),r(WC({contentFormat:"text/markdown",answerId:e})))},handleError:t=>{throw t},handleMessage:{"generativeengines.messageType":(t,r)=>{t?.payload?.textDelta&&r(YC({textDelta:t.payload.textDelta,answerId:e}))},"agentInteraction.citations":(t,r)=>{t?.payload?.citations!==void 0&&r(JC({citations:t.payload.citations,answerId:e}))},"generativeengines.endOfStreamType":(t,r)=>{let n=t?.payload?.answerGenerated??!1;r(XC({cannotAnswer:!n,answerId:e}))},error:(t,r)=>{t.finishReason==="ERROR"&&r(ZC({answerId:e,message:t.errorMessage,code:t.code}))}}}};l();s();u();c();l();s();u();c();var ua=e=>Oe({prefix:"analytics/generatedAnswer/streamEnd",__legacy__getBuilder:(t,r)=>{let n=jn(r),o=e?!r.generatedAnswer?.answer||!r.generatedAnswer?.answer.length:void 0;return n?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:n,answerGenerated:e,answerTextIsEmpty:o}):null},analyticsType:"Rga.AnswerReceived",analyticsPayloadBuilder:t=>({answerId:jn(t)??"",answerGenerated:e??!1})}),la=()=>Oe({prefix:"analytics/generatedAnswer/responseLinked",__legacy__getBuilder:()=>null,analyticsType:"Rga.ResponseLinked",analyticsPayloadBuilder:e=>({answerId:jn(e)??"",responseId:e.search?.searchResponseId||e.search?.response.searchUid||""})});var rx=()=>({handleOpen:(e,t)=>{let r=e.headers.get("x-answer-id");r&&t(wu(r))},handleError:e=>{throw e},handleMessage:{"agentInteraction.answerHeader":(e,t)=>{e?.payload?.conversationId&&t(HC(e.payload.conversationId)),e.payload.followUpEnabled&&t(zC(e.payload.followUpEnabled)),t(Li("text/markdown")),t(Di(!0)),t(da(!1))},"generativeengines.messageType":(e,t)=>{e?.payload?.textDelta&&t(Ni({textDelta:e.payload.textDelta}))},"agentInteraction.citations":(e,t)=>{e?.payload?.citations!==void 0&&t(Mi({citations:e.payload.citations}))},"generativeengines.endOfStreamType":(e,t)=>{let r=e?.payload?.answerGenerated??!1;t(Zm(r)),t(Qi(!r)),t(Di(!1)),t(da(!1)),t(ua(r)),t(la())},error:(e,t)=>{e.finishReason==="ERROR"&&t(Xm(e))}}});var Pu={"head-answer":rx,"follow-up-answer":tx};l();s();u();c();var nx=e=>{let{configuration:t}=e,{organizationId:r,environment:n,knowledge:{agentId:o}}=t,a=Ee(r,n),d=o?.trim();if(!a||!r||!d)throw new Error("Missing required parameters for answer endpoint");let m=`/api/preview/organizations/${r}/agents`;return`${a}${m}/${d}/answer`};var Lq=ca.injectEndpoints({overrideExisting:!0,endpoints:e=>({generateAnswer:e.query({queryFn:()=>({data:vu()}),async onQueryStarted(t,{getState:r,updateCachedData:n,dispatch:o}){let{strategyKey:a,...d}=t,m=nx(r());await Fu(m,d,{getState:r,updateCachedData:n,dispatch:o},Pu[a]?.())}})})}),ox=e=>Lq.endpoints.generateAnswer.initiate(e);l();s();u();c();l();s();u();c();var ax=re(e=>e.advancedSearchQueries,e=>{if(!e)return{};let{aq:t,cq:r,dq:n,lq:o}=e;return{...t&&{aq:t},...r&&{cq:r},...n&&{dq:n},...o&&{lq:o}}});l();s();u();c();var ix=e=>e.context;l();s();u();c();var ep=e=>e.pipeline;l();s();u();c();l();s();u();c();var tp=re(e=>e.search,e=>e?.searchAction?.actionCause||"");l();s();u();c();var rp=e=>e.searchHub;l();s();u();c();var Ui=re(e=>e,e=>{if(!e)return"";for(let t in e)if(e[t].isActive)return e[t].id;return""}),ele=re(e=>e,e=>{let t=Ui(e);return t&&e?e[t].expression:""});l();s();u();c();var sx=e=>{if(!(!e.dictionaryFieldContext||!Object.keys(e.dictionaryFieldContext.contextValues).length))return e.dictionaryFieldContext.contextValues};l();s();u();c();var cx=e=>e.excerptLength?.length;l();s();u();c();var ux=e=>{let{freezeFacetOrder:t}=e.facetOptions??{};return t!==void 0?{freezeFacetOrder:t}:void 0};l();s();u();c();var lx=e=>{if(e.folding)return{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}};l();s();u();c();var dx=e=>e.sortCriteria;var mx=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:Ee(e.configuration.organizationId,e.configuration.environment),streamId:e.search.extendedResults?.generativeQuestionAnsweringId}),px=(e,t)=>{let r=Bn(e)?.q,{aq:n,cq:o,dq:a,lq:d}=Uq(e),m=ix(e),f=Sr(e.configuration.analytics,t,{actionCause:tp(e)}),p=rp(e),g=ep(e),C=Xd(e)??[],v=gx(e),x=Ui(e.tabSet)||"default",R=Yd(e),F=oh(e),w=t.referrer||"",P=ux(e),q=dx(e),b=Qq(e),E=cx(e),Q=lx(e),k=sx(e);return{q:r,...n&&{aq:n},...o&&{cq:o},...a&&{dq:a},...d&&{lq:d},...e.query&&{enableQuerySyntax:EC(e)},...m?.contextValues&&{context:m.contextValues},pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:C}},...p?.length&&{searchHub:p},...g?.length&&{pipeline:g},...v.length&&{facets:v},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...e.pagination&&{numberOfResults:vm(e),firstResult:e.pagination.firstResult},tab:x,locale:R,timezone:F,...e.debug!==void 0&&{debug:e.debug},referrer:w,...b,...Q??{},...E&&{excerptLength:E},...k&&{dictionaryFieldContext:k},sortCriteria:q,...P&&{facetOptions:P},...f,...e.insightCaseContext?.caseContext&&{caseContext:e.insightCaseContext?.caseContext}}},fx=(e,t)=>{let r=Bn(e)?.q,n=gx(e),o=Sr(e.configuration.analytics,t,{actionCause:tp(e)}),a=Yd(e),d=rp(e),m=ep(e),f=Xd(e)??[];return{q:r||"",...n.length&&{facets:n},pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:f}},...d?.length&&{searchHub:d},...m?.length&&{pipeline:m},...o,locale:a}},gx=e=>Ic(e)?.map(t=>pm(t,mm())).sort((t,r)=>t.facetId>r.facetId?1:r.facetId>t.facetId?-1:0),Qq=e=>({actionsHistory:e.configuration.analytics.enabled?Ct.getInstance().getHistory():[]}),Uq=e=>{let t=ax(e),r=Rm(e);return{...t,...r&&{cq:r}}};l();s();u();c();var yx=["text/plain","text/markdown"];var ma=new V({required:!0}),hx=new V,pa=new X({required:!0}),Jm={id:ma,title:ma,uri:ma,permanentid:ma,clickUri:hx},bu=new V({required:!0,constrainTo:yx}),yde=A("generatedAnswer/setIsVisible",e=>I(e,pa)),wu=A("generatedAnswer/setAnswerId",e=>I(e,N)),hde=A("generatedAnswer/setAnswerGenerationMode",e=>I(e,new V({constrainTo:["automatic","manual"],required:!1,default:"automatic"}))),Sde=A("generatedAnswer/setIsEnabled",e=>I(e,pa)),Ni=A("generatedAnswer/updateMessage",e=>I(e,{textDelta:ma})),Mi=A("generatedAnswer/updateCitations",e=>I(e,{citations:new ae({required:!0,each:new L({values:Jm})})})),Xm=A("generatedAnswer/updateError",e=>I(e,{message:hx,code:new W({min:0})})),Bi=A("generatedAnswer/resetAnswer"),Cde=A("generatedAnswer/like"),xde=A("generatedAnswer/dislike"),vde=A("generatedAnswer/feedbackModal/open"),Rde=A("generatedAnswer/expand"),Ade=A("generatedAnswer/collapse"),Fde=A("generatedAnswer/setId",e=>I(e,{id:new V({required:!0})})),Pde=A("generatedAnswer/feedbackModal/close"),bde=A("generatedAnswer/sendFeedback"),da=A("generatedAnswer/setIsLoading",e=>I(e,pa)),Di=A("generatedAnswer/setIsStreaming",e=>I(e,pa)),Li=A("generatedAnswer/setAnswerContentFormat",e=>I(e,bu)),wde=A("generatedAnswer/updateResponseFormat",e=>I(e,{contentFormat:new ae({each:bu,default:["text/plain"]})})),Ide=A("knowledge/updateAnswerConfigurationId",e=>I(e,ma)),Ede=A("generatedAnswer/registerFieldsToIncludeInCitations",e=>I(e,Vg)),Zm=A("generatedAnswer/setIsAnswerGenerated",e=>I(e,pa)),Qi=A("generatedAnswer/setCannotAnswer",e=>I(e,pa)),Sx=A("generatedAnswer/setAnswerApiQueryParams",e=>I(e,new L({}))),qde=te("generatedAnswer/streamAnswer",async(e,t)=>{let r=t.getState(),{dispatch:n,extra:o,getState:a}=t,{search:d}=a(),{queryExecuted:m}=d,{setAbortControllerRef:f}=e,p=await mx(r),g=(x,R)=>{switch(x){case"genqa.headerMessageType":{let F=JSON.parse(R);n(Li(F.contentFormat));break}case"genqa.messageType":n(Ni(JSON.parse(R)));break;case"genqa.citationsType":n(Mi(JSON.parse(R)));break;case"genqa.endOfStreamType":{let F=JSON.parse(R).answerGenerated,w=m.length!==0&&!F;n(Qi(w)),n(Di(!1)),n(Zm(F)),n(ua(F)),n(la());break}default:r.debug&&o.logger.warn(`Unknown payloadType: "${x}"`)}};n(da(!0));let C=x=>x.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,v=o.streamingClient?.streamGeneratedAnswer(p,{write:x=>{C(p)&&(n(da(!1)),x.payload&&x.payloadType&&g(x.payloadType,x.payload))},abort:x=>{C(p)&&n(Xm(x))},close:()=>{C(p)&&n(Di(!1))},resetAnswer:()=>{C(p)&&n(Bi())}});v?f(v):n(da(!1))}),Tde=te("generatedAnswer/generateAnswer",async(e,{getState:t,dispatch:r,extra:{navigatorContext:n,logger:o}})=>{r(Bi());let a=t();if(a.generatedAnswer.answerConfigurationId){let d=px(a,n);r(Sx(d)),await r(xx(d))}else o.warn("[WARNING] Missing answerConfigurationId in engine configuration. The generateAnswer action requires an answer configuration ID to use CRGA with the Answer API.")}),Cx=te("generatedAnswerWithFollowUps/generateHeadAnswer",async(e,{getState:t,dispatch:r,extra:{navigatorContext:n,logger:o}})=>{let a=t();if(!Lo(a)){o.warn("Missing agentId in engine configuration. The generateHeadAnswer action requires an agent ID.");return}r(Bi());let m=fx(a,n),f={...m,strategyKey:"head-answer"};r(Sx(m)),await r(ox(f))});var Bq=(e,t)=>{let{contentFormat:r}=t;e.contentFormat=r,e.isStreaming=!0,e.isLoading=!1},_q=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},$q=(e,t)=>{e.citations=t.citations},zq=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},Hq=(e,t)=>{let r=t.errorMessage||"Unknown error occurred";e.error={message:r,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error(`Generated answer error: ${r} (code: ${t.code})`)},Gq=(e,t,r)=>{let n=JSON.parse(e.data);n.finishReason==="ERROR"&&n.errorMessage&&Hq(t,n);let o=n.payload.length?JSON.parse(n.payload):{};switch(n.payloadType){case"genqa.headerMessageType":o.contentFormat&&(Bq(t,o),r(Li(o.contentFormat)));break;case"genqa.messageType":o.textDelta&&(_q(t,o),r(Ni({textDelta:o.textDelta})));break;case"genqa.citationsType":o.citations&&($q(t,o),r(Mi({citations:o.citations})));break;case"genqa.endOfStreamType":zq(t,o),r(ua(o.answerGenerated??!1)),r(la());break}},Wq=(e,t,r,n)=>{if(!e||!t||!r)throw new Error("Missing required parameters for answer endpoint");let o=`/rest/organizations/${t}`,a=n?`insight/v1/configs/${n}/answer`:"answer/v1/configs";return`${e}${o}/${a}/${r}/generate`},np=IC.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),serializeQueryArgs:({endpointName:t,queryArgs:r})=>{let{analytics:n,...o}=r;return`${t}(${JSON.stringify(o)})`},async onCacheEntryAdded(t,{getState:r,cacheDataLoaded:n,updateCachedData:o,dispatch:a}){await n;let{configuration:d,generatedAnswer:m,insightConfiguration:f}=r(),{organizationId:p,environment:g,accessToken:C}=d,v=Ee(p,g),x=Wq(v,p,m.answerConfigurationId,f?.insightId);await Ru(x,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${C}`,Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch:h,onopen:async R=>{let F=R.headers.get("x-answer-id");F&&o(w=>{w.answerId=F,a(wu(F))})},onmessage:R=>{o(F=>{Gq(R,F,a)})},onerror:R=>{throw R},onclose:()=>{o(R=>{a(Qi(!R.generated))})}})}})})}),xx=e=>np.endpoints.getAnswer.initiate(e);l();s();u();c();function Kq(e){let t=e.payload?.analyticsAction;return vx(e)&&!ee(t)}function vx(e){return"type"in e}var Rx=e=>t=>r=>{let n;Kq(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let o=t(r);return vx(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),o};l();s();u();c();l();s();u();c();l();s();u();c();var nme=A("tab/register",e=>{let t=new L({values:{id:N,expression:qe}});return I(e,t)}),Iu=A("tab/updateActiveTab",e=>I(e,N));l();s();u();c();var Eu=Ot(hc(),1),Px=Ot(Ax(),1),bx=Ot(Fx(),1);Eu.default.extend(bx.default);Eu.default.extend(Px.default);var wx=()=>({organizationId:"",accessToken:"",search:{locale:"en-US",timezone:Eu.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",analyticsMode:"next",source:{}},knowledge:{answerConfigurationId:"",agentId:void 0},environment:"prod"});l();s();u();c();var Yq=/(^|; )Coveo-Pendragon=([^;]*)/;function cp(){return typeof window>"u"?!1:Yq.exec(document.cookie)?.pop()||null}var qu=Z(wx(),e=>e.addCase(Pn,(t,r)=>{Jq(t,r.payload)}).addCase(Bg,(t,r)=>{Xq(t,r.payload)}).addCase(ld,(t,r)=>{Zq(t,r.payload)}).addCase(Ts,t=>{t.analytics.enabled=!1}).addCase(Os,t=>{t.analytics.enabled=!0}).addCase(_g,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase($g,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(Iu,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(Hh,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase($e,(t,r)=>{ee(r.payload.tab)||(t.analytics.originLevel2=r.payload.tab)}).addCase(zg,(t,{payload:r})=>{t.knowledge.agentId=r}));function Jq(e,t){ee(t.accessToken)||(e.accessToken=t.accessToken),e.environment=t.environment??"prod",ee(t.organizationId)||(e.organizationId=t.organizationId)}function Xq(e,t){ee(t.proxyBaseUrl)||(e.search.apiBaseUrl=t.proxyBaseUrl),ee(t.locale)||(e.search.locale=t.locale),ee(t.timezone)||(e.search.timezone=t.timezone),ee(t.authenticationProviders)||(e.search.authenticationProviders=t.authenticationProviders)}function Zq(e,t){ee(t.enabled)||(e.analytics.enabled=t.enabled),ee(t.originContext)||(e.analytics.originContext=t.originContext),ee(t.originLevel2)||(e.analytics.originLevel2=t.originLevel2),ee(t.originLevel3)||(e.analytics.originLevel3=t.originLevel3),ee(t.proxyBaseUrl)||(e.analytics.apiBaseUrl=t.proxyBaseUrl),ee(t.trackingId)||(e.analytics.trackingId=t.trackingId),ee(t.analyticsMode)||(e.analytics.analyticsMode=t.analyticsMode),ee(t.source)||(e.analytics.source=t.source);try{let r=cp();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r)}catch{}ee(t.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.runtimeEnvironment),ee(t.anonymous)||(e.analytics.anonymous=t.anonymous),ee(t.deviceId)||(e.analytics.deviceId=t.deviceId),ee(t.userDisplayName)||(e.analytics.userDisplayName=t.userDisplayName),ee(t.documentLocation)||(e.analytics.documentLocation=t.documentLocation)}var Ze=qu;l();s();u();c();function eT(e){return e.instantlyCallable}var Ix=()=>e=>t=>e(eT(t)?t():t);l();s();u();c();var up=Jf();up.startListening({actionCreator:Se.pending,effect:async(e,t)=>{let r=t.getState(),n=Bn(r)?.q,o=!n||n.trim()==="";Jd(r)&&(t.dispatch(Bi()),t.dispatch(ex()),!o&&t.dispatch(Cx()))}});l();s();u();c();var Ex=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let o=n.error;if(n.payload?.ignored||e.error({error:o,action:r},`Action dispatch error ${n.type}`),n.error.name!=="SchemaValidationError")return t(r)},qx=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));l();s();u();c();var lp=(e,t)=>{let{referrer:r,userAgent:n,location:o,clientId:a}=e.getMeta("");return{...t?t():{},referrer:r,userAgent:n,location:o,clientId:a}};l();s();u();c();function Tx(e,t){let r={...e},n,o=a=>(d,m)=>{let f=a(d,m);return n?n(f,m):f};return{get combinedReducer(){let a=yg(Object.entries(t).filter(([d])=>!(d in r)).map(([d,m])=>[d,()=>m]));return o(ro({...a,...r}))},containsAll(a){return Object.keys(a).every(m=>m in r)},add(a){Object.keys(a).filter(d=>!(d in r)).forEach(d=>{r[d]=a[d]})},addCrossReducer(a){n=a}}}l();s();u();c();l();s();u();c();function tT(e){if(!e||!rT(e))return null;try{let r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=atob(r),o=decodeURIComponent(n.split("").map(a=>`%${`00${a.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));return JSON.parse(o)}catch{return null}}function Ox(e,t=60){if(!e)return!1;let r=tT(e);if(!r||typeof r.exp!="number")return!1;let n=Math.floor(Date.now()/1e3);return r.exp<=n+t}function rT(e){return e?/^[A-Za-z0-9_-]{2,}(?:\.[A-Za-z0-9_-]{2,}){2}$/.test(e):!1}function jx(e,t){let r=0,n=null,o=Ps(()=>{r=0},500),a=async(f,p=!1)=>{let g=!n;g&&t&&(n=(async()=>(p&&oT(t),await t()))().finally(()=>{n=null}));let C=await n;return g&&C&&f.dispatch(Pn({accessToken:C})),C},d=async f=>{let p=f.getState(),g=aT(p);if(!(!g||!Ox(g))){e.debug("Access token is expired or about to expire, attempting renewal.");try{await a(f)?e.debug("Access token was renewed."):e.warn("Access token renewal returned an empty token. Please check the #renewAccessToken function.")}catch(C){e.warn(C,"Access token renewal failed. A retry will occur if necessary.")}}},m=async(f,p,g)=>{if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),kx(f,p.error),p;r++,o(),await a(f,!0),f.dispatch(g)};return f=>p=>async g=>{let C=typeof g=="function",v=typeof t=="function";if(!C)return p(g);v&&await d(f);let x=await p(g);return nT(x)?v?await m(f,x,g):(e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),kx(f,x.error),x):x}}function nT(e){return typeof e=="object"&&e!==null&&"error"in e&&e.error?.name===new po().name}function kx(e,t){e.dispatch(Tt({status:401,statusCode:401,message:t.message,type:t.name}))}async function oT(e){try{return await e()}catch{return""}}function aT(e){return e.configuration.accessToken}l();s();u();c();function Vx({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:o}){return Nf({reducer:e,preloadedState:t,devTools:{stateSanitizer:a=>a.history?{...a,history:"<<OMIT>>"}:a,name:o,shouldHotReload:!1},middleware:a=>a({thunk:{extraArgument:n}}).prepend(...r).concat(qx(n.logger))})}function Dx(e,t,r){let{reducers:n,navigatorContextProvider:o}=e,a=Tx({...n,configurationReducer:r},e.preloadedState??{});e.crossReducer&&a.addCrossReducer(e.crossReducer);let d=t.logger,m={...t,get relay(){return si(p.state,o)},get navigatorContext(){return lp(this.relay,o)}},f=iT(e,m,a),p={addReducers(g){a.containsAll(g)||(a.add(g),f.replaceReducer(a.combinedReducer))},dispatch:f.dispatch,subscribe:f.subscribe,enableAnalytics(){f.dispatch(Os())},disableAnalytics(){f.dispatch(Ts())},get state(){return f.getState()},get relay(){return si(this.state,o)},get navigatorContext(){return lp(this.relay,o)},logger:d,store:f};return p}function iT(e,t,r){let{preloadedState:n,configuration:o}=e,a=o.name||"coveo-headless",d=sT(e,t.logger);return Vx({preloadedState:n,reducer:r.combinedReducer,middlewares:d,thunkExtraArguments:t,name:a})}function sT(e,t){let{renewAccessToken:r}=e.configuration,n=jx(t,r);return[Ix,n,Ex(t),Rx].concat(np.middleware,ca.middleware,up.middleware,e.middlewares||[])}l();s();u();c();var zx=Ot($x(),1);function Hx(e){return(0,zx.pino)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}l();s();u();c();function Gx(e,t){let r=PT(e),n=je,o=bT(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:o,logger:t}}function PT(e){let{analytics:t}=e,r=(n,o)=>o;return t?.analyticsClientMiddleware||r}function bT(e){return e.preprocessRequest||qs}l();s();u();c();l();s();u();c();var Wx={organizationId:N,accessToken:N,name:new V({required:!1,emptyAllowed:!1}),analytics:new L({options:{required:!1},values:{enabled:new X({required:!1}),originContext:new V({required:!1}),originLevel2:new V({required:!1}),originLevel3:new V({required:!1}),analyticsMode:new V({constrainTo:["legacy","next"],required:!1,default:"next"}),proxyBaseUrl:new V({required:!1,url:!0}),trackingId:new V({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/})}}),environment:new V({required:!1,default:"prod",constrainTo:["prod","hipaa","stg","dev"]})};var Kx=new pe({...Wx,analytics:new L({options:{required:!0},values:{enabled:new X({required:!1,default:!0}),proxyBaseUrl:new V({required:!1,url:!0}),source:new L({options:{required:!1},values:{"@coveo/atomic":Re,"@coveo/quantic":Re}}),trackingId:new V({required:!0,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/})}}),context:new L({options:{required:!0},values:oi}),cart:new L({values:fd}),proxyBaseUrl:new V({required:!1,url:!0})});function Yx(){return{accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",analytics:{trackingId:"sports-ui-samples"},context:{language:"en",country:"US",currency:"USD",view:{url:"https://sports.barca.group"}},cart:{items:[{productId:"SP01057_00001",quantity:1,name:"Kayaker Canoe",price:800},{productId:"SP00081_00001",quantity:1,name:"Bamboo Canoe Paddle",price:120},{productId:"SP04236_00005",quantity:1,name:"Eco-Brave Rashguard",price:33},{productId:"SP04236_00005",quantity:1,name:"Eco-Brave Rashguard",price:33}]},organizationId:"searchuisamples"}}var wT={productListing:ra,recommendations:na,commerceSearch:rr,commercePagination:tr,commerceSort:nr,facetOrder:ar,fieldSuggestionsOrder:qt,facetSearchSet:aa,categoryFacetSearchSet:an,commerceFacetSet:Ce,manualNumericFacetSet:su,commerceContext:_t,commerceQuery:Ne,cart:vo,didYouMean:Us,triggers:or};function Jx(e){let t=Hx(e.loggerOptions),{configuration:r}=e;IT(r,t);let n=ET(r,t),o={...Gx(r,t),apiClient:n},a={...wT,configuration:dd,version:Mm},d={...e,reducers:a},m=Dx(d,o,dd),{state:f,...p}=m,{accessToken:g,environment:C,organizationId:v,analytics:x,proxyBaseUrl:R,context:F,cart:w}=r;return p.dispatch(go({accessToken:g,environment:C,organizationId:v})),p.dispatch(ho(x)),R!==void 0&&p.dispatch(yo({proxyBaseUrl:R})),p.dispatch(Pe(F)),w?.items!==void 0&&p.dispatch(Or(w.items)),of({...p,get relay(){return m.relay},get[K](){return m.state},get configuration(){return{...m.state.configuration}}})}function IT(e,t){try{Kx.validate(e)}catch(r){throw t.error(r,"Commerce engine configuration error"),r}}function ET(e,t){return new Is({logger:t,preprocessRequest:e.preprocessRequest||qs})}l();s();u();c();function qT(e){return e.addReducers({configuration:qu}),{disableAnalytics:ks,enableAnalytics:js,updateAnalyticsConfiguration:ho,updateBasicConfiguration:go,updateProxyBaseUrl:yo}}l();s();u();c();function TT(e){return e.addReducers({cart:vo}),{emitPurchaseEvent:Vs,emitCartActionEvent:Ds,purchase:xo,setItems:Or,updateItemQuantity:Co}}l();s();u();c();function OT(e){return e.addReducers({commerceContext:_t}),{setContext:Pe,setView:we,setLocation:Ro,setCustom:Ao}}l();s();u();c();function kT(e){return e.addReducers({commerceFacetSet:Ce}),{toggleSelectCategoryFacetValue:er,updateCategoryFacetNumberOfValues:Qn}}l();s();u();c();function jT(e){return e.addReducers({commerceFacetSet:Ce}),{clearAllCoreFacets:Ve,deleteAllCoreFacets:jr,deselectAllValuesInCoreFacet:We,updateAutoSelectionForAllCoreFacets:Fo,updateCoreFacetFreezeCurrentValues:qn,updateCoreFacetIsFieldExpanded:En,updateCoreFacetNumberOfValues:In}}l();s();u();c();function VT(e){return e.addReducers({commerceFacetSet:Ce}),{toggleSelectDateFacetValue:Ft,toggleExcludeDateFacetValue:Pt,updateDateFacetValues:Zo}}l();s();u();c();function DT(e){return e.addReducers({commerceFacetSet:Ce}),{toggleSelectLocationFacetValue:wt}}l();s();u();c();function NT(e){return e.addReducers({commerceFacetSet:Ce}),{toggleSelectNumericFacetValue:ut,toggleExcludeNumericFacetValue:lt,updateNumericFacetValues:tu}}l();s();u();c();function MT(e){return e.addReducers({commerceFacetSet:Ce}),{toggleExcludeFacetValue:It,toggleSelectFacetValue:Et}}l();s();u();c();l();s();u();c();var yp={id:N},Xx={...yp,query:qe},ga=A("commerce/instantProducts/clearExpired",e=>I(e,yp)),LT={child:new L({options:{required:!0},values:{permanentid:new V({required:!0})}}),...Xx},ya=A("commerce/instantProducts/promoteChildToParent",e=>I(e,LT)),ha=A("commerce/instantProducts/register",e=>I(e,yp)),Sa=A("commerce/instantProducts/updateQuery",e=>I(e,Xx));l();s();u();c();l();s();u();c();l();s();u();c();function ku(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}var Zx=(e,t)=>{let{id:r}=e;if(!t[r])return t[r]={q:"",cache:{}},t},ev=(e,t)=>{let{q:r,id:n}=e;r&&(t[n].q=r)},tv=(e,t)=>{let{id:r}=e;Object.entries(t[r].cache).forEach(([n,o])=>{ku(o)&&delete t[r].cache[n]})},rv=(e,t,r)=>{for(let o in t)for(let a in t[o].cache)t[o].cache[a].isActive=!1;if(!hp(e,t)){QT(e,t,r);return}let n=hp(e,t);n.isLoading=!0,n.isActive=!0,n.error=null},nv=(e,t,r)=>{let{id:n,q:o,searchUid:a,cacheTimeout:d,totalCountFiltered:m,duration:f}=e;t[n].cache[o]={...hp(e,t),...r,isActive:!0,searchUid:a,isLoading:!1,error:null,expiresAt:d?d+Date.now():0,totalCountFiltered:m,duration:f}},ov=(e,t)=>{let{id:r,q:n,error:o}=e;t[r].cache[n].error=o||null,t[r].cache[n].isLoading=!1,t[r].cache[n].isActive=!1},hp=(e,t)=>{let{q:r,id:n}=e;return t[n].cache[r]||null},QT=(e,t,r)=>{let{q:n,id:o}=e;t[o].cache[n]={isLoading:!0,error:null,expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0,...r}};l();s();u();c();function av(){return{}}var ju=Z(av(),e=>{e.addCase(ha,(t,r)=>{Zx(r.payload,t)}).addCase(Sa,(t,r)=>{ev({...r.payload,q:r.payload.query},t)}).addCase(ga,(t,r)=>{tv(r.payload,t)}).addCase(Io.pending,(t,r)=>{rv(r.meta.arg,t,{products:[]})}).addCase(Io.fulfilled,(t,r)=>{let{response:{products:n,responseId:o,pagination:{totalEntries:a}}}=r.payload;nv({duration:0,searchUid:o,totalCountFiltered:a,...r.meta.arg},t,{products:n.map((d,m)=>UT(d,m+1,o))})}).addCase(Io.rejected,(t,r)=>{ov(r.meta.arg,t)}).addCase(ya,(t,r)=>{let n=t[r.payload.id].cache[r.payload.query];if(!n)return;let o=n.products,a,d=o.findIndex(x=>(a=x.children.find(R=>R.permanentid===r.payload.child.permanentid),!!a));if(d===-1||a===void 0)return;let m=o[d].responseId,f=o[d].position,{children:p,totalNumberOfChildren:g}=o[d],C={...a,resultType:"product",children:p,totalNumberOfChildren:g,position:f,responseId:m},v=[...o];v.splice(d,1,C),n.products=v})});function UT(e,t,r){let n=e.children.some(m=>m.permanentid===e.permanentid);if(e.children.length===0||n)return{...e,position:t,responseId:r};let{children:o,totalNumberOfChildren:a,...d}=e;return{...e,children:[d,...o],position:t,responseId:r}}function BT(e){return e.addReducers({instantProducts:ju}),{clearExpiredProducts:ga,promoteChildToParent:ya,registerInstantProducts:ha,updateInstantProductsQuery:Sa}}l();s();u();c();function _T(e){return e.addReducers({commercePagination:tr}),{registerRecommendationsSlotPagination:Po,setPageSize:mr,selectPage:zt,nextPage:Vr,previousPage:Dr}}l();s();u();c();l();s();u();c();var Vu=te("commerce/product/view",async(e,{extra:t,getState:r})=>{let{relay:n}=t,a={currency:So(r().commerceContext),product:e};n.emit("ec.productView",a)}),Du=te("commerce/product/click",async(e,{extra:t,getState:r})=>{let{relay:n}=t,a={currency:So(r().commerceContext),...e};n.emit("ec.productClick",a)});function $T(){return{productClick:Du,productView:Vu}}l();s();u();c();l();s();u();c();l();s();u();c();var Sp={placementIds:new ae({required:!1,min:1,each:N}),productId:Re},iv=new pe(Sp);var Ca=A("commerce/productEnrichment/registerOptions"),zT=(e,t,r)=>{let n=$t(t,r);return{...n,context:{...n.context,...e.productId?{product:{productId:e.productId}}:{}},placementIds:e.placementIds}},un=te("commerce/productEnrichment/fetchBadges",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{I(e,Sp);let a=zT(e,t(),o),d=await n.getBadges(a);return"error"in d?r(d.error):{response:d.success}});l();s();u();c();l();s();u();c();function sv(){return{products:[],isLoading:!1,error:null,productId:void 0,placementIds:[]}}var Nu=Z(sv(),e=>{e.addCase(Ca,(t,r)=>{t.productId=r.payload.productId,t.placementIds=r.payload.placementIds??[]}).addCase(un.pending,t=>{t.isLoading=!0,t.error=null}).addCase(un.fulfilled,(t,r)=>{GT(t),t.products=r.payload.response.products}).addCase(un.rejected,(t,r)=>{HT(t,r.payload)})});function HT(e,t){e.error=t||null,e.isLoading=!1,e.products=[]}function GT(e){e.error=null,e.isLoading=!1}function WT(e){return e.addReducers({productEnrichment:Nu}),{fetchBadges:un,registerProductEnrichmentOptions:Ca}}l();s();u();c();function KT(e){return e.addReducers({productListing:ra}),{fetchProductListing:Ae,fetchMoreProducts:Jr,promoteChildToParent:Yo}}l();s();u();c();function YT(e){return e.addReducers({facetOrder:ar,commerceFacetSet:Ce,commercePagination:tr,commerceSort:nr}),{restoreProductListingParameters:Je}}l();s();u();c();function JT(e){return e.addReducers({query:Ne}),{updateQuery:Te}}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var $i={id:N,query:qe},Cp=A("querySet/register",e=>I(e,$i)),xp=A("querySet/update",e=>I(e,$i));var xa=A("commerce/querySet/register",e=>I(e,$i)),$n=A("commerce/querySet/update",e=>I(e,$i));l();s();u();c();var zi={id:N},vp=A("querySuggest/register",e=>I(e,{...zi,count:new W({min:0})})),cv=A("querySuggest/unregister",e=>I(e,zi)),Hi=A("querySuggest/selectSuggestion",e=>I(e,{...zi,expression:qe})),Rp=A("querySuggest/clear",e=>I(e,zi)),Mu=te("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:o,navigatorContext:a}})=>{o(e,zi);let d=e.id,m=await XT(d,t(),a),f=await n.querySuggest(m);return Rt(f)?r(f.error):{id:d,q:m.q,...f.success}}),XT=async(e,t,r)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl??yt(t.configuration.organizationId,t.configuration.environment),count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?Ct.getInstance().getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},tab:t.configuration.analytics.originLevel2,...t.configuration.analytics.enabled&&{...t.configuration.analytics.enabled&&t.configuration.analytics.analyticsMode==="legacy"?await Qo(t.configuration.analytics):Sr(t.configuration.analytics,r)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var zn=Z(Pc(),e=>{e.addCase(Cp,(t,r)=>lv(t,r.payload)).addCase(xa,(t,r)=>lv(t,r.payload)).addCase(xp,(t,r)=>{let{id:n,query:o}=r.payload;Gi(t,n,o)}).addCase($n,(t,r)=>{let{id:n,query:o}=r.payload;Gi(t,n,o)}).addCase(Hi,(t,r)=>{let{id:n,expression:o}=r.payload;Gi(t,n,o)}).addCase(Zt,(t,r)=>{let{id:n,expression:o}=r.payload;Gi(t,n,o)}).addCase(ue.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;Ap(t,n)}).addCase(Se.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;Ap(t,n)}).addCase($e,uv).addCase(ke,uv).addCase(De.fulfilled,(t,r)=>{if(r.payload)for(let[n,o]of Object.entries(r.payload.querySet))Gi(t,n,o)})});function uv(e,t){ee(t.payload.q)||Ap(e,t.payload.q)}function Ap(e,t){Object.keys(e).forEach(r=>{e[r]=t})}var Gi=(e,t,r)=>{t in e&&(e[t]=r)},lv=(e,t)=>{let{id:r,query:n}=t;r in e||(e[r]=n)};function ZT(e){return e.addReducers({querySetReducer:zn}),{registerQuerySetQuery:xa,updateQuerySetQuery:$n}}l();s();u();c();l();s();u();c();l();s();u();c();var dv=()=>({});var Hn=Z(dv(),e=>e.addCase(vp,(t,r)=>{mv(t,r.payload)}).addCase(Xo,(t,r)=>{mv(t,r.payload)}).addCase(cv,(t,r)=>{delete t[r.payload.id]}).addCase(Mu.pending,pv).addCase(Mu.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{q:o}=r.payload;o&&n.partialQueries.push(o.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions,n.isLoading=!1,n.error=null}).addCase(Mu.rejected,fv).addCase(Xe.pending,pv).addCase(Xe.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{query:o}=r.payload;o&&n.partialQueries.push(o.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions.map(a=>({expression:a.expression,highlighted:a.highlighted,score:0,executableConfidence:0})),n.isLoading=!1,n.error=null}).addCase(Xe.rejected,fv).addCase(Rp,(t,r)=>{gv(t,r.payload)}).addCase(Xr,(t,r)=>{gv(t,r.payload)}).addCase(Tt,(t,r)=>{Object.keys(t).forEach(n=>{let o=t[n];o&&(o.error=r.payload,o.isLoading=!1)})}));function mv(e,t){let r=t.id;r in e||(e[r]=eO(t))}function eO(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}function pv(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function fv(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1)}function gv(e,t){let r=e[t.id];r&&(r.responseId="",r.completions=[],r.partialQueries=[])}function tO(e){return e.addReducers({querySuggest:Hn}),{clearQuerySuggest:Xr,fetchQuerySuggestions:Xe,registerQuerySuggest:Xo,selectQuerySuggestion:Zt}}l();s();u();c();l();s();u();c();var Fp={queries:new ae({required:!0,each:new V({emptyAllowed:!1})}),maxLength:new W({required:!0,min:1,default:10})},Lu=A("recentQueries/registerRecentQueries",e=>I(e,Fp)),Qu=A("recentQueries/clearRecentQueries");l();s();u();c();l();s();u();c();l();s();u();c();function Uu(){return{queries:[],maxLength:10}}var Mxe=Z(Uu(),e=>{e.addCase(Lu,Pp).addCase(Qu,bp).addCase(Se.fulfilled,(t,r)=>{let n=r.payload.queryExecuted,o=r.payload.response.results;!n.length||!o.length||wp(n,t)})});function Pp(e,t){e.queries=Array.from(new Set(t.payload.queries.map(r=>r.trim().toLowerCase()))).slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}function bp(e){e.queries=[]}function wp(e,t){let r=e.trim().toLowerCase();if(r==="")return;let n=Array.from(new Set(t.queries.filter(o=>o.trim().toLowerCase()!==r))).slice(0,t.maxLength-1);t.queries=[r,...n]}l();s();u();c();var Bu=A("commerce/recentQueries/clear"),Wi=A("commerce/recentQueries/register",e=>I(e,Fp));var _u=Z(Uu(),e=>{e.addCase(Wi,Pp).addCase(Bu,bp).addCase(ue.fulfilled,(t,r)=>{let n=r.payload.queryExecuted,o=r.payload.response.products;!n.length||!o.length||wp(n,t)})});function rO(e){return e.addReducers({recentQueries:_u}),{registerRecentQueries:Lu,clearRecentQueries:Qu}}l();s();u();c();function nO(e){return e.addReducers({recommendations:na}),{fetchRecommendations:Nt,fetchMoreRecommendations:en,promoteChildToParent:ta,registerRecommendationsSlot:ea}}l();s();u();c();function oO(e){return e.addReducers({commerceSearch:rr}),{executeSearch:ue,fetchMoreProducts:Mr,prepareForSearchWithQuery:wo,promoteChildToParent:Eo}}l();s();u();c();function aO(e){return e.addReducers({facetOrder:ar,commerceFacetSet:Ce,commercePagination:tr,query:Ne,querySet:zn,commerceSort:nr}),{restoreSearchParameters:ke}}l();s();u();c();function iO(e){return e.addReducers({commerceSort:nr}),{applySort:Mt}}l();s();u();c();l();s();u();c();var $u=te("commerce/spotlight-content/click",async(e,{extra:t})=>{let{relay:r}=t,n={responseId:e.responseId,position:e.position,itemMetadata:{uniqueFieldName:"id",uniqueFieldValue:e.id,url:e.desktopImage}};r.emit("itemClick",n)});function sO(){return{spotlightContentClick:$u}}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();function yv(e){return e.type==="redirect"}var zu=class{constructor(t){this.response=t}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let t=this.response.preprocessingOutput.triggers.filter(yv);return t.length?t[0].content:null}};var hv=A("standaloneSearchBox/register",e=>I(e,{id:N,redirectionUrl:N,overwrite:new X({required:!1})})),Sv=A("standaloneSearchBox/updateRedirectionUrl",e=>I(e,{id:N,redirectionUrl:N})),Cv=A("standaloneSearchBox/reset",e=>I(e,{id:N})),xv=A("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>I(e,{id:N})),vv=A("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),Hu=te("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:o,validatePayload:a,navigatorContext:d}})=>{a(e,{id:new V({emptyAllowed:!1})});let m=await uO(r(),d),f=await o.plan(m);if(Rt(f))return n(f.error);let{redirectionUrl:p}=new zu(f.success);return p&&t(cO(p)),p||""}),cO=e=>Oe("analytics/standaloneSearchBox/redirect",t=>t.makeTriggerRedirect({redirectedTo:e})),uO=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??yt(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&e.configuration.analytics.analyticsMode==="legacy"?await Qo(e.configuration.analytics):Sr(e.configuration.analytics,t),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});l();s();u();c();function Rv(){return{}}var Av=Z(Rv(),e=>e.addCase(hv,(t,r)=>{let{id:n,redirectionUrl:o,overwrite:a}=r.payload;!a&&n in t||(t[n]=Ip(o))}).addCase(Cv,(t,r)=>{let{id:n}=r.payload,o=t[n];if(o){t[n]=Ip(o.defaultRedirectionUrl);return}}).addCase(Sv,(t,r)=>{let{id:n,redirectionUrl:o}=r.payload;n in t&&(t[n]=Ip(o))}).addCase(Hu.pending,(t,r)=>{let n=t[r.meta.arg.id];n&&(n.isLoading=!0)}).addCase(Hu.fulfilled,(t,r)=>{let n=r.payload,o=t[r.meta.arg.id];o&&(o.redirectTo=n||o.defaultRedirectionUrl,o.isLoading=!1)}).addCase(Hu.rejected,(t,r)=>{let n=t[r.meta.arg.id];n&&(n.isLoading=!1)}).addCase(xv,(t,r)=>{let n=t[r.payload.id];n&&(n.analytics.cause="searchFromLink")}).addCase(vv,(t,r)=>{let n=t[r.payload.id];n&&(n.analytics.cause="omniboxFromLink",n.analytics.metadata=r.payload.metadata)}));function Ip(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}l();s();u();c();l();s();u();c();var Fv=(e,t)=>{let r=$t(e,t);return{...r,context:{...r.context,capture:!1},query:e.commerceQuery.query}};var ln=te("commerce/standaloneSearchBox/fetchRedirect",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{I(e,{id:new V({emptyAllowed:!1})});let a=t(),d=Fv(a,o),m=await n.plan(d);return He(m)?r(m.error):m.success.redirect||""}),va=A("commerce/standaloneSearchBox/register",e=>I(e,{id:N,redirectionUrl:N,overwrite:new X({required:!1})})),Ra=A("commerce/standaloneSearchBox/updateRedirectionUrl",e=>I(e,{id:N,redirectionUrl:N})),Aa=A("commerce/standaloneSearchBox/reset",e=>I(e,{id:N}));function lO(e){return e.addReducers({standaloneSearchBoxSet:Av}),{fetchRedirectUrl:ln,registerStandaloneSearchBox:va,updateStandaloneSearchBoxRedirectionUrl:Ra,resetStandaloneSearchBox:Aa}}l();s();u();c();function dO(e){return e.addReducers({triggers:or}),{updateIgnoreQueryTrigger:Nr,applyQueryTriggerModification:bo}}l();s();u();c();function Pv(e,t={}){if(!mO(e))throw ne;let r=ie(e),{dispatch:n}=e,o=()=>e[K];return t.options&&(nt(e,iy,t.options,"buildContext"),n(Pe(t.options))),{...r,get state(){return o().commerceContext},setLanguage:a=>n(Pe({...o().commerceContext,language:a})),setCountry:a=>n(Pe({...o().commerceContext,country:a})),setCurrency:a=>n(Pe({...o().commerceContext,currency:a})),setView:a=>n(we(a)),setLocation:a=>n(Ro(a)),setCustom:a=>n(Ao(a))}}function mO(e){return e.addReducers({commerceContext:_t}),!0}l();s();u();c();l();s();u();c();l();s();u();c();var Gu=re((e,t)=>({facetRequestSelector:e.commerceFacetSet[t]}),({facetRequestSelector:e})=>e?.request);function ir(e,t){if(!pO(e))throw ne;let{dispatch:r}=e,n=ie(e),o=t.options.facetId,a=()=>e[K],d=()=>Gu(a(),o),m=()=>t.options.facetResponseSelector(a(),o),f=()=>t.options.isFacetLoadingResponseSelector(a()),p=()=>d()?.values?.filter(g=>g.state!=="idle").length??0;return{...n,toggleSelect:g=>{r(t.options.toggleSelectActionCreator({selection:g,facetId:o})),r(t.options.fetchProductsActionCreator())},toggleExclude:g=>{if(!t.options.toggleExcludeActionCreator){e.logger.warn("No toggle exclude action creator provided; calling #toggleExclude had no effect.");return}r(t.options.toggleExcludeActionCreator({selection:g,facetId:o})),r(t.options.fetchProductsActionCreator())},toggleSingleSelect:function(g){g.state==="idle"&&r(We({facetId:o})),this.toggleSelect(g)},toggleSingleExclude:function(g){if(!t.options.toggleExcludeActionCreator){e.logger.warn("No toggle exclude action creator provided; calling #toggleSingleExclude had no effect.");return}g.state==="idle"&&r(We({facetId:o})),this.toggleExclude(g)},isValueSelected:g=>g.state==="selected",isValueExcluded:g=>g.state==="excluded",deselectAll(){r(We({facetId:o})),r(t.options.fetchProductsActionCreator())},showMoreValues(){let g=d()?.numberOfValues??0,C=d()?.initialNumberOfValues??1,v=C-g%C,x=g+v;r(In({facetId:o,numberOfValues:x})),r(En({facetId:o,isFieldExpanded:!0})),r(t.options.fetchProductsActionCreator())},showLessValues(){let g=d()?.initialNumberOfValues??1,C=Math.max(g,p());r(In({facetId:o,numberOfValues:C})),r(En({facetId:o,isFieldExpanded:!1})),r(t.options.fetchProductsActionCreator())},get state(){return gO(o,d(),m(),f())}}}function pO(e){return e.addReducers({commerceFacetSet:Ce}),!0}var fO=e=>!!e&&e.values.length>(e.initialNumberOfValues??1)&&e.values.some(t=>t.state==="idle"),gO=(e,t,r,n)=>({canShowLessValues:fO(t),canShowMoreValues:r?.moreValuesAvailable??!1,displayName:r?.displayName??"",facetId:e,field:r?.field??"",hasActiveValues:!r||r.type==="hierarchical"?!1:r.values.some(o=>o.state!=="idle"),isLoading:n,type:r?.type??"regular",values:r?.values?r.values:[]});function bv(e,t){let r=ir(e,{options:{...t,toggleSelectActionCreator:Ft,toggleExcludeActionCreator:Pt}}),{dispatch:n}=e,{facetId:o,fetchProductsActionCreator:a}=t;return{...r,setRanges(d){n(Zo({facetId:o,values:d.map(m=>({...m,numberOfResults:0}))})),n(a())},get state(){return yO(r.state)},type:"dateRange"}}var yO=e=>({...e,type:"dateRange"});l();s();u();c();function hO(e,t){if(!t)return;let r=new pe({criterion:og});Ge(e,r,t,"buildSort")}function wv(e,t){if(!SO(e))throw ne;let{dispatch:r}=e,n=ie(e);hO(e,t.initialState);let o=t.initialState?.criterion;return o&&r(Mt(o)),{...n,get state(){return e[K].commerceSort},sortBy(a){r(Mt(a)),r(t.fetchProductsActionCreator())},isSortedBy(a){return JSON.stringify(this.state.appliedSort)===JSON.stringify(a)},isAvailable(a){return this.state.availableSorts.some(d=>JSON.stringify(d)===JSON.stringify(a))}}}function SO(e){return e.addReducers({commerceSort:nr}),!0}l();s();u();c();l();s();u();c();var Fa=re((e,t)=>({state:e,facetId:t}),({state:e,facetId:t})=>{let r=e.commerceSearch.facets.find(n=>n.facetId===t);if(r&&r.facetId in e.commerceFacetSet)return r}),Pa=re(e=>({state:e}),({state:e})=>e.commerceSearch.isLoading);l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();function Wu(e,t){let r=e.dispatch,{options:n,getFacetSearch:o,executeFacetSearchActionCreator:a,executeFieldSuggestActionCreator:d}=t,{facetId:m}=n;return{updateText(f){r(Lr({facetId:m,query:f,numberOfValues:o().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:f,options:p}=o();r(Lr({facetId:m,numberOfValues:p.numberOfValues+f})),r(t.isForFieldSuggestions?d(m):a(m))},search(){r(t.isForFieldSuggestions?d(m):a(m))},clear(){r(oa({facetId:m}))},updateCaptions(f){r(Lr({facetId:m,captions:f}))},get state(){let{response:f,isLoading:p,options:g}=o(),{query:C}=g,v=f.values;return{...f,values:v,isLoading:p,query:C}}}}function Iv(e,t){let{dispatch:r}=e,n={...tn,...t.options},{facetId:o}=n,a=()=>"state"in e?e.state.categoryFacetSearchSet[o]:e[K].categoryFacetSearchSet[o];r(Bs(n));let d=Wu(e,{options:n,getFacetSearch:a,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:t.executeFacetSearchActionCreator,executeFieldSuggestActionCreator:t.executeFieldSuggestActionCreator});return{...d,select(m){r(St({facetId:o,value:m})),t.select(m)},get state(){return d.state}}}function ba(e,t){if(!CO(e))throw ne;let{state:r,updateCaptions:n,...o}=Iv(e,{...t,executeFacetSearchActionCreator:a=>bt({facetId:a,facetSearchType:t.options.type}),executeFieldSuggestActionCreator:a=>ct({facetId:a,facetSearchType:t.options.type})});return o}function CO(e){return e.addReducers({categoryFacetSearchSet:an}),!0}function Ev(e,t){if(!xO(e))throw ne;let{dispatch:r}=e,n=ze(t.facetId),o=ba(e,{options:{facetId:n,...t.facetSearch,numberOfValues:10},select:()=>{r(t.fetchProductsActionCreator())},isForFieldSuggestions:!1}),a=()=>e[K],d=p=>a().fieldSuggestionsOrder.find(g=>g.facetId===p),m=ie(e),f=re(p=>p.categoryFacetSearchSet[n],p=>({isLoading:p.isLoading,moreValuesAvailable:p.response.moreValuesAvailable,query:p.options.query,values:p.response.values}));return{...m,...o,select:p=>{r(St({facetId:t.facetId,value:p})),r(t.fetchProductsActionCreator())},updateText:p=>{o.updateText(p),o.search()},get state(){let p=d(t.facetId);return{displayName:p.displayName,field:p.field,facetId:p.facetId,...f(a())}},type:"hierarchical"}}function xO(e){return e.addReducers({fieldSuggestionsOrder:qt,categoryFacetSearchSet:an,commerceFacetSet:Ce}),!0}function qv(e){if(!vO(e))throw ne;let t={fetchProductsActionCreator:ue,facetResponseSelector:Fa,isFacetLoadingResponseSelector:Pa,facetSearch:{type:"SEARCH"}},r=ie(e),n=re(o=>o.fieldSuggestionsOrder,o=>o.map(({type:a,facetId:d})=>{if(a==="hierarchical")return Ev(e,{facetId:d,...t})}));return{...r,get fieldSuggestions(){return n(e[K]).filter(o=>o!==void 0)},get state(){return e[K].fieldSuggestionsOrder}}}function vO(e){return e.addReducers({fieldSuggestionsOrder:qt}),!0}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var wa={facetId:le,field:N,tabs:new L({options:{required:!1},values:{included:new ae({each:new V}),excluded:new ae({each:new V})}}),activeTab:new V({required:!1}),delimitingCharacter:new V({required:!1,emptyAllowed:!0}),filterFacetCount:new X({required:!1}),injectionDepth:new W({required:!1,min:0}),numberOfValues:new W({required:!1,min:1}),sortCriteria:new ve({required:!1}),basePath:new ae({required:!1,each:N}),filterByBasePath:new X({required:!1})};var Tv=A("categoryFacet/register",e=>I(e,wa)),Ov=A("categoryFacet/toggleSelectValue",e=>{try{return je(e.facetId,N),wi(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:rt(t)}}}),kv=A("categoryFacet/deselectAll",e=>I(e,wa.facetId)),zPe=A("categoryFacet/updateNumberOfValues",e=>I(e,{facetId:wa.facetId,numberOfValues:wa.numberOfValues})),HPe=A("categoryFacet/updateSortCriterion",e=>I(e,{facetId:wa.facetId,criterion:new ve})),GPe=A("categoryFacet/updateBasePath",e=>I(e,{facetId:wa.facetId,basePath:new ae({each:N})}));var jv=Z(Fc(),e=>{e.addCase(pr,(t,r)=>({...t,...r.payload})).addCase(Se.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(Se.rejected,t=>{t.freezeFacetOrder=!1}).addCase(De.fulfilled,(t,r)=>r.payload?.facetOptions??t).addCase(Tv,(t,r)=>{let{facetId:n,tabs:o}=r.payload;Ku(o,t,n)}).addCase(Mc,(t,r)=>{let{facetId:n,tabs:o}=r.payload;Ku(o,t,n)}).addCase(Fi,(t,r)=>{let{facetId:n,tabs:o}=r.payload;Ku(o,t,n)}).addCase(bi,(t,r)=>{let{facetId:n,tabs:o}=r.payload;Ku(o,t,n)}).addCase(hd,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(fr,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase($e,(t,r)=>{[...Object.keys(r.payload.f??{}),...Object.keys(r.payload.fExcluded??{}),...Object.keys(r.payload.cf??{}),...Object.keys(r.payload.nf??{}),...Object.keys(r.payload.df??{})].forEach(n=>{n in t||(t.facets[n]=gm()),t.facets[n].enabled=!0})})});function Ku(e,t,r){let n={...gm(),tabs:e??{}};t.facets[r]=n}l();s();u();c();l();s();u();c();var Yu=A("rangeFacet/executeToggleSelect",e=>I(e,Fm(e.selection))),Ju=A("rangeFacet/executeToggleExclude",e=>I(e,Fm(e.selection)));var Vv={facetId:le,selection:new L({values:Dt})},IO=te("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Vv),t(Ho(e)),t(Yu(e)),t(pr())}),EO=te("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Vv),t(Go(e)),t(Ju(e)),t(pr())});l();s();u();c();function Ep(e,t){let r=t.payload??null;r&&(e.response=pt().response,e.results=[],e.questionAnswer=fi()),e.error=r,e.isLoading=!1}function qp(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function qO(e,t){qp(e,t),e.results=t.payload.response.results.map(r=>({...r,searchUid:t.payload.response.searchUid})),e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function Dv(e,t){e.isLoading=!0,e.searchAction=t.meta.arg.next,e.requestId=t.meta.requestId}function TO(e,t){e.isLoading=!0,e.searchAction={actionCause:"browseResults"},e.requestId=t.meta.requestId}var Xu=Z(pt(),e=>{e.addCase(Se.rejected,(t,r)=>Ep(t,r)),e.addCase(qc.rejected,(t,r)=>Ep(t,r)),e.addCase($o.rejected,(t,r)=>Ep(t,r)),e.addCase(Se.fulfilled,(t,r)=>{qO(t,r)}),e.addCase(qc.fulfilled,(t,r)=>{qp(t,r),t.results=[...t.results,...r.payload.response.results.map(n=>({...n,searchUid:r.payload.response.searchUid}))]}),e.addCase($o.fulfilled,(t,r)=>{qp(t,r),t.results=[...r.payload.response.results.map(n=>({...n,searchUid:r.payload.response.searchUid}))]}),e.addCase(Tc.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(Se.pending,Dv),e.addCase(qc.pending,TO),e.addCase($o.pending,Dv),e.addCase(_h,(t,r)=>{t.searchAction=r.payload}),e.addCase(Tt,(t,r)=>{t.error=r.payload,t.isLoading=!1})});l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Zu=["idle","selected","excluded"];l();s();u();c();var el=["ascending","descending"],tl=["even","equiprobable"];var OO={start:new V,end:new V,endInclusive:new X,state:new V({constrainTo:Zu})},Lwe=new pe({facetId:kc,field:jc,tabs:new L({options:{required:!1},values:{included:new ae({each:new V}),excluded:new ae({each:new V})}}),generateAutomaticRanges:Nc,filterFacetCount:Vc,injectionDepth:Dc,numberOfValues:xi,currentValues:new ae({each:new L({values:OO})}),sortCriteria:new V({constrainTo:el}),rangeAlgorithm:new V({constrainTo:tl})});l();s();u();c();l();s();u();c();l();s();u();c();var Lv={facetId:le,selection:new L({values:Ln})},LO=te("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Lv),t(Wo(e)),t(Yu(e)),t(pr())}),EIe=te("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Lv),t(Ko(e)),t(Ju(e)),t(pr())});l();s();u();c();l();s();u();c();var Qv=["allValues","atLeastOneValue"];var QO={start:new W,end:new W,endInclusive:new X,state:new V({constrainTo:Zu})},GIe=new pe({facetId:kc,tabs:new L({options:{required:!1},values:{included:new ae({each:new V}),excluded:new ae({each:new V})}}),field:jc,generateAutomaticRanges:Nc,filterFacetCount:Vc,injectionDepth:Dc,numberOfValues:xi,currentValues:new ae({each:new L({values:QO})}),sortCriteria:new V({constrainTo:el}),resultsMustMatch:new V({constrainTo:Qv}),rangeAlgorithm:new V({constrainTo:tl})});l();s();u();c();function rl(e){return{endInclusive:!1,state:"idle",...e}}var Bv="..",Tp="...",UO=/^(f|fExcluded|cf|nf|df|sf|af|mnf)-(.+)$/,BO={f:!0,fExcluded:!0,cf:!0,sf:!0,af:!0,nf:!0,df:!0,mnf:!0},Gn="&",Ki="=";function _O(e){return e in BO}function _v(e){let r=e in{nf:!0,df:!0,mnf:!0};return _O(e)&&r}var $v=e=>t=>Object.entries(t).map(e).filter(r=>r).join(Gn);function Op(e,t){return`${e}${Ki}${encodeURIComponent(t)}`}function zv(e){return Ia(e)?Gv(e,r=>typeof r=="string"):!1}function Hv(e){return Ia(e)?Gv(e,r=>Ia(r)&&"start"in r&&"end"in r):!1}function Ia(e){return!!(e&&typeof e=="object")}function Gv(e,t){return Object.entries(e).filter(n=>{let o=n[1];return!Array.isArray(o)||!o.every(t)}).length===0}function Wv(e,t){return Object.entries(t).map(([r,n])=>`${e}-${r}${Ki}${n.map(o=>encodeURIComponent(o)).join(",")}`).join(Gn)}function Kv(e,t){return Object.entries(t).map(([r,n])=>{let o=n.map(({start:a,end:d,endInclusive:m})=>`${a}${m?Tp:Bv}${d}`).join(",");return`${e}-${r}${Ki}${o}`}).join(Gn)}function Yv(e){let[t,...r]=e.split(Ki),n=r.join(Ki);return[t,n]}function Jv(e,t=UO){let[r,n]=e,o=t.exec(r);if(!o)return e;let a=o[1],d=o[2],m=n.split(","),f=$O(a,m),p={[d]:f};return[a,JSON.stringify(p)]}function $O(e,t){return e==="nf"||e==="mnf"?zO(t,"selected"):e==="df"?HO(t,"selected"):t}function zO(e,t){let r=[];for(let n of e){let{startAsString:o,endAsString:a,isEndInclusive:d}=Zv(n),m=parseFloat(o),f=parseFloat(a);!Number.isFinite(m)||!Number.isFinite(f)||r.push(rl({start:m,end:f,state:t,endInclusive:d}))}return r}function Uv(e){try{return vh(e)?(xc(e,Cc),!0):Yt(e)?(_r(e),!0):!1}catch{return!1}}function HO(e,t){let r=[];for(let n of e){let{isEndInclusive:o,startAsString:a,endAsString:d}=Zv(n);!Uv(a)||!Uv(d)||r.push(Cr({start:a,end:d,state:t,endInclusive:o}))}return r}function Xv(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach(n=>{let[o,a]=n;r[o]=a.map(d=>es(d)?decodeURIComponent(d):d)}),r}function Zv(e){let t=e.indexOf(Tp)!==-1,[r,n]=e.split(t?Tp:Bv);return{isEndInclusive:t,startAsString:r,endAsString:n}}var eR=" ",tR=",",GO=/^(f|fExcluded|cf|nf|nfExcluded|df|dfExcluded|mnf|mnfExcluded|lf)-(.+)$/,dn={serialize:rR,deserialize:oR},nl={serialize:rR,deserialize:oR},WO={f:!0,fExcluded:!0,lf:!0,cf:!0,nf:!0,nfExcluded:!0,df:!0,dfExcluded:!0,mnf:!0,mnfExcluded:!0};function rR(e){return ok($v(KO)(e))}function KO(e){let[t,r]=e;return nR(t)?t==="sortCriteria"?XO(r)?YO(t,r):"":ol(t)&&!_v(t)?zv(r)?Wv(t,r):"":t==="nf"||t==="df"||t==="mnf"?Hv(r)?Kv(t,r):"":r!==void 0?Op(t,r):"":""}function YO(e,t){return Op(e,JO(t))}function JO(e){return e?e.by==="relevance"?"relevance":e.fields.map(t=>`${t.name}${eR}${t.direction}`).join(tR):""}function nR(e){return ZO(e)||ol(e)}function XO(e){return!Ia(e)||!("by"in e)?!1:e.by==="relevance"?!0:e.by==="fields"&&"fields"in e&&Yl(e.fields)?e.fields.every(t=>Ia(t)&&"name"in t&&typeof t.name=="string"&&("direction"in t&&(t.direction==="asc"||t.direction==="desc")||!("direction"in t))):!1}function ZO(e){return e in{q:!0,sortCriteria:!0,page:!0,perPage:!0}}function oR(e){return e.split(Gn).map(Yv).map(n=>Jv(n,GO)).filter(ek).map(tk).reduce((n,o)=>{let[a,d]=o;if(ol(a)){let m={...n[a],...d};return{...n,[a]:m}}if(a==="sortCriteria"){let m=rk(d);return{...n,[a]:m}}return{...n,[a]:d}},{})}function ol(e){return e in WO}function ek(e){let t=nR(e[0]),r=e.length===2;return t&&r}function tk(e){let[t,r]=e;return t==="page"||t==="perPage"?[t,parseInt(r)]:ol(t)?[t,Xv(r)]:[t,decodeURIComponent(r)]}function rk(e){if(e==="relevance")return jt();let t=e.split(tR);if(t.length)return t.reduce((r,n)=>{let o=n.trim().split(eR);if(o.length!==2)return r;let a=o[0].toLowerCase(),d=o[1].toLowerCase();return r.fields.push({name:a,direction:d}),r},Ya([]))}var aR=e=>e.startsWith("mnf-"),nk=e=>e.startsWith("nf-")||aR(e);function ok(e){let t=new Set,r=new Set,n=[];for(let o of e.split(Gn)){if(!nk(o)){n.push(o);continue}let a=o.replace(/^mnf-/,"nf-");if(!t.has(a)){t.add(a),r.add(o);continue}aR(o)&&(r.delete(a),r.add(o))}return n.push(...r),n.join(Gn)}function al(e,t){if(!ak(e))throw ne;let{dispatch:r}=e,n=ze(t.facetId),o=ba(e,{options:{facetId:n,...t.facetSearch},select:()=>{},isForFieldSuggestions:!0}),a=()=>e[K],d=ie(e),m=re(g=>g.fieldSuggestionsOrder,g=>g.find(C=>C.facetId===t.facetId)),f=re(g=>g.categoryFacetSearchSet[n],g=>({isLoading:g.isLoading,moreValuesAvailable:g.response.moreValuesAvailable,query:g.options.query,values:g.response.values})),{clear:p}=o;return{...d,clear:p,updateQuery:g=>{o.updateText(g),o.search()},getSearchParameters:g=>dn.serialize({q:f(a()).query,cf:{[t.facetId]:[...g.path,g.rawValue]}}),select:g=>{r(Ve()),r(St({facetId:t.facetId,value:g})),r(Te({query:e[K].categoryFacetSearchSet[n].options.query})),r(t.fetchProductsActionCreator())},get state(){let{displayName:g,field:C,facetId:v}=m(a());return{displayName:g,field:C,facetId:v,...f(a())}},type:"hierarchical"}}function ak(e){return e.addReducers({categoryFacetSearchSet:an,commerceFacetSet:Ce,commerceQuery:Ne,fieldSuggestionsOrder:qt}),!0}l();s();u();c();l();s();u();c();l();s();u();c();function iR(e,t){let{dispatch:r}=e,{options:n,select:o,exclude:a,isForFieldSuggestions:d,executeFacetSearchActionCreator:m,executeFieldSuggestActionCreator:f}=t,{facetId:p}=n,g=()=>"state"in e?e.state.facetSearchSet[p]:e[K].facetSearchSet[p];r(_s(n));let C=Wu(e,{options:n,getFacetSearch:g,isForFieldSuggestions:d,executeFacetSearchActionCreator:m,executeFieldSuggestActionCreator:f});return{...C,select(v){r(mt({facetId:p,value:v})),o(v)},exclude(v){r(Vt({facetId:p,value:v})),a(v)},singleSelect(v){r(st(p)),r(mt({facetId:p,value:v})),o(v)},singleExclude(v){r(st(p)),r(Vt({facetId:p,value:v})),a(v)},get state(){let{values:v}=C.state;return{...C.state,values:v.map(({count:x,displayValue:R,rawValue:F})=>({count:x,displayValue:R,rawValue:F}))}}}}function il(e,t){if(!ik(e))throw ne;let{state:r,updateCaptions:n,...o}=iR(e,{...t,executeFacetSearchActionCreator:a=>bt({facetId:a,facetSearchType:t.options.type}),executeFieldSuggestActionCreator:a=>ct({facetId:a,facetSearchType:t.options.type})});return{...o}}function ik(e){return e.addReducers({facetSearchSet:aa}),!0}function sl(e,t){if(!sk(e))throw ne;let{dispatch:r}=e,n=ze(t.facetId),o=il(e,{options:{facetId:n,...t.facetSearch},select:()=>{},exclude:()=>{},isForFieldSuggestions:!0}),a=()=>e[K],d=ie(e),m=re(g=>g.fieldSuggestionsOrder,g=>g.find(C=>C.facetId===t.facetId)),f=re(g=>g.facetSearchSet[n],g=>({isLoading:g.isLoading,moreValuesAvailable:g.response.moreValuesAvailable,query:g.options.query,values:g.response.values})),{clear:p}=o;return{...d,clear:p,updateQuery:g=>{o.updateText(g),o.search()},getSearchParameters:g=>dn.serialize({q:f(a()).query,f:{[t.facetId]:[g.rawValue]}}),select:g=>{r(Ve()),r(mt({facetId:t.facetId,value:g})),r(Te({query:e[K].facetSearchSet[n].options.query})),r(t.fetchProductsActionCreator())},get state(){let{displayName:g,field:C,facetId:v}=m(a());return{displayName:g,field:C,facetId:v,...f(a())}},type:"regular"}}function sk(e){return e.addReducers({commerceFacetSet:Ce,commerceQuery:Ne,facetSearchSet:aa,fieldSuggestionsOrder:qt}),!0}l();s();u();c();function sR(e){if(!ck(e))throw ne;let t={fetchProductsActionCreator:ue,facetResponseSelector:Fa,isFacetLoadingResponseSelector:Pa,facetSearch:{type:"SEARCH"}},r=ie(e),n=re(o=>o.fieldSuggestionsOrder,o=>o.map(({type:a,facetId:d})=>{switch(a){case"hierarchical":return al(e,{facetId:d,...t});default:return sl(e,{facetId:d,...t})}}));return{...r,get filterSuggestions(){return n(e[K])},get state(){return e[K].fieldSuggestionsOrder}}}function ck(e){return e.addReducers({fieldSuggestionsOrder:qt}),!0}l();s();u();c();l();s();u();c();l();s();u();c();function cl(e,t,r){if(!uk(e))throw ne;let n=1e3,o={selectionDelay:n,debounceWait:n,...t.options},a;return{select:Ps(r,o.debounceWait,{isImmediate:!0}),beginDelayedSelect(){a=setTimeout(r,o.selectionDelay)},cancelPendingSelect(){a&&clearTimeout(a)}}}function uk(e){return e.addReducers({configuration:Ze}),!0}function ul(e,t){let r=!1,n=()=>{let a=(C,v,x)=>`- Could not retrieve '${C}' analytics property from field${v.length>1?"s":""} '${v.join("', '")}'; fell back to ${x}.`,d=[],{ec_name:m,ec_promo_price:f,ec_price:p,ec_product_id:g}=t.options.product;if(m||d.push(a("name",["ec_gender"],"permanentid")),!f&&!p&&d.push(a("price",["ec_promo_price","ec_price"],"NaN")),g||d.push(a("productId",["ec_product_id"],"permanentid")),d.length!==0)return`Some required analytics properties could not be retrieved from the expected fields for product with permanentid '${t.options.product.permanentid}':

${d.join(`
`)}

Review the configuration of the above 'ec_'-prefixed fields in your index, and make sure they contain the correct metadata.`};return{...cl(e,t,()=>{r||(r=!0,e.dispatch(Du({product:{name:t.options.product.ec_name??t.options.product.permanentid,price:t.options.product.ec_promo_price??t.options.product.ec_price??NaN,productId:t.options.product.ec_product_id??t.options.product.permanentid},position:t.options.product.position,responseId:t.options.product.responseId??t.responseIdSelector(e[K])})))}),warningMessage:n()}}var lk={searchBoxId:Re,cacheTimeout:new W},dk=new pe(lk);function cR(e,t){if(!mk(e))throw ne;let r=ie(e),{dispatch:n}=e,o=()=>e[K],a={searchBoxId:t.options.searchBoxId||vn("instant-products-"),cacheTimeout:t.options.cacheTimeout||6e4};nt(e,dk,a,"buildInstantProducts");let d=a.searchBoxId;n(ha({id:d}));let m=()=>o().instantProducts[d],f=C=>m().cache[C],p=()=>m().q,g=()=>{let C=f(p());return C?C.isLoading?[]:C.products:[]};return{...r,updateQuery(C){if(!C)return;let v=f(C);(!v||!v.isLoading&&(v.error||ku(v)))&&n(Io({id:d,q:C,cacheTimeout:a.cacheTimeout})),n(Sa({id:d,query:C}))},clearExpired(){n(ga({id:d}))},promoteChildToParent(C){n(ya({child:C,id:d,query:p()}))},interactiveProduct(C){return ul(e,{...C,responseIdSelector:()=>m().cache[p()].searchUid})},get state(){let C=p(),v=f(C);return{query:C,isLoading:v?.isLoading||!1,error:v?.error||null,products:g(),totalCount:v?.totalCountFiltered||0}}}}function mk(e){return e.addReducers({instantProducts:ju}),!0}l();s();u();c();var pk={placementIds:[],productId:void 0};function fk(e,t){Ge(e,iv,t?.options,"buildProductEnrichment")}function uR(e,t){if(!gk(e))throw ne;let r=ie(e),{dispatch:n}=e,o=()=>e[K],a={...pk,...t?.options};return fk(e,{options:t?.options}),n(Ca({productId:a.productId,placementIds:a.placementIds})),{...r,get state(){return o().productEnrichment},getBadges(){let{placementIds:d,productId:m}=o().productEnrichment;if(!d||d.length===0)throw new Error("placementIds must be provided and non-empty to fetch badges");n(un({placementIds:d,productId:m}))}}}function gk(e){return e.addReducers({productEnrichment:Nu}),!0}l();s();u();c();l();s();u();c();l();s();u();c();function lR(e){if(!yk(e))throw ne;let t=ie(e),r=()=>e[K].didYouMean;return{...t,applyCorrection(){e.dispatch(Te({query:this.state.queryCorrection.correctedQuery})),e.dispatch(ue())},get state(){let n=r();return{originalQuery:n.originalQuery,wasCorrectedTo:n.wasCorrectedTo,queryCorrection:n.queryCorrection,hasQueryCorrection:n.queryCorrection.correctedQuery!=="",wasAutomaticallyCorrected:n.wasCorrectedTo!==""}}}}function yk(e){return e.addReducers({didYouMean:Us}),!0}l();s();u();c();var kp={regular:{toggleSelectActionCreator:Et,toggleExcludeActionCreator:It},numericalRange:{toggleSelectActionCreator:ut,toggleExcludeActionCreator:lt},dateRange:{toggleSelectActionCreator:Ft,toggleExcludeActionCreator:Pt},location:{toggleSelectActionCreator:wt},hierarchical:{toggleSelectActionCreator:We}};function dR(e,t){if(!hk(e))throw ne;let r=ie(e),{dispatch:n}=e,o=p=>({facetId:p.facetId,facetDisplayName:p.displayName,field:p.field,type:p.type,values:p.type==="hierarchical"?d(p):a(p)}),a=p=>p.values.filter(g=>g.state!=="idle").map(g=>({value:g,deselect:()=>{g.state==="selected"?(n(kp[p.type].toggleSelectActionCreator({facetId:p.facetId,selection:g})),p.type!=="location"&&n(qn({facetId:p.facetId,freezeCurrentValues:!1})),n(t.fetchProductsActionCreator())):g.state==="excluded"&&p.type!=="location"&&(n(kp[p.type].toggleExcludeActionCreator({facetId:p.facetId,selection:g})),n(qn({facetId:p.facetId,freezeCurrentValues:!1})),n(t.fetchProductsActionCreator()))}})),d=p=>{let g=Bt(p.values),C=g.length>0?g[g.length-1]:void 0;return C===void 0?[]:[{value:C,deselect:()=>{n(kp.hierarchical.toggleSelectActionCreator({facetId:p.facetId})),n(t.fetchProductsActionCreator())}}]},m=p=>!p||p.values.length===0?!1:p.type==="hierarchical"?Bt(p.values).length>0:p.values.some(g=>g.state!=="idle"),f=re(p=>p.facetOrder,p=>{let g=p.flatMap(C=>{let v=t.facetResponseSelector(e[K],C);return m(v)?[o(v)]:[]});return{facetBreadcrumbs:g,hasBreadcrumbs:g.length>0}});return{...r,deselectAll:()=>{n(Ve()),n(t.fetchProductsActionCreator())},get state(){return f(e[K])}}}function hk(e){return e.addReducers({facetOrder:ar,commerceFacetSet:Ce}),!0}l();s();u();c();l();s();u();c();var mR=re((e,t)=>({facetSearchSelector:e.categoryFacetSearchSet[t]}),({facetSearchSelector:e})=>e);function pR(e,t){let r=ir(e,{options:{...t,toggleSelectActionCreator:er}}),{deselectAll:n,isValueSelected:o,subscribe:a,toggleSelect:d}=r,{dispatch:m}=e,{facetId:f}=t,p=ba(e,{options:{facetId:f,...t.facetSearch},select:()=>{m(t.fetchProductsActionCreator())},isForFieldSuggestions:!1}),g=()=>Gu(e[K],f),C=v=>{let x=v.find(R=>R.state==="selected");if(x)return x.children;for(let R of v)if(R.children.length>0){let F=C(R.children);if(F!==R.children)return F}return v};return{deselectAll:n,isValueSelected:o,subscribe:a,toggleSelect:d,showMoreValues(){let{initialNumberOfValues:v,values:x,numberOfValues:R}=g(),F=C(x);if(!v&&!R)return;let w=F.length+(v??R);m(Qn({facetId:f,numberOfValues:w})),m(t.fetchProductsActionCreator())},showLessValues(){let x=g().initialNumberOfValues??1;m(Qn({facetId:f,numberOfValues:x})),m(t.fetchProductsActionCreator())},facetSearch:p,get state(){return Sk(r.state,mR(e[K],f),g())},type:"hierarchical"}}var Sk=(e,t,r)=>{let{values:n}=e,o=Bt(n),a=o.length?o[o.length-1]:void 0,d=r?.initialNumberOfValues,m=!!d&&(a?d<a.children.length:d<(r.numberOfValues??e.values.length)),f=a?a.moreValuesAvailable:e.canShowMoreValues;return{...e,activeValue:a,canShowLessValues:m,canShowMoreValues:f,facetSearch:{isLoading:t?.isLoading??!1,moreValuesAvailable:t?.response.moreValuesAvailable??!1,query:t?.options.query??"",values:t?.response.values??[]},hasActiveValues:!!a,selectedValueAncestry:o,type:"hierarchical",values:n}};l();s();u();c();function fR(e,t){if(!Ck(e))throw ne;let r=ie(e),{dispatch:n}=e,o=re([d=>d.facetOrder,d=>d.commerceFacetSet],(d,m)=>d.map(f=>a(m,f))),a=re((d,m)=>({facetId:m,type:d[m].request.type}),({type:d,facetId:m})=>{switch(d){case"dateRange":return t.buildDateFacet(e,{facetId:m});case"hierarchical":return t.buildCategoryFacet(e,{facetId:m});case"numericalRange":return t.buildNumericFacet(e,{facetId:m});case"regular":return t.buildRegularFacet(e,{facetId:m});case"location":return t.buildLocationFacet(e,{facetId:m})}});return{...r,deselectAll:()=>{n(Ve()),n(t.fetchProductsActionCreator())},get facets(){return o(e[K])},get state(){return e[K].facetOrder}}}function Ck(e){return e.addReducers({facetOrder:ar,commerceFacetSet:Ce}),!0}l();s();u();c();function gR(e,t){let{toggleSingleExclude:r,toggleExclude:n,isValueExcluded:o,...a}=ir(e,{options:{...t,toggleSelectActionCreator:wt}});return{...a,get state(){return xk(a.state)},type:"location"}}var xk=e=>({...e,type:"location"});l();s();u();c();l();s();u();c();var yR=(e,t)=>e.manualNumericFacetSet[t]?.manualRange;function hR(e,t){let r=ir(e,{options:{...t,toggleSelectActionCreator:ut,toggleExcludeActionCreator:lt}});if(!vk(e))throw ne;let{dispatch:n}=e,{facetId:o,fetchProductsActionCreator:a}=t;return{...r,setRanges(d){d.forEach(m=>{n(Zr({facetId:o,...m}))}),n(a())},get state(){let d=t.facetResponseSelector(e[K],o);return Rk(r.state,d?.type==="numericalRange"?d:void 0,yR(e[K],o))},type:"numericalRange"}}function vk(e){return e.addReducers({manualNumericFacetSet:su}),!0}var Rk=(e,t,r)=>{let n=t?.type==="numericalRange"?t:void 0;return{...e,...n?.domain&&{domain:{min:n.domain.min,max:n.domain.max}},...r&&{manualRange:r},type:"numericalRange"}};l();s();u();c();l();s();u();c();var SR=re((e,t)=>({facetSearchSelector:e.facetSearchSet[t]}),({facetSearchSelector:e})=>e);function CR(e,t){let r=ir(e,{options:{...t,toggleSelectActionCreator:Et,toggleExcludeActionCreator:It}}),n=()=>r.state.facetId,{dispatch:o}=e,a=il(e,{options:{facetId:n(),...t.facetSearch},select:()=>{o(t.fetchProductsActionCreator())},exclude:()=>{o(t.fetchProductsActionCreator())},isForFieldSuggestions:!1});return{...r,facetSearch:a,get state(){return Ak(r.state,SR(e[K],n()))},type:"regular"}}var Ak=(e,t)=>({...e,facetSearch:{isLoading:t?.isLoading??!1,moreValuesAvailable:t?.response.moreValuesAvailable??!1,query:t?.options.query??"",values:t?.response.values??[]},type:"regular"});l();s();u();c();function xR(e,t){let r=!1,n=()=>{let{id:a,desktopImage:d}=t.options.spotlightContent,m=[];if(a||m.push("- Could not retrieve 'id' property from spotlight content; this is required for analytics."),d||m.push("- Could not retrieve 'desktopImage' property from spotlight content; this is required for analytics."),m.length!==0)return`Some required analytics properties could not be retrieved from the spotlight content with id '${a}':

${m.join(`
`)}

Review the configuration to ensure the spotlight content contains the correct metadata.`};return{...cl(e,t,()=>{r||(r=!0,e.dispatch($u({id:t.options.spotlightContent.id,desktopImage:t.options.spotlightContent.desktopImage,position:t.options.spotlightContent.position,responseId:t.options.spotlightContent.responseId??t.responseIdSelector(e[K])})))}),warningMessage:n()}}l();s();u();c();var Fk=new pe({pageSize:new W({min:1,max:1e3,required:!1})});function vR(e,t){if(!Pk(e))throw ne;let r=ie(e),{dispatch:n}=e;nt(e,Fk,t.options,"buildCorePagination");let o=t.options?.slotId;t.options?.pageSize&&n(mr({slotId:o,pageSize:t.options.pageSize})),o&&n(Po({slotId:o}));let a=re(d=>o?d.commercePagination.recommendations[o]:d.commercePagination.principal,({perPage:d,...m})=>({pageSize:d??0,...m}));return{...r,get state(){return a(e[K])},selectPage(d){n(zt({slotId:o,page:d})),n(t.fetchProductsActionCreator())},nextPage(){n(Vr({slotId:o})),n(t.fetchProductsActionCreator())},previousPage(){n(Dr({slotId:o})),n(t.fetchProductsActionCreator())},setPageSize(d){n(mr({slotId:o,pageSize:d})),n(t.fetchProductsActionCreator())},fetchMoreProducts(){n(t.fetchMoreProductsActionCreator())}}}function Pk(e){return e.addReducers({commercePagination:tr}),!0}l();s();u();c();l();s();u();c();l();s();u();c();function jp(){return{}}var AR=Z(jp(),e=>{e.addCase(Vr,(t,r)=>bk(t,r.payload)).addCase(Dr,(t,r)=>wk(t,r.payload)).addCase(zt,(t,r)=>Ik(t,r.payload)).addCase(mr,(t,r)=>Ek(t,r.payload)).addCase(Mt,(t,r)=>qk(t,r.payload)).addCase(Te,(t,r)=>Tk(t,r.payload)).addCase(Ve,t=>RR(t)).addCase(jr,t=>RR(t)).addCase(We,(t,r)=>Ok(t,r.payload)).addCase(er,(t,r)=>kk(t,r.payload)).addCase(St,(t,r)=>jk(t,r)).addCase(Et,(t,r)=>Vk(t,r.payload)).addCase(It,(t,r)=>Nk(t,r.payload)).addCase(mt,(t,r)=>Dk(t,r)).addCase(Vt,(t,r)=>Mk(t,r)).addCase(ut,(t,r)=>Lk(t,r.payload)).addCase(lt,(t,r)=>Qk(t,r.payload)).addCase(Zr,(t,r)=>Uk(t,r.payload)).addCase(Ft,(t,r)=>Bk(t,r.payload)).addCase(Pt,(t,r)=>_k(t,r.payload)).addCase(wt,(t,r)=>$k(t,r.payload)).addCase(we,jp).addCase(Je,(t,r)=>(t=r.payload,t)).addCase(ke,(t,r)=>(t=r.payload,t))}),bk=(e,t)=>{if(t?.slotId===void 0){if(e.page!==void 0){e.page++;return}e.page=1}},wk=(e,t)=>{if(t?.slotId===void 0){if(e.page!==void 0&&e.page>1){e.page--;return}e.page=void 0}},Ik=(e,t)=>{t?.slotId===void 0&&(e.page=t.page>0?t.page:void 0)},Ek=(e,t)=>{if(t?.slotId===void 0){if(e.page=void 0,t.pageSize===0){e.perPage=void 0;return}e.perPage=t.pageSize}},qk=(e,t)=>{e.page=void 0,e.sortCriteria=t},Tk=(e,t)=>{e.page=void 0;let{query:r}=t;if(r===void 0||r.trim()===""){e.q=void 0;return}e.q=r},RR=e=>{e.page=void 0,e.cf=void 0,e.df=void 0,e.dfExcluded=void 0,e.lf=void 0,e.mnf=void 0,e.mnfExcluded=void 0,e.nf=void 0,e.nfExcluded=void 0,e.f=void 0,e.fExcluded=void 0},Ok=(e,t)=>{let{facetId:r}=t;e.page=void 0,e.cf&&(delete e.cf[r],Object.keys(e.cf).length===0&&delete e.cf),e.df&&(delete e.df[r],Object.keys(e.df).length===0&&delete e.df),e.dfExcluded&&(delete e.dfExcluded[r],Object.keys(e.dfExcluded).length===0&&delete e.dfExcluded),e.lf&&(delete e.lf[r],Object.keys(e.lf).length===0&&delete e.lf),e.mnf&&(delete e.mnf[r],Object.keys(e.mnf).length===0&&delete e.mnf),e.mnfExcluded&&(delete e.mnfExcluded[r],Object.keys(e.mnfExcluded).length===0&&delete e.mnfExcluded),e.nf&&(delete e.nf[r],Object.keys(e.nf).length===0&&delete e.nf),e.nfExcluded&&(delete e.nfExcluded[r],Object.keys(e.nfExcluded).length===0&&delete e.nfExcluded),e.f&&(delete e.f[r],Object.keys(e.f).length===0&&delete e.f),e.fExcluded&&(delete e.fExcluded[r],Object.keys(e.fExcluded).length===0&&delete e.fExcluded)},kk=(e,t)=>{if(e.page=void 0,t.selection.state==="selected"){e.cf??(e.cf={}),delete e.cf[t.facetId],Object.keys(e.cf).length===0&&(e.cf=void 0);return}e.cf??(e.cf={}),e.cf[t.facetId]=t.selection.path},jk=(e,t)=>{let r=t.payload;e.page=void 0,e.cf??(e.cf={}),e.cf[r.facetId]=[...r.value.path,r.value.rawValue]},Vk=(e,t)=>{switch(e.page=void 0,Wn(e,"fExcluded",e.fExcluded,t.facetId,t.selection.value),t.selection.state){case"selected":Wn(e,"f",e.f,t.facetId,t.selection.value);break;case"excluded":case"idle":e.f??(e.f={}),e.f[t.facetId]=[...e.f[t.facetId]??[],t.selection.value];break}},Dk=(e,t)=>{let r=t.payload;e.page=void 0,Wn(e,"fExcluded",e.fExcluded,r.facetId,r.value.rawValue),e.f??(e.f={}),e.f[r.facetId]=[...e.f[r.facetId]??[],r.value.rawValue]},Nk=(e,t)=>{switch(e.page=void 0,Wn(e,"f",e.f,t.facetId,t.selection.value),t.selection.state){case"excluded":Wn(e,"fExcluded",e.fExcluded,t.facetId,t.selection.value);break;case"selected":case"idle":e.fExcluded??(e.fExcluded={}),e.fExcluded[t.facetId]=[...e.fExcluded[t.facetId]??[],t.selection.value];break}},Mk=(e,t)=>{let r=t.payload;e.page=void 0,Wn(e,"f",e.f,r.facetId,r.value.rawValue),e.fExcluded??(e.fExcluded={}),e.fExcluded[r.facetId]=[...e.fExcluded[r.facetId]??[],r.value.rawValue]},Lk=(e,t)=>{switch(e.page=void 0,Me(e,"mnf",e.mnf,t.facetId,t.selection),Me(e,"mnfExcluded",e.mnfExcluded,t.facetId,t.selection),Me(e,"nfExcluded",e.nfExcluded,t.facetId,t.selection),t.selection.state){case"selected":Me(e,"nf",e.nf,t.facetId,t.selection);break;case"excluded":case"idle":e.nf??(e.nf={}),e.nf[t.facetId]=[...e.nf[t.facetId]??[],t.selection];break;default:break}},Qk=(e,t)=>{switch(e.page=void 0,Me(e,"mnf",e.mnf,t.facetId,t.selection),Me(e,"mnfExcluded",e.mnfExcluded,t.facetId,t.selection),Me(e,"nf",e.nf,t.facetId,t.selection),t.selection.state){case"excluded":Me(e,"nfExcluded",e.nfExcluded,t.facetId,t.selection);break;case"selected":case"idle":e.nfExcluded??(e.nfExcluded={}),e.nfExcluded[t.facetId]=[...e.nfExcluded[t.facetId]??[],t.selection];break;default:break}},Uk=(e,t)=>{e.page=void 0,Me(e,"nf",e.nf,t.facetId,t),Me(e,"nfExcluded",e.nfExcluded,t.facetId,t);let{facetId:r,...n}=t;switch(t.state){case"idle":Me(e,"mnf",e.mnf,t.facetId,t),Me(e,"mnfExcluded",e.mnfExcluded,t.facetId,t);break;case"excluded":Me(e,"mnf",e.mnf,t.facetId,t),e.mnfExcluded??(e.mnfExcluded={}),e.mnfExcluded[t.facetId]=[n];break;case"selected":Me(e,"mnfExcluded",e.mnfExcluded,t.facetId,t),e.mnf??(e.mnf={}),e.mnf[t.facetId]=[n];break;default:break}},Bk=(e,t)=>{e.page=void 0,Me(e,"dfExcluded",e.dfExcluded,t.facetId,t.selection);let{numberOfResults:r,...n}=t.selection;switch(t.selection.state){case"selected":Me(e,"df",e.df,t.facetId,t.selection);break;case"excluded":case"idle":e.df??(e.df={}),e.df[t.facetId]=[...e.df[t.facetId]??[],n];break;default:break}},_k=(e,t)=>{e.page=void 0,Me(e,"df",e.df,t.facetId,t.selection);let{numberOfResults:r,...n}=t.selection;switch(t.selection.state){case"excluded":Me(e,"dfExcluded",e.dfExcluded,t.facetId,t.selection);break;case"selected":case"idle":e.dfExcluded??(e.dfExcluded={}),e.dfExcluded[t.facetId]=[...e.dfExcluded[t.facetId]??[],n];break;default:break}},$k=(e,t)=>{switch(e.page=void 0,t.selection.state){case"selected":Wn(e,"lf",e.lf,t.facetId,t.selection.value);break;case"excluded":case"idle":e.lf??(e.lf={}),e.lf[t.facetId]=[...e.lf[t.facetId]??[],t.selection.value];break}},Wn=(e,t,r,n,o)=>{r!==void 0&&r[n]!==void 0&&(r[n]=r[n].filter(a=>a!==o),r[n].length===0&&delete r[n],Object.keys(r).length===0&&(e[t]=void 0))},Me=(e,t,r,n,o)=>{if(r!==void 0&&r[n]!==void 0){let a=r[n].filter(d=>d.start!==o.start||d.end!==o.end||d.endInclusive!==o.endInclusive);r[n]=a,r[n].length===0&&delete r[n],Object.keys(r).length===0&&(e[t]=void 0)}};l();s();u();c();l();s();u();c();var zk=Object.getOwnPropertyNames,Hk=Object.getOwnPropertySymbols,Gk=Object.prototype.hasOwnProperty;function FR(e,t){return function(n,o,a){return e(n,o,a)&&t(n,o,a)}}function ll(e){return function(r,n,o){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,o);var a=o.cache,d=a.get(r),m=a.get(n);if(d&&m)return d===n&&m===r;a.set(r,n),a.set(n,r);var f=e(r,n,o);return a.delete(r),a.delete(n),f}}function PR(e){return zk(e).concat(Hk(e))}var Wk=Object.hasOwn||function(e,t){return Gk.call(e,t)};function Kn(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Kk="__v",Yk="__o",Jk="_owner",bR=Object.getOwnPropertyDescriptor,wR=Object.keys;function Xk(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Zk(e,t){return Kn(e.getTime(),t.getTime())}function ej(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function tj(e,t){return e===t}function IR(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var o=new Array(n),a=e.entries(),d,m,f=0;(d=a.next())&&!d.done;){for(var p=t.entries(),g=!1,C=0;(m=p.next())&&!m.done;){if(o[C]){C++;continue}var v=d.value,x=m.value;if(r.equals(v[0],x[0],f,C,e,t,r)&&r.equals(v[1],x[1],v[0],x[0],e,t,r)){g=o[C]=!0;break}C++}if(!g)return!1;f++}return!0}var rj=Kn;function nj(e,t,r){var n=wR(e),o=n.length;if(wR(t).length!==o)return!1;for(;o-- >0;)if(!OR(e,t,r,n[o]))return!1;return!0}function Yi(e,t,r){var n=PR(e),o=n.length;if(PR(t).length!==o)return!1;for(var a,d,m;o-- >0;)if(a=n[o],!OR(e,t,r,a)||(d=bR(e,a),m=bR(t,a),(d||m)&&(!d||!m||d.configurable!==m.configurable||d.enumerable!==m.enumerable||d.writable!==m.writable)))return!1;return!0}function oj(e,t){return Kn(e.valueOf(),t.valueOf())}function aj(e,t){return e.source===t.source&&e.flags===t.flags}function ER(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var o=new Array(n),a=e.values(),d,m;(d=a.next())&&!d.done;){for(var f=t.values(),p=!1,g=0;(m=f.next())&&!m.done;){if(!o[g]&&r.equals(d.value,m.value,d.value,m.value,e,t,r)){p=o[g]=!0;break}g++}if(!p)return!1}return!0}function ij(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function sj(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function OR(e,t,r,n){return(n===Jk||n===Yk||n===Kk)&&(e.$$typeof||t.$$typeof)?!0:Wk(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var cj="[object Arguments]",uj="[object Boolean]",lj="[object Date]",dj="[object Error]",mj="[object Map]",pj="[object Number]",fj="[object Object]",gj="[object RegExp]",yj="[object Set]",hj="[object String]",Sj="[object URL]",Cj=Array.isArray,qR=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,TR=Object.assign,xj=Object.prototype.toString.call.bind(Object.prototype.toString);function vj(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,o=e.areFunctionsEqual,a=e.areMapsEqual,d=e.areNumbersEqual,m=e.areObjectsEqual,f=e.arePrimitiveWrappersEqual,p=e.areRegExpsEqual,g=e.areSetsEqual,C=e.areTypedArraysEqual,v=e.areUrlsEqual;return function(R,F,w){if(R===F)return!0;if(R==null||F==null)return!1;var P=typeof R;if(P!==typeof F)return!1;if(P!=="object")return P==="number"?d(R,F,w):P==="function"?o(R,F,w):!1;var q=R.constructor;if(q!==F.constructor)return!1;if(q===Object)return m(R,F,w);if(Cj(R))return t(R,F,w);if(qR!=null&&qR(R))return C(R,F,w);if(q===Date)return r(R,F,w);if(q===RegExp)return p(R,F,w);if(q===Map)return a(R,F,w);if(q===Set)return g(R,F,w);var b=xj(R);return b===lj?r(R,F,w):b===gj?p(R,F,w):b===mj?a(R,F,w):b===yj?g(R,F,w):b===fj?typeof R.then!="function"&&typeof F.then!="function"&&m(R,F,w):b===Sj?v(R,F,w):b===dj?n(R,F,w):b===cj?m(R,F,w):b===uj||b===pj||b===hj?f(R,F,w):!1}}function Rj(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,o={areArraysEqual:n?Yi:Xk,areDatesEqual:Zk,areErrorsEqual:ej,areFunctionsEqual:tj,areMapsEqual:n?FR(IR,Yi):IR,areNumbersEqual:rj,areObjectsEqual:n?Yi:nj,arePrimitiveWrappersEqual:oj,areRegExpsEqual:aj,areSetsEqual:n?FR(ER,Yi):ER,areTypedArraysEqual:n?Yi:ij,areUrlsEqual:sj};if(r&&(o=TR({},o,r(o))),t){var a=ll(o.areArraysEqual),d=ll(o.areMapsEqual),m=ll(o.areObjectsEqual),f=ll(o.areSetsEqual);o=TR({},o,{areArraysEqual:a,areMapsEqual:d,areObjectsEqual:m,areSetsEqual:f})}return o}function Aj(e){return function(t,r,n,o,a,d,m){return e(t,r,m)}}function Fj(e){var t=e.circular,r=e.comparator,n=e.createState,o=e.equals,a=e.strict;if(n)return function(f,p){var g=n(),C=g.cache,v=C===void 0?t?new WeakMap:void 0:C,x=g.meta;return r(f,p,{cache:v,equals:o,meta:x,strict:a})};if(t)return function(f,p){return r(f,p,{cache:new WeakMap,equals:o,meta:void 0,strict:a})};var d={cache:void 0,equals:o,meta:void 0,strict:a};return function(f,p){return r(f,p,d)}}var $je=sr(),zje=sr({strict:!0}),Hje=sr({circular:!0}),Gje=sr({circular:!0,strict:!0}),Wje=sr({createInternalComparator:function(){return Kn}}),Kje=sr({strict:!0,createInternalComparator:function(){return Kn}}),Yje=sr({circular:!0,createInternalComparator:function(){return Kn}}),Jje=sr({circular:!0,createInternalComparator:function(){return Kn},strict:!0});function sr(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,o=e.createState,a=e.strict,d=a===void 0?!1:a,m=Rj(e),f=vj(m),p=n?n(f):Aj(f);return Fj({circular:r,comparator:f,createState:o,equals:p,strict:d})}function kR(e,t,r=(n,o)=>n===o){return e.length===t.length&&e.findIndex((n,o)=>!r(t[o],n))===-1}function Pj(e,t){return e.length!==t.length?!1:e.every(r=>t.findIndex(n=>Yn(r,n))!==-1)}var Yn=sr({createCustomConfig:e=>({...e,areArraysEqual:Pj})});var bj=e=>new pe({parameters:new L({options:{required:!0},values:e})});function jR(e,t){if(t.excludeDefaultParameters&&!wj(e))throw ne;let r=a=>a.commerceParameters,{dispatch:n}=e,o=ie(e);return t.initialState&&(Ge(e,bj(t.parametersDefinition),t.initialState,"buildCoreParameterManager"),n(t.restoreActionCreator(t.initialState.parameters))),{...o,synchronize(a){let d=t.activeParametersSelector(e[K]);Object.keys(a).length>0&&Yn(d,a)||(n(t.restoreActionCreator(a)),n(t.fetchProductsActionCreator()))},get state(){return{parameters:t.excludeDefaultParameters?r(e[K]):t.activeParametersSelector(e[K])}}}}function wj(e){return e.addReducers({commerceParameters:AR}),!0}l();s();u();c();var VR=(e,t)=>{let r=ie(e),{options:{numberOfProductsSelector:n,responseIdSelector:o,isLoadingSelector:a,errorSelector:d,pageSelector:m,perPageSelector:f,totalEntriesSelector:p,enrichSummary:g}}=t,C=()=>e[K],v=()=>m(C()),x=()=>f(C()),R=()=>p(C()),F=()=>!!o(C()),w=()=>F()&&R()>0,P=()=>w()?v()*x()+1:0,q=()=>w()?P()+(n(C())-1):0;return{...r,get state(){return{firstRequestExecuted:F(),firstProduct:P(),lastProduct:q(),totalNumberOfProducts:R(),hasProducts:w(),isLoading:a(C()),hasError:d(C())!==null,...g?g(C()):{}}}}};l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Tj=new W({min:1,default:8,required:!1}),Oj=new W({min:1,max:20,default:5,required:!1}),kj={desiredCount:Oj,numberOfValues:Tj},nDe=A("automaticFacet/setOptions",e=>I(e,kj)),oDe=A("automaticFacet/deselectAll",e=>I(e,le)),jj=N,DR=A("automaticFacet/toggleSelectValue",e=>I(e,{field:jj,selection:new L({values:Xt})}));var bDe=Z(zr(),e=>{e.addCase(ph,(t,r)=>{let n=Vp(t),o=r.payload;t.defaultNumberOfResults=t.numberOfResults=o,t.firstResult=Ji(n,o)}).addCase(fh,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(Iu,t=>{t.firstResult=0}).addCase(gh,(t,r)=>{let n=r.payload;t.firstResult=Ji(n,t.numberOfResults)}).addCase(gc,(t,r)=>{let n=r.payload;t.firstResult=Ji(n,t.numberOfResults)}).addCase(hh,t=>{let r=Vp(t),n=Math.max(r-1,1);t.firstResult=Ji(n,t.numberOfResults)}).addCase(yh,t=>{let r=Vp(t),n=Vj(t),o=Math.min(r+1,n);t.firstResult=Ji(o,t.numberOfResults)}).addCase(De.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase($e,(t,r)=>{t.firstResult=r.payload.firstResult??t.firstResult,t.numberOfResults=r.payload.numberOfResults??t.defaultNumberOfResults}).addCase(Se.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase($o.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase(st,t=>{et(t)}).addCase(Go,t=>{et(t)}).addCase(Qc,t=>{et(t)}).addCase(Ko,t=>{et(t)}).addCase(Vt,t=>{et(t)}).addCase(Lc,t=>{et(t)}).addCase(kv,t=>{et(t)}).addCase(Ov,t=>{et(t)}).addCase(St,t=>{et(t)}).addCase(Ho,t=>{et(t)}).addCase(Wo,t=>{et(t)}).addCase(Ht,t=>{et(t)}).addCase(Yc,t=>{et(t)}).addCase(Xc,t=>{et(t)}).addCase(mt,t=>{et(t)}).addCase(DR,t=>{et(t)})});function et(e){e.firstResult=zr().firstResult}function Vp(e){let{firstResult:t,numberOfResults:r}=e;return MR(t,r)}function Vj(e){let{totalCountFiltered:t,numberOfResults:r}=e;return LR(t,r)}function Ji(e,t){return(e-1)*t}function MR(e,t){return Math.round(e/t)+1}function LR(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}l();s();u();c();l();s();u();c();var VNe=new pe({parameters:new L({options:{required:!0},values:Oc})});var QR=new pe({fragment:new V});function UR(e,t){let r;function n(){r=t.requestIdSelector(e[K])}function o(){return r!==t.requestIdSelector(e[K])}Ge(e,QR,t.initialState,"buildUrlManager");let a=ie(e),d=t.initialState.fragment;n();let m=t.parameterManagerBuilder(e,{initialState:{parameters:t.serializer.deserialize(d)},excludeDefaultParameters:t.excludeDefaultParameters??!1});return{...a,subscribe(f){let p=()=>{let g=this.state.fragment;!Nj(t.serializer.deserialize,d,g)&&o()&&(d=g,f()),n()};return p(),e.subscribe(p)},get state(){return{fragment:t.serializer.serialize(m.state.parameters)}},synchronize(f){d=f;let p=t.serializer.deserialize(f);m.synchronize(p)}}}function Nj(e,t,r){if(t===r)return!0;let n=e(t),o=e(r);return Yn(n,o)}function BR(e,t){return{...$R(e,{...t,facetSearchType:"SEARCH"}),didYouMean(){return lR(e)}}}function _R(e,t){return{...$R(e,{...t,facetSearchType:"LISTING"})}}function $R(e,t){let{fetchProductsActionCreator:r,facetResponseSelector:n,isFacetLoadingResponseSelector:o,requestIdSelector:a,serializer:d,parametersDefinition:m,activeParametersSelector:f,restoreActionCreator:p,facetSearchType:g,responseIdSelector:C}=t;return{...Dp(e,t),sort(v){return wv(e,{...v,fetchProductsActionCreator:r})},facetGenerator(){let v={fetchProductsActionCreator:r,facetResponseSelector:n,isFacetLoadingResponseSelector:o,facetSearch:{type:g}};return fR(e,{buildRegularFacet:(x,R)=>CR(e,{...R,...v}),buildNumericFacet:(x,R)=>hR(e,{...R,...v}),buildDateFacet:(x,R)=>bv(e,{...R,...v}),buildCategoryFacet:(x,R)=>pR(e,{...R,...v}),buildLocationFacet:(x,R)=>gR(e,{...R,...v}),fetchProductsActionCreator:r})},breadcrumbManager(){return dR(e,{facetResponseSelector:n,fetchProductsActionCreator:r})},urlManager(v){return UR(e,{...v,requestIdSelector:a,parameterManagerBuilder:(x,R)=>this.parameterManager(R),serializer:d})},parameterManager(v){return jR(e,{...v,parametersDefinition:m,activeParametersSelector:f,restoreActionCreator:p,fetchProductsActionCreator:r})},interactiveSpotlightContent(v){return xR(e,{...v,responseIdSelector:C})}}}function Dp(e,t){let{responseIdSelector:r,isLoadingSelector:n,errorSelector:o,numberOfProductsSelector:a,fetchProductsActionCreator:d,fetchMoreProductsActionCreator:m,slotId:f,pageSelector:p,perPageSelector:g,totalEntriesSelector:C,enrichSummary:v}=t;return{interactiveProduct(x){return ul(e,{...x,responseIdSelector:r})},pagination(x){return vR(e,{...x,options:{...x?.options,slotId:f},fetchProductsActionCreator:d,fetchMoreProductsActionCreator:m})},summary(){return VR(e,{options:{responseIdSelector:r,isLoadingSelector:n,errorSelector:o,numberOfProductsSelector:a,pageSelector:p,perPageSelector:g,totalEntriesSelector:C,enrichSummary:v}})}}}l();s();u();c();var zR=re((e,t)=>({state:e,facetId:t}),({state:e,facetId:t})=>{let r=e.productListing.facets.find(n=>n.facetId===t);if(r&&r.facetId in e.commerceFacetSet)return r}),HR=re(e=>({state:e}),({state:e})=>e.productListing.isLoading);function GR(e,{enableResults:t=!1}={enableResults:!1}){if(!Mj(e))throw ne;let r=ie(e),{dispatch:n}=e,o=()=>e[K],a=_R(e,{responseIdSelector:Wa,fetchProductsActionCreator:()=>Ae({enableResults:t}),fetchMoreProductsActionCreator:()=>Jr({enableResults:t}),facetResponseSelector:zR,isFacetLoadingResponseSelector:HR,requestIdSelector:Zf,serializer:nl,parametersDefinition:Jo,activeParametersSelector:vs,restoreActionCreator:Je,isLoadingSelector:tg,errorSelector:rg,pageSelector:xs,perPageSelector:wr,totalEntriesSelector:Ir,numberOfProductsSelector:Ka});return{...r,...a,get state(){let{products:d,results:m,error:f,isLoading:p,responseId:g}=o().productListing;return{products:d,results:m,error:f,isLoading:p,responseId:g}},promoteChildToParent(d){n(Yo({child:d}))},refresh:()=>n(Ae({enableResults:t})),executeFirstRequest(){Wa(o())===""&&n(Ae({enableResults:t}))}}}function Mj(e){return e.addReducers({productListing:ra,commerceContext:_t,configuration:Ze}),!0}l();s();u();c();function WR(e){return{view:t=>{e.dispatch(Vu(t))}}}l();s();u();c();var Lj={queries:[]},Qj={maxLength:10,clearFilters:!0},Uj=new pe({queries:new ae({required:!0})}),Bj=new pe({maxLength:new W({required:!0,min:1}),clearFilters:new X});function _j(e,t){nt(e,Bj,t?.options,"buildRecentQueriesList"),Ge(e,Uj,t?.initialState,"buildRecentQueriesList")}function KR(e,t){if(!$j(e))throw ne;let r=ie(e),{dispatch:n}=e,o=()=>e[K],a={...Qj,...t?.options},d={...Lj,...t?.initialState};_j(e,{options:a,initialState:d});let m={queries:d.queries,maxLength:a.maxLength};return n(Wi(m)),{...r,get state(){let f=o();return{...f.recentQueries,analyticsEnabled:f.configuration.analytics.enabled}},clear(){n(Bu())},updateRecentQueries(f){let p=new ae({required:!0,each:new V({required:!0}),min:1}).validate(f);if(p)throw new Error(p);n(Wi({queries:f,maxLength:a.maxLength}))},executeRecentQuery(f){let p=new W({required:!0,min:0,max:this.state.queries.length}).validate(f);if(p)throw new Error(p);let g={query:this.state.queries[f],clearFilters:a.clearFilters};n(wo(g)),n(ue())}}}function $j(e){return e.addReducers({search:rr,recentQueries:_u}),!0}l();s();u();c();function YR(e,t){if(!zj(e))throw ne;Ge(e,PS,t.options,"buildRecommendations");let r=ie(e),{dispatch:n}=e,{slotId:o,productId:a}=t.options;n(ea({slotId:o,productId:a}));let d=f=>f.recommendations[o],m=Dp(e,{slotId:o,responseIdSelector:f=>f.recommendations[o].responseId,fetchProductsActionCreator:()=>Nt({slotId:o}),fetchMoreProductsActionCreator:()=>en({slotId:o}),isLoadingSelector:f=>wS(f,o),errorSelector:f=>f.recommendations[o].error,pageSelector:f=>Xf(f,o),perPageSelector:f=>Ss(f,o),totalEntriesSelector:f=>Cs(f,o),numberOfProductsSelector:f=>qi(f,o)});return{...r,...m,promoteChildToParent(f){n(ta({child:f,slotId:o}))},get state(){return d(e[K])},refresh:()=>n(Nt({slotId:o,productId:a}))}}function zj(e){return e.addReducers({recommendations:na}),!0}l();s();u();c();function JR(e,{enableResults:t=!1}={enableResults:!1}){if(!Hj(e))throw ne;let r=ie(e),{dispatch:n}=e,o=()=>e[K],a=BR(e,{responseIdSelector:Ja,fetchProductsActionCreator:()=>ue({enableResults:t}),fetchMoreProductsActionCreator:()=>Mr({enableResults:t}),facetResponseSelector:Fa,isFacetLoadingResponseSelector:Pa,requestIdSelector:cg,serializer:dn,parametersDefinition:Zc,restoreActionCreator:ke,activeParametersSelector:pg,isLoadingSelector:lg,errorSelector:dg,pageSelector:xs,perPageSelector:wr,totalEntriesSelector:Ir,numberOfProductsSelector:Xa,enrichSummary:fg});return{...r,...a,get state(){let{products:d,results:m,error:f,isLoading:p,responseId:g}=o().commerceSearch;return{products:d,results:m,error:f,isLoading:p,responseId:g}},promoteChildToParent(d){n(Eo({child:d}))},executeFirstSearch(){Ja(o())===""&&n(ue({enableResults:t}))}}}function Hj(e){return e.addReducers({commerceContext:_t,configuration:Ze,commerceSearch:rr,commerceQuery:Ne}),!0}l();s();u();c();l();s();u();c();l();s();u();c();var Gj=Z(Ye(),e=>e.addCase(hr,(t,r)=>({...t,...r.payload})).addCase(Bo,(t,r)=>{t.q=r.payload}).addCase(Hi,(t,r)=>{t.q=r.payload.expression}).addCase(De.fulfilled,(t,r)=>r.payload?.query??t).addCase($e,(t,r)=>{t.q=r.payload.q??t.q,t.enableQuerySyntax=r.payload.enableQuerySyntax??t.enableQuerySyntax}));l();s();u();c();l();s();u();c();var Np={open:new V,close:new V},Mp={id:N,numberOfSuggestions:new W({min:0}),enableQuerySyntax:new X,highlightOptions:new L({values:{notMatchDelimiters:new L({values:Np}),exactMatchDelimiters:new L({values:Np}),correctionDelimiters:new L({values:Np})}}),clearFilters:new X},Wj=new pe(Mp);function XR(e,t){return e?e.completions.map(r=>({highlightedValue:Xl(r.highlighted,t),rawValue:r.expression})):[]}l();s();u();c();var dl={clearFilters:!0,enableResults:!1},{id:Kj,highlightOptions:Yj,clearFilters:Jj}=Mp,Lp={id:Kj,highlightOptions:Yj,clearFilters:Jj,enableResults:new X},ZR=new pe(Lp);function ml(e,t={}){if(!Xj(e))throw ne;let r=ie(e),{dispatch:n}=e,o=()=>e[K],a=t.options?.id||vn("search_box"),d={id:a,highlightOptions:{...t.options?.highlightOptions},...dl,...t.options};nt(e,ZR,d,"buildSearchBox"),n(xa({id:a,query:o().commerceQuery.query??""})),n(Xo({id:a}));let m=()=>o().querySet[d.id],f=async()=>{let p={query:m(),clearFilters:d.clearFilters};n(wo(p)),n(ue({enableResults:d.enableResults}))};return{...r,updateText(p){n($n({id:a,query:p})),this.showSuggestions()},clear(){n($n({id:a,query:""})),n(Xr({id:a}))},showSuggestions(){n(Xe({id:a}))},selectSuggestion(p){n(Zt({id:a,expression:p})),f().then(()=>{n(Xr({id:a}))})},submit(){f(),n(Xr({id:a}))},get state(){let p=o().querySuggest[d.id],g=XR(p,d.highlightOptions),C=p?p.isLoading:!1;return{searchBoxId:a,value:m(),suggestions:g,isLoading:o().commerceSearch.isLoading,isLoadingSuggestions:C}}}}function Xj(e){return e.addReducers({commerceQuery:Ne,querySuggest:Hn,configuration:Ze,querySet:zn,commerceSearch:rr}),!0}l();s();u();c();l();s();u();c();l();s();u();c();function eA(){return{}}var rA=Z(eA(),e=>e.addCase(va,(t,r)=>{let{id:n,redirectionUrl:o,overwrite:a}=r.payload;!a&&n in t||(t[n]=tA(o))}).addCase(Ra,(t,r)=>{let{id:n,redirectionUrl:o}=r.payload,a=t[n];a&&(a.defaultRedirectionUrl=o)}).addCase(Aa,(t,r)=>{let{id:n}=r.payload,o=t[n];if(o){t[n]=tA(o.defaultRedirectionUrl);return}}).addCase(ln.pending,(t,r)=>{let n=t[r.meta.arg.id];n&&(n.isLoading=!0)}).addCase(ln.fulfilled,(t,r)=>{let n=r.payload,o=t[r.meta.arg.id];o&&(o.redirectTo=n||o.defaultRedirectionUrl,o.isLoading=!1)}).addCase(ln.rejected,(t,r)=>{let n=t[r.meta.arg.id];n&&(n.isLoading=!1)}));function tA(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1}}l();s();u();c();var nA=new pe({...Lp,redirectionUrl:new V({required:!0,emptyAllowed:!1}),overwrite:new X({required:!1})});function oA(e,t){if(!Zj(e))throw ne;let{dispatch:r}=e,n=()=>e[K],o=t.options.id||vn("standalone_search_box"),a={id:o,highlightOptions:{...t.options.highlightOptions},...dl,overwrite:!1,...t.options};nt(e,nA,a,"buildStandaloneSearchBox");let d=ml(e,{options:a});return r(va({id:o,redirectionUrl:a.redirectionUrl,overwrite:a.overwrite})),{...d,updateText(m){d.updateText(m)},selectSuggestion(m){r(Zt({id:o,expression:m})),this.submit()},afterRedirection(){r(Aa({id:o}))},updateRedirectUrl(m){r(Ra({id:o,redirectionUrl:m}))},submit(){r(Te({query:this.state.value})),r(ln({id:o}))},get state(){let f=n().commerceStandaloneSearchBoxSet[o];return{...d.state,redirectTo:f.redirectTo}}}}function Zj(e){return e.addReducers({commerceQuery:Ne,commerceStandaloneSearchBoxSet:rA,configuration:Ze,querySuggest:Hn}),!0}l();s();u();c();function aA(e){if(!eV(e))throw ne;let t=ie(e),r=()=>e[K],n=r().triggers.notifications;return{...t,subscribe(o){let a=()=>{let d=!kR(n,this.state.notifications);n=this.state.notifications,d&&o()};return a(),e.subscribe(a)},get state(){return{notifications:r().triggers.notifications}}}}function eV(e){return e.addReducers({triggers:or}),!0}l();s();u();c();function iA(e,{enableResults:t=!1}={enableResults:!1}){if(!tV(e))throw ne;let r=ie(e),{dispatch:n}=e,o=()=>e[K],a=()=>o().triggers.queryModification.newQuery,d=()=>o().triggers.queryModification.originalQuery;return{...r,get state(){return{newQuery:a(),originalQuery:d(),wasQueryModified:a()!==""}},undo(){n(Nr({q:a()})),n(Te({query:d()})),n(ue({enableResults:t}))}}}function tV(e){return e.addReducers({triggers:or,query:Ne}),!0}l();s();u();c();function sA(e){if(!rV(e))throw ne;let t=ie(e),r=()=>e[K],n=r().triggers.redirectTo;return{...t,subscribe(o){let a=()=>{let d=n!==this.state.redirectTo;n=this.state.redirectTo,d&&this.state.redirectTo&&o()};return a(),e.subscribe(a)},get state(){return{redirectTo:r().triggers.redirectTo}}}}function rV(e){return e.addReducers({triggers:or}),!0}l();s();u();c();var pl=(e,t)=>{let r=e;return ee(r[t])?ee(e.additionalFields[t])?null:e.additionalFields[t]:r[t]},nV=e=>t=>e.every(r=>!ee(pl(t,r))),oV=e=>t=>e.every(r=>ee(pl(t,r))),aV=(e,t)=>r=>{let n=cA(e,r);return t.some(o=>n.some(a=>`${a}`.toLowerCase()===o.toLowerCase()))},iV=(e,t)=>r=>{let n=cA(e,r);return t.every(o=>n.every(a=>`${a}`.toLowerCase()!==o.toLowerCase()))},cA=(e,t)=>{let r=pl(t,e);return ts(r)?r:[r]},uA={getProductProperty:pl,fieldsMustBeDefined:nV,fieldsMustNotBeDefined:oV,fieldMustMatch:aV,fieldMustNotMatch:iV};l();s();u();c();l();s();u();c();var sV=new pe({content:new ve({required:!0}),conditions:new ve({required:!0}),priority:new W({required:!1,default:0,min:0}),fields:new ae({required:!1,each:N})});function lA(){let e=[],t=r=>{let n=sV.validate(r);if(!r.conditions.every(a=>a instanceof Function))throw new Va("Each template condition should be a function that takes a Result or Product as an argument and returns a boolean");return n};return{registerTemplates(...r){r.forEach(n=>{let o={...t(n),fields:n.fields||[]};e.push(o)}),e.sort((n,o)=>o.priority-n.priority)},selectTemplate(r){let n=e.find(o=>o.conditions.every(a=>a(r)));return n?n.content:null},selectLinkTemplate(r){let n=e.find(o=>o.conditions.every(a=>a(r)));return n?n.linkContent:null}}}function dA(){return lA()}
/**
 * @license
 *
 * Copyright 2026 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

if(__exports != exports)module.exports = exports;return module.exports}));
//# sourceMappingURL=headless.js.map
