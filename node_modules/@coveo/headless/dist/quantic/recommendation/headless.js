/**
 * @license
 *
 * Copyright 2026 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(g,f){if(typeof exports=="object"&&typeof module<"u"){module.exports=f(require)}else if("function"==typeof define && define.amd){define("CoveoHeadlessRecommendation",["crypto"],function(_d_0){var d={"crypto": _d_0},r=function(m){if(m in d) return d[m];if(typeof require=="function") return require(m);throw new Error("Cannot find module '"+m+"'")};return f(r)})}else {var gN={"crypto":"crypto"},gReq=function(r){var mod = r in gN ? g[gN[r]] : g[r]; return mod };g["CoveoHeadlessRecommendation"]=f(gReq)}}(typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : this,function(require){var exports={};var __exports=exports;var module={exports};
"use strict";var Mm=Object.create;var Zr=Object.defineProperty;var Nm=Object.getOwnPropertyDescriptor;var _m=Object.getOwnPropertyNames;var Vm=Object.getPrototypeOf,Um=Object.prototype.hasOwnProperty;var Lm=(e,t,r)=>t in e?Zr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var en=(e,t)=>()=>(e&&(t=e(e=0)),t);var ve=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Oc=(e,t)=>{for(var r in t)Zr(e,r,{get:t[r],enumerable:!0})},Tc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of _m(t))!Um.call(e,o)&&o!==r&&Zr(e,o,{get:()=>t[o],enumerable:!(n=Nm(t,o))||n.enumerable});return e};var $e=(e,t,r)=>(r=e!=null?Mm(Vm(e)):{},Tc(t||!e||!e.__esModule?Zr(r,"default",{value:e,enumerable:!0}):r,e)),Qm=e=>Tc(Zr({},"__esModule",{value:!0}),e);var ue=(e,t,r)=>Lm(e,typeof t!="symbol"?t+"":t,r);var A,c=en(()=>{"use strict";A=typeof globalThis<"u"?globalThis:window});function Yn(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yn=function(t){return typeof t}:Yn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yn(e)}function Hm(){"navigator"in this||(this.navigator={}),typeof this.navigator.sendBeacon!="function"&&(this.navigator.sendBeacon=Gm.bind(this))}function Gm(e,t){var r=this.event&&this.event.type,n=r==="unload"||r==="beforeunload",o="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("POST",e,!n),o.withCredentials=!0,o.setRequestHeader("Accept","*/*"),Bm(t)?(o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.responseType="text"):$m(t)&&t.type&&o.setRequestHeader("Content-Type",t.type);try{o.send(t)}catch{return!1}return!0}var Bm,$m,u=en(()=>{"use strict";Bm=function(t){return typeof t=="string"},$m=function(t){return t instanceof Blob};Hm.call((typeof window>"u"?"undefined":Yn(window))==="object"?window:{})});var sa=ve(tn=>{"use strict";d();c();l();u();Object.defineProperty(tn,"__esModule",{value:!0});function Dc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function zm(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wm(e,t,r){return t=er(t),Ym(e,Nc()?Reflect.construct(t,r||[],er(e).constructor):t.apply(e,r))}function oa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eg(n.key),n)}}function ia(e,t,r){return t&&qc(e.prototype,t),r&&qc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jc(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=tg(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,a=!0,m=!1;return{s:function(){r=r.call(e)},n:function(){var f=r.next();return a=f.done,f},e:function(f){m=!0,i=f},f:function(){try{a||r.return==null||r.return()}finally{if(m)throw i}}}}function ra(){return ra=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Jm(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ra.apply(null,arguments)}function er(e){return er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},er(e)}function Km(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&na(e,t)}function Nc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nc=function(){return!!e})()}function Ym(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zm(e)}function na(e,t){return na=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},na(e,t)}function Jm(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=er(e))!==null;);return e}function Xm(e,t,r,n){var o=ra(er(1&n?e.prototype:e),t,r);return 2&n&&typeof o=="function"?function(i){return o.apply(r,i)}:o}function Zm(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eg(e){var t=Zm(e,"string");return typeof t=="symbol"?t:t+""}function tg(e,t){if(e){if(typeof e=="string")return Dc(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dc(e,t):void 0}}(function(e){return{NativeAbortSignal:e.AbortSignal,NativeAbortController:e.AbortController}})(typeof self<"u"?self:global);function rg(e){var t;try{t=new Event("abort")}catch{typeof document<"u"?document.createEvent?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):(t=document.createEventObject(),t.type="abort"):t={type:"abort",bubbles:!1,cancelable:!1}}return t.reason=e,t}function ng(e){if(e===void 0)if(typeof document>"u")e=new Error("This operation was aborted"),e.name="AbortError";else try{e=new DOMException("signal is aborted without reason"),Object.defineProperty(e,"name",{value:"AbortError"})}catch{e=new Error("This operation was aborted"),e.name="AbortError"}return e}var Mc=function(){function e(){oa(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return ia(e,[{key:"addEventListener",value:function(r,n,o){r in this.listeners||(this.listeners[r]=[]),this.listeners[r].push({callback:n,options:o})}},{key:"removeEventListener",value:function(r,n){if(r in this.listeners){for(var o=this.listeners[r],i=0,a=o.length;i<a;i++)if(o[i].callback===n){o.splice(i,1);return}}}},{key:"dispatchEvent",value:function(r){var n=this;if(r.type in this.listeners){for(var o=this.listeners[r.type],i=o.slice(),a=function(){var g=i[m];try{g.callback.call(n,r)}catch(h){Promise.resolve().then(function(){throw h})}g.options&&g.options.once&&n.removeEventListener(r.type,g.callback)},m=0,f=i.length;m<f;m++)a();return!r.defaultPrevented}}}])}(),aa=function(e){function t(){var r;return oa(this,t),r=Wm(this,t),r.listeners||Mc.call(r),Object.defineProperty(r,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(r,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(r,"reason",{value:void 0,writable:!0,configurable:!0}),r}return Km(t,e),ia(t,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(n){n.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,n)),Xm(t,"dispatchEvent",this,3)([n])}},{key:"throwIfAborted",value:function(){var n=this.aborted,o=this.reason,i=o===void 0?"Aborted":o;if(n)throw i}}],[{key:"timeout",value:function(n){var o=new Jn;return setTimeout(function(){return o.abort(new DOMException("This signal is timeout in ".concat(n,"ms"),"TimeoutError"))},n),o.signal}},{key:"any",value:function(n){var o=new Jn;function i(){o.abort(this.reason),a()}function a(){var g=jc(n),h;try{for(g.s();!(h=g.n()).done;){var S=h.value;S.removeEventListener("abort",i)}}catch(y){g.e(y)}finally{g.f()}}var m=jc(n),f;try{for(m.s();!(f=m.n()).done;){var p=f.value;if(p.aborted){o.abort(p.reason);break}else p.addEventListener("abort",i)}}catch(g){m.e(g)}finally{m.f()}return o.signal}}])}(Mc),Jn=function(){function e(){oa(this,e),Object.defineProperty(this,"signal",{value:new aa,writable:!0,configurable:!0})}return ia(e,[{key:"abort",value:function(r){var n=ng(r),o=rg(n);this.signal.reason=n,this.signal.dispatchEvent(o)}},{key:"toString",value:function(){return"[object AbortController]"}}])}();typeof Symbol<"u"&&Symbol.toStringTag&&(Jn.prototype[Symbol.toStringTag]="AbortController",aa.prototype[Symbol.toStringTag]="AbortSignal");function og(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof e.Request=="function"&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}function ig(e){typeof e=="function"&&(e={fetch:e});var t=e,r=t.fetch,n=t.Request,o=n===void 0?r.Request:n,i=t.AbortController,a=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,m=a===void 0?!1:a;if(!og({fetch:r,Request:o,AbortController:i,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:m}))return{fetch:r,Request:f};var f=o;(f&&!f.prototype.hasOwnProperty("signal")||m)&&(f=function(S,y){var v;y&&y.signal&&(v=y.signal,delete y.signal);var R=new o(S,y);return v&&Object.defineProperty(R,"signal",{writable:!1,enumerable:!1,configurable:!0,value:v}),R},f.prototype=o.prototype);var p=r,g=function(S,y){var v=f&&f.prototype.isPrototypeOf(S)?S.signal:y?y.signal:void 0;if(v){var R;try{R=new DOMException("Aborted","AbortError")}catch{R=new Error("Aborted"),R.name="AbortError"}if(v.aborted)return Promise.reject(R);var I=new Promise(function(C,P){v.addEventListener("abort",function(){return P(R)},{once:!0})});return y&&y.signal&&delete y.signal,Promise.race([I,p(S,y)])}return p(S,y)};return{fetch:g,Request:f}}tn.AbortController=Jn;tn.AbortSignal=aa;tn.abortableFetch=ig});var _c,s,w,l=en(()=>{"use strict";_c=$e(sa(),1),s=$e(sa(),1),{fetch:w}=(0,_c.abortableFetch)({fetch})});function rn(e){if(gg.test(e)||e.trim()==="")throw new TypeError("Invalid character in header field name");return e.trim().toLowerCase()}function ca(e){return e.replace(yg,"")}function nn(e){if(typeof e!="string"||e.length===0)return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r>127||!hg(r))return!1}return!0}function hg(e){return![127,32,"(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"].includes(e)}function Uc(e){if(typeof e!="string"||e.trim()!==e)return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r===0||r===10||r===13)return!1}return!0}var ag,Hc,sg,Gc,cg,ug,lg,dg,pg,fg,mg,gg,Vc,yg,tr,ua,Lc,Qc,Bc,$c,b,Wc=en(()=>{"use strict";d();c();l();u();ag=Object.create,Hc=Object.defineProperty,sg=Object.getOwnPropertyDescriptor,Gc=Object.getOwnPropertyNames,cg=Object.getPrototypeOf,ug=Object.prototype.hasOwnProperty,lg=(e,t)=>function(){return t||(0,e[Gc(e)[0]])((t={exports:{}}).exports,t),t.exports},dg=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Gc(t))!ug.call(e,o)&&o!==r&&Hc(e,o,{get:()=>t[o],enumerable:!(n=sg(t,o))||n.enumerable});return e},pg=(e,t,r)=>(r=e!=null?ag(cg(e)):{},dg(t||!e||!e.__esModule?Hc(r,"default",{value:e,enumerable:!0}):r,e)),fg=lg({"node_modules/set-cookie-parser/lib/set-cookie.js"(e,t){"use strict";var r={decodeValues:!0,map:!1,silent:!1};function n(f){return typeof f=="string"&&!!f.trim()}function o(f,p){var g=f.split(";").filter(n),h=g.shift(),S=i(h),y=S.name,v=S.value;p=p?Object.assign({},r,p):r;try{v=p.decodeValues?decodeURIComponent(v):v}catch(I){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+v+"'. Set options.decodeValues to false to disable this feature.",I)}var R={name:y,value:v};return g.forEach(function(I){var C=I.split("="),P=C.shift().trimLeft().toLowerCase(),x=C.join("=");P==="expires"?R.expires=new Date(x):P==="max-age"?R.maxAge=parseInt(x,10):P==="secure"?R.secure=!0:P==="httponly"?R.httpOnly=!0:P==="samesite"?R.sameSite=x:R[P]=x}),R}function i(f){var p="",g="",h=f.split("=");return h.length>1?(p=h.shift(),g=h.join("=")):g=f,{name:p,value:g}}function a(f,p){if(p=p?Object.assign({},r,p):r,!f)return p.map?{}:[];if(f.headers)if(typeof f.headers.getSetCookie=="function")f=f.headers.getSetCookie();else if(f.headers["set-cookie"])f=f.headers["set-cookie"];else{var g=f.headers[Object.keys(f.headers).find(function(S){return S.toLowerCase()==="set-cookie"})];!g&&f.headers.cookie&&!p.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),f=g}if(Array.isArray(f)||(f=[f]),p=p?Object.assign({},r,p):r,p.map){var h={};return f.filter(n).reduce(function(S,y){var v=o(y,p);return S[v.name]=v,S},h)}else return f.filter(n).map(function(S){return o(S,p)})}function m(f){if(Array.isArray(f))return f;if(typeof f!="string")return[];var p=[],g=0,h,S,y,v,R;function I(){for(;g<f.length&&/\s/.test(f.charAt(g));)g+=1;return g<f.length}function C(){return S=f.charAt(g),S!=="="&&S!==";"&&S!==","}for(;g<f.length;){for(h=g,R=!1;I();)if(S=f.charAt(g),S===","){for(y=g,g+=1,I(),v=g;g<f.length&&C();)g+=1;g<f.length&&f.charAt(g)==="="?(R=!0,g=v,p.push(f.substring(h,y)),h=g):g=y+1}else g+=1;(!R||g>=f.length)&&p.push(f.substring(h,f.length))}return p}t.exports=a,t.exports.parse=a,t.exports.parseString=o,t.exports.splitCookiesString=m}}),mg=pg(fg()),gg=/[^a-z0-9\-#$%&'*+.^_`|~]/i;Vc=[`
`,"\r","	"," "],yg=new RegExp(`(^[${Vc.join("")}]|$[${Vc.join("")}])`,"g");tr=Symbol("normalizedHeaders"),ua=Symbol("rawHeaderNames"),Lc=", ",b=class zc{constructor(t){this[Qc]={},this[Bc]=new Map,this[$c]="Headers",["Headers","HeadersPolyfill"].includes(t?.constructor.name)||t instanceof zc||typeof A.Headers<"u"&&t instanceof A.Headers?t.forEach((n,o)=>{this.append(o,n)},this):Array.isArray(t)?t.forEach(([r,n])=>{this.append(r,Array.isArray(n)?n.join(Lc):n)}):t&&Object.getOwnPropertyNames(t).forEach(r=>{let n=t[r];this.append(r,Array.isArray(n)?n.join(Lc):n)})}[(Qc=tr,Bc=ua,$c=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}*keys(){for(let[t]of this.entries())yield t}*values(){for(let[,t]of this.entries())yield t}*entries(){let t=Object.keys(this[tr]).sort((r,n)=>r.localeCompare(n));for(let r of t)if(r==="set-cookie")for(let n of this.getSetCookie())yield[r,n];else yield[r,this.get(r)]}has(t){if(!nn(t))throw new TypeError(`Invalid header name "${t}"`);return this[tr].hasOwnProperty(rn(t))}get(t){if(!nn(t))throw TypeError(`Invalid header name "${t}"`);return this[tr][rn(t)]??null}set(t,r){if(!nn(t)||!Uc(r))return;let n=rn(t),o=ca(r);this[tr][n]=ca(o),this[ua].set(n,t)}append(t,r){if(!nn(t)||!Uc(r))return;let n=rn(t),o=ca(r),i=this.has(n)?`${this.get(n)}, ${o}`:o;this.set(t,i)}delete(t){if(!nn(t)||!this.has(t))return;let r=rn(t);delete this[tr][r],this[ua].delete(r)}forEach(t,r){for(let[n,o]of this.entries())t.call(r,o,n,this)}getSetCookie(){let t=this.get("set-cookie");return t===null?[]:t===""?[""]:(0,mg.splitCookiesString)(t)}}});var d=en(()=>{"use strict";Wc()});var ru=ve(sn=>{"use strict";d();c();l();u();var to=sn&&sn.__assign||function(){return to=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},to.apply(this,arguments)};Object.defineProperty(sn,"__esModule",{value:!0});var Eg={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function Ig(e){var t=to(to({},Eg),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}sn.getSanitizedOptions=Ig});var nu=ve(fa=>{"use strict";d();c();l();u();Object.defineProperty(fa,"__esModule",{value:!0});function Fg(e){var t=Math.random()*e;return Math.round(t)}fa.fullJitter=Fg});var ou=ve(ma=>{"use strict";d();c();l();u();Object.defineProperty(ma,"__esModule",{value:!0});function Pg(e){return e}ma.noJitter=Pg});var iu=ve(ga=>{"use strict";d();c();l();u();Object.defineProperty(ga,"__esModule",{value:!0});var kg=nu(),Og=ou();function Tg(e){switch(e.jitter){case"full":return kg.fullJitter;case"none":default:return Og.noJitter}}ga.JitterFactory=Tg});var ha=ve(ya=>{"use strict";d();c();l();u();Object.defineProperty(ya,"__esModule",{value:!0});var Dg=iu(),qg=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=Dg.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,n=this.numOfDelayedAttempts,o=t*Math.pow(r,n);return Math.min(o,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();ya.Delay=qg});var au=ve(tt=>{"use strict";d();c();l();u();var jg=tt&&tt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mg=tt&&tt.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function m(g){try{p(n.next(g))}catch(h){a(h)}}function f(g){try{p(n.throw(g))}catch(h){a(h)}}function p(g){g.done?i(g.value):o(g.value).then(m,f)}p((n=n.apply(e,t||[])).next())})},Ng=tt&&tt.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function m(p){return function(g){return f([p,g])}}function f(p){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=p[0]&2?o.return:p[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,p[1])).done)return i;switch(o=0,i&&(p=[p[0]&2,i.value]),p[0]){case 0:case 1:i=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,o=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!i||p[1]>i[0]&&p[1]<i[3])){r.label=p[1];break}if(p[0]===6&&r.label<i[1]){r.label=i[1],i=p;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(p);break}i[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(g){p=[6,g],o=0}finally{n=i=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}};Object.defineProperty(tt,"__esModule",{value:!0});var _g=ha(),Vg=function(e){jg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return Mg(this,void 0,void 0,function(){return Ng(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(_g.Delay);tt.SkipFirstDelay=Vg});var su=ve(cn=>{"use strict";d();c();l();u();var Ug=cn&&cn.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(cn,"__esModule",{value:!0});var Lg=ha(),Qg=function(e){Ug(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Lg.Delay);cn.AlwaysDelay=Qg});var cu=ve(Sa=>{"use strict";d();c();l();u();Object.defineProperty(Sa,"__esModule",{value:!0});var Bg=au(),$g=su();function Hg(e,t){var r=Gg(e);return r.setAttemptNumber(t),r}Sa.DelayFactory=Hg;function Gg(e){return e.delayFirstAttempt?new $g.AlwaysDelay(e):new Bg.SkipFirstDelay(e)}});var uu=ve(qt=>{"use strict";d();c();l();u();var va=qt&&qt.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function m(g){try{p(n.next(g))}catch(h){a(h)}}function f(g){try{p(n.throw(g))}catch(h){a(h)}}function p(g){g.done?i(g.value):o(g.value).then(m,f)}p((n=n.apply(e,t||[])).next())})},Aa=qt&&qt.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function m(p){return function(g){return f([p,g])}}function f(p){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=p[0]&2?o.return:p[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,p[1])).done)return i;switch(o=0,i&&(p=[p[0]&2,i.value]),p[0]){case 0:case 1:i=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,o=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!i||p[1]>i[0]&&p[1]<i[3])){r.label=p[1];break}if(p[0]===6&&r.label<i[1]){r.label=i[1],i=p;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(p);break}i[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(g){p=[6,g],o=0}finally{n=i=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}};Object.defineProperty(qt,"__esModule",{value:!0});var zg=ru(),Wg=cu();function Kg(e,t){return t===void 0&&(t={}),va(this,void 0,void 0,function(){var r,n;return Aa(this,function(o){switch(o.label){case 0:return r=zg.getSanitizedOptions(t),n=new Yg(e,r),[4,n.execute()];case 1:return[2,o.sent()]}})})}qt.backOff=Kg;var Yg=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return va(this,void 0,void 0,function(){var t,r;return Aa(this,function(n){switch(n.label){case 0:if(this.attemptLimitReached)return[3,7];n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return n.sent(),[4,this.request()];case 3:return[2,n.sent()];case 4:return t=n.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=n.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return va(this,void 0,void 0,function(){var t;return Aa(this,function(r){switch(r.label){case 0:return t=Wg.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var hi=ve((Bs,$s)=>{"use strict";d();c();l();u();(function(e,t){typeof Bs=="object"&&typeof $s<"u"?$s.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof A<"u"?A:e||self).dayjs=t()})(Bs,function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",o="second",i="minute",a="hour",m="day",f="week",p="month",g="quarter",h="year",S="date",y="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,I={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Q){var U=["th","st","nd","rd"],V=Q%100;return"["+Q+(U[(V-20)%10]||U[V]||U[0])+"]"}},C=function(Q,U,V){var B=String(Q);return!B||B.length>=U?Q:""+Array(U+1-B.length).join(V)+Q},P={s:C,z:function(Q){var U=-Q.utcOffset(),V=Math.abs(U),B=Math.floor(V/60),L=V%60;return(U<=0?"+":"-")+C(B,2,"0")+":"+C(L,2,"0")},m:function Q(U,V){if(U.date()<V.date())return-Q(V,U);var B=12*(V.year()-U.year())+(V.month()-U.month()),L=U.clone().add(B,p),G=V-L<0,z=U.clone().add(B+(G?-1:1),p);return+(-(B+(V-L)/(G?L-z:z-L))||0)},a:function(Q){return Q<0?Math.ceil(Q)||0:Math.floor(Q)},p:function(Q){return{M:p,y:h,w:f,d:m,D:S,h:a,m:i,s:o,ms:n,Q:g}[Q]||String(Q||"").toLowerCase().replace(/s$/,"")},u:function(Q){return Q===void 0}},x="en",E={};E[x]=I;var M="$isDayjsObject",T=function(Q){return Q instanceof _||!(!Q||!Q[M])},F=function Q(U,V,B){var L;if(!U)return x;if(typeof U=="string"){var G=U.toLowerCase();E[G]&&(L=G),V&&(E[G]=V,L=G);var z=U.split("-");if(!L&&z.length>1)return Q(z[0])}else{var Y=U.name;E[Y]=U,L=Y}return!B&&L&&(x=L),L||!B&&x},k=function(Q,U){if(T(Q))return Q.clone();var V=typeof U=="object"?U:{};return V.date=Q,V.args=arguments,new _(V)},D=P;D.l=F,D.i=T,D.w=function(Q,U){return k(Q,{locale:U.$L,utc:U.$u,x:U.$x,$offset:U.$offset})};var _=function(){function Q(V){this.$L=F(V.locale,null,!0),this.parse(V),this.$x=this.$x||V.x||{},this[M]=!0}var U=Q.prototype;return U.parse=function(V){this.$d=function(B){var L=B.date,G=B.utc;if(L===null)return new Date(NaN);if(D.u(L))return new Date;if(L instanceof Date)return new Date(L);if(typeof L=="string"&&!/Z$/i.test(L)){var z=L.match(v);if(z){var Y=z[2]-1||0,re=(z[7]||"0").substring(0,3);return G?new Date(Date.UTC(z[1],Y,z[3]||1,z[4]||0,z[5]||0,z[6]||0,re)):new Date(z[1],Y,z[3]||1,z[4]||0,z[5]||0,z[6]||0,re)}}return new Date(L)}(V),this.init()},U.init=function(){var V=this.$d;this.$y=V.getFullYear(),this.$M=V.getMonth(),this.$D=V.getDate(),this.$W=V.getDay(),this.$H=V.getHours(),this.$m=V.getMinutes(),this.$s=V.getSeconds(),this.$ms=V.getMilliseconds()},U.$utils=function(){return D},U.isValid=function(){return this.$d.toString()!==y},U.isSame=function(V,B){var L=k(V);return this.startOf(B)<=L&&L<=this.endOf(B)},U.isAfter=function(V,B){return k(V)<this.startOf(B)},U.isBefore=function(V,B){return this.endOf(B)<k(V)},U.$g=function(V,B,L){return D.u(V)?this[B]:this.set(L,V)},U.unix=function(){return Math.floor(this.valueOf()/1e3)},U.valueOf=function(){return this.$d.getTime()},U.startOf=function(V,B){var L=this,G=!!D.u(B)||B,z=D.p(V),Y=function(le,fe){var he=D.w(L.$u?Date.UTC(L.$y,fe,le):new Date(L.$y,fe,le),L);return G?he:he.endOf(m)},re=function(le,fe){return D.w(L.toDate()[le].apply(L.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(fe)),L)},se=this.$W,te=this.$M,ne=this.$D,Z="set"+(this.$u?"UTC":"");switch(z){case h:return G?Y(1,0):Y(31,11);case p:return G?Y(1,te):Y(0,te+1);case f:var ie=this.$locale().weekStart||0,ge=(se<ie?se+7:se)-ie;return Y(G?ne-ge:ne+(6-ge),te);case m:case S:return re(Z+"Hours",0);case a:return re(Z+"Minutes",1);case i:return re(Z+"Seconds",2);case o:return re(Z+"Milliseconds",3);default:return this.clone()}},U.endOf=function(V){return this.startOf(V,!1)},U.$set=function(V,B){var L,G=D.p(V),z="set"+(this.$u?"UTC":""),Y=(L={},L[m]=z+"Date",L[S]=z+"Date",L[p]=z+"Month",L[h]=z+"FullYear",L[a]=z+"Hours",L[i]=z+"Minutes",L[o]=z+"Seconds",L[n]=z+"Milliseconds",L)[G],re=G===m?this.$D+(B-this.$W):B;if(G===p||G===h){var se=this.clone().set(S,1);se.$d[Y](re),se.init(),this.$d=se.set(S,Math.min(this.$D,se.daysInMonth())).$d}else Y&&this.$d[Y](re);return this.init(),this},U.set=function(V,B){return this.clone().$set(V,B)},U.get=function(V){return this[D.p(V)]()},U.add=function(V,B){var L,G=this;V=Number(V);var z=D.p(B),Y=function(te){var ne=k(G);return D.w(ne.date(ne.date()+Math.round(te*V)),G)};if(z===p)return this.set(p,this.$M+V);if(z===h)return this.set(h,this.$y+V);if(z===m)return Y(1);if(z===f)return Y(7);var re=(L={},L[i]=t,L[a]=r,L[o]=e,L)[z]||1,se=this.$d.getTime()+V*re;return D.w(se,this)},U.subtract=function(V,B){return this.add(-1*V,B)},U.format=function(V){var B=this,L=this.$locale();if(!this.isValid())return L.invalidDate||y;var G=V||"YYYY-MM-DDTHH:mm:ssZ",z=D.z(this),Y=this.$H,re=this.$m,se=this.$M,te=L.weekdays,ne=L.months,Z=L.meridiem,ie=function(fe,he,Oe,Ve){return fe&&(fe[he]||fe(B,G))||Oe[he].slice(0,Ve)},ge=function(fe){return D.s(Y%12||12,fe,"0")},le=Z||function(fe,he,Oe){var Ve=fe<12?"AM":"PM";return Oe?Ve.toLowerCase():Ve};return G.replace(R,function(fe,he){return he||function(Oe){switch(Oe){case"YY":return String(B.$y).slice(-2);case"YYYY":return D.s(B.$y,4,"0");case"M":return se+1;case"MM":return D.s(se+1,2,"0");case"MMM":return ie(L.monthsShort,se,ne,3);case"MMMM":return ie(ne,se);case"D":return B.$D;case"DD":return D.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ie(L.weekdaysMin,B.$W,te,2);case"ddd":return ie(L.weekdaysShort,B.$W,te,3);case"dddd":return te[B.$W];case"H":return String(Y);case"HH":return D.s(Y,2,"0");case"h":return ge(1);case"hh":return ge(2);case"a":return le(Y,re,!0);case"A":return le(Y,re,!1);case"m":return String(re);case"mm":return D.s(re,2,"0");case"s":return String(B.$s);case"ss":return D.s(B.$s,2,"0");case"SSS":return D.s(B.$ms,3,"0");case"Z":return z}return null}(fe)||z.replace(":","")})},U.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},U.diff=function(V,B,L){var G,z=this,Y=D.p(B),re=k(V),se=(re.utcOffset()-this.utcOffset())*t,te=this-re,ne=function(){return D.m(z,re)};switch(Y){case h:G=ne()/12;break;case p:G=ne();break;case g:G=ne()/3;break;case f:G=(te-se)/6048e5;break;case m:G=(te-se)/864e5;break;case a:G=te/r;break;case i:G=te/t;break;case o:G=te/e;break;default:G=te}return L?G:D.a(G)},U.daysInMonth=function(){return this.endOf(p).$D},U.$locale=function(){return E[this.$L]},U.locale=function(V,B){if(!V)return this.$L;var L=this.clone(),G=F(V,B,!0);return G&&(L.$L=G),L},U.clone=function(){return D.w(this.$d,this)},U.toDate=function(){return new Date(this.valueOf())},U.toJSON=function(){return this.isValid()?this.toISOString():null},U.toISOString=function(){return this.$d.toISOString()},U.toString=function(){return this.$d.toUTCString()},Q}(),H=_.prototype;return k.prototype=H,[["$ms",n],["$s",o],["$m",i],["$H",a],["$W",m],["$M",p],["$y",h],["$D",S]].forEach(function(Q){H[Q[1]]=function(U){return this.$g(U,Q[0],Q[1])}}),k.extend=function(Q,U){return Q.$i||(Q(U,_,k),Q.$i=!0),k},k.locale=F,k.isDayjs=T,k.unix=function(Q){return k(1e3*Q)},k.en=E[x],k.Ls=E,k.p={},k})});var bp=ve((Hs,Gs)=>{"use strict";d();c();l();u();(function(e,t){typeof Hs=="object"&&typeof Gs<"u"?Gs.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof A<"u"?A:e||self).dayjs_plugin_quarterOfYear=t()})(Hs,function(){"use strict";var e="month",t="quarter";return function(r,n){var o=n.prototype;o.quarter=function(m){return this.$utils().u(m)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(m-1))};var i=o.add;o.add=function(m,f){return m=Number(m),this.$utils().p(f)===t?this.add(3*m,e):i.bind(this)(m,f)};var a=o.startOf;o.startOf=function(m,f){var p=this.$utils(),g=!!p.u(f)||f;if(p.p(m)===t){var h=this.quarter()-1;return g?this.month(3*h).startOf(e).startOf("day"):this.month(3*h+2).endOf(e).endOf("day")}return a.bind(this)(m,f)}}})});var Cp=ve((zs,Ws)=>{"use strict";d();c();l();u();(function(e,t){typeof zs=="object"&&typeof Ws<"u"?Ws.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof A<"u"?A:e||self).dayjs_plugin_customParseFormat=t()})(zs,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,n=/\d\d/,o=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,a={},m=function(v){return(v=+v)+(v>68?1900:2e3)},f=function(v){return function(R){this[v]=+R}},p=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(R){if(!R||R==="Z")return 0;var I=R.match(/([+-]|\d\d)/g),C=60*I[1]+(+I[2]||0);return C===0?0:I[0]==="+"?-C:C}(v)}],g=function(v){var R=a[v];return R&&(R.indexOf?R:R.s.concat(R.f))},h=function(v,R){var I,C=a.meridiem;if(C){for(var P=1;P<=24;P+=1)if(v.indexOf(C(P,0,R))>-1){I=P>12;break}}else I=v===(R?"pm":"PM");return I},S={A:[i,function(v){this.afternoon=h(v,!1)}],a:[i,function(v){this.afternoon=h(v,!0)}],Q:[r,function(v){this.month=3*(v-1)+1}],S:[r,function(v){this.milliseconds=100*+v}],SS:[n,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[o,f("seconds")],ss:[o,f("seconds")],m:[o,f("minutes")],mm:[o,f("minutes")],H:[o,f("hours")],h:[o,f("hours")],HH:[o,f("hours")],hh:[o,f("hours")],D:[o,f("day")],DD:[n,f("day")],Do:[i,function(v){var R=a.ordinal,I=v.match(/\d+/);if(this.day=I[0],R)for(var C=1;C<=31;C+=1)R(C).replace(/\[|\]/g,"")===v&&(this.day=C)}],w:[o,f("week")],ww:[n,f("week")],M:[o,f("month")],MM:[n,f("month")],MMM:[i,function(v){var R=g("months"),I=(g("monthsShort")||R.map(function(C){return C.slice(0,3)})).indexOf(v)+1;if(I<1)throw new Error;this.month=I%12||I}],MMMM:[i,function(v){var R=g("months").indexOf(v)+1;if(R<1)throw new Error;this.month=R%12||R}],Y:[/[+-]?\d+/,f("year")],YY:[n,function(v){this.year=m(v)}],YYYY:[/\d{4}/,f("year")],Z:p,ZZ:p};function y(v){var R,I;R=v,I=a&&a.formats;for(var C=(v=R.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(k,D,_){var H=_&&_.toUpperCase();return D||I[_]||e[_]||I[H].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Q,U,V){return U||V.slice(1)})})).match(t),P=C.length,x=0;x<P;x+=1){var E=C[x],M=S[E],T=M&&M[0],F=M&&M[1];C[x]=F?{regex:T,parser:F}:E.replace(/^\[|\]$/g,"")}return function(k){for(var D={},_=0,H=0;_<P;_+=1){var Q=C[_];if(typeof Q=="string")H+=Q.length;else{var U=Q.regex,V=Q.parser,B=k.slice(H),L=U.exec(B)[0];V.call(D,L),k=k.replace(L,"")}}return function(G){var z=G.afternoon;if(z!==void 0){var Y=G.hours;z?Y<12&&(G.hours+=12):Y===12&&(G.hours=0),delete G.afternoon}}(D),D}}return function(v,R,I){I.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(m=v.parseTwoDigitYear);var C=R.prototype,P=C.parse;C.parse=function(x){var E=x.date,M=x.utc,T=x.args;this.$u=M;var F=T[1];if(typeof F=="string"){var k=T[2]===!0,D=T[3]===!0,_=k||D,H=T[2];D&&(H=T[2]),a=this.$locale(),!k&&H&&(a=I.Ls[H]),this.$d=function(B,L,G,z){try{if(["x","X"].indexOf(L)>-1)return new Date((L==="X"?1e3:1)*B);var Y=y(L)(B),re=Y.year,se=Y.month,te=Y.day,ne=Y.hours,Z=Y.minutes,ie=Y.seconds,ge=Y.milliseconds,le=Y.zone,fe=Y.week,he=new Date,Oe=te||(re||se?1:he.getDate()),Ve=re||he.getFullYear(),dt=0;re&&!se||(dt=se>0?se-1:he.getMonth());var Xt,Zt=ne||0,Xr=Z||0,ea=ie||0,ta=ge||0;return le?new Date(Date.UTC(Ve,dt,Oe,Zt,Xr,ea,ta+60*le.offset*1e3)):G?new Date(Date.UTC(Ve,dt,Oe,Zt,Xr,ea,ta)):(Xt=new Date(Ve,dt,Oe,Zt,Xr,ea,ta),fe&&(Xt=z(Xt).week(fe).toDate()),Xt)}catch{return new Date("")}}(E,F,M,I),this.init(),H&&H!==!0&&(this.$L=this.locale(H).$L),_&&E!=this.format(F)&&(this.$d=new Date("")),a={}}else if(F instanceof Array)for(var Q=F.length,U=1;U<=Q;U+=1){T[1]=F[U-1];var V=I.apply(this,T);if(V.isValid()){this.$d=V.$d,this.$L=V.$L,this.init();break}U===Q&&(this.$d=new Date(""))}else P.call(this,x)}}})});var sf=ve((sc,cc)=>{"use strict";d();c();l();u();(function(e,t){typeof sc=="object"&&typeof cc<"u"?cc.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof A<"u"?A:e||self).dayjs_plugin_timezone=t()})(sc,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,o){var i,a=function(g,h,S){S===void 0&&(S={});var y=new Date(g),v=function(R,I){I===void 0&&(I={});var C=I.timeZoneName||"short",P=R+"|"+C,x=t[P];return x||(x=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:R,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:C}),t[P]=x),x}(h,S);return v.formatToParts(y)},m=function(g,h){for(var S=a(g,h),y=[],v=0;v<S.length;v+=1){var R=S[v],I=R.type,C=R.value,P=e[I];P>=0&&(y[P]=parseInt(C,10))}var x=y[3],E=x===24?0:x,M=y[0]+"-"+y[1]+"-"+y[2]+" "+E+":"+y[4]+":"+y[5]+":000",T=+g;return(o.utc(M).valueOf()-(T-=T%1e3))/6e4},f=n.prototype;f.tz=function(g,h){g===void 0&&(g=i);var S,y=this.utcOffset(),v=this.toDate(),R=v.toLocaleString("en-US",{timeZone:g}),I=Math.round((v-new Date(R))/1e3/60),C=15*-Math.round(v.getTimezoneOffset()/15)-I;if(!Number(C))S=this.utcOffset(0,h);else if(S=o(R,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(C,!0),h){var P=S.utcOffset();S=S.add(y-P,"minute")}return S.$x.$timezone=g,S},f.offsetName=function(g){var h=this.$x.$timezone||o.tz.guess(),S=a(this.valueOf(),h,{timeZoneName:g}).find(function(y){return y.type.toLowerCase()==="timezonename"});return S&&S.value};var p=f.startOf;f.startOf=function(g,h){if(!this.$x||!this.$x.$timezone)return p.call(this,g,h);var S=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return p.call(S,g,h).tz(this.$x.$timezone,!0)},o.tz=function(g,h,S){var y=S&&h,v=S||h||i,R=m(+o(),v);if(typeof g!="string")return o(g).tz(v);var I=function(E,M,T){var F=E-60*M*1e3,k=m(F,T);if(M===k)return[F,M];var D=m(F-=60*(k-M)*1e3,T);return k===D?[F,k]:[E-60*Math.min(k,D)*1e3,Math.max(k,D)]}(o.utc(g,y).valueOf(),R,v),C=I[0],P=I[1],x=o(C).utcOffset(P);return x.$x.$timezone=v,x},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(g){i=g}}})});var cf=ve((uc,lc)=>{"use strict";d();c();l();u();(function(e,t){typeof uc=="object"&&typeof lc<"u"?lc.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof A<"u"?A:e||self).dayjs_plugin_utc=t()})(uc,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,o,i){var a=o.prototype;i.utc=function(y){var v={date:y,utc:!0,args:arguments};return new o(v)},a.utc=function(y){var v=i(this.toDate(),{locale:this.$L,utc:!0});return y?v.add(this.utcOffset(),e):v},a.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var m=a.parse;a.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),m.call(this,y)};var f=a.init;a.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else f.call(this)};var p=a.utcOffset;a.utcOffset=function(y,v){var R=this.$utils().u;if(R(y))return this.$u?0:R(this.$offset)?p.call(this):this.$offset;if(typeof y=="string"&&(y=function(x){x===void 0&&(x="");var E=x.match(t);if(!E)return null;var M=(""+E[0]).match(r)||["-",0,0],T=M[0],F=60*+M[1]+ +M[2];return F===0?0:T==="+"?F:-F}(y),y===null))return this;var I=Math.abs(y)<=16?60*y:y,C=this;if(v)return C.$offset=I,C.$u=y===0,C;if(y!==0){var P=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(C=this.local().add(I+P,e)).$offset=I,C.$x.$localOffset=P}else C=this.utc();return C};var g=a.format;a.format=function(y){var v=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,v)},a.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var h=a.toDate;a.toDate=function(y){return y==="s"&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var S=a.diff;a.diff=function(y,v,R){if(y&&this.$u===y.$u)return S.call(this,y,v,R);var I=this.local(),C=i(y).local();return S.call(I,C,v,R)}}})});var _f=ve((Xz,Nf)=>{"use strict";d();c();l();u();function Dw(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}Nf.exports=qw;function qw(e,t,r){var n=r&&r.stringify||Dw,o=1;if(typeof e=="object"&&e!==null){var i=t.length+o;if(i===1)return e;var a=new Array(i);a[0]=n(e);for(var m=1;m<i;m++)a[m]=n(t[m]);return a.join(" ")}if(typeof e!="string")return e;var f=t.length;if(f===0)return e;for(var p="",g=1-o,h=-1,S=e&&e.length||0,y=0;y<S;){if(e.charCodeAt(y)===37&&y+1<S){switch(h=h>-1?h:0,e.charCodeAt(y+1)){case 100:case 102:if(g>=f||t[g]==null)break;h<y&&(p+=e.slice(h,y)),p+=Number(t[g]),h=y+2,y++;break;case 105:if(g>=f||t[g]==null)break;h<y&&(p+=e.slice(h,y)),p+=Math.floor(Number(t[g])),h=y+2,y++;break;case 79:case 111:case 106:if(g>=f||t[g]===void 0)break;h<y&&(p+=e.slice(h,y));var v=typeof t[g];if(v==="string"){p+="'"+t[g]+"'",h=y+2,y++;break}if(v==="function"){p+=t[g].name||"<anonymous>",h=y+2,y++;break}p+=n(t[g]),h=y+2,y++;break;case 115:if(g>=f)break;h<y&&(p+=e.slice(h,y)),p+=String(t[g]),h=y+2,y++;break;case 37:h<y&&(p+=e.slice(h,y)),p+="%",h=y+2,y++,g--;break}++g}++y}return h===-1?e:(h<S&&(p+=e.slice(h)),p)}});var $f=ve((n2,Li)=>{"use strict";d();c();l();u();var Vf=_f();Li.exports=lt;var Hn=Kw().console||{},jw={mapHttpRequest:Ui,mapHttpResponse:Ui,wrapRequestSerializer:Ac,wrapResponseSerializer:Ac,wrapErrorSerializer:Ac,req:Ui,res:Ui,err:Lf,errWithCause:Lf};function Ot(e,t){return e==="silent"?1/0:t.levels.values[e]}var Cc=Symbol("pino.logFuncs"),wc=Symbol("pino.hierarchy"),Mw={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Uf(e,t){let r={logger:t,parent:e[wc]};t[wc]=r}function Nw(e,t,r){let n={};t.forEach(o=>{n[o]=r[o]?r[o]:Hn[o]||Hn[Mw[o]||"log"]||Gr}),e[Cc]=n}function _w(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function lt(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||Hn;e.browser.write&&(e.browser.asObject=!0);let n=e.serializers||{},o=_w(e.browser.serialize,n),i=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);let a=Object.keys(e.customLevels||{}),m=["error","fatal","warn","info","debug","trace"].concat(a);typeof r=="function"&&m.forEach(function(R){r[R]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let f=e.level||"info",p=Object.create(r);p.log||(p.log=Gr),Nw(p,m,r),Uf({},p),Object.defineProperty(p,"levelVal",{get:h}),Object.defineProperty(p,"level",{get:S,set:y});let g={transmit:t,serialize:o,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:m,timestamp:Gw(e),messageKey:e.messageKey||"msg",onChild:e.onChild||Gr};p.levels=Vw(e),p.level=f,p.isLevelEnabled=function(R){return this.levels.values[R]?this.levels.values[R]>=this.levels.values[this.level]:!1},p.setMaxListeners=p.getMaxListeners=p.emit=p.addListener=p.on=p.prependListener=p.once=p.prependOnceListener=p.removeListener=p.removeAllListeners=p.listeners=p.listenerCount=p.eventNames=p.write=p.flush=Gr,p.serializers=n,p._serialize=o,p._stdErrSerialize=i,p.child=function(...R){return v.call(this,g,...R)},t&&(p._logEvent=bc());function h(){return Ot(this.level,this)}function S(){return this._level}function y(R){if(R!=="silent"&&!this.levels.values[R])throw Error("unknown level "+R);this._level=R,Wt(this,g,p,"error"),Wt(this,g,p,"fatal"),Wt(this,g,p,"warn"),Wt(this,g,p,"info"),Wt(this,g,p,"debug"),Wt(this,g,p,"trace"),a.forEach(I=>{Wt(this,g,p,I)})}function v(R,I,C){if(!I)throw new Error("missing bindings for child Pino");C=C||{},o&&I.serializers&&(C.serializers=I.serializers);let P=C.serializers;if(o&&P){var x=Object.assign({},n,P),E=e.browser.serialize===!0?Object.keys(x):o;delete I.serializers,xc([I],E,x,this._stdErrSerialize)}function M(F){this._childLevel=(F._childLevel|0)+1,this.bindings=I,x&&(this.serializers=x,this._serialize=E),t&&(this._logEvent=bc([].concat(F._logEvent.bindings,I)))}M.prototype=this;let T=new M(this);return Uf(this,T),T.child=function(...F){return v.call(this,R,...F)},T.level=C.level||this.level,R.onChild(T),T}return p}function Vw(e){let t=e.customLevels||{},r=Object.assign({},lt.levels.values,t),n=Object.assign({},lt.levels.labels,Uw(t));return{values:r,labels:n}}function Uw(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}lt.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};lt.stdSerializers=jw;lt.stdTimeFunctions=Object.assign({},{nullTime:Qf,epochTime:Bf,unixTime:zw,isoTime:Ww});function Lw(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[wc];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function Wt(e,t,r,n){if(Object.defineProperty(e,n,{value:Ot(e.level,r)>Ot(n,r)?Gr:r[Cc][n],writable:!0,enumerable:!0,configurable:!0}),e[n]===Gr){if(!t.transmit)return;let i=t.transmit.level||e.level,a=Ot(i,r);if(Ot(n,r)<a)return}e[n]=Bw(e,t,r,n);let o=Lw(e);o.length!==0&&(e[n]=Qw(o,e[n]))}function Qw(e,t){return function(){return t.apply(this,[...e,...arguments])}}function Bw(e,t,r,n){return function(o){return function(){let a=t.timestamp(),m=new Array(arguments.length),f=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Hn?Hn:this;for(var p=0;p<m.length;p++)m[p]=arguments[p];var g=!1;if(t.serialize&&(xc(m,this._serialize,this.serializers,this._stdErrSerialize),g=!0),t.asObject||t.formatters?o.call(f,...$w(this,n,m,a,t)):o.apply(f,m),t.transmit){let h=t.transmit.level||e._level,S=Ot(h,r),y=Ot(n,r);if(y<S)return;Hw(this,{ts:a,methodLevel:n,methodValue:y,transmitLevel:h,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:Ot(e._level,r)},m,g)}}}(e[Cc][n])}function $w(e,t,r,n,o){let{level:i,log:a=h=>h}=o.formatters||{},m=r.slice(),f=m[0],p={},g=(e._childLevel|0)+1;if(g<1&&(g=1),n&&(p.time=n),i){let h=i(t,e.levels.values[t]);Object.assign(p,h)}else p.level=e.levels.values[t];if(o.asObjectBindingsOnly){if(f!==null&&typeof f=="object")for(;g--&&typeof m[0]=="object";)Object.assign(p,m.shift());return[a(p),...m]}else{if(f!==null&&typeof f=="object"){for(;g--&&typeof m[0]=="object";)Object.assign(p,m.shift());f=m.length?Vf(m.shift(),m):void 0}else typeof f=="string"&&(f=Vf(m.shift(),m));return f!==void 0&&(p[o.messageKey]=f),[a(p)]}}function xc(e,t,r,n){for(let o in e)if(n&&e[o]instanceof Error)e[o]=lt.stdSerializers.err(e[o]);else if(typeof e[o]=="object"&&!Array.isArray(e[o])&&t)for(let i in e[o])t.indexOf(i)>-1&&i in r&&(e[o][i]=r[i](e[o][i]))}function Hw(e,t,r,n=!1){let o=t.send,i=t.ts,a=t.methodLevel,m=t.methodValue,f=t.val,p=e._logEvent.bindings;n||xc(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter(function(g){return p.indexOf(g)===-1}),e._logEvent.level.label=a,e._logEvent.level.value=m,o(a,e._logEvent,f),e._logEvent=bc(p)}function bc(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function Lf(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function Gw(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?Qf:Bf}function Ui(){return{}}function Ac(e){return e}function Gr(){}function Qf(){return!1}function Bf(){return Date.now()}function zw(){return Math.round(Date.now()/1e3)}function Ww(){return new Date(Date.now()).toISOString()}function Kw(){function e(t){return typeof t<"u"&&t}try{return typeof A<"u"?A:(Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),A)}catch{return e(self)||e(window)||e(this)||{}}}Li.exports.default=lt;Li.exports.pino=lt});var Kb={};Oc(Kb,{DefaultFieldsToInclude:()=>kc,EcommerceDefaultFieldsToInclude:()=>Tm,HighlightUtils:()=>pa,MinimumFieldsToInclude:()=>Xi,ResultTemplatesHelpers:()=>Qp,buildContext:()=>em,buildController:()=>Tt,buildDictionaryFieldContext:()=>tm,buildInteractiveResult:()=>Fm,buildRecommendationEngine:()=>Jf,buildRecommendationList:()=>Em,buildResultTemplatesManager:()=>jm,getAnalyticsNextApiBaseUrl:()=>ro,getOrganizationEndpoint:()=>Se,getSampleRecommendationEngineConfiguration:()=>Rc,loadAdvancedSearchQueryActions:()=>qb,loadClickAnalyticsActions:()=>Hb,loadConfigurationActions:()=>jb,loadContextActions:()=>Nb,loadDebugActions:()=>_b,loadDictionaryFieldContextActions:()=>Vb,loadFieldActions:()=>Qb,loadPaginationActions:()=>Pc,loadPipelineActions:()=>Bb,loadRecommendationActions:()=>$b,loadSearchConfigurationActions:()=>Mb,loadSearchHubActions:()=>Wb});module.exports=Qm(Kb);d();c();l();u();var pa={};Oc(pa,{escapeHtml:()=>rr,getHighlightedSuggestion:()=>Rg,highlightString:()=>xg});d();c();l();u();d();c();l();u();function Sg(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new on(r)}var on=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},Te=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let o in this.definition){let i=this.definition[o].validate(r[o]);i&&n.push(`${o}: ${i}`)}if(n.length)throw Sg(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},pe=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&X(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function Ae(e){return e===void 0}function vg(e){return e===null}function X(e){return Ae(e)||vg(e)}var ee=class{constructor(e={}){ue(this,"value");this.value=new pe(e)}validate(e){let t=this.value.validate(e);return t||(Ag(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function Ag(e){return Ae(e)||Kc(e)}function Kc(e){return typeof e=="boolean"}var J=class{constructor(e={}){ue(this,"value");this.config=e,this.value=new pe(e)}validate(e){let t=this.value.validate(e);return t||(wg(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function wg(e){return Ae(e)||Yc(e)}function Yc(e){return typeof e=="number"&&!Number.isNaN(e)}var bg=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,$=class{constructor(e={}){ue(this,"value");ue(this,"config");this.config={emptyAllowed:!0,url:!1,...e},this.value=new pe(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:o,ISODate:i}=this.config,a=this.value.validate(e);if(a)return a;if(Ae(e))return null;if(!Xn(e))return"value is not a string.";if(!t&&!e.length)return"value is an empty string.";if(r)try{new URL(e)}catch{return"value is not a valid URL."}return n&&!n.test(e)?`value did not match provided regex ${n}`:o&&!o.includes(e)?`value should be one of: ${o.join(", ")}.`:i&&!(bg.test(e)&&new Date(e).toString()!=="Invalid Date")?"value is not a valid ISO8601 date string":null}get default(){return this.value.default}get required(){return this.value.required}};function Xn(e){return Object.prototype.toString.call(e)==="[object String]"}var K=class{constructor(e={}){ue(this,"config");this.config={options:{required:!1},values:{},...e}}validate(e){if(Ae(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Jc(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&X(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let o=e[r],i=n.validate(o);i!==null&&(t+=` ${i}`)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Jc(e){return e!==void 0&&typeof e=="object"}var oe=class{constructor(e={}){ue(this,"value");this.config=e,this.value=new pe(this.config)}validate(e){if(!X(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(X(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&X(n)&&(r=`value is null or undefined: ${e.join(",")}`);let o=this.validatePrimitiveValue(n,this.config.each);o!==null&&(r+=` ${o}`)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return Kc(e)||Xn(e)||Yc(e)||Jc(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Xc(e){return Array.isArray(e)}var la=class{constructor(e){ue(this,"value");this.config=e,this.value=new pe(e)}validate(e){let t=this.value.validate(e);return t!==null?t:Ae(e)||Object.values(this.config.enum).find(n=>n===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};d();c();l();u();function Zc(e){return Array.isArray(e)}function Zn(e){return e.trim()===""}var Cg=new Set(["1",1,"yes",!0]);function eu(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>Cg.has(r))}function tu(e){let t={};for(let[r,n]of e)t[r]=n;return t}function an(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function eo(e,t,r={}){let n;return(...o)=>{let i=r.isImmediate&&!n;if(clearTimeout(n),n=setTimeout(()=>{n=void 0,r.isImmediate||e.apply(void 0,o)},t),i)return e.apply(void 0,o)}}function xg(e){if(Zn(e.openingDelimiter)||Zn(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(X(e.content)||Zn(e.content))return e.content;if(e.highlights.length===0)return rr(e.content);let t=e.content.length,r="",n=0;for(let o=0;o<e.highlights.length;o++){let i=e.highlights[o],a=i.offset,m=a+i.length;if(m>t)break;r+=rr(e.content.slice(n,a)),r+=e.openingDelimiter,r+=rr(e.content.slice(a,m)),r+=e.closingDelimiter,n=m}return n!==t&&(r+=rr(e.content.slice(n))),r}function Rg(e,t){return e=rr(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,n,o,i)=>n?da(n,t.notMatchDelimiters):o?da(o,t.exactMatchDelimiters):i?da(i,t.correctionDelimiters):r)}function da(e,t){return t?t.open+e+t.close:e}function rr(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=`(?:${Object.keys(t).join("|")})`,n=RegExp(r),o=RegExp(r,"g");return n.test(e)?e.replace(o,i=>t[i]):e}d();c();l();u();var fu=$e(uu(),1);d();c();l();u();var ze=new Error("Failed to load reducers."),nr=class extends Error{constructor(){super(),this.name="UnauthorizedTokenError",this.message="The token being used to perform the request is unauthorized. It may be expired or invalid."}},jt=class extends Error{constructor(r,n){super();ue(this,"statusCode");this.name="Disconnected",this.message=`Client could not connect to the following URL: ${r}`,this.statusCode=n??0}};d();c();l();u();function lu(e){let t=[];for(let r in e){let n=encodeURIComponent(r),o=encodeURIComponent(e[r]);t.push(`${n}=${o}`)}return t.join("&")}function du(e){return typeof e!="object"||!e?!1:Object.values(e).every(Jg)}function Jg(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function pu(e){return e===429}var He=class e{static async call(t){let r=Xg(t),{logger:n}=t,o=await e.preprocessRequest(r,t);n.info(o,"Platform request");let{url:i,...a}=o,m=async()=>{let f=await w(i,a);if(pu(f.status))throw f;return f};try{let f=await(0,fu.backOff)(m,{startingDelay:100,timeMultiple:2,maxDelay:800,numOfAttempts:4,jitter:"full",retry:async p=>{let g=p&&pu(p.status);return g&&(n.info("Platform retrying request"),await new Promise(h=>setTimeout(h,1e3))),g}});switch(f.status){case 419:case 401:throw n.info("Platform renewing token"),new nr;case 404:throw new jt(i,f.status);default:return n.info({response:f,requestInfo:o},"Platform response"),f}}catch(f){return f.message==="Failed to fetch"?new jt(i):f}}static async preprocessRequest(t,r){let{origin:n,preprocessRequest:o,logger:i,requestMetadata:a}=r,{signal:m,...f}=t,p=an(f);try{let g=await o(t,n,a);return{...t,...g}}catch(g){i.error(g,"Platform request preprocessing failed. Returning default request options.")}return p}};function Se(e,t="prod",r="platform"){let n=t==="prod"?"":t,o=r==="platform"?"":`.${r}`;return`https://${e}${o}.org${n}.coveo.com`}function pt(e,t="prod"){return`${Se(e,t)}/rest/search/v2`}function ro(e,t="prod"){return`${Se(e,t,"analytics")}/rest/organizations/${e}/events/v1`}function Xg(e){let{url:t,method:r,requestParams:n,contentType:o,accessToken:i,signal:a}=e,m=e.method==="POST"||e.method==="PUT",f=Zg(n,o);return{url:t,method:r,headers:{"Content-Type":o,Authorization:`Bearer ${i}`,...e.headers},...m&&{body:f},signal:a}}function Zg(e,t){return t==="application/x-www-form-urlencoded"?du(e)?lu(e):"":JSON.stringify(e)}d();c();l();u();d();c();l();u();var no=e=>e;d();c();l();u();d();c();l();u();function oo(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function We(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:oo(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:oo(),extendedResults:{},searchAction:void 0}}d();c();l();u();function ft(e){let{url:t,accessToken:r,organizationId:n,authentication:o,...i}=e;return i}var mt=e=>{let{response:t}=e;return t.body?ey(e):ty(t)},ey=e=>ny(e)?oy(e):ry(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},ty=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function ry(e){return e.body.statusCode!==void 0}function ny(e){return e.body.exception!==void 0}var oy=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});d();c();l();u();var gt=class{constructor(){ue(this,"currentAbortController",null)}async enqueue(t,r){let n=this.currentAbortController;this.currentAbortController=new s.AbortController;let o=this.currentAbortController;n&&(r.warnOnAbort&&r.logger.warn("Cancelling current pending search query"),n.abort());try{return await t(o?.signal??null)}finally{this.currentAbortController===o&&(this.currentAbortController=null)}}};d();c();l();u();d();c();l();u();var un=class{constructor(t){ue(this,"_basePath");ue(this,"_params",{});this._basePath=t}addParam(t,r){this._params={...this.params,[t]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([t,r])=>`${t}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}};d();c();l();u();function mu(e){return((e.headers.get("content-type")||"").split(";").find(n=>n.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}d();c();l();u();var rt=(e,t,r,n)=>{let o=new un(`${e.url}${n}`);return o.addParam("organizationId",e.organizationId),e.authentication&&o.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:o.href,origin:"searchApiFetch"}};var gu=async(e,t)=>{let r=await He.call({...rt(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:ft(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=mu(r),o=await r.arrayBuffer(),a=new TextDecoder(n).decode(o);return iy(a)?{success:a}:{error:mt({response:r,body:a})}};function iy(e){return typeof e=="string"}d();c();l();u();function ay(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function sy(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function io(e,t){if(t&&e.name==="AbortError")return{error:sy(e)};if(e instanceof jt)return{error:ay(e)};throw e}var ao=class{constructor(t){this.options=t;ue(this,"apiCallsQueues",{unknown:new gt,mainSearch:new gt,facetValues:new gt,foldingCollection:new gt,instantResults:new gt})}async plan(t){let r=await He.call({...rt(t,"POST","application/json","/plan"),requestParams:ft(t),requestMetadata:{method:"plan"},...this.options});if(r instanceof Error)return io(r);let n=await r.json();return uy(n)?{success:n}:{error:mt({response:r,body:n})}}async querySuggest(t){let r=await He.call({...rt(t,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:ft(t),...this.options});if(r instanceof Error)return io(r);let n=await r.json(),o={response:r,body:n};return cy(n)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(o)).body}:{error:mt(o)}}async search(t,r){let n=r?.origin??"unknown",o=await this.apiCallsQueues[n].enqueue(m=>He.call({...rt(t,"POST","application/json",""),requestParams:ft(t),requestMetadata:{method:"search",origin:r?.origin},...this.options,signal:m??void 0}),{logger:this.options.logger,warnOnAbort:!r?.disableAbortWarning});if(o instanceof Error)return io(o,r?.disableAbortWarning);let i=await o.json(),a={response:o,body:i};return yu(i)?(a.body=hu(i),{success:(await this.options.postprocessSearchResponseMiddleware(a)).body}):{error:mt(a)}}async facetSearch(t){let r=await He.call({...rt(t,"POST","application/json","/facet"),requestParams:ft(t),requestMetadata:{method:"facetSearch"},...this.options});if(r instanceof Error)throw r;let n=await r.json(),o={response:r,body:n};return(await this.options.postprocessFacetSearchResponseMiddleware(o)).body}async recommendations(t){let r=await He.call({...rt(t,"POST","application/json",""),requestParams:ft(t),requestMetadata:{method:"recommendations"},...this.options});if(r instanceof Error)throw r;let n=await r.json();if(yu(n)){let o={response:r,body:n};return o.body=hu(n),{success:(await this.options.postprocessSearchResponseMiddleware(o)).body}}return{error:mt({response:r,body:n})}}async html(t){return gu(t,{...this.options})}async fieldDescriptions(t){let r=await He.call({...rt(t,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(r instanceof Error)throw r;let n=await r.json();return ly(n)?{success:n}:{error:mt({response:r,body:n})}}},so=e=>e.success!==void 0,De=e=>e.error!==void 0;function yu(e){return e.results!==void 0}function hu(e){let t=oo();return X(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function cy(e){return e.completions!==void 0}function uy(e){return e.preprocessingOutput!==void 0}function ly(e){return e.fields!==void 0}d();c();l();u();var Su=e=>e,vu=e=>e,Au=e=>e;d();c();l();u();d();c();l();u();d();c();l();u();function we(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var dy=typeof Symbol=="function"&&Symbol.observable||"@@observable",wu=dy,wa=()=>Math.random().toString(36).substring(7).split("").join("."),py={INIT:`@@redux/INIT${wa()}`,REPLACE:`@@redux/REPLACE${wa()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${wa()}`},co=py;function Ke(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function ba(e,t,r){if(typeof e!="function")throw new Error(we(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(we(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(we(1));return r(ba)(e,t)}let n=e,o=t,i=new Map,a=i,m=0,f=!1;function p(){a===i&&(a=new Map,i.forEach((I,C)=>{a.set(C,I)}))}function g(){if(f)throw new Error(we(3));return o}function h(I){if(typeof I!="function")throw new Error(we(4));if(f)throw new Error(we(5));let C=!0;p();let P=m++;return a.set(P,I),function(){if(C){if(f)throw new Error(we(6));C=!1,p(),a.delete(P),i=null}}}function S(I){if(!Ke(I))throw new Error(we(7));if(typeof I.type>"u")throw new Error(we(8));if(typeof I.type!="string")throw new Error(we(17));if(f)throw new Error(we(9));try{f=!0,o=n(o,I)}finally{f=!1}return(i=a).forEach(P=>{P()}),I}function y(I){if(typeof I!="function")throw new Error(we(10));n=I,S({type:co.REPLACE})}function v(){let I=h;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(we(11));function P(){let E=C;E.next&&E.next(g())}return P(),{unsubscribe:I(P)}},[wu](){return this}}}return S({type:co.INIT}),{dispatch:S,subscribe:h,getState:g,replaceReducer:y,[wu]:v}}function fy(e){Object.keys(e).forEach(t=>{let r=e[t];if(typeof r(void 0,{type:co.INIT})>"u")throw new Error(we(12));if(typeof r(void 0,{type:co.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(we(13))})}function or(e){let t=Object.keys(e),r={};for(let a=0;a<t.length;a++){let m=t[a];typeof e[m]=="function"&&(r[m]=e[m])}let n=Object.keys(r),o,i;try{fy(r)}catch(a){i=a}return function(m={},f){if(i)throw i;let p=!1,g={};for(let h=0;h<n.length;h++){let S=n[h],y=r[S],v=m[S],R=y(v,f);if(typeof R>"u"){let I=f&&f.type;throw new Error(we(14))}g[S]=R,p=p||R!==v}return p=p||n.length!==Object.keys(m).length,p?g:m}}function ir(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function bu(...e){return t=>(r,n)=>{let o=t(r,n),i=()=>{throw new Error(we(15))},a={getState:o.getState,dispatch:(f,...p)=>i(f,...p)},m=e.map(f=>f(a));return i=ir(...m)(o.dispatch),{...o,dispatch:i}}}function ar(e){return Ke(e)&&"type"in e&&typeof e.type=="string"}d();c();l();u();var Ta=Symbol.for("immer-nothing"),ln=Symbol.for("immer-draftable"),qe=Symbol.for("immer-state");function be(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var sr=Object.getPrototypeOf;function Ne(e){return!!e&&!!e[qe]}function je(e){return e?Fu(e)||Array.isArray(e)||!!e[ln]||!!e.constructor?.[ln]||cr(e)||yn(e):!1}var my=Object.prototype.constructor.toString(),Cu=new WeakMap;function Fu(e){if(!e||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=Cu.get(r);return n===void 0&&(n=Function.toString.call(r),Cu.set(r,n)),n===my}function Da(e){return Ne(e)||be(15,e),e[qe].base_}function dn(e,t,r=!0){Nt(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(o=>{t(o,e[o],e)}):e.forEach((n,o)=>t(o,n,e))}function Nt(e){let t=e[qe];return t?t.type_:Array.isArray(e)?1:cr(e)?2:yn(e)?3:0}function pn(e,t){return Nt(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ca(e,t){return Nt(e)===2?e.get(t):e[t]}function Pu(e,t,r){let n=Nt(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function gy(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function cr(e){return e instanceof Map}function yn(e){return e instanceof Set}function Mt(e){return e.copy_||e.base_}function Ea(e,t){if(cr(e))return new Map(e);if(yn(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=Fu(e);if(t===!0||t==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(e);delete n[qe];let o=Reflect.ownKeys(n);for(let i=0;i<o.length;i++){let a=o[i],m=n[a];m.writable===!1&&(m.writable=!0,m.configurable=!0),(m.get||m.set)&&(n[a]={configurable:!0,writable:!0,enumerable:m.enumerable,value:e[a]})}return Object.create(sr(e),n)}else{let n=sr(e);if(n!==null&&r)return{...e};let o=Object.create(n);return Object.assign(o,e)}}function fo(e,t=!1){return mo(e)||Ne(e)||!je(e)||(Nt(e)>1&&Object.defineProperties(e,{set:uo,add:uo,clear:uo,delete:uo}),Object.freeze(e),t&&Object.values(e).forEach(r=>fo(r,!0))),e}function yy(){be(2)}var uo={value:yy};function mo(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Ia={};function _t(e){let t=Ia[e];return t||be(0,e),t}function hy(e,t){Ia[e]||(Ia[e]=t)}var fn;function ku(){return fn}function Sy(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xu(e,t){t&&(_t("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Fa(e){Pa(e),e.drafts_.forEach(vy),e.drafts_=null}function Pa(e){e===fn&&(fn=e.parent_)}function Ru(e){return fn=Sy(fn,e)}function vy(e){let t=e[qe];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Eu(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[qe].modified_&&(Fa(t),be(4)),je(e)&&(e=lo(t,e),t.parent_||po(t,e)),t.patches_&&_t("Patches").generateReplacementPatches_(r[qe].base_,e,t.patches_,t.inversePatches_)):e=lo(t,r,[]),Fa(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ta?e:void 0}function lo(e,t,r){if(mo(t))return t;let n=e.immer_.shouldUseStrictIteration(),o=t[qe];if(!o)return dn(t,(i,a)=>Iu(e,o,t,i,a,r),n),t;if(o.scope_!==e)return t;if(!o.modified_)return po(e,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;let i=o.copy_,a=i,m=!1;o.type_===3&&(a=new Set(i),i.clear(),m=!0),dn(a,(f,p)=>Iu(e,o,i,f,p,r,m),n),po(e,i,!1),r&&e.patches_&&_t("Patches").generatePatches_(o,r,e.patches_,e.inversePatches_)}return o.copy_}function Iu(e,t,r,n,o,i,a){if(o==null||typeof o!="object"&&!a)return;let m=mo(o);if(!(m&&!a)){if(Ne(o)){let f=i&&t&&t.type_!==3&&!pn(t.assigned_,n)?i.concat(n):void 0,p=lo(e,o,f);if(Pu(r,n,p),Ne(p))e.canAutoFreeze_=!1;else return}else a&&r.add(o);if(je(o)&&!m){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===o&&m)return;lo(e,o),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(cr(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&po(e,o)}}}function po(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&fo(t,r)}function Ay(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:ku(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},o=n,i=qa;r&&(o=[n],i=mn);let{revoke:a,proxy:m}=Proxy.revocable(o,i);return n.draft_=m,n.revoke_=a,m}var qa={get(e,t){if(t===qe)return e;let r=Mt(e);if(!pn(r,t))return wy(e,r,t);let n=r[t];return e.finalized_||!je(n)?n:n===xa(e.base_,t)?(Ra(e),e.copy_[t]=Oa(n,e)):n},has(e,t){return t in Mt(e)},ownKeys(e){return Reflect.ownKeys(Mt(e))},set(e,t,r){let n=Ou(Mt(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let o=xa(Mt(e),t),i=o?.[qe];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(gy(r,o)&&(r!==void 0||pn(e.base_,t)))return!0;Ra(e),ka(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return xa(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ra(e),ka(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=Mt(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){be(11)},getPrototypeOf(e){return sr(e.base_)},setPrototypeOf(){be(12)}},mn={};dn(qa,(e,t)=>{mn[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});mn.deleteProperty=function(e,t){return mn.set.call(this,e,t,void 0)};mn.set=function(e,t,r){return qa.set.call(this,e[0],t,r,e[0])};function xa(e,t){let r=e[qe];return(r?Mt(r):e)[t]}function wy(e,t,r){let n=Ou(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function Ou(e,t){if(!(t in e))return;let r=sr(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=sr(r)}}function ka(e){e.modified_||(e.modified_=!0,e.parent_&&ka(e.parent_))}function Ra(e){e.copy_||(e.copy_=Ea(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var by=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let i=r;r=t;let a=this;return function(f=i,...p){return a.produce(f,g=>r.call(this,g,...p))}}typeof r!="function"&&be(6),n!==void 0&&typeof n!="function"&&be(7);let o;if(je(t)){let i=Ru(this),a=Oa(t,void 0),m=!0;try{o=r(a),m=!1}finally{m?Fa(i):Pa(i)}return xu(i,n),Eu(o,i)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===Ta&&(o=void 0),this.autoFreeze_&&fo(o,!0),n){let i=[],a=[];_t("Patches").generateReplacementPatches_(t,o,i,a),n(i,a)}return o}else be(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...m)=>this.produceWithPatches(a,f=>t(f,...m));let n,o;return[this.produce(t,r,(a,m)=>{n=a,o=m}),n,o]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){je(e)||be(8),Ne(e)&&(e=Tu(e));let t=Ru(this),r=Oa(e,void 0);return r[qe].isManual_=!0,Pa(t),r}finishDraft(e,t){let r=e&&e[qe];(!r||!r.isManual_)&&be(9);let{scope_:n}=r;return xu(n,t),Eu(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));let n=_t("Patches").applyPatches_;return Ne(e)?n(e,t):this.produce(e,o=>n(o,t))}};function Oa(e,t){let r=cr(e)?_t("MapSet").proxyMap_(e,t):yn(e)?_t("MapSet").proxySet_(e,t):Ay(e,t);return(t?t.scope_:ku()).drafts_.push(r),r}function Tu(e){return Ne(e)||be(10,e),Du(e)}function Du(e){if(!je(e)||mo(e))return e;let t=e[qe],r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ea(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Ea(e,!0);return dn(r,(o,i)=>{Pu(r,o,Du(i))},n),t&&(t.finalized_=!1),r}function qu(){let t="replace",r="add",n="remove";function o(S,y,v,R){switch(S.type_){case 0:case 2:return a(S,y,v,R);case 1:return i(S,y,v,R);case 3:return m(S,y,v,R)}}function i(S,y,v,R){let{base_:I,assigned_:C}=S,P=S.copy_;P.length<I.length&&([I,P]=[P,I],[v,R]=[R,v]);for(let x=0;x<I.length;x++)if(C[x]&&P[x]!==I[x]){let E=y.concat([x]);v.push({op:t,path:E,value:h(P[x])}),R.push({op:t,path:E,value:h(I[x])})}for(let x=I.length;x<P.length;x++){let E=y.concat([x]);v.push({op:r,path:E,value:h(P[x])})}for(let x=P.length-1;I.length<=x;--x){let E=y.concat([x]);R.push({op:n,path:E})}}function a(S,y,v,R){let{base_:I,copy_:C}=S;dn(S.assigned_,(P,x)=>{let E=Ca(I,P),M=Ca(C,P),T=x?pn(I,P)?t:r:n;if(E===M&&T===t)return;let F=y.concat(P);v.push(T===n?{op:T,path:F}:{op:T,path:F,value:M}),R.push(T===r?{op:n,path:F}:T===n?{op:r,path:F,value:h(E)}:{op:t,path:F,value:h(E)})})}function m(S,y,v,R){let{base_:I,copy_:C}=S,P=0;I.forEach(x=>{if(!C.has(x)){let E=y.concat([P]);v.push({op:n,path:E,value:x}),R.unshift({op:r,path:E,value:x})}P++}),P=0,C.forEach(x=>{if(!I.has(x)){let E=y.concat([P]);v.push({op:r,path:E,value:x}),R.unshift({op:n,path:E,value:x})}P++})}function f(S,y,v,R){v.push({op:t,path:[],value:y===Ta?void 0:y}),R.push({op:t,path:[],value:S})}function p(S,y){return y.forEach(v=>{let{path:R,op:I}=v,C=S;for(let M=0;M<R.length-1;M++){let T=Nt(C),F=R[M];typeof F!="string"&&typeof F!="number"&&(F=""+F),(T===0||T===1)&&(F==="__proto__"||F==="constructor")&&be(19),typeof C=="function"&&F==="prototype"&&be(19),C=Ca(C,F),typeof C!="object"&&be(18,R.join("/"))}let P=Nt(C),x=g(v.value),E=R[R.length-1];switch(I){case t:switch(P){case 2:return C.set(E,x);case 3:be(16);default:return C[E]=x}case r:switch(P){case 1:return E==="-"?C.push(x):C.splice(E,0,x);case 2:return C.set(E,x);case 3:return C.add(x);default:return C[E]=x}case n:switch(P){case 1:return C.splice(E,1);case 2:return C.delete(E);case 3:return C.delete(v.value);default:return delete C[E]}default:be(17,I)}}),S}function g(S){if(!je(S))return S;if(Array.isArray(S))return S.map(g);if(cr(S))return new Map(Array.from(S.entries()).map(([v,R])=>[v,g(R)]));if(yn(S))return new Set(Array.from(S).map(g));let y=Object.create(sr(S));for(let v in S)y[v]=g(S[v]);return pn(S,ln)&&(y[ln]=S[ln]),y}function h(S){return Ne(S)?g(S):S}hy("Patches",{applyPatches_:p,generatePatches_:o,generateReplacementPatches_:f})}var gn=new by,nt=gn.produce,go=gn.produceWithPatches.bind(gn);var ja=gn.applyPatches.bind(gn);d();c();l();u();function Cy(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function xy(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Ry(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var ju=e=>Array.isArray(e)?e:[e];function Ey(e){let t=Array.isArray(e[0])?e[0]:e;return Ry(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Iy(e,t){let r=[],{length:n}=e;for(let o=0;o<n;o++)r.push(e[o].apply(null,t));return r}var xE=Symbol();var RE=Object.getPrototypeOf({});var Fy=class{constructor(e){this.value=e}deref(){return this.value}},Py=typeof WeakRef<"u"?WeakRef:Fy,ky=0,Mu=1;function yo(){return{s:ky,v:void 0,o:null,p:null}}function ur(e,t={}){let r=yo(),{resultEqualityCheck:n}=t,o,i=0;function a(){let m=r,{length:f}=arguments;for(let h=0,S=f;h<S;h++){let y=arguments[h];if(typeof y=="function"||typeof y=="object"&&y!==null){let v=m.o;v===null&&(m.o=v=new WeakMap);let R=v.get(y);R===void 0?(m=yo(),v.set(y,m)):m=R}else{let v=m.p;v===null&&(m.p=v=new Map);let R=v.get(y);R===void 0?(m=yo(),v.set(y,m)):m=R}}let p=m,g;if(m.s===Mu)g=m.v;else if(g=e.apply(null,arguments),i++,n){let h=o?.deref?.()??o;h!=null&&n(h,g)&&(g=h,i!==0&&i--),o=typeof g=="object"&&g!==null||typeof g=="function"?new Py(g):g}return p.s=Mu,p.v=g,g}return a.clearCache=()=>{r=yo(),a.resetResultsCount()},a.resultsCount=()=>i,a.resetResultsCount=()=>{i=0},a}function Nu(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...o)=>{let i=0,a=0,m,f={},p=o.pop();typeof p=="object"&&(f=p,p=o.pop()),Cy(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);let g={...r,...f},{memoize:h,memoizeOptions:S=[],argsMemoize:y=ur,argsMemoizeOptions:v=[],devModeChecks:R={}}=g,I=ju(S),C=ju(v),P=Ey(o),x=h(function(){return i++,p.apply(null,arguments)},...I),E=!0,M=y(function(){a++;let F=Iy(P,arguments);return m=x.apply(null,F),m},...C);return Object.assign(M,{resultFunc:p,memoizedResultFunc:x,dependencies:P,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>m,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:y})};return Object.assign(n,{withTypes:()=>n}),n}var ye=Nu(ur),Oy=Object.assign((e,t=ye)=>{xy(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((a,m,f)=>(a[r[f]]=m,a),{}))},{withTypes:()=>Oy});d();c();l();u();function _u(e){return({dispatch:r,getState:n})=>o=>i=>typeof i=="function"?i(r,n,e):o(i)}var Vu=_u(),Uu=_u;var Ty=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ir:ir.apply(null,arguments)},BE=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}},Dy=e=>e&&typeof e.match=="function";function O(e,t){function r(...n){if(t){let o=t(...n);if(!o)throw new Error(Pe(0));return{type:e,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>ar(n)&&n.type===e,r}var Wu=class hn extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,hn.prototype)}static get[Symbol.species](){return hn}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new hn(...t[0].concat(this)):new hn(...t.concat(this))}};function Lu(e){return je(e)?nt(e,()=>{}):e}function Qu(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function qy(e){return typeof e=="boolean"}var jy=()=>function(t){let{thunk:r=!0,immutableCheck:n=!0,serializableCheck:o=!0,actionCreatorCheck:i=!0}=t??{},a=new Wu;return r&&(qy(r)?a.push(Vu):a.push(Uu(r.extraArgument))),a},Sn="RTK_autoBatch",pr=()=>e=>({payload:e,meta:{[Sn]:!0}}),Bu=e=>t=>{setTimeout(t,e)},My=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),o=!0,i=!1,a=!1,m=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Bu(10):e.type==="callback"?e.queueNotification:Bu(e.timeout),p=()=>{a=!1,i&&(i=!1,m.forEach(g=>g()))};return Object.assign({},n,{subscribe(g){let h=()=>o&&g(),S=n.subscribe(h);return m.add(g),()=>{S(),m.delete(g)}},dispatch(g){try{return o=!g?.meta?.[Sn],i=!o,i&&(a||(a=!0,f(p))),n.dispatch(g)}finally{o=!0}}})},Ny=e=>function(r){let{autoBatch:n=!0}=r??{},o=new Wu(e);return n&&o.push(My(typeof n=="object"?n:void 0)),o};function Ku(e){let t=jy(),{reducer:r=void 0,middleware:n,devTools:o=!0,preloadedState:i=void 0,enhancers:a=void 0}=e||{},m;if(typeof r=="function")m=r;else if(Ke(r))m=or(r);else throw new Error(Pe(1));let f;typeof n=="function"?f=n(t):f=t();let p=ir;o&&(p=Ty({trace:!1,...typeof o=="object"&&o}));let g=bu(...f),h=Ny(g),S=typeof a=="function"?a(h):h(),y=p(...S);return ba(m,i,y)}function Yu(e){let t={},r=[],n,o={addCase(i,a){let m=typeof i=="string"?i:i.type;if(!m)throw new Error(Pe(28));if(m in t)throw new Error(Pe(29));return t[m]=a,o},addMatcher(i,a){return r.push({matcher:i,reducer:a}),o},addDefaultCase(i){return n=i,o}};return e(o),[t,r,n]}function _y(e){return typeof e=="function"}function me(e,t){let[r,n,o]=Yu(t),i;if(_y(e))i=()=>Lu(e());else{let m=Lu(e);i=()=>m}function a(m=i(),f){let p=[r[f.type],...n.filter(({matcher:g})=>g(f)).map(({reducer:g})=>g)];return p.filter(g=>!!g).length===0&&(p=[o]),p.reduce((g,h)=>{if(h)if(Ne(g)){let y=h(g,f);return y===void 0?g:y}else{if(je(g))return nt(g,S=>h(S,f));{let S=h(g,f);if(S===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return g},m)}return a.getInitialState=i,a}var Ju=(e,t)=>Dy(e)?e.match(t):e(t);function Ye(...e){return t=>e.some(r=>Ju(r,t))}function dr(...e){return t=>e.every(r=>Ju(r,t))}function Ao(e,t){if(!e||!e.meta)return!1;let r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function vn(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function wo(...e){return e.length===0?t=>Ao(t,["pending"]):vn(e)?Ye(...e.map(t=>t.pending)):wo()(e[0])}function Lt(...e){return e.length===0?t=>Ao(t,["rejected"]):vn(e)?Ye(...e.map(t=>t.rejected)):Lt()(e[0])}function An(...e){let t=r=>r&&r.meta&&r.meta.rejectedWithValue;return e.length===0?dr(Lt(...e),t):vn(e)?dr(Lt(...e),t):An()(e[0])}function ot(...e){return e.length===0?t=>Ao(t,["fulfilled"]):vn(e)?Ye(...e.map(t=>t.fulfilled)):ot()(e[0])}function bo(...e){return e.length===0?t=>Ao(t,["pending","fulfilled","rejected"]):vn(e)?Ye(...e.flatMap(t=>[t.pending,t.rejected,t.fulfilled])):bo()(e[0])}var Vy="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",wn=(e=21)=>{let t="",r=e;for(;r--;)t+=Vy[Math.random()*64|0];return t},Uy=["name","message","stack","code"],Ma=class{constructor(e,t){ue(this,"_type");this.payload=e,this.meta=t}},$u=class{constructor(e,t){ue(this,"_type");this.payload=e,this.meta=t}},Ly=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of Uy)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},ce=(()=>{function e(t,r,n){let o=O(t+"/fulfilled",(f,p,g,h)=>({payload:f,meta:{...h||{},arg:g,requestId:p,requestStatus:"fulfilled"}})),i=O(t+"/pending",(f,p,g)=>({payload:void 0,meta:{...g||{},arg:p,requestId:f,requestStatus:"pending"}})),a=O(t+"/rejected",(f,p,g,h,S)=>({payload:h,error:(n&&n.serializeError||Ly)(f||"Rejected"),meta:{...S||{},arg:g,requestId:p,rejectedWithValue:!!h,requestStatus:"rejected",aborted:f?.name==="AbortError",condition:f?.name==="ConditionError"}}));function m(f){return(p,g,h)=>{let S=n?.idGenerator?n.idGenerator(f):wn(),y=new s.AbortController,v,R;function I(P){R=P,y.abort()}let C=async function(){let P;try{let E=n?.condition?.(f,{getState:g,extra:h});if(By(E)&&(E=await E),E===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let M=new Promise((T,F)=>{v=()=>{F({name:"AbortError",message:R||"Aborted"})},y.signal.addEventListener("abort",v)});p(i(S,f,n?.getPendingMeta?.({requestId:S,arg:f},{getState:g,extra:h}))),P=await Promise.race([M,Promise.resolve(r(f,{dispatch:p,getState:g,extra:h,requestId:S,signal:y.signal,abort:I,rejectWithValue:(T,F)=>new Ma(T,F),fulfillWithValue:(T,F)=>new $u(T,F)})).then(T=>{if(T instanceof Ma)throw T;return T instanceof $u?o(T.payload,S,f,T.meta):o(T,S,f)})])}catch(E){P=E instanceof Ma?a(null,S,f,E.payload,E.meta):a(E,S,f)}finally{v&&y.signal.removeEventListener("abort",v)}return n&&!n.dispatchConditionRejection&&a.match(P)&&P.meta.condition||p(P),P}();return Object.assign(C,{abort:I,requestId:S,arg:f,unwrap(){return C.then(Qy)}})}}return Object.assign(m,{pending:i,rejected:a,fulfilled:o,settled:Ye(a,o),typePrefix:t})}return e.withTypes=()=>e,e})();function Qy(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function By(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Xu=Symbol.for("rtk-slice-createasyncthunk"),WE={[Xu]:ce};function $y(e,t){return`${e}/${t}`}function Hy({creators:e}={}){let t=e?.asyncThunk?.[Xu];return function(n){let{name:o,reducerPath:i=o}=n;if(!o)throw new Error(Pe(11));typeof process<"u";let a=(typeof n.reducers=="function"?n.reducers(zy()):n.reducers)||{},m=Object.keys(a),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(P,x){let E=typeof P=="string"?P:P.type;if(!E)throw new Error(Pe(12));if(E in f.sliceCaseReducersByType)throw new Error(Pe(13));return f.sliceCaseReducersByType[E]=x,p},addMatcher(P,x){return f.sliceMatchers.push({matcher:P,reducer:x}),p},exposeAction(P,x){return f.actionCreators[P]=x,p},exposeCaseReducer(P,x){return f.sliceCaseReducersByName[P]=x,p}};m.forEach(P=>{let x=a[P],E={reducerName:P,type:$y(o,P),createNotation:typeof n.reducers=="function"};Ky(x)?Jy(E,x,p,t):Wy(E,x,p)});function g(){let[P={},x=[],E=void 0]=typeof n.extraReducers=="function"?Yu(n.extraReducers):[n.extraReducers],M={...P,...f.sliceCaseReducersByType};return me(n.initialState,T=>{for(let F in M)T.addCase(F,M[F]);for(let F of f.sliceMatchers)T.addMatcher(F.matcher,F.reducer);for(let F of x)T.addMatcher(F.matcher,F.reducer);E&&T.addDefaultCase(E)})}let h=P=>P,S=new Map,y;function v(P,x){return y||(y=g()),y(P,x)}function R(){return y||(y=g()),y.getInitialState()}function I(P,x=!1){function E(T){let F=T[P];return typeof F>"u"&&x&&(F=R()),F}function M(T=h){let F=Qu(S,x,()=>new WeakMap);return Qu(F,T,()=>{let k={};for(let[D,_]of Object.entries(n.selectors??{}))k[D]=Gy(_,T,R,x);return k})}return{reducerPath:P,getSelectors:M,get selectors(){return M(E)},selectSlice:E}}let C={name:o,reducer:v,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:R,...I(i),injectInto(P,{reducerPath:x,...E}={}){let M=x??i;return P.inject({reducerPath:M,reducer:v},E),{...C,...I(M,!0)}}};return C}}function Gy(e,t,r,n){function o(i,...a){let m=t(i);return typeof m>"u"&&n&&(m=r()),e(m,...a)}return o.unwrapped=e,o}var Qt=Hy();function zy(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Wy({type:e,reducerName:t,createNotation:r},n,o){let i,a;if("reducer"in n){if(r&&!Yy(n))throw new Error(Pe(17));i=n.reducer,a=n.prepare}else i=n;o.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,a?O(e,a):O(e))}function Ky(e){return e._reducerDefinitionType==="asyncThunk"}function Yy(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Jy({type:e,reducerName:t},r,n,o){if(!o)throw new Error(Pe(18));let{payloadCreator:i,fulfilled:a,pending:m,rejected:f,settled:p,options:g}=r,h=o(e,i,g);n.exposeAction(t,h),a&&n.addCase(h.fulfilled,a),m&&n.addCase(h.pending,m),f&&n.addCase(h.rejected,f),p&&n.addMatcher(h.settled,p),n.exposeCaseReducer(t,{fulfilled:a||ho,pending:m||ho,rejected:f||ho,settled:p||ho})}function ho(){}var Xy="task",Zu="listener",el="completed",Va="cancelled",Zy=`task-${Va}`,eh=`task-${el}`,Na=`${Zu}-${Va}`,th=`${Zu}-${el}`,Co=class{constructor(e){ue(this,"name","TaskAbortError");ue(this,"message");this.code=e,this.message=`${Xy} ${Va} (reason: ${e})`}},Ua=(e,t)=>{if(typeof e!="function")throw new TypeError(Pe(32))},So=()=>{},tl=(e,t=So)=>(e.catch(t),e),rl=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Vt=(e,t)=>{let r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ut=e=>{if(e.aborted){let{reason:t}=e;throw new Co(t)}};function nl(e,t){let r=So;return new Promise((n,o)=>{let i=()=>o(new Co(e.reason));if(e.aborted){i();return}r=rl(e,i),t.finally(()=>r()).then(n,o)}).finally(()=>{r=So})}var rh=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Co?"cancelled":"rejected",error:r}}finally{t?.()}},vo=e=>t=>tl(nl(e,t).then(r=>(Ut(e),r))),ol=e=>{let t=vo(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:lr}=Object,Hu={},xo="listenerMiddleware",nh=(e,t)=>{let r=n=>rl(e,()=>Vt(n,e.reason));return(n,o)=>{Ua(n,"taskExecutor");let i=new s.AbortController;r(i);let a=rh(async()=>{Ut(e),Ut(i.signal);let m=await n({pause:vo(i.signal),delay:ol(i.signal),signal:i.signal});return Ut(i.signal),m},()=>Vt(i,eh));return o?.autoJoin&&t.push(a.catch(So)),{result:vo(e)(a),cancel(){Vt(i,Zy)}}}},oh=(e,t)=>{let r=async(n,o)=>{Ut(t);let i=()=>{},m=[new Promise((f,p)=>{let g=e({predicate:n,effect:(h,S)=>{S.unsubscribe(),f([h,S.getState(),S.getOriginalState()])}});i=()=>{g(),p()}})];o!=null&&m.push(new Promise(f=>setTimeout(f,o,null)));try{let f=await nl(t,Promise.race(m));return Ut(t),f}finally{i()}};return(n,o)=>tl(r(n,o))},il=e=>{let{type:t,actionCreator:r,matcher:n,predicate:o,effect:i}=e;if(t)o=O(t).match;else if(r)t=r.type,o=r.match;else if(n)o=n;else if(!o)throw new Error(Pe(21));return Ua(i,"options.listener"),{predicate:o,type:t,effect:i}},al=lr(e=>{let{type:t,predicate:r,effect:n}=il(e);return{id:wn(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Pe(22))}}},{withTypes:()=>al}),Gu=(e,t)=>{let{type:r,effect:n,predicate:o}=il(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===o)&&i.effect===n)},_a=e=>{e.pending.forEach(t=>{Vt(t,Na)})},ih=e=>()=>{e.forEach(_a),e.clear()},zu=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},sl=lr(O(`${xo}/add`),{withTypes:()=>sl}),ah=O(`${xo}/removeAll`),cl=lr(O(`${xo}/remove`),{withTypes:()=>cl}),sh=(...e)=>{console.error(`${xo}/error`,...e)},ul=(e={})=>{let t=new Map,{extra:r,onError:n=sh}=e;Ua(n,"onError");let o=g=>(g.unsubscribe=()=>t.delete(g.id),t.set(g.id,g),h=>{g.unsubscribe(),h?.cancelActive&&_a(g)}),i=g=>{let h=Gu(t,g)??al(g);return o(h)};lr(i,{withTypes:()=>i});let a=g=>{let h=Gu(t,g);return h&&(h.unsubscribe(),g.cancelActive&&_a(h)),!!h};lr(a,{withTypes:()=>a});let m=async(g,h,S,y)=>{let v=new s.AbortController,R=oh(i,v.signal),I=[];try{g.pending.add(v),await Promise.resolve(g.effect(h,lr({},S,{getOriginalState:y,condition:(C,P)=>R(C,P).then(Boolean),take:R,delay:ol(v.signal),pause:vo(v.signal),extra:r,signal:v.signal,fork:nh(v.signal,I),unsubscribe:g.unsubscribe,subscribe:()=>{t.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((C,P,x)=>{C!==v&&(Vt(C,Na),x.delete(C))})},cancel:()=>{Vt(v,Na),g.pending.delete(v)},throwIfCancelled:()=>{Ut(v.signal)}})))}catch(C){C instanceof Co||zu(n,C,{raisedBy:"effect"})}finally{await Promise.all(I),Vt(v,th),g.pending.delete(v)}},f=ih(t);return{middleware:g=>h=>S=>{if(!ar(S))return h(S);if(sl.match(S))return i(S.payload);if(ah.match(S)){f();return}if(cl.match(S))return a(S.payload);let y=g.getState(),v=()=>{if(y===Hu)throw new Error(Pe(23));return y},R;try{if(R=h(S),t.size>0){let I=g.getState(),C=Array.from(t.values());for(let P of C){let x=!1;try{x=P.predicate(S,I,y)}catch(E){x=!1,zu(n,E,{raisedBy:"predicate"})}x&&m(P,S,g,v)}}}finally{y=Hu}return R},startListening:i,stopListening:a,clearListeners:f}};var YE=Symbol.for("rtk-state-proxy-original");function Pe(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}d();c();l();u();var W=new $({required:!0,emptyAllowed:!1}),Ce=new $({required:!1,emptyAllowed:!1}),xe=new $({required:!0,emptyAllowed:!0}),cI=new $({required:!1,emptyAllowed:!0}),Ro=new oe({each:W,required:!0}),ll=new $({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),dl=new $({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),uI=new $({required:!0,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),it=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),Ue=(e,t)=>{if("required"in t)return{payload:new Te({value:t}).validate({value:e}).value};let o=new K({options:{required:!0},values:t}).validate(e);if(o)throw new on(o);return{payload:e}},N=(e,t)=>{try{return Ue(e,t)}catch(r){return{payload:e,error:it(r)}}},pl=(e,t,r,n)=>{let o=`Check the initialState of ${n}`;return ml(e,t,r,o,"Controller initialization error")},fl=(e,t,r,n)=>{let o=`Check the options of ${n}`;return ml(e,t,r,o,"Controller initialization error")},ml=(e,t,r,n,o)=>{try{return t.validate(r,n)}catch(i){throw e.logger.error(i,o),i}};d();c();l();u();var fr="3.45.0",gl=["@coveo/atomic","@coveo/quantic"];var La=()=>Ce,yl=()=>W,yt=O("configuration/updateBasicConfiguration",e=>N(e,{accessToken:Ce,environment:new $({required:!1,constrainTo:["prod","hipaa","stg","dev"]}),organizationId:Ce})),Je=O("configuration/updateSearchConfiguration",e=>N(e,{proxyBaseUrl:new $({required:!1,url:!0}),pipeline:new $({required:!1,emptyAllowed:!0}),searchHub:Ce,timezone:Ce,locale:Ce,authenticationProviders:new oe({required:!1,each:W})})),ch={enabled:new ee({default:!0}),originContext:La(),originLevel2:La(),originLevel3:La(),proxyBaseUrl:new $({required:!1,url:!0}),runtimeEnvironment:new pe,anonymous:new ee({default:!1}),deviceId:Ce,userDisplayName:Ce,documentLocation:Ce,trackingId:dl,analyticsMode:new $({constrainTo:["legacy","next"],required:!1,default:"next"}),source:new K({options:{required:!1},values:gl.reduce((e,t)=>(e[t]=ll,e),{})})},mr=O("configuration/updateAnalyticsConfiguration",e=>N(e,ch)),gr=O("configuration/analytics/disable"),yr=O("configuration/analytics/enable"),Eo=O("configuration/analytics/originlevel2",e=>N(e,{originLevel2:yl()})),Io=O("configuration/analytics/originlevel3",e=>N(e,{originLevel3:yl()})),hl=O("knowledge/setAgentId",e=>N(e,new $({required:!0})));d();c();l();u();d();c();l();u();d();c();l();u();var Sl={q:new $,enableQuerySyntax:new ee,aq:new $,cq:new $,firstResult:new J({min:0}),numberOfResults:new J({min:0}),sortCriteria:new $,f:new K,fExcluded:new K,cf:new K,nf:new K,mnf:new K,df:new K,debug:new ee,sf:new K,tab:new $,af:new K};var ht=O("searchParameters/restore",e=>N(e,Sl)),vl=O("searchParameters/restoreTab",e=>N(e,W));d();c();l();u();var Fo=O("debug/enable"),Po=O("debug/disable");d();c();l();u();var ko=()=>!1;var Oo=me(ko(),e=>{e.addCase(Fo,()=>!0).addCase(Po,()=>!1).addCase(ht,(t,r)=>r.payload.debug??t)});d();c();l();u();var hr=O("pipeline/set",e=>N(e,new $({required:!0,emptyAllowed:!0})));d();c();l();u();d();c();l();u();var uh=O("history/undo"),lh=O("history/redo"),Xe=O("history/snapshot"),SF=ce("history/back",async(e,{dispatch:t})=>{t(uh()),await t(Me())}),vF=ce("history/forward",async(e,{dispatch:t})=>{t(lh()),await t(Me())}),Me=ce("history/change",async(e,{getState:t})=>t().history.present);d();c();l();u();var Sr=()=>"";var vr=me(Sr(),e=>{e.addCase(hr,(t,r)=>r.payload).addCase(Me.fulfilled,(t,r)=>r.payload?.pipeline??t).addCase(Je,(t,r)=>r.payload.pipeline||t)});d();c();l();u();d();c();l();u();var To=O("app/setError");d();c();l();u();d();c();l();u();d();c();l();u();d();c();l();u();var Ar=class e{static set(t,r,n){let o,i,a;n&&(i=new Date,i.setTime(i.getTime()+n));let m=window.location.hostname,f=/^(\d{1,3}\.){3}\d{1,3}$/,p=/^([0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}$/;f.test(m)||p.test(m)||m.indexOf(".")===-1?Qa(t,r,i):(a=m.split("."),o=a[a.length-2]+"."+a[a.length-1],Qa(t,r,i,o))}static get(t){let r=t+"=",n=document.cookie.split(";");for(let o=0;o<n.length;o++){let i=n[o];if(i=i.replace(/^\s+/,""),i.lastIndexOf(r,0)===0)return i.substring(r.length,i.length)}return null}static erase(t){e.set(t,"",-1)}};function Qa(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}d();c();l();u();function dh(){return typeof navigator<"u"}function Al(){try{return typeof localStorage<"u"}catch{return!1}}function wl(){try{return typeof sessionStorage<"u"}catch{return!1}}function bl(){return!!(dh()&&navigator.cookieEnabled)}var Cl=null;function xl(){return Cl||(Al()?localStorage:bl()?new Ba:wl()?sessionStorage:new $a)}var wr=class wr{getItem(t){return Ar.get(`${wr.prefix}${t}`)}removeItem(t){Ar.erase(`${wr.prefix}${t}`)}setItem(t,r,n){Ar.set(`${wr.prefix}${t}`,r,n)}};ue(wr,"prefix","coveo_");var Ba=wr;var $a=class{getItem(t){return null}removeItem(t){}setItem(t,r){}};var Do="__coveo.analytics.history",ph=20,fh=1e3*60,mh=75,Bt=class Bt{constructor(t){ue(this,"store");this.store=t||xl()}static getInstance(t){return Bt.instance||(Bt.instance=new Bt(t)),Bt.instance}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}async addElementAsync(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=await this.getHistoryWithInternalTimeAsync();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}async getHistoryAsync(){let t=await this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryWithInternalTime(){try{let t=this.store.getItem(Do);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}async getHistoryWithInternalTimeAsync(){try{let t=await this.store.getItem(Do);return t?JSON.parse(t):[]}catch{return[]}}setHistory(t){try{this.store.setItem(Do,JSON.stringify(t.slice(0,ph)))}catch{}}clear(){try{this.store.removeItem(Do)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,o)=>(o.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,mh)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value===t.value?(t.internalTime||0)-(r.internalTime||0)>fh:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:o,value:i}=r;return{name:n,time:o,value:i}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:o}=t;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};ue(Bt,"instance",null);var Ha=Bt,Le=Ha;d();c();l();u();d();c();l();u();var br=ye(e=>e.source,e=>Object.entries(e).map(([t,r])=>`${t}@${r}`).concat(`@coveo/headless@${fr}`));d();c();l();u();d();c();l();u();function at(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function q(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function m(g){try{p(n.next(g))}catch(h){a(h)}}function f(g){try{p(n.throw(g))}catch(h){a(h)}}function p(g){g.done?i(g.value):o(g.value).then(m,f)}p((n=n.apply(e,t||[])).next())})}var ae;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(ae||(ae={}));function Wa(){return typeof window<"u"}function ss(){return typeof navigator<"u"}function Cr(){return typeof document<"u"}function Ka(){try{return typeof localStorage<"u"}catch{return!1}}function gh(){try{return typeof sessionStorage<"u"}catch{return!1}}function _l(){return ss()&&navigator.cookieEnabled}var yh=[ae.click,ae.custom,ae.search,ae.view],hh=(e,t)=>yh.indexOf(e)!==-1?Object.assign({language:Cr()?document.documentElement.lang:"unknown",userAgent:ss()?navigator.userAgent:"unknown"},t):t,Cn=class e{static set(t,r,n){var o,i,a,m;n&&(i=new Date,i.setTime(i.getTime()+n)),m=window.location.hostname,m.indexOf(".")===-1?Rl(t,r,i):(a=m.split("."),o=a[a.length-2]+"."+a[a.length-1],Rl(t,r,i,o))}static get(t){for(var r=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var i=n[o];if(i=i.replace(/^\s+/,""),i.lastIndexOf(r,0)===0)return i.substring(r.length,i.length)}return null}static erase(t){e.set(t,"",-1)}};function Rl(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function Sh(){return Ka()?localStorage:_l()?new xn:gh()?sessionStorage:new Rr}var xn=class e{getItem(t){return Cn.get(`${e.prefix}${t}`)}removeItem(t){Cn.erase(`${e.prefix}${t}`)}setItem(t,r,n){Cn.set(`${e.prefix}${t}`,r,n)}};xn.prefix="coveo_";var Ya=class{constructor(){this.cookieStorage=new xn}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3)}},Rr=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},qo="__coveo.analytics.history",vh=20,Ah=1e3*60,wh=75,No=class{constructor(t){this.store=t||Sh()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return q(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return q(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(qo);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return q(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(qo);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(qo,JSON.stringify(t.slice(0,vh)))}catch{}}clear(){try{this.store.removeItem(qo)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,o)=>(o.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,wh)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>Ah:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:o,value:i}=r;return{name:n,time:o,value:i}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:o}=t;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};var bh=(e,t)=>q(void 0,void 0,void 0,function*(){return e===ae.view?(yield Ch(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),Ch=e=>q(void 0,void 0,void 0,function*(){let t=new No,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),jo,xh=new Uint8Array(16);function Rh(){if(!jo&&(jo=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!jo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jo(xh)}var Eh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function _o(e){return typeof e=="string"&&Eh.test(e)}var Re=[];for(let e=0;e<256;++e)Re.push((e+256).toString(16).slice(1));function Vl(e,t=0){return Re[e[t+0]]+Re[e[t+1]]+Re[e[t+2]]+Re[e[t+3]]+"-"+Re[e[t+4]]+Re[e[t+5]]+"-"+Re[e[t+6]]+Re[e[t+7]]+"-"+Re[e[t+8]]+Re[e[t+9]]+"-"+Re[e[t+10]]+Re[e[t+11]]+Re[e[t+12]]+Re[e[t+13]]+Re[e[t+14]]+Re[e[t+15]]}function Ih(e){if(!_o(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function Fh(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var Ph="6ba7b810-9dad-11d1-80b4-00c04fd430c8",kh="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Oh(e,t,r){function n(o,i,a,m){var f;if(typeof o=="string"&&(o=Fh(o)),typeof i=="string"&&(i=Ih(i)),((f=i)===null||f===void 0?void 0:f.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let p=new Uint8Array(16+o.length);if(p.set(i),p.set(o,i.length),p=r(p),p[6]=p[6]&15|t,p[8]=p[8]&63|128,a){m=m||0;for(let g=0;g<16;++g)a[m+g]=p[g];return a}return Vl(p)}try{n.name=e}catch{}return n.DNS=Ph,n.URL=kh,n}var Th=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),El={randomUUID:Th};function $t(e,t,r){if(El.randomUUID&&!t&&!e)return El.randomUUID();e=e||{};let n=e.random||(e.rng||Rh)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return Vl(n)}function Dh(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function Ga(e,t){return e<<t|e>>>32-t}function qh(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let a=unescape(encodeURIComponent(e));e=[];for(let m=0;m<a.length;++m)e.push(a.charCodeAt(m))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,o=Math.ceil(n/16),i=new Array(o);for(let a=0;a<o;++a){let m=new Uint32Array(16);for(let f=0;f<16;++f)m[f]=e[a*64+f*4]<<24|e[a*64+f*4+1]<<16|e[a*64+f*4+2]<<8|e[a*64+f*4+3];i[a]=m}i[o-1][14]=(e.length-1)*8/Math.pow(2,32),i[o-1][14]=Math.floor(i[o-1][14]),i[o-1][15]=(e.length-1)*8&4294967295;for(let a=0;a<o;++a){let m=new Uint32Array(80);for(let y=0;y<16;++y)m[y]=i[a][y];for(let y=16;y<80;++y)m[y]=Ga(m[y-3]^m[y-8]^m[y-14]^m[y-16],1);let f=r[0],p=r[1],g=r[2],h=r[3],S=r[4];for(let y=0;y<80;++y){let v=Math.floor(y/20),R=Ga(f,5)+Dh(v,p,g,h)+S+t[v]+m[y]>>>0;S=h,h=g,g=Ga(p,30)>>>0,p=f,f=R}r[0]=r[0]+f>>>0,r[1]=r[1]+p>>>0,r[2]=r[2]+g>>>0,r[3]=r[3]+h>>>0,r[4]=r[4]+S>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var jh=Oh("v5",80,qh),Il=jh,Ul="2.30.52",Fl=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,bn={pageview:"pageview",event:"event"},Vo=class{constructor({client:t,uuidGenerator:r=$t}){this.client=t,this.uuidGenerator=r}},Ja=class extends Vo{constructor({client:t,uuidGenerator:r=$t}){super({client:t,uuidGenerator:r}),this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=Fl(window.location),this.lastReferrer=Cr()?document.referrer:"",this.addHooks()}getApi(t){switch(t){case"setAction":return this.setAction;default:return null}}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:Cr()?document.title:"",encoding:Cr()?document.characterSet:"UTF-8"},n={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},o={language:navigator.language,userAgent:navigator.userAgent},i={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},i),n),o),r)}updateLocationForNextPageView(t,r){let{pageViewId:n,referrer:o,location:i}=this.getNextValues(t,r);this.lastReferrer=o,this.pageViewId=n,this.currentLocation=i,t===bn.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===bn.pageview?this.nextPageViewId:this.pageViewId,referrer:t===bn.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===bn.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=o=>o.replace(/^\/?(.*)$/,"/$1");return`${(o=>o.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return Fl(window.location)}},St=class e{constructor(t,r){if(!_o(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let n=new URL(t);return r.some(o=>new RegExp(o.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(n.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,o]=r;if(n.length!==32||isNaN(parseInt(o)))return null;let i=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return _o(i)?new e(i,Number.parseInt(o)*1e3):null}};St.cvo_cid="cvo_cid";St.expirationTime=120;var Xa=class extends Vo{constructor({client:t,uuidGenerator:r=$t}){super({client:t,uuidGenerator:r})}getApi(t){switch(t){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(t){return q(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(t),n=yield this.client.getCurrentVisitorId();return r.searchParams.set(St.cvo_cid,new St(n,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(t){this.client.setAcceptedLinkReferrers(t)}};Xa.Id="link";var Be=Object.keys;function Mo(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var za=128,Ll=192,Pl=224,kl=240;function Mh(e){return(e&248)===kl?4:(e&kl)===Pl?3:(e&Pl)===Ll?2:1}function Nh(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let n=Number.parseInt(e.substring(r-2,r),16);if((n&za)!=za)break;if(r-=3,(n&Ll)!=za){t-r>=Mh(n)*3&&(r=t);break}}return e.substring(0,r)}var Za={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},_h=Be(Za).map(e=>Za[e]),Vh=[..._h].join("|"),Uh=new RegExp(`^(${Vh}$)`),Lh={svcAction:"svc_action",svcActionData:"svc_action_data"},Qh=e=>Be(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let n=Za[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})},{}),Bh=e=>Uh.test(e),$h=[Bh],Ol={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Tl={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Ie={action:"pa",list:"pal",listSource:"pls"},Uo={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Hh=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],es={id:"quoteId",affiliation:"quoteAffiliation"},ts={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Gh={add:Ie,bookmark_add:Ie,bookmark_remove:Ie,click:Ie,checkout:Ie,checkout_option:Ie,detail:Ie,impression:Ie,remove:Ie,refund:Object.assign(Object.assign({},Ie),Uo),purchase:Object.assign(Object.assign({},Ie),Uo),quickview:Ie,quote:Object.assign(Object.assign({},Ie),es),review:Object.assign(Object.assign({},Ie),ts)},zh=Be(Ol).map(e=>Ol[e]),Wh=Be(Tl).map(e=>Tl[e]),Kh=Be(Ie).map(e=>Ie[e]),Yh=Be(Uo).map(e=>Uo[e]),Jh=Be(ts).map(e=>ts[e]),Xh=Be(es).map(e=>es[e]),Zh=[...zh,"custom"].join("|"),eS=[...Wh,"custom"].join("|"),Ql="(pr[0-9]+)",Bl="(il[0-9]+pi[0-9]+)",tS=new RegExp(`^${Ql}(${Zh})$`),rS=new RegExp(`^(${Bl}(${eS}))|(il[0-9]+nm)$`),nS=new RegExp(`^(${Kh.join("|")})$`),oS=new RegExp(`^(${Yh.join("|")})$`),iS=new RegExp(`^${Ql}custom$`),aS=new RegExp(`^${Bl}custom$`),sS=new RegExp(`^(${[...Hh,...Jh,...Xh].join("|")})$`),cS=e=>tS.test(e),uS=e=>rS.test(e),lS=e=>nS.test(e),dS=e=>oS.test(e),pS=e=>sS.test(e),fS=[uS,cS,lS,dS,pS],mS=[iS,aS],gS={anonymizeIp:"aip"},yS={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},hS={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},SS=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],vS=Object.assign(Object.assign(Object.assign(Object.assign({},gS),yS),hS),SS.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),rs=Object.assign(Object.assign({},vS),Lh),AS=e=>{let t=!!e.action&&Gh[e.action]||{};return Be(e).reduce((r,n)=>{let o=t[n]||rs[n]||n;return Object.assign(Object.assign({},r),{[o]:e[n]})},{})},wS=Be(rs).map(e=>rs[e]),bS=e=>wS.indexOf(e)!==-1,CS=e=>e==="custom",xS=e=>[...fS,...$h,bS,CS].some(t=>t(e)),RS=e=>Be(e).reduce((t,r)=>{let n=ES(r);return n?Object.assign(Object.assign({},t),IS(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),ES=e=>{let t;return[...mS].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t}),t},IS=(e,t)=>Be(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),ns=class{constructor(t){this.opts=t}sendEvent(t,r){return q(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:n,preprocessRequest:o}=this.opts,i=yield this.getQueryParamsForEventType(t),{url:a,payload:m}=yield this.preProcessRequestAsPotentialJSONString(`${n}/analytics/${t}?${i}`,r,o),f=this.encodeForEventType(t,m),p=new Blob([f],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(a,p)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,n){return q(this,void 0,void 0,function*(){let o=t,i=r;if(n){let a=yield n({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:m,body:f}=a;o=m||t;try{i=JSON.parse(f)}catch(p){console.error("Unable to process the request body as a JSON string",p)}}return{payload:i,url:o}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeEventToJson(t,r):this.encodeEventToJson(t,r,this.opts.token)}getQueryParamsForEventType(t){return q(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:n}=this.opts,o=yield n.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",o?`visitorId=${o}`:"","discardVisitInfo=true"].filter(i=>!!i).join("&")})}isEventTypeLegacy(t){return[ae.click,ae.custom,ae.search,ae.view].indexOf(t)!==-1}encodeEventToJson(t,r,n){let o=`${t}Event=${encodeURIComponent(JSON.stringify(r))}`;return n&&(o=`access_token=${encodeURIComponent(n)}&${o}`),o}},os=class{sendEvent(t,r){return q(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return q(this,void 0,void 0,function*(){return Promise.resolve()})}},Dl=A.fetch,Lo=class{constructor(t){this.opts=t}sendEvent(t,r){return q(this,void 0,void 0,function*(){let{baseUrl:n,visitorIdProvider:o,preprocessRequest:i}=this.opts,a=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",m={url:`${n}/analytics/${t}${a}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},f=Object.assign(Object.assign({},m),i?yield i(m,"analyticsFetch"):{}),{url:p}=f,g=at(f,["url"]),h;try{h=yield Dl(p,g)}catch(S){console.error("An error has occured when sending the event.",S);return}if(h.ok){let S=yield h.json();return S.visitorId&&o.setCurrentVisitorId(S.visitorId),S}else{try{h.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,h,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return q(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield Dl(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(t){return[ae.click,ae.custom,ae.search,ae.view].indexOf(t)!==-1}getVisitorIdParam(){return q(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},is=class{constructor(t,r){Ka()&&_l()?this.storage=new Ya:Ka()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Rr),this.client=new Lo(t),this.beaconClient=new ns(t),window.addEventListener("beforeunload",()=>{let n=r();for(let{eventType:o,payload:i}of n)this.beaconClient.sendEvent(o,i)})}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},as=class{constructor(t,r){this.storage=r||new Rr,this.client=new Lo(t)}getClientDependingOnEventType(t){return this.client}},Qo=class{constructor(){this.storage=new Rr,this.client=new os}getClientDependingOnEventType(t){return this.client}},FS="xx",PS=e=>e?.startsWith(FS)||!1,kS=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function OS(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var TS=["1",1,"yes",!0];function Bo(){let e=[];return Wa()&&e.push(window.doNotTrack),ss()&&e.push(navigator.doNotTrack,navigator.msDoNotTrack,navigator.globalPrivacyControl),e.some(t=>TS.indexOf(t)!==-1)}var $l="v15",Hl={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function DS(e=Hl.default,t=$l,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var qS="38824e1f-37f5-42d3-8372-a4b8fa9df946",Ze=class{get defaultOptions(){return{endpoint:Hl.default,isCustomEndpoint:!1,token:"",version:$l,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Ul}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[bh,hh].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};Bo()?this.runtime=new Qo:this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),this.addEventTypeMapping(ae.view,{newEventType:ae.view,addClientIdParameter:!0}),this.addEventTypeMapping(ae.click,{newEventType:ae.click,addClientIdParameter:!0}),this.addEventTypeMapping(ae.custom,{newEventType:ae.custom,addClientIdParameter:!0}),this.addEventTypeMapping(ae.search,{newEventType:ae.search,addClientIdParameter:!0})}initRuntime(t){return Wa()&&Cr()?new is(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(OS()&&console.warn(kS),new as(t))}get storage(){return this.runtime.storage}determineVisitorId(){return q(this,void 0,void 0,function*(){try{return Wa()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||$t()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),$t()}})}getCurrentVisitorId(){return q(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return q(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}setClientId(t,r){return q(this,void 0,void 0,function*(){if(_o(t))this.setCurrentVisitorId(t.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Il(t,Il(r,qS)))}})}getParameters(t,...r){return q(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return q(this,void 0,void 0,function*(){let n=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,n)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId($t()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}extractClientIdFromLink(t){if(Bo())return null;try{let r=new URL(t).searchParams.get(St.cvo_cid);if(r==null)return null;let n=St.fromString(r);return!n||!Cr()||!n.validate(document.referrer,this.acceptedLinkReferrers)?null:n.clientId}catch{}return null}resolveParameters(t,...r){return q(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:n=[],addVisitorIdParameter:o=!1,usesMeasurementProtocol:i=!1,addClientIdParameter:a=!1}=this.eventTypeMapping[t]||{};return yield[y=>n.length>0?this.parseVariableArgumentsPayload(n,y):y[0],y=>q(this,void 0,void 0,function*(){return Object.assign(Object.assign({},y),{visitorId:o?yield this.getCurrentVisitorId():""})}),y=>q(this,void 0,void 0,function*(){return a?Object.assign(Object.assign({},y),{clientId:yield this.getCurrentVisitorId()}):y}),y=>i?this.ensureAnonymousUserWhenUsingApiKey(y):y,y=>this.beforeSendHooks.reduce((v,R)=>q(this,void 0,void 0,function*(){let I=yield v;return yield R(t,I)}),y)].reduce((y,v)=>q(this,void 0,void 0,function*(){let R=yield y;return yield v(R)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return q(this,void 0,void 0,function*(){let{usesMeasurementProtocol:n=!1}=this.eventTypeMapping[t]||{};return yield[h=>this.setTrackingIdIfTrackingIdNotPresent(h),h=>this.removeEmptyPayloadValues(h,t),h=>this.validateParams(h,t),h=>n?AS(h):h,h=>n?this.removeUnknownParameters(h):h,h=>n?this.processCustomParameters(h):this.mapCustomParametersToCustomData(h)].reduce((h,S)=>q(this,void 0,void 0,function*(){let y=yield h;return yield S(y)}),Promise.resolve(r))})}makeEvent(t,...r){return q(this,void 0,void 0,function*(){let{newEventType:n=t}=this.eventTypeMapping[t]||{},o=yield this.resolveParameters(t,...r),i=yield this.resolvePayloadForParameters(t,o);return{eventType:n,payload:i,log:a=>q(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:n,payload:Object.assign(Object.assign({},i),a)}),yield Promise.all(this.afterSendHooks.map(m=>m(t,Object.assign(Object.assign({},o),a)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return q(this,void 0,void 0,function*(){return(yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return q(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:n}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,n)}})}clear(){this.storage.removeItem("visitorId"),new No().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(t){return q(this,void 0,void 0,function*(){return this.makeEvent(ae.search,t)})}sendSearchEvent(t){return q(this,void 0,void 0,function*(){var{searchQueryUid:r}=t,n=at(t,["searchQueryUid"]);return(yield this.makeSearchEvent(n)).log({searchQueryUid:r})})}makeClickEvent(t){return q(this,void 0,void 0,function*(){return this.makeEvent(ae.click,t)})}sendClickEvent(t){return q(this,void 0,void 0,function*(){var{searchQueryUid:r}=t,n=at(t,["searchQueryUid"]);return(yield this.makeClickEvent(n)).log({searchQueryUid:r})})}makeCustomEvent(t){return q(this,void 0,void 0,function*(){return this.makeEvent(ae.custom,t)})}sendCustomEvent(t){return q(this,void 0,void 0,function*(){var{lastSearchQueryUid:r}=t,n=at(t,["lastSearchQueryUid"]);return(yield this.makeCustomEvent(n)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return q(this,void 0,void 0,function*(){return this.makeEvent(ae.view,t)})}sendViewEvent(t){return q(this,void 0,void 0,function*(){return(yield this.makeViewEvent(t)).log({})})}getVisit(){return q(this,void 0,void 0,function*(){let r=yield(yield w(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return q(this,void 0,void 0,function*(){return yield(yield w(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let n={};for(let o=0,i=r.length;o<i;o++){let a=r[o];if(typeof a=="string")n[t[o]]=a;else if(typeof a=="object")return Object.assign(Object.assign({},n),a)}return n}isKeyAllowedEmpty(t,r){return({[ae.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let n=o=>typeof o<"u"&&o!==null&&o!=="";return Object.keys(t).filter(o=>this.isKeyAllowedEmpty(r,o)||n(t[o])).reduce((o,i)=>Object.assign(Object.assign({},o),{[i]:t[i]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(n=>{if(xS(n))return!0;console.log(n,"is not processed by coveoua")}).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:t[o]}),{})}processCustomParameters(t){let{custom:r}=t,n=at(t,["custom"]),o={};r&&Mo(r)&&(o=this.lowercaseKeys(r));let i=RS(n);return Object.assign(Object.assign({},o),i)}mapCustomParametersToCustomData(t){let{custom:r}=t,n=at(t,["custom"]);if(r&&Mo(r)){let o=this.lowercaseKeys(r);return Object.assign(Object.assign({},n),{customData:Object.assign(Object.assign({},o),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),n={};return r.forEach(o=>{n[o.toLowerCase()]=t[o]}),n}validateParams(t,r){let{anonymizeIp:n}=t,o=at(t,["anonymizeIp"]);return n!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${n}`.toLowerCase())==-1&&(o.anonymizeIp=1),(r==ae.view||r==ae.click||r==ae.search||r==ae.custom)&&(o.originLevel3=this.limit(o.originLevel3,1024)),r==ae.view&&(o.location=this.limit(o.location,1024)),(r=="pageview"||r=="event")&&(o.referrer=this.limit(o.referrer,2048),o.location=this.limit(o.location,2048),o.page=this.limit(o.page,2048)),o}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,n=at(t,["userId"]);return PS(this.options.token)&&!r?(n.userId="anonymous",n):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,n=at(t,["trackingId"]);return r?t:(n.hasOwnProperty("custom")&&Mo(n.custom)&&(n.custom.hasOwnProperty("context_website")||n.custom.hasOwnProperty("siteName"))&&(n.trackingId=n.custom.context_website||n.custom.siteName),n.hasOwnProperty("customData")&&Mo(n.customData)&&(n.customData.hasOwnProperty("context_website")||n.customData.hasOwnProperty("siteName"))&&(n.trackingId=n.customData.context_website||n.customData.siteName),n)}limit(t,r){return typeof t=="string"?Nh(t,r):t}get baseUrl(){return DS(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},st;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(st||(st={}));var j;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2",e.generatedAnswerCitationClick="generatedAnswerCitationClick",e.generatedAnswerCitationDocumentAttach="generatedAnswerCitationDocumentAttach"})(j||(j={}));var ql={[j.triggerNotify]:"queryPipelineTriggers",[j.triggerExecute]:"queryPipelineTriggers",[j.triggerQuery]:"queryPipelineTriggers",[j.triggerRedirect]:"queryPipelineTriggers",[j.queryErrorBack]:"errors",[j.queryErrorClear]:"errors",[j.queryErrorRetry]:"errors",[j.pagerNext]:"getMoreResults",[j.pagerPrevious]:"getMoreResults",[j.pagerNumber]:"getMoreResults",[j.pagerResize]:"getMoreResults",[j.pagerScrolling]:"getMoreResults",[j.facetSearch]:"facet",[j.facetShowLess]:"facet",[j.facetShowMore]:"facet",[j.recommendation]:"recommendation",[j.likeSmartSnippet]:"smartSnippet",[j.dislikeSmartSnippet]:"smartSnippet",[j.expandSmartSnippet]:"smartSnippet",[j.collapseSmartSnippet]:"smartSnippet",[j.openSmartSnippetFeedbackModal]:"smartSnippet",[j.closeSmartSnippetFeedbackModal]:"smartSnippet",[j.sendSmartSnippetReason]:"smartSnippet",[j.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[j.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[j.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[j.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[j.clearRecentQueries]:"recentQueries",[j.recentResultClick]:"recentlyClickedDocuments",[j.clearRecentResults]:"recentlyClickedDocuments",[j.showLessFoldedResults]:"folding",[j.caseDetach]:"case",[j.likeGeneratedAnswer]:"generatedAnswer",[j.dislikeGeneratedAnswer]:"generatedAnswer",[j.openGeneratedAnswerSource]:"generatedAnswer",[j.generatedAnswerStreamEnd]:"generatedAnswer",[j.generatedAnswerSourceHover]:"generatedAnswer",[j.generatedAnswerCopyToClipboard]:"generatedAnswer",[j.generatedAnswerHideAnswers]:"generatedAnswer",[j.generatedAnswerShowAnswers]:"generatedAnswer",[j.generatedAnswerExpand]:"generatedAnswer",[j.generatedAnswerCollapse]:"generatedAnswer",[j.generatedAnswerFeedbackSubmit]:"generatedAnswer",[j.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[st.expandToFullUI]:"interface",[st.openUserActions]:"User Actions",[st.showPrecedingSessions]:"User Actions",[st.showFollowingSessions]:"User Actions",[st.clickViewedDocument]:"User Actions",[st.clickPageView]:"User Actions",[st.createArticle]:"createArticle"},Er=class{constructor(){this.runtime=new Qo,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(ae.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(ae.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(ae.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(ae.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Ul}};function jS(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function MS(e){return e.map(t=>t.replace(/;/g,""))}function Gl(e){let r=e.join(";");return r.length<=256?r:Gl(e.slice(1))}var jl=e=>{let t=MS(e),r=jS(t);return Gl(r)};function Ml(e){let t=typeof e.partialQueries=="string"?e.partialQueries:jl(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:jl(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var $o=class{constructor(t,r){this.opts=t,this.provider=r;let n=t.enableAnalytics===!1||Bo();this.coveoAnalyticsClient=n?new Er:new Ze(t)}disable(){this.coveoAnalyticsClient=new Er}enable(){this.coveoAnalyticsClient=new Ze(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(j.interfaceLoad)}logInterfaceLoad(){return q(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(j.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return q(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(j.recommendation)}logRecommendation(){return q(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(j.recommendationOpen,t,r)}logRecommendationOpen(t,r){return q(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(j.staticFilterClearAll,t)}logStaticFilterClearAll(t){return q(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(j.staticFilterSelect,t)}logStaticFilterSelect(t){return q(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(j.staticFilterDeselect,t)}logStaticFilterDeselect(t){return q(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(j.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return q(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(j.interfaceChange,t)}logInterfaceChange(t){return q(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(j.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return q(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(j.didyoumeanClick)}logDidYouMeanClick(){return q(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(j.resultsSort,t)}logResultsSort(t){return q(this,void 0,void 0,function*(){return(yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(j.searchboxSubmit)}logSearchboxSubmit(){return q(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(j.searchboxClear)}logSearchboxClear(){return q(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(j.searchboxAsYouType)}logSearchboxAsYouType(){return q(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(j.breadcrumbFacet,t)}logBreadcrumbFacet(t){return q(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(j.breadcrumbResetAll)}logBreadcrumbResetAll(){return q(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(j.documentQuickview,t,r)}logDocumentQuickview(t,r){return q(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(j.documentOpen,t,r)}logDocumentOpen(t,r){return q(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(j.omniboxAnalytics,Ml(t))}logOmniboxAnalytics(t){return q(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(j.omniboxFromLink,Ml(t))}logOmniboxFromLink(t){return q(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(j.searchFromLink)}logSearchFromLink(){return q(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(j.triggerNotify,t)}logTriggerNotify(t){return q(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(j.triggerExecute,t)}logTriggerExecute(t){return q(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(j.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return q(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(j.undoTriggerQuery,t)}logUndoTriggerQuery(t){return q(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(j.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return q(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(j.pagerResize,t)}logPagerResize(t){return q(this,void 0,void 0,function*(){return(yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(j.pagerNumber,t)}logPagerNumber(t){return q(this,void 0,void 0,function*(){return(yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(j.pagerNext,t)}logPagerNext(t){return q(this,void 0,void 0,function*(){return(yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(j.pagerPrevious,t)}logPagerPrevious(t){return q(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(j.pagerScrolling)}logPagerScrolling(){return q(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(j.facetClearAll,t)}logFacetClearAll(t){return q(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(j.facetSearch,t)}logFacetSearch(t){return q(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(j.facetSelect,t)}logFacetSelect(t){return q(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(j.facetDeselect,t)}logFacetDeselect(t){return q(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(j.facetExclude,t)}logFacetExclude(t){return q(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(j.facetUnexclude,t)}logFacetUnexclude(t){return q(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(j.facetSelectAll,t)}logFacetSelectAll(t){return q(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(j.facetUpdateSort,t)}logFacetUpdateSort(t){return q(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(j.facetShowMore,t)}logFacetShowMore(t){return q(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(j.facetShowLess,t)}logFacetShowLess(t){return q(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(j.queryError,t)}logQueryError(t){return q(this,void 0,void 0,function*(){return(yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return q(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(j.queryErrorBack);return{description:t.description,log:()=>q(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(j.queryErrorBack)})}})}logQueryErrorBack(){return q(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return q(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(j.queryErrorRetry);return{description:t.description,log:()=>q(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(j.queryErrorRetry)})}})}logQueryErrorRetry(){return q(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return q(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(j.queryErrorClear);return{description:t.description,log:()=>q(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(j.queryErrorClear)})}})}logQueryErrorClear(){return q(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(j.likeSmartSnippet)}logLikeSmartSnippet(){return q(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(j.dislikeSmartSnippet)}logDislikeSmartSnippet(){return q(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(j.expandSmartSnippet)}logExpandSmartSnippet(){return q(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(j.collapseSmartSnippet)}logCollapseSmartSnippet(){return q(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(j.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return q(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(j.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return q(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(j.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return q(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(j.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return q(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(j.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return q(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(j.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return q(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(j.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return q(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(j.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return q(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(j.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(j.copyToClipboard,t,r)}logCopyToClipboard(t,r){return q(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return q(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(j.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return q(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(j.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return q(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(j.recentQueryClick)}logRecentQueryClick(){return q(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(j.clearRecentQueries)}logClearRecentQueries(){return q(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(j.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return q(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(j.clearRecentResults)}logClearRecentResults(){return q(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(j.noResultsBack)}logNoResultsBack(){return q(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(j.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return q(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(j.showLessFoldedResults)}logShowLessFoldedResults(){return q(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var n;return{actionCause:r,customData:(n=t.payload)===null||n===void 0?void 0:n.customData}}makeCustomEvent(t,r){return q(this,arguments,void 0,function*(n,o,i=ql[n]){this.coveoAnalyticsClient.getParameters;let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),o),m=Object.assign(Object.assign({},yield this.getBaseEventRequest(a)),{eventType:i,eventValue:n}),f=yield this.coveoAnalyticsClient.makeCustomEvent(m);return{description:this.makeEventDescription(f,n),log:({searchUID:p})=>f.log({lastSearchQueryUid:p})}})}logCustomEvent(t,r){return q(this,arguments,void 0,function*(n,o,i=ql[n]){return(yield this.makeCustomEvent(n,o,i)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,n){return q(this,void 0,void 0,function*(){let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),n),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(o)),{eventType:r,eventValue:t}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,t),log:({searchUID:m})=>a.log({lastSearchQueryUid:m})}})}logCustomEventWithType(t,r,n){return q(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(t,r,n)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return q(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return q(this,void 0,void 0,function*(){let n=yield this.getBaseSearchEventRequest(t,r),o=yield this.coveoAnalyticsClient.makeSearchEvent(n);return{description:this.makeEventDescription(o,t),log:({searchUID:i})=>o.log({searchQueryUid:i})}})}makeClickEvent(t,r,n,o){return q(this,void 0,void 0,function*(){let i=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),a=yield this.coveoAnalyticsClient.makeClickEvent(i);return{description:this.makeEventDescription(a,t),log:({searchUID:m})=>a.log({searchQueryUid:m})}})}logClickEvent(t,r,n,o){return q(this,void 0,void 0,function*(){return(yield this.makeClickEvent(t,r,n,o)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){return q(this,void 0,void 0,function*(){var n,o;return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(o=(n=this.provider).getGeneratedAnswerMetadata)===null||o===void 0?void 0:o.call(n)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return q(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Ze?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(j.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return q(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(j.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return q(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(j.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return q(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCitationClick(t,r){return this.makeClickEvent(j.generatedAnswerCitationClick,Object.assign(Object.assign({},t),{documentPosition:1}),{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logGeneratedAnswerCitationClick(t,r){return q(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCitationClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(j.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return q(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(j.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return q(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(j.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return q(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(j.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return q(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(t){return this.makeCustomEvent(j.generatedAnswerExpand,t)}logGeneratedAnswerExpand(t){return q(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerExpand(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(t){return this.makeCustomEvent(j.generatedAnswerCollapse,t)}logGeneratedAnswerCollapse(t){return q(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCollapse(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(j.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return q(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmitV2(t){return this.makeCustomEvent(j.generatedAnswerFeedbackSubmitV2,t)}logGeneratedAnswerFeedbackSubmitV2(t){return q(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(j.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return q(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(j.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return q(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(j.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return q(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},Ho=Object.assign({},bn),Nl=Object.keys(Ho).map(e=>Ho[e]),xr=class extends Ja{constructor({client:t,uuidGenerator:r=$t}){super({client:t,uuidGenerator:r}),this.ticket={}}getApi(t){let r=super.getApi(t);if(r!==null)return r;switch(t){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>Nl.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(Nl.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(Ho.pageview,{newEventType:ae.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(Ho.event,{newEventType:ae.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var n;let o=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((n=this.actionData)!==null&&n!==void 0?n:{}).length>0?{svcActionData:this.actionData}:{}),i=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},i),o),r)}getTicketPayload(){return Qh(this.ticket)}};xr.Id="svc";var Go;(function(e){e.click="click",e.flowStart="flowStart"})(Go||(Go={}));var Qe;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.documentSuggestionClick="documentSuggestionClick",e.documentSuggestionQuickview="documentSuggestionQuickview",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(Qe||(Qe={}));var zo;(function(e){e.quit="Quit",e.solved="Solved"})(zo||(zo={}));var Wo=class{constructor(t,r){var n;this.options=t,this.provider=r;let o=((n=t.enableAnalytics)!==null&&n!==void 0?n:!0)&&!Bo();this.coveoAnalyticsClient=o?new Ze(t):new Er,this.svc=new xr({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient=new Er,this.svc=new xr({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new Ze(this.options),this.svc=new xr({client:this.coveoAnalyticsClient})}logEnterInterface(t){return this.svc.setAction(Qe.enterInterface),this.svc.setTicket(t.ticket),this.sendFlowStartEvent()}logUpdateCaseField(t){return this.svc.setAction(Qe.fieldUpdate,{fieldName:t.fieldName}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectFieldSuggestion(t){return this.svc.setAction(Qe.fieldSuggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(t){return this.logClickEvent(Qe.documentSuggestionClick,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logQuickviewDocumentSuggestion(t){return this.logClickEvent(Qe.documentSuggestionQuickview,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logRateDocumentSuggestion(t){return this.svc.setAction(Qe.suggestionRate,Object.assign({rate:t.rating},t.suggestion)),this.svc.setTicket(t.ticket),this.sendClickEvent()}logMoveToNextCaseStep(t){return this.svc.setAction(Qe.nextCaseStep,{stage:t?.stage}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCancelled(t){return this.svc.setAction(Qe.caseCancelled,{reason:zo.quit}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseSolved(t){return this.svc.setAction(Qe.caseSolved,{reason:zo.solved}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCreated(t){return this.svc.setAction(Qe.caseCreated),this.svc.setTicket(t.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",Go.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",Go.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}getBaseEventRequest(t){return q(this,void 0,void 0,function*(){var r,n;let o=Object.assign({},t);return Object.assign(Object.assign({},this.getOrigins()),{customData:o,language:(r=this.provider)===null||r===void 0?void 0:r.getLanguage(),anonymous:(n=this.provider)===null||n===void 0?void 0:n.getIsAnonymous(),clientId:yield this.getClientId()})})}getClientId(){return this.coveoAnalyticsClient instanceof Ze?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getOrigins(){var t,r,n,o,i;return{originContext:(r=(t=this.provider)===null||t===void 0?void 0:t.getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:(n=this.provider)===null||n===void 0?void 0:n.getOriginLevel1(),originLevel2:(o=this.provider)===null||o===void 0?void 0:o.getOriginLevel2(),originLevel3:(i=this.provider)===null||i===void 0?void 0:i.getOriginLevel3()}}logClickEvent(t,r,n,o){return q(this,void 0,void 0,function*(){var i,a;let m=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{searchQueryUid:(a=(i=this.provider)===null||i===void 0?void 0:i.getSearchUID())!==null&&a!==void 0?a:"",actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(m)})}};var zl=e=>new Ze(e).getCurrentVisitorId(),Rn=(e,t)=>typeof t=="function"?(...r)=>{let n=an(r[0]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,En=(e,t)=>(...r)=>{let n=an(r[1]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics hook. Returning original request."),n}};d();c();l();u();d();c();l();u();d();c();l();u();d();c();l();u();function Ko(){return{desiredCount:5,numberOfValues:8,set:{}}}d();c();l();u();d();c();l();u();d();c();l();u();function Wl(e){let{activeValue:t,ancestryMap:r}=NS(e);return t?_S(t,r):[]}function NS(e){let t=[...e],r=new Map;for(;t.length>0;){let n=t.shift();if(n.state==="selected")return{activeValue:n,ancestryMap:r};if(r)for(let o of n.children)r.set(o,n);t.unshift(...n.children)}return{}}function _S(e,t){let r=[];if(!e)return[];let n=e;do r.unshift(n),n=t.get(n);while(n);return r}var VS=(e,t)=>e.categoryFacetSet[t]?.request;var ls=(e,t)=>{let r=VS(e,t);return Wl(r?.currentValues??[])};d();c();l();u();function Yo(){return{}}d();c();l();u();function Jo(){return{}}d();c();l();u();function Xo(){return{}}d();c();l();u();function Zo(){return{}}function ds(e){return{facetSet:e.facetSet??Zo(),categoryFacetSet:e.categoryFacetSet??Yo(),dateFacetSet:e.dateFacetSet??Jo(),numericFacetSet:e.numericFacetSet??Xo(),automaticFacetSet:e.automaticFacetSet??Ko()}}var ps=e=>{let t=[];return QS(e).forEach((r,n)=>{let o=YS(e,r.facetId),i=WS(r,n+1);if(LS(r)){if(!!!ls(e,r.facetId).length)return;t.push({...i,...GS(e,r.facetId),facetType:o,state:"selected"});return}r.currentValues.forEach((a,m)=>{if(a.state==="idle")return;let f=Kl(a,m+1,o),p=US(r)?Yl(a):$S(a);t.push({...i,...f,...p})})}),BS(e).forEach((r,n)=>{let o=zS(r,n+1);r.values.forEach((i,a)=>{if(i.state==="idle")return;let m=Kl(i,a+1,"specific"),f=Yl(i);t.push({...o,...m,...f})})}),t},US=e=>e.type==="specific",LS=e=>e.type==="hierarchical",QS=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),BS=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),Kl=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),$S=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Yl=e=>({displayValue:e.value,value:e.value}),HS=(e,t)=>ls(e,t).map(n=>n.value).join(";"),GS=(e,t)=>{let n=HS(e,t);return{value:n,valuePosition:1,displayValue:n}},zS=(e,t)=>({title:Jl(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),WS=(e,t)=>({title:Jl(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Jl=(e,t)=>`${e}_${t}`,KS=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,YS=(e,t)=>{let r=KS(e,t);return r?r.type:"specific"};d();c();l();u();d();c();l();u();var fs=e=>e.configuration.search.locale,Xl=e=>e.configuration.search.timezone,Ir=e=>e.configuration?.knowledge?.agentId;var Ht=e=>{if(JS(e)||ms(e))return e.generatedAnswer?.answerId;if(XS(e))return e.search?.response?.extendedResults?.generativeQuestionAnsweringId},JS=e=>"answer"in e&&"generatedAnswer"in e&&!X(e.generatedAnswer?.answerConfigurationId),ms=e=>{let t=Ir(e);return"answerGenerationApi"in e&&"generatedAnswer"in e&&typeof t=="string"&&t.trim().length>0},XS=e=>"search"in e&&e.search!==void 0&&typeof e.search=="object",gs=e=>e.generatedAnswer?.fieldsToIncludeInCitations,ZS=ye(e=>e.generatedAnswer?.citations,(e,t)=>t,(e,t)=>e?.find(r=>r.id===t));d();c();l();u();var _e=()=>({q:"",enableQuerySyntax:!1});d();c();l();u();d();c();l();u();var Zl=(r=>(r.Ascending="ascending",r.Descending="descending",r))(Zl||{}),ed=(i=>(i.Relevancy="relevancy",i.QRE="qre",i.Date="date",i.Field="field",i.NoSort="nosort",i))(ed||{}),ys=e=>{if(Xc(e))return e.map(t=>ys(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},td=()=>({by:"relevancy"});var sO=new K({values:{by:new la({enum:ed,required:!0}),order:new la({enum:Zl}),field:new $}});function ei(){return ys(td())}d();c();l();u();d();c();l();u();var Fr=()=>"default";var ev=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},ct=class{constructor(t){this.getState=t;ue(this,"state");this.state=t()}getLanguage(){return ev(this.state)}getBaseMetadata(){let{context:t,configuration:r}=this.state,n=t?.contextValues||{},o={};for(let[i,a]of Object.entries(n)){let m=`context_${i}`;o[m]=a}return r.analytics.analyticsMode==="legacy"&&(o.coveoHeadlessVersion=fr),o}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Fr()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var In=class In extends ct{constructor(){super(...arguments);ue(this,"getFacetRequest",r=>this.state.facetSet?.[r]?.request||this.state.categoryFacetSet?.[r]?.request||this.state.dateFacetSet?.[r]?.request||this.state.numericFacetSet?.[r]?.request||this.state.automaticFacetSet?.set[r]?.response)}getFacetState(){return ps(ds(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||In.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let r=this.getState();return r.search?.searchResponseId||r.search?.response.searchUid||We().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let r=!!this.getSplitTestRunName(),n=this.state.search?.response.pipeline||this.state.pipeline||In.fallbackPipelineName;return r?n:void 0}getBaseMetadata(){let r=this.getState(),n=super.getBaseMetadata(),o=Ht(r);return o&&(n.generativeQuestionAnsweringId=o),n}getFacetMetadata(r,n){let i=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:i,facetValue:n,facetTitle:`${i}_${r}`}}getFacetClearAllMetadata(r){let o=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:o,facetTitle:`${o}_${r}`}}getFacetUpdateSortMetadata(r,n){let i=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:i,criteria:n,facetTitle:`${i}_${r}`}}getRangeBreadcrumbFacetMetadata(r,n){let i=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:i,facetRangeEnd:n.end,facetRangeEndInclusive:n.endInclusive,facetRangeStart:n.start,facetTitle:`${i}_${r}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??ei()}}getStaticFilterToggleMetadata(r,n){return{...this.getBaseMetadata(),staticFilterId:r,staticFilterValue:n}}getStaticFilterClearAllMetadata(r){return{...this.getBaseMetadata(),staticFilterId:r}}getUndoTriggerQueryMetadata(r){return{...this.getBaseMetadata(),undoneQuery:r}}getCategoryBreadcrumbFacetMetadata(r,n){let i=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:r,categoryFacetField:i,categoryFacetPath:n,categoryFacetTitle:`${i}_${r}`}}getOmniboxAnalyticsMetadata(r,n){let o=this.state.querySuggest?.[r],i=o.completions.map(p=>p.expression),a=o.partialQueries.length-1,m=o.partialQueries[a]||"",f=o.responseId;return{...this.getBaseMetadata(),suggestionRanking:i.indexOf(n),partialQuery:m,partialQueries:o.partialQueries.length>0?o.partialQueries:"",suggestions:i.length>0?i:"",querySuggestResponseId:f}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(r){return{...this.getBaseMetadata(),...r}}getGeneratedAnswerMetadata(){let r=this.getState(),n={};return r.generatedAnswer?.isVisible!==void 0&&(n.showGeneratedAnswer=r.generatedAnswer.isVisible),n}get resultURIs(){return this.results?.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||_e().q}get responseTime(){return this.state.search?.duration||We().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||We().response.totalCountFiltered}};ue(In,"fallbackPipelineName","default");var vt=In,rd=({logger:e,getState:t,analyticsClientMiddleware:r=(i,a)=>a,preprocessRequest:n,provider:o})=>{let i=t(),a=i.configuration.accessToken,m=i.configuration.analytics.apiBaseUrl??Se(i.configuration.organizationId,i.configuration.environment,"analytics"),f=i.configuration.analytics.runtimeEnvironment,p=i.configuration.analytics.enabled,g=new $o({token:a,endpoint:m,runtimeEnvironment:f,preprocessRequest:Rn(e,n),beforeSendHooks:[En(e,r),(h,S)=>(e.info({...S,type:h,endpoint:m,token:a},"Analytics request"),S)]},o);return p||g.disable(),g},hs=()=>{let t=Le.getInstance().getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};var ti=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await zl(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...hs()&&{pageId:hs()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:br(e)}}}};d();c();l();u();d();c();l();u();d();c();l();u();var Pr=()=>({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:"",splitTestRun:"",pipeline:""});var Fn=class extends ct{getPipeline(){return this.state.pipeline||this.state.recommendation?.pipeline||"default"}getSearchEventRequestPayload(){return{queryText:_e().q,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){return this.getState().recommendation?.searchUid||Pr().searchUid}getSplitTestRunName(){return this.state.recommendation?.splitTestRun}getSplitTestRunVersion(){let t=!!this.getSplitTestRunName(),r=this.state.recommendation?.pipeline||this.state.pipeline||"default";return t?r:void 0}get responseTime(){return this.state.recommendation?.duration||Pr().duration}mapResultsToAnalyticsDocument(){return this.state.recommendation?.recommendations.map(t=>({documentUri:t.uri,documentUriHash:t.raw.urihash}))}get numberOfResults(){return this.state.recommendation?.recommendations.length||Pr().recommendations.length}};d();c();l();u();d();c();l();u();d();c();l();u();d();c();l();u();d();c();l();u();d();c();l();u();var nd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function tv(e){return typeof e=="string"&&nd.test(e)}var Ss=tv;d();c();l();u();var Ee=[];for(let e=0;e<256;++e)Ee.push((e+256).toString(16).slice(1));function od(e,t=0){return(Ee[e[t+0]]+Ee[e[t+1]]+Ee[e[t+2]]+Ee[e[t+3]]+"-"+Ee[e[t+4]]+Ee[e[t+5]]+"-"+Ee[e[t+6]]+Ee[e[t+7]]+"-"+Ee[e[t+8]]+Ee[e[t+9]]+"-"+Ee[e[t+10]]+Ee[e[t+11]]+Ee[e[t+12]]+Ee[e[t+13]]+Ee[e[t+14]]+Ee[e[t+15]]).toLowerCase()}d();c();l();u();var vs,rv=new Uint8Array(16);function As(){if(!vs){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");vs=crypto.getRandomValues.bind(crypto)}return vs(rv)}d();c();l();u();d();c();l();u();var nv=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ws={randomUUID:nv};function ov(e,t,r){e=e||{};let n=e.random??e.rng?.()??As();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)t[r+o]=n[o];return t}return od(n)}function iv(e,t,r){return ws.randomUUID&&!t&&!e?ws.randomUUID():ov(e,t,r)}var bs=iv;d();c();l();u();function id(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}function av({config:e,environment:t,event:r,listenerManager:n}){let{url:o,token:i,mode:a}=e;a!=="disabled"&&(n.call(r),t.send(o,i,r))}var ad="visitorId";function sv(e){return{getClientId:()=>{let t=e.get(),r=t.storage,n=r.getItem(ad),o=n&&Ss(n)?n:t.generateUUID();return r.setItem(ad,o),o}}}var dd="1.2.15",Cs=128,pd=192,sd=224,cd=240,cv=248;function uv(e){return(e&cv)===cd?4:(e&cd)===sd?3:(e&sd)===pd?2:1}function lv(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let n=Number.parseInt(e.substring(r-2,r),16);if((n&Cs)!=Cs)break;if(r-=3,(n&pd)!=Cs){t-r>=uv(n)*3&&(r=t);break}}return e.substring(0,r)}function dv(e){let{trackingId:t}=e;return{trackingId:t}}function pv(e){return(e.source||[]).concat([`relay@${dd}`])}function fd(e,t,r,n){let{getReferrer:o,getLocation:i,getUserAgent:a}=r,m=dv(t),f=n.getClientId();return Object.freeze({type:e,config:m,ts:Date.now(),source:pv(t),clientId:f,userAgent:a(),referrer:ud(o()),location:ud(i())})}function ud(e){return e!==null?lv(e,1024):null}function fv(e,t,r,n,o){return{...t,meta:fd(e,r,n,o)}}var mv="*";function gv(){let e=[];function t({type:f,callback:p}){return e.findIndex(g=>g.type===f&&g.callback===p)}function r(f,p){return f.type==="*"||p===f.type}function n(f){return t(f)<0&&e.push(f),()=>m(f.type,f.callback)}function o(f){e.forEach(p=>{if(r(p,f.meta.type))try{p.callback(f)}catch(g){console.error(g)}})}function i(f){if(f===mv)e.length=0;else for(let p=e.length-1;p>=0;p--)e[p].type===f&&e.splice(p,1)}function a(f){let p=t(f);p>=0&&e.splice(p,1)}function m(f,p){p?a({type:f,callback:p}):i(f)}return{add:n,call:o,remove:m}}function ld({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source},...!!n.environment&&{environment:n.environment}})}function yv(e){let t=ld(e);return{get:()=>t,update:r=>{t=ld({...t,...r})}}}var xs=hv();function hv(){let e="coveo_",t=r=>{let n=r.split(".").slice(-2);return n.length==2?n.join("."):""};return{getItem(r){let n=`${e}${r}=`,o=document.cookie.split(";");for(let i of o){let a=i.replace(/^\s+/,"");if(a.lastIndexOf(n,0)===0)return a.substring(n.length,a.length)}return null},setItem(r,n,o){let i=t(window.location.hostname),a=`;expires=${new Date(new Date().getTime()+o).toUTCString()}`,m=i?`;domain=${i}`:"";document.cookie=`${e}${r}=${n}${a}${m};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function Sv(){return{getItem(e){return xs.getItem(e)||localStorage.getItem(e)},removeItem(e){xs.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),xs.setItem(e,t,31556952e3)}}}function vv(){let e=document.referrer;return e===""?null:e}function Rs(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(id().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>vv(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>bs(),storage:Sv()}}function Av(){try{let e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return e instanceof DOMException&&e.name==="QuotaExceededError"&&localStorage&&localStorage.length!==0}}function wv(){return{getItem(){return null},removeItem(){},setItem(){}}}function bv(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:wv()}}function Cv(e){let t=e.get().mode!=="disabled",r=e.get().environment,n=bv();return t&&r?{storage:n.storage,...r,runtime:"custom"}:t&&xv()&&Av()?Rs():n}function xv(){try{return typeof window=="object"}catch{return!1}}function Rv(e){return{get:()=>Object.freeze(Cv(e))}}function md(e){let t=yv(e),r=gv(),n=Rv(t),o=sv(n);return{emit:(i,a)=>{let m=t.get(),f=n.get(),p=fv(i,a,m,f,o);return av({config:m,environment:f,event:p,listenerManager:r})},getMeta:i=>fd(i,t.get(),n.get(),o),on:(i,a)=>r.add({type:i,callback:a}),off:(i,a)=>r.remove(i,a),updateConfig:i=>t.update(i),version:dd}}d();c();l();u();function gd(){return typeof window<"u"&&typeof document<"u"}var Pn=ye(e=>e.configuration.organizationId,e=>e.configuration.environment,e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>br(e.configuration.analytics),(e,t)=>t,(e,t,r,{trackingId:n,apiBaseUrl:o,enabled:i},a,m)=>{let f=Iv(m);return md({mode:i?"emit":"disabled",url:o??ro(e,t),token:r,trackingId:n??null,source:a,environment:f})}),Ev={generateUUID:()=>"",getLocation:()=>null,getReferrer:()=>null,getUserAgent:()=>null,send:()=>{},storage:{getItem:()=>null,setItem:()=>{},removeItem:()=>{}}},Iv=e=>{if(!e)return;let t=e();return{...gd()?Rs():Ev,generateUUID:()=>t.clientId,getLocation:()=>t.location,getReferrer:()=>t.referrer,getUserAgent:()=>t.userAgent}};d();c();l();u();var kn=class extends ct{getSearchUID(){return this.state.documentSuggestion?.status.lastResponseId??""}},yd=({logger:e,getState:t,analyticsClientMiddleware:r=(i,a)=>a,preprocessRequest:n,provider:o=new kn(t)})=>{let i=t(),a=i.configuration.accessToken,m=i.configuration.analytics.apiBaseUrl??Se(i.configuration.organizationId,i.configuration.environment,"analytics"),f=i.configuration.analytics.runtimeEnvironment,p=i.configuration.analytics.enabled,g=new Wo({enableAnalytics:p,token:a,endpoint:m,runtimeEnvironment:f,preprocessRequest:Rn(e,n),beforeSendHooks:[En(e,r),(h,S)=>(e.info({...S,type:h,endpoint:m,token:a},"Analytics request"),S)]},o);return p||g.disable(),g};d();c();l();u();d();c();l();u();function hd(e,t){return{...new vt(t).getBaseMetadata(),actionCause:e,type:e}}function Fv(e){return Object.assign(e,{instantlyCallable:!0})}function Pv(e,t){let r=i=>Fv(ce(e,i)),n=r(async(i,{getState:a,extra:m})=>{let{analyticsClientMiddleware:f,preprocessRequest:p,logger:g}=m;return await(await t({getState:a,analyticsClientMiddleware:f,preprocessRequest:p,logger:g})).log({state:a(),extra:m})});return Object.assign(n,{prepare:async({getState:i,analyticsClientMiddleware:a,preprocessRequest:m,logger:f})=>{let{description:p,log:g}=await t({getState:i,analyticsClientMiddleware:a,preprocessRequest:m,logger:f});return{description:p,action:r(async(h,{getState:S,extra:y})=>await g({state:S(),extra:y}))}}}),n}var Sd=(e,t,r)=>{function n(...o){let i=o.length===1?{...o[0],__legacy__getBuilder:t(o[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:o[0],__legacy__getBuilder:t(o[1]),__legacy__provider:o[2],analyticsConfigurator:e,providerClass:r};return Tv(i)}return n},kv=e=>e.configuration.analytics.analyticsMode==="legacy",Ov=e=>e.configuration.analytics.analyticsMode==="next",Tv=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:o,analyticsConfigurator:i,providerClass:a})=>(r??(r=m=>new a(m)),Pv(e,async({getState:m,analyticsClientMiddleware:f,preprocessRequest:p,logger:g})=>{let h=[],S={log:async({state:C})=>{for(let P of h)await P(C)}},y=m(),v=i({getState:m,logger:g,analyticsClientMiddleware:f,preprocessRequest:p,provider:r(m)}),R=await t(v,m());S.description=R?.description,h.push(async C=>{kv(C)&&await Dv(R,r,C,g,v.coveoAnalyticsClient)});let{emit:I}=Pn(y);return h.push(async C=>{if(Ov(C)&&o&&n){let P=n(C);await Uv(I,o,P)}}),S}));async function Dv(e,t,r,n,o){t(()=>r);let i=await e?.log({searchUID:t(()=>r).getSearchUID()});n.info({client:o,response:i},"Analytics response")}var qv=e=>r=>(n,o)=>Promise.resolve({description:{actionCause:e},log:async i=>{r(n,o)}}),ke=Sd(e=>rd({...e,provider:e.provider||new vt(e.getState)}),e=>e,vt),hq=Sd(yd,qv("caseAssist"),kn);var Es=(e,t)=>{let r=t.recommendation?.recommendations.findIndex(({uniqueId:n})=>e.uniqueId===n)||0;return jv(e,r,t)};function jv(e,t,r){let n=e.raw.collection;return{collectionName:typeof n=="string"?n:"default",documentAuthor:_v(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:Vv(e),queryPipeline:r.pipeline||Sr()}}var ri=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),vd={urihash:new $,sourcetype:new $,permanentid:new $},Ad={uniqueId:W,raw:new K({values:vd}),title:W,uri:W,clickUri:W,rankingModifier:new $({required:!1,emptyAllowed:!0})};function Mv(e){return Object.assign({},...Object.keys(vd).map(t=>({[t]:e[t]})))}function Nv(e){return Object.assign({},...Object.keys(Ad).map(t=>({[t]:e[t]})),{raw:Mv(e.raw)})}function _v(e){let t=e.raw.author;return X(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function Vv(e){let t=e.raw.source;return X(t)?"unknown":t}var Is=e=>new Te(Ad).validate(Nv(e));async function Uv(e,t,r){await e(t,r)}d();c();l();u();var wd=()=>ke("analytics/recommendation/update",e=>e.makeRecommendationInterfaceLoad(),e=>new Fn(e)),bd=()=>({actionCause:"recommendationInterfaceLoad"}),oi=e=>ke({prefix:"analytics/recommendation/open",__legacy__getBuilder:(t,r)=>(Is(e),t.makeRecommendationOpen(Es(e,r),ri(e))),__legacy__provider:t=>new Fn(t),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=Es(e,t),n=ri(e);return{responseId:e.searchUid??"",position:r.documentPosition,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});var kr=O("recommendation/set",e=>N(e,{id:W})),At=ce("recommendation/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let o=t(),i=Date.now(),a=await Lv(o),m=await n.recommendations(a),f=Date.now()-i;return De(m)?r(m.error):{recommendations:m.success.results,analyticsAction:wd(),duration:f,searchUid:m.success.searchUid,splitTestRun:m.success.splitTestRun,pipeline:m.success.pipeline}}),Lv=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??pt(e.configuration.organizationId,e.configuration.environment),recommendation:e.recommendation.id,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,locale:e.configuration.search.locale,actionsHistory:e.configuration.analytics.enabled?Le.getInstance().getHistory():[],...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.configuration.analytics.enabled&&await Qv(e,bd()),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")},...e.pagination&&{numberOfResults:e.pagination.numberOfResults}}),Qv=async(e,t)=>{let r=e.configuration.analytics.analyticsMode==="legacy"?void 0:{actionCause:t.actionCause,type:t.actionCause};return await ti(e.configuration.analytics,r)};var Or=me(Pr(),e=>{e.addCase(kr,(t,r)=>{t.id=r.payload.id}).addCase(At.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(At.fulfilled,(t,r)=>{t.error=null,t.recommendations=r.payload.recommendations.map(n=>({...n,searchUid:r.payload.searchUid})),t.duration=r.payload.duration,t.isLoading=!1,t.searchUid=r.payload.searchUid,t.splitTestRun=r.payload.splitTestRun,t.pipeline=r.payload.pipeline}).addCase(At.pending,t=>{t.isLoading=!0}).addCase(To,(t,r)=>{t.error=r.payload,t.isLoading=!1})});d();c();l();u();var Tr=O("searchHub/set",e=>N(e,new $({required:!0,emptyAllowed:!0})));d();c();l();u();var Dr=me(Fr(),e=>{e.addCase(Tr,(t,r)=>r.payload).addCase(Me.fulfilled,(t,r)=>r.payload?.searchHub??t).addCase(Je,(t,r)=>r.payload.searchHub||t)});d();c();l();u();d();c();l();u();d();c();l();u();function Cd(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}var xd=Ke;function Md(e,t){if(e===t||!(xd(e)&&xd(t)||Array.isArray(e)&&Array.isArray(t)))return t;let r=Object.keys(t),n=Object.keys(e),o=r.length===n.length,i=Array.isArray(t)?[]:{};for(let a of r)i[a]=Md(e[a],t[a]),o&&(o=e[a]===i[a]);return o?e:i}function qr(e){let t=0;for(let r in e)t++;return t}var Rd=e=>[].concat(...e);function Bv(e){return new RegExp("(^|:)//").test(e)}function $v(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function si(e){return e!=null}function Hv(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var Gv=e=>e.replace(/\/$/,""),zv=e=>e.replace(/^\//,"");function Wv(e,t){if(!e)return t;if(!t)return e;if(Bv(t))return t;let r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=Gv(e),t=zv(t),`${e}${r}${t}`}function Kv(e,t,r){return e.has(t)?e.get(t):e.set(t,r).get(t)}var Ed=(...e)=>w(...e),Yv=e=>e.status>=200&&e.status<=299,Jv=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function Id(e){if(!Ke(e))return e;let t={...e};for(let[r,n]of Object.entries(t))n===void 0&&delete t[r];return t}function Nd({baseUrl:e,prepareHeaders:t=h=>h,fetchFn:r=Ed,paramsSerializer:n,isJsonContentType:o=Jv,jsonContentType:i="application/json",jsonReplacer:a,timeout:m,responseHandler:f,validateStatus:p,...g}={}){return typeof w>"u"&&r===Ed&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(S,y,v)=>{let{getState:R,extra:I,endpoint:C,forced:P,type:x}=y,E,{url:M,headers:T=new b(g.headers),params:F=void 0,responseHandler:k=f??"json",validateStatus:D=p??Yv,timeout:_=m,...H}=typeof S=="string"?{url:S}:S,Q,U=y.signal;_&&(Q=new s.AbortController,y.signal.addEventListener("abort",Q.abort),U=Q.signal);let V={...g,signal:U,...H};T=new b(Id(T)),V.headers=await t(T,{getState:R,arg:S,extra:I,endpoint:C,forced:P,type:x,extraOptions:v})||T;let B=Z=>typeof Z=="object"&&(Ke(Z)||Array.isArray(Z)||typeof Z.toJSON=="function");if(!V.headers.has("content-type")&&B(V.body)&&V.headers.set("content-type",i),B(V.body)&&o(V.headers)&&(V.body=JSON.stringify(V.body,a)),F){let Z=~M.indexOf("?")?"&":"?",ie=n?n(F):new URLSearchParams(Id(F));M+=Z+ie}M=Wv(e,M);let L=new Request(M,V);E={request:new Request(M,V)};let z,Y=!1,re=Q&&setTimeout(()=>{Y=!0,Q.abort()},_);try{z=await r(L)}catch(Z){return{error:{status:Y?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(Z)},meta:E}}finally{re&&clearTimeout(re),Q?.signal.removeEventListener("abort",Q.abort)}let se=z.clone();E.response=se;let te,ne="";try{let Z;if(await Promise.all([h(z,k).then(ie=>te=ie,ie=>Z=ie),se.text().then(ie=>ne=ie,()=>{})]),Z)throw Z}catch(Z){return{error:{status:"PARSING_ERROR",originalStatus:z.status,data:ne,error:String(Z)},meta:E}}return D(z,te)?{data:te,meta:E}:{error:{status:z.status,data:te},meta:E}};async function h(S,y){if(typeof y=="function")return y(S);if(y==="content-type"&&(y=o(S.headers)?"json":"text"),y==="json"){let v=await S.text();return v.length?JSON.parse(v):null}return S.text()}}var jr=class{constructor(e,t=void 0){this.value=e,this.meta=t}};async function Xv(e=0,t=5){let r=Math.min(e,t),n=~~((Math.random()+.4)*(300<<r));await new Promise(o=>setTimeout(i=>o(i),n))}function Zv(e,t){throw Object.assign(new jr({error:e,meta:t}),{throwImmediately:!0})}var Fd={},eA=(e,t)=>async(r,n,o)=>{let i=[5,(t||Fd).maxRetries,(o||Fd).maxRetries].filter(g=>g!==void 0),[a]=i.slice(-1),f={maxRetries:a,backoff:Xv,retryCondition:(g,h,{attempt:S})=>S<=a,...t,...o},p=0;for(;;)try{let g=await e(r,n,o);if(g.error)throw new jr(g);return g}catch(g){if(p++,g.throwImmediately){if(g instanceof jr)return g.value;throw g}if(g instanceof jr&&!f.retryCondition(g.value.error,r,{attempt:p,baseQueryApi:n,extraOptions:o}))return g.value;await f.backoff(p,f.maxRetries)}},ci=Object.assign(eA,{fail:Zv}),Ts=O("__rtkq/focused"),_d=O("__rtkq/unfocused"),Ds=O("__rtkq/online"),Vd=O("__rtkq/offline");function qs(e){return e.type==="query"}function tA(e){return e.type==="mutation"}function js(e){return e.type==="infinitequery"}function Ms(e,t,r,n,o,i){return rA(e)?e(t,r,n,o).filter(si).map(Ps).map(i):Array.isArray(e)?e.map(Ps).map(i):[]}function rA(e){return typeof e=="function"}function Ps(e){return typeof e=="string"?{type:e}:e}function nA(e,t){return e.catch(t)}var Tn=Symbol("forceQueryFn"),ks=e=>typeof e[Tn]=="function";function oA({serializeQueryArgs:e,queryThunk:t,infiniteQueryThunk:r,mutationThunk:n,api:o,context:i}){let a=new Map,m=new Map,{unsubscribeQueryResult:f,removeMutationResult:p,updateSubscriptionOptions:g}=o.internalActions;return{buildInitiateQuery:C,buildInitiateInfiniteQuery:P,buildInitiateMutation:x,getRunningQueryThunk:h,getRunningMutationThunk:S,getRunningQueriesThunk:y,getRunningMutationsThunk:v};function h(E,M){return T=>{let F=i.endpointDefinitions[E],k=e({queryArgs:M,endpointDefinition:F,endpointName:E});return a.get(T)?.[k]}}function S(E,M){return T=>m.get(T)?.[M]}function y(){return E=>Object.values(a.get(E)||{}).filter(si)}function v(){return E=>Object.values(m.get(E)||{}).filter(si)}function R(E){}function I(E,M){let T=(F,{subscribe:k=!0,forceRefetch:D,subscriptionOptions:_,[Tn]:H,...Q}={})=>(U,V)=>{let B=e({queryArgs:F,endpointDefinition:M,endpointName:E}),L,G={...Q,type:"query",subscribe:k,forceRefetch:D,subscriptionOptions:_,endpointName:E,originalArgs:F,queryCacheKey:B,[Tn]:H};if(qs(M))L=t(G);else{let{direction:le,initialPageParam:fe}=Q;L=r({...G,direction:le,initialPageParam:fe})}let z=o.endpoints[E].select(F),Y=U(L),re=z(V());let{requestId:se,abort:te}=Y,ne=re.requestId!==se,Z=a.get(U)?.[B],ie=()=>z(V()),ge=Object.assign(H?Y.then(ie):ne&&!Z?Promise.resolve(re):Promise.all([Z,Y]).then(ie),{arg:F,requestId:se,subscriptionOptions:_,queryCacheKey:B,abort:te,async unwrap(){let le=await ge;if(le.isError)throw le.error;return le.data},refetch:()=>U(T(F,{subscribe:!1,forceRefetch:!0})),unsubscribe(){k&&U(f({queryCacheKey:B,requestId:se}))},updateSubscriptionOptions(le){ge.subscriptionOptions=le,U(g({endpointName:E,requestId:se,queryCacheKey:B,options:le}))}});if(!Z&&!ne&&!H){let le=Kv(a,U,{});le[B]=ge,ge.then(()=>{delete le[B],qr(le)||a.delete(U)})}return ge};return T}function C(E,M){return I(E,M)}function P(E,M){return I(E,M)}function x(E){return(M,{track:T=!0,fixedCacheKey:F}={})=>(k,D)=>{let _=n({type:"mutation",endpointName:E,originalArgs:M,track:T,fixedCacheKey:F}),H=k(_);let{requestId:Q,abort:U,unwrap:V}=H,B=nA(H.unwrap().then(Y=>({data:Y})),Y=>({error:Y})),L=()=>{k(p({requestId:Q,fixedCacheKey:F}))},G=Object.assign(B,{arg:H.arg,requestId:Q,abort:U,unwrap:V,reset:L}),z=m.get(k)||{};return m.set(k,z),z[Q]=G,G.then(()=>{delete z[Q],qr(z)||m.delete(k)}),F&&(z[F]=G,G.then(()=>{z[F]===G&&(delete z[F],qr(z)||m.delete(k))})),G}}}function iA(e){return e}var ii=(e={})=>({...e,[Sn]:!0});function aA({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:n,api:o,assertTagType:i,selectors:a}){let m=(k,D,_,H)=>(Q,U)=>{let V=r[k],B=n({queryArgs:D,endpointDefinition:V,endpointName:k});if(Q(o.internalActions.queryResultPatched({queryCacheKey:B,patches:_})),!H)return;let L=o.endpoints[k].select(D)(U()),G=Ms(V.providesTags,L.data,void 0,D,{},i);Q(o.internalActions.updateProvidedBy({queryCacheKey:B,providedTags:G}))};function f(k,D,_=0){let H=[D,...k];return _&&H.length>_?H.slice(0,-1):H}function p(k,D,_=0){let H=[...k,D];return _&&H.length>_?H.slice(1):H}let g=(k,D,_,H=!0)=>(Q,U)=>{let B=o.endpoints[k].select(D)(U()),L={patches:[],inversePatches:[],undo:()=>Q(o.util.patchQueryData(k,D,L.inversePatches,H))};if(B.status==="uninitialized")return L;let G;if("data"in B)if(je(B.data)){let[z,Y,re]=go(B.data,_);L.patches.push(...Y),L.inversePatches.push(...re),G=z}else G=_(B.data),L.patches.push({op:"replace",path:[],value:G}),L.inversePatches.push({op:"replace",path:[],value:B.data});return L.patches.length===0||Q(o.util.patchQueryData(k,D,L.patches,H)),L},h=(k,D,_)=>H=>H(o.endpoints[k].initiate(D,{subscribe:!1,forceRefetch:!0,[Tn]:()=>({data:_})})),S=(k,D)=>k.query&&k[D]?k[D]:iA,y=async(k,{signal:D,abort:_,rejectWithValue:H,fulfillWithValue:Q,dispatch:U,getState:V,extra:B})=>{let L=r[k.endpointName];try{let G=S(L,"transformResponse"),z={signal:D,abort:_,dispatch:U,getState:V,extra:B,endpoint:k.endpointName,type:k.type,forced:k.type==="query"?v(k,V()):void 0,queryCacheKey:k.type==="query"?k.queryCacheKey:void 0},Y=k.type==="query"?k[Tn]:void 0,re,se=async(ne,Z,ie,ge)=>{if(Z==null&&ne.pages.length)return Promise.resolve({data:ne});let le={queryArg:k.originalArgs,pageParam:Z},fe=await te(le),he=ge?f:p;return{data:{pages:he(ne.pages,fe.data,ie),pageParams:he(ne.pageParams,Z,ie)}}};async function te(ne){let Z,{extraOptions:ie}=L;if(Y?Z=Y():L.query?Z=await t(L.query(ne),z,ie):Z=await L.queryFn(ne,z,ie,le=>t(le,z,ie)),typeof process<"u",Z.error)throw new jr(Z.error,Z.meta);let ge=await G(Z.data,Z.meta,ne);return{...Z,data:ge}}if(k.type==="query"&&"infiniteQueryOptions"in L){let{infiniteQueryOptions:ne}=L,{maxPages:Z=1/0}=ne,ie,ge={pages:[],pageParams:[]},le=a.selectQueryEntry(V(),k.queryCacheKey)?.data,he=v(k,V())&&!k.direction||!le?ge:le;if("direction"in k&&k.direction&&he.pages.length){let Oe=k.direction==="backward",dt=(Oe?Ud:Os)(ne,he);ie=await se(he,dt,Z,Oe)}else{let{initialPageParam:Oe=ne.initialPageParam}=k,Ve=le?.pageParams??[],dt=Ve[0]??Oe,Xt=Ve.length;ie=await se(he,dt,Z),Y&&(ie={data:ie.data.pages[0]});for(let Zt=1;Zt<Xt;Zt++){let Xr=Os(ne,ie.data);ie=await se(ie.data,Xr,Z)}}re=ie}else re=await te(k.originalArgs);return Q(re.data,ii({fulfilledTimeStamp:Date.now(),baseQueryMeta:re.meta}))}catch(G){let z=G;if(z instanceof jr){let Y=S(L,"transformErrorResponse");try{return H(await Y(z.value,z.meta,k.originalArgs),ii({baseQueryMeta:z.meta}))}catch(re){z=re}}throw typeof process<"u",console.error(z),z}};function v(k,D){let _=a.selectQueryEntry(D,k.queryCacheKey),H=a.selectConfig(D).refetchOnMountOrArgChange,Q=_?.fulfilledTimeStamp,U=k.forceRefetch??(k.subscribe&&H);return U?U===!0||(Number(new Date)-Number(Q))/1e3>=U:!1}let R=()=>ce(`${e}/executeQuery`,y,{getPendingMeta({arg:D}){let _=r[D.endpointName];return ii({startedTimeStamp:Date.now(),...js(_)?{direction:D.direction}:{}})},condition(D,{getState:_}){let H=_(),Q=a.selectQueryEntry(H,D.queryCacheKey),U=Q?.fulfilledTimeStamp,V=D.originalArgs,B=Q?.originalArgs,L=r[D.endpointName],G=D.direction;return ks(D)?!0:Q?.status==="pending"?!1:v(D,H)||qs(L)&&L?.forceRefetch?.({currentArg:V,previousArg:B,endpointState:Q,state:H})?!0:!(U&&!G)},dispatchConditionRejection:!0}),I=R(),C=R(),P=ce(`${e}/executeMutation`,y,{getPendingMeta(){return ii({startedTimeStamp:Date.now()})}}),x=k=>"force"in k,E=k=>"ifOlderThan"in k,M=(k,D,_)=>(H,Q)=>{let U=x(_)&&_.force,V=E(_)&&_.ifOlderThan,B=(G=!0)=>{let z={forceRefetch:G,isPrefetch:!0};return o.endpoints[k].initiate(D,z)},L=o.endpoints[k].select(D)(Q());if(U)H(B());else if(V){let G=L?.fulfilledTimeStamp;if(!G){H(B());return}(Number(new Date)-Number(new Date(G)))/1e3>=V&&H(B())}else H(B(!1))};function T(k){return D=>D?.meta?.arg?.endpointName===k}function F(k,D){return{matchPending:dr(wo(k),T(D)),matchFulfilled:dr(ot(k),T(D)),matchRejected:dr(Lt(k),T(D))}}return{queryThunk:I,mutationThunk:P,infiniteQueryThunk:C,prefetch:M,updateQueryData:g,upsertQueryData:h,patchQueryData:m,buildMatchThunkActions:F}}function Os(e,{pages:t,pageParams:r}){let n=t.length-1;return e.getNextPageParam(t[n],t,r[n],r)}function Ud(e,{pages:t,pageParams:r}){return e.getPreviousPageParam?.(t[0],t,r[0],r)}function Ld(e,t,r,n){return Ms(r[e.meta.arg.endpointName][t],ot(e)?e.payload:void 0,An(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function ai(e,t,r){let n=e[t];n&&r(n)}function Dn(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function Pd(e,t,r){let n=e[Dn(t)];n&&r(n)}var On={};function sA({reducerPath:e,queryThunk:t,mutationThunk:r,serializeQueryArgs:n,context:{endpointDefinitions:o,apiUid:i,extractRehydrationInfo:a,hasRehydrationInfo:m},assertTagType:f,config:p}){let g=O(`${e}/resetApiState`);function h(T,F,k,D){var _;T[_=F.queryCacheKey]??(T[_]={status:"uninitialized",endpointName:F.endpointName}),ai(T,F.queryCacheKey,H=>{H.status="pending",H.requestId=k&&H.requestId?H.requestId:D.requestId,F.originalArgs!==void 0&&(H.originalArgs=F.originalArgs),H.startedTimeStamp=D.startedTimeStamp;let Q=o[D.arg.endpointName];js(Q)&&"direction"in F&&(H.direction=F.direction)})}function S(T,F,k,D){ai(T,F.arg.queryCacheKey,_=>{if(_.requestId!==F.requestId&&!D)return;let{merge:H}=o[F.arg.endpointName];if(_.status="fulfilled",H)if(_.data!==void 0){let{fulfilledTimeStamp:Q,arg:U,baseQueryMeta:V,requestId:B}=F,L=nt(_.data,G=>H(G,k,{arg:U.originalArgs,baseQueryMeta:V,fulfilledTimeStamp:Q,requestId:B}));_.data=L}else _.data=k;else _.data=o[F.arg.endpointName].structuralSharing??!0?Md(Ne(_.data)?Da(_.data):_.data,k):k;delete _.error,_.fulfilledTimeStamp=F.fulfilledTimeStamp})}let y=Qt({name:`${e}/queries`,initialState:On,reducers:{removeQueryResult:{reducer(T,{payload:{queryCacheKey:F}}){delete T[F]},prepare:pr()},cacheEntriesUpserted:{reducer(T,F){for(let k of F.payload){let{queryDescription:D,value:_}=k;h(T,D,!0,{arg:D,requestId:F.meta.requestId,startedTimeStamp:F.meta.timestamp}),S(T,{arg:D,requestId:F.meta.requestId,fulfilledTimeStamp:F.meta.timestamp,baseQueryMeta:{}},_,!0)}},prepare:T=>({payload:T.map(D=>{let{endpointName:_,arg:H,value:Q}=D,U=o[_];return{queryDescription:{type:"query",endpointName:_,originalArgs:D.arg,queryCacheKey:n({queryArgs:H,endpointDefinition:U,endpointName:_})},value:Q}}),meta:{[Sn]:!0,requestId:wn(),timestamp:Date.now()}})},queryResultPatched:{reducer(T,{payload:{queryCacheKey:F,patches:k}}){ai(T,F,D=>{D.data=ja(D.data,k.concat())})},prepare:pr()}},extraReducers(T){T.addCase(t.pending,(F,{meta:k,meta:{arg:D}})=>{let _=ks(D);h(F,D,_,k)}).addCase(t.fulfilled,(F,{meta:k,payload:D})=>{let _=ks(k.arg);S(F,k,D,_)}).addCase(t.rejected,(F,{meta:{condition:k,arg:D,requestId:_},error:H,payload:Q})=>{ai(F,D.queryCacheKey,U=>{if(!k){if(U.requestId!==_)return;U.status="rejected",U.error=Q??H}})}).addMatcher(m,(F,k)=>{let{queries:D}=a(k);for(let[_,H]of Object.entries(D))(H?.status==="fulfilled"||H?.status==="rejected")&&(F[_]=H)})}}),v=Qt({name:`${e}/mutations`,initialState:On,reducers:{removeMutationResult:{reducer(T,{payload:F}){let k=Dn(F);k in T&&delete T[k]},prepare:pr()}},extraReducers(T){T.addCase(r.pending,(F,{meta:k,meta:{requestId:D,arg:_,startedTimeStamp:H}})=>{_.track&&(F[Dn(k)]={requestId:D,status:"pending",endpointName:_.endpointName,startedTimeStamp:H})}).addCase(r.fulfilled,(F,{payload:k,meta:D})=>{D.arg.track&&Pd(F,D,_=>{_.requestId===D.requestId&&(_.status="fulfilled",_.data=k,_.fulfilledTimeStamp=D.fulfilledTimeStamp)})}).addCase(r.rejected,(F,{payload:k,error:D,meta:_})=>{_.arg.track&&Pd(F,_,H=>{H.requestId===_.requestId&&(H.status="rejected",H.error=k??D)})}).addMatcher(m,(F,k)=>{let{mutations:D}=a(k);for(let[_,H]of Object.entries(D))(H?.status==="fulfilled"||H?.status==="rejected")&&_!==H?.requestId&&(F[_]=H)})}}),R=Qt({name:`${e}/invalidation`,initialState:On,reducers:{updateProvidedBy:{reducer(T,F){var _,H;let{queryCacheKey:k,providedTags:D}=F.payload;for(let Q of Object.values(T))for(let U of Object.values(Q)){let V=U.indexOf(k);V!==-1&&U.splice(V,1)}for(let{type:Q,id:U}of D){let V=(_=T[Q]??(T[Q]={}))[H=U||"__internal_without_id"]??(_[H]=[]);V.includes(k)||V.push(k)}},prepare:pr()}},extraReducers(T){T.addCase(y.actions.removeQueryResult,(F,{payload:{queryCacheKey:k}})=>{for(let D of Object.values(F))for(let _ of Object.values(D)){let H=_.indexOf(k);H!==-1&&_.splice(H,1)}}).addMatcher(m,(F,k)=>{var _,H;let{provided:D}=a(k);for(let[Q,U]of Object.entries(D))for(let[V,B]of Object.entries(U)){let L=(_=F[Q]??(F[Q]={}))[H=V||"__internal_without_id"]??(_[H]=[]);for(let G of B)L.includes(G)||L.push(G)}}).addMatcher(Ye(ot(t),An(t)),(F,k)=>{let D=Ld(k,"providesTags",o,f),{queryCacheKey:_}=k.meta.arg;R.caseReducers.updateProvidedBy(F,R.actions.updateProvidedBy({queryCacheKey:_,providedTags:D}))})}}),I=Qt({name:`${e}/subscriptions`,initialState:On,reducers:{updateSubscriptionOptions(T,F){},unsubscribeQueryResult(T,F){},internal_getRTKQSubscriptions(){}}}),C=Qt({name:`${e}/internalSubscriptions`,initialState:On,reducers:{subscriptionsUpdated:{reducer(T,F){return ja(T,F.payload)},prepare:pr()}}}),P=Qt({name:`${e}/config`,initialState:{online:Hv(),focused:$v(),middlewareRegistered:!1,...p},reducers:{middlewareRegistered(T,{payload:F}){T.middlewareRegistered=T.middlewareRegistered==="conflict"||i!==F?"conflict":!0}},extraReducers:T=>{T.addCase(Ds,F=>{F.online=!0}).addCase(Vd,F=>{F.online=!1}).addCase(Ts,F=>{F.focused=!0}).addCase(_d,F=>{F.focused=!1}).addMatcher(m,F=>({...F}))}}),x=or({queries:y.reducer,mutations:v.reducer,provided:R.reducer,subscriptions:C.reducer,config:P.reducer}),E=(T,F)=>x(g.match(F)?void 0:T,F),M={...P.actions,...y.actions,...I.actions,...C.actions,...v.actions,...R.actions,resetApiState:g};return{reducer:E,actions:M}}var Fs=Symbol.for("RTKQ/skipToken"),Qd={status:"uninitialized"},kd=nt(Qd,()=>{}),Od=nt(Qd,()=>{});function cA({serializeQueryArgs:e,reducerPath:t,createSelector:r}){let n=x=>kd,o=x=>Od;return{buildQuerySelector:S,buildInfiniteQuerySelector:y,buildMutationSelector:v,selectInvalidatedBy:R,selectCachedArgsForQuery:I,selectApiState:a,selectQueries:m,selectMutations:p,selectQueryEntry:f,selectConfig:g};function i(x){return{...x,...Cd(x.status)}}function a(x){return x[t]}function m(x){return a(x)?.queries}function f(x,E){return m(x)?.[E]}function p(x){return a(x)?.mutations}function g(x){return a(x)?.config}function h(x,E,M){return T=>{if(T===Fs)return r(n,M);let F=e({queryArgs:T,endpointDefinition:E,endpointName:x});return r(D=>f(D,F)??kd,M)}}function S(x,E){return h(x,E,i)}function y(x,E){let{infiniteQueryOptions:M}=E;function T(F){let k={...F,...Cd(F.status)},{isLoading:D,isError:_,direction:H}=k,Q=H==="forward",U=H==="backward";return{...k,hasNextPage:C(M,k.data),hasPreviousPage:P(M,k.data),isFetchingNextPage:D&&Q,isFetchingPreviousPage:D&&U,isFetchNextPageError:_&&Q,isFetchPreviousPageError:_&&U}}return h(x,E,T)}function v(){return x=>{let E;return typeof x=="object"?E=Dn(x)??Fs:E=x,r(E===Fs?o:F=>a(F)?.mutations?.[E]??Od,i)}}function R(x,E){let M=x[t],T=new Set;for(let F of E.filter(si).map(Ps)){let k=M.provided[F.type];if(!k)continue;let D=(F.id!==void 0?k[F.id]:Rd(Object.values(k)))??[];for(let _ of D)T.add(_)}return Rd(Array.from(T.values()).map(F=>{let k=M.queries[F];return k?[{queryCacheKey:F,endpointName:k.endpointName,originalArgs:k.originalArgs}]:[]}))}function I(x,E){return Object.values(m(x)).filter(M=>M?.endpointName===E&&M.status!=="uninitialized").map(M=>M.originalArgs)}function C(x,E){return E?Os(x,E)!=null:!1}function P(x,E){return!E||!x.getPreviousPageParam?!1:Ud(x,E)!=null}}var Td=WeakMap?new WeakMap:void 0,Dd=({endpointName:e,queryArgs:t})=>{let r="",n=Td?.get(t);if(typeof n=="string")r=n;else{let o=JSON.stringify(t,(i,a)=>(a=typeof a=="bigint"?{$bigint:a.toString()}:a,a=Ke(a)?Object.keys(a).sort().reduce((m,f)=>(m[f]=a[f],m),{}):a,a));Ke(t)&&Td?.set(t,o),r=o}return`${e}(${r})`};function uA(...e){return function(r){let n=ur(p=>r.extractRehydrationInfo?.(p,{reducerPath:r.reducerPath??"api"})),o={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...r,extractRehydrationInfo:n,serializeQueryArgs(p){let g=Dd;if("serializeQueryArgs"in p.endpointDefinition){let h=p.endpointDefinition.serializeQueryArgs;g=S=>{let y=h(S);return typeof y=="string"?y:Dd({...S,queryArgs:y})}}else r.serializeQueryArgs&&(g=r.serializeQueryArgs);return g(p)},tagTypes:[...r.tagTypes||[]]},i={endpointDefinitions:{},batch(p){p()},apiUid:wn(),extractRehydrationInfo:n,hasRehydrationInfo:ur(p=>n(p)!=null)},a={injectEndpoints:f,enhanceEndpoints({addTagTypes:p,endpoints:g}){if(p)for(let h of p)o.tagTypes.includes(h)||o.tagTypes.push(h);if(g)for(let[h,S]of Object.entries(g))typeof S=="function"?S(i.endpointDefinitions[h]):Object.assign(i.endpointDefinitions[h]||{},S);return a}},m=e.map(p=>p.init(a,o,i));function f(p){let g=p.endpoints({query:h=>({...h,type:"query"}),mutation:h=>({...h,type:"mutation"}),infiniteQuery:h=>({...h,type:"infinitequery"})});for(let[h,S]of Object.entries(g)){if(p.overrideExisting!==!0&&h in i.endpointDefinitions){if(p.overrideExisting==="throw")throw new Error(Pe(39));typeof process<"u";continue}typeof process<"u",i.endpointDefinitions[h]=S;for(let y of m)y.injectEndpoint(h,S)}return a}return a.injectEndpoints({endpoints:r.endpoints})}}function ut(e,...t){return Object.assign(e,...t)}var lA=({api:e,queryThunk:t,internalState:r})=>{let n=`${e.reducerPath}/subscriptions`,o=null,i=null,{updateSubscriptionOptions:a,unsubscribeQueryResult:m}=e.internalActions,f=(y,v)=>{var I,C;if(a.match(v)){let{queryCacheKey:P,requestId:x,options:E}=v.payload;return y?.[P]?.[x]&&(y[P][x]=E),!0}if(m.match(v)){let{queryCacheKey:P,requestId:x}=v.payload;return y[P]&&delete y[P][x],!0}if(e.internalActions.removeQueryResult.match(v))return delete y[v.payload.queryCacheKey],!0;if(t.pending.match(v)){let{meta:{arg:P,requestId:x}}=v,E=y[I=P.queryCacheKey]??(y[I]={});return E[`${x}_running`]={},P.subscribe&&(E[x]=P.subscriptionOptions??E[x]??{}),!0}let R=!1;if(t.fulfilled.match(v)||t.rejected.match(v)){let P=y[v.meta.arg.queryCacheKey]||{},x=`${v.meta.requestId}_running`;R||(R=!!P[x]),delete P[x]}if(t.rejected.match(v)){let{meta:{condition:P,arg:x,requestId:E}}=v;if(P&&x.subscribe){let M=y[C=x.queryCacheKey]??(y[C]={});M[E]=x.subscriptionOptions??M[E]??{},R=!0}}return R},p=()=>r.currentSubscriptions,S={getSubscriptions:p,getSubscriptionCount:y=>{let R=p()[y]??{};return qr(R)},isRequestSubscribed:(y,v)=>!!p()?.[y]?.[v]};return(y,v)=>{if(o||(o=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(y))return o=r.currentSubscriptions={},i=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(y))return[!1,S];let R=f(r.currentSubscriptions,y),I=!0;if(R){i||(i=setTimeout(()=>{let x=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,E]=go(o,()=>x);v.next(e.internalActions.subscriptionsUpdated(E)),o=x,i=null},500));let C=typeof y.type=="string"&&!!y.type.startsWith(n),P=t.rejected.match(y)&&y.meta.condition&&!!y.meta.arg.subscribe;I=!C&&!P}return[I,!1]}};function dA(e){for(let t in e)return!1;return!0}var pA=2147483647/1e3-1,fA=({reducerPath:e,api:t,queryThunk:r,context:n,internalState:o,selectors:{selectQueryEntry:i,selectConfig:a}})=>{let{removeQueryResult:m,unsubscribeQueryResult:f,cacheEntriesUpserted:p}=t.internalActions,g=Ye(f.match,r.fulfilled,r.rejected,p.match);function h(I){let C=o.currentSubscriptions[I];return!!C&&!dA(C)}let S={},y=(I,C,P)=>{let x=C.getState(),E=a(x);if(g(I)){let M;if(p.match(I))M=I.payload.map(T=>T.queryDescription.queryCacheKey);else{let{queryCacheKey:T}=f.match(I)?I.payload:I.meta.arg;M=[T]}v(M,C,E)}if(t.util.resetApiState.match(I))for(let[M,T]of Object.entries(S))T&&clearTimeout(T),delete S[M];if(n.hasRehydrationInfo(I)){let{queries:M}=n.extractRehydrationInfo(I);v(Object.keys(M),C,E)}};function v(I,C,P){let x=C.getState();for(let E of I){let M=i(x,E);R(E,M?.endpointName,C,P)}}function R(I,C,P,x){let M=n.endpointDefinitions[C]?.keepUnusedDataFor??x.keepUnusedDataFor;if(M===1/0)return;let T=Math.max(0,Math.min(M,pA));if(!h(I)){let F=S[I];F&&clearTimeout(F),S[I]=setTimeout(()=>{h(I)||P.dispatch(m({queryCacheKey:I})),delete S[I]},T*1e3)}}return y},qd=new Error("Promise never resolved before cacheEntryRemoved."),mA=({api:e,reducerPath:t,context:r,queryThunk:n,mutationThunk:o,internalState:i,selectors:{selectQueryEntry:a,selectApiState:m}})=>{let f=bo(n),p=bo(o),g=ot(n,o),h={};function S(C,P,x){let E=h[C];E?.valueResolved&&(E.valueResolved({data:P,meta:x}),delete E.valueResolved)}function y(C){let P=h[C];P&&(delete h[C],P.cacheEntryRemoved())}let v=(C,P,x)=>{let E=R(C);function M(T,F,k,D){let _=a(x,F),H=a(P.getState(),F);!_&&H&&I(T,D,F,P,k)}if(n.pending.match(C))M(C.meta.arg.endpointName,E,C.meta.requestId,C.meta.arg.originalArgs);else if(e.internalActions.cacheEntriesUpserted.match(C))for(let{queryDescription:T,value:F}of C.payload){let{endpointName:k,originalArgs:D,queryCacheKey:_}=T;M(k,_,C.meta.requestId,D),S(_,F,{})}else if(o.pending.match(C))P.getState()[t].mutations[E]&&I(C.meta.arg.endpointName,C.meta.arg.originalArgs,E,P,C.meta.requestId);else if(g(C))S(E,C.payload,C.meta.baseQueryMeta);else if(e.internalActions.removeQueryResult.match(C)||e.internalActions.removeMutationResult.match(C))y(E);else if(e.util.resetApiState.match(C))for(let T of Object.keys(h))y(T)};function R(C){return f(C)?C.meta.arg.queryCacheKey:p(C)?C.meta.arg.fixedCacheKey??C.meta.requestId:e.internalActions.removeQueryResult.match(C)?C.payload.queryCacheKey:e.internalActions.removeMutationResult.match(C)?Dn(C.payload):""}function I(C,P,x,E,M){let T=r.endpointDefinitions[C],F=T?.onCacheEntryAdded;if(!F)return;let k={},D=new Promise(B=>{k.cacheEntryRemoved=B}),_=Promise.race([new Promise(B=>{k.valueResolved=B}),D.then(()=>{throw qd})]);_.catch(()=>{}),h[x]=k;let H=e.endpoints[C].select(T.type==="query"?P:x),Q=E.dispatch((B,L,G)=>G),U={...E,getCacheEntry:()=>H(E.getState()),requestId:M,extra:Q,updateCachedData:T.type==="query"?B=>E.dispatch(e.util.updateQueryData(C,P,B)):void 0,cacheDataLoaded:_,cacheEntryRemoved:D},V=F(P,U);Promise.resolve(V).catch(B=>{if(B!==qd)throw B})}return v},gA=({api:e,context:{apiUid:t},reducerPath:r})=>(n,o)=>{e.util.resetApiState.match(n)&&o.dispatch(e.internalActions.middlewareRegistered(t)),typeof process<"u"},yA=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:n,queryThunk:o,api:i,assertTagType:a,refetchQuery:m,internalState:f})=>{let{removeQueryResult:p}=i.internalActions,g=Ye(ot(n),An(n)),h=Ye(ot(n,o),Lt(n,o)),S=[],y=(I,C)=>{g(I)?R(Ld(I,"invalidatesTags",r,a),C):h(I)?R([],C):i.util.invalidateTags.match(I)&&R(Ms(I.payload,void 0,void 0,void 0,void 0,a),C)};function v(I){let{queries:C,mutations:P}=I;for(let x of[C,P])for(let E in x)if(x[E]?.status==="pending")return!0;return!1}function R(I,C){let P=C.getState(),x=P[e];if(S.push(...I),x.config.invalidationBehavior==="delayed"&&v(x))return;let E=S;if(S=[],E.length===0)return;let M=i.util.selectInvalidatedBy(P,E);t.batch(()=>{let T=Array.from(M.values());for(let{queryCacheKey:F}of T){let k=x.queries[F],D=f.currentSubscriptions[F]??{};k&&(qr(D)===0?C.dispatch(p({queryCacheKey:F})):k.status!=="uninitialized"&&C.dispatch(m(k)))}})}return y},hA=({reducerPath:e,queryThunk:t,api:r,refetchQuery:n,internalState:o})=>{let i={},a=(y,v)=>{(r.internalActions.updateSubscriptionOptions.match(y)||r.internalActions.unsubscribeQueryResult.match(y))&&p(y.payload,v),(t.pending.match(y)||t.rejected.match(y)&&y.meta.condition)&&p(y.meta.arg,v),(t.fulfilled.match(y)||t.rejected.match(y)&&!y.meta.condition)&&f(y.meta.arg,v),r.util.resetApiState.match(y)&&h()};function m(y,v){let I=v.getState()[e].queries[y],C=o.currentSubscriptions[y];if(!(!I||I.status==="uninitialized"))return C}function f({queryCacheKey:y},v){let R=v.getState()[e],I=R.queries[y],C=o.currentSubscriptions[y];if(!I||I.status==="uninitialized")return;let{lowestPollingInterval:P,skipPollingIfUnfocused:x}=S(C);if(!Number.isFinite(P))return;let E=i[y];E?.timeout&&(clearTimeout(E.timeout),E.timeout=void 0);let M=Date.now()+P;i[y]={nextPollTimestamp:M,pollingInterval:P,timeout:setTimeout(()=>{(R.config.focused||!x)&&v.dispatch(n(I)),f({queryCacheKey:y},v)},P)}}function p({queryCacheKey:y},v){let I=v.getState()[e].queries[y],C=o.currentSubscriptions[y];if(!I||I.status==="uninitialized")return;let{lowestPollingInterval:P}=S(C);if(!Number.isFinite(P)){g(y);return}let x=i[y],E=Date.now()+P;(!x||E<x.nextPollTimestamp)&&f({queryCacheKey:y},v)}function g(y){let v=i[y];v?.timeout&&clearTimeout(v.timeout),delete i[y]}function h(){for(let y of Object.keys(i))g(y)}function S(y={}){let v=!1,R=Number.POSITIVE_INFINITY;for(let I in y)y[I].pollingInterval&&(R=Math.min(y[I].pollingInterval,R),v=y[I].skipPollingIfUnfocused||v);return{lowestPollingInterval:R,skipPollingIfUnfocused:v}}return a},SA=({api:e,context:t,queryThunk:r,mutationThunk:n})=>{let o=wo(r,n),i=Lt(r,n),a=ot(r,n),m={};return(p,g)=>{if(o(p)){let{requestId:h,arg:{endpointName:S,originalArgs:y}}=p.meta,v=t.endpointDefinitions[S],R=v?.onQueryStarted;if(R){let I={},C=new Promise((M,T)=>{I.resolve=M,I.reject=T});C.catch(()=>{}),m[h]=I;let P=e.endpoints[S].select(v.type==="query"?y:h),x=g.dispatch((M,T,F)=>F),E={...g,getCacheEntry:()=>P(g.getState()),requestId:h,extra:x,updateCachedData:v.type==="query"?M=>g.dispatch(e.util.updateQueryData(S,y,M)):void 0,queryFulfilled:C};R(y,E)}}else if(a(p)){let{requestId:h,baseQueryMeta:S}=p.meta;m[h]?.resolve({data:p.payload,meta:S}),delete m[h]}else if(i(p)){let{requestId:h,rejectedWithValue:S,baseQueryMeta:y}=p.meta;m[h]?.reject({error:p.payload??p.error,isUnhandledError:!S,meta:y}),delete m[h]}}},vA=({reducerPath:e,context:t,api:r,refetchQuery:n,internalState:o})=>{let{removeQueryResult:i}=r.internalActions,a=(f,p)=>{Ts.match(f)&&m(p,"refetchOnFocus"),Ds.match(f)&&m(p,"refetchOnReconnect")};function m(f,p){let g=f.getState()[e],h=g.queries,S=o.currentSubscriptions;t.batch(()=>{for(let y of Object.keys(S)){let v=h[y],R=S[y];if(!R||!v)continue;(Object.values(R).some(C=>C[p]===!0)||Object.values(R).every(C=>C[p]===void 0)&&g.config[p])&&(qr(R)===0?f.dispatch(i({queryCacheKey:y})):v.status!=="uninitialized"&&f.dispatch(n(v)))}})}return a};function AA(e){let{reducerPath:t,queryThunk:r,api:n,context:o}=e,{apiUid:i}=o,a={invalidateTags:O(`${t}/invalidateTags`)},m=h=>h.type.startsWith(`${t}/`),f=[gA,fA,yA,hA,mA,SA];return{middleware:h=>{let S=!1,v={...e,internalState:{currentSubscriptions:{}},refetchQuery:g,isThisApiSliceAction:m},R=f.map(P=>P(v)),I=lA(v),C=vA(v);return P=>x=>{if(!ar(x))return P(x);S||(S=!0,h.dispatch(n.internalActions.middlewareRegistered(i)));let E={...h,next:P},M=h.getState(),[T,F]=I(x,E,M),k;if(T?k=P(x):k=F,h.getState()[t]&&(C(x,E,M),m(x)||o.hasRehydrationInfo(x)))for(let D of R)D(x,E,M);return k}},actions:a};function g(h){return e.api.endpoints[h.endpointName].initiate(h.originalArgs,{subscribe:!1,forceRefetch:!0})}}var jd=Symbol(),wA=({createSelector:e=ye}={})=>({name:jd,init(t,{baseQuery:r,tagTypes:n,reducerPath:o,serializeQueryArgs:i,keepUnusedDataFor:a,refetchOnMountOrArgChange:m,refetchOnFocus:f,refetchOnReconnect:p,invalidationBehavior:g},h){qu();let S=te=>(typeof process<"u",te);Object.assign(t,{reducerPath:o,endpoints:{},internalActions:{onOnline:Ds,onOffline:Vd,onFocus:Ts,onFocusLost:_d},util:{}});let y=cA({serializeQueryArgs:i,reducerPath:o,createSelector:e}),{selectInvalidatedBy:v,selectCachedArgsForQuery:R,buildQuerySelector:I,buildInfiniteQuerySelector:C,buildMutationSelector:P}=y;ut(t.util,{selectInvalidatedBy:v,selectCachedArgsForQuery:R});let{queryThunk:x,infiniteQueryThunk:E,mutationThunk:M,patchQueryData:T,updateQueryData:F,upsertQueryData:k,prefetch:D,buildMatchThunkActions:_}=aA({baseQuery:r,reducerPath:o,context:h,api:t,serializeQueryArgs:i,assertTagType:S,selectors:y}),{reducer:H,actions:Q}=sA({context:h,queryThunk:x,infiniteQueryThunk:E,mutationThunk:M,serializeQueryArgs:i,reducerPath:o,assertTagType:S,config:{refetchOnFocus:f,refetchOnReconnect:p,refetchOnMountOrArgChange:m,keepUnusedDataFor:a,reducerPath:o,invalidationBehavior:g}});ut(t.util,{patchQueryData:T,updateQueryData:F,upsertQueryData:k,prefetch:D,resetApiState:Q.resetApiState,upsertQueryEntries:Q.cacheEntriesUpserted}),ut(t.internalActions,Q);let{middleware:U,actions:V}=AA({reducerPath:o,context:h,queryThunk:x,mutationThunk:M,infiniteQueryThunk:E,api:t,assertTagType:S,selectors:y});ut(t.util,V),ut(t,{reducer:H,middleware:U});let{buildInitiateQuery:B,buildInitiateInfiniteQuery:L,buildInitiateMutation:G,getRunningMutationThunk:z,getRunningMutationsThunk:Y,getRunningQueriesThunk:re,getRunningQueryThunk:se}=oA({queryThunk:x,mutationThunk:M,infiniteQueryThunk:E,api:t,serializeQueryArgs:i,context:h});return ut(t.util,{getRunningMutationThunk:z,getRunningMutationsThunk:Y,getRunningQueryThunk:se,getRunningQueriesThunk:re}),{name:jd,injectEndpoint(te,ne){var ge;let ie=(ge=t.endpoints)[te]??(ge[te]={});qs(ne)&&ut(ie,{name:te,select:I(te,ne),initiate:B(te,ne)},_(x,te)),tA(ne)&&ut(ie,{name:te,select:P(),initiate:G(te)},_(M,te)),js(ne)&&ut(ie,{name:te,select:C(te,ne),initiate:L(te,ne)},_(x,te))}}}}),ui=uA(wA());d();c();l();u();var Ns=async(e,t,r)=>{let n=t.getState(),{accessToken:o,environment:i,organizationId:a}=n.configuration,m=n.generatedAnswer.answerConfigurationId,f={...e,headers:{...e?.headers||{},Authorization:`Bearer ${o}`}};try{let p=Se(a,i);return{data:Nd({baseUrl:`${p}/rest/organizations/${a}/answer/v1/configs/${m}`,fetchFn:async h=>{if(h instanceof String)throw new Error("The provided 'request' must be a Request object.");let S=h.url,y={};return["method","headers","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal"].forEach(v=>{y[v]=h[v]}),y.duplex="half",y.body=await h.text(),w(S,y)}})(f,{...t,signal:null},r)}}catch(p){return{error:p}}},Bd=ui({reducerPath:"answer",baseQuery:ci(Ns,{maxRetries:3}),endpoints:()=>({})});var Mr=ui({reducerPath:"answerGenerationApi",refetchOnMountOrArgChange:!0,baseQuery:ci(Ns,{maxRetries:3}),endpoints:()=>({})});d();c();l();u();d();c();l();u();d();c();l();u();var Gt=e=>e.query,$d=e=>e.query?.enableQuerySyntax;var oj=ye(e=>Gt(e)?.q,e=>e.search.requestId,e=>e.generatedAnswer.cannotAnswer,e=>e.configuration.analytics.analyticsMode,e=>e.search.searchAction?.actionCause,(e,t,r,n,o)=>({q:e,requestId:t,cannotAnswer:r,analyticsMode:n,actionCause:o})),bA=ye(e=>e.generatedAnswer?.answerApiQueryParams,e=>e);d();c();l();u();d();c();l();u();d();c();l();u();var li=()=>({contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!1,isLoading:!0});d();c();l();u();d();c();l();u();d();c();l();u();async function Gd(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value)}function zd(e){let t,r,n,o=!1;return function(a){t===void 0?(t=a,r=0,n=-1):t=xA(t,a);let m=t.length,f=0;for(;r<m;){o&&(t[r]===10&&(f=++r),o=!1);let p=-1;for(;r<m&&p===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-f);break;case 13:o=!0,p=r;break;case 10:p=r;break}if(p===-1)break;e(t.subarray(f,p),n),f=r,n=-1}f===m?t=void 0:f!==0&&(t=t.subarray(f),r-=f)}}function Wd(e,t,r){let n=Hd(),o=new TextDecoder;return function(a,m){if(a.length===0)r?.(n),n=Hd();else if(m>0){let f=o.decode(a.subarray(0,m)),p=m+(a[m+1]===32?2:1),g=o.decode(a.subarray(p));switch(f){case"data":n.data=n.data?`${n.data}
${g}`:g;break;case"event":n.event=g;break;case"id":e(n.id=g);break;case"retry":CA(g,n,t);break}}}}function CA(e,t,r){let n=parseInt(e,10);Number.isNaN(n)||r(t.retry=n)}function xA(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function Hd(){return{data:"",event:"",id:"",retry:void 0}}var _s="text/event-stream",RA=1e3,Kd="last-event-id";function Yd(){return typeof window<"u"}function di(e,{signal:t,headers:r,onopen:n,onmessage:o,onclose:i,onerror:a,openWhenHidden:m,fetch:f,...p}){return new Promise((g,h)=>{let S={...r};S.accept||(S.accept=_s);let y;function v(){y?.abort(),document.hidden||E()}!m&&Yd()&&document.addEventListener("visibilitychange",v);let R=RA,I;function C(){Yd()&&document.removeEventListener("visibilitychange",v),clearTimeout(I),y?.abort()}t?.addEventListener("abort",()=>{C(),g()});let P=f??w,x=n??EA;async function E(){y=s.AbortController?new s.AbortController:null;try{let M=await P(e,{...p,headers:S,signal:y?.signal});await x(M),await Gd(M.body,zd(Wd(T=>{T?S[Kd]=T:delete S[Kd]},T=>{R=T},o))),i?.(),C(),g()}catch(M){if(!y?.signal?.aborted)try{let T=a?.(M)??R;clearTimeout(I),I=setTimeout(E,T)}catch(T){C(),h(T)}}}E()})}function EA(e){let t=e.headers.get("content-type");if(!t?.startsWith(_s))throw new Error(`Expected content-type to be ${_s}, Actual: ${t}`)}d();c();l();u();d();c();l();u();var Jd=(e,t)=>{t&&(e.answerId=t)},Xd=(e,t)=>{let{contentFormat:r}=t;e.contentFormat=r,e.isStreaming=!0,e.isLoading=!1},Zd=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},ep=(e,t)=>{e.citations=t.citations},tp=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},rp=(e,t)=>{let r=t.errorMessage||"Unknown error occurred";e.error={message:r,code:t.code??500},e.isStreaming=!1,e.isLoading=!1,console.error(`Generated answer error: ${r} (code: ${t.code})`)};var pi={handleOpen:(e,t)=>{let r=e.headers.get("x-answer-id");r&&t(n=>{Jd(n,r)})},handleMessage:{"agentInteraction.answerHeader":(e,t)=>{t(r=>{Xd(r,{contentFormat:"text/markdown"})})},"generativeengines.messageType":(e,t)=>{e?.payload?.textDelta&&t(r=>{Zd(r,e.payload)})},"agentInteraction.citations":(e,t)=>{e?.payload?.citations!==void 0&&t(r=>{ep(r,e.payload)})},"generativeengines.endOfStreamType":(e,t)=>{t(r=>{tp(r,e.payload)})},error:(e,t)=>{e.finishReason==="ERROR"&&t(r=>{rp(r,e)})}}};var fi=(e,t,r,n)=>{let{dispatch:o,updateCachedData:i,getState:a}=r,{configuration:{accessToken:m}}=a();return di(e,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${m}`,Accept:"text/event-stream","Content-Type":"application/json","Accept-Encoding":"*"},fetch:w,onopen:async f=>{pi.handleOpen(f,i),n.handleOpen(f,o)},onclose:()=>{n.handleClose?.(o)},onerror:f=>{n.handleError(f)},onmessage:f=>{let p=IA(f.data);if(!p)return;pi.handleMessage.error?.(p,i),n.handleMessage.error?.(p,o);let g=p.payloadType;pi.handleMessage[g]?.(p,i),n.handleMessage[g]?.(p,o)}})};function IA(e){if(!e?.length)return null;try{return JSON.parse(e)}catch(t){return console.warn("Failed to parse message",{payload:e,error:t}),null}}d();c();l();u();d();c();l();u();d();c();l();u();d();c();l();u();d();c();l();u();var np=e=>{let{configuration:t}=e,{organizationId:r,environment:n,knowledge:{agentId:o}}=t,i=Se(r,n),a=o?.trim();if(!i||!r||!a)throw new Error("Missing required parameters for follow up endpoint");let m=`/api/preview/organizations/${r}/agents`;return`${i}${m}/${a}/follow-up`};var FA=Mr.injectEndpoints({overrideExisting:!0,endpoints:e=>({generateFollowUpAnswer:e.query({queryFn:()=>({data:li()}),async onQueryStarted(t,{getState:r,updateCachedData:n,dispatch:o}){let{strategyKey:i,...a}=t,m=np(r());await fi(m,a,{getState:r,updateCachedData:n,dispatch:o},mi[i]?.())}})})}),op=e=>FA.endpoints.generateFollowUpAnswer.initiate(e);d();c();l();u();var ip=(e,t)=>({conversationId:t.followUpAnswers?.conversationId??"",q:e});var PA=new $({required:!0}),ap=O("followUpAnswers/setIsEnabled",e=>N(e,new ee({required:!0}))),sp=O("followUpAnswers/setFollowUpAnswersConversationId",e=>N(e,W)),kA=O("followUpAnswers/createFollowUpAnswer",e=>N(e,{question:W})),cp=O("followUpAnswers/setActiveFollowUpAnswerId",e=>N(e,W)),up=O("followUpAnswers/setFollowUpAnswerContentFormat",e=>N(e,{contentFormat:gi,answerId:W})),lp=O("followUpAnswers/setFollowUpIsLoading",e=>N(e,{isLoading:new ee({required:!0}),answerId:W})),dp=O("followUpAnswers/followUpMessageChunkReceived",e=>N(e,{textDelta:PA,answerId:W})),pp=O("followUpAnswers/followUpCitationsReceived",e=>N(e,{citations:new oe({required:!0,each:new K({values:Vs})}),answerId:W})),fp=O("followUpAnswers/followUpCompleted",e=>N(e,{answerId:W,cannotAnswer:new ee({required:!1})})),mp=O("followUpAnswers/followUpFailed",e=>N(e,{message:new $,code:new J({min:0}),answerId:W})),SM=O("followUpAnswers/likeFollowUp",e=>N(e,{answerId:W})),vM=O("followUpAnswers/dislikeFollowUp",e=>N(e,{answerId:W})),AM=O("followUpAnswers/submitFollowUpFeedback",e=>N(e,{answerId:W})),gp=O("followUpAnswers/resetFollowUpAnswers"),wM=ce("generatedAnswerWithFollowUps/generateFollowUpAnswer",async(e,{getState:t,dispatch:r,extra:{logger:n}})=>{let o=t(),i=Ir(o)?.trim(),a=ip(e,o);if(!i){n.warn("Missing agentId in engine configuration. The generateFollowUpAnswer action requires an agent ID.");return}if(!a.conversationId){n.warn("Missing conversationId when generating a follow-up answer. The generateFollowUpAnswer action requires an existing conversation.");return}r(kA({question:e})),await r(op({strategyKey:"follow-up-answer",...a}))});var yp=()=>{let e=null;return{handleOpen:(t,r)=>{e=t.headers.get("x-answer-id"),e&&(r(cp(e)),r(lp({answerId:e,isLoading:!0})),r(up({contentFormat:"text/markdown",answerId:e})))},handleError:t=>{throw t},handleMessage:{"generativeengines.messageType":(t,r)=>{t?.payload?.textDelta&&r(dp({textDelta:t.payload.textDelta,answerId:e}))},"agentInteraction.citations":(t,r)=>{t?.payload?.citations!==void 0&&r(pp({citations:t.payload.citations,answerId:e}))},"generativeengines.endOfStreamType":(t,r)=>{let n=t?.payload?.answerGenerated??!1;r(fp({cannotAnswer:!n,answerId:e}))},error:(t,r)=>{t.finishReason==="ERROR"&&r(mp({answerId:e,message:t.errorMessage,code:t.code}))}}}};d();c();l();u();d();c();l();u();var Nr=e=>ke({prefix:"analytics/generatedAnswer/streamEnd",__legacy__getBuilder:(t,r)=>{let n=Ht(r),o=e?!r.generatedAnswer?.answer||!r.generatedAnswer?.answer.length:void 0;return n?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:n,answerGenerated:e,answerTextIsEmpty:o}):null},analyticsType:"Rga.AnswerReceived",analyticsPayloadBuilder:t=>({answerId:Ht(t)??"",answerGenerated:e??!1})}),_r=()=>ke({prefix:"analytics/generatedAnswer/responseLinked",__legacy__getBuilder:()=>null,analyticsType:"Rga.ResponseLinked",analyticsPayloadBuilder:e=>({answerId:Ht(e)??"",responseId:e.search?.searchResponseId||e.search?.response.searchUid||""})});var hp=()=>({handleOpen:(e,t)=>{let r=e.headers.get("x-answer-id");r&&t(yi(r))},handleError:e=>{throw e},handleMessage:{"agentInteraction.answerHeader":(e,t)=>{e?.payload?.conversationId&&t(sp(e.payload.conversationId)),e.payload.followUpEnabled&&t(ap(e.payload.followUpEnabled)),t(Nn("text/markdown")),t(qn(!0)),t(Vr(!1))},"generativeengines.messageType":(e,t)=>{e?.payload?.textDelta&&t(jn({textDelta:e.payload.textDelta}))},"agentInteraction.citations":(e,t)=>{e?.payload?.citations!==void 0&&t(Mn({citations:e.payload.citations}))},"generativeengines.endOfStreamType":(e,t)=>{let r=e?.payload?.answerGenerated??!1;t(Ls(r)),t(_n(!r)),t(qn(!1)),t(Vr(!1)),t(Nr(r)),t(_r())},error:(e,t)=>{e.finishReason==="ERROR"&&t(Us(e))}}});var mi={"head-answer":hp,"follow-up-answer":yp};d();c();l();u();var Sp=e=>{let{configuration:t}=e,{organizationId:r,environment:n,knowledge:{agentId:o}}=t,i=Se(r,n),a=o?.trim();if(!i||!r||!a)throw new Error("Missing required parameters for answer endpoint");let m=`/api/preview/organizations/${r}/agents`;return`${i}${m}/${a}/answer`};var OA=Mr.injectEndpoints({overrideExisting:!0,endpoints:e=>({generateAnswer:e.query({queryFn:()=>({data:li()}),async onQueryStarted(t,{getState:r,updateCachedData:n,dispatch:o}){let{strategyKey:i,...a}=t,m=Sp(r());await fi(m,a,{getState:r,updateCachedData:n,dispatch:o},mi[i]?.())}})})}),vp=e=>OA.endpoints.generateAnswer.initiate(e);d();c();l();u();d();c();l();u();var Ap=ye(e=>e.advancedSearchQueries,e=>{if(!e)return{};let{aq:t,cq:r,dq:n,lq:o}=e;return{...t&&{aq:t},...r&&{cq:r},...n&&{dq:n},...o&&{lq:o}}});d();c();l();u();var Vn=(e,t,r)=>({analytics:{clientId:t.clientId,clientTimestamp:new Date().toISOString(),documentReferrer:t.referrer,documentLocation:t.location,originContext:e.originContext,...r&&{actionCause:r.actionCause},...r&&{customData:r.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.deviceId&&{deviceId:e.deviceId},...e.trackingId&&{trackingId:e.trackingId},capture:t.capture??t.clientId!=="",source:br(e)}});d();c();l();u();var wp=e=>e.context;d();c();l();u();var Qs=e=>e.pipeline;d();c();l();u();d();c();l();u();var Un=$e(hi(),1),Ip=$e(bp(),1);d();c();l();u();var Si=$e(hi(),1),xp=$e(Cp(),1);Si.default.extend(xp.default);var Rp="YYYY/MM/DD@HH:mm:ss",TA="1401-01-01";function Ur(e,t){let r=(0,Si.default)(e,t);return!r.isValid()&&!t?(0,Si.default)(e,Rp):r}function vi(e){return e.format(Rp)}function Ep(e,t){let r=Ur(e,t);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",o=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?o:n}`)}Ks(r)}function Ks(e){if(e.isBefore(TA))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}Un.default.extend(Ip.default);var Fp=["past","now","next"],Pp=["minute","hour","day","week","month","quarter","year"],DA=e=>{let t=e==="now";return{amount:new J({required:!t,min:1}),unit:new $({required:!t,constrainTo:Pp}),period:new $({required:!0,constrainTo:Fp})}};function Ys(e){if(typeof e=="string"&&!wt(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?qp(e):e;new Te(DA(t.period)).validate(t);let r=Op(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);Ks(r)}function kp(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function Op(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,Un.default)().subtract(r,n);case"next":return(0,Un.default)().add(r,n);case"now":return(0,Un.default)()}}function Ln(e){return vi(Op(qp(e)))}function Tp(e){return e.toLocaleLowerCase().split("-")}function wt(e){let[t,r,n]=Tp(e);if(t==="now")return!0;if(!Fp.includes(t)||!Pp.includes(n))return!1;let o=parseInt(r);return!(Number.isNaN(o)||o<=0)}function Dp(e){return!!e&&typeof e=="object"&&"period"in e}function qp(e){let[t,r,n]=Tp(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}d();c();l();u();function jp(e){return e.type==="dateRange"}function Mp(e){return`start${e}`}function Np(e){return`end${e}`}var Js=()=>({dateFacetValueMap:{}});function qA(e,t,r){let n=e.start,o=e.end;return wt(n)&&(n=Ln(n),r.dateFacetValueMap[t][Mp(n)]=e.start),wt(o)&&(o=Ln(o),r.dateFacetValueMap[t][Np(o)]=e.end),{...e,start:n,end:o}}function Xs(e,t){if(jp(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(o=>qA(o,r,t))}}return e}function bt(e){let t=Js();return{request:{...e,facets:e.facets?.map(n=>Xs(n,t))},mappings:t}}function jA(e,t,r){return{...e,start:r.dateFacetValueMap[t][Mp(e.start)]||e.start,end:r.dateFacetValueMap[t][Np(e.end)]||e.end}}function MA(e,t){return e.facetId in t.dateFacetValueMap}function NA(e,t){return MA(e,t)?{...e,values:e.values.map(r=>jA(r,e.facetId,t))}:e}function Ai(e,t){return"success"in e?{success:{...e.success,facets:e.success.facets?.map(n=>NA(n,t))}}:e}d();c();l();u();d();c();l();u();d();c();l();u();function Ct(e){return Object.values(e).map(t=>t.request)}function Zs(e,t){let r={};e.forEach(i=>{r[i.facetId]=i});let n=[];t.forEach(i=>{i in r&&(n.push(r[i]),delete r[i])});let o=Object.values(r);return[...n,...o]}function _p(e){return Ct(e).map(t=>{let n=t.currentValues.some(({state:o})=>o!=="idle");return t.generateAutomaticRanges&&!n?{...t,currentValues:[]}:t})}var ec={alphanumericDescending:{type:"alphanumeric",order:"descending"},alphanumericNaturalDescending:{type:"alphanumericNatural",order:"descending"}};function _A(e){return Ct(e).map(t=>{let r=ec[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function VA(e){return[..._A(e.facetSet??{}),..._p(e.numericFacetSet??{}),..._p(e.dateFacetSet??{}),...Ct(e.categoryFacetSet??{})]}function UA(e){return VA(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function wi(e){return Zs(UA(e),e.facetOrder??[])}d();c();l();u();d();c();l();u();var xt=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??pt(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{actionsHistory:Le.getInstance().getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await ti(e.configuration.analytics,t),...e.excerptLength&&!X(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});d();c();l();u();var Lr=(e,t,r)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??pt(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:t.referrer,timezone:e.configuration.search.timezone,...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&Vn(e.configuration.analytics,t,r),...e.excerptLength&&!X(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});d();c();l();u();var Vp=ye(e=>e.staticFilterSet,e=>Object.values(e||{}).map(r=>{let n=r.values.filter(i=>i.state==="selected"&&!!i.expression.trim()),o=n.map(i=>i.expression).join(" OR ");return n.length>1?`(${o})`:o}));var Rt=async(e,t,r)=>{let n=rc(e),o=LA(e),i=QA(e),a=e.configuration.analytics.analyticsMode==="legacy"?await xt(e,r):Lr(e,t,r);return bt({...a,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...n&&{cq:n},...o.length&&{facets:o},...e.pagination&&{numberOfResults:tc(e),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:i}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function tc(e){return e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0}function LA(e){return Zs($A(e),e.facetOrder??[])}function QA(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(BA).filter(r=>r.currentValues.length>0):void 0}function BA(e){let{field:t,label:r,values:n}=e,o=n.filter(i=>i.state==="selected");return{field:t,label:r,currentValues:o}}function $A(e){return HA(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function HA(e){return[...GA(e.facetSet??{}),...Up(e.numericFacetSet??{}),...Up(e.dateFacetSet??{}),...Ct(e.categoryFacetSet??{})]}function GA(e){return Ct(e).map(t=>{let r=ec[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function Up(e){return Ct(e).map(t=>{let r=t.currentValues,n=r.some(({state:i})=>i!=="idle"),o=r.some(i=>i.previousState);return t.generateAutomaticRanges&&!n&&!o?{...t,currentValues:[]}:t})}function rc(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(i=>i.isActive)?.expression.trim()||"",o=Vp(e);return[t,n,...o].filter(i=>!!i).join(" AND ")}d();c();l();u();d();c();l();u();var Qn=(e,t)=>{let r=e;return X(r[t])?X(e.raw[t])?null:e.raw[t]:r[t]},zA=e=>t=>e.every(r=>!X(Qn(t,r))),WA=e=>t=>e.every(r=>X(Qn(t,r))),KA=(e,t)=>r=>{let n=Lp(e,r);return t.some(o=>n.some(i=>`${i}`.toLowerCase()===o.toLowerCase()))},YA=(e,t)=>r=>{let n=Lp(e,r);return t.every(o=>n.every(i=>`${i}`.toLowerCase()!==o.toLowerCase()))},Lp=(e,t)=>{let r=Qn(t,e);return Zc(r)?r:[r]},Qp={getResultProperty:Qn,fieldsMustBeDefined:zA,fieldsMustNotBeDefined:WA,fieldMustMatch:KA,fieldMustNotMatch:YA};var nc=ye(e=>e.search,e=>e?.searchAction?.actionCause||"");d();c();l();u();var oc=e=>e.searchHub;d();c();l();u();var ic=ye(e=>e,e=>{if(!e)return"";for(let t in e)if(e[t].isActive)return e[t].id;return""}),LV=ye(e=>e,e=>{let t=ic(e);return t&&e?e[t].expression:""});d();c();l();u();var Bp=e=>{if(!(!e.dictionaryFieldContext||!Object.keys(e.dictionaryFieldContext.contextValues).length))return e.dictionaryFieldContext.contextValues};d();c();l();u();var $p=e=>e.excerptLength?.length;d();c();l();u();var Hp=e=>{let{freezeFacetOrder:t}=e.facetOptions??{};return t!==void 0?{freezeFacetOrder:t}:void 0};d();c();l();u();var Gp=e=>{if(e.folding)return{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}};d();c();l();u();var zp=e=>e.sortCriteria;var Wp=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:Se(e.configuration.organizationId,e.configuration.environment),streamId:e.search.extendedResults?.generativeQuestionAnsweringId}),Kp=(e,t)=>{let r=Gt(e)?.q,{aq:n,cq:o,dq:i,lq:a}=XA(e),m=wp(e),f=Vn(e.configuration.analytics,t,{actionCause:nc(e)}),p=oc(e),g=Qs(e),h=gs(e)??[],S=Jp(e),y=ic(e.tabSet)||"default",v=fs(e),R=Xl(e),I=t.referrer||"",C=Hp(e),P=zp(e),x=JA(e),E=$p(e),M=Gp(e),T=Bp(e);return{q:r,...n&&{aq:n},...o&&{cq:o},...i&&{dq:i},...a&&{lq:a},...e.query&&{enableQuerySyntax:$d(e)},...m?.contextValues&&{context:m.contextValues},pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:h}},...p?.length&&{searchHub:p},...g?.length&&{pipeline:g},...S.length&&{facets:S},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...e.pagination&&{numberOfResults:tc(e),firstResult:e.pagination.firstResult},tab:y,locale:v,timezone:R,...e.debug!==void 0&&{debug:e.debug},referrer:I,...x,...M??{},...E&&{excerptLength:E},...T&&{dictionaryFieldContext:T},sortCriteria:P,...C&&{facetOptions:C},...f,...e.insightCaseContext?.caseContext&&{caseContext:e.insightCaseContext?.caseContext}}},Yp=(e,t)=>{let r=Gt(e)?.q,n=Jp(e),o=Vn(e.configuration.analytics,t,{actionCause:nc(e)}),i=fs(e),a=oc(e),m=Qs(e),f=gs(e)??[];return{q:r||"",...n.length&&{facets:n},pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:f}},...a?.length&&{searchHub:a},...m?.length&&{pipeline:m},...o,locale:i}},Jp=e=>wi(e)?.map(t=>Xs(t,Js())).sort((t,r)=>t.facetId>r.facetId?1:r.facetId>t.facetId?-1:0),JA=e=>({actionsHistory:e.configuration.analytics.enabled?Le.getInstance().getHistory():[]}),XA=e=>{let t=Ap(e),r=rc(e);return{...t,...r&&{cq:r}}};d();c();l();u();var Xp=["text/plain","text/markdown"];var Qr=new $({required:!0}),Zp=new $,Br=new ee({required:!0}),Vs={id:Qr,title:Qr,uri:Qr,permanentid:Qr,clickUri:Zp},gi=new $({required:!0,constrainTo:Xp}),nL=O("generatedAnswer/setIsVisible",e=>N(e,Br)),yi=O("generatedAnswer/setAnswerId",e=>N(e,W)),oL=O("generatedAnswer/setAnswerGenerationMode",e=>N(e,new $({constrainTo:["automatic","manual"],required:!1,default:"automatic"}))),iL=O("generatedAnswer/setIsEnabled",e=>N(e,Br)),jn=O("generatedAnswer/updateMessage",e=>N(e,{textDelta:Qr})),Mn=O("generatedAnswer/updateCitations",e=>N(e,{citations:new oe({required:!0,each:new K({values:Vs})})})),Us=O("generatedAnswer/updateError",e=>N(e,{message:Zp,code:new J({min:0})})),Bn=O("generatedAnswer/resetAnswer"),aL=O("generatedAnswer/like"),sL=O("generatedAnswer/dislike"),cL=O("generatedAnswer/feedbackModal/open"),uL=O("generatedAnswer/expand"),lL=O("generatedAnswer/collapse"),dL=O("generatedAnswer/setId",e=>N(e,{id:new $({required:!0})})),pL=O("generatedAnswer/feedbackModal/close"),fL=O("generatedAnswer/sendFeedback"),Vr=O("generatedAnswer/setIsLoading",e=>N(e,Br)),qn=O("generatedAnswer/setIsStreaming",e=>N(e,Br)),Nn=O("generatedAnswer/setAnswerContentFormat",e=>N(e,gi)),mL=O("generatedAnswer/updateResponseFormat",e=>N(e,{contentFormat:new oe({each:gi,default:["text/plain"]})})),gL=O("knowledge/updateAnswerConfigurationId",e=>N(e,Qr)),yL=O("generatedAnswer/registerFieldsToIncludeInCitations",e=>N(e,Ro)),Ls=O("generatedAnswer/setIsAnswerGenerated",e=>N(e,Br)),_n=O("generatedAnswer/setCannotAnswer",e=>N(e,Br)),ef=O("generatedAnswer/setAnswerApiQueryParams",e=>N(e,new K({}))),hL=ce("generatedAnswer/streamAnswer",async(e,t)=>{let r=t.getState(),{dispatch:n,extra:o,getState:i}=t,{search:a}=i(),{queryExecuted:m}=a,{setAbortControllerRef:f}=e,p=await Wp(r),g=(y,v)=>{switch(y){case"genqa.headerMessageType":{let R=JSON.parse(v);n(Nn(R.contentFormat));break}case"genqa.messageType":n(jn(JSON.parse(v)));break;case"genqa.citationsType":n(Mn(JSON.parse(v)));break;case"genqa.endOfStreamType":{let R=JSON.parse(v).answerGenerated,I=m.length!==0&&!R;n(_n(I)),n(qn(!1)),n(Ls(R)),n(Nr(R)),n(_r());break}default:r.debug&&o.logger.warn(`Unknown payloadType: "${y}"`)}};n(Vr(!0));let h=y=>y.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,S=o.streamingClient?.streamGeneratedAnswer(p,{write:y=>{h(p)&&(n(Vr(!1)),y.payload&&y.payloadType&&g(y.payloadType,y.payload))},abort:y=>{h(p)&&n(Us(y))},close:()=>{h(p)&&n(qn(!1))},resetAnswer:()=>{h(p)&&n(Bn())}});S?f(S):n(Vr(!1))}),SL=ce("generatedAnswer/generateAnswer",async(e,{getState:t,dispatch:r,extra:{navigatorContext:n,logger:o}})=>{r(Bn());let i=t();if(i.generatedAnswer.answerConfigurationId){let a=Kp(i,n);r(ef(a)),await r(rf(a))}else o.warn("[WARNING] Missing answerConfigurationId in engine configuration. The generateAnswer action requires an answer configuration ID to use CRGA with the Answer API.")}),tf=ce("generatedAnswerWithFollowUps/generateHeadAnswer",async(e,{getState:t,dispatch:r,extra:{navigatorContext:n,logger:o}})=>{let i=t();if(!Ir(i)){o.warn("Missing agentId in engine configuration. The generateHeadAnswer action requires an agent ID.");return}r(Bn());let m=Yp(i,n),f={...m,strategyKey:"head-answer"};r(ef(m)),await r(vp(f))});var ZA=(e,t)=>{let{contentFormat:r}=t;e.contentFormat=r,e.isStreaming=!0,e.isLoading=!1},ew=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},tw=(e,t)=>{e.citations=t.citations},rw=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},nw=(e,t)=>{let r=t.errorMessage||"Unknown error occurred";e.error={message:r,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error(`Generated answer error: ${r} (code: ${t.code})`)},ow=(e,t,r)=>{let n=JSON.parse(e.data);n.finishReason==="ERROR"&&n.errorMessage&&nw(t,n);let o=n.payload.length?JSON.parse(n.payload):{};switch(n.payloadType){case"genqa.headerMessageType":o.contentFormat&&(ZA(t,o),r(Nn(o.contentFormat)));break;case"genqa.messageType":o.textDelta&&(ew(t,o),r(jn({textDelta:o.textDelta})));break;case"genqa.citationsType":o.citations&&(tw(t,o),r(Mn({citations:o.citations})));break;case"genqa.endOfStreamType":rw(t,o),r(Nr(o.answerGenerated??!1)),r(_r());break}},iw=(e,t,r,n)=>{if(!e||!t||!r)throw new Error("Missing required parameters for answer endpoint");let o=`/rest/organizations/${t}`,i=n?`insight/v1/configs/${n}/answer`:"answer/v1/configs";return`${e}${o}/${i}/${r}/generate`},ac=Bd.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),serializeQueryArgs:({endpointName:t,queryArgs:r})=>{let{analytics:n,...o}=r;return`${t}(${JSON.stringify(o)})`},async onCacheEntryAdded(t,{getState:r,cacheDataLoaded:n,updateCachedData:o,dispatch:i}){await n;let{configuration:a,generatedAnswer:m,insightConfiguration:f}=r(),{organizationId:p,environment:g,accessToken:h}=a,S=Se(p,g),y=iw(S,p,m.answerConfigurationId,f?.insightId);await di(y,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${h}`,Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch:w,onopen:async v=>{let R=v.headers.get("x-answer-id");R&&o(I=>{I.answerId=R,i(yi(R))})},onmessage:v=>{o(R=>{ow(v,R,i)})},onerror:v=>{throw v},onclose:()=>{o(v=>{i(_n(!v.generated))})}})}})})}),rf=e=>ac.endpoints.getAnswer.initiate(e);d();c();l();u();var nf=me(fr,e=>e);d();c();l();u();function aw(e){let t=e.payload?.analyticsAction;return of(e)&&!X(t)}function of(e){return"type"in e}var af=e=>t=>r=>{let n;aw(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let o=t(r);return of(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),o};d();c();l();u();d();c();l();u();d();c();l();u();var JL=O("tab/register",e=>{let t=new K({values:{id:W,expression:xe}});return N(e,t)}),bi=O("tab/updateActiveTab",e=>N(e,W));d();c();l();u();var Ci=$e(hi(),1),uf=$e(sf(),1),lf=$e(cf(),1);Ci.default.extend(lf.default);Ci.default.extend(uf.default);var df=()=>({organizationId:"",accessToken:"",search:{locale:"en-US",timezone:Ci.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",analyticsMode:"next",source:{}},knowledge:{answerConfigurationId:"",agentId:void 0},environment:"prod"});d();c();l();u();var sw=/(^|; )Coveo-Pendragon=([^;]*)/;function dc(){return typeof window>"u"?!1:sw.exec(document.cookie)?.pop()||null}var pf=me(df(),e=>e.addCase(yt,(t,r)=>{cw(t,r.payload)}).addCase(Je,(t,r)=>{uw(t,r.payload)}).addCase(mr,(t,r)=>{lw(t,r.payload)}).addCase(gr,t=>{t.analytics.enabled=!1}).addCase(yr,t=>{t.analytics.enabled=!0}).addCase(Eo,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(Io,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(bi,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(vl,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(ht,(t,r)=>{X(r.payload.tab)||(t.analytics.originLevel2=r.payload.tab)}).addCase(hl,(t,{payload:r})=>{t.knowledge.agentId=r}));function cw(e,t){X(t.accessToken)||(e.accessToken=t.accessToken),e.environment=t.environment??"prod",X(t.organizationId)||(e.organizationId=t.organizationId)}function uw(e,t){X(t.proxyBaseUrl)||(e.search.apiBaseUrl=t.proxyBaseUrl),X(t.locale)||(e.search.locale=t.locale),X(t.timezone)||(e.search.timezone=t.timezone),X(t.authenticationProviders)||(e.search.authenticationProviders=t.authenticationProviders)}function lw(e,t){X(t.enabled)||(e.analytics.enabled=t.enabled),X(t.originContext)||(e.analytics.originContext=t.originContext),X(t.originLevel2)||(e.analytics.originLevel2=t.originLevel2),X(t.originLevel3)||(e.analytics.originLevel3=t.originLevel3),X(t.proxyBaseUrl)||(e.analytics.apiBaseUrl=t.proxyBaseUrl),X(t.trackingId)||(e.analytics.trackingId=t.trackingId),X(t.analyticsMode)||(e.analytics.analyticsMode=t.analyticsMode),X(t.source)||(e.analytics.source=t.source);try{let r=dc();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r)}catch{}X(t.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.runtimeEnvironment),X(t.anonymous)||(e.analytics.anonymous=t.anonymous),X(t.deviceId)||(e.analytics.deviceId=t.deviceId),X(t.userDisplayName)||(e.analytics.userDisplayName=t.userDisplayName),X(t.documentLocation)||(e.analytics.documentLocation=t.documentLocation)}var Ge=pf;d();c();l();u();function dw(e){return e.instantlyCallable}var ff=()=>e=>t=>e(dw(t)?t():t);d();c();l();u();d();c();l();u();d();c();l();u();var xi=O("breadcrumb/deselectAll"),mf=O("breadcrumb/deselectAllNonBreadcrumbs");d();c();l();u();var gf=O("facet/updateFacetAutoSelection",e=>N(e,{allow:new ee({required:!0})}));d();c();l();u();d();c();l();u();var Ri=class extends vt{constructor(r){super(r);this.getState=r}get activeInstantResultQuery(){let r=this.getState().instantResults;for(let n in r)for(let o in r[n].cache)if(r[n].cache[o].isActive)return r[n].q;return null}get activeInstantResultCache(){let r=this.getState().instantResults;for(let n in r)for(let o in r[n].cache)if(r[n].cache[o].isActive)return r[n].cache[o];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??_e().q}get responseTime(){return this.activeInstantResultCache?.duration??We().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??We().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var yf=()=>ke("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new Ri(e)),hf=()=>({actionCause:"searchboxAsYouType"});d();c();l();u();var pc={id:W},pw={...pc,q:xe},C1=O("instantResults/register",e=>N(e,pc)),Ei=O("instantResults/updateQuery",e=>N(e,pw)),x1=O("instantResults/clearExpired",e=>N(e,pc));d();c();l();u();var Ii=new J({required:!0,min:0}),Fi=O("pagination/registerNumberOfResults",e=>N(e,Ii)),Pi=O("pagination/updateNumberOfResults",e=>N(e,Ii)),ki=O("pagination/registerPage",e=>N(e,Ii)),$r=O("pagination/updatePage",e=>N(e,Ii)),Oi=O("pagination/nextPage"),Ti=O("pagination/previousPage");d();c();l();u();var Hr=O("query/updateQuery",e=>N(e,{q:new $,enableQuerySyntax:new ee}));d();c();l();u();d();c();l();u();d();c();l();u();var Et=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var fc=()=>ke("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),It=e=>ke("search/queryError",(t,r)=>t.makeQueryError({query:r.query?.q||_e().q,aq:r.advancedSearchQueries?.aq||Et().aq,cq:r.advancedSearchQueries?.cq||Et().cq,dq:r.advancedSearchQueries?.dq||Et().dq,errorType:e.type,errorMessage:e.message}));d();c();l();u();d();c();l();u();var cB=O("didYouMean/enable"),uB=O("didYouMean/disable"),lB=O("didYouMean/automaticCorrections/disable"),dB=O("didYouMean/automaticCorrections/enable"),Di=O("didYouMean/correction",e=>N(e,W)),pB=O("didYouMean/automaticCorrections/mode",e=>N(e,new $({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0})));d();c();l();u();var mc=()=>ke("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic());var Sf=()=>({actionCause:"didYouMeanAutomatic"});d();c();l();u();d();c();l();u();function qi(){return{contextValues:{}}}d();c();l();u();function ji(){return{contextValues:{}}}d();c();l();u();function vf(){return{freezeFacetOrder:!1,facets:{}}}d();c();l();u();function Af(){return[]}d();c();l();u();function $n(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}d();c();l();u();function wf(){return{}}d();c();l();u();function bf(){return{}}d();c();l();u();function Cf(){return{}}function et(e){return{context:e.context||qi(),dictionaryFieldContext:e.dictionaryFieldContext||ji(),facetSet:e.facetSet||Zo(),numericFacetSet:e.numericFacetSet||Xo(),dateFacetSet:e.dateFacetSet||Jo(),categoryFacetSet:e.categoryFacetSet||Yo(),automaticFacetSet:e.automaticFacetSet??Ko(),pagination:e.pagination||$n(),query:e.query||_e(),tabSet:e.tabSet||Cf(),advancedSearchQueries:e.advancedSearchQueries||Et(),staticFilterSet:e.staticFilterSet||bf(),querySet:e.querySet||wf(),sortCriteria:e.sortCriteria||ei(),pipeline:e.pipeline||Sr(),searchHub:e.searchHub||Fr(),facetOptions:e.facetOptions||vf(),facetOrder:e.facetOrder??Af(),debug:e.debug??ko()}}d();c();l();u();var _$=new K({values:{undoneQuery:xe},options:{required:!0}}),xf=()=>ke("analytics/trigger/query",(e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null);d();c();l();u();var Mi=O("trigger/query/ignore",e=>N(e,new $({emptyAllowed:!0,required:!0}))),Ni=O("trigger/query/modification",e=>N(e,new K({values:{originalQuery:Ce,modification:Ce}})));d();c();l();u();var Ft=async(e,t)=>{let r=gw(e),n=wi(e),o=fw(e),i=await xt(e,t),a=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return bt({...i,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:a(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:o}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function fw(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(mw).filter(r=>r.currentValues.length>0):void 0}function mw(e){let{field:t,label:r,values:n}=e,o=n.filter(i=>i.state==="selected");return{field:t,label:r,currentValues:o}}function gw(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(i=>i.isActive)?.expression.trim()||"",o=yw(e);return[t,n,...o].filter(i=>!!i).join(" AND ")}function yw(e){return Object.values(e.staticFilterSet||{}).map(r=>{let n=r.values.filter(i=>i.state==="selected"&&!!i.expression.trim()),o=n.map(i=>i.expression).join(" OR ");return n.length>1?`(${o})`:o})}var Pt=class{constructor(t,r=n=>{this.dispatch(Hr({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let o=Date.now(),i=Ai(await this.extra.apiClient.search(r,n),t),a=Date.now()-o,m=this.getState().query?.q||"";return{response:i,duration:a,queryExecuted:m,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return De(t.response)?(this.dispatch(It(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:i}=r.didYouMean,{results:a,queryCorrections:m,queryCorrection:f}=n;if(!o||!i)return null;let p=a.length===0&&m&&m.length!==0,g=!X(f)&&!X(f.correctedQuery);if(!p&&!g)return null;let S=p?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(Xe(et(this.getState()))),S}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],i=await this.automaticallyRetryQueryWithCorrection(o);return De(i.response)?(this.dispatch(It(i.response.error)),this.rejectWithValue(i.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(t),this.dispatch(Xe(et(this.getState()))),{...i,response:{...i.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r,analyticsAction:mc()})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o,analyticsAction:mc()}}logOriginalAnalyticsQueryBeforeAutoCorrection(t){let r=this.getState(),n=this.getSuccessResponse(t);this.analyticsAction?.()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,n),this.extra)}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(m=>m.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(Mi("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let i=this.getCurrentQuery(),a=await this.automaticallyRetryQueryWithTriggerModification(n);return De(a.response)?(this.dispatch(It(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(Xe(et(this.getState()))),{...a,response:{...a.response.success},automaticallyCorrected:!1,originalQuery:i,analyticsAction:xf()})}getStateAfterResponse(t,r,n,o){return{...n,query:{q:t,enableQuerySyntax:n.query?.enableQuerySyntax??_e().enableQuerySyntax},search:{...We(),duration:r,response:o,results:o.results}}}processSuccessResponse(t){return this.dispatch(Xe(et(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return so(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await Ft(this.getState()),{origin:"mainSearch"});return this.dispatch(Di(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(Ni({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Ft(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var NH=ce("search/executeSearch",async(e,t)=>{let r=t.getState();return await _i(r,t,e)}),_H=ce("search/fetchPage",async(e,t)=>{let r=t.getState();return await yc(r,t,e)}),VH=ce("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await hc(t,r)}),UH=ce("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await Aw(t,e,r)}),LH=ce("search/fetchInstantResults",async(e,t)=>gc(e,t)),hw=async(e,t)=>{let r=await Ft(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},Sw=async(e,t,r)=>{let n=await xt(e);return bt({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},vw=async(e,t)=>{let r=await Ft(e,t);return r.request.numberOfResults=0,r},Rf=e=>{e.configuration.analytics.enabled&&Le.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})};async function gc(e,t){N(e,{id:W,q:W,maxResultsPerQuery:new J({required:!0,min:1}),cacheTimeout:new J});let{q:r,maxResultsPerQuery:n}=e,o=t.getState(),i=new Pt({...t,analyticsAction:yf()},p=>{t.dispatch(Ei({q:p,id:e.id}))}),a=await Sw(o,r,n),m=await i.fetchFromAPI(a,{origin:"instantResults",disableAbortWarning:!0}),f=await i.process(m);return"response"in f?{results:f.response.results,searchUid:f.response.searchUid,analyticsAction:f.analyticsAction,totalCountFiltered:f.response.totalCountFiltered,duration:f.duration}:f}async function yc(e,t,r){Rf(e);let{analyticsClientMiddleware:n,preprocessRequest:o,logger:i}=t.extra,{description:a}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:i}),m=new Pt({...t,analyticsAction:r}),f=await Ft(e,a),p=await m.fetchFromAPI(f,{origin:"mainSearch"});return await m.process(p)}async function hc(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:o}=e.extra,{description:i}=await fc().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:o}),a=new Pt({...e,analyticsAction:fc()}),m=await hw(t,i),f=await a.fetchFromAPI(m,{origin:"mainSearch"});return await a.process(f)}async function Aw(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:o,logger:i}=e.extra,{description:a}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:i}),m=new Pt({...e,analyticsAction:t}),f=await vw(r,a),p=await m.fetchFromAPI(f,{origin:"facetValues"});return await m.process(p)}async function _i(e,t,r){Rf(e);let{analyticsClientMiddleware:n,preprocessRequest:o,logger:i}=t.extra,{description:a}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:i}),m=await Ft(e,a),f=new Pt({...t,analyticsAction:r}),p=await f.fetchFromAPI(m,{origin:"mainSearch"});return await f.process(p)}d();c();l();u();var kt=class{constructor(t,r=n=>{this.dispatch(Hr({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let o=Date.now(),i=Ai(await this.extra.apiClient.search(r,n),t),a=Date.now()-o,m=this.getState().query?.q||"";return{response:i,duration:a,queryExecuted:m,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return De(t.response)?(this.dispatch(It(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:i}=r.didYouMean,{results:a,queryCorrections:m,queryCorrection:f}=n;if(!o||!i)return null;let p=a.length===0&&m&&m.length!==0,g=!X(f)&&!X(f.correctedQuery);if(!p&&!g)return null;let S=p?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(Xe(et(this.getState()))),S}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],i=await this.automaticallyRetryQueryWithCorrection(o);return De(i.response)?(this.dispatch(It(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Xe(et(this.getState()))),{...i,response:{...i.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(m=>m.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(Mi("")),null;let i=this.getCurrentQuery(),a=await this.automaticallyRetryQueryWithTriggerModification(n);return De(a.response)?(this.dispatch(It(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(Xe(et(this.getState()))),{...a,response:{...a.response.success},automaticallyCorrected:!1,originalQuery:i})}processSuccessResponse(t){return this.dispatch(Xe(et(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(t){return so(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=this.getState(),{actionCause:n}=Sf(),o=await this.fetchFromAPI(await Rt(r,this.extra.navigatorContext,{actionCause:n}),{origin:"mainSearch"});return this.dispatch(Di(t)),o}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(Ni({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Rt(this.getState(),this.extra.navigatorContext),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};var EG=ce("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;N(e,{q:new $,enableQuerySyntax:new ee,clearFilters:new ee}),e.clearFilters&&(r(xi()),r(mf())),r(gf({allow:!0})),r(Hr({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r($r(1))}),IG=O("search/updateSearchAction"),Vi=ce("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return _i(r,t,e.legacy);If(r);let n=e.next?Ff(e.next):void 0,o=await Rt(r,t.extra.navigatorContext,n),i=new kt({...t,analyticsAction:n??{}}),a=await i.fetchFromAPI(o,{origin:"mainSearch"});return await i.process(a)}),Ef=ce("search/fetchPage",async(e,t)=>{let r=t.getState();if(If(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return yc(r,t,e.legacy);let n=new kt({...t,analyticsAction:e.next}),o=await Rt(r,t.extra.navigatorContext,e.next),i=await n.fetchFromAPI(o,{origin:"mainSearch"});return await n.process(i)}),FG=ce("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return hc(t,r);let n=hd("browseResults",t.getState),o=new kt({...t,analyticsAction:n}),i=await ww(r,t.extra.navigatorContext,n),a=await o.fetchFromAPI(i,{origin:"mainSearch"});return await o.process(a)}),PG=ce("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return _i(r,t,e.legacy);let n=new kt({...t,analyticsAction:{}}),o=await Cw(r,t.extra.navigatorContext),i=await n.fetchFromAPI(o,{origin:"facetValues"});return await n.process(i)}),kG=ce("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return gc(e,t);N(e,{id:W,q:W,maxResultsPerQuery:new J({required:!0,min:1}),cacheTimeout:new J});let{q:n,maxResultsPerQuery:o}=e,i=Ff(hf()),a=await bw(r,t.extra.navigatorContext,n,o,i),m=new kt({...t,analyticsAction:i},g=>{t.dispatch(Ei({q:g,id:e.id}))}),f=await m.fetchFromAPI(a,{origin:"instantResults",disableAbortWarning:!0}),p=await m.process(f);return"response"in p?{results:p.response.results,searchUid:p.response.searchUid,totalCountFiltered:p.response.totalCountFiltered,duration:p.duration}:p}),ww=async(e,t,r)=>{let n=await Rt(e,t,r);return n.request={...n.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},n},bw=async(e,t,r,n,o)=>{let i=Lr(e,t,o);return bt({...i,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:n,q:r})},Cw=async(e,t,r)=>{let n=await Rt(e,t,r);return n.request.numberOfResults=0,n},If=e=>{e.configuration.analytics.enabled&&Le.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},Ff=e=>({actionCause:e.actionCause,type:e.actionCause});var Sc=ul();Sc.startListening({actionCreator:Vi.pending,effect:async(e,t)=>{let r=t.getState(),n=Gt(r)?.q,o=!n||n.trim()==="";ms(r)&&(t.dispatch(Bn()),t.dispatch(gp()),!o&&t.dispatch(tf()))}});d();c();l();u();var Pf=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let o=n.error;if(n.payload?.ignored||e.error({error:o,action:r},`Action dispatch error ${n.type}`),n.error.name!=="SchemaValidationError")return t(r)},kf=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));d();c();l();u();var vc=(e,t)=>{let{referrer:r,userAgent:n,location:o,clientId:i}=e.getMeta("");return{...t?t():{},referrer:r,userAgent:n,location:o,clientId:i}};d();c();l();u();function Of(e,t){let r={...e},n,o=i=>(a,m)=>{let f=i(a,m);return n?n(f,m):f};return{get combinedReducer(){let i=tu(Object.entries(t).filter(([a])=>!(a in r)).map(([a,m])=>[a,()=>m]));return o(or({...i,...r}))},containsAll(i){return Object.keys(i).every(m=>m in r)},add(i){Object.keys(i).filter(a=>!(a in r)).forEach(a=>{r[a]=i[a]})},addCrossReducer(i){n=i}}}d();c();l();u();d();c();l();u();function xw(e){if(!e||!Rw(e))return null;try{let r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=atob(r),o=decodeURIComponent(n.split("").map(i=>`%${`00${i.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));return JSON.parse(o)}catch{return null}}function Tf(e,t=60){if(!e)return!1;let r=xw(e);if(!r||typeof r.exp!="number")return!1;let n=Math.floor(Date.now()/1e3);return r.exp<=n+t}function Rw(e){return e?/^[A-Za-z0-9_-]{2,}(?:\.[A-Za-z0-9_-]{2,}){2}$/.test(e):!1}function qf(e,t){let r=0,n=null,o=eo(()=>{r=0},500),i=async(f,p=!1)=>{let g=!n;g&&t&&(n=(async()=>(p&&Iw(t),await t()))().finally(()=>{n=null}));let h=await n;return g&&h&&f.dispatch(yt({accessToken:h})),h},a=async f=>{let p=f.getState(),g=Fw(p);if(!(!g||!Tf(g))){e.debug("Access token is expired or about to expire, attempting renewal.");try{await i(f)?e.debug("Access token was renewed."):e.warn("Access token renewal returned an empty token. Please check the #renewAccessToken function.")}catch(h){e.warn(h,"Access token renewal failed. A retry will occur if necessary.")}}},m=async(f,p,g)=>{if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),Df(f,p.error),p;r++,o(),await i(f,!0),f.dispatch(g)};return f=>p=>async g=>{let h=typeof g=="function",S=typeof t=="function";if(!h)return p(g);S&&await a(f);let y=await p(g);return Ew(y)?S?await m(f,y,g):(e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),Df(f,y.error),y):y}}function Ew(e){return typeof e=="object"&&e!==null&&"error"in e&&e.error?.name===new nr().name}function Df(e,t){e.dispatch(To({status:401,statusCode:401,message:t.message,type:t.name}))}async function Iw(e){try{return await e()}catch{return""}}function Fw(e){return e.configuration.accessToken}d();c();l();u();function jf({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:o}){return Ku({reducer:e,preloadedState:t,devTools:{stateSanitizer:i=>i.history?{...i,history:"<<OMIT>>"}:i,name:o,shouldHotReload:!1},middleware:i=>i({thunk:{extraArgument:n}}).prepend(...r).concat(kf(n.logger))})}function Pw(e,t){let{analytics:r}=e,{analyticsClientMiddleware:n,...o}=r??{},i={...o,...r?.proxyBaseUrl&&{apiBaseUrl:r.proxyBaseUrl,nexApiBaseUrl:r.proxyBaseUrl}};return i.analyticsMode!=="next"&&eu()?(t.info("Analytics disabled since doNotTrack is active."),{...i,enabled:!1}):i}function Mf(e,t){let r={...e.reducers,configuration:Ge,version:nf},n=kw({...e,reducers:r},t,Ge),{accessToken:o,environment:i,organizationId:a}=e.configuration;n.dispatch(yt({accessToken:o,environment:i,organizationId:a}));let m=Pw(e.configuration,n.logger);return m&&n.dispatch(mr(m)),n}function kw(e,t,r){let{reducers:n,navigatorContextProvider:o}=e,i=Of({...n,configurationReducer:r},e.preloadedState??{});e.crossReducer&&i.addCrossReducer(e.crossReducer);let a=t.logger,m={...t,get relay(){return Pn(p.state,o)},get navigatorContext(){return vc(this.relay,o)}},f=Ow(e,m,i),p={addReducers(g){i.containsAll(g)||(i.add(g),f.replaceReducer(i.combinedReducer))},dispatch:f.dispatch,subscribe:f.subscribe,enableAnalytics(){f.dispatch(yr())},disableAnalytics(){f.dispatch(gr())},get state(){return f.getState()},get relay(){return Pn(this.state,o)},get navigatorContext(){return vc(this.relay,o)},logger:a,store:f};return p}function Ow(e,t,r){let{preloadedState:n,configuration:o}=e,i=o.name||"coveo-headless",a=Tw(e,t.logger);return jf({preloadedState:n,reducer:r.combinedReducer,middlewares:a,thunkExtraArguments:t,name:i})}function Tw(e,t){let{renewAccessToken:r}=e.configuration,n=qf(t,r);return[ff,n,Pf(t),af].concat(ac.middleware,Mr.middleware,Sc.middleware,e.middlewares||[])}d();c();l();u();var Hf=$e($f(),1);function Gf(e){return(0,Hf.pino)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}d();c();l();u();function zf(e,t){let r=Yw(e),n=Ue,o=Jw(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:o,logger:t}}function Yw(e){let{analytics:t}=e,r=(n,o)=>o;return t?.analyticsClientMiddleware||r}function Jw(e){return e.preprocessRequest||no}d();c();l();u();d();c();l();u();var Wf={organizationId:W,accessToken:W,name:new $({required:!1,emptyAllowed:!1}),analytics:new K({options:{required:!1},values:{enabled:new ee({required:!1}),originContext:new $({required:!1}),originLevel2:new $({required:!1}),originLevel3:new $({required:!1}),analyticsMode:new $({constrainTo:["legacy","next"],required:!1,default:"next"}),proxyBaseUrl:new $({required:!1,url:!0}),trackingId:new $({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/})}}),environment:new $({required:!1,default:"prod",constrainTo:["prod","hipaa","stg","dev"]})};function Kf(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457"}}var Yf=new Te({...Wf,pipeline:new $({required:!1,emptyAllowed:!0}),searchHub:Ce,locale:Ce,timezone:Ce});function Rc(){return{...Kf(),searchHub:"default"}}var Xw={debug:Oo,pipeline:vr,searchHub:Dr,recommendation:Or};function Jf(e){let t=Gf(e.loggerOptions);Zw(e.configuration,t);let r=eb(e.configuration,t),n={...zf(e.configuration,t),apiClient:r},o={...e,reducers:Xw},i=Mf(o,n),{pipeline:a,searchHub:m,timezone:f,locale:p,proxyBaseUrl:g}=e.configuration;return i.dispatch(Je({timezone:f,locale:p,proxyBaseUrl:g})),X(a)||i.dispatch(hr(a)),X(m)||i.dispatch(Tr(m)),{...i,get state(){return i.state}}}function Zw(e,t){try{Yf.validate(e)}catch(r){throw t.error(r,"Recommendation engine configuration error"),r}}function eb(e,t){return new ao({logger:t,preprocessRequest:e.preprocessRequest||no,postprocessSearchResponseMiddleware:e.preprocessSearchResponseMiddleware||Su,postprocessFacetSearchResponseMiddleware:vu,postprocessQuerySuggestResponseMiddleware:Au})}d();c();l();u();d();c();l();u();d();c();l();u();var tb=new oe({each:W,required:!0}),Xf=(e,t)=>(N(e,W),Xn(t)?N(t,W):N(t,tb),{payload:{contextKey:e,contextValue:t}}),Kt=O("context/set",e=>{for(let[t,r]of Object.entries(e))Xf(t,r);return{payload:e}}),Yt=O("context/add",e=>Xf(e.contextKey,e.contextValue)),Jt=O("context/remove",e=>N(e,W));d();c();l();u();var Qi=me(qi(),e=>{e.addCase(Kt,(t,r)=>{t.contextValues=r.payload}).addCase(Yt,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(Jt,(t,r)=>{delete t.contextValues[r.payload]}).addCase(Me.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.context.contextValues)})});d();c();l();u();function Tt(e){let t,r=new Map,n=()=>r.size===0,o=i=>{try{let a=JSON.stringify(i),m=t!==a;return t=a,m}catch(a){return console.warn('Could not detect if state has changed, check the controller "get state method"',a),!0}};return{subscribe(i){i();let a=Symbol(),m;return n()&&(t=JSON.stringify(this.state),m=e.subscribe(()=>{o(this.state)&&r.forEach(f=>f())})),r.set(a,i),()=>{r.delete(a),n()&&m?.()}},get state(){return{}}}}d();c();l();u();var rb=["caseId","caseNumber"],nb={caseId:"caseContext",caseNumber:"caseContext"},Gn=class extends Error{constructor(t){super(`The key "${t}" is reserved for internal use. Use ${nb[t]} to set this value.}`)}};function Ec(e){return rb.includes(e)}var ob=new Te({values:new K({options:{required:!1}})});function Zf(e,t={}){if(!sb(e))throw ze;let r=Tt(e),{dispatch:n}=e,o=()=>e.state,i=pl(e,ob,t.initialState,"buildContext");return i.values&&n(Kt(i.values)),{...r,get state(){return{values:o().context.contextValues}},set(a){n(Kt(a))},...o().configuration.analytics.analyticsMode==="legacy"?ib(n):ab(n)}}var ib=e=>({add(t,r){e(Yt({contextKey:t,contextValue:r}))},remove(t){e(Jt(t))}}),ab=e=>({add(t,r){if(Ec(t))throw new Gn(t);e(Yt({contextKey:t,contextValue:r}))},remove(t){if(Ec(t))throw new Gn(t);e(Jt(t))}});function sb(e){return e.addReducers({context:Qi}),!0}function em(e,t){return Zf(e,t)}d();c();l();u();d();c();l();u();var zr=O("dictionaryFieldContext/set",e=>{let t=new K({options:{required:!0}}),r=N(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),o=new oe({each:xe}),i=N(n,o).error;return i?{payload:e,error:i}:{payload:e}}),Wr=O("dictionaryFieldContext/add",e=>{let t=new K({options:{required:!0},values:{field:xe,key:xe}});return N(e,t)}),Kr=O("dictionaryFieldContext/remove",e=>N(e,xe));d();c();l();u();var Bi=me(ji(),e=>{e.addCase(zr,(t,r)=>{t.contextValues=r.payload}).addCase(Wr,(t,r)=>{let{field:n,key:o}=r.payload;t.contextValues[n]=o}).addCase(Kr,(t,r)=>{delete t.contextValues[r.payload]}).addCase(Me.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})});function tm(e){if(!cb(e))throw ze;let t=Tt(e),{dispatch:r}=e,n=()=>e.state;return{...t,get state(){return{values:n().dictionaryFieldContext.contextValues}},set(o){r(zr(o))},add(o,i){r(Wr({field:o,key:i}))},remove(o){r(Kr(o))}}}function cb(e){return e.addReducers({dictionaryFieldContext:Bi}),!0}d();c();l();u();d();c();l();u();d();c();l();u();d();c();l();u();d();c();l();u();var zn={value:W,numberOfResults:new J({min:0}),state:W};d();c();l();u();var de=W;var pb=new J({min:1,default:8,required:!1}),fb=new J({min:1,max:20,default:5,required:!1}),mb={desiredCount:fb,numberOfValues:pb},NK=O("automaticFacet/setOptions",e=>N(e,mb)),_K=O("automaticFacet/deselectAll",e=>N(e,de)),gb=W,rm=O("automaticFacet/toggleSelectValue",e=>N(e,{field:gb,selection:new K({values:zn})}));d();c();l();u();d();c();l();u();var yb={state:new pe({required:!0}),numberOfResults:new J({required:!0,min:0}),value:new $({required:!0,emptyAllowed:!0}),path:new oe({required:!0,each:W}),moreValuesAvailable:new ee({required:!1})};function Ic(e){e.children.forEach(t=>{Ic(t)}),Ue({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},yb)}var Yr={facetId:de,field:W,tabs:new K({options:{required:!1},values:{included:new oe({each:new $}),excluded:new oe({each:new $})}}),activeTab:new $({required:!1}),delimitingCharacter:new $({required:!1,emptyAllowed:!0}),filterFacetCount:new ee({required:!1}),injectionDepth:new J({required:!1,min:0}),numberOfValues:new J({required:!1,min:1}),sortCriteria:new pe({required:!1}),basePath:new oe({required:!1,each:W}),filterByBasePath:new ee({required:!1})};var r3=O("categoryFacet/register",e=>N(e,Yr)),nm=O("categoryFacet/toggleSelectValue",e=>{try{return Ue(e.facetId,W),Ic(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:it(t)}}}),om=O("categoryFacet/deselectAll",e=>N(e,Yr.facetId)),n3=O("categoryFacet/updateNumberOfValues",e=>N(e,{facetId:Yr.facetId,numberOfValues:Yr.numberOfValues})),o3=O("categoryFacet/updateSortCriterion",e=>N(e,{facetId:Yr.facetId,criterion:new pe})),i3=O("categoryFacet/updateBasePath",e=>N(e,{facetId:Yr.facetId,basePath:new oe({each:W})}));d();c();l();u();d();c();l();u();var Wn={facetId:de,captions:new K({options:{required:!1}}),numberOfValues:new J({required:!1,min:1}),query:new $({required:!1,emptyAllowed:!0})};var hb={path:new oe({required:!0,each:W}),displayValue:xe,rawValue:xe,count:new J({required:!0,min:0})},im=O("categoryFacet/selectSearchResult",e=>N(e,{facetId:de,value:new K({values:hb})})),C3=O("categoryFacetSearch/register",e=>N(e,Wn));d();c();l();u();var am={facetId:de,value:new K({values:{displayValue:xe,rawValue:xe,count:new J({required:!0,min:0})}})},q3=O("facetSearch/register",e=>N(e,Wn)),j3=O("facetSearch/update",e=>N(e,Wn)),sm=O("facetSearch/toggleSelectValue",e=>N(e,am)),cm=O("facetSearch/toggleExcludeValue",e=>N(e,am));d();c();l();u();d();c();l();u();var Q3=new $({regex:/^[a-zA-Z0-9-_]+$/}),B3=new $({required:!0}),$3=new oe({each:new $}),H3=new $,G3=new ee,z3=new ee,W3=new J({min:0}),Sb=new J({min:1}),K3=new ee({required:!0}),vb=new K,Ab=new $,wb={captions:vb,numberOfValues:Sb,query:Ab},Y3=new K({values:wb}),um=new K({options:{required:!1},values:{type:new $({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new oe({required:!0,max:25,each:new $({emptyAllowed:!1,required:!0})})}}),J3=new ee,lm=new oe({min:1,max:25,required:!1,each:new $({emptyAllowed:!1,required:!0})});var bb={facetId:de,field:new $({required:!0,emptyAllowed:!0}),tabs:new K({options:{required:!1},values:{included:new oe({each:new $}),excluded:new oe({each:new $})}}),activeTab:new $({required:!1}),filterFacetCount:new ee({required:!1}),injectionDepth:new J({required:!1,min:0}),numberOfValues:new J({required:!1,min:1}),sortCriteria:new pe({required:!1}),resultsMustMatch:new pe({required:!1}),allowedValues:um,customSort:lm},uY=O("facet/register",e=>N(e,bb)),dm=O("facet/toggleSelectValue",e=>N(e,{facetId:de,selection:new K({values:zn})})),pm=O("facet/toggleExcludeValue",e=>N(e,{facetId:de,selection:new K({values:zn})})),$i=O("facet/deselectAll",e=>N(e,de)),lY=O("facet/updateSortCriterion",e=>N(e,{facetId:de,criterion:new pe({required:!0})})),dY=O("facet/updateNumberOfValues",e=>N(e,{facetId:de,numberOfValues:new J({required:!0,min:1})})),pY=O("facet/updateIsFieldExpanded",e=>N(e,{facetId:de,isFieldExpanded:new ee({required:!0})})),fY=O("facet/updateFreezeCurrentValues",e=>N(e,{facetId:de,freezeCurrentValues:new ee({required:!0})}));d();c();l();u();d();c();l();u();function mm(e){let t=fm(e.start,e),r=fm(e.end,e),n=e.endInclusive??!1,o=e.state??"idle";return{start:t,end:r,endInclusive:n,state:o}}function fm(e,t){let{dateFormat:r}=t;return Dp(e)?(Ys(e),kp(e)):typeof e=="string"&&wt(e)?(Ys(e),e):(Ep(e,r),vi(Ur(e,r)))}d();c();l();u();var gm=O("rangeFacet/updateSortCriterion",e=>N(e,{facetId:de,criterion:new pe({required:!0})}));d();c();l();u();var Hi={state:W,start:new J({required:!0}),end:new J({required:!0}),endInclusive:new ee({required:!0}),numberOfResults:new J({required:!0,min:0})},Gi={start:W,end:W,endInclusive:new ee({required:!0}),state:W,numberOfResults:new J({required:!0,min:0})};var Cb={start:W,end:W,endInclusive:new ee({required:!0}),state:W},xb={facetId:de,field:W,tabs:new K({options:{required:!1},values:{included:new oe({each:new $}),excluded:new oe({each:new $})}}),activeTab:new $({required:!1}),currentValues:new oe({required:!1,each:new K({values:Cb})}),generateAutomaticRanges:new ee({required:!0}),filterFacetCount:new ee({required:!1}),injectionDepth:new J({required:!1,min:0}),numberOfValues:new J({required:!1,min:1}),sortCriteria:new pe({required:!1}),rangeAlgorithm:new pe({required:!1})};function ym(e){return wt(e)?Ln(e):e}function hm(e){e.currentValues&&e.currentValues.forEach(t=>{let{start:r,end:n}=mm(t);if(Ur(ym(r)).isAfter(Ur(ym(n))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var ZY=O("dateFacet/register",e=>{try{return Ue(e,xb),hm(e),{payload:e,error:null}}catch(t){return{payload:e,error:it(t)}}}),Sm=O("dateFacet/toggleSelectValue",e=>N(e,{facetId:de,selection:new K({values:Gi})})),vm=O("dateFacet/toggleExcludeValue",e=>N(e,{facetId:de,selection:new K({values:Gi})})),Am=O("dateFacet/updateFacetValues",e=>{try{return Ue(e,{facetId:de,values:new oe({each:new K({values:Gi})})}),hm({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:it(t)}}});d();c();l();u();var Rb={state:W,start:new J({required:!0}),end:new J({required:!0}),endInclusive:new ee({required:!0})},Eb={facetId:de,field:W,tabs:new K({options:{required:!1},values:{included:new oe({each:new $}),excluded:new oe({each:new $})}}),activeTab:new $({required:!1}),currentValues:new oe({required:!1,each:new K({values:Rb})}),generateAutomaticRanges:new ee({required:!0}),filterFacetCount:new ee({required:!1}),injectionDepth:new J({required:!1,min:0}),numberOfValues:new J({required:!1,min:1}),sortCriteria:new pe({required:!1}),rangeAlgorithm:new pe({required:!1})};function wm(e){e.currentValues&&e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var p4=O("numericFacet/register",e=>{try{return N(e,Eb),wm(e),{payload:e,error:null}}catch(t){return{payload:e,error:it(t)}}}),bm=O("numericFacet/toggleSelectValue",e=>N(e,{facetId:de,selection:new K({values:Hi})})),Cm=O("numericFacet/toggleExcludeValue",e=>N(e,{facetId:de,selection:new K({values:Hi})})),xm=O("numericFacet/updateFacetValues",e=>{try{return Ue(e,{facetId:de,values:new oe({each:new K({values:Hi})})}),wm({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:it(t)}}});var Rm=me($n(),e=>{e.addCase(Fi,(t,r)=>{let n=Fc(t),o=r.payload;t.defaultNumberOfResults=t.numberOfResults=o,t.firstResult=Kn(n,o)}).addCase(Pi,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(bi,t=>{t.firstResult=0}).addCase(ki,(t,r)=>{let n=r.payload;t.firstResult=Kn(n,t.numberOfResults)}).addCase($r,(t,r)=>{let n=r.payload;t.firstResult=Kn(n,t.numberOfResults)}).addCase(Ti,t=>{let r=Fc(t),n=Math.max(r-1,1);t.firstResult=Kn(n,t.numberOfResults)}).addCase(Oi,t=>{let r=Fc(t),n=Fb(t),o=Math.min(r+1,n);t.firstResult=Kn(o,t.numberOfResults)}).addCase(Me.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(ht,(t,r)=>{t.firstResult=r.payload.firstResult??t.firstResult,t.numberOfResults=r.payload.numberOfResults??t.defaultNumberOfResults}).addCase(Vi.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase(Ef.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase($i,t=>{Fe(t)}).addCase(vm,t=>{Fe(t)}).addCase(pm,t=>{Fe(t)}).addCase(Cm,t=>{Fe(t)}).addCase(cm,t=>{Fe(t)}).addCase(dm,t=>{Fe(t)}).addCase(om,t=>{Fe(t)}).addCase(nm,t=>{Fe(t)}).addCase(im,t=>{Fe(t)}).addCase(Sm,t=>{Fe(t)}).addCase(bm,t=>{Fe(t)}).addCase(xi,t=>{Fe(t)}).addCase(Am,t=>{Fe(t)}).addCase(xm,t=>{Fe(t)}).addCase(sm,t=>{Fe(t)}).addCase(rm,t=>{Fe(t)})});function Fe(e){e.firstResult=$n().firstResult}function Fc(e){let{firstResult:t,numberOfResults:r}=e;return Pb(t,r)}function Fb(e){let{totalCountFiltered:t,numberOfResults:r}=e;return kb(t,r)}function Kn(e,t){return(e-1)*t}function Pb(e,t){return Math.round(e/t)+1}function kb(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}function Pc(e){return e.addReducers({pagination:Rm}),{nextPage:Oi,previousPage:Ti,registerNumberOfResults:Fi,registerPage:ki,updateNumberOfResults:Pi,updatePage:$r}}var Ob=new Te({id:new $({emptyAllowed:!0,required:!1,default:""}),numberOfRecommendations:new J({min:0})});function Em(e,t={}){if(!Tb(e))throw ze;let r=Tt(e),{dispatch:n}=e,o=()=>e.state,i=fl(e,Ob,t.options,"buildRecommendationList");return i.id!==""&&n(kr({id:i.id})),i.numberOfRecommendations&&n(Pc(e).updateNumberOfResults(i.numberOfRecommendations)),{...r,refresh(){n(At())},get state(){let a=o();return{recommendations:a.recommendation.recommendations,error:a.recommendation.error,isLoading:a.recommendation.isLoading,searchResponseId:a.recommendation.searchUid}}}}function Tb(e){return e.addReducers({recommendation:Or,configuration:Ge}),!0}d();c();l();u();d();c();l();u();function Im(e,t,r){if(!Db(e))throw ze;let n=1e3,o={selectionDelay:n,debounceWait:n,...t.options},i;return{select:eo(r,o.debounceWait,{isImmediate:!0}),beginDelayedSelect(){i=setTimeout(r,o.selectionDelay)},cancelPendingSelect(){i&&clearTimeout(i)}}}function Db(e){return e.addReducers({configuration:Ge}),!0}function Fm(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(oi(t.options.result)))};return Im(e,t,()=>{n()})}d();c();l();u();d();c();l();u();d();c();l();u();var Dt=()=>new $({required:!1,emptyAllowed:!0}),zi=O("advancedSearchQueries/update",e=>N(e,{aq:Dt(),cq:Dt(),lq:Dt(),dq:Dt()})),Wi=O("advancedSearchQueries/register",e=>N(e,{aq:Dt(),cq:Dt(),lq:Dt(),dq:Dt()}));var Pm=me(Et(),e=>{e.addCase(zi,(t,r)=>{let{aq:n,cq:o,lq:i,dq:a}=r.payload;Ae(n)||(t.aq=n,t.aqWasSet=!0),Ae(o)||(t.cq=o,t.cqWasSet=!0),Ae(i)||(t.lq=i,t.lqWasSet=!0),Ae(a)||(t.dq=a,t.dqWasSet=!0)}).addCase(Wi,(t,r)=>{let{aq:n,cq:o,lq:i,dq:a}=r.payload;Ae(n)||(t.defaultFilters.aq=n,t.aqWasSet||(t.aq=n)),Ae(o)||(t.defaultFilters.cq=o,t.cqWasSet||(t.cq=o)),Ae(i)||(t.defaultFilters.lq=i,t.lqWasSet||(t.lq=i)),Ae(a)||(t.defaultFilters.dq=a,t.dqWasSet||(t.dq=a))}).addCase(Me.fulfilled,(t,r)=>r.payload?.advancedSearchQueries??t).addCase(ht,(t,r)=>{let{aq:n,cq:o}=r.payload;Ae(n)||(t.aq=n,t.aqWasSet=!0),Ae(o)||(t.cq=o,t.cqWasSet=!0)})});function qb(e){return e.addReducers({advancedSearchQueries:Pm}),{updateAdvancedSearchQueries:zi,registerAdvancedSearchQueries:Wi}}d();c();l();u();function jb(e){return e.addReducers({configuration:Ge}),{disableAnalytics:gr,enableAnalytics:yr,setOriginLevel2:Eo,setOriginLevel3:Io,updateAnalyticsConfiguration:mr,updateBasicConfiguration:yt}}d();c();l();u();function Mb(e){return e.addReducers({configuration:Ge,pipeline:vr,searchHub:Dr}),{updateSearchConfiguration:Je}}d();c();l();u();function Nb(e){return e.addReducers({context:Qi}),{addContext:Yt,removeContext:Jt,setContext:Kt}}d();c();l();u();function _b(e){return e.addReducers({debug:Oo}),{disableDebug:Po,enableDebug:Fo}}d();c();l();u();function Vb(e){return e.addReducers({dictionaryFieldContext:Bi}),{addContext:Wr,removeContext:Kr,setContext:zr}}d();c();l();u();d();c();l();u();d();c();l();u();var Ub={collectionField:new $({emptyAllowed:!1,required:!1}),parentField:new $({emptyAllowed:!1,required:!1}),childField:new $({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new J({min:0,required:!1})},km=O("folding/register",e=>N(e,Ub)),j8=ce("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let i=t(),a=i.configuration.analytics.analyticsMode==="legacy"?await xt(i):Lr(i,o),m=await n.search({...a,q:Lb(i),enableQuerySyntax:!0,cq:`@${i.folding.fields.collection}="${e}"`,filterField:i.folding.fields.collection,childField:i.folding.fields.parent,parentField:i.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return De(m)?r(m.error):{collectionId:e,results:m.success.results,searchUid:m.success.searchUid,rootResult:i.folding.collections[e].result}});function Lb(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}d();c();l();u();var Om=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});d();c();l();u();var Jr=O("fields/registerFieldsToInclude",e=>N(e,Ro)),Ki=O("fields/fetchall/enable"),Yi=O("fields/fetchall/disable"),Ji=ce("fields/fetchDescription",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let o=r(),{accessToken:i,environment:a,organizationId:m}=o.configuration,{apiBaseUrl:f}=o.configuration.search,p=await t.apiClient.fieldDescriptions({accessToken:i,organizationId:m,url:f??pt(m,a)});return De(p)?n(p.error):p.success.fields});d();c();l();u();var Xi=["author","language","urihash","objecttype","collection","source","permanentid"],kc=[...Xi,"date","filetype","parents"],Tm=[...kc,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Dm=()=>({fieldsToInclude:Xi,fetchAllFields:!1,fieldsDescription:[]});var Zi=me(Dm(),e=>e.addCase(Jr,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(Ki,t=>{t.fetchAllFields=!0}).addCase(Yi,t=>{t.fetchAllFields=!1}).addCase(Ji.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(km,(t,{payload:r})=>{let n=Om().fields;t.fieldsToInclude.push(r.collectionField??n.collection,r.parentField??n.parent,r.childField??n.child)}));function Qb(e){return e.addReducers({fields:Zi}),{registerFieldsToInclude:Jr,enableFetchAllFields:Ki,disableFetchAllFields:Yi,fetchFieldsDescription:Ji}}d();c();l();u();function Bb(e){return e.addReducers({pipeline:vr}),{setPipeline:hr}}d();c();l();u();function $b(e){return e.addReducers({recommendation:Or}),{getRecommendations:At,setRecommendationId:kr}}d();c();l();u();function Hb(e){return e.addReducers({}),{logRecommendationOpen:oi}}d();c();l();u();d();c();l();u();var Gb=new Te({content:new pe({required:!0}),conditions:new pe({required:!0}),priority:new J({required:!1,default:0,min:0}),fields:new oe({required:!1,each:W})});function qm(){let e=[],t=r=>{let n=Gb.validate(r);if(!r.conditions.every(i=>i instanceof Function))throw new on("Each template condition should be a function that takes a Result or Product as an argument and returns a boolean");return n};return{registerTemplates(...r){r.forEach(n=>{let o={...t(n),fields:n.fields||[]};e.push(o)}),e.sort((n,o)=>o.priority-n.priority)},selectTemplate(r){let n=e.find(o=>o.conditions.every(i=>i(r)));return n?n.content:null},selectLinkTemplate(r){let n=e.find(o=>o.conditions.every(i=>i(r)));return n?n.linkContent:null}}}function jm(e){if(!zb(e))throw ze;let{registerTemplates:t,selectTemplate:r,selectLinkTemplate:n}=qm();return{registerTemplates:(...o)=>{t(...o);let i=[];o.forEach(a=>{a.fields&&i.push(...a.fields)}),e.dispatch(Jr(i))},selectTemplate:r,selectLinkTemplate:n}}function zb(e){return e.addReducers({fields:Zi}),!0}d();c();l();u();function Wb(e){return e.addReducers({searchHub:Dr}),{setSearchHub:Tr}}
/**
 * @license
 *
 * Copyright 2026 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

if(__exports != exports)module.exports = exports;return module.exports}));
//# sourceMappingURL=headless.js.map
