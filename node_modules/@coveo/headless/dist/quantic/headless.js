/**
 * @license
 *
 * Copyright 2026 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(g,f){if(typeof exports=="object"&&typeof module<"u"){module.exports=f(require)}else if("function"==typeof define && define.amd){define("CoveoHeadless",["crypto"],function(_d_0){var d={"crypto": _d_0},r=function(m){if(m in d) return d[m];if(typeof require=="function") return require(m);throw new Error("Cannot find module '"+m+"'")};return f(r)})}else {var gN={"crypto":"crypto"},gReq=function(r){var mod = r in gN ? g[gN[r]] : g[r]; return mod };g["CoveoHeadless"]=f(gReq)}}(typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : this,function(require){var exports={};var __exports=exports;var module={exports};
"use strict";var mP=Object.create;var Vs=Object.defineProperty;var fP=Object.getOwnPropertyDescriptor;var gP=Object.getOwnPropertyNames;var yP=Object.getPrototypeOf,hP=Object.prototype.hasOwnProperty;var SP=(e,t,r)=>t in e?Vs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ns=(e,t)=>()=>(e&&(t=e(e=0)),t);var Ke=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),nh=(e,t)=>{for(var r in t)Vs(e,r,{get:t[r],enumerable:!0})},ah=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of gP(t))!hP.call(e,a)&&a!==r&&Vs(e,a,{get:()=>t[a],enumerable:!(n=fP(t,a))||n.enumerable});return e};var Ht=(e,t,r)=>(r=e!=null?mP(yP(e)):{},ah(t||!e||!e.__esModule?Vs(r,"default",{value:e,enumerable:!0}):r,e)),CP=e=>ah(Vs({},"__esModule",{value:!0}),e);var Ce=(e,t,r)=>SP(e,typeof t!="symbol"?t+"":t,r);var g,s=Ns(()=>{"use strict";g=typeof globalThis<"u"?globalThis:window});function nu(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nu=function(t){return typeof t}:nu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nu(e)}function FP(){"navigator"in this||(this.navigator={}),typeof this.navigator.sendBeacon!="function"&&(this.navigator.sendBeacon=RP.bind(this))}function RP(e,t){var r=this.event&&this.event.type,n=r==="unload"||r==="beforeunload",a="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");a.open("POST",e,!n),a.withCredentials=!0,a.setRequestHeader("Accept","*/*"),AP(t)?(a.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),a.responseType="text"):xP(t)&&t.type&&a.setRequestHeader("Content-Type",t.type);try{a.send(t)}catch{return!1}return!0}var AP,xP,c=Ns(()=>{"use strict";AP=function(t){return typeof t=="string"},xP=function(t){return t instanceof Blob};FP.call((typeof window>"u"?"undefined":nu(window))==="object"?window:{})});var Om=Ke(Ms=>{"use strict";l();s();u();c();Object.defineProperty(Ms,"__esModule",{value:!0});function oh(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bP(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vP(e,t,r){return t=eo(t),PP(e,uh()?Reflect.construct(t,r||[],eo(e).constructor):t.apply(e,r))}function Im(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ih(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TP(n.key),n)}}function km(e,t,r){return t&&ih(e.prototype,t),r&&ih(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sh(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=OP(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(m){throw m},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,d=!0,p=!1;return{s:function(){r=r.call(e)},n:function(){var m=r.next();return d=m.done,m},e:function(m){p=!0,o=m},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw o}}}}function Pm(){return Pm=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=EP(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},Pm.apply(null,arguments)}function eo(e){return eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eo(e)}function wP(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Em(e,t)}function uh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uh=function(){return!!e})()}function PP(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bP(e)}function Em(e,t){return Em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Em(e,t)}function EP(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=eo(e))!==null;);return e}function IP(e,t,r,n){var a=Pm(eo(1&n?e.prototype:e),t,r);return 2&n&&typeof a=="function"?function(o){return a.apply(r,o)}:a}function kP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TP(e){var t=kP(e,"string");return typeof t=="symbol"?t:t+""}function OP(e,t){if(e){if(typeof e=="string")return oh(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oh(e,t):void 0}}(function(e){return{NativeAbortSignal:e.AbortSignal,NativeAbortController:e.AbortController}})(typeof self<"u"?self:global);function qP(e){var t;try{t=new Event("abort")}catch{typeof document<"u"?document.createEvent?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):(t=document.createEventObject(),t.type="abort"):t={type:"abort",bubbles:!1,cancelable:!1}}return t.reason=e,t}function jP(e){if(e===void 0)if(typeof document>"u")e=new Error("This operation was aborted"),e.name="AbortError";else try{e=new DOMException("signal is aborted without reason"),Object.defineProperty(e,"name",{value:"AbortError"})}catch{e=new Error("This operation was aborted"),e.name="AbortError"}return e}var ch=function(){function e(){Im(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return km(e,[{key:"addEventListener",value:function(r,n,a){r in this.listeners||(this.listeners[r]=[]),this.listeners[r].push({callback:n,options:a})}},{key:"removeEventListener",value:function(r,n){if(r in this.listeners){for(var a=this.listeners[r],o=0,d=a.length;o<d;o++)if(a[o].callback===n){a.splice(o,1);return}}}},{key:"dispatchEvent",value:function(r){var n=this;if(r.type in this.listeners){for(var a=this.listeners[r.type],o=a.slice(),d=function(){var S=o[p];try{S.callback.call(n,r)}catch(C){Promise.resolve().then(function(){throw C})}S.options&&S.options.once&&n.removeEventListener(r.type,S.callback)},p=0,m=o.length;p<m;p++)d();return!r.defaultPrevented}}}])}(),Tm=function(e){function t(){var r;return Im(this,t),r=vP(this,t),r.listeners||ch.call(r),Object.defineProperty(r,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(r,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(r,"reason",{value:void 0,writable:!0,configurable:!0}),r}return wP(t,e),km(t,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(n){n.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,n)),IP(t,"dispatchEvent",this,3)([n])}},{key:"throwIfAborted",value:function(){var n=this.aborted,a=this.reason,o=a===void 0?"Aborted":a;if(n)throw o}}],[{key:"timeout",value:function(n){var a=new au;return setTimeout(function(){return a.abort(new DOMException("This signal is timeout in ".concat(n,"ms"),"TimeoutError"))},n),a.signal}},{key:"any",value:function(n){var a=new au;function o(){a.abort(this.reason),d()}function d(){var S=sh(n),C;try{for(S.s();!(C=S.n()).done;){var x=C.value;x.removeEventListener("abort",o)}}catch(A){S.e(A)}finally{S.f()}}var p=sh(n),m;try{for(p.s();!(m=p.n()).done;){var f=m.value;if(f.aborted){a.abort(f.reason);break}else f.addEventListener("abort",o)}}catch(S){p.e(S)}finally{p.f()}return a.signal}}])}(ch),au=function(){function e(){Im(this,e),Object.defineProperty(this,"signal",{value:new Tm,writable:!0,configurable:!0})}return km(e,[{key:"abort",value:function(r){var n=jP(r),a=qP(n);this.signal.reason=n,this.signal.dispatchEvent(a)}},{key:"toString",value:function(){return"[object AbortController]"}}])}();typeof Symbol<"u"&&Symbol.toStringTag&&(au.prototype[Symbol.toStringTag]="AbortController",Tm.prototype[Symbol.toStringTag]="AbortSignal");function DP(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof e.Request=="function"&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}function VP(e){typeof e=="function"&&(e={fetch:e});var t=e,r=t.fetch,n=t.Request,a=n===void 0?r.Request:n,o=t.AbortController,d=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,p=d===void 0?!1:d;if(!DP({fetch:r,Request:a,AbortController:o,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:p}))return{fetch:r,Request:m};var m=a;(m&&!m.prototype.hasOwnProperty("signal")||p)&&(m=function(x,A){var F;A&&A.signal&&(F=A.signal,delete A.signal);var v=new a(x,A);return F&&Object.defineProperty(v,"signal",{writable:!1,enumerable:!1,configurable:!0,value:F}),v},m.prototype=a.prototype);var f=r,S=function(x,A){var F=m&&m.prototype.isPrototypeOf(x)?x.signal:A?A.signal:void 0;if(F){var v;try{v=new DOMException("Aborted","AbortError")}catch{v=new Error("Aborted"),v.name="AbortError"}if(F.aborted)return Promise.reject(v);var b=new Promise(function(R,E){F.addEventListener("abort",function(){return E(v)},{once:!0})});return A&&A.signal&&delete A.signal,Promise.race([b,f(x,A)])}return f(x,A)};return{fetch:S,Request:m}}Ms.AbortController=au;Ms.AbortSignal=Tm;Ms.abortableFetch=VP});var lh,i,y,u=Ns(()=>{"use strict";lh=Ht(Om(),1),i=Ht(Om(),1),{fetch:y}=(0,lh.abortableFetch)({fetch})});function Ls(e){if(HP.test(e)||e.trim()==="")throw new TypeError("Invalid character in header field name");return e.trim().toLowerCase()}function qm(e){return e.replace(WP,"")}function Qs(e){if(typeof e!="string"||e.length===0)return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r>127||!zP(r))return!1}return!0}function zP(e){return![127,32,"(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"].includes(e)}function ph(e){if(typeof e!="string"||e.trim()!==e)return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r===0||r===10||r===13)return!1}return!0}var NP,hh,MP,Sh,LP,QP,UP,_P,BP,GP,$P,HP,dh,WP,to,jm,mh,fh,gh,yh,h,Ah=Ns(()=>{"use strict";l();s();u();c();NP=Object.create,hh=Object.defineProperty,MP=Object.getOwnPropertyDescriptor,Sh=Object.getOwnPropertyNames,LP=Object.getPrototypeOf,QP=Object.prototype.hasOwnProperty,UP=(e,t)=>function(){return t||(0,e[Sh(e)[0]])((t={exports:{}}).exports,t),t.exports},_P=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Sh(t))!QP.call(e,a)&&a!==r&&hh(e,a,{get:()=>t[a],enumerable:!(n=MP(t,a))||n.enumerable});return e},BP=(e,t,r)=>(r=e!=null?NP(LP(e)):{},_P(t||!e||!e.__esModule?hh(r,"default",{value:e,enumerable:!0}):r,e)),GP=UP({"node_modules/set-cookie-parser/lib/set-cookie.js"(e,t){"use strict";var r={decodeValues:!0,map:!1,silent:!1};function n(m){return typeof m=="string"&&!!m.trim()}function a(m,f){var S=m.split(";").filter(n),C=S.shift(),x=o(C),A=x.name,F=x.value;f=f?Object.assign({},r,f):r;try{F=f.decodeValues?decodeURIComponent(F):F}catch(b){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+F+"'. Set options.decodeValues to false to disable this feature.",b)}var v={name:A,value:F};return S.forEach(function(b){var R=b.split("="),E=R.shift().trimLeft().toLowerCase(),P=R.join("=");E==="expires"?v.expires=new Date(P):E==="max-age"?v.maxAge=parseInt(P,10):E==="secure"?v.secure=!0:E==="httponly"?v.httpOnly=!0:E==="samesite"?v.sameSite=P:v[E]=P}),v}function o(m){var f="",S="",C=m.split("=");return C.length>1?(f=C.shift(),S=C.join("=")):S=m,{name:f,value:S}}function d(m,f){if(f=f?Object.assign({},r,f):r,!m)return f.map?{}:[];if(m.headers)if(typeof m.headers.getSetCookie=="function")m=m.headers.getSetCookie();else if(m.headers["set-cookie"])m=m.headers["set-cookie"];else{var S=m.headers[Object.keys(m.headers).find(function(x){return x.toLowerCase()==="set-cookie"})];!S&&m.headers.cookie&&!f.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),m=S}if(Array.isArray(m)||(m=[m]),f=f?Object.assign({},r,f):r,f.map){var C={};return m.filter(n).reduce(function(x,A){var F=a(A,f);return x[F.name]=F,x},C)}else return m.filter(n).map(function(x){return a(x,f)})}function p(m){if(Array.isArray(m))return m;if(typeof m!="string")return[];var f=[],S=0,C,x,A,F,v;function b(){for(;S<m.length&&/\s/.test(m.charAt(S));)S+=1;return S<m.length}function R(){return x=m.charAt(S),x!=="="&&x!==";"&&x!==","}for(;S<m.length;){for(C=S,v=!1;b();)if(x=m.charAt(S),x===","){for(A=S,S+=1,b(),F=S;S<m.length&&R();)S+=1;S<m.length&&m.charAt(S)==="="?(v=!0,S=F,f.push(m.substring(C,A)),C=S):S=A+1}else S+=1;(!v||S>=m.length)&&f.push(m.substring(C,m.length))}return f}t.exports=d,t.exports.parse=d,t.exports.parseString=a,t.exports.splitCookiesString=p}}),$P=BP(GP()),HP=/[^a-z0-9\-#$%&'*+.^_`|~]/i;dh=[`
`,"\r","	"," "],WP=new RegExp(`(^[${dh.join("")}]|$[${dh.join("")}])`,"g");to=Symbol("normalizedHeaders"),jm=Symbol("rawHeaderNames"),mh=", ",h=class Ch{constructor(t){this[fh]={},this[gh]=new Map,this[yh]="Headers",["Headers","HeadersPolyfill"].includes(t?.constructor.name)||t instanceof Ch||typeof g.Headers<"u"&&t instanceof g.Headers?t.forEach((n,a)=>{this.append(a,n)},this):Array.isArray(t)?t.forEach(([r,n])=>{this.append(r,Array.isArray(n)?n.join(mh):n)}):t&&Object.getOwnPropertyNames(t).forEach(r=>{let n=t[r];this.append(r,Array.isArray(n)?n.join(mh):n)})}[(fh=to,gh=jm,yh=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}*keys(){for(let[t]of this.entries())yield t}*values(){for(let[,t]of this.entries())yield t}*entries(){let t=Object.keys(this[to]).sort((r,n)=>r.localeCompare(n));for(let r of t)if(r==="set-cookie")for(let n of this.getSetCookie())yield[r,n];else yield[r,this.get(r)]}has(t){if(!Qs(t))throw new TypeError(`Invalid header name "${t}"`);return this[to].hasOwnProperty(Ls(t))}get(t){if(!Qs(t))throw TypeError(`Invalid header name "${t}"`);return this[to][Ls(t)]??null}set(t,r){if(!Qs(t)||!ph(r))return;let n=Ls(t),a=qm(r);this[to][n]=qm(a),this[jm].set(n,t)}append(t,r){if(!Qs(t)||!ph(r))return;let n=Ls(t),a=qm(r),o=this.has(n)?`${this.get(n)}, ${a}`:a;this.set(t,o)}delete(t){if(!Qs(t)||!this.has(t))return;let r=Ls(t);delete this[to][r],this[jm].delete(r)}forEach(t,r){for(let[n,a]of this.entries())t.call(r,a,n,this)}getSetCookie(){let t=this.get("set-cookie");return t===null?[]:t===""?[""]:(0,$P.splitCookiesString)(t)}}});var l=Ns(()=>{"use strict";Ah()});var jh=Ke(Gs=>{"use strict";l();s();u();c();var du=Gs&&Gs.__assign||function(){return du=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},du.apply(this,arguments)};Object.defineProperty(Gs,"__esModule",{value:!0});var lE={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function dE(e){var t=du(du({},lE),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}Gs.getSanitizedOptions=dE});var Dh=Ke(_m=>{"use strict";l();s();u();c();Object.defineProperty(_m,"__esModule",{value:!0});function pE(e){var t=Math.random()*e;return Math.round(t)}_m.fullJitter=pE});var Vh=Ke(Bm=>{"use strict";l();s();u();c();Object.defineProperty(Bm,"__esModule",{value:!0});function mE(e){return e}Bm.noJitter=mE});var Nh=Ke(Gm=>{"use strict";l();s();u();c();Object.defineProperty(Gm,"__esModule",{value:!0});var fE=Dh(),gE=Vh();function yE(e){switch(e.jitter){case"full":return fE.fullJitter;case"none":default:return gE.noJitter}}Gm.JitterFactory=yE});var Hm=Ke($m=>{"use strict";l();s();u();c();Object.defineProperty($m,"__esModule",{value:!0});var hE=Nh(),SE=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=hE.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,n=this.numOfDelayedAttempts,a=t*Math.pow(r,n);return Math.min(a,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();$m.Delay=SE});var Mh=Ke(Dr=>{"use strict";l();s();u();c();var CE=Dr&&Dr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)a.hasOwnProperty(o)&&(n[o]=a[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AE=Dr&&Dr.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function p(S){try{f(n.next(S))}catch(C){d(C)}}function m(S){try{f(n.throw(S))}catch(C){d(C)}}function f(S){S.done?o(S.value):a(S.value).then(p,m)}f((n=n.apply(e,t||[])).next())})},xE=Dr&&Dr.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,d;return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(f){return function(S){return m([f,S])}}function m(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=f[0]&2?a.return:f[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,f[1])).done)return o;switch(a=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,a=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(S){f=[6,S],a=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(Dr,"__esModule",{value:!0});var FE=Hm(),RE=function(e){CE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return AE(this,void 0,void 0,function(){return xE(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(FE.Delay);Dr.SkipFirstDelay=RE});var Lh=Ke($s=>{"use strict";l();s();u();c();var bE=$s&&$s.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)a.hasOwnProperty(o)&&(n[o]=a[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty($s,"__esModule",{value:!0});var vE=Hm(),wE=function(e){bE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(vE.Delay);$s.AlwaysDelay=wE});var Qh=Ke(Wm=>{"use strict";l();s();u();c();Object.defineProperty(Wm,"__esModule",{value:!0});var PE=Mh(),EE=Lh();function IE(e,t){var r=kE(e);return r.setAttemptNumber(t),r}Wm.DelayFactory=IE;function kE(e){return e.delayFirstAttempt?new EE.AlwaysDelay(e):new PE.SkipFirstDelay(e)}});var Uh=Ke(oa=>{"use strict";l();s();u();c();var zm=oa&&oa.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function p(S){try{f(n.next(S))}catch(C){d(C)}}function m(S){try{f(n.throw(S))}catch(C){d(C)}}function f(S){S.done?o(S.value):a(S.value).then(p,m)}f((n=n.apply(e,t||[])).next())})},Ym=oa&&oa.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,d;return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(f){return function(S){return m([f,S])}}function m(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=f[0]&2?a.return:f[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,f[1])).done)return o;switch(a=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,a=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(S){f=[6,S],a=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(oa,"__esModule",{value:!0});var TE=jh(),OE=Qh();function qE(e,t){return t===void 0&&(t={}),zm(this,void 0,void 0,function(){var r,n;return Ym(this,function(a){switch(a.label){case 0:return r=TE.getSanitizedOptions(t),n=new jE(e,r),[4,n.execute()];case 1:return[2,a.sent()]}})})}oa.backOff=qE;var jE=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return zm(this,void 0,void 0,function(){var t,r;return Ym(this,function(n){switch(n.label){case 0:if(this.attemptLimitReached)return[3,7];n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return n.sent(),[4,this.request()];case 3:return[2,n.sent()];case 4:return t=n.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=n.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return zm(this,void 0,void 0,function(){var t;return Ym(this,function(r){switch(r.label){case 0:return t=OE.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var dl=Ke((cg,ug)=>{"use strict";l();s();u();c();(function(e,t){typeof cg=="object"&&typeof ug<"u"?ug.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof g<"u"?g:e||self).dayjs=t()})(cg,function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",a="second",o="minute",d="hour",p="day",m="week",f="month",S="quarter",C="year",x="date",A="Invalid Date",F=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(H){var B=["th","st","nd","rd"],_=H%100;return"["+H+(B[(_-20)%10]||B[_]||B[0])+"]"}},R=function(H,B,_){var z=String(H);return!z||z.length>=B?H:""+Array(B+1-z.length).join(_)+H},E={s:R,z:function(H){var B=-H.utcOffset(),_=Math.abs(B),z=Math.floor(_/60),$=_%60;return(B<=0?"+":"-")+R(z,2,"0")+":"+R($,2,"0")},m:function H(B,_){if(B.date()<_.date())return-H(_,B);var z=12*(_.year()-B.year())+(_.month()-B.month()),$=B.clone().add(z,f),X=_-$<0,Z=B.clone().add(z+(X?-1:1),f);return+(-(z+(_-$)/(X?$-Z:Z-$))||0)},a:function(H){return H<0?Math.ceil(H)||0:Math.floor(H)},p:function(H){return{M:f,y:C,w:m,d:p,D:x,h:d,m:o,s:a,ms:n,Q:S}[H]||String(H||"").toLowerCase().replace(/s$/,"")},u:function(H){return H===void 0}},P="en",k={};k[P]=b;var N="$isDayjsObject",q=function(H){return H instanceof U||!(!H||!H[N])},T=function H(B,_,z){var $;if(!B)return P;if(typeof B=="string"){var X=B.toLowerCase();k[X]&&($=X),_&&(k[X]=_,$=X);var Z=B.split("-");if(!$&&Z.length>1)return H(Z[0])}else{var se=B.name;k[se]=B,$=se}return!z&&$&&(P=$),$||!z&&P},O=function(H,B){if(q(H))return H.clone();var _=typeof B=="object"?B:{};return _.date=H,_.args=arguments,new U(_)},D=E;D.l=T,D.i=q,D.w=function(H,B){return O(H,{locale:B.$L,utc:B.$u,x:B.$x,$offset:B.$offset})};var U=function(){function H(_){this.$L=T(_.locale,null,!0),this.parse(_),this.$x=this.$x||_.x||{},this[N]=!0}var B=H.prototype;return B.parse=function(_){this.$d=function(z){var $=z.date,X=z.utc;if($===null)return new Date(NaN);if(D.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var Z=$.match(F);if(Z){var se=Z[2]-1||0,fe=(Z[7]||"0").substring(0,3);return X?new Date(Date.UTC(Z[1],se,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,fe)):new Date(Z[1],se,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,fe)}}return new Date($)}(_),this.init()},B.init=function(){var _=this.$d;this.$y=_.getFullYear(),this.$M=_.getMonth(),this.$D=_.getDate(),this.$W=_.getDay(),this.$H=_.getHours(),this.$m=_.getMinutes(),this.$s=_.getSeconds(),this.$ms=_.getMilliseconds()},B.$utils=function(){return D},B.isValid=function(){return this.$d.toString()!==A},B.isSame=function(_,z){var $=O(_);return this.startOf(z)<=$&&$<=this.endOf(z)},B.isAfter=function(_,z){return O(_)<this.startOf(z)},B.isBefore=function(_,z){return this.endOf(z)<O(_)},B.$g=function(_,z,$){return D.u(_)?this[z]:this.set($,_)},B.unix=function(){return Math.floor(this.valueOf()/1e3)},B.valueOf=function(){return this.$d.getTime()},B.startOf=function(_,z){var $=this,X=!!D.u(z)||z,Z=D.p(_),se=function(Fe,Oe){var De=D.w($.$u?Date.UTC($.$y,Oe,Fe):new Date($.$y,Oe,Fe),$);return X?De:De.endOf(p)},fe=function(Fe,Oe){return D.w($.toDate()[Fe].apply($.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(Oe)),$)},Se=this.$W,pe=this.$M,ge=this.$D,de="set"+(this.$u?"UTC":"");switch(Z){case C:return X?se(1,0):se(31,11);case f:return X?se(1,pe):se(0,pe+1);case m:var ye=this.$locale().weekStart||0,qe=(Se<ye?Se+7:Se)-ye;return se(X?ge-qe:ge+(6-qe),pe);case p:case x:return fe(de+"Hours",0);case d:return fe(de+"Minutes",1);case o:return fe(de+"Seconds",2);case a:return fe(de+"Milliseconds",3);default:return this.clone()}},B.endOf=function(_){return this.startOf(_,!1)},B.$set=function(_,z){var $,X=D.p(_),Z="set"+(this.$u?"UTC":""),se=($={},$[p]=Z+"Date",$[x]=Z+"Date",$[f]=Z+"Month",$[C]=Z+"FullYear",$[d]=Z+"Hours",$[o]=Z+"Minutes",$[a]=Z+"Seconds",$[n]=Z+"Milliseconds",$)[X],fe=X===p?this.$D+(z-this.$W):z;if(X===f||X===C){var Se=this.clone().set(x,1);Se.$d[se](fe),Se.init(),this.$d=Se.set(x,Math.min(this.$D,Se.daysInMonth())).$d}else se&&this.$d[se](fe);return this.init(),this},B.set=function(_,z){return this.clone().$set(_,z)},B.get=function(_){return this[D.p(_)]()},B.add=function(_,z){var $,X=this;_=Number(_);var Z=D.p(z),se=function(pe){var ge=O(X);return D.w(ge.date(ge.date()+Math.round(pe*_)),X)};if(Z===f)return this.set(f,this.$M+_);if(Z===C)return this.set(C,this.$y+_);if(Z===p)return se(1);if(Z===m)return se(7);var fe=($={},$[o]=t,$[d]=r,$[a]=e,$)[Z]||1,Se=this.$d.getTime()+_*fe;return D.w(Se,this)},B.subtract=function(_,z){return this.add(-1*_,z)},B.format=function(_){var z=this,$=this.$locale();if(!this.isValid())return $.invalidDate||A;var X=_||"YYYY-MM-DDTHH:mm:ssZ",Z=D.z(this),se=this.$H,fe=this.$m,Se=this.$M,pe=$.weekdays,ge=$.months,de=$.meridiem,ye=function(Oe,De,pt,Pt){return Oe&&(Oe[De]||Oe(z,X))||pt[De].slice(0,Pt)},qe=function(Oe){return D.s(se%12||12,Oe,"0")},Fe=de||function(Oe,De,pt){var Pt=Oe<12?"AM":"PM";return pt?Pt.toLowerCase():Pt};return X.replace(v,function(Oe,De){return De||function(pt){switch(pt){case"YY":return String(z.$y).slice(-2);case"YYYY":return D.s(z.$y,4,"0");case"M":return Se+1;case"MM":return D.s(Se+1,2,"0");case"MMM":return ye($.monthsShort,Se,ge,3);case"MMMM":return ye(ge,Se);case"D":return z.$D;case"DD":return D.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return ye($.weekdaysMin,z.$W,pe,2);case"ddd":return ye($.weekdaysShort,z.$W,pe,3);case"dddd":return pe[z.$W];case"H":return String(se);case"HH":return D.s(se,2,"0");case"h":return qe(1);case"hh":return qe(2);case"a":return Fe(se,fe,!0);case"A":return Fe(se,fe,!1);case"m":return String(fe);case"mm":return D.s(fe,2,"0");case"s":return String(z.$s);case"ss":return D.s(z.$s,2,"0");case"SSS":return D.s(z.$ms,3,"0");case"Z":return Z}return null}(Oe)||Z.replace(":","")})},B.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},B.diff=function(_,z,$){var X,Z=this,se=D.p(z),fe=O(_),Se=(fe.utcOffset()-this.utcOffset())*t,pe=this-fe,ge=function(){return D.m(Z,fe)};switch(se){case C:X=ge()/12;break;case f:X=ge();break;case S:X=ge()/3;break;case m:X=(pe-Se)/6048e5;break;case p:X=(pe-Se)/864e5;break;case d:X=pe/r;break;case o:X=pe/t;break;case a:X=pe/e;break;default:X=pe}return $?X:D.a(X)},B.daysInMonth=function(){return this.endOf(f).$D},B.$locale=function(){return k[this.$L]},B.locale=function(_,z){if(!_)return this.$L;var $=this.clone(),X=T(_,z,!0);return X&&($.$L=X),$},B.clone=function(){return D.w(this.$d,this)},B.toDate=function(){return new Date(this.valueOf())},B.toJSON=function(){return this.isValid()?this.toISOString():null},B.toISOString=function(){return this.$d.toISOString()},B.toString=function(){return this.$d.toUTCString()},H}(),K=U.prototype;return O.prototype=K,[["$ms",n],["$s",a],["$m",o],["$H",d],["$W",p],["$M",f],["$y",C],["$D",x]].forEach(function(H){K[H[1]]=function(B){return this.$g(B,H[0],H[1])}}),O.extend=function(H,B){return H.$i||(H(B,U,O),H.$i=!0),O},O.locale=T,O.isDayjs=q,O.unix=function(H){return O(1e3*H)},O.en=k[P],O.Ls=k,O.p={},O})});var fA=Ke((lg,dg)=>{"use strict";l();s();u();c();(function(e,t){typeof lg=="object"&&typeof dg<"u"?dg.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof g<"u"?g:e||self).dayjs_plugin_quarterOfYear=t()})(lg,function(){"use strict";var e="month",t="quarter";return function(r,n){var a=n.prototype;a.quarter=function(p){return this.$utils().u(p)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(p-1))};var o=a.add;a.add=function(p,m){return p=Number(p),this.$utils().p(m)===t?this.add(3*p,e):o.bind(this)(p,m)};var d=a.startOf;a.startOf=function(p,m){var f=this.$utils(),S=!!f.u(m)||m;if(f.p(p)===t){var C=this.quarter()-1;return S?this.month(3*C).startOf(e).startOf("day"):this.month(3*C+2).endOf(e).endOf("day")}return d.bind(this)(p,m)}}})});var gA=Ke((pg,mg)=>{"use strict";l();s();u();c();(function(e,t){typeof pg=="object"&&typeof mg<"u"?mg.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof g<"u"?g:e||self).dayjs_plugin_customParseFormat=t()})(pg,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,n=/\d\d/,a=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,d={},p=function(F){return(F=+F)+(F>68?1900:2e3)},m=function(F){return function(v){this[F]=+v}},f=[/[+-]\d\d:?(\d\d)?|Z/,function(F){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var b=v.match(/([+-]|\d\d)/g),R=60*b[1]+(+b[2]||0);return R===0?0:b[0]==="+"?-R:R}(F)}],S=function(F){var v=d[F];return v&&(v.indexOf?v:v.s.concat(v.f))},C=function(F,v){var b,R=d.meridiem;if(R){for(var E=1;E<=24;E+=1)if(F.indexOf(R(E,0,v))>-1){b=E>12;break}}else b=F===(v?"pm":"PM");return b},x={A:[o,function(F){this.afternoon=C(F,!1)}],a:[o,function(F){this.afternoon=C(F,!0)}],Q:[r,function(F){this.month=3*(F-1)+1}],S:[r,function(F){this.milliseconds=100*+F}],SS:[n,function(F){this.milliseconds=10*+F}],SSS:[/\d{3}/,function(F){this.milliseconds=+F}],s:[a,m("seconds")],ss:[a,m("seconds")],m:[a,m("minutes")],mm:[a,m("minutes")],H:[a,m("hours")],h:[a,m("hours")],HH:[a,m("hours")],hh:[a,m("hours")],D:[a,m("day")],DD:[n,m("day")],Do:[o,function(F){var v=d.ordinal,b=F.match(/\d+/);if(this.day=b[0],v)for(var R=1;R<=31;R+=1)v(R).replace(/\[|\]/g,"")===F&&(this.day=R)}],w:[a,m("week")],ww:[n,m("week")],M:[a,m("month")],MM:[n,m("month")],MMM:[o,function(F){var v=S("months"),b=(S("monthsShort")||v.map(function(R){return R.slice(0,3)})).indexOf(F)+1;if(b<1)throw new Error;this.month=b%12||b}],MMMM:[o,function(F){var v=S("months").indexOf(F)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,m("year")],YY:[n,function(F){this.year=p(F)}],YYYY:[/\d{4}/,m("year")],Z:f,ZZ:f};function A(F){var v,b;v=F,b=d&&d.formats;for(var R=(F=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(O,D,U){var K=U&&U.toUpperCase();return D||b[U]||e[U]||b[K].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(H,B,_){return B||_.slice(1)})})).match(t),E=R.length,P=0;P<E;P+=1){var k=R[P],N=x[k],q=N&&N[0],T=N&&N[1];R[P]=T?{regex:q,parser:T}:k.replace(/^\[|\]$/g,"")}return function(O){for(var D={},U=0,K=0;U<E;U+=1){var H=R[U];if(typeof H=="string")K+=H.length;else{var B=H.regex,_=H.parser,z=O.slice(K),$=B.exec(z)[0];_.call(D,$),O=O.replace($,"")}}return function(X){var Z=X.afternoon;if(Z!==void 0){var se=X.hours;Z?se<12&&(X.hours+=12):se===12&&(X.hours=0),delete X.afternoon}}(D),D}}return function(F,v,b){b.p.customParseFormat=!0,F&&F.parseTwoDigitYear&&(p=F.parseTwoDigitYear);var R=v.prototype,E=R.parse;R.parse=function(P){var k=P.date,N=P.utc,q=P.args;this.$u=N;var T=q[1];if(typeof T=="string"){var O=q[2]===!0,D=q[3]===!0,U=O||D,K=q[2];D&&(K=q[2]),d=this.$locale(),!O&&K&&(d=b.Ls[K]),this.$d=function(z,$,X,Z){try{if(["x","X"].indexOf($)>-1)return new Date(($==="X"?1e3:1)*z);var se=A($)(z),fe=se.year,Se=se.month,pe=se.day,ge=se.hours,de=se.minutes,ye=se.seconds,qe=se.milliseconds,Fe=se.zone,Oe=se.week,De=new Date,pt=pe||(fe||Se?1:De.getDate()),Pt=fe||De.getFullYear(),an=0;fe&&!Se||(an=Se>0?Se-1:De.getMonth());var Xa,Za=ge||0,Ds=de||0,vm=ye||0,wm=qe||0;return Fe?new Date(Date.UTC(Pt,an,pt,Za,Ds,vm,wm+60*Fe.offset*1e3)):X?new Date(Date.UTC(Pt,an,pt,Za,Ds,vm,wm)):(Xa=new Date(Pt,an,pt,Za,Ds,vm,wm),Oe&&(Xa=Z(Xa).week(Oe).toDate()),Xa)}catch{return new Date("")}}(k,T,N,b),this.init(),K&&K!==!0&&(this.$L=this.locale(K).$L),U&&k!=this.format(T)&&(this.$d=new Date("")),d={}}else if(T instanceof Array)for(var H=T.length,B=1;B<=H;B+=1){q[1]=T[B-1];var _=b.apply(this,q);if(_.isValid()){this.$d=_.$d,this.$L=_.$L,this.init();break}B===H&&(this.$d=new Date(""))}else E.call(this,P)}}})});var Kx=Ke((Bg,Gg)=>{"use strict";l();s();u();c();(function(e,t){typeof Bg=="object"&&typeof Gg<"u"?Gg.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof g<"u"?g:e||self).dayjs_plugin_timezone=t()})(Bg,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,a){var o,d=function(S,C,x){x===void 0&&(x={});var A=new Date(S),F=function(v,b){b===void 0&&(b={});var R=b.timeZoneName||"short",E=v+"|"+R,P=t[E];return P||(P=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:v,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:R}),t[E]=P),P}(C,x);return F.formatToParts(A)},p=function(S,C){for(var x=d(S,C),A=[],F=0;F<x.length;F+=1){var v=x[F],b=v.type,R=v.value,E=e[b];E>=0&&(A[E]=parseInt(R,10))}var P=A[3],k=P===24?0:P,N=A[0]+"-"+A[1]+"-"+A[2]+" "+k+":"+A[4]+":"+A[5]+":000",q=+S;return(a.utc(N).valueOf()-(q-=q%1e3))/6e4},m=n.prototype;m.tz=function(S,C){S===void 0&&(S=o);var x,A=this.utcOffset(),F=this.toDate(),v=F.toLocaleString("en-US",{timeZone:S}),b=Math.round((F-new Date(v))/1e3/60),R=15*-Math.round(F.getTimezoneOffset()/15)-b;if(!Number(R))x=this.utcOffset(0,C);else if(x=a(v,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(R,!0),C){var E=x.utcOffset();x=x.add(A-E,"minute")}return x.$x.$timezone=S,x},m.offsetName=function(S){var C=this.$x.$timezone||a.tz.guess(),x=d(this.valueOf(),C,{timeZoneName:S}).find(function(A){return A.type.toLowerCase()==="timezonename"});return x&&x.value};var f=m.startOf;m.startOf=function(S,C){if(!this.$x||!this.$x.$timezone)return f.call(this,S,C);var x=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(x,S,C).tz(this.$x.$timezone,!0)},a.tz=function(S,C,x){var A=x&&C,F=x||C||o,v=p(+a(),F);if(typeof S!="string")return a(S).tz(F);var b=function(k,N,q){var T=k-60*N*1e3,O=p(T,q);if(N===O)return[T,N];var D=p(T-=60*(O-N)*1e3,q);return O===D?[T,O]:[k-60*Math.min(O,D)*1e3,Math.max(O,D)]}(a.utc(S,A).valueOf(),v,F),R=b[0],E=b[1],P=a(R).utcOffset(E);return P.$x.$timezone=F,P},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(S){o=S}}})});var Jx=Ke(($g,Hg)=>{"use strict";l();s();u();c();(function(e,t){typeof $g=="object"&&typeof Hg<"u"?Hg.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof g<"u"?g:e||self).dayjs_plugin_utc=t()})($g,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,a,o){var d=a.prototype;o.utc=function(A){var F={date:A,utc:!0,args:arguments};return new a(F)},d.utc=function(A){var F=o(this.toDate(),{locale:this.$L,utc:!0});return A?F.add(this.utcOffset(),e):F},d.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var p=d.parse;d.parse=function(A){A.utc&&(this.$u=!0),this.$utils().u(A.$offset)||(this.$offset=A.$offset),p.call(this,A)};var m=d.init;d.init=function(){if(this.$u){var A=this.$d;this.$y=A.getUTCFullYear(),this.$M=A.getUTCMonth(),this.$D=A.getUTCDate(),this.$W=A.getUTCDay(),this.$H=A.getUTCHours(),this.$m=A.getUTCMinutes(),this.$s=A.getUTCSeconds(),this.$ms=A.getUTCMilliseconds()}else m.call(this)};var f=d.utcOffset;d.utcOffset=function(A,F){var v=this.$utils().u;if(v(A))return this.$u?0:v(this.$offset)?f.call(this):this.$offset;if(typeof A=="string"&&(A=function(P){P===void 0&&(P="");var k=P.match(t);if(!k)return null;var N=(""+k[0]).match(r)||["-",0,0],q=N[0],T=60*+N[1]+ +N[2];return T===0?0:q==="+"?T:-T}(A),A===null))return this;var b=Math.abs(A)<=16?60*A:A,R=this;if(F)return R.$offset=b,R.$u=A===0,R;if(A!==0){var E=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(R=this.local().add(b+E,e)).$offset=b,R.$x.$localOffset=E}else R=this.utc();return R};var S=d.format;d.format=function(A){var F=A||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return S.call(this,F)},d.valueOf=function(){var A=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*A},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var C=d.toDate;d.toDate=function(A){return A==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():C.call(this)};var x=d.diff;d.diff=function(A,F,v){if(A&&this.$u===A.$u)return x.call(this,A,F,v);var b=this.local(),R=o(A).local();return x.call(b,R,F,v)}}})});var lF=Ke((kre,uF)=>{"use strict";l();s();u();c();function Cj(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}uF.exports=Aj;function Aj(e,t,r){var n=r&&r.stringify||Cj,a=1;if(typeof e=="object"&&e!==null){var o=t.length+a;if(o===1)return e;var d=new Array(o);d[0]=n(e);for(var p=1;p<o;p++)d[p]=n(t[p]);return d.join(" ")}if(typeof e!="string")return e;var m=t.length;if(m===0)return e;for(var f="",S=1-a,C=-1,x=e&&e.length||0,A=0;A<x;){if(e.charCodeAt(A)===37&&A+1<x){switch(C=C>-1?C:0,e.charCodeAt(A+1)){case 100:case 102:if(S>=m||t[S]==null)break;C<A&&(f+=e.slice(C,A)),f+=Number(t[S]),C=A+2,A++;break;case 105:if(S>=m||t[S]==null)break;C<A&&(f+=e.slice(C,A)),f+=Math.floor(Number(t[S])),C=A+2,A++;break;case 79:case 111:case 106:if(S>=m||t[S]===void 0)break;C<A&&(f+=e.slice(C,A));var F=typeof t[S];if(F==="string"){f+="'"+t[S]+"'",C=A+2,A++;break}if(F==="function"){f+=t[S].name||"<anonymous>",C=A+2,A++;break}f+=n(t[S]),C=A+2,A++;break;case 115:if(S>=m)break;C<A&&(f+=e.slice(C,A)),f+=String(t[S]),C=A+2,A++;break;case 37:C<A&&(f+=e.slice(C,A)),f+="%",C=A+2,A++,S--;break}++S}++A}return C===-1?e:(C<x&&(f+=e.slice(C)),f)}});var yF=Ke((Dre,Sd)=>{"use strict";l();s();u();c();var dF=lF();Sd.exports=Hr;var Ic=Dj().console||{},xj={mapHttpRequest:hd,mapHttpResponse:hd,wrapRequestSerializer:Jg,wrapResponseSerializer:Jg,wrapErrorSerializer:Jg,req:hd,res:hd,err:mF,errWithCause:mF};function qn(e,t){return e==="silent"?1/0:t.levels.values[e]}var ey=Symbol("pino.logFuncs"),Xg=Symbol("pino.hierarchy"),Fj={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function pF(e,t){let r={logger:t,parent:e[Xg]};t[Xg]=r}function Rj(e,t,r){let n={};t.forEach(a=>{n[a]=r[a]?r[a]:Ic[a]||Ic[Fj[a]||"log"]||xi}),e[ey]=n}function bj(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Hr(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||Ic;e.browser.write&&(e.browser.asObject=!0);let n=e.serializers||{},a=bj(e.browser.serialize,n),o=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);let d=Object.keys(e.customLevels||{}),p=["error","fatal","warn","info","debug","trace"].concat(d);typeof r=="function"&&p.forEach(function(v){r[v]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let m=e.level||"info",f=Object.create(r);f.log||(f.log=xi),Rj(f,p,r),pF({},f),Object.defineProperty(f,"levelVal",{get:C}),Object.defineProperty(f,"level",{get:x,set:A});let S={transmit:t,serialize:a,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:p,timestamp:Oj(e),messageKey:e.messageKey||"msg",onChild:e.onChild||xi};f.levels=vj(e),f.level=m,f.isLevelEnabled=function(v){return this.levels.values[v]?this.levels.values[v]>=this.levels.values[this.level]:!1},f.setMaxListeners=f.getMaxListeners=f.emit=f.addListener=f.on=f.prependListener=f.once=f.prependOnceListener=f.removeListener=f.removeAllListeners=f.listeners=f.listenerCount=f.eventNames=f.write=f.flush=xi,f.serializers=n,f._serialize=a,f._stdErrSerialize=o,f.child=function(...v){return F.call(this,S,...v)},t&&(f._logEvent=Zg());function C(){return qn(this.level,this)}function x(){return this._level}function A(v){if(v!=="silent"&&!this.levels.values[v])throw Error("unknown level "+v);this._level=v,ka(this,S,f,"error"),ka(this,S,f,"fatal"),ka(this,S,f,"warn"),ka(this,S,f,"info"),ka(this,S,f,"debug"),ka(this,S,f,"trace"),d.forEach(b=>{ka(this,S,f,b)})}function F(v,b,R){if(!b)throw new Error("missing bindings for child Pino");R=R||{},a&&b.serializers&&(R.serializers=b.serializers);let E=R.serializers;if(a&&E){var P=Object.assign({},n,E),k=e.browser.serialize===!0?Object.keys(P):a;delete b.serializers,ty([b],k,P,this._stdErrSerialize)}function N(T){this._childLevel=(T._childLevel|0)+1,this.bindings=b,P&&(this.serializers=P,this._serialize=k),t&&(this._logEvent=Zg([].concat(T._logEvent.bindings,b)))}N.prototype=this;let q=new N(this);return pF(this,q),q.child=function(...T){return F.call(this,v,...T)},q.level=R.level||this.level,v.onChild(q),q}return f}function vj(e){let t=e.customLevels||{},r=Object.assign({},Hr.levels.values,t),n=Object.assign({},Hr.levels.labels,wj(t));return{values:r,labels:n}}function wj(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}Hr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Hr.stdSerializers=xj;Hr.stdTimeFunctions=Object.assign({},{nullTime:fF,epochTime:gF,unixTime:qj,isoTime:jj});function Pj(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[Xg];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function ka(e,t,r,n){if(Object.defineProperty(e,n,{value:qn(e.level,r)>qn(n,r)?xi:r[ey][n],writable:!0,enumerable:!0,configurable:!0}),e[n]===xi){if(!t.transmit)return;let o=t.transmit.level||e.level,d=qn(o,r);if(qn(n,r)<d)return}e[n]=Ij(e,t,r,n);let a=Pj(e);a.length!==0&&(e[n]=Ej(a,e[n]))}function Ej(e,t){return function(){return t.apply(this,[...e,...arguments])}}function Ij(e,t,r,n){return function(a){return function(){let d=t.timestamp(),p=new Array(arguments.length),m=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Ic?Ic:this;for(var f=0;f<p.length;f++)p[f]=arguments[f];var S=!1;if(t.serialize&&(ty(p,this._serialize,this.serializers,this._stdErrSerialize),S=!0),t.asObject||t.formatters?a.call(m,...kj(this,n,p,d,t)):a.apply(m,p),t.transmit){let C=t.transmit.level||e._level,x=qn(C,r),A=qn(n,r);if(A<x)return;Tj(this,{ts:d,methodLevel:n,methodValue:A,transmitLevel:C,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:qn(e._level,r)},p,S)}}}(e[ey][n])}function kj(e,t,r,n,a){let{level:o,log:d=C=>C}=a.formatters||{},p=r.slice(),m=p[0],f={},S=(e._childLevel|0)+1;if(S<1&&(S=1),n&&(f.time=n),o){let C=o(t,e.levels.values[t]);Object.assign(f,C)}else f.level=e.levels.values[t];if(a.asObjectBindingsOnly){if(m!==null&&typeof m=="object")for(;S--&&typeof p[0]=="object";)Object.assign(f,p.shift());return[d(f),...p]}else{if(m!==null&&typeof m=="object"){for(;S--&&typeof p[0]=="object";)Object.assign(f,p.shift());m=p.length?dF(p.shift(),p):void 0}else typeof m=="string"&&(m=dF(p.shift(),p));return m!==void 0&&(f[a.messageKey]=m),[d(f)]}}function ty(e,t,r,n){for(let a in e)if(n&&e[a]instanceof Error)e[a]=Hr.stdSerializers.err(e[a]);else if(typeof e[a]=="object"&&!Array.isArray(e[a])&&t)for(let o in e[a])t.indexOf(o)>-1&&o in r&&(e[a][o]=r[o](e[a][o]))}function Tj(e,t,r,n=!1){let a=t.send,o=t.ts,d=t.methodLevel,p=t.methodValue,m=t.val,f=e._logEvent.bindings;n||ty(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=r.filter(function(S){return f.indexOf(S)===-1}),e._logEvent.level.label=d,e._logEvent.level.value=p,a(d,e._logEvent,m),e._logEvent=Zg(f)}function Zg(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function mF(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function Oj(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?fF:gF}function hd(){return{}}function Jg(e){return e}function xi(){}function fF(){return!1}function gF(){return Date.now()}function qj(){return Math.round(Date.now()/1e3)}function jj(){return new Date(Date.now()).toISOString()}function Dj(){function e(t){return typeof t<"u"&&t}try{return typeof g<"u"?g:(Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),g)}catch{return e(self)||e(window)||e(this)||{}}}Sd.exports.default=Hr;Sd.exports.pino=Hr});var NQ={};nh(NQ,{API_DATE_FORMAT:()=>Zo,DefaultFieldsToInclude:()=>Ry,EcommerceDefaultFieldsToInclude:()=>Ib,HighlightUtils:()=>Nm,MinimumFieldsToInclude:()=>Mp,ResultTemplatesHelpers:()=>$A,SortBy:()=>ya,SortOrder:()=>mc,VERSION:()=>pn,baseFacetResponseSelector:()=>Wt,buildAutomaticFacetGenerator:()=>CR,buildBreadcrumbManager:()=>ZF,buildCategoryFacet:()=>JR,buildCategoryFieldSuggestions:()=>Fb,buildContext:()=>rR,buildController:()=>ee,buildCriterionExpression:()=>or,buildDateFacet:()=>mb,buildDateFilter:()=>gb,buildDateRange:()=>Vn,buildDateSortCriterion:()=>Yu,buildDictionaryFieldContext:()=>oR,buildDidYouMean:()=>dR,buildExecuteTrigger:()=>Mw,buildFacet:()=>sb,buildFacetConditionsManager:()=>aR,buildFacetManager:()=>mR,buildFieldSortCriterion:()=>Ku,buildFieldSuggestions:()=>Rb,buildFoldedResultList:()=>Ob,buildGeneratedAnswer:()=>Ub,buildHistoryManager:()=>iv,buildInstantResults:()=>yv,buildInteractiveCitation:()=>Bb,buildInteractiveInstantResult:()=>sv,buildInteractiveRecentResult:()=>Dv,buildInteractiveResult:()=>Bv,buildNoSortCriterion:()=>Xu,buildNotifyTrigger:()=>Qw,buildNumericFacet:()=>Cb,buildNumericFilter:()=>xb,buildNumericRange:()=>Yi,buildPager:()=>Cv,buildQueryError:()=>xv,buildQueryExpression:()=>DQ,buildQueryRankingExpressionSortCriterion:()=>Ju,buildQuerySummary:()=>Rv,buildQueryTrigger:()=>Uw,buildQuickview:()=>Pv,buildRecentQueriesList:()=>Ov,buildRecentResultsList:()=>Nv,buildRedirectionTrigger:()=>_w,buildRelevanceInspector:()=>_v,buildRelevanceSortCriterion:()=>Oo,buildResultList:()=>Gv,buildResultTemplatesManager:()=>eP,buildResultsPerPage:()=>Hv,buildSearchBox:()=>sm,buildSearchEngine:()=>IF,buildSearchParameterManager:()=>lm,buildSearchParameterSerializer:()=>tu,buildSearchStatus:()=>mw,buildSmartSnippet:()=>hw,buildSmartSnippetQuestionsList:()=>Aw,buildSort:()=>bw,buildStandaloneSearchBox:()=>Ew,buildStaticFilter:()=>Iw,buildStaticFilterValue:()=>eh,buildTab:()=>Tw,buildTabManager:()=>Ow,buildUrlManager:()=>zw,currentPageSelector:()=>nn,currentPagesSelector:()=>Kp,deserializeRelativeDate:()=>vA,facetRequestSelector:()=>zu,facetResponseSelectedValuesSelector:()=>TC,facetResponseSelector:()=>bo,getAnalyticsNextApiBaseUrl:()=>pu,getOrganizationEndpoint:()=>Ve,getSampleSearchEngineConfiguration:()=>ay,getSearchApiBaseUrl:()=>Me,loadAdvancedSearchQueryActions:()=>GL,loadAutomaticFacetSetActions:()=>nQ,loadBreadcrumbActions:()=>zL,loadCategoryFacetSetActions:()=>aQ,loadClickAnalyticsActions:()=>$L,loadConfigurationActions:()=>YL,loadContextActions:()=>JL,loadDateFacetSetActions:()=>iQ,loadDebugActions:()=>XL,loadDictionaryFieldContextActions:()=>ZL,loadDidYouMeanActions:()=>eQ,loadExcerptLengthActions:()=>tQ,loadFacetOptionsActions:()=>rQ,loadFacetSetActions:()=>oQ,loadFieldActions:()=>cQ,loadFoldingActions:()=>uQ,loadGeneratedAnswerActions:()=>lQ,loadGenericAnalyticsActions:()=>HL,loadHistoryActions:()=>dQ,loadIPXActionsHistoryActions:()=>BL,loadInstantResultsActions:()=>pQ,loadNumericFacetSetActions:()=>sQ,loadPaginationActions:()=>mQ,loadPipelineActions:()=>fQ,loadQueryActions:()=>gQ,loadQuerySetActions:()=>yQ,loadQuerySuggestActions:()=>hQ,loadQuestionAnsweringActions:()=>SQ,loadRecentQueriesActions:()=>CQ,loadRecentResultsActions:()=>AQ,loadResultPreviewActions:()=>xQ,loadSearchActions:()=>bQ,loadSearchAnalyticsActions:()=>WL,loadSearchConfigurationActions:()=>KL,loadSearchHubActions:()=>vQ,loadSearchParameterActions:()=>wQ,loadSortCriteriaActions:()=>PQ,loadStandaloneSearchBoxSetActions:()=>EQ,loadStaticFilterSetActions:()=>IQ,loadTabSetActions:()=>kQ,maxPageSelector:()=>Wc,parseCriterionExpression:()=>tP,validateRelativeDate:()=>Rn});module.exports=CP(NQ);l();s();u();c();var Nm={};nh(Nm,{escapeHtml:()=>oo,getHighlightedSuggestion:()=>Vm,highlightString:()=>rE});l();s();u();c();l();s();u();c();function YP(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Us(r)}var Us=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},ue=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let a in this.definition){let o=this.definition[a].validate(r[a]);o&&n.push(`${a}: ${o}`)}if(n.length)throw YP(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},be=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&ae(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function Je(e){return e===void 0}function KP(e){return e===null}function ae(e){return Je(e)||KP(e)}var ne=class{constructor(e={}){Ce(this,"value");this.value=new be(e)}validate(e){let t=this.value.validate(e);return t||(JP(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function JP(e){return Je(e)||ou(e)}function ou(e){return typeof e=="boolean"}var J=class{constructor(e={}){Ce(this,"value");this.config=e,this.value=new be(e)}validate(e){let t=this.value.validate(e);return t||(XP(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function XP(e){return Je(e)||xh(e)}function xh(e){return typeof e=="number"&&!Number.isNaN(e)}var ZP=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,j=class{constructor(e={}){Ce(this,"value");Ce(this,"config");this.config={emptyAllowed:!0,url:!1,...e},this.value=new be(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:a,ISODate:o}=this.config,d=this.value.validate(e);if(d)return d;if(Je(e))return null;if(!ro(e))return"value is not a string.";if(!t&&!e.length)return"value is an empty string.";if(r)try{new URL(e)}catch{return"value is not a valid URL."}return n&&!n.test(e)?`value did not match provided regex ${n}`:a&&!a.includes(e)?`value should be one of: ${a.join(", ")}.`:o&&!(ZP.test(e)&&new Date(e).toString()!=="Invalid Date")?"value is not a valid ISO8601 date string":null}get default(){return this.value.default}get required(){return this.value.required}};function ro(e){return Object.prototype.toString.call(e)==="[object String]"}var Q=class{constructor(e={}){Ce(this,"config");this.config={options:{required:!1},values:{},...e}}validate(e){if(Je(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Fh(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&ae(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let a=e[r],o=n.validate(a);o!==null&&(t+=` ${o}`)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Fh(e){return e!==void 0&&typeof e=="object"}var te=class{constructor(e={}){Ce(this,"value");this.config=e,this.value=new be(this.config)}validate(e){if(!ae(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(ae(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&ae(n)&&(r=`value is null or undefined: ${e.join(",")}`);let a=this.validatePrimitiveValue(n,this.config.each);a!==null&&(r+=` ${a}`)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return ou(e)||ro(e)||xh(e)||Fh(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function no(e){return Array.isArray(e)}var on=class{constructor(e){Ce(this,"value");this.config=e,this.value=new be(e)}validate(e){let t=this.value.validate(e);return t!==null?t:Je(e)||Object.values(this.config.enum).find(n=>n===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};l();s();u();c();var sn=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function iu(e){return Array.isArray(e)}function su(e){return e.trim()===""}function Rh(e,t){return[...e.reduce((r,n)=>{let a=t(n);return r.has(a)||r.set(a,n),r},new Map).values()]}function eE(e){return btoa(encodeURI(e))}function cu(e,t){let{[e]:r,...n}=t;return n}function ao(e){return eE(JSON.stringify(e))}var tE=new Set(["1",1,"yes",!0]);function bh(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>tE.has(r))}function vh(e){let t={};for(let[r,n]of e)t[r]=n;return t}function wh(e,t,r){return clearTimeout(t),setTimeout(e,r)}function _s(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function uu(e,t,r={}){let n;return(...a)=>{let o=r.isImmediate&&!n;if(clearTimeout(n),n=setTimeout(()=>{n=void 0,r.isImmediate||e.apply(void 0,a)},t),o)return e.apply(void 0,a)}}function rE(e){if(su(e.openingDelimiter)||su(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(ae(e.content)||su(e.content))return e.content;if(e.highlights.length===0)return oo(e.content);let t=e.content.length,r="",n=0;for(let a=0;a<e.highlights.length;a++){let o=e.highlights[a],d=o.offset,p=d+o.length;if(p>t)break;r+=oo(e.content.slice(n,d)),r+=e.openingDelimiter,r+=oo(e.content.slice(d,p)),r+=e.closingDelimiter,n=p}return n!==t&&(r+=oo(e.content.slice(n))),r}function Vm(e,t){return e=oo(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,n,a,o)=>n?Dm(n,t.notMatchDelimiters):a?Dm(a,t.exactMatchDelimiters):o?Dm(o,t.correctionDelimiters):r)}function Dm(e,t){return t?t.open+e+t.close:e}function oo(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=`(?:${Object.keys(t).join("|")})`,n=RegExp(r),a=RegExp(r,"g");return n.test(e)?e.replace(a,o=>t[o]):e}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();async function Eh(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value)}function Ih(e){let t,r,n,a=!1;return function(d){t===void 0?(t=d,r=0,n=-1):t=aE(t,d);let p=t.length,m=0;for(;r<p;){a&&(t[r]===10&&(m=++r),a=!1);let f=-1;for(;r<p&&f===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-m);break;case 13:a=!0,f=r;break;case 10:f=r;break}if(f===-1)break;e(t.subarray(m,f),n),m=r,n=-1}m===p?t=void 0:m!==0&&(t=t.subarray(m),r-=m)}}function kh(e,t,r){let n=Ph(),a=new TextDecoder;return function(d,p){if(d.length===0)r?.(n),n=Ph();else if(p>0){let m=a.decode(d.subarray(0,p)),f=p+(d[p+1]===32?2:1),S=a.decode(d.subarray(f));switch(m){case"data":n.data=n.data?`${n.data}
${S}`:S;break;case"event":n.event=S;break;case"id":e(n.id=S);break;case"retry":nE(S,n,t);break}}}}function nE(e,t,r){let n=parseInt(e,10);Number.isNaN(n)||r(t.retry=n)}function aE(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function Ph(){return{data:"",event:"",id:"",retry:void 0}}var Mm="text/event-stream",oE=1e3,Th="last-event-id";function Oh(){return typeof window<"u"}function io(e,{signal:t,headers:r,onopen:n,onmessage:a,onclose:o,onerror:d,openWhenHidden:p,fetch:m,...f}){return new Promise((S,C)=>{let x={...r};x.accept||(x.accept=Mm);let A;function F(){A?.abort(),document.hidden||k()}!p&&Oh()&&document.addEventListener("visibilitychange",F);let v=oE,b;function R(){Oh()&&document.removeEventListener("visibilitychange",F),clearTimeout(b),A?.abort()}t?.addEventListener("abort",()=>{R(),S()});let E=m??y,P=n??iE;async function k(){A=i.AbortController?new i.AbortController:null;try{let N=await E(e,{...f,headers:x,signal:A?.signal});await P(N),await Eh(N.body,Ih(kh(q=>{q?x[Th]=q:delete x[Th]},q=>{v=q},a))),o?.(),R(),S()}catch(N){if(!A?.signal?.aborted)try{let q=d?.(N)??v;clearTimeout(b),b=setTimeout(k,q)}catch(q){R(),C(q)}}}k()})}function iE(e){let t=e.headers.get("content-type");if(!t?.startsWith(Mm))throw new Error(`Expected content-type to be ${Mm}, Actual: ${t}`)}l();s();u();c();var cn=class{constructor(t){Ce(this,"_basePath");Ce(this,"_params",{});this._basePath=t}addParam(t,r){this._params={...this.params,[t]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([t,r])=>`${t}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}};var sE=(e,t,r)=>new cn(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href,qh=3,cE=5e3,uE="text/event-stream",Um=1,Lm=class extends Error{},Bs=class extends Error{constructor(r){super(r.message);this.payload=r}},Qm=class{constructor(){Ce(this,"timeouts",new Set)}add(t){this.timeouts.add(t)}remove(t){clearTimeout(t),this.timeouts.delete(t)}isActive(t){return this.timeouts.has(t)}},lu=class{constructor(t){Ce(this,"logger");this.logger=t.logger}streamGeneratedAnswer(t,r){let{url:n,organizationId:a,streamId:o,accessToken:d}=t,{write:p,abort:m,close:f,resetAnswer:S}=r,C=new Qm;if(!o){this.logger.error("No stream ID found");return}let x=0,A,F=()=>{A&&!C.isActive(A)&&(b?.abort(),S(),R())},v=()=>{C.remove(A),A=wh(F,A,cE),C.add(A)},b=new i.AbortController,R=()=>io(sE(n,a,o),{method:"GET",fetch:y,headers:{Authorization:`Bearer ${d}`,accept:"*/*"},openWhenHidden:!0,signal:b?.signal,async onopen(E){if(E.ok&&E.headers.get("content-type")===uE)return;throw E.status>=400&&E.status<500&&E.status!==429?new Bs({message:"Error opening stream",code:E.status}):new Lm},onmessage:E=>{if(b?.signal.aborted)return;let P=JSON.parse(E.data);if(P.finishReason==="ERROR"){C.remove(A),b?.abort(),m({message:P.errorMessage,code:P.statusCode});return}p(P),x=0,P.finishReason==="COMPLETED"?(C.remove(A),f()):v()},onerror:E=>{if(!b?.signal.aborted){if(C.remove(A),E instanceof Bs)throw b?.abort(),m(E),E;if(++x>qh){this.logger.info("Maximum retry exceeded.");let P={message:"Failed to complete stream.",code:Um};throw b?.abort(),m(P),new Bs(P)}this.logger.info(`Retrying...(${x}/${qh})`),S()}}});return R(),b}};l();s();u();c();var $h=Ht(Uh(),1);l();s();u();c();var W=new Error("Failed to load reducers."),so=class extends Error{constructor(){super(),this.name="UnauthorizedTokenError",this.message="The token being used to perform the request is unauthorized. It may be expired or invalid."}},ia=class extends Error{constructor(r,n){super();Ce(this,"statusCode");this.name="Disconnected",this.message=`Client could not connect to the following URL: ${r}`,this.statusCode=n??0}};l();s();u();c();function _h(e){let t=[];for(let r in e){let n=encodeURIComponent(r),a=encodeURIComponent(e[r]);t.push(`${n}=${a}`)}return t.join("&")}function Bh(e){return typeof e!="object"||!e?!1:Object.values(e).every(DE)}function DE(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function Gh(e){return e===429}var Et=class e{static async call(t){let r=VE(t),{logger:n}=t,a=await e.preprocessRequest(r,t);n.info(a,"Platform request");let{url:o,...d}=a,p=async()=>{let m=await y(o,d);if(Gh(m.status))throw m;return m};try{let m=await(0,$h.backOff)(p,{startingDelay:100,timeMultiple:2,maxDelay:800,numOfAttempts:4,jitter:"full",retry:async f=>{let S=f&&Gh(f.status);return S&&(n.info("Platform retrying request"),await new Promise(C=>setTimeout(C,1e3))),S}});switch(m.status){case 419:case 401:throw n.info("Platform renewing token"),new so;case 404:throw new ia(o,m.status);default:return n.info({response:m,requestInfo:a},"Platform response"),m}}catch(m){return m.message==="Failed to fetch"?new ia(o):m}}static async preprocessRequest(t,r){let{origin:n,preprocessRequest:a,logger:o,requestMetadata:d}=r,{signal:p,...m}=t,f=_s(m);try{let S=await a(t,n,d);return{...t,...S}}catch(S){o.error(S,"Platform request preprocessing failed. Returning default request options.")}return f}};function Ve(e,t="prod",r="platform"){let n=t==="prod"?"":t,a=r==="platform"?"":`.${r}`;return`https://${e}${a}.org${n}.coveo.com`}function Me(e,t="prod"){return`${Ve(e,t)}/rest/search/v2`}function pu(e,t="prod"){return`${Ve(e,t,"analytics")}/rest/organizations/${e}/events/v1`}function VE(e){let{url:t,method:r,requestParams:n,contentType:a,accessToken:o,signal:d}=e,p=e.method==="POST"||e.method==="PUT",m=NE(n,a);return{url:t,method:r,headers:{"Content-Type":a,Authorization:`Bearer ${o}`,...e.headers},...p&&{body:m},signal:d}}function NE(e,t){return t==="application/x-www-form-urlencoded"?Bh(e)?_h(e):"":JSON.stringify(e)}l();s();u();c();var mu=e=>e;l();s();u();c();l();s();u();c();function co(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Ft(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:co(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:co(),extendedResults:{},searchAction:void 0}}l();s();u();c();function un(e){let{url:t,accessToken:r,organizationId:n,authentication:a,...o}=e;return o}var ln=e=>{let{response:t}=e;return t.body?ME(e):LE(t)},ME=e=>UE(e)?_E(e):QE(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},LE=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function QE(e){return e.body.statusCode!==void 0}function UE(e){return e.body.exception!==void 0}var _E=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});l();s();u();c();var dn=class{constructor(){Ce(this,"currentAbortController",null)}async enqueue(t,r){let n=this.currentAbortController;this.currentAbortController=new i.AbortController;let a=this.currentAbortController;n&&(r.warnOnAbort&&r.logger.warn("Cancelling current pending search query"),n.abort());try{return await t(a?.signal??null)}finally{this.currentAbortController===a&&(this.currentAbortController=null)}}};l();s();u();c();l();s();u();c();function Hh(e){return((e.headers.get("content-type")||"").split(";").find(n=>n.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}l();s();u();c();var Vr=(e,t,r,n)=>{let a=new cn(`${e.url}${n}`);return a.addParam("organizationId",e.organizationId),e.authentication&&a.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:a.href,origin:"searchApiFetch"}};var Wh=(e,t)=>{let r=new cn(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),e.authentication&&r.addParam("authentication",e.authentication),e.q!==void 0&&r.addParam("q",e.q),e.enableNavigation!==void 0&&r.addParam("enableNavigation",`${e.enableNavigation}`),e.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),r.href},zh=async(e,t)=>{let r=await Et.call({...Vr(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:un(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=Hh(r),a=await r.arrayBuffer(),d=new TextDecoder(n).decode(a);return BE(d)?{success:d}:{error:ln({response:r,body:d})}};function BE(e){return typeof e=="string"}l();s();u();c();function GE(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function $E(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function Hs(e,t){if(t&&e.name==="AbortError")return{error:$E(e)};if(e instanceof ia)return{error:GE(e)};throw e}var fu=class{constructor(t){this.options=t;Ce(this,"apiCallsQueues",{unknown:new dn,mainSearch:new dn,facetValues:new dn,foldingCollection:new dn,instantResults:new dn})}async plan(t){let r=await Et.call({...Vr(t,"POST","application/json","/plan"),requestParams:un(t),requestMetadata:{method:"plan"},...this.options});if(r instanceof Error)return Hs(r);let n=await r.json();return WE(n)?{success:n}:{error:ln({response:r,body:n})}}async querySuggest(t){let r=await Et.call({...Vr(t,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:un(t),...this.options});if(r instanceof Error)return Hs(r);let n=await r.json(),a={response:r,body:n};return HE(n)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(a)).body}:{error:ln(a)}}async search(t,r){let n=r?.origin??"unknown",a=await this.apiCallsQueues[n].enqueue(p=>Et.call({...Vr(t,"POST","application/json",""),requestParams:un(t),requestMetadata:{method:"search",origin:r?.origin},...this.options,signal:p??void 0}),{logger:this.options.logger,warnOnAbort:!r?.disableAbortWarning});if(a instanceof Error)return Hs(a,r?.disableAbortWarning);let o=await a.json(),d={response:a,body:o};return Yh(o)?(d.body=Kh(o),{success:(await this.options.postprocessSearchResponseMiddleware(d)).body}):{error:ln(d)}}async facetSearch(t){let r=await Et.call({...Vr(t,"POST","application/json","/facet"),requestParams:un(t),requestMetadata:{method:"facetSearch"},...this.options});if(r instanceof Error)throw r;let n=await r.json(),a={response:r,body:n};return(await this.options.postprocessFacetSearchResponseMiddleware(a)).body}async recommendations(t){let r=await Et.call({...Vr(t,"POST","application/json",""),requestParams:un(t),requestMetadata:{method:"recommendations"},...this.options});if(r instanceof Error)throw r;let n=await r.json();if(Yh(n)){let a={response:r,body:n};return a.body=Kh(n),{success:(await this.options.postprocessSearchResponseMiddleware(a)).body}}return{error:ln({response:r,body:n})}}async html(t){return zh(t,{...this.options})}async fieldDescriptions(t){let r=await Et.call({...Vr(t,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(r instanceof Error)throw r;let n=await r.json();return zE(n)?{success:n}:{error:ln({response:r,body:n})}}},gu=e=>e.success!==void 0,Ge=e=>e.error!==void 0;function Yh(e){return e.results!==void 0}function Kh(e){let t=co();return ae(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function HE(e){return e.completions!==void 0}function WE(e){return e.preprocessingOutput!==void 0}function zE(e){return e.fields!==void 0}l();s();u();c();var Jh=e=>e,Xh=e=>e,Zh=e=>e;l();s();u();c();l();s();u();c();var L=new j({required:!0,emptyAllowed:!1}),Ie=new j({required:!1,emptyAllowed:!1}),Re=new j({required:!0,emptyAllowed:!0}),eS=new j({required:!1,emptyAllowed:!0}),yu=new te({each:L,required:!0}),tS=new j({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),rS=new j({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),FB=new j({required:!0,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),Nr=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),It=(e,t)=>{if("required"in t)return{payload:new ue({value:t}).validate({value:e}).value};let a=new Q({options:{required:!0},values:t}).validate(e);if(a)throw new Us(a);return{payload:e}},I=(e,t)=>{try{return It(e,t)}catch(r){return{payload:e,error:Nr(r)}}},Le=(e,t,r,n)=>{let a=`Check the initialState of ${n}`;return nS(e,t,r,a,"Controller initialization error")},ve=(e,t,r,n)=>{let a=`Check the options of ${n}`;return nS(e,t,r,a,"Controller initialization error")},nS=(e,t,r,n,a)=>{try{return t.validate(r,n)}catch(o){throw e.logger.error(o,a),o}};l();s();u();c();l();s();u();c();l();s();u();c();function Xe(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var YE=typeof Symbol=="function"&&Symbol.observable||"@@observable",aS=YE,Km=()=>Math.random().toString(36).substring(7).split("").join("."),KE={INIT:`@@redux/INIT${Km()}`,REPLACE:`@@redux/REPLACE${Km()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Km()}`},hu=KE;function tr(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Jm(e,t,r){if(typeof e!="function")throw new Error(Xe(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Xe(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Xe(1));return r(Jm)(e,t)}let n=e,a=t,o=new Map,d=o,p=0,m=!1;function f(){d===o&&(d=new Map,o.forEach((b,R)=>{d.set(R,b)}))}function S(){if(m)throw new Error(Xe(3));return a}function C(b){if(typeof b!="function")throw new Error(Xe(4));if(m)throw new Error(Xe(5));let R=!0;f();let E=p++;return d.set(E,b),function(){if(R){if(m)throw new Error(Xe(6));R=!1,f(),d.delete(E),o=null}}}function x(b){if(!tr(b))throw new Error(Xe(7));if(typeof b.type>"u")throw new Error(Xe(8));if(typeof b.type!="string")throw new Error(Xe(17));if(m)throw new Error(Xe(9));try{m=!0,a=n(a,b)}finally{m=!1}return(o=d).forEach(E=>{E()}),b}function A(b){if(typeof b!="function")throw new Error(Xe(10));n=b,x({type:hu.REPLACE})}function F(){let b=C;return{subscribe(R){if(typeof R!="object"||R===null)throw new Error(Xe(11));function E(){let k=R;k.next&&k.next(S())}return E(),{unsubscribe:b(E)}},[aS](){return this}}}return x({type:hu.INIT}),{dispatch:x,subscribe:C,getState:S,replaceReducer:A,[aS]:F}}function JE(e){Object.keys(e).forEach(t=>{let r=e[t];if(typeof r(void 0,{type:hu.INIT})>"u")throw new Error(Xe(12));if(typeof r(void 0,{type:hu.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Xe(13))})}function uo(e){let t=Object.keys(e),r={};for(let d=0;d<t.length;d++){let p=t[d];typeof e[p]=="function"&&(r[p]=e[p])}let n=Object.keys(r),a,o;try{JE(r)}catch(d){o=d}return function(p={},m){if(o)throw o;let f=!1,S={};for(let C=0;C<n.length;C++){let x=n[C],A=r[x],F=p[x],v=A(F,m);if(typeof v>"u"){let b=m&&m.type;throw new Error(Xe(14))}S[x]=v,f=f||v!==F}return f=f||n.length!==Object.keys(p).length,f?S:p}}function lo(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function oS(...e){return t=>(r,n)=>{let a=t(r,n),o=()=>{throw new Error(Xe(15))},d={getState:a.getState,dispatch:(m,...f)=>o(m,...f)},p=e.map(m=>m(d));return o=lo(...p)(a.dispatch),{...a,dispatch:o}}}function po(e){return tr(e)&&"type"in e&&typeof e.type=="string"}l();s();u();c();var cf=Symbol.for("immer-nothing"),Ws=Symbol.for("immer-draftable"),mt=Symbol.for("immer-state");function Ze(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var mo=Object.getPrototypeOf;function Rt(e){return!!e&&!!e[mt]}function ft(e){return e?dS(e)||Array.isArray(e)||!!e[Ws]||!!e.constructor?.[Ws]||fo(e)||Zs(e):!1}var XE=Object.prototype.constructor.toString(),iS=new WeakMap;function dS(e){if(!e||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=iS.get(r);return n===void 0&&(n=Function.toString.call(r),iS.set(r,n)),n===XE}function uf(e){return Rt(e)||Ze(15,e),e[mt].base_}function zs(e,t,r=!0){ca(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function ca(e){let t=e[mt];return t?t.type_:Array.isArray(e)?1:fo(e)?2:Zs(e)?3:0}function Ys(e,t){return ca(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Xm(e,t){return ca(e)===2?e.get(t):e[t]}function pS(e,t,r){let n=ca(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function ZE(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function fo(e){return e instanceof Map}function Zs(e){return e instanceof Set}function sa(e){return e.copy_||e.base_}function tf(e,t){if(fo(e))return new Map(e);if(Zs(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=dS(e);if(t===!0||t==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(e);delete n[mt];let a=Reflect.ownKeys(n);for(let o=0;o<a.length;o++){let d=a[o],p=n[d];p.writable===!1&&(p.writable=!0,p.configurable=!0),(p.get||p.set)&&(n[d]={configurable:!0,writable:!0,enumerable:p.enumerable,value:e[d]})}return Object.create(mo(e),n)}else{let n=mo(e);if(n!==null&&r)return{...e};let a=Object.create(n);return Object.assign(a,e)}}function xu(e,t=!1){return Fu(e)||Rt(e)||!ft(e)||(ca(e)>1&&Object.defineProperties(e,{set:Su,add:Su,clear:Su,delete:Su}),Object.freeze(e),t&&Object.values(e).forEach(r=>xu(r,!0))),e}function eI(){Ze(2)}var Su={value:eI};function Fu(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var rf={};function ua(e){let t=rf[e];return t||Ze(0,e),t}function tI(e,t){rf[e]||(rf[e]=t)}var Ks;function mS(){return Ks}function rI(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function sS(e,t){t&&(ua("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function nf(e){af(e),e.drafts_.forEach(nI),e.drafts_=null}function af(e){e===Ks&&(Ks=e.parent_)}function cS(e){return Ks=rI(Ks,e)}function nI(e){let t=e[mt];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function uS(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[mt].modified_&&(nf(t),Ze(4)),ft(e)&&(e=Cu(t,e),t.parent_||Au(t,e)),t.patches_&&ua("Patches").generateReplacementPatches_(r[mt].base_,e,t.patches_,t.inversePatches_)):e=Cu(t,r,[]),nf(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cf?e:void 0}function Cu(e,t,r){if(Fu(t))return t;let n=e.immer_.shouldUseStrictIteration(),a=t[mt];if(!a)return zs(t,(o,d)=>lS(e,a,t,o,d,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return Au(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;let o=a.copy_,d=o,p=!1;a.type_===3&&(d=new Set(o),o.clear(),p=!0),zs(d,(m,f)=>lS(e,a,o,m,f,r,p),n),Au(e,o,!1),r&&e.patches_&&ua("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function lS(e,t,r,n,a,o,d){if(a==null||typeof a!="object"&&!d)return;let p=Fu(a);if(!(p&&!d)){if(Rt(a)){let m=o&&t&&t.type_!==3&&!Ys(t.assigned_,n)?o.concat(n):void 0,f=Cu(e,a,m);if(pS(r,n,f),Rt(f))e.canAutoFreeze_=!1;else return}else d&&r.add(a);if(ft(a)&&!p){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&p)return;Cu(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(fo(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Au(e,a)}}}function Au(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&xu(t,r)}function aI(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:mS(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},a=n,o=lf;r&&(a=[n],o=Js);let{revoke:d,proxy:p}=Proxy.revocable(a,o);return n.draft_=p,n.revoke_=d,p}var lf={get(e,t){if(t===mt)return e;let r=sa(e);if(!Ys(r,t))return oI(e,r,t);let n=r[t];return e.finalized_||!ft(n)?n:n===Zm(e.base_,t)?(ef(e),e.copy_[t]=sf(n,e)):n},has(e,t){return t in sa(e)},ownKeys(e){return Reflect.ownKeys(sa(e))},set(e,t,r){let n=fS(sa(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let a=Zm(sa(e),t),o=a?.[mt];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(ZE(r,a)&&(r!==void 0||Ys(e.base_,t)))return!0;ef(e),of(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Zm(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ef(e),of(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=sa(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Ze(11)},getPrototypeOf(e){return mo(e.base_)},setPrototypeOf(){Ze(12)}},Js={};zs(lf,(e,t)=>{Js[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Js.deleteProperty=function(e,t){return Js.set.call(this,e,t,void 0)};Js.set=function(e,t,r){return lf.set.call(this,e[0],t,r,e[0])};function Zm(e,t){let r=e[mt];return(r?sa(r):e)[t]}function oI(e,t,r){let n=fS(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function fS(e,t){if(!(t in e))return;let r=mo(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=mo(r)}}function of(e){e.modified_||(e.modified_=!0,e.parent_&&of(e.parent_))}function ef(e){e.copy_||(e.copy_=tf(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var iI=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let o=r;r=t;let d=this;return function(m=o,...f){return d.produce(m,S=>r.call(this,S,...f))}}typeof r!="function"&&Ze(6),n!==void 0&&typeof n!="function"&&Ze(7);let a;if(ft(t)){let o=cS(this),d=sf(t,void 0),p=!0;try{a=r(d),p=!1}finally{p?nf(o):af(o)}return sS(o,n),uS(a,o)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===cf&&(a=void 0),this.autoFreeze_&&xu(a,!0),n){let o=[],d=[];ua("Patches").generateReplacementPatches_(t,a,o,d),n(o,d)}return a}else Ze(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(d,...p)=>this.produceWithPatches(d,m=>t(m,...p));let n,a;return[this.produce(t,r,(d,p)=>{n=d,a=p}),n,a]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ft(e)||Ze(8),Rt(e)&&(e=gS(e));let t=cS(this),r=sf(e,void 0);return r[mt].isManual_=!0,af(t),r}finishDraft(e,t){let r=e&&e[mt];(!r||!r.isManual_)&&Ze(9);let{scope_:n}=r;return sS(n,t),uS(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));let n=ua("Patches").applyPatches_;return Rt(e)?n(e,t):this.produce(e,a=>n(a,t))}};function sf(e,t){let r=fo(e)?ua("MapSet").proxyMap_(e,t):Zs(e)?ua("MapSet").proxySet_(e,t):aI(e,t);return(t?t.scope_:mS()).drafts_.push(r),r}function gS(e){return Rt(e)||Ze(10,e),yS(e)}function yS(e){if(!ft(e)||Fu(e))return e;let t=e[mt],r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=tf(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=tf(e,!0);return zs(r,(a,o)=>{pS(r,a,yS(o))},n),t&&(t.finalized_=!1),r}function hS(){let t="replace",r="add",n="remove";function a(x,A,F,v){switch(x.type_){case 0:case 2:return d(x,A,F,v);case 1:return o(x,A,F,v);case 3:return p(x,A,F,v)}}function o(x,A,F,v){let{base_:b,assigned_:R}=x,E=x.copy_;E.length<b.length&&([b,E]=[E,b],[F,v]=[v,F]);for(let P=0;P<b.length;P++)if(R[P]&&E[P]!==b[P]){let k=A.concat([P]);F.push({op:t,path:k,value:C(E[P])}),v.push({op:t,path:k,value:C(b[P])})}for(let P=b.length;P<E.length;P++){let k=A.concat([P]);F.push({op:r,path:k,value:C(E[P])})}for(let P=E.length-1;b.length<=P;--P){let k=A.concat([P]);v.push({op:n,path:k})}}function d(x,A,F,v){let{base_:b,copy_:R}=x;zs(x.assigned_,(E,P)=>{let k=Xm(b,E),N=Xm(R,E),q=P?Ys(b,E)?t:r:n;if(k===N&&q===t)return;let T=A.concat(E);F.push(q===n?{op:q,path:T}:{op:q,path:T,value:N}),v.push(q===r?{op:n,path:T}:q===n?{op:r,path:T,value:C(k)}:{op:t,path:T,value:C(k)})})}function p(x,A,F,v){let{base_:b,copy_:R}=x,E=0;b.forEach(P=>{if(!R.has(P)){let k=A.concat([E]);F.push({op:n,path:k,value:P}),v.unshift({op:r,path:k,value:P})}E++}),E=0,R.forEach(P=>{if(!b.has(P)){let k=A.concat([E]);F.push({op:r,path:k,value:P}),v.unshift({op:n,path:k,value:P})}E++})}function m(x,A,F,v){F.push({op:t,path:[],value:A===cf?void 0:A}),v.push({op:t,path:[],value:x})}function f(x,A){return A.forEach(F=>{let{path:v,op:b}=F,R=x;for(let N=0;N<v.length-1;N++){let q=ca(R),T=v[N];typeof T!="string"&&typeof T!="number"&&(T=""+T),(q===0||q===1)&&(T==="__proto__"||T==="constructor")&&Ze(19),typeof R=="function"&&T==="prototype"&&Ze(19),R=Xm(R,T),typeof R!="object"&&Ze(18,v.join("/"))}let E=ca(R),P=S(F.value),k=v[v.length-1];switch(b){case t:switch(E){case 2:return R.set(k,P);case 3:Ze(16);default:return R[k]=P}case r:switch(E){case 1:return k==="-"?R.push(P):R.splice(k,0,P);case 2:return R.set(k,P);case 3:return R.add(P);default:return R[k]=P}case n:switch(E){case 1:return R.splice(k,1);case 2:return R.delete(k);case 3:return R.delete(F.value);default:return delete R[k]}default:Ze(17,b)}}),x}function S(x){if(!ft(x))return x;if(Array.isArray(x))return x.map(S);if(fo(x))return new Map(Array.from(x.entries()).map(([F,v])=>[F,S(v)]));if(Zs(x))return new Set(Array.from(x).map(S));let A=Object.create(mo(x));for(let F in x)A[F]=S(x[F]);return Ys(x,Ws)&&(A[Ws]=x[Ws]),A}function C(x){return Rt(x)?S(x):x}tI("Patches",{applyPatches_:f,generatePatches_:a,generateReplacementPatches_:m})}var Xs=new iI,Mr=Xs.produce,Ru=Xs.produceWithPatches.bind(Xs);var df=Xs.applyPatches.bind(Xs);l();s();u();c();function sI(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function cI(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function uI(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var SS=e=>Array.isArray(e)?e:[e];function lI(e){let t=Array.isArray(e[0])?e[0]:e;return uI(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function dI(e,t){let r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var LB=Symbol();var QB=Object.getPrototypeOf({});var pI=class{constructor(e){this.value=e}deref(){return this.value}},mI=typeof WeakRef<"u"?WeakRef:pI,fI=0,CS=1;function bu(){return{s:fI,v:void 0,o:null,p:null}}function go(e,t={}){let r=bu(),{resultEqualityCheck:n}=t,a,o=0;function d(){let p=r,{length:m}=arguments;for(let C=0,x=m;C<x;C++){let A=arguments[C];if(typeof A=="function"||typeof A=="object"&&A!==null){let F=p.o;F===null&&(p.o=F=new WeakMap);let v=F.get(A);v===void 0?(p=bu(),F.set(A,p)):p=v}else{let F=p.p;F===null&&(p.p=F=new Map);let v=F.get(A);v===void 0?(p=bu(),F.set(A,p)):p=v}}let f=p,S;if(p.s===CS)S=p.v;else if(S=e.apply(null,arguments),o++,n){let C=a?.deref?.()??a;C!=null&&n(C,S)&&(S=C,o!==0&&o--),a=typeof S=="object"&&S!==null||typeof S=="function"?new mI(S):S}return f.s=CS,f.v=S,S}return d.clearCache=()=>{r=bu(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}function AS(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let o=0,d=0,p,m={},f=a.pop();typeof f=="object"&&(m=f,f=a.pop()),sI(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);let S={...r,...m},{memoize:C,memoizeOptions:x=[],argsMemoize:A=go,argsMemoizeOptions:F=[],devModeChecks:v={}}=S,b=SS(x),R=SS(F),E=lI(a),P=C(function(){return o++,f.apply(null,arguments)},...b),k=!0,N=A(function(){d++;let T=dI(E,arguments);return p=P.apply(null,T),p},...R);return Object.assign(N,{resultFunc:f,memoizedResultFunc:P,dependencies:E,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>p,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:C,argsMemoize:A})};return Object.assign(n,{withTypes:()=>n}),n}var we=AS(go),gI=Object.assign((e,t=we)=>{cI(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map(o=>e[o]);return t(n,(...o)=>o.reduce((d,p,m)=>(d[r[m]]=p,d),{}))},{withTypes:()=>gI});l();s();u();c();function xS(e){return({dispatch:r,getState:n})=>a=>o=>typeof o=="function"?o(r,n,e):a(o)}var FS=xS(),RS=xS;var yI=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?lo:lo.apply(null,arguments)},a1=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}},hI=e=>e&&typeof e.match=="function";function w(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(lt(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>po(n)&&n.type===e,r}var TS=class ec extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ec.prototype)}static get[Symbol.species](){return ec}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ec(...t[0].concat(this)):new ec(...t.concat(this))}};function bS(e){return ft(e)?Mr(e,()=>{}):e}function vS(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function SI(e){return typeof e=="boolean"}var CI=()=>function(t){let{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:o=!0}=t??{},d=new TS;return r&&(SI(r)?d.push(FS):d.push(RS(r.extraArgument))),d},tc="RTK_autoBatch",So=()=>e=>({payload:e,meta:{[tc]:!0}}),wS=e=>t=>{setTimeout(t,e)},AI=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),a=!0,o=!1,d=!1,p=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:wS(10):e.type==="callback"?e.queueNotification:wS(e.timeout),f=()=>{d=!1,o&&(o=!1,p.forEach(S=>S()))};return Object.assign({},n,{subscribe(S){let C=()=>a&&S(),x=n.subscribe(C);return p.add(S),()=>{x(),p.delete(S)}},dispatch(S){try{return a=!S?.meta?.[tc],o=!a,o&&(d||(d=!0,m(f))),n.dispatch(S)}finally{a=!0}}})},xI=e=>function(r){let{autoBatch:n=!0}=r??{},a=new TS(e);return n&&a.push(AI(typeof n=="object"?n:void 0)),a};function OS(e){let t=CI(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:o=void 0,enhancers:d=void 0}=e||{},p;if(typeof r=="function")p=r;else if(tr(r))p=uo(r);else throw new Error(lt(1));let m;typeof n=="function"?m=n(t):m=t();let f=lo;a&&(f=yI({trace:!1,...typeof a=="object"&&a}));let S=oS(...m),C=xI(S),x=typeof d=="function"?d(C):C(),A=f(...x);return Jm(p,o,A)}function qS(e){let t={},r=[],n,a={addCase(o,d){let p=typeof o=="string"?o:o.type;if(!p)throw new Error(lt(28));if(p in t)throw new Error(lt(29));return t[p]=d,a},addMatcher(o,d){return r.push({matcher:o,reducer:d}),a},addDefaultCase(o){return n=o,a}};return e(a),[t,r,n]}function FI(e){return typeof e=="function"}function re(e,t){let[r,n,a]=qS(t),o;if(FI(e))o=()=>bS(e());else{let p=bS(e);o=()=>p}function d(p=o(),m){let f=[r[m.type],...n.filter(({matcher:S})=>S(m)).map(({reducer:S})=>S)];return f.filter(S=>!!S).length===0&&(f=[a]),f.reduce((S,C)=>{if(C)if(Rt(S)){let A=C(S,m);return A===void 0?S:A}else{if(ft(S))return Mr(S,x=>C(x,m));{let x=C(S,m);if(x===void 0){if(S===null)return S;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return S},p)}return d.getInitialState=o,d}var jS=(e,t)=>hI(e)?e.match(t):e(t);function rr(...e){return t=>e.some(r=>jS(r,t))}function ho(...e){return t=>e.every(r=>jS(r,t))}function Eu(e,t){if(!e||!e.meta)return!1;let r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function rc(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function Iu(...e){return e.length===0?t=>Eu(t,["pending"]):rc(e)?rr(...e.map(t=>t.pending)):Iu()(e[0])}function pa(...e){return e.length===0?t=>Eu(t,["rejected"]):rc(e)?rr(...e.map(t=>t.rejected)):pa()(e[0])}function nc(...e){let t=r=>r&&r.meta&&r.meta.rejectedWithValue;return e.length===0?ho(pa(...e),t):rc(e)?ho(pa(...e),t):nc()(e[0])}function Lr(...e){return e.length===0?t=>Eu(t,["fulfilled"]):rc(e)?rr(...e.map(t=>t.fulfilled)):Lr()(e[0])}function ku(...e){return e.length===0?t=>Eu(t,["pending","fulfilled","rejected"]):rc(e)?rr(...e.flatMap(t=>[t.pending,t.rejected,t.fulfilled])):ku()(e[0])}var RI="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ac=(e=21)=>{let t="",r=e;for(;r--;)t+=RI[Math.random()*64|0];return t},bI=["name","message","stack","code"],pf=class{constructor(e,t){Ce(this,"_type");this.payload=e,this.meta=t}},PS=class{constructor(e,t){Ce(this,"_type");this.payload=e,this.meta=t}},vI=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of bI)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},oe=(()=>{function e(t,r,n){let a=w(t+"/fulfilled",(m,f,S,C)=>({payload:m,meta:{...C||{},arg:S,requestId:f,requestStatus:"fulfilled"}})),o=w(t+"/pending",(m,f,S)=>({payload:void 0,meta:{...S||{},arg:f,requestId:m,requestStatus:"pending"}})),d=w(t+"/rejected",(m,f,S,C,x)=>({payload:C,error:(n&&n.serializeError||vI)(m||"Rejected"),meta:{...x||{},arg:S,requestId:f,rejectedWithValue:!!C,requestStatus:"rejected",aborted:m?.name==="AbortError",condition:m?.name==="ConditionError"}}));function p(m){return(f,S,C)=>{let x=n?.idGenerator?n.idGenerator(m):ac(),A=new i.AbortController,F,v;function b(E){v=E,A.abort()}let R=async function(){let E;try{let k=n?.condition?.(m,{getState:S,extra:C});if(PI(k)&&(k=await k),k===!1||A.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let N=new Promise((q,T)=>{F=()=>{T({name:"AbortError",message:v||"Aborted"})},A.signal.addEventListener("abort",F)});f(o(x,m,n?.getPendingMeta?.({requestId:x,arg:m},{getState:S,extra:C}))),E=await Promise.race([N,Promise.resolve(r(m,{dispatch:f,getState:S,extra:C,requestId:x,signal:A.signal,abort:b,rejectWithValue:(q,T)=>new pf(q,T),fulfillWithValue:(q,T)=>new PS(q,T)})).then(q=>{if(q instanceof pf)throw q;return q instanceof PS?a(q.payload,x,m,q.meta):a(q,x,m)})])}catch(k){E=k instanceof pf?d(null,x,m,k.payload,k.meta):d(k,x,m)}finally{F&&A.signal.removeEventListener("abort",F)}return n&&!n.dispatchConditionRejection&&d.match(E)&&E.meta.condition||f(E),E}();return Object.assign(R,{abort:b,requestId:x,arg:m,unwrap(){return R.then(wI)}})}}return Object.assign(p,{pending:o,rejected:d,fulfilled:a,settled:rr(d,a),typePrefix:t})}return e.withTypes=()=>e,e})();function wI(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function PI(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var DS=Symbol.for("rtk-slice-createasyncthunk"),u1={[DS]:oe};function EI(e,t){return`${e}/${t}`}function II({creators:e}={}){let t=e?.asyncThunk?.[DS];return function(n){let{name:a,reducerPath:o=a}=n;if(!a)throw new Error(lt(11));typeof process<"u";let d=(typeof n.reducers=="function"?n.reducers(TI()):n.reducers)||{},p=Object.keys(d),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(E,P){let k=typeof E=="string"?E:E.type;if(!k)throw new Error(lt(12));if(k in m.sliceCaseReducersByType)throw new Error(lt(13));return m.sliceCaseReducersByType[k]=P,f},addMatcher(E,P){return m.sliceMatchers.push({matcher:E,reducer:P}),f},exposeAction(E,P){return m.actionCreators[E]=P,f},exposeCaseReducer(E,P){return m.sliceCaseReducersByName[E]=P,f}};p.forEach(E=>{let P=d[E],k={reducerName:E,type:EI(a,E),createNotation:typeof n.reducers=="function"};qI(P)?DI(k,P,f,t):OI(k,P,f)});function S(){let[E={},P=[],k=void 0]=typeof n.extraReducers=="function"?qS(n.extraReducers):[n.extraReducers],N={...E,...m.sliceCaseReducersByType};return re(n.initialState,q=>{for(let T in N)q.addCase(T,N[T]);for(let T of m.sliceMatchers)q.addMatcher(T.matcher,T.reducer);for(let T of P)q.addMatcher(T.matcher,T.reducer);k&&q.addDefaultCase(k)})}let C=E=>E,x=new Map,A;function F(E,P){return A||(A=S()),A(E,P)}function v(){return A||(A=S()),A.getInitialState()}function b(E,P=!1){function k(q){let T=q[E];return typeof T>"u"&&P&&(T=v()),T}function N(q=C){let T=vS(x,P,()=>new WeakMap);return vS(T,q,()=>{let O={};for(let[D,U]of Object.entries(n.selectors??{}))O[D]=kI(U,q,v,P);return O})}return{reducerPath:E,getSelectors:N,get selectors(){return N(k)},selectSlice:k}}let R={name:a,reducer:F,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:v,...b(o),injectInto(E,{reducerPath:P,...k}={}){let N=P??o;return E.inject({reducerPath:N,reducer:F},k),{...R,...b(N,!0)}}};return R}}function kI(e,t,r,n){function a(o,...d){let p=t(o);return typeof p>"u"&&n&&(p=r()),e(p,...d)}return a.unwrapped=e,a}var ma=II();function TI(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function OI({type:e,reducerName:t,createNotation:r},n,a){let o,d;if("reducer"in n){if(r&&!jI(n))throw new Error(lt(17));o=n.reducer,d=n.prepare}else o=n;a.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,d?w(e,d):w(e))}function qI(e){return e._reducerDefinitionType==="asyncThunk"}function jI(e){return e._reducerDefinitionType==="reducerWithPrepare"}function DI({type:e,reducerName:t},r,n,a){if(!a)throw new Error(lt(18));let{payloadCreator:o,fulfilled:d,pending:p,rejected:m,settled:f,options:S}=r,C=a(e,o,S);n.exposeAction(t,C),d&&n.addCase(C.fulfilled,d),p&&n.addCase(C.pending,p),m&&n.addCase(C.rejected,m),f&&n.addMatcher(C.settled,f),n.exposeCaseReducer(t,{fulfilled:d||vu,pending:p||vu,rejected:m||vu,settled:f||vu})}function vu(){}var VI="task",VS="listener",NS="completed",gf="cancelled",NI=`task-${gf}`,MI=`task-${NS}`,mf=`${VS}-${gf}`,LI=`${VS}-${NS}`,Tu=class{constructor(e){Ce(this,"name","TaskAbortError");Ce(this,"message");this.code=e,this.message=`${VI} ${gf} (reason: ${e})`}},yf=(e,t)=>{if(typeof e!="function")throw new TypeError(lt(32))},wu=()=>{},MS=(e,t=wu)=>(e.catch(t),e),LS=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),la=(e,t)=>{let r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},da=e=>{if(e.aborted){let{reason:t}=e;throw new Tu(t)}};function QS(e,t){let r=wu;return new Promise((n,a)=>{let o=()=>a(new Tu(e.reason));if(e.aborted){o();return}r=LS(e,o),t.finally(()=>r()).then(n,a)}).finally(()=>{r=wu})}var QI=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Tu?"cancelled":"rejected",error:r}}finally{t?.()}},Pu=e=>t=>MS(QS(e,t).then(r=>(da(e),r))),US=e=>{let t=Pu(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:yo}=Object,ES={},Ou="listenerMiddleware",UI=(e,t)=>{let r=n=>LS(e,()=>la(n,e.reason));return(n,a)=>{yf(n,"taskExecutor");let o=new i.AbortController;r(o);let d=QI(async()=>{da(e),da(o.signal);let p=await n({pause:Pu(o.signal),delay:US(o.signal),signal:o.signal});return da(o.signal),p},()=>la(o,MI));return a?.autoJoin&&t.push(d.catch(wu)),{result:Pu(e)(d),cancel(){la(o,NI)}}}},_I=(e,t)=>{let r=async(n,a)=>{da(t);let o=()=>{},p=[new Promise((m,f)=>{let S=e({predicate:n,effect:(C,x)=>{x.unsubscribe(),m([C,x.getState(),x.getOriginalState()])}});o=()=>{S(),f()}})];a!=null&&p.push(new Promise(m=>setTimeout(m,a,null)));try{let m=await QS(t,Promise.race(p));return da(t),m}finally{o()}};return(n,a)=>MS(r(n,a))},_S=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:o}=e;if(t)a=w(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(lt(21));return yf(o,"options.listener"),{predicate:a,type:t,effect:o}},BS=yo(e=>{let{type:t,predicate:r,effect:n}=_S(e);return{id:ac(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(lt(22))}}},{withTypes:()=>BS}),IS=(e,t)=>{let{type:r,effect:n,predicate:a}=_S(t);return Array.from(e.values()).find(o=>(typeof r=="string"?o.type===r:o.predicate===a)&&o.effect===n)},ff=e=>{e.pending.forEach(t=>{la(t,mf)})},BI=e=>()=>{e.forEach(ff),e.clear()},kS=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},GS=yo(w(`${Ou}/add`),{withTypes:()=>GS}),GI=w(`${Ou}/removeAll`),$S=yo(w(`${Ou}/remove`),{withTypes:()=>$S}),$I=(...e)=>{console.error(`${Ou}/error`,...e)},HS=(e={})=>{let t=new Map,{extra:r,onError:n=$I}=e;yf(n,"onError");let a=S=>(S.unsubscribe=()=>t.delete(S.id),t.set(S.id,S),C=>{S.unsubscribe(),C?.cancelActive&&ff(S)}),o=S=>{let C=IS(t,S)??BS(S);return a(C)};yo(o,{withTypes:()=>o});let d=S=>{let C=IS(t,S);return C&&(C.unsubscribe(),S.cancelActive&&ff(C)),!!C};yo(d,{withTypes:()=>d});let p=async(S,C,x,A)=>{let F=new i.AbortController,v=_I(o,F.signal),b=[];try{S.pending.add(F),await Promise.resolve(S.effect(C,yo({},x,{getOriginalState:A,condition:(R,E)=>v(R,E).then(Boolean),take:v,delay:US(F.signal),pause:Pu(F.signal),extra:r,signal:F.signal,fork:UI(F.signal,b),unsubscribe:S.unsubscribe,subscribe:()=>{t.set(S.id,S)},cancelActiveListeners:()=>{S.pending.forEach((R,E,P)=>{R!==F&&(la(R,mf),P.delete(R))})},cancel:()=>{la(F,mf),S.pending.delete(F)},throwIfCancelled:()=>{da(F.signal)}})))}catch(R){R instanceof Tu||kS(n,R,{raisedBy:"effect"})}finally{await Promise.all(b),la(F,LI),S.pending.delete(F)}},m=BI(t);return{middleware:S=>C=>x=>{if(!po(x))return C(x);if(GS.match(x))return o(x.payload);if(GI.match(x)){m();return}if($S.match(x))return d(x.payload);let A=S.getState(),F=()=>{if(A===ES)throw new Error(lt(23));return A},v;try{if(v=C(x),t.size>0){let b=S.getState(),R=Array.from(t.values());for(let E of R){let P=!1;try{P=E.predicate(x,b,A)}catch(k){P=!1,kS(n,k,{raisedBy:"predicate"})}P&&p(E,x,S,F)}}}finally{A=ES}return v},startListening:o,stopListening:d,clearListeners:m}};var d1=Symbol.for("rtk-state-proxy-original");function lt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var WS=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function HI(e){return typeof e=="string"&&WS.test(e)}var hf=HI;l();s();u();c();var et=[];for(let e=0;e<256;++e)et.push((e+256).toString(16).slice(1));function zS(e,t=0){return(et[e[t+0]]+et[e[t+1]]+et[e[t+2]]+et[e[t+3]]+"-"+et[e[t+4]]+et[e[t+5]]+"-"+et[e[t+6]]+et[e[t+7]]+"-"+et[e[t+8]]+et[e[t+9]]+"-"+et[e[t+10]]+et[e[t+11]]+et[e[t+12]]+et[e[t+13]]+et[e[t+14]]+et[e[t+15]]).toLowerCase()}l();s();u();c();var Sf,WI=new Uint8Array(16);function Cf(){if(!Sf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Sf=crypto.getRandomValues.bind(crypto)}return Sf(WI)}l();s();u();c();l();s();u();c();var zI=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Af={randomUUID:zI};function YI(e,t,r){e=e||{};let n=e.random??e.rng?.()??Cf();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let a=0;a<16;++a)t[r+a]=n[a];return t}return zS(n)}function KI(e,t,r){return Af.randomUUID&&!t&&!e?Af.randomUUID():YI(e,t,r)}var xf=KI;l();s();u();c();function YS(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}function JI({config:e,environment:t,event:r,listenerManager:n}){let{url:a,token:o,mode:d}=e;d!=="disabled"&&(n.call(r),t.send(a,o,r))}var KS="visitorId";function XI(e){return{getClientId:()=>{let t=e.get(),r=t.storage,n=r.getItem(KS),a=n&&hf(n)?n:t.generateUUID();return r.setItem(KS,a),a}}}var tC="1.2.15",Ff=128,rC=192,JS=224,XS=240,ZI=248;function ek(e){return(e&ZI)===XS?4:(e&XS)===JS?3:(e&JS)===rC?2:1}function tk(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let n=Number.parseInt(e.substring(r-2,r),16);if((n&Ff)!=Ff)break;if(r-=3,(n&rC)!=Ff){t-r>=ek(n)*3&&(r=t);break}}return e.substring(0,r)}function rk(e){let{trackingId:t}=e;return{trackingId:t}}function nk(e){return(e.source||[]).concat([`relay@${tC}`])}function nC(e,t,r,n){let{getReferrer:a,getLocation:o,getUserAgent:d}=r,p=rk(t),m=n.getClientId();return Object.freeze({type:e,config:p,ts:Date.now(),source:nk(t),clientId:m,userAgent:d(),referrer:ZS(a()),location:ZS(o())})}function ZS(e){return e!==null?tk(e,1024):null}function ak(e,t,r,n,a){return{...t,meta:nC(e,r,n,a)}}var ok="*";function ik(){let e=[];function t({type:m,callback:f}){return e.findIndex(S=>S.type===m&&S.callback===f)}function r(m,f){return m.type==="*"||f===m.type}function n(m){return t(m)<0&&e.push(m),()=>p(m.type,m.callback)}function a(m){e.forEach(f=>{if(r(f,m.meta.type))try{f.callback(m)}catch(S){console.error(S)}})}function o(m){if(m===ok)e.length=0;else for(let f=e.length-1;f>=0;f--)e[f].type===m&&e.splice(f,1)}function d(m){let f=t(m);f>=0&&e.splice(f,1)}function p(m,f){f?d({type:m,callback:f}):o(m)}return{add:n,call:a,remove:p}}function eC({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source},...!!n.environment&&{environment:n.environment}})}function sk(e){let t=eC(e);return{get:()=>t,update:r=>{t=eC({...t,...r})}}}var Rf=ck();function ck(){let e="coveo_",t=r=>{let n=r.split(".").slice(-2);return n.length==2?n.join("."):""};return{getItem(r){let n=`${e}${r}=`,a=document.cookie.split(";");for(let o of a){let d=o.replace(/^\s+/,"");if(d.lastIndexOf(n,0)===0)return d.substring(n.length,d.length)}return null},setItem(r,n,a){let o=t(window.location.hostname),d=`;expires=${new Date(new Date().getTime()+a).toUTCString()}`,p=o?`;domain=${o}`:"";document.cookie=`${e}${r}=${n}${d}${p};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function uk(){return{getItem(e){return Rf.getItem(e)||localStorage.getItem(e)},removeItem(e){Rf.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),Rf.setItem(e,t,31556952e3)}}}function lk(){let e=document.referrer;return e===""?null:e}function bf(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(YS().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>lk(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>xf(),storage:uk()}}function dk(){try{let e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return e instanceof DOMException&&e.name==="QuotaExceededError"&&localStorage&&localStorage.length!==0}}function pk(){return{getItem(){return null},removeItem(){},setItem(){}}}function mk(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:pk()}}function fk(e){let t=e.get().mode!=="disabled",r=e.get().environment,n=mk();return t&&r?{storage:n.storage,...r,runtime:"custom"}:t&&gk()&&dk()?bf():n}function gk(){try{return typeof window=="object"}catch{return!1}}function yk(e){return{get:()=>Object.freeze(fk(e))}}function aC(e){let t=sk(e),r=ik(),n=yk(t),a=XI(n);return{emit:(o,d)=>{let p=t.get(),m=n.get(),f=ak(o,d,p,m,a);return JI({config:p,environment:m,event:f,listenerManager:r})},getMeta:o=>nC(o,t.get(),n.get(),a),on:(o,d)=>r.add({type:o,callback:d}),off:(o,d)=>r.remove(o,d),updateConfig:o=>t.update(o),version:tC}}l();s();u();c();function oC(){return typeof window<"u"&&typeof document<"u"}l();s();u();c();l();s();u();c();var pn="3.45.0",iC=["@coveo/atomic","@coveo/quantic"];var mn=we(e=>e.source,e=>Object.entries(e).map(([t,r])=>`${t}@${r}`).concat(`@coveo/headless@${pn}`));var oc=we(e=>e.configuration.organizationId,e=>e.configuration.environment,e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>mn(e.configuration.analytics),(e,t)=>t,(e,t,r,{trackingId:n,apiBaseUrl:a,enabled:o},d,p)=>{let m=Sk(p);return aC({mode:o?"emit":"disabled",url:a??pu(e,t),token:r,trackingId:n??null,source:d,environment:m})}),hk={generateUUID:()=>"",getLocation:()=>null,getReferrer:()=>null,getUserAgent:()=>null,send:()=>{},storage:{getItem:()=>null,setItem:()=>{},removeItem:()=>{}}},Sk=e=>{if(!e)return;let t=e();return{...oC()?bf():hk,generateUUID:()=>t.clientId,getLocation:()=>t.location,getReferrer:()=>t.referrer,getUserAgent:()=>t.userAgent}};l();s();u();c();l();s();u();c();function Qr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function V(e,t,r,n){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function p(S){try{f(n.next(S))}catch(C){d(C)}}function m(S){try{f(n.throw(S))}catch(C){d(C)}}function f(S){S.done?o(S.value):a(S.value).then(p,m)}f((n=n.apply(e,t||[])).next())})}var he;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(he||(he={}));function Pf(){return typeof window<"u"}function Qf(){return typeof navigator<"u"}function Co(){return typeof document<"u"}function Ef(){try{return typeof localStorage<"u"}catch{return!1}}function Ck(){try{return typeof sessionStorage<"u"}catch{return!1}}function AC(){return Qf()&&navigator.cookieEnabled}var Ak=[he.click,he.custom,he.search,he.view],xk=(e,t)=>Ak.indexOf(e)!==-1?Object.assign({language:Co()?document.documentElement.lang:"unknown",userAgent:Qf()?navigator.userAgent:"unknown"},t):t,sc=class e{static set(t,r,n){var a,o,d,p;n&&(o=new Date,o.setTime(o.getTime()+n)),p=window.location.hostname,p.indexOf(".")===-1?sC(t,r,o):(d=p.split("."),a=d[d.length-2]+"."+d[d.length-1],sC(t,r,o,a))}static get(t){for(var r=t+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){var o=n[a];if(o=o.replace(/^\s+/,""),o.lastIndexOf(r,0)===0)return o.substring(r.length,o.length)}return null}static erase(t){e.set(t,"",-1)}};function sC(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function Fk(){return Ef()?localStorage:AC()?new cc:Ck()?sessionStorage:new xo}var cc=class e{getItem(t){return sc.get(`${e.prefix}${t}`)}removeItem(t){sc.erase(`${e.prefix}${t}`)}setItem(t,r,n){sc.set(`${e.prefix}${t}`,r,n)}};cc.prefix="coveo_";var If=class{constructor(){this.cookieStorage=new cc}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3)}},xo=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},qu="__coveo.analytics.history",Rk=20,bk=1e3*60,vk=75,Vu=class{constructor(t){this.store=t||Fk()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return V(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return V(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(qu);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return V(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(qu);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(qu,JSON.stringify(t.slice(0,Rk)))}catch{}}clear(){try{this.store.removeItem(qu)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,a)=>(a.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,vk)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>bk:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:a,value:o}=r;return{name:n,time:a,value:o}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:a}=t;return r&&typeof a=="string"&&r.toLowerCase()==="query"&&a.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};var wk=(e,t)=>V(void 0,void 0,void 0,function*(){return e===he.view?(yield Pk(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),Pk=e=>V(void 0,void 0,void 0,function*(){let t=new Vu,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),ju,Ek=new Uint8Array(16);function Ik(){if(!ju&&(ju=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ju))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ju(Ek)}var kk=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Nu(e){return typeof e=="string"&&kk.test(e)}var tt=[];for(let e=0;e<256;++e)tt.push((e+256).toString(16).slice(1));function xC(e,t=0){return tt[e[t+0]]+tt[e[t+1]]+tt[e[t+2]]+tt[e[t+3]]+"-"+tt[e[t+4]]+tt[e[t+5]]+"-"+tt[e[t+6]]+tt[e[t+7]]+"-"+tt[e[t+8]]+tt[e[t+9]]+"-"+tt[e[t+10]]+tt[e[t+11]]+tt[e[t+12]]+tt[e[t+13]]+tt[e[t+14]]+tt[e[t+15]]}function Tk(e){if(!Nu(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function Ok(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var qk="6ba7b810-9dad-11d1-80b4-00c04fd430c8",jk="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Dk(e,t,r){function n(a,o,d,p){var m;if(typeof a=="string"&&(a=Ok(a)),typeof o=="string"&&(o=Tk(o)),((m=o)===null||m===void 0?void 0:m.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+a.length);if(f.set(o),f.set(a,o.length),f=r(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,d){p=p||0;for(let S=0;S<16;++S)d[p+S]=f[S];return d}return xC(f)}try{n.name=e}catch{}return n.DNS=qk,n.URL=jk,n}var Vk=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),cC={randomUUID:Vk};function fa(e,t,r){if(cC.randomUUID&&!t&&!e)return cC.randomUUID();e=e||{};let n=e.random||(e.rng||Ik)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let a=0;a<16;++a)t[r+a]=n[a];return t}return xC(n)}function Nk(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function vf(e,t){return e<<t|e>>>32-t}function Mk(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let d=unescape(encodeURIComponent(e));e=[];for(let p=0;p<d.length;++p)e.push(d.charCodeAt(p))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,a=Math.ceil(n/16),o=new Array(a);for(let d=0;d<a;++d){let p=new Uint32Array(16);for(let m=0;m<16;++m)p[m]=e[d*64+m*4]<<24|e[d*64+m*4+1]<<16|e[d*64+m*4+2]<<8|e[d*64+m*4+3];o[d]=p}o[a-1][14]=(e.length-1)*8/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=(e.length-1)*8&4294967295;for(let d=0;d<a;++d){let p=new Uint32Array(80);for(let A=0;A<16;++A)p[A]=o[d][A];for(let A=16;A<80;++A)p[A]=vf(p[A-3]^p[A-8]^p[A-14]^p[A-16],1);let m=r[0],f=r[1],S=r[2],C=r[3],x=r[4];for(let A=0;A<80;++A){let F=Math.floor(A/20),v=vf(m,5)+Nk(F,f,S,C)+x+t[F]+p[A]>>>0;x=C,C=S,S=vf(f,30)>>>0,f=m,m=v}r[0]=r[0]+m>>>0,r[1]=r[1]+f>>>0,r[2]=r[2]+S>>>0,r[3]=r[3]+C>>>0,r[4]=r[4]+x>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Lk=Dk("v5",80,Mk),uC=Lk,FC="2.30.52",lC=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,ic={pageview:"pageview",event:"event"},Mu=class{constructor({client:t,uuidGenerator:r=fa}){this.client=t,this.uuidGenerator=r}},kf=class extends Mu{constructor({client:t,uuidGenerator:r=fa}){super({client:t,uuidGenerator:r}),this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=lC(window.location),this.lastReferrer=Co()?document.referrer:"",this.addHooks()}getApi(t){switch(t){case"setAction":return this.setAction;default:return null}}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:Co()?document.title:"",encoding:Co()?document.characterSet:"UTF-8"},n={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},a={language:navigator.language,userAgent:navigator.userAgent},o={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},o),n),a),r)}updateLocationForNextPageView(t,r){let{pageViewId:n,referrer:a,location:o}=this.getNextValues(t,r);this.lastReferrer=a,this.pageViewId=n,this.currentLocation=o,t===ic.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===ic.pageview?this.nextPageViewId:this.pageViewId,referrer:t===ic.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===ic.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=a=>a.replace(/^\/?(.*)$/,"/$1");return`${(a=>a.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return lC(window.location)}},fn=class e{constructor(t,r){if(!Nu(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let n=new URL(t);return r.some(a=>new RegExp(a.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(n.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,a]=r;if(n.length!==32||isNaN(parseInt(a)))return null;let o=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return Nu(o)?new e(o,Number.parseInt(a)*1e3):null}};fn.cvo_cid="cvo_cid";fn.expirationTime=120;var Tf=class extends Mu{constructor({client:t,uuidGenerator:r=fa}){super({client:t,uuidGenerator:r})}getApi(t){switch(t){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(t){return V(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(t),n=yield this.client.getCurrentVisitorId();return r.searchParams.set(fn.cvo_cid,new fn(n,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(t){this.client.setAcceptedLinkReferrers(t)}};Tf.Id="link";var Tt=Object.keys;function Du(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var wf=128,RC=192,dC=224,pC=240;function Qk(e){return(e&248)===pC?4:(e&pC)===dC?3:(e&dC)===RC?2:1}function Uk(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let n=Number.parseInt(e.substring(r-2,r),16);if((n&wf)!=wf)break;if(r-=3,(n&RC)!=wf){t-r>=Qk(n)*3&&(r=t);break}}return e.substring(0,r)}var Of={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},_k=Tt(Of).map(e=>Of[e]),Bk=[..._k].join("|"),Gk=new RegExp(`^(${Bk}$)`),$k={svcAction:"svc_action",svcActionData:"svc_action_data"},Hk=e=>Tt(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let n=Of[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})},{}),Wk=e=>Gk.test(e),zk=[Wk],mC={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},fC={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},rt={action:"pa",list:"pal",listSource:"pls"},Lu={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Yk=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],qf={id:"quoteId",affiliation:"quoteAffiliation"},jf={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Kk={add:rt,bookmark_add:rt,bookmark_remove:rt,click:rt,checkout:rt,checkout_option:rt,detail:rt,impression:rt,remove:rt,refund:Object.assign(Object.assign({},rt),Lu),purchase:Object.assign(Object.assign({},rt),Lu),quickview:rt,quote:Object.assign(Object.assign({},rt),qf),review:Object.assign(Object.assign({},rt),jf)},Jk=Tt(mC).map(e=>mC[e]),Xk=Tt(fC).map(e=>fC[e]),Zk=Tt(rt).map(e=>rt[e]),eT=Tt(Lu).map(e=>Lu[e]),tT=Tt(jf).map(e=>jf[e]),rT=Tt(qf).map(e=>qf[e]),nT=[...Jk,"custom"].join("|"),aT=[...Xk,"custom"].join("|"),bC="(pr[0-9]+)",vC="(il[0-9]+pi[0-9]+)",oT=new RegExp(`^${bC}(${nT})$`),iT=new RegExp(`^(${vC}(${aT}))|(il[0-9]+nm)$`),sT=new RegExp(`^(${Zk.join("|")})$`),cT=new RegExp(`^(${eT.join("|")})$`),uT=new RegExp(`^${bC}custom$`),lT=new RegExp(`^${vC}custom$`),dT=new RegExp(`^(${[...Yk,...tT,...rT].join("|")})$`),pT=e=>oT.test(e),mT=e=>iT.test(e),fT=e=>sT.test(e),gT=e=>cT.test(e),yT=e=>dT.test(e),hT=[mT,pT,fT,gT,yT],ST=[uT,lT],CT={anonymizeIp:"aip"},AT={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},xT={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},FT=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],RT=Object.assign(Object.assign(Object.assign(Object.assign({},CT),AT),xT),FT.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),Df=Object.assign(Object.assign({},RT),$k),bT=e=>{let t=!!e.action&&Kk[e.action]||{};return Tt(e).reduce((r,n)=>{let a=t[n]||Df[n]||n;return Object.assign(Object.assign({},r),{[a]:e[n]})},{})},vT=Tt(Df).map(e=>Df[e]),wT=e=>vT.indexOf(e)!==-1,PT=e=>e==="custom",ET=e=>[...hT,...zk,wT,PT].some(t=>t(e)),IT=e=>Tt(e).reduce((t,r)=>{let n=kT(r);return n?Object.assign(Object.assign({},t),TT(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),kT=e=>{let t;return[...ST].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t}),t},TT=(e,t)=>Tt(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),Vf=class{constructor(t){this.opts=t}sendEvent(t,r){return V(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:n,preprocessRequest:a}=this.opts,o=yield this.getQueryParamsForEventType(t),{url:d,payload:p}=yield this.preProcessRequestAsPotentialJSONString(`${n}/analytics/${t}?${o}`,r,a),m=this.encodeForEventType(t,p),f=new Blob([m],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(d,f)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,n){return V(this,void 0,void 0,function*(){let a=t,o=r;if(n){let d=yield n({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:p,body:m}=d;a=p||t;try{o=JSON.parse(m)}catch(f){console.error("Unable to process the request body as a JSON string",f)}}return{payload:o,url:a}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeEventToJson(t,r):this.encodeEventToJson(t,r,this.opts.token)}getQueryParamsForEventType(t){return V(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:n}=this.opts,a=yield n.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",a?`visitorId=${a}`:"","discardVisitInfo=true"].filter(o=>!!o).join("&")})}isEventTypeLegacy(t){return[he.click,he.custom,he.search,he.view].indexOf(t)!==-1}encodeEventToJson(t,r,n){let a=`${t}Event=${encodeURIComponent(JSON.stringify(r))}`;return n&&(a=`access_token=${encodeURIComponent(n)}&${a}`),a}},Nf=class{sendEvent(t,r){return V(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return V(this,void 0,void 0,function*(){return Promise.resolve()})}},gC=g.fetch,Qu=class{constructor(t){this.opts=t}sendEvent(t,r){return V(this,void 0,void 0,function*(){let{baseUrl:n,visitorIdProvider:a,preprocessRequest:o}=this.opts,d=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",p={url:`${n}/analytics/${t}${d}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},m=Object.assign(Object.assign({},p),o?yield o(p,"analyticsFetch"):{}),{url:f}=m,S=Qr(m,["url"]),C;try{C=yield gC(f,S)}catch(x){console.error("An error has occured when sending the event.",x);return}if(C.ok){let x=yield C.json();return x.visitorId&&a.setCurrentVisitorId(x.visitorId),x}else{try{C.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,C,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return V(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield gC(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(t){return[he.click,he.custom,he.search,he.view].indexOf(t)!==-1}getVisitorIdParam(){return V(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},Mf=class{constructor(t,r){Ef()&&AC()?this.storage=new If:Ef()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new xo),this.client=new Qu(t),this.beaconClient=new Vf(t),window.addEventListener("beforeunload",()=>{let n=r();for(let{eventType:a,payload:o}of n)this.beaconClient.sendEvent(a,o)})}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Lf=class{constructor(t,r){this.storage=r||new xo,this.client=new Qu(t)}getClientDependingOnEventType(t){return this.client}},Uu=class{constructor(){this.storage=new xo,this.client=new Nf}getClientDependingOnEventType(t){return this.client}},OT="xx",qT=e=>e?.startsWith(OT)||!1,jT=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function DT(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var VT=["1",1,"yes",!0];function _u(){let e=[];return Pf()&&e.push(window.doNotTrack),Qf()&&e.push(navigator.doNotTrack,navigator.msDoNotTrack,navigator.globalPrivacyControl),e.some(t=>VT.indexOf(t)!==-1)}var wC="v15",PC={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function NT(e=PC.default,t=wC,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var MT="38824e1f-37f5-42d3-8372-a4b8fa9df946",nr=class{get defaultOptions(){return{endpoint:PC.default,isCustomEndpoint:!1,token:"",version:wC,beforeSendHooks:[],afterSendHooks:[]}}get version(){return FC}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[wk,xk].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};_u()?this.runtime=new Uu:this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),this.addEventTypeMapping(he.view,{newEventType:he.view,addClientIdParameter:!0}),this.addEventTypeMapping(he.click,{newEventType:he.click,addClientIdParameter:!0}),this.addEventTypeMapping(he.custom,{newEventType:he.custom,addClientIdParameter:!0}),this.addEventTypeMapping(he.search,{newEventType:he.search,addClientIdParameter:!0})}initRuntime(t){return Pf()&&Co()?new Mf(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(DT()&&console.warn(jT),new Lf(t))}get storage(){return this.runtime.storage}determineVisitorId(){return V(this,void 0,void 0,function*(){try{return Pf()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||fa()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),fa()}})}getCurrentVisitorId(){return V(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return V(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}setClientId(t,r){return V(this,void 0,void 0,function*(){if(Nu(t))this.setCurrentVisitorId(t.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(uC(t,uC(r,MT)))}})}getParameters(t,...r){return V(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return V(this,void 0,void 0,function*(){let n=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,n)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(fa()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}extractClientIdFromLink(t){if(_u())return null;try{let r=new URL(t).searchParams.get(fn.cvo_cid);if(r==null)return null;let n=fn.fromString(r);return!n||!Co()||!n.validate(document.referrer,this.acceptedLinkReferrers)?null:n.clientId}catch{}return null}resolveParameters(t,...r){return V(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:n=[],addVisitorIdParameter:a=!1,usesMeasurementProtocol:o=!1,addClientIdParameter:d=!1}=this.eventTypeMapping[t]||{};return yield[A=>n.length>0?this.parseVariableArgumentsPayload(n,A):A[0],A=>V(this,void 0,void 0,function*(){return Object.assign(Object.assign({},A),{visitorId:a?yield this.getCurrentVisitorId():""})}),A=>V(this,void 0,void 0,function*(){return d?Object.assign(Object.assign({},A),{clientId:yield this.getCurrentVisitorId()}):A}),A=>o?this.ensureAnonymousUserWhenUsingApiKey(A):A,A=>this.beforeSendHooks.reduce((F,v)=>V(this,void 0,void 0,function*(){let b=yield F;return yield v(t,b)}),A)].reduce((A,F)=>V(this,void 0,void 0,function*(){let v=yield A;return yield F(v)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return V(this,void 0,void 0,function*(){let{usesMeasurementProtocol:n=!1}=this.eventTypeMapping[t]||{};return yield[C=>this.setTrackingIdIfTrackingIdNotPresent(C),C=>this.removeEmptyPayloadValues(C,t),C=>this.validateParams(C,t),C=>n?bT(C):C,C=>n?this.removeUnknownParameters(C):C,C=>n?this.processCustomParameters(C):this.mapCustomParametersToCustomData(C)].reduce((C,x)=>V(this,void 0,void 0,function*(){let A=yield C;return yield x(A)}),Promise.resolve(r))})}makeEvent(t,...r){return V(this,void 0,void 0,function*(){let{newEventType:n=t}=this.eventTypeMapping[t]||{},a=yield this.resolveParameters(t,...r),o=yield this.resolvePayloadForParameters(t,a);return{eventType:n,payload:o,log:d=>V(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:n,payload:Object.assign(Object.assign({},o),d)}),yield Promise.all(this.afterSendHooks.map(p=>p(t,Object.assign(Object.assign({},a),d)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return V(this,void 0,void 0,function*(){return(yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return V(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:n}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,n)}})}clear(){this.storage.removeItem("visitorId"),new Vu().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(t){return V(this,void 0,void 0,function*(){return this.makeEvent(he.search,t)})}sendSearchEvent(t){return V(this,void 0,void 0,function*(){var{searchQueryUid:r}=t,n=Qr(t,["searchQueryUid"]);return(yield this.makeSearchEvent(n)).log({searchQueryUid:r})})}makeClickEvent(t){return V(this,void 0,void 0,function*(){return this.makeEvent(he.click,t)})}sendClickEvent(t){return V(this,void 0,void 0,function*(){var{searchQueryUid:r}=t,n=Qr(t,["searchQueryUid"]);return(yield this.makeClickEvent(n)).log({searchQueryUid:r})})}makeCustomEvent(t){return V(this,void 0,void 0,function*(){return this.makeEvent(he.custom,t)})}sendCustomEvent(t){return V(this,void 0,void 0,function*(){var{lastSearchQueryUid:r}=t,n=Qr(t,["lastSearchQueryUid"]);return(yield this.makeCustomEvent(n)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return V(this,void 0,void 0,function*(){return this.makeEvent(he.view,t)})}sendViewEvent(t){return V(this,void 0,void 0,function*(){return(yield this.makeViewEvent(t)).log({})})}getVisit(){return V(this,void 0,void 0,function*(){let r=yield(yield y(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return V(this,void 0,void 0,function*(){return yield(yield y(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let n={};for(let a=0,o=r.length;a<o;a++){let d=r[a];if(typeof d=="string")n[t[a]]=d;else if(typeof d=="object")return Object.assign(Object.assign({},n),d)}return n}isKeyAllowedEmpty(t,r){return({[he.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let n=a=>typeof a<"u"&&a!==null&&a!=="";return Object.keys(t).filter(a=>this.isKeyAllowedEmpty(r,a)||n(t[a])).reduce((a,o)=>Object.assign(Object.assign({},a),{[o]:t[o]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(n=>{if(ET(n))return!0;console.log(n,"is not processed by coveoua")}).reduce((n,a)=>Object.assign(Object.assign({},n),{[a]:t[a]}),{})}processCustomParameters(t){let{custom:r}=t,n=Qr(t,["custom"]),a={};r&&Du(r)&&(a=this.lowercaseKeys(r));let o=IT(n);return Object.assign(Object.assign({},a),o)}mapCustomParametersToCustomData(t){let{custom:r}=t,n=Qr(t,["custom"]);if(r&&Du(r)){let a=this.lowercaseKeys(r);return Object.assign(Object.assign({},n),{customData:Object.assign(Object.assign({},a),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),n={};return r.forEach(a=>{n[a.toLowerCase()]=t[a]}),n}validateParams(t,r){let{anonymizeIp:n}=t,a=Qr(t,["anonymizeIp"]);return n!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${n}`.toLowerCase())==-1&&(a.anonymizeIp=1),(r==he.view||r==he.click||r==he.search||r==he.custom)&&(a.originLevel3=this.limit(a.originLevel3,1024)),r==he.view&&(a.location=this.limit(a.location,1024)),(r=="pageview"||r=="event")&&(a.referrer=this.limit(a.referrer,2048),a.location=this.limit(a.location,2048),a.page=this.limit(a.page,2048)),a}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,n=Qr(t,["userId"]);return qT(this.options.token)&&!r?(n.userId="anonymous",n):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,n=Qr(t,["trackingId"]);return r?t:(n.hasOwnProperty("custom")&&Du(n.custom)&&(n.custom.hasOwnProperty("context_website")||n.custom.hasOwnProperty("siteName"))&&(n.trackingId=n.custom.context_website||n.custom.siteName),n.hasOwnProperty("customData")&&Du(n.customData)&&(n.customData.hasOwnProperty("context_website")||n.customData.hasOwnProperty("siteName"))&&(n.trackingId=n.customData.context_website||n.customData.siteName),n)}limit(t,r){return typeof t=="string"?Uk(t,r):t}get baseUrl(){return NT(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Ur;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(Ur||(Ur={}));var M;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2",e.generatedAnswerCitationClick="generatedAnswerCitationClick",e.generatedAnswerCitationDocumentAttach="generatedAnswerCitationDocumentAttach"})(M||(M={}));var yC={[M.triggerNotify]:"queryPipelineTriggers",[M.triggerExecute]:"queryPipelineTriggers",[M.triggerQuery]:"queryPipelineTriggers",[M.triggerRedirect]:"queryPipelineTriggers",[M.queryErrorBack]:"errors",[M.queryErrorClear]:"errors",[M.queryErrorRetry]:"errors",[M.pagerNext]:"getMoreResults",[M.pagerPrevious]:"getMoreResults",[M.pagerNumber]:"getMoreResults",[M.pagerResize]:"getMoreResults",[M.pagerScrolling]:"getMoreResults",[M.facetSearch]:"facet",[M.facetShowLess]:"facet",[M.facetShowMore]:"facet",[M.recommendation]:"recommendation",[M.likeSmartSnippet]:"smartSnippet",[M.dislikeSmartSnippet]:"smartSnippet",[M.expandSmartSnippet]:"smartSnippet",[M.collapseSmartSnippet]:"smartSnippet",[M.openSmartSnippetFeedbackModal]:"smartSnippet",[M.closeSmartSnippetFeedbackModal]:"smartSnippet",[M.sendSmartSnippetReason]:"smartSnippet",[M.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[M.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[M.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[M.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[M.clearRecentQueries]:"recentQueries",[M.recentResultClick]:"recentlyClickedDocuments",[M.clearRecentResults]:"recentlyClickedDocuments",[M.showLessFoldedResults]:"folding",[M.caseDetach]:"case",[M.likeGeneratedAnswer]:"generatedAnswer",[M.dislikeGeneratedAnswer]:"generatedAnswer",[M.openGeneratedAnswerSource]:"generatedAnswer",[M.generatedAnswerStreamEnd]:"generatedAnswer",[M.generatedAnswerSourceHover]:"generatedAnswer",[M.generatedAnswerCopyToClipboard]:"generatedAnswer",[M.generatedAnswerHideAnswers]:"generatedAnswer",[M.generatedAnswerShowAnswers]:"generatedAnswer",[M.generatedAnswerExpand]:"generatedAnswer",[M.generatedAnswerCollapse]:"generatedAnswer",[M.generatedAnswerFeedbackSubmit]:"generatedAnswer",[M.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[Ur.expandToFullUI]:"interface",[Ur.openUserActions]:"User Actions",[Ur.showPrecedingSessions]:"User Actions",[Ur.showFollowingSessions]:"User Actions",[Ur.clickViewedDocument]:"User Actions",[Ur.clickPageView]:"User Actions",[Ur.createArticle]:"createArticle"},Fo=class{constructor(){this.runtime=new Uu,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(he.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(he.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(he.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(he.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return FC}};function LT(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function QT(e){return e.map(t=>t.replace(/;/g,""))}function EC(e){let r=e.join(";");return r.length<=256?r:EC(e.slice(1))}var hC=e=>{let t=QT(e),r=LT(t);return EC(r)};function SC(e){let t=typeof e.partialQueries=="string"?e.partialQueries:hC(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:hC(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Bu=class{constructor(t,r){this.opts=t,this.provider=r;let n=t.enableAnalytics===!1||_u();this.coveoAnalyticsClient=n?new Fo:new nr(t)}disable(){this.coveoAnalyticsClient=new Fo}enable(){this.coveoAnalyticsClient=new nr(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(M.interfaceLoad)}logInterfaceLoad(){return V(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(M.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return V(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(M.recommendation)}logRecommendation(){return V(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(M.recommendationOpen,t,r)}logRecommendationOpen(t,r){return V(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(M.staticFilterClearAll,t)}logStaticFilterClearAll(t){return V(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(M.staticFilterSelect,t)}logStaticFilterSelect(t){return V(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(M.staticFilterDeselect,t)}logStaticFilterDeselect(t){return V(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(M.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return V(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(M.interfaceChange,t)}logInterfaceChange(t){return V(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(M.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return V(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(M.didyoumeanClick)}logDidYouMeanClick(){return V(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(M.resultsSort,t)}logResultsSort(t){return V(this,void 0,void 0,function*(){return(yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(M.searchboxSubmit)}logSearchboxSubmit(){return V(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(M.searchboxClear)}logSearchboxClear(){return V(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(M.searchboxAsYouType)}logSearchboxAsYouType(){return V(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(M.breadcrumbFacet,t)}logBreadcrumbFacet(t){return V(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(M.breadcrumbResetAll)}logBreadcrumbResetAll(){return V(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(M.documentQuickview,t,r)}logDocumentQuickview(t,r){return V(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(M.documentOpen,t,r)}logDocumentOpen(t,r){return V(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(M.omniboxAnalytics,SC(t))}logOmniboxAnalytics(t){return V(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(M.omniboxFromLink,SC(t))}logOmniboxFromLink(t){return V(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(M.searchFromLink)}logSearchFromLink(){return V(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(M.triggerNotify,t)}logTriggerNotify(t){return V(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(M.triggerExecute,t)}logTriggerExecute(t){return V(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(M.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return V(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(M.undoTriggerQuery,t)}logUndoTriggerQuery(t){return V(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(M.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return V(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(M.pagerResize,t)}logPagerResize(t){return V(this,void 0,void 0,function*(){return(yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(M.pagerNumber,t)}logPagerNumber(t){return V(this,void 0,void 0,function*(){return(yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(M.pagerNext,t)}logPagerNext(t){return V(this,void 0,void 0,function*(){return(yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(M.pagerPrevious,t)}logPagerPrevious(t){return V(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(M.pagerScrolling)}logPagerScrolling(){return V(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(M.facetClearAll,t)}logFacetClearAll(t){return V(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(M.facetSearch,t)}logFacetSearch(t){return V(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(M.facetSelect,t)}logFacetSelect(t){return V(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(M.facetDeselect,t)}logFacetDeselect(t){return V(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(M.facetExclude,t)}logFacetExclude(t){return V(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(M.facetUnexclude,t)}logFacetUnexclude(t){return V(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(M.facetSelectAll,t)}logFacetSelectAll(t){return V(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(M.facetUpdateSort,t)}logFacetUpdateSort(t){return V(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(M.facetShowMore,t)}logFacetShowMore(t){return V(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(M.facetShowLess,t)}logFacetShowLess(t){return V(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(M.queryError,t)}logQueryError(t){return V(this,void 0,void 0,function*(){return(yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return V(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(M.queryErrorBack);return{description:t.description,log:()=>V(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(M.queryErrorBack)})}})}logQueryErrorBack(){return V(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return V(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(M.queryErrorRetry);return{description:t.description,log:()=>V(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(M.queryErrorRetry)})}})}logQueryErrorRetry(){return V(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return V(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(M.queryErrorClear);return{description:t.description,log:()=>V(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(M.queryErrorClear)})}})}logQueryErrorClear(){return V(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(M.likeSmartSnippet)}logLikeSmartSnippet(){return V(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(M.dislikeSmartSnippet)}logDislikeSmartSnippet(){return V(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(M.expandSmartSnippet)}logExpandSmartSnippet(){return V(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(M.collapseSmartSnippet)}logCollapseSmartSnippet(){return V(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(M.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return V(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(M.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return V(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(M.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return V(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(M.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return V(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(M.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return V(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(M.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return V(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(M.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return V(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(M.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return V(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(M.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(M.copyToClipboard,t,r)}logCopyToClipboard(t,r){return V(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return V(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(M.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return V(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(M.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return V(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(M.recentQueryClick)}logRecentQueryClick(){return V(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(M.clearRecentQueries)}logClearRecentQueries(){return V(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(M.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return V(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(M.clearRecentResults)}logClearRecentResults(){return V(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(M.noResultsBack)}logNoResultsBack(){return V(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(M.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return V(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(M.showLessFoldedResults)}logShowLessFoldedResults(){return V(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var n;return{actionCause:r,customData:(n=t.payload)===null||n===void 0?void 0:n.customData}}makeCustomEvent(t,r){return V(this,arguments,void 0,function*(n,a,o=yC[n]){this.coveoAnalyticsClient.getParameters;let d=Object.assign(Object.assign({},this.provider.getBaseMetadata()),a),p=Object.assign(Object.assign({},yield this.getBaseEventRequest(d)),{eventType:o,eventValue:n}),m=yield this.coveoAnalyticsClient.makeCustomEvent(p);return{description:this.makeEventDescription(m,n),log:({searchUID:f})=>m.log({lastSearchQueryUid:f})}})}logCustomEvent(t,r){return V(this,arguments,void 0,function*(n,a,o=yC[n]){return(yield this.makeCustomEvent(n,a,o)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,n){return V(this,void 0,void 0,function*(){let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),n),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(a)),{eventType:r,eventValue:t}),d=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(d,t),log:({searchUID:p})=>d.log({lastSearchQueryUid:p})}})}logCustomEventWithType(t,r,n){return V(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(t,r,n)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return V(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return V(this,void 0,void 0,function*(){let n=yield this.getBaseSearchEventRequest(t,r),a=yield this.coveoAnalyticsClient.makeSearchEvent(n);return{description:this.makeEventDescription(a,t),log:({searchUID:o})=>a.log({searchQueryUid:o})}})}makeClickEvent(t,r,n,a){return V(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),a))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),d=yield this.coveoAnalyticsClient.makeClickEvent(o);return{description:this.makeEventDescription(d,t),log:({searchUID:p})=>d.log({searchQueryUid:p})}})}logClickEvent(t,r,n,a){return V(this,void 0,void 0,function*(){return(yield this.makeClickEvent(t,r,n,a)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){return V(this,void 0,void 0,function*(){var n,a;return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(a=(n=this.provider).getGeneratedAnswerMetadata)===null||a===void 0?void 0:a.call(n)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return V(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof nr?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(M.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return V(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(M.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return V(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(M.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return V(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCitationClick(t,r){return this.makeClickEvent(M.generatedAnswerCitationClick,Object.assign(Object.assign({},t),{documentPosition:1}),{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logGeneratedAnswerCitationClick(t,r){return V(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCitationClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(M.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return V(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(M.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return V(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(M.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return V(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(M.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return V(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(t){return this.makeCustomEvent(M.generatedAnswerExpand,t)}logGeneratedAnswerExpand(t){return V(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerExpand(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(t){return this.makeCustomEvent(M.generatedAnswerCollapse,t)}logGeneratedAnswerCollapse(t){return V(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCollapse(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(M.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return V(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmitV2(t){return this.makeCustomEvent(M.generatedAnswerFeedbackSubmitV2,t)}logGeneratedAnswerFeedbackSubmitV2(t){return V(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(M.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return V(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(M.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return V(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(M.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return V(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},Gu=Object.assign({},ic),CC=Object.keys(Gu).map(e=>Gu[e]),Ao=class extends kf{constructor({client:t,uuidGenerator:r=fa}){super({client:t,uuidGenerator:r}),this.ticket={}}getApi(t){let r=super.getApi(t);if(r!==null)return r;switch(t){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>CC.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(CC.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(Gu.pageview,{newEventType:he.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(Gu.event,{newEventType:he.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var n;let a=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((n=this.actionData)!==null&&n!==void 0?n:{}).length>0?{svcActionData:this.actionData}:{}),o=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},o),a),r)}getTicketPayload(){return Hk(this.ticket)}};Ao.Id="svc";var $u;(function(e){e.click="click",e.flowStart="flowStart"})($u||($u={}));var kt;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.documentSuggestionClick="documentSuggestionClick",e.documentSuggestionQuickview="documentSuggestionQuickview",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(kt||(kt={}));var Hu;(function(e){e.quit="Quit",e.solved="Solved"})(Hu||(Hu={}));var Wu=class{constructor(t,r){var n;this.options=t,this.provider=r;let a=((n=t.enableAnalytics)!==null&&n!==void 0?n:!0)&&!_u();this.coveoAnalyticsClient=a?new nr(t):new Fo,this.svc=new Ao({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient=new Fo,this.svc=new Ao({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new nr(this.options),this.svc=new Ao({client:this.coveoAnalyticsClient})}logEnterInterface(t){return this.svc.setAction(kt.enterInterface),this.svc.setTicket(t.ticket),this.sendFlowStartEvent()}logUpdateCaseField(t){return this.svc.setAction(kt.fieldUpdate,{fieldName:t.fieldName}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectFieldSuggestion(t){return this.svc.setAction(kt.fieldSuggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(t){return this.logClickEvent(kt.documentSuggestionClick,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logQuickviewDocumentSuggestion(t){return this.logClickEvent(kt.documentSuggestionQuickview,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logRateDocumentSuggestion(t){return this.svc.setAction(kt.suggestionRate,Object.assign({rate:t.rating},t.suggestion)),this.svc.setTicket(t.ticket),this.sendClickEvent()}logMoveToNextCaseStep(t){return this.svc.setAction(kt.nextCaseStep,{stage:t?.stage}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCancelled(t){return this.svc.setAction(kt.caseCancelled,{reason:Hu.quit}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseSolved(t){return this.svc.setAction(kt.caseSolved,{reason:Hu.solved}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCreated(t){return this.svc.setAction(kt.caseCreated),this.svc.setTicket(t.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",$u.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",$u.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}getBaseEventRequest(t){return V(this,void 0,void 0,function*(){var r,n;let a=Object.assign({},t);return Object.assign(Object.assign({},this.getOrigins()),{customData:a,language:(r=this.provider)===null||r===void 0?void 0:r.getLanguage(),anonymous:(n=this.provider)===null||n===void 0?void 0:n.getIsAnonymous(),clientId:yield this.getClientId()})})}getClientId(){return this.coveoAnalyticsClient instanceof nr?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getOrigins(){var t,r,n,a,o;return{originContext:(r=(t=this.provider)===null||t===void 0?void 0:t.getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:(n=this.provider)===null||n===void 0?void 0:n.getOriginLevel1(),originLevel2:(a=this.provider)===null||a===void 0?void 0:a.getOriginLevel2(),originLevel3:(o=this.provider)===null||o===void 0?void 0:o.getOriginLevel3()}}logClickEvent(t,r,n,a){return V(this,void 0,void 0,function*(){var o,d;let p=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),a))),{searchQueryUid:(d=(o=this.provider)===null||o===void 0?void 0:o.getSearchUID())!==null&&d!==void 0?d:"",actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(p)})}};l();s();u();c();l();s();u();c();var gn=()=>"default";var UT=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},ga=class{constructor(t){this.getState=t;Ce(this,"state");this.state=t()}getLanguage(){return UT(this.state)}getBaseMetadata(){let{context:t,configuration:r}=this.state,n=t?.contextValues||{},a={};for(let[o,d]of Object.entries(n)){let p=`context_${o}`;a[p]=d}return r.analytics.analyticsMode==="legacy"&&(a.coveoHeadlessVersion=pn),a}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||gn()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};l();s();u();c();var IC=e=>new nr(e).getCurrentVisitorId(),uc=(e,t)=>typeof t=="function"?(...r)=>{let n=_s(r[0]);try{return t.apply(t,r)}catch(a){return e.error(a,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,lc=(e,t)=>(...r)=>{let n=_s(r[1]);try{return t.apply(t,r)}catch(a){return e.error(a,"Error in analytics hook. Returning original request."),n}};var dc=class extends ga{getSearchUID(){return this.state.documentSuggestion?.status.lastResponseId??""}},kC=({logger:e,getState:t,analyticsClientMiddleware:r=(o,d)=>d,preprocessRequest:n,provider:a=new dc(t)})=>{let o=t(),d=o.configuration.accessToken,p=o.configuration.analytics.apiBaseUrl??Ve(o.configuration.organizationId,o.configuration.environment,"analytics"),m=o.configuration.analytics.runtimeEnvironment,f=o.configuration.analytics.enabled,S=new Wu({enableAnalytics:f,token:d,endpoint:p,runtimeEnvironment:m,preprocessRequest:uc(e,n),beforeSendHooks:[lc(e,r),(C,x)=>(e.info({...x,type:C,endpoint:p,token:d},"Analytics request"),x)]},a);return f||S.disable(),S};l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();function Ro(){return{desiredCount:5,numberOfValues:8,set:{}}}l();s();u();c();l();s();u();c();function _T(e,t){return!!t&&t.facetId in e.facetSet}var Wt=(e,t)=>e.search?.response.facets.find(r=>r.facetId===t),zu=(e,t)=>e.facetSet[t]?.request,bo=(e,t)=>{let r=Wt(e,t);return _T(e,r)?r:void 0},TC=(e,t)=>bo(e,t)?.values.filter(r=>r.state==="selected")||[],OC=(e,t)=>bo(e,t)?.values.filter(r=>r.state!=="idle")||[],ar=e=>e.search.isLoading;l();s();u();c();function qC(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find(a=>a.state==="selected");return n&&(t=[...t,n],r=[]),{parents:t,values:r}}function gt(e){let{activeValue:t,ancestryMap:r}=BT(e);return t?GT(t,r):[]}function BT(e){let t=[...e],r=new Map;for(;t.length>0;){let n=t.shift();if(n.state==="selected")return{activeValue:n,ancestryMap:r};if(r)for(let a of n.children)r.set(a,n);t.unshift(...n.children)}return{}}function GT(e,t){let r=[];if(!e)return[];let n=e;do r.unshift(n),n=t.get(n);while(n);return r}function $T(e,t){return!!t&&t.facetId in e.categoryFacetSet}var Bf=(e,t)=>{let r=Wt(e,t);if($T(e,r))return r},Gf=(e,t)=>e.categoryFacetSet[t]?.request,jC=(e,t)=>{let r=Bf(e,t);return gt(r?.values??[])},$f=(e,t)=>{let r=Gf(e,t);return gt(r?.currentValues??[])};l();s();u();c();function vo(){return{}}l();s();u();c();function DC(e){return{request:e}}function wo(){return{}}l();s();u();c();function VC(e){return{request:e}}function Po(){return{}}l();s();u();c();function NC(e){return{request:e,hasBreadcrumbs:!0}}function Eo(){return{}}var Io=(e,t)=>{let r=UC(t,e),n=r?r.field:"",a=Wf(n,e);return{facetId:e,facetField:n,facetTitle:a}};function ko(e,t){let{facetId:r,facetValue:n}=e,a=Io(r,t),o=_C(t,r);return{...a,facetValue:o==="hierarchical"?QC(t,r):n}}function bt(e){return{facetSet:e.facetSet??Eo(),categoryFacetSet:e.categoryFacetSet??vo(),dateFacetSet:e.dateFacetSet??wo(),numericFacetSet:e.numericFacetSet??Po(),automaticFacetSet:e.automaticFacetSet??Ro()}}var Hf=e=>{let t=[];return zT(e).forEach((r,n)=>{let a=_C(e,r.facetId),o=ZT(r,n+1);if(WT(r)){if(!!!$f(e,r.facetId).length)return;t.push({...o,...JT(e,r.facetId),facetType:a,state:"selected"});return}r.currentValues.forEach((d,p)=>{if(d.state==="idle")return;let m=MC(d,p+1,a),f=HT(r)?LC(d):KT(d);t.push({...o,...m,...f})})}),YT(e).forEach((r,n)=>{let a=XT(r,n+1);r.values.forEach((o,d)=>{if(o.state==="idle")return;let p=MC(o,d+1,"specific"),m=LC(o);t.push({...a,...p,...m})})}),t},HT=e=>e.type==="specific",WT=e=>e.type==="hierarchical",zT=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),YT=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),MC=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),KT=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),LC=e=>({displayValue:e.value,value:e.value}),QC=(e,t)=>$f(e,t).map(n=>n.value).join(";"),JT=(e,t)=>{let n=QC(e,t);return{value:n,valuePosition:1,displayValue:n}},XT=(e,t)=>({title:Wf(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),ZT=(e,t)=>({title:Wf(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Wf=(e,t)=>`${e}_${t}`,UC=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,_C=(e,t)=>{let r=UC(e,t);return r?r.type:"specific"};l();s();u();c();l();s();u();c();var zf=e=>e.configuration.search.locale,BC=e=>e.configuration.search.timezone,To=e=>e.configuration?.knowledge?.agentId;var Pe=e=>{if(eO(e)||Yf(e))return e.generatedAnswer?.answerId;if(tO(e))return e.search?.response?.extendedResults?.generativeQuestionAnsweringId},eO=e=>"answer"in e&&"generatedAnswer"in e&&!ae(e.generatedAnswer?.answerConfigurationId),Yf=e=>{let t=To(e);return"answerGenerationApi"in e&&"generatedAnswer"in e&&typeof t=="string"&&t.trim().length>0},tO=e=>"search"in e&&e.search!==void 0&&typeof e.search=="object",Kf=e=>e.generatedAnswer?.fieldsToIncludeInCitations,pc=we(e=>e.generatedAnswer?.citations,(e,t)=>t,(e,t)=>e?.find(r=>r.id===t));l();s();u();c();var Qe=()=>({q:"",enableQuerySyntax:!1});l();s();u();c();l();s();u();c();l();s();u();c();var mc=(r=>(r.Ascending="ascending",r.Descending="descending",r))(mc||{}),ya=(o=>(o.Relevancy="relevancy",o.QRE="qre",o.Date="date",o.Field="field",o.NoSort="nosort",o))(ya||{}),or=e=>{if(no(e))return e.map(t=>or(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Oo=()=>({by:"relevancy"}),Yu=e=>({by:"date",order:e}),Ku=(e,t)=>({by:"field",order:t,field:e}),Ju=()=>({by:"qre"}),Xu=()=>({by:"nosort"}),GC=new Q({values:{by:new on({enum:ya,required:!0}),order:new on({enum:mc}),field:new j}});function Ot(){return or(Oo())}l();s();u();c();l();s();u();c();l();s();u();c();var qo=class e{static set(t,r,n){let a,o,d;n&&(o=new Date,o.setTime(o.getTime()+n));let p=window.location.hostname,m=/^(\d{1,3}\.){3}\d{1,3}$/,f=/^([0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}$/;m.test(p)||f.test(p)||p.indexOf(".")===-1?Jf(t,r,o):(d=p.split("."),a=d[d.length-2]+"."+d[d.length-1],Jf(t,r,o,a))}static get(t){let r=t+"=",n=document.cookie.split(";");for(let a=0;a<n.length;a++){let o=n[a];if(o=o.replace(/^\s+/,""),o.lastIndexOf(r,0)===0)return o.substring(r.length,o.length)}return null}static erase(t){e.set(t,"",-1)}};function Jf(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}l();s();u();c();function rO(){return typeof navigator<"u"}function $C(){try{return typeof localStorage<"u"}catch{return!1}}function HC(){try{return typeof sessionStorage<"u"}catch{return!1}}function WC(){return!!(rO()&&navigator.cookieEnabled)}var zC=null;function YC(){return zC||($C()?localStorage:WC()?new Xf:HC()?sessionStorage:new Zf)}var jo=class jo{getItem(t){return qo.get(`${jo.prefix}${t}`)}removeItem(t){qo.erase(`${jo.prefix}${t}`)}setItem(t,r,n){qo.set(`${jo.prefix}${t}`,r,n)}};Ce(jo,"prefix","coveo_");var Xf=jo;var Zf=class{getItem(t){return null}removeItem(t){}setItem(t,r){}};var Zu="__coveo.analytics.history",nO=20,aO=1e3*60,oO=75,ha=class ha{constructor(t){Ce(this,"store");this.store=t||YC()}static getInstance(t){return ha.instance||(ha.instance=new ha(t)),ha.instance}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}async addElementAsync(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=await this.getHistoryWithInternalTimeAsync();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}async getHistoryAsync(){let t=await this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryWithInternalTime(){try{let t=this.store.getItem(Zu);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}async getHistoryWithInternalTimeAsync(){try{let t=await this.store.getItem(Zu);return t?JSON.parse(t):[]}catch{return[]}}setHistory(t){try{this.store.setItem(Zu,JSON.stringify(t.slice(0,nO)))}catch{}}clear(){try{this.store.removeItem(Zu)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,a)=>(a.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,oO)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value===t.value?(t.internalTime||0)-(r.internalTime||0)>aO:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:a,value:o}=r;return{name:n,time:a,value:o}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:a}=t;return r&&typeof a=="string"&&r.toLowerCase()==="query"&&a.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};Ce(ha,"instance",null);var eg=ha,yt=eg;var fc=class fc extends ga{constructor(){super(...arguments);Ce(this,"getFacetRequest",r=>this.state.facetSet?.[r]?.request||this.state.categoryFacetSet?.[r]?.request||this.state.dateFacetSet?.[r]?.request||this.state.numericFacetSet?.[r]?.request||this.state.automaticFacetSet?.set[r]?.response)}getFacetState(){return Hf(bt(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||fc.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let r=this.getState();return r.search?.searchResponseId||r.search?.response.searchUid||Ft().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let r=!!this.getSplitTestRunName(),n=this.state.search?.response.pipeline||this.state.pipeline||fc.fallbackPipelineName;return r?n:void 0}getBaseMetadata(){let r=this.getState(),n=super.getBaseMetadata(),a=Pe(r);return a&&(n.generativeQuestionAnsweringId=a),n}getFacetMetadata(r,n){let o=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:o,facetValue:n,facetTitle:`${o}_${r}`}}getFacetClearAllMetadata(r){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,facetTitle:`${a}_${r}`}}getFacetUpdateSortMetadata(r,n){let o=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:o,criteria:n,facetTitle:`${o}_${r}`}}getRangeBreadcrumbFacetMetadata(r,n){let o=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:o,facetRangeEnd:n.end,facetRangeEndInclusive:n.endInclusive,facetRangeStart:n.start,facetTitle:`${o}_${r}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??Ot()}}getStaticFilterToggleMetadata(r,n){return{...this.getBaseMetadata(),staticFilterId:r,staticFilterValue:n}}getStaticFilterClearAllMetadata(r){return{...this.getBaseMetadata(),staticFilterId:r}}getUndoTriggerQueryMetadata(r){return{...this.getBaseMetadata(),undoneQuery:r}}getCategoryBreadcrumbFacetMetadata(r,n){let o=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:r,categoryFacetField:o,categoryFacetPath:n,categoryFacetTitle:`${o}_${r}`}}getOmniboxAnalyticsMetadata(r,n){let a=this.state.querySuggest?.[r],o=a.completions.map(f=>f.expression),d=a.partialQueries.length-1,p=a.partialQueries[d]||"",m=a.responseId;return{...this.getBaseMetadata(),suggestionRanking:o.indexOf(n),partialQuery:p,partialQueries:a.partialQueries.length>0?a.partialQueries:"",suggestions:o.length>0?o:"",querySuggestResponseId:m}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(r){return{...this.getBaseMetadata(),...r}}getGeneratedAnswerMetadata(){let r=this.getState(),n={};return r.generatedAnswer?.isVisible!==void 0&&(n.showGeneratedAnswer=r.generatedAnswer.isVisible),n}get resultURIs(){return this.results?.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||Qe().q}get responseTime(){return this.state.search?.duration||Ft().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||Ft().response.totalCountFiltered}};Ce(fc,"fallbackPipelineName","default");var yn=fc,KC=({logger:e,getState:t,analyticsClientMiddleware:r=(o,d)=>d,preprocessRequest:n,provider:a})=>{let o=t(),d=o.configuration.accessToken,p=o.configuration.analytics.apiBaseUrl??Ve(o.configuration.organizationId,o.configuration.environment,"analytics"),m=o.configuration.analytics.runtimeEnvironment,f=o.configuration.analytics.enabled,S=new Bu({token:d,endpoint:p,runtimeEnvironment:m,preprocessRequest:uc(e,n),beforeSendHooks:[lc(e,r),(C,x)=>(e.info({...x,type:C,endpoint:p,token:d},"Analytics request"),x)]},a);return f||S.disable(),S},tg=()=>{let t=yt.getInstance().getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};l();s();u();c();function el(e){let t=JC(e),r=[e,...t].filter(a=>a.parentResult).map(a=>a.parentResult);return Rh([e,...t,...r],a=>a.uniqueId)}function JC(e){return e.childResults?e.childResults.flatMap(t=>[t,...JC(t)]):[]}l();s();u();c();var _r=()=>"";function XC(e,t){return{...new yn(t).getBaseMetadata(),actionCause:e,type:e}}function iO(e){return Object.assign(e,{instantlyCallable:!0})}function sO(e,t){let r=o=>iO(oe(e,o)),n=r(async(o,{getState:d,extra:p})=>{let{analyticsClientMiddleware:m,preprocessRequest:f,logger:S}=p;return await(await t({getState:d,analyticsClientMiddleware:m,preprocessRequest:f,logger:S})).log({state:d(),extra:p})});return Object.assign(n,{prepare:async({getState:o,analyticsClientMiddleware:d,preprocessRequest:p,logger:m})=>{let{description:f,log:S}=await t({getState:o,analyticsClientMiddleware:d,preprocessRequest:p,logger:m});return{description:f,action:r(async(C,{getState:x,extra:A})=>await S({state:x(),extra:A}))}}}),n}var ZC=(e,t,r)=>{function n(...a){let o=a.length===1?{...a[0],__legacy__getBuilder:t(a[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:a[0],__legacy__getBuilder:t(a[1]),__legacy__provider:a[2],analyticsConfigurator:e,providerClass:r};return lO(o)}return n},cO=e=>e.configuration.analytics.analyticsMode==="legacy",uO=e=>e.configuration.analytics.analyticsMode==="next",lO=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:a,analyticsConfigurator:o,providerClass:d})=>(r??(r=p=>new d(p)),sO(e,async({getState:p,analyticsClientMiddleware:m,preprocessRequest:f,logger:S})=>{let C=[],x={log:async({state:R})=>{for(let E of C)await E(R)}},A=p(),F=o({getState:p,logger:S,analyticsClientMiddleware:m,preprocessRequest:f,provider:r(p)}),v=await t(F,p());x.description=v?.description,C.push(async R=>{cO(R)&&await dO(v,r,R,S,F.coveoAnalyticsClient)});let{emit:b}=oc(A);return C.push(async R=>{if(uO(R)&&a&&n){let E=n(R);await AO(b,a,E)}}),x}));async function dO(e,t,r,n,a){t(()=>r);let o=await e?.log({searchUID:t(()=>r).getSearchUID()});n.info({client:a,response:o},"Analytics response")}var pO=e=>r=>(n,a)=>Promise.resolve({description:{actionCause:e},log:async o=>{r(n,a)}}),Y=ZC(e=>KC({...e,provider:e.provider||new yn(e.getState)}),e=>e,yn),Oz=ZC(kC,pO("caseAssist"),dc);var Ue=(e,t)=>{let r=o=>o+(t.pagination?.firstResult??0),n=-1,a=t.search?.results;return n=nA(e,a),n<0&&(n=CO(e,a)),n<0&&(n=0),fO(e,r(n),t)};var eA=(e,t)=>({sourceName:mO(e),documentPosition:1,documentTitle:e.title,documentUri:e.uri,documentUrl:e.clickUri,queryPipeline:t.pipeline||_r()});function mO(e){let t=e.source;return ae(t)?"unknown":t}var tA=e=>({contentIdKey:"permanentid",contentIdValue:e.permanentid||""});function fO(e,t,r){let n=e.raw.collection;return{collectionName:typeof n=="string"?n:"default",documentAuthor:hO(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:SO(e),queryPipeline:r.pipeline||_r()}}var Ee=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),rA={urihash:new j,sourcetype:new j,permanentid:new j},tl={uniqueId:L,raw:new Q({values:rA}),title:L,uri:L,clickUri:L,rankingModifier:new j({required:!1,emptyAllowed:!0})};function gO(e){return Object.assign({},...Object.keys(rA).map(t=>({[t]:e[t]})))}function yO(e){return Object.assign({},...Object.keys(tl).map(t=>({[t]:e[t]})),{raw:gO(e.raw)})}function hO(e){let t=e.raw.author;return ae(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function SO(e){let t=e.raw.source;return ae(t)?"unknown":t}var ht=e=>new ue(tl).validate(yO(e));function CO(e,t){for(let[r,n]of t.entries()){let a=el(n);if(nA(e,a)!==-1)return r}return-1}function nA(e,t=[]){return t.findIndex(({uniqueId:r})=>r===e.uniqueId)}async function AO(e,t,r){await e(t,r)}l();s();u();c();var rg=e=>I(e,{evt:L,type:Ie}),aA=e=>Y("analytics/generic/search",t=>{rg(e);let{evt:r,meta:n}=e;return t.makeSearchEvent(r,n)}),oA=e=>Y("analytics/generic/click",(t,r)=>(ht(e.result),rg(e),t.makeClickEvent(e.evt,Ue(e.result,r),Ee(e.result),e.meta))),iA=e=>Y("analytics/generic/custom",t=>(rg(e),t.makeCustomEventWithType(e.evt,e.type,e.meta))),rl=()=>Y("analytics/interface/load",e=>e.makeInterfaceLoad()),hn=()=>Y("analytics/interface/change",(e,t)=>e.makeInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2})),nl=()=>Y("analytics/interface/searchFromLink",e=>e.makeSearchFromLink()),al=e=>Y("analytics/interface/omniboxFromLink",t=>t.makeOmniboxFromLink(e)),sA=()=>({actionCause:"interfaceLoad"}),Do=()=>({actionCause:"interfaceChange"}),cA=()=>({actionCause:"searchFromLink"}),uA=()=>({actionCause:"omniboxFromLink"});l();s();u();c();var ng=()=>Ie,lA=()=>L,ir=w("configuration/updateBasicConfiguration",e=>I(e,{accessToken:Ie,environment:new j({required:!1,constrainTo:["prod","hipaa","stg","dev"]}),organizationId:Ie})),qt=w("configuration/updateSearchConfiguration",e=>I(e,{proxyBaseUrl:new j({required:!1,url:!0}),pipeline:new j({required:!1,emptyAllowed:!0}),searchHub:Ie,timezone:Ie,locale:Ie,authenticationProviders:new te({required:!1,each:L})})),xO={enabled:new ne({default:!0}),originContext:ng(),originLevel2:ng(),originLevel3:ng(),proxyBaseUrl:new j({required:!1,url:!0}),runtimeEnvironment:new be,anonymous:new ne({default:!1}),deviceId:Ie,userDisplayName:Ie,documentLocation:Ie,trackingId:rS,analyticsMode:new j({constrainTo:["legacy","next"],required:!1,default:"next"}),source:new Q({options:{required:!1},values:iC.reduce((e,t)=>(e[t]=tS,e),{})})},Sn=w("configuration/updateAnalyticsConfiguration",e=>I(e,xO)),Vo=w("configuration/analytics/disable"),No=w("configuration/analytics/enable"),ol=w("configuration/analytics/originlevel2",e=>I(e,{originLevel2:lA()})),il=w("configuration/analytics/originlevel3",e=>I(e,{originLevel3:lA()})),sl=w("knowledge/setAgentId",e=>I(e,new j({required:!0})));l();s();u();c();l();s();u();c();l();s();u();c();var cl={q:new j,enableQuerySyntax:new ne,aq:new j,cq:new j,firstResult:new J({min:0}),numberOfResults:new J({min:0}),sortCriteria:new j,f:new Q,fExcluded:new Q,cf:new Q,nf:new Q,mnf:new Q,df:new Q,debug:new ne,sf:new Q,tab:new j,af:new Q};var xe=w("searchParameters/restore",e=>I(e,cl)),Mo=w("searchParameters/restoreTab",e=>I(e,L));l();s();u();c();var Cn=w("debug/enable"),Lo=w("debug/disable");l();s();u();c();var An=()=>!1;var Qo=re(An(),e=>{e.addCase(Cn,()=>!0).addCase(Lo,()=>!1).addCase(xe,(t,r)=>r.payload.debug??t)});l();s();u();c();l();s();u();c();var ag=w("history/undo"),og=w("history/redo"),vt=w("history/snapshot"),gc=oe("history/back",async(e,{dispatch:t})=>{t(ag()),await t(Ae())}),ul=oe("history/forward",async(e,{dispatch:t})=>{t(og()),await t(Ae())}),Ae=oe("history/change",async(e,{getState:t})=>t().history.present);l();s();u();c();var Uo=w("pipeline/set",e=>I(e,new j({required:!0,emptyAllowed:!0})));var _o=re(_r(),e=>{e.addCase(Uo,(t,r)=>r.payload).addCase(Ae.fulfilled,(t,r)=>r.payload?.pipeline??t).addCase(qt,(t,r)=>r.payload.pipeline||t)});l();s();u();c();l();s();u();c();var _e=w("breadcrumb/deselectAll"),Bo=w("breadcrumb/deselectAllNonBreadcrumbs");l();s();u();c();var sr=w("facet/updateFacetAutoSelection",e=>I(e,{allow:new ne({required:!0})}));l();s();u();c();l();s();u();c();var yc=class extends yn{constructor(r){super(r);this.getState=r}get activeInstantResultQuery(){let r=this.getState().instantResults;for(let n in r)for(let a in r[n].cache)if(r[n].cache[a].isActive)return r[n].q;return null}get activeInstantResultCache(){let r=this.getState().instantResults;for(let n in r)for(let a in r[n].cache)if(r[n].cache[a].isActive)return r[n].cache[a];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??Qe().q}get responseTime(){return this.activeInstantResultCache?.duration??Ft().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??Ft().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var dA=e=>Y({prefix:"analytics/instantResult/open",__legacy__getBuilder:(t,r)=>(ht(e),t.makeDocumentOpen(Ue(e,r),Ee(e))),__legacy__provider:t=>new yc(t),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=Ue(e,t),n=Ee(e);return{responseId:e.searchUid??"",position:r.documentPosition,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}}),pA=()=>Y("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new yc(e)),mA=()=>({actionCause:"searchboxAsYouType"});l();s();u();c();var ig={id:L},FO={...ig,q:Re},Go=w("instantResults/register",e=>I(e,ig)),cr=w("instantResults/updateQuery",e=>I(e,FO)),$o=w("instantResults/clearExpired",e=>I(e,ig));l();s();u();c();var ll=new J({required:!0,min:0}),Ho=w("pagination/registerNumberOfResults",e=>I(e,ll)),Wo=w("pagination/updateNumberOfResults",e=>I(e,ll)),zo=w("pagination/registerPage",e=>I(e,ll)),ur=w("pagination/updatePage",e=>I(e,ll)),Yo=w("pagination/nextPage"),Ko=w("pagination/previousPage");l();s();u();c();var nt=w("query/updateQuery",e=>I(e,{q:new j,enableQuerySyntax:new ne}));l();s();u();c();l();s();u();c();var Br=(e,t,r)=>({analytics:{clientId:t.clientId,clientTimestamp:new Date().toISOString(),documentReferrer:t.referrer,documentLocation:t.location,originContext:e.originContext,...r&&{actionCause:r.actionCause},...r&&{customData:r.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.deviceId&&{deviceId:e.deviceId},...e.trackingId&&{trackingId:e.trackingId},capture:t.capture??t.clientId!=="",source:mn(e)}});var Jo=(e,t,r)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??Me(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:t.referrer,timezone:e.configuration.search.timezone,...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&Br(e.configuration.analytics,t,r),...e.excerptLength&&!ae(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});l();s();u();c();l();s();u();c();l();s();u();c();var Xo=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await IC(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...tg()&&{pageId:tg()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:mn(e)}}}};var xn=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??Me(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{actionsHistory:yt.getInstance().getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Xo(e.configuration.analytics,t),...e.excerptLength&&!ae(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});l();s();u();c();l();s();u();c();var zt=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var sg=()=>Y("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),Fn=e=>Y("search/queryError",(t,r)=>t.makeQueryError({query:r.query?.q||Qe().q,aq:r.advancedSearchQueries?.aq||zt().aq,cq:r.advancedSearchQueries?.cq||zt().cq,dq:r.advancedSearchQueries?.dq||zt().dq,errorType:e.type,errorMessage:e.message}));l();s();u();c();l();s();u();c();var Sc=Ht(dl(),1),SA=Ht(fA(),1);l();s();u();c();var pl=Ht(dl(),1),yA=Ht(gA(),1);pl.default.extend(yA.default);var Zo="YYYY/MM/DD@HH:mm:ss",RO="1401-01-01";function Sa(e,t){let r=(0,pl.default)(e,t);return!r.isValid()&&!t?(0,pl.default)(e,Zo):r}function hc(e){return e.format(Zo)}function hA(e){return hc(Sa(e))===e}function ml(e,t){let r=Sa(e,t);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",a=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?a:n}`)}fg(r)}function fg(e){if(e.isBefore(RO))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}Sc.default.extend(SA.default);var CA=["past","now","next"],AA=["minute","hour","day","week","month","quarter","year"],bO=e=>{let t=e==="now";return{amount:new J({required:!t,min:1}),unit:new j({required:!t,constrainTo:AA}),period:new j({required:!0,constrainTo:CA})}};function Rn(e){if(typeof e=="string"&&!lr(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?gg(e):e;new ue(bO(t.period)).validate(t);let r=FA(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);fg(r)}function xA(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function FA(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,Sc.default)().subtract(r,n);case"next":return(0,Sc.default)().add(r,n);case"now":return(0,Sc.default)()}}function Cc(e){return hc(FA(gg(e)))}function RA(e){return e.toLocaleLowerCase().split("-")}function lr(e){let[t,r,n]=RA(e);if(t==="now")return!0;if(!CA.includes(t)||!AA.includes(n))return!1;let a=parseInt(r);return!(Number.isNaN(a)||a<=0)}function bA(e){return!!e&&typeof e=="object"&&"period"in e}function gg(e){let[t,r,n]=RA(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function vA(e){return Rn(e),gg(e)}l();s();u();c();function wA(e){return e.type==="dateRange"}function PA(e){return`start${e}`}function EA(e){return`end${e}`}var yg=()=>({dateFacetValueMap:{}});function vO(e,t,r){let n=e.start,a=e.end;return lr(n)&&(n=Cc(n),r.dateFacetValueMap[t][PA(n)]=e.start),lr(a)&&(a=Cc(a),r.dateFacetValueMap[t][EA(a)]=e.end),{...e,start:n,end:a}}function hg(e,t){if(wA(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(a=>vO(a,r,t))}}return e}function bn(e){let t=yg();return{request:{...e,facets:e.facets?.map(n=>hg(n,t))},mappings:t}}function wO(e,t,r){return{...e,start:r.dateFacetValueMap[t][PA(e.start)]||e.start,end:r.dateFacetValueMap[t][EA(e.end)]||e.end}}function PO(e,t){return e.facetId in t.dateFacetValueMap}function EO(e,t){return PO(e,t)?{...e,values:e.values.map(r=>wO(r,e.facetId,t))}:e}function fl(e,t){return"success"in e?{success:{...e.success,facets:e.success.facets?.map(n=>EO(n,t))}}:e}l();s();u();c();l();s();u();c();var ei=w("didYouMean/enable"),gl=w("didYouMean/disable"),ti=w("didYouMean/automaticCorrections/disable"),yl=w("didYouMean/automaticCorrections/enable"),jt=w("didYouMean/correction",e=>I(e,L)),Ca=w("didYouMean/automaticCorrections/mode",e=>I(e,new j({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0})));l();s();u();c();var hl=()=>Y("analytics/didyoumean/click",e=>e.makeDidYouMeanClick()),Sg=()=>Y("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic()),IA=()=>({actionCause:"didYouMeanClick"}),kA=()=>({actionCause:"didYouMeanAutomatic"});l();s();u();c();l();s();u();c();function Sl(){return{contextValues:{}}}l();s();u();c();function Cl(){return{contextValues:{}}}l();s();u();c();function Cg(){return{enabled:!0,tabs:{}}}function Al(){return{freezeFacetOrder:!1,facets:{}}}l();s();u();c();function ri(){return[]}l();s();u();c();function Dt(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}l();s();u();c();function xl(){return{}}l();s();u();c();function Fl(){return{}}l();s();u();c();function Rl(){return{}}function TA(){return Yt({})}function Yt(e){return{context:e.context||Sl(),dictionaryFieldContext:e.dictionaryFieldContext||Cl(),facetSet:e.facetSet||Eo(),numericFacetSet:e.numericFacetSet||Po(),dateFacetSet:e.dateFacetSet||wo(),categoryFacetSet:e.categoryFacetSet||vo(),automaticFacetSet:e.automaticFacetSet??Ro(),pagination:e.pagination||Dt(),query:e.query||Qe(),tabSet:e.tabSet||Rl(),advancedSearchQueries:e.advancedSearchQueries||zt(),staticFilterSet:e.staticFilterSet||Fl(),querySet:e.querySet||xl(),sortCriteria:e.sortCriteria||Ot(),pipeline:e.pipeline||_r(),searchHub:e.searchHub||gn(),facetOptions:e.facetOptions||Al(),facetOrder:e.facetOrder??ri(),debug:e.debug??An()}}l();s();u();c();var IO=new Q({values:{undoneQuery:Re},options:{required:!0}}),bl=()=>Y("analytics/trigger/query",(e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null),vl=e=>Y("analytics/trigger/query/undo",t=>(I(e,IO),t.makeUndoTriggerQuery(e))),wl=()=>Y("analytics/trigger/notify",(e,t)=>t.triggers?.notifications.length?e.makeTriggerNotify({notifications:t.triggers.notifications}):null),Pl=()=>Y("analytics/trigger/redirect",(e,t)=>t.triggers?.redirectTo?e.makeTriggerRedirect({redirectedTo:t.triggers.redirectTo}):null),El=()=>Y("analytics/trigger/execute",(e,t)=>t.triggers?.executions.length?e.makeTriggerExecute({executions:t.triggers.executions}):null);l();s();u();c();var vn=w("trigger/query/ignore",e=>I(e,new j({emptyAllowed:!0,required:!0}))),ni=w("trigger/query/modification",e=>I(e,new Q({values:{originalQuery:Ie,modification:Ie}})));l();s();u();c();l();s();u();c();l();s();u();c();function wn(e){return Object.values(e).map(t=>t.request)}function Ac(e,t){let r={};e.forEach(o=>{r[o.facetId]=o});let n=[];t.forEach(o=>{o in r&&(n.push(r[o]),delete r[o])});let a=Object.values(r);return[...n,...a]}function OA(e){return wn(e).map(t=>{let n=t.currentValues.some(({state:a})=>a!=="idle");return t.generateAutomaticRanges&&!n?{...t,currentValues:[]}:t})}var Ag={alphanumericDescending:{type:"alphanumeric",order:"descending"},alphanumericNaturalDescending:{type:"alphanumericNatural",order:"descending"}};function kO(e){return wn(e).map(t=>{let r=Ag[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function TO(e){return[...kO(e.facetSet??{}),...OA(e.numericFacetSet??{}),...OA(e.dateFacetSet??{}),...wn(e.categoryFacetSet??{})]}function OO(e){return TO(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function Il(e){return Ac(OO(e),e.facetOrder??[])}l();s();u();c();var Pn=async(e,t)=>{let r=DO(e),n=Il(e),a=qO(e),o=await xn(e,t),d=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return bn({...o,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:d(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:a}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function qO(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(jO).filter(r=>r.currentValues.length>0):void 0}function jO(e){let{field:t,label:r,values:n}=e,a=n.filter(o=>o.state==="selected");return{field:t,label:r,currentValues:a}}function DO(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(o=>o.isActive)?.expression.trim()||"",a=VO(e);return[t,n,...a].filter(o=>!!o).join(" AND ")}function VO(e){return Object.values(e.staticFilterSet||{}).map(r=>{let n=r.values.filter(o=>o.state==="selected"&&!!o.expression.trim()),a=n.map(o=>o.expression).join(" OR ");return n.length>1?`(${a})`:a})}var En=class{constructor(t,r=n=>{this.dispatch(nt({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let a=Date.now(),o=fl(await this.extra.apiClient.search(r,n),t),d=Date.now()-a,p=this.getState().query?.q||"";return{response:o,duration:d,queryExecuted:p,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Ge(t.response)?(this.dispatch(Fn(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:a,automaticallyCorrectQuery:o}=r.didYouMean,{results:d,queryCorrections:p,queryCorrection:m}=n;if(!a||!o)return null;let f=d.length===0&&p&&p.length!==0,S=!ae(m)&&!ae(m.correctedQuery);if(!f&&!S)return null;let x=f?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(vt(Yt(this.getState()))),x}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:a}=n.queryCorrections[0],o=await this.automaticallyRetryQueryWithCorrection(a);return Ge(o.response)?(this.dispatch(Fn(o.response.error)),this.rejectWithValue(o.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(t),this.dispatch(vt(Yt(this.getState()))),{...o,response:{...o.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r,analyticsAction:Sg()})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:a}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:a,analyticsAction:Sg()}}logOriginalAnalyticsQueryBeforeAutoCorrection(t){let r=this.getState(),n=this.getSuccessResponse(t);this.analyticsAction?.()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,n),this.extra)}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(p=>p.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(vn("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let o=this.getCurrentQuery(),d=await this.automaticallyRetryQueryWithTriggerModification(n);return Ge(d.response)?(this.dispatch(Fn(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(vt(Yt(this.getState()))),{...d,response:{...d.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:bl()})}getStateAfterResponse(t,r,n,a){return{...n,query:{q:t,enableQuerySyntax:n.query?.enableQuerySyntax??Qe().enableQuerySyntax},search:{...Ft(),duration:r,response:a,results:a.results}}}processSuccessResponse(t){return this.dispatch(vt(Yt(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return gu(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await Pn(this.getState()),{origin:"mainSearch"});return this.dispatch(jt(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(ni({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Pn(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var qA=oe("search/executeSearch",async(e,t)=>{let r=t.getState();return await kl(r,t,e)}),jA=oe("search/fetchPage",async(e,t)=>{let r=t.getState();return await Fg(r,t,e)}),DA=oe("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await Rg(t,r)}),VA=oe("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await QO(t,e,r)}),NA=oe("search/fetchInstantResults",async(e,t)=>xg(e,t)),NO=async(e,t)=>{let r=await Pn(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},MO=async(e,t,r)=>{let n=await xn(e);return bn({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},LO=async(e,t)=>{let r=await Pn(e,t);return r.request.numberOfResults=0,r},MA=e=>{e.configuration.analytics.enabled&&yt.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})};async function xg(e,t){I(e,{id:L,q:L,maxResultsPerQuery:new J({required:!0,min:1}),cacheTimeout:new J});let{q:r,maxResultsPerQuery:n}=e,a=t.getState(),o=new En({...t,analyticsAction:pA()},f=>{t.dispatch(cr({q:f,id:e.id}))}),d=await MO(a,r,n),p=await o.fetchFromAPI(d,{origin:"instantResults",disableAbortWarning:!0}),m=await o.process(p);return"response"in m?{results:m.response.results,searchUid:m.response.searchUid,analyticsAction:m.analyticsAction,totalCountFiltered:m.response.totalCountFiltered,duration:m.duration}:m}async function Fg(e,t,r){MA(e);let{analyticsClientMiddleware:n,preprocessRequest:a,logger:o}=t.extra,{description:d}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:o}),p=new En({...t,analyticsAction:r}),m=await Pn(e,d),f=await p.fetchFromAPI(m,{origin:"mainSearch"});return await p.process(f)}async function Rg(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:a}=e.extra,{description:o}=await sg().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:a}),d=new En({...e,analyticsAction:sg()}),p=await NO(t,o),m=await d.fetchFromAPI(p,{origin:"mainSearch"});return await d.process(m)}async function QO(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:a,logger:o}=e.extra,{description:d}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:o}),p=new En({...e,analyticsAction:t}),m=await LO(r,d),f=await p.fetchFromAPI(m,{origin:"facetValues"});return await p.process(f)}async function kl(e,t,r){MA(e);let{analyticsClientMiddleware:n,preprocessRequest:a,logger:o}=t.extra,{description:d}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:o}),p=await Pn(e,d),m=new En({...t,analyticsAction:r}),f=await m.fetchFromAPI(p,{origin:"mainSearch"});return await m.process(f)}l();s();u();c();l();s();u();c();l();s();u();c();var LA=we(e=>e.staticFilterSet,e=>Object.values(e||{}).map(r=>{let n=r.values.filter(o=>o.state==="selected"&&!!o.expression.trim()),a=n.map(o=>o.expression).join(" OR ");return n.length>1?`(${a})`:a}));var Vt=async(e,t,r)=>{let n=vg(e),a=UO(e),o=_O(e),d=e.configuration.analytics.analyticsMode==="legacy"?await xn(e,r):Jo(e,t,r);return bn({...d,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...n&&{cq:n},...a.length&&{facets:a},...e.pagination&&{numberOfResults:bg(e),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:o}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function bg(e){return e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0}function UO(e){return Ac(GO(e),e.facetOrder??[])}function _O(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(BO).filter(r=>r.currentValues.length>0):void 0}function BO(e){let{field:t,label:r,values:n}=e,a=n.filter(o=>o.state==="selected");return{field:t,label:r,currentValues:a}}function GO(e){return $O(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function $O(e){return[...HO(e.facetSet??{}),...QA(e.numericFacetSet??{}),...QA(e.dateFacetSet??{}),...wn(e.categoryFacetSet??{})]}function HO(e){return wn(e).map(t=>{let r=Ag[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function QA(e){return wn(e).map(t=>{let r=t.currentValues,n=r.some(({state:o})=>o!=="idle"),a=r.some(o=>o.previousState);return t.generateAutomaticRanges&&!n&&!a?{...t,currentValues:[]}:t})}function vg(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(o=>o.isActive)?.expression.trim()||"",a=LA(e);return[t,n,...a].filter(o=>!!o).join(" AND ")}var In=class{constructor(t,r=n=>{this.dispatch(nt({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let a=Date.now(),o=fl(await this.extra.apiClient.search(r,n),t),d=Date.now()-a,p=this.getState().query?.q||"";return{response:o,duration:d,queryExecuted:p,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Ge(t.response)?(this.dispatch(Fn(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:a,automaticallyCorrectQuery:o}=r.didYouMean,{results:d,queryCorrections:p,queryCorrection:m}=n;if(!a||!o)return null;let f=d.length===0&&p&&p.length!==0,S=!ae(m)&&!ae(m.correctedQuery);if(!f&&!S)return null;let x=f?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(vt(Yt(this.getState()))),x}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:a}=n.queryCorrections[0],o=await this.automaticallyRetryQueryWithCorrection(a);return Ge(o.response)?(this.dispatch(Fn(o.response.error)),this.rejectWithValue(o.response.error)):(this.dispatch(vt(Yt(this.getState()))),{...o,response:{...o.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:a}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:a}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(p=>p.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(vn("")),null;let o=this.getCurrentQuery(),d=await this.automaticallyRetryQueryWithTriggerModification(n);return Ge(d.response)?(this.dispatch(Fn(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(vt(Yt(this.getState()))),{...d,response:{...d.response.success},automaticallyCorrected:!1,originalQuery:o})}processSuccessResponse(t){return this.dispatch(vt(Yt(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(t){return gu(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=this.getState(),{actionCause:n}=kA(),a=await this.fetchFromAPI(await Vt(r,this.extra.navigatorContext,{actionCause:n}),{origin:"mainSearch"});return this.dispatch(jt(t)),a}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(ni({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Vt(this.getState(),this.extra.navigatorContext),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};var ai=oe("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;I(e,{q:new j,enableQuerySyntax:new ne,clearFilters:new ne}),e.clearFilters&&(r(_e()),r(Bo())),r(sr({allow:!0})),r(nt({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(ur(1))}),UA=w("search/updateSearchAction"),G=oe("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return kl(r,t,e.legacy);_A(r);let n=e.next?BA(e.next):void 0,a=await Vt(r,t.extra.navigatorContext,n),o=new In({...t,analyticsAction:n??{}}),d=await o.fetchFromAPI(a,{origin:"mainSearch"});return await o.process(d)}),at=oe("search/fetchPage",async(e,t)=>{let r=t.getState();if(_A(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Fg(r,t,e.legacy);let n=new In({...t,analyticsAction:e.next}),a=await Vt(r,t.extra.navigatorContext,e.next),o=await n.fetchFromAPI(a,{origin:"mainSearch"});return await n.process(o)}),Nt=oe("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Rg(t,r);let n=XC("browseResults",t.getState),a=new In({...t,analyticsAction:n}),o=await WO(r,t.extra.navigatorContext,n),d=await a.fetchFromAPI(o,{origin:"mainSearch"});return await a.process(d)}),Mt=oe("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return kl(r,t,e.legacy);let n=new In({...t,analyticsAction:{}}),a=await YO(r,t.extra.navigatorContext),o=await n.fetchFromAPI(a,{origin:"facetValues"});return await n.process(o)}),oi=oe("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return xg(e,t);I(e,{id:L,q:L,maxResultsPerQuery:new J({required:!0,min:1}),cacheTimeout:new J});let{q:n,maxResultsPerQuery:a}=e,o=BA(mA()),d=await zO(r,t.extra.navigatorContext,n,a,o),p=new In({...t,analyticsAction:o},S=>{t.dispatch(cr({q:S,id:e.id}))}),m=await p.fetchFromAPI(d,{origin:"instantResults",disableAbortWarning:!0}),f=await p.process(m);return"response"in f?{results:f.response.results,searchUid:f.response.searchUid,totalCountFiltered:f.response.totalCountFiltered,duration:f.duration}:f}),WO=async(e,t,r)=>{let n=await Vt(e,t,r);return n.request={...n.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},n},zO=async(e,t,r,n,a)=>{let o=Jo(e,t,a);return bn({...o,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:n,q:r})},YO=async(e,t,r)=>{let n=await Vt(e,t,r);return n.request.numberOfResults=0,n},_A=e=>{e.configuration.analytics.enabled&&yt.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},BA=e=>({actionCause:e.actionCause,type:e.actionCause});l();s();u();c();l();s();u();c();var kn=(e,t)=>{let r=e;return ae(r[t])?ae(e.raw[t])?null:e.raw[t]:r[t]},KO=e=>t=>e.every(r=>!ae(kn(t,r))),JO=e=>t=>e.every(r=>ae(kn(t,r))),XO=(e,t)=>r=>{let n=GA(e,r);return t.some(a=>n.some(o=>`${o}`.toLowerCase()===a.toLowerCase()))},ZO=(e,t)=>r=>{let n=GA(e,r);return t.every(a=>n.every(o=>`${o}`.toLowerCase()!==a.toLowerCase()))},GA=(e,t)=>{let r=kn(t,e);return iu(r)?r:[r]},$A={getResultProperty:kn,fieldsMustBeDefined:KO,fieldsMustNotBeDefined:JO,fieldMustMatch:XO,fieldMustNotMatch:ZO};function xc(e){return e.search.response.searchUid!==""}function HA(e,t,r){return e.search.results.find(n=>kn(n,t)===r)}var wg=we(e=>e.search,e=>e?.searchAction?.actionCause||"");l();s();u();c();l();s();u();c();var ii=w("app/setError");function Pg(e,t){let r=t.payload??null;r&&(e.response=Ft().response,e.results=[],e.questionAnswer=co()),e.error=r,e.isLoading=!1}function Eg(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function eq(e,t){Eg(e,t),e.results=t.payload.response.results.map(r=>({...r,searchUid:t.payload.response.searchUid})),e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function WA(e,t){e.isLoading=!0,e.searchAction=t.meta.arg.next,e.requestId=t.meta.requestId}function tq(e,t){e.isLoading=!0,e.searchAction={actionCause:"browseResults"},e.requestId=t.meta.requestId}var ce=re(Ft(),e=>{e.addCase(G.rejected,(t,r)=>Pg(t,r)),e.addCase(Nt.rejected,(t,r)=>Pg(t,r)),e.addCase(at.rejected,(t,r)=>Pg(t,r)),e.addCase(G.fulfilled,(t,r)=>{eq(t,r)}),e.addCase(Nt.fulfilled,(t,r)=>{Eg(t,r),t.results=[...t.results,...r.payload.response.results.map(n=>({...n,searchUid:r.payload.response.searchUid}))]}),e.addCase(at.fulfilled,(t,r)=>{Eg(t,r),t.results=[...r.payload.response.results.map(n=>({...n,searchUid:r.payload.response.searchUid}))]}),e.addCase(Mt.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(G.pending,WA),e.addCase(Nt.pending,tq),e.addCase(at.pending,WA),e.addCase(UA,(t,r)=>{t.searchAction=r.payload}),e.addCase(ii,(t,r)=>{t.error=r.payload,t.isLoading=!1})});l();s();u();c();l();s();u();c();var si=w("searchHub/set",e=>I(e,new j({required:!0,emptyAllowed:!0})));var ci=re(gn(),e=>{e.addCase(si,(t,r)=>r.payload).addCase(Ae.fulfilled,(t,r)=>r.payload?.searchHub??t).addCase(qt,(t,r)=>r.payload.searchHub||t)});l();s();u();c();l();s();u();c();l();s();u();c();function zA(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}var YA=tr;function sx(e,t){if(e===t||!(YA(e)&&YA(t)||Array.isArray(e)&&Array.isArray(t)))return t;let r=Object.keys(t),n=Object.keys(e),a=r.length===n.length,o=Array.isArray(t)?[]:{};for(let d of r)o[d]=sx(e[d],t[d]),a&&(a=e[d]===o[d]);return a?e:o}function ui(e){let t=0;for(let r in e)t++;return t}var KA=e=>[].concat(...e);function rq(e){return new RegExp("(^|:)//").test(e)}function nq(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function ql(e){return e!=null}function aq(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var oq=e=>e.replace(/\/$/,""),iq=e=>e.replace(/^\//,"");function sq(e,t){if(!e)return t;if(!t)return e;if(rq(t))return t;let r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=oq(e),t=iq(t),`${e}${r}${t}`}function cq(e,t,r){return e.has(t)?e.get(t):e.set(t,r).get(t)}var JA=(...e)=>y(...e),uq=e=>e.status>=200&&e.status<=299,lq=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function XA(e){if(!tr(e))return e;let t={...e};for(let[r,n]of Object.entries(t))n===void 0&&delete t[r];return t}function cx({baseUrl:e,prepareHeaders:t=C=>C,fetchFn:r=JA,paramsSerializer:n,isJsonContentType:a=lq,jsonContentType:o="application/json",jsonReplacer:d,timeout:p,responseHandler:m,validateStatus:f,...S}={}){return typeof y>"u"&&r===JA&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(x,A,F)=>{let{getState:v,extra:b,endpoint:R,forced:E,type:P}=A,k,{url:N,headers:q=new h(S.headers),params:T=void 0,responseHandler:O=m??"json",validateStatus:D=f??uq,timeout:U=p,...K}=typeof x=="string"?{url:x}:x,H,B=A.signal;U&&(H=new i.AbortController,A.signal.addEventListener("abort",H.abort),B=H.signal);let _={...S,signal:B,...K};q=new h(XA(q)),_.headers=await t(q,{getState:v,arg:x,extra:b,endpoint:R,forced:E,type:P,extraOptions:F})||q;let z=de=>typeof de=="object"&&(tr(de)||Array.isArray(de)||typeof de.toJSON=="function");if(!_.headers.has("content-type")&&z(_.body)&&_.headers.set("content-type",o),z(_.body)&&a(_.headers)&&(_.body=JSON.stringify(_.body,d)),T){let de=~N.indexOf("?")?"&":"?",ye=n?n(T):new URLSearchParams(XA(T));N+=de+ye}N=sq(e,N);let $=new Request(N,_);k={request:new Request(N,_)};let Z,se=!1,fe=H&&setTimeout(()=>{se=!0,H.abort()},U);try{Z=await r($)}catch(de){return{error:{status:se?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(de)},meta:k}}finally{fe&&clearTimeout(fe),H?.signal.removeEventListener("abort",H.abort)}let Se=Z.clone();k.response=Se;let pe,ge="";try{let de;if(await Promise.all([C(Z,O).then(ye=>pe=ye,ye=>de=ye),Se.text().then(ye=>ge=ye,()=>{})]),de)throw de}catch(de){return{error:{status:"PARSING_ERROR",originalStatus:Z.status,data:ge,error:String(de)},meta:k}}return D(Z,pe)?{data:pe,meta:k}:{error:{status:Z.status,data:pe},meta:k}};async function C(x,A){if(typeof A=="function")return A(x);if(A==="content-type"&&(A=a(x.headers)?"json":"text"),A==="json"){let F=await x.text();return F.length?JSON.parse(F):null}return x.text()}}var li=class{constructor(e,t=void 0){this.value=e,this.meta=t}};async function dq(e=0,t=5){let r=Math.min(e,t),n=~~((Math.random()+.4)*(300<<r));await new Promise(a=>setTimeout(o=>a(o),n))}function pq(e,t){throw Object.assign(new li({error:e,meta:t}),{throwImmediately:!0})}var ZA={},mq=(e,t)=>async(r,n,a)=>{let o=[5,(t||ZA).maxRetries,(a||ZA).maxRetries].filter(S=>S!==void 0),[d]=o.slice(-1),m={maxRetries:d,backoff:dq,retryCondition:(S,C,{attempt:x})=>x<=d,...t,...a},f=0;for(;;)try{let S=await e(r,n,a);if(S.error)throw new li(S);return S}catch(S){if(f++,S.throwImmediately){if(S instanceof li)return S.value;throw S}if(S instanceof li&&!m.retryCondition(S.value.error,r,{attempt:f,baseQueryApi:n,extraOptions:a}))return S.value;await m.backoff(f,m.maxRetries)}},jl=Object.assign(mq,{fail:pq}),Og=w("__rtkq/focused"),ux=w("__rtkq/unfocused"),qg=w("__rtkq/online"),lx=w("__rtkq/offline");function jg(e){return e.type==="query"}function fq(e){return e.type==="mutation"}function Dg(e){return e.type==="infinitequery"}function Vg(e,t,r,n,a,o){return gq(e)?e(t,r,n,a).filter(ql).map(Ig).map(o):Array.isArray(e)?e.map(Ig).map(o):[]}function gq(e){return typeof e=="function"}function Ig(e){return typeof e=="string"?{type:e}:e}function yq(e,t){return e.catch(t)}var Rc=Symbol("forceQueryFn"),kg=e=>typeof e[Rc]=="function";function hq({serializeQueryArgs:e,queryThunk:t,infiniteQueryThunk:r,mutationThunk:n,api:a,context:o}){let d=new Map,p=new Map,{unsubscribeQueryResult:m,removeMutationResult:f,updateSubscriptionOptions:S}=a.internalActions;return{buildInitiateQuery:R,buildInitiateInfiniteQuery:E,buildInitiateMutation:P,getRunningQueryThunk:C,getRunningMutationThunk:x,getRunningQueriesThunk:A,getRunningMutationsThunk:F};function C(k,N){return q=>{let T=o.endpointDefinitions[k],O=e({queryArgs:N,endpointDefinition:T,endpointName:k});return d.get(q)?.[O]}}function x(k,N){return q=>p.get(q)?.[N]}function A(){return k=>Object.values(d.get(k)||{}).filter(ql)}function F(){return k=>Object.values(p.get(k)||{}).filter(ql)}function v(k){}function b(k,N){let q=(T,{subscribe:O=!0,forceRefetch:D,subscriptionOptions:U,[Rc]:K,...H}={})=>(B,_)=>{let z=e({queryArgs:T,endpointDefinition:N,endpointName:k}),$,X={...H,type:"query",subscribe:O,forceRefetch:D,subscriptionOptions:U,endpointName:k,originalArgs:T,queryCacheKey:z,[Rc]:K};if(jg(N))$=t(X);else{let{direction:Fe,initialPageParam:Oe}=H;$=r({...X,direction:Fe,initialPageParam:Oe})}let Z=a.endpoints[k].select(T),se=B($),fe=Z(_());let{requestId:Se,abort:pe}=se,ge=fe.requestId!==Se,de=d.get(B)?.[z],ye=()=>Z(_()),qe=Object.assign(K?se.then(ye):ge&&!de?Promise.resolve(fe):Promise.all([de,se]).then(ye),{arg:T,requestId:Se,subscriptionOptions:U,queryCacheKey:z,abort:pe,async unwrap(){let Fe=await qe;if(Fe.isError)throw Fe.error;return Fe.data},refetch:()=>B(q(T,{subscribe:!1,forceRefetch:!0})),unsubscribe(){O&&B(m({queryCacheKey:z,requestId:Se}))},updateSubscriptionOptions(Fe){qe.subscriptionOptions=Fe,B(S({endpointName:k,requestId:Se,queryCacheKey:z,options:Fe}))}});if(!de&&!ge&&!K){let Fe=cq(d,B,{});Fe[z]=qe,qe.then(()=>{delete Fe[z],ui(Fe)||d.delete(B)})}return qe};return q}function R(k,N){return b(k,N)}function E(k,N){return b(k,N)}function P(k){return(N,{track:q=!0,fixedCacheKey:T}={})=>(O,D)=>{let U=n({type:"mutation",endpointName:k,originalArgs:N,track:q,fixedCacheKey:T}),K=O(U);let{requestId:H,abort:B,unwrap:_}=K,z=yq(K.unwrap().then(se=>({data:se})),se=>({error:se})),$=()=>{O(f({requestId:H,fixedCacheKey:T}))},X=Object.assign(z,{arg:K.arg,requestId:H,abort:B,unwrap:_,reset:$}),Z=p.get(O)||{};return p.set(O,Z),Z[H]=X,X.then(()=>{delete Z[H],ui(Z)||p.delete(O)}),T&&(Z[T]=X,X.then(()=>{Z[T]===X&&(delete Z[T],ui(Z)||p.delete(O))})),X}}}function Sq(e){return e}var Tl=(e={})=>({...e,[tc]:!0});function Cq({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:n,api:a,assertTagType:o,selectors:d}){let p=(O,D,U,K)=>(H,B)=>{let _=r[O],z=n({queryArgs:D,endpointDefinition:_,endpointName:O});if(H(a.internalActions.queryResultPatched({queryCacheKey:z,patches:U})),!K)return;let $=a.endpoints[O].select(D)(B()),X=Vg(_.providesTags,$.data,void 0,D,{},o);H(a.internalActions.updateProvidedBy({queryCacheKey:z,providedTags:X}))};function m(O,D,U=0){let K=[D,...O];return U&&K.length>U?K.slice(0,-1):K}function f(O,D,U=0){let K=[...O,D];return U&&K.length>U?K.slice(1):K}let S=(O,D,U,K=!0)=>(H,B)=>{let z=a.endpoints[O].select(D)(B()),$={patches:[],inversePatches:[],undo:()=>H(a.util.patchQueryData(O,D,$.inversePatches,K))};if(z.status==="uninitialized")return $;let X;if("data"in z)if(ft(z.data)){let[Z,se,fe]=Ru(z.data,U);$.patches.push(...se),$.inversePatches.push(...fe),X=Z}else X=U(z.data),$.patches.push({op:"replace",path:[],value:X}),$.inversePatches.push({op:"replace",path:[],value:z.data});return $.patches.length===0||H(a.util.patchQueryData(O,D,$.patches,K)),$},C=(O,D,U)=>K=>K(a.endpoints[O].initiate(D,{subscribe:!1,forceRefetch:!0,[Rc]:()=>({data:U})})),x=(O,D)=>O.query&&O[D]?O[D]:Sq,A=async(O,{signal:D,abort:U,rejectWithValue:K,fulfillWithValue:H,dispatch:B,getState:_,extra:z})=>{let $=r[O.endpointName];try{let X=x($,"transformResponse"),Z={signal:D,abort:U,dispatch:B,getState:_,extra:z,endpoint:O.endpointName,type:O.type,forced:O.type==="query"?F(O,_()):void 0,queryCacheKey:O.type==="query"?O.queryCacheKey:void 0},se=O.type==="query"?O[Rc]:void 0,fe,Se=async(ge,de,ye,qe)=>{if(de==null&&ge.pages.length)return Promise.resolve({data:ge});let Fe={queryArg:O.originalArgs,pageParam:de},Oe=await pe(Fe),De=qe?m:f;return{data:{pages:De(ge.pages,Oe.data,ye),pageParams:De(ge.pageParams,de,ye)}}};async function pe(ge){let de,{extraOptions:ye}=$;if(se?de=se():$.query?de=await t($.query(ge),Z,ye):de=await $.queryFn(ge,Z,ye,Fe=>t(Fe,Z,ye)),typeof process<"u",de.error)throw new li(de.error,de.meta);let qe=await X(de.data,de.meta,ge);return{...de,data:qe}}if(O.type==="query"&&"infiniteQueryOptions"in $){let{infiniteQueryOptions:ge}=$,{maxPages:de=1/0}=ge,ye,qe={pages:[],pageParams:[]},Fe=d.selectQueryEntry(_(),O.queryCacheKey)?.data,De=F(O,_())&&!O.direction||!Fe?qe:Fe;if("direction"in O&&O.direction&&De.pages.length){let pt=O.direction==="backward",an=(pt?dx:Tg)(ge,De);ye=await Se(De,an,de,pt)}else{let{initialPageParam:pt=ge.initialPageParam}=O,Pt=Fe?.pageParams??[],an=Pt[0]??pt,Xa=Pt.length;ye=await Se(De,an,de),se&&(ye={data:ye.data.pages[0]});for(let Za=1;Za<Xa;Za++){let Ds=Tg(ge,ye.data);ye=await Se(ye.data,Ds,de)}}fe=ye}else fe=await pe(O.originalArgs);return H(fe.data,Tl({fulfilledTimeStamp:Date.now(),baseQueryMeta:fe.meta}))}catch(X){let Z=X;if(Z instanceof li){let se=x($,"transformErrorResponse");try{return K(await se(Z.value,Z.meta,O.originalArgs),Tl({baseQueryMeta:Z.meta}))}catch(fe){Z=fe}}throw typeof process<"u",console.error(Z),Z}};function F(O,D){let U=d.selectQueryEntry(D,O.queryCacheKey),K=d.selectConfig(D).refetchOnMountOrArgChange,H=U?.fulfilledTimeStamp,B=O.forceRefetch??(O.subscribe&&K);return B?B===!0||(Number(new Date)-Number(H))/1e3>=B:!1}let v=()=>oe(`${e}/executeQuery`,A,{getPendingMeta({arg:D}){let U=r[D.endpointName];return Tl({startedTimeStamp:Date.now(),...Dg(U)?{direction:D.direction}:{}})},condition(D,{getState:U}){let K=U(),H=d.selectQueryEntry(K,D.queryCacheKey),B=H?.fulfilledTimeStamp,_=D.originalArgs,z=H?.originalArgs,$=r[D.endpointName],X=D.direction;return kg(D)?!0:H?.status==="pending"?!1:F(D,K)||jg($)&&$?.forceRefetch?.({currentArg:_,previousArg:z,endpointState:H,state:K})?!0:!(B&&!X)},dispatchConditionRejection:!0}),b=v(),R=v(),E=oe(`${e}/executeMutation`,A,{getPendingMeta(){return Tl({startedTimeStamp:Date.now()})}}),P=O=>"force"in O,k=O=>"ifOlderThan"in O,N=(O,D,U)=>(K,H)=>{let B=P(U)&&U.force,_=k(U)&&U.ifOlderThan,z=(X=!0)=>{let Z={forceRefetch:X,isPrefetch:!0};return a.endpoints[O].initiate(D,Z)},$=a.endpoints[O].select(D)(H());if(B)K(z());else if(_){let X=$?.fulfilledTimeStamp;if(!X){K(z());return}(Number(new Date)-Number(new Date(X)))/1e3>=_&&K(z())}else K(z(!1))};function q(O){return D=>D?.meta?.arg?.endpointName===O}function T(O,D){return{matchPending:ho(Iu(O),q(D)),matchFulfilled:ho(Lr(O),q(D)),matchRejected:ho(pa(O),q(D))}}return{queryThunk:b,mutationThunk:E,infiniteQueryThunk:R,prefetch:N,updateQueryData:S,upsertQueryData:C,patchQueryData:p,buildMatchThunkActions:T}}function Tg(e,{pages:t,pageParams:r}){let n=t.length-1;return e.getNextPageParam(t[n],t,r[n],r)}function dx(e,{pages:t,pageParams:r}){return e.getPreviousPageParam?.(t[0],t,r[0],r)}function px(e,t,r,n){return Vg(r[e.meta.arg.endpointName][t],Lr(e)?e.payload:void 0,nc(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function Ol(e,t,r){let n=e[t];n&&r(n)}function bc(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function ex(e,t,r){let n=e[bc(t)];n&&r(n)}var Fc={};function Aq({reducerPath:e,queryThunk:t,mutationThunk:r,serializeQueryArgs:n,context:{endpointDefinitions:a,apiUid:o,extractRehydrationInfo:d,hasRehydrationInfo:p},assertTagType:m,config:f}){let S=w(`${e}/resetApiState`);function C(q,T,O,D){var U;q[U=T.queryCacheKey]??(q[U]={status:"uninitialized",endpointName:T.endpointName}),Ol(q,T.queryCacheKey,K=>{K.status="pending",K.requestId=O&&K.requestId?K.requestId:D.requestId,T.originalArgs!==void 0&&(K.originalArgs=T.originalArgs),K.startedTimeStamp=D.startedTimeStamp;let H=a[D.arg.endpointName];Dg(H)&&"direction"in T&&(K.direction=T.direction)})}function x(q,T,O,D){Ol(q,T.arg.queryCacheKey,U=>{if(U.requestId!==T.requestId&&!D)return;let{merge:K}=a[T.arg.endpointName];if(U.status="fulfilled",K)if(U.data!==void 0){let{fulfilledTimeStamp:H,arg:B,baseQueryMeta:_,requestId:z}=T,$=Mr(U.data,X=>K(X,O,{arg:B.originalArgs,baseQueryMeta:_,fulfilledTimeStamp:H,requestId:z}));U.data=$}else U.data=O;else U.data=a[T.arg.endpointName].structuralSharing??!0?sx(Rt(U.data)?uf(U.data):U.data,O):O;delete U.error,U.fulfilledTimeStamp=T.fulfilledTimeStamp})}let A=ma({name:`${e}/queries`,initialState:Fc,reducers:{removeQueryResult:{reducer(q,{payload:{queryCacheKey:T}}){delete q[T]},prepare:So()},cacheEntriesUpserted:{reducer(q,T){for(let O of T.payload){let{queryDescription:D,value:U}=O;C(q,D,!0,{arg:D,requestId:T.meta.requestId,startedTimeStamp:T.meta.timestamp}),x(q,{arg:D,requestId:T.meta.requestId,fulfilledTimeStamp:T.meta.timestamp,baseQueryMeta:{}},U,!0)}},prepare:q=>({payload:q.map(D=>{let{endpointName:U,arg:K,value:H}=D,B=a[U];return{queryDescription:{type:"query",endpointName:U,originalArgs:D.arg,queryCacheKey:n({queryArgs:K,endpointDefinition:B,endpointName:U})},value:H}}),meta:{[tc]:!0,requestId:ac(),timestamp:Date.now()}})},queryResultPatched:{reducer(q,{payload:{queryCacheKey:T,patches:O}}){Ol(q,T,D=>{D.data=df(D.data,O.concat())})},prepare:So()}},extraReducers(q){q.addCase(t.pending,(T,{meta:O,meta:{arg:D}})=>{let U=kg(D);C(T,D,U,O)}).addCase(t.fulfilled,(T,{meta:O,payload:D})=>{let U=kg(O.arg);x(T,O,D,U)}).addCase(t.rejected,(T,{meta:{condition:O,arg:D,requestId:U},error:K,payload:H})=>{Ol(T,D.queryCacheKey,B=>{if(!O){if(B.requestId!==U)return;B.status="rejected",B.error=H??K}})}).addMatcher(p,(T,O)=>{let{queries:D}=d(O);for(let[U,K]of Object.entries(D))(K?.status==="fulfilled"||K?.status==="rejected")&&(T[U]=K)})}}),F=ma({name:`${e}/mutations`,initialState:Fc,reducers:{removeMutationResult:{reducer(q,{payload:T}){let O=bc(T);O in q&&delete q[O]},prepare:So()}},extraReducers(q){q.addCase(r.pending,(T,{meta:O,meta:{requestId:D,arg:U,startedTimeStamp:K}})=>{U.track&&(T[bc(O)]={requestId:D,status:"pending",endpointName:U.endpointName,startedTimeStamp:K})}).addCase(r.fulfilled,(T,{payload:O,meta:D})=>{D.arg.track&&ex(T,D,U=>{U.requestId===D.requestId&&(U.status="fulfilled",U.data=O,U.fulfilledTimeStamp=D.fulfilledTimeStamp)})}).addCase(r.rejected,(T,{payload:O,error:D,meta:U})=>{U.arg.track&&ex(T,U,K=>{K.requestId===U.requestId&&(K.status="rejected",K.error=O??D)})}).addMatcher(p,(T,O)=>{let{mutations:D}=d(O);for(let[U,K]of Object.entries(D))(K?.status==="fulfilled"||K?.status==="rejected")&&U!==K?.requestId&&(T[U]=K)})}}),v=ma({name:`${e}/invalidation`,initialState:Fc,reducers:{updateProvidedBy:{reducer(q,T){var U,K;let{queryCacheKey:O,providedTags:D}=T.payload;for(let H of Object.values(q))for(let B of Object.values(H)){let _=B.indexOf(O);_!==-1&&B.splice(_,1)}for(let{type:H,id:B}of D){let _=(U=q[H]??(q[H]={}))[K=B||"__internal_without_id"]??(U[K]=[]);_.includes(O)||_.push(O)}},prepare:So()}},extraReducers(q){q.addCase(A.actions.removeQueryResult,(T,{payload:{queryCacheKey:O}})=>{for(let D of Object.values(T))for(let U of Object.values(D)){let K=U.indexOf(O);K!==-1&&U.splice(K,1)}}).addMatcher(p,(T,O)=>{var U,K;let{provided:D}=d(O);for(let[H,B]of Object.entries(D))for(let[_,z]of Object.entries(B)){let $=(U=T[H]??(T[H]={}))[K=_||"__internal_without_id"]??(U[K]=[]);for(let X of z)$.includes(X)||$.push(X)}}).addMatcher(rr(Lr(t),nc(t)),(T,O)=>{let D=px(O,"providesTags",a,m),{queryCacheKey:U}=O.meta.arg;v.caseReducers.updateProvidedBy(T,v.actions.updateProvidedBy({queryCacheKey:U,providedTags:D}))})}}),b=ma({name:`${e}/subscriptions`,initialState:Fc,reducers:{updateSubscriptionOptions(q,T){},unsubscribeQueryResult(q,T){},internal_getRTKQSubscriptions(){}}}),R=ma({name:`${e}/internalSubscriptions`,initialState:Fc,reducers:{subscriptionsUpdated:{reducer(q,T){return df(q,T.payload)},prepare:So()}}}),E=ma({name:`${e}/config`,initialState:{online:aq(),focused:nq(),middlewareRegistered:!1,...f},reducers:{middlewareRegistered(q,{payload:T}){q.middlewareRegistered=q.middlewareRegistered==="conflict"||o!==T?"conflict":!0}},extraReducers:q=>{q.addCase(qg,T=>{T.online=!0}).addCase(lx,T=>{T.online=!1}).addCase(Og,T=>{T.focused=!0}).addCase(ux,T=>{T.focused=!1}).addMatcher(p,T=>({...T}))}}),P=uo({queries:A.reducer,mutations:F.reducer,provided:v.reducer,subscriptions:R.reducer,config:E.reducer}),k=(q,T)=>P(S.match(T)?void 0:q,T),N={...E.actions,...A.actions,...b.actions,...R.actions,...F.actions,...v.actions,resetApiState:S};return{reducer:k,actions:N}}var xa=Symbol.for("RTKQ/skipToken"),mx={status:"uninitialized"},tx=Mr(mx,()=>{}),rx=Mr(mx,()=>{});function xq({serializeQueryArgs:e,reducerPath:t,createSelector:r}){let n=P=>tx,a=P=>rx;return{buildQuerySelector:x,buildInfiniteQuerySelector:A,buildMutationSelector:F,selectInvalidatedBy:v,selectCachedArgsForQuery:b,selectApiState:d,selectQueries:p,selectMutations:f,selectQueryEntry:m,selectConfig:S};function o(P){return{...P,...zA(P.status)}}function d(P){return P[t]}function p(P){return d(P)?.queries}function m(P,k){return p(P)?.[k]}function f(P){return d(P)?.mutations}function S(P){return d(P)?.config}function C(P,k,N){return q=>{if(q===xa)return r(n,N);let T=e({queryArgs:q,endpointDefinition:k,endpointName:P});return r(D=>m(D,T)??tx,N)}}function x(P,k){return C(P,k,o)}function A(P,k){let{infiniteQueryOptions:N}=k;function q(T){let O={...T,...zA(T.status)},{isLoading:D,isError:U,direction:K}=O,H=K==="forward",B=K==="backward";return{...O,hasNextPage:R(N,O.data),hasPreviousPage:E(N,O.data),isFetchingNextPage:D&&H,isFetchingPreviousPage:D&&B,isFetchNextPageError:U&&H,isFetchPreviousPageError:U&&B}}return C(P,k,q)}function F(){return P=>{let k;return typeof P=="object"?k=bc(P)??xa:k=P,r(k===xa?a:T=>d(T)?.mutations?.[k]??rx,o)}}function v(P,k){let N=P[t],q=new Set;for(let T of k.filter(ql).map(Ig)){let O=N.provided[T.type];if(!O)continue;let D=(T.id!==void 0?O[T.id]:KA(Object.values(O)))??[];for(let U of D)q.add(U)}return KA(Array.from(q.values()).map(T=>{let O=N.queries[T];return O?[{queryCacheKey:T,endpointName:O.endpointName,originalArgs:O.originalArgs}]:[]}))}function b(P,k){return Object.values(p(P)).filter(N=>N?.endpointName===k&&N.status!=="uninitialized").map(N=>N.originalArgs)}function R(P,k){return k?Tg(P,k)!=null:!1}function E(P,k){return!k||!P.getPreviousPageParam?!1:dx(P,k)!=null}}var nx=WeakMap?new WeakMap:void 0,ax=({endpointName:e,queryArgs:t})=>{let r="",n=nx?.get(t);if(typeof n=="string")r=n;else{let a=JSON.stringify(t,(o,d)=>(d=typeof d=="bigint"?{$bigint:d.toString()}:d,d=tr(d)?Object.keys(d).sort().reduce((p,m)=>(p[m]=d[m],p),{}):d,d));tr(t)&&nx?.set(t,a),r=a}return`${e}(${r})`};function Fq(...e){return function(r){let n=go(f=>r.extractRehydrationInfo?.(f,{reducerPath:r.reducerPath??"api"})),a={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...r,extractRehydrationInfo:n,serializeQueryArgs(f){let S=ax;if("serializeQueryArgs"in f.endpointDefinition){let C=f.endpointDefinition.serializeQueryArgs;S=x=>{let A=C(x);return typeof A=="string"?A:ax({...x,queryArgs:A})}}else r.serializeQueryArgs&&(S=r.serializeQueryArgs);return S(f)},tagTypes:[...r.tagTypes||[]]},o={endpointDefinitions:{},batch(f){f()},apiUid:ac(),extractRehydrationInfo:n,hasRehydrationInfo:go(f=>n(f)!=null)},d={injectEndpoints:m,enhanceEndpoints({addTagTypes:f,endpoints:S}){if(f)for(let C of f)a.tagTypes.includes(C)||a.tagTypes.push(C);if(S)for(let[C,x]of Object.entries(S))typeof x=="function"?x(o.endpointDefinitions[C]):Object.assign(o.endpointDefinitions[C]||{},x);return d}},p=e.map(f=>f.init(d,a,o));function m(f){let S=f.endpoints({query:C=>({...C,type:"query"}),mutation:C=>({...C,type:"mutation"}),infiniteQuery:C=>({...C,type:"infinitequery"})});for(let[C,x]of Object.entries(S)){if(f.overrideExisting!==!0&&C in o.endpointDefinitions){if(f.overrideExisting==="throw")throw new Error(lt(39));typeof process<"u";continue}typeof process<"u",o.endpointDefinitions[C]=x;for(let A of p)A.injectEndpoint(C,x)}return d}return d.injectEndpoints({endpoints:r.endpoints})}}function Gr(e,...t){return Object.assign(e,...t)}var Rq=({api:e,queryThunk:t,internalState:r})=>{let n=`${e.reducerPath}/subscriptions`,a=null,o=null,{updateSubscriptionOptions:d,unsubscribeQueryResult:p}=e.internalActions,m=(A,F)=>{var b,R;if(d.match(F)){let{queryCacheKey:E,requestId:P,options:k}=F.payload;return A?.[E]?.[P]&&(A[E][P]=k),!0}if(p.match(F)){let{queryCacheKey:E,requestId:P}=F.payload;return A[E]&&delete A[E][P],!0}if(e.internalActions.removeQueryResult.match(F))return delete A[F.payload.queryCacheKey],!0;if(t.pending.match(F)){let{meta:{arg:E,requestId:P}}=F,k=A[b=E.queryCacheKey]??(A[b]={});return k[`${P}_running`]={},E.subscribe&&(k[P]=E.subscriptionOptions??k[P]??{}),!0}let v=!1;if(t.fulfilled.match(F)||t.rejected.match(F)){let E=A[F.meta.arg.queryCacheKey]||{},P=`${F.meta.requestId}_running`;v||(v=!!E[P]),delete E[P]}if(t.rejected.match(F)){let{meta:{condition:E,arg:P,requestId:k}}=F;if(E&&P.subscribe){let N=A[R=P.queryCacheKey]??(A[R]={});N[k]=P.subscriptionOptions??N[k]??{},v=!0}}return v},f=()=>r.currentSubscriptions,x={getSubscriptions:f,getSubscriptionCount:A=>{let v=f()[A]??{};return ui(v)},isRequestSubscribed:(A,F)=>!!f()?.[A]?.[F]};return(A,F)=>{if(a||(a=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(A))return a=r.currentSubscriptions={},o=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(A))return[!1,x];let v=m(r.currentSubscriptions,A),b=!0;if(v){o||(o=setTimeout(()=>{let P=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,k]=Ru(a,()=>P);F.next(e.internalActions.subscriptionsUpdated(k)),a=P,o=null},500));let R=typeof A.type=="string"&&!!A.type.startsWith(n),E=t.rejected.match(A)&&A.meta.condition&&!!A.meta.arg.subscribe;b=!R&&!E}return[b,!1]}};function bq(e){for(let t in e)return!1;return!0}var vq=2147483647/1e3-1,wq=({reducerPath:e,api:t,queryThunk:r,context:n,internalState:a,selectors:{selectQueryEntry:o,selectConfig:d}})=>{let{removeQueryResult:p,unsubscribeQueryResult:m,cacheEntriesUpserted:f}=t.internalActions,S=rr(m.match,r.fulfilled,r.rejected,f.match);function C(b){let R=a.currentSubscriptions[b];return!!R&&!bq(R)}let x={},A=(b,R,E)=>{let P=R.getState(),k=d(P);if(S(b)){let N;if(f.match(b))N=b.payload.map(q=>q.queryDescription.queryCacheKey);else{let{queryCacheKey:q}=m.match(b)?b.payload:b.meta.arg;N=[q]}F(N,R,k)}if(t.util.resetApiState.match(b))for(let[N,q]of Object.entries(x))q&&clearTimeout(q),delete x[N];if(n.hasRehydrationInfo(b)){let{queries:N}=n.extractRehydrationInfo(b);F(Object.keys(N),R,k)}};function F(b,R,E){let P=R.getState();for(let k of b){let N=o(P,k);v(k,N?.endpointName,R,E)}}function v(b,R,E,P){let N=n.endpointDefinitions[R]?.keepUnusedDataFor??P.keepUnusedDataFor;if(N===1/0)return;let q=Math.max(0,Math.min(N,vq));if(!C(b)){let T=x[b];T&&clearTimeout(T),x[b]=setTimeout(()=>{C(b)||E.dispatch(p({queryCacheKey:b})),delete x[b]},q*1e3)}}return A},ox=new Error("Promise never resolved before cacheEntryRemoved."),Pq=({api:e,reducerPath:t,context:r,queryThunk:n,mutationThunk:a,internalState:o,selectors:{selectQueryEntry:d,selectApiState:p}})=>{let m=ku(n),f=ku(a),S=Lr(n,a),C={};function x(R,E,P){let k=C[R];k?.valueResolved&&(k.valueResolved({data:E,meta:P}),delete k.valueResolved)}function A(R){let E=C[R];E&&(delete C[R],E.cacheEntryRemoved())}let F=(R,E,P)=>{let k=v(R);function N(q,T,O,D){let U=d(P,T),K=d(E.getState(),T);!U&&K&&b(q,D,T,E,O)}if(n.pending.match(R))N(R.meta.arg.endpointName,k,R.meta.requestId,R.meta.arg.originalArgs);else if(e.internalActions.cacheEntriesUpserted.match(R))for(let{queryDescription:q,value:T}of R.payload){let{endpointName:O,originalArgs:D,queryCacheKey:U}=q;N(O,U,R.meta.requestId,D),x(U,T,{})}else if(a.pending.match(R))E.getState()[t].mutations[k]&&b(R.meta.arg.endpointName,R.meta.arg.originalArgs,k,E,R.meta.requestId);else if(S(R))x(k,R.payload,R.meta.baseQueryMeta);else if(e.internalActions.removeQueryResult.match(R)||e.internalActions.removeMutationResult.match(R))A(k);else if(e.util.resetApiState.match(R))for(let q of Object.keys(C))A(q)};function v(R){return m(R)?R.meta.arg.queryCacheKey:f(R)?R.meta.arg.fixedCacheKey??R.meta.requestId:e.internalActions.removeQueryResult.match(R)?R.payload.queryCacheKey:e.internalActions.removeMutationResult.match(R)?bc(R.payload):""}function b(R,E,P,k,N){let q=r.endpointDefinitions[R],T=q?.onCacheEntryAdded;if(!T)return;let O={},D=new Promise(z=>{O.cacheEntryRemoved=z}),U=Promise.race([new Promise(z=>{O.valueResolved=z}),D.then(()=>{throw ox})]);U.catch(()=>{}),C[P]=O;let K=e.endpoints[R].select(q.type==="query"?E:P),H=k.dispatch((z,$,X)=>X),B={...k,getCacheEntry:()=>K(k.getState()),requestId:N,extra:H,updateCachedData:q.type==="query"?z=>k.dispatch(e.util.updateQueryData(R,E,z)):void 0,cacheDataLoaded:U,cacheEntryRemoved:D},_=T(E,B);Promise.resolve(_).catch(z=>{if(z!==ox)throw z})}return F},Eq=({api:e,context:{apiUid:t},reducerPath:r})=>(n,a)=>{e.util.resetApiState.match(n)&&a.dispatch(e.internalActions.middlewareRegistered(t)),typeof process<"u"},Iq=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:n,queryThunk:a,api:o,assertTagType:d,refetchQuery:p,internalState:m})=>{let{removeQueryResult:f}=o.internalActions,S=rr(Lr(n),nc(n)),C=rr(Lr(n,a),pa(n,a)),x=[],A=(b,R)=>{S(b)?v(px(b,"invalidatesTags",r,d),R):C(b)?v([],R):o.util.invalidateTags.match(b)&&v(Vg(b.payload,void 0,void 0,void 0,void 0,d),R)};function F(b){let{queries:R,mutations:E}=b;for(let P of[R,E])for(let k in P)if(P[k]?.status==="pending")return!0;return!1}function v(b,R){let E=R.getState(),P=E[e];if(x.push(...b),P.config.invalidationBehavior==="delayed"&&F(P))return;let k=x;if(x=[],k.length===0)return;let N=o.util.selectInvalidatedBy(E,k);t.batch(()=>{let q=Array.from(N.values());for(let{queryCacheKey:T}of q){let O=P.queries[T],D=m.currentSubscriptions[T]??{};O&&(ui(D)===0?R.dispatch(f({queryCacheKey:T})):O.status!=="uninitialized"&&R.dispatch(p(O)))}})}return A},kq=({reducerPath:e,queryThunk:t,api:r,refetchQuery:n,internalState:a})=>{let o={},d=(A,F)=>{(r.internalActions.updateSubscriptionOptions.match(A)||r.internalActions.unsubscribeQueryResult.match(A))&&f(A.payload,F),(t.pending.match(A)||t.rejected.match(A)&&A.meta.condition)&&f(A.meta.arg,F),(t.fulfilled.match(A)||t.rejected.match(A)&&!A.meta.condition)&&m(A.meta.arg,F),r.util.resetApiState.match(A)&&C()};function p(A,F){let b=F.getState()[e].queries[A],R=a.currentSubscriptions[A];if(!(!b||b.status==="uninitialized"))return R}function m({queryCacheKey:A},F){let v=F.getState()[e],b=v.queries[A],R=a.currentSubscriptions[A];if(!b||b.status==="uninitialized")return;let{lowestPollingInterval:E,skipPollingIfUnfocused:P}=x(R);if(!Number.isFinite(E))return;let k=o[A];k?.timeout&&(clearTimeout(k.timeout),k.timeout=void 0);let N=Date.now()+E;o[A]={nextPollTimestamp:N,pollingInterval:E,timeout:setTimeout(()=>{(v.config.focused||!P)&&F.dispatch(n(b)),m({queryCacheKey:A},F)},E)}}function f({queryCacheKey:A},F){let b=F.getState()[e].queries[A],R=a.currentSubscriptions[A];if(!b||b.status==="uninitialized")return;let{lowestPollingInterval:E}=x(R);if(!Number.isFinite(E)){S(A);return}let P=o[A],k=Date.now()+E;(!P||k<P.nextPollTimestamp)&&m({queryCacheKey:A},F)}function S(A){let F=o[A];F?.timeout&&clearTimeout(F.timeout),delete o[A]}function C(){for(let A of Object.keys(o))S(A)}function x(A={}){let F=!1,v=Number.POSITIVE_INFINITY;for(let b in A)A[b].pollingInterval&&(v=Math.min(A[b].pollingInterval,v),F=A[b].skipPollingIfUnfocused||F);return{lowestPollingInterval:v,skipPollingIfUnfocused:F}}return d},Tq=({api:e,context:t,queryThunk:r,mutationThunk:n})=>{let a=Iu(r,n),o=pa(r,n),d=Lr(r,n),p={};return(f,S)=>{if(a(f)){let{requestId:C,arg:{endpointName:x,originalArgs:A}}=f.meta,F=t.endpointDefinitions[x],v=F?.onQueryStarted;if(v){let b={},R=new Promise((N,q)=>{b.resolve=N,b.reject=q});R.catch(()=>{}),p[C]=b;let E=e.endpoints[x].select(F.type==="query"?A:C),P=S.dispatch((N,q,T)=>T),k={...S,getCacheEntry:()=>E(S.getState()),requestId:C,extra:P,updateCachedData:F.type==="query"?N=>S.dispatch(e.util.updateQueryData(x,A,N)):void 0,queryFulfilled:R};v(A,k)}}else if(d(f)){let{requestId:C,baseQueryMeta:x}=f.meta;p[C]?.resolve({data:f.payload,meta:x}),delete p[C]}else if(o(f)){let{requestId:C,rejectedWithValue:x,baseQueryMeta:A}=f.meta;p[C]?.reject({error:f.payload??f.error,isUnhandledError:!x,meta:A}),delete p[C]}}},Oq=({reducerPath:e,context:t,api:r,refetchQuery:n,internalState:a})=>{let{removeQueryResult:o}=r.internalActions,d=(m,f)=>{Og.match(m)&&p(f,"refetchOnFocus"),qg.match(m)&&p(f,"refetchOnReconnect")};function p(m,f){let S=m.getState()[e],C=S.queries,x=a.currentSubscriptions;t.batch(()=>{for(let A of Object.keys(x)){let F=C[A],v=x[A];if(!v||!F)continue;(Object.values(v).some(R=>R[f]===!0)||Object.values(v).every(R=>R[f]===void 0)&&S.config[f])&&(ui(v)===0?m.dispatch(o({queryCacheKey:A})):F.status!=="uninitialized"&&m.dispatch(n(F)))}})}return d};function qq(e){let{reducerPath:t,queryThunk:r,api:n,context:a}=e,{apiUid:o}=a,d={invalidateTags:w(`${t}/invalidateTags`)},p=C=>C.type.startsWith(`${t}/`),m=[Eq,wq,Iq,kq,Pq,Tq];return{middleware:C=>{let x=!1,F={...e,internalState:{currentSubscriptions:{}},refetchQuery:S,isThisApiSliceAction:p},v=m.map(E=>E(F)),b=Rq(F),R=Oq(F);return E=>P=>{if(!po(P))return E(P);x||(x=!0,C.dispatch(n.internalActions.middlewareRegistered(o)));let k={...C,next:E},N=C.getState(),[q,T]=b(P,k,N),O;if(q?O=E(P):O=T,C.getState()[t]&&(R(P,k,N),p(P)||a.hasRehydrationInfo(P)))for(let D of v)D(P,k,N);return O}},actions:d};function S(C){return e.api.endpoints[C.endpointName].initiate(C.originalArgs,{subscribe:!1,forceRefetch:!0})}}var ix=Symbol(),jq=({createSelector:e=we}={})=>({name:ix,init(t,{baseQuery:r,tagTypes:n,reducerPath:a,serializeQueryArgs:o,keepUnusedDataFor:d,refetchOnMountOrArgChange:p,refetchOnFocus:m,refetchOnReconnect:f,invalidationBehavior:S},C){hS();let x=pe=>(typeof process<"u",pe);Object.assign(t,{reducerPath:a,endpoints:{},internalActions:{onOnline:qg,onOffline:lx,onFocus:Og,onFocusLost:ux},util:{}});let A=xq({serializeQueryArgs:o,reducerPath:a,createSelector:e}),{selectInvalidatedBy:F,selectCachedArgsForQuery:v,buildQuerySelector:b,buildInfiniteQuerySelector:R,buildMutationSelector:E}=A;Gr(t.util,{selectInvalidatedBy:F,selectCachedArgsForQuery:v});let{queryThunk:P,infiniteQueryThunk:k,mutationThunk:N,patchQueryData:q,updateQueryData:T,upsertQueryData:O,prefetch:D,buildMatchThunkActions:U}=Cq({baseQuery:r,reducerPath:a,context:C,api:t,serializeQueryArgs:o,assertTagType:x,selectors:A}),{reducer:K,actions:H}=Aq({context:C,queryThunk:P,infiniteQueryThunk:k,mutationThunk:N,serializeQueryArgs:o,reducerPath:a,assertTagType:x,config:{refetchOnFocus:m,refetchOnReconnect:f,refetchOnMountOrArgChange:p,keepUnusedDataFor:d,reducerPath:a,invalidationBehavior:S}});Gr(t.util,{patchQueryData:q,updateQueryData:T,upsertQueryData:O,prefetch:D,resetApiState:H.resetApiState,upsertQueryEntries:H.cacheEntriesUpserted}),Gr(t.internalActions,H);let{middleware:B,actions:_}=qq({reducerPath:a,context:C,queryThunk:P,mutationThunk:N,infiniteQueryThunk:k,api:t,assertTagType:x,selectors:A});Gr(t.util,_),Gr(t,{reducer:K,middleware:B});let{buildInitiateQuery:z,buildInitiateInfiniteQuery:$,buildInitiateMutation:X,getRunningMutationThunk:Z,getRunningMutationsThunk:se,getRunningQueriesThunk:fe,getRunningQueryThunk:Se}=hq({queryThunk:P,mutationThunk:N,infiniteQueryThunk:k,api:t,serializeQueryArgs:o,context:C});return Gr(t.util,{getRunningMutationThunk:Z,getRunningMutationsThunk:se,getRunningQueryThunk:Se,getRunningQueriesThunk:fe}),{name:ix,injectEndpoint(pe,ge){var qe;let ye=(qe=t.endpoints)[pe]??(qe[pe]={});jg(ge)&&Gr(ye,{name:pe,select:b(pe,ge),initiate:z(pe,ge)},U(P,pe)),fq(ge)&&Gr(ye,{name:pe,select:E(),initiate:X(pe)},U(N,pe)),Dg(ge)&&Gr(ye,{name:pe,select:R(pe,ge),initiate:$(pe,ge)},U(P,pe))}}}}),Dl=Fq(jq());l();s();u();c();var Ng=async(e,t,r)=>{let n=t.getState(),{accessToken:a,environment:o,organizationId:d}=n.configuration,p=n.generatedAnswer.answerConfigurationId,m={...e,headers:{...e?.headers||{},Authorization:`Bearer ${a}`}};try{let f=Ve(d,o);return{data:cx({baseUrl:`${f}/rest/organizations/${d}/answer/v1/configs/${p}`,fetchFn:async C=>{if(C instanceof String)throw new Error("The provided 'request' must be a Request object.");let x=C.url,A={};return["method","headers","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal"].forEach(F=>{A[F]=C[F]}),A.duplex="half",A.body=await C.text(),y(x,A)}})(m,{...t,signal:null},r)}}catch(f){return{error:f}}},Vl=Dl({reducerPath:"answer",baseQuery:jl(Ng,{maxRetries:3}),endpoints:()=>({})});var $r=Dl({reducerPath:"answerGenerationApi",refetchOnMountOrArgChange:!0,baseQuery:jl(Ng,{maxRetries:3}),endpoints:()=>({})});l();s();u();c();l();s();u();c();l();s();u();c();var Fa=e=>e.query,fx=e=>e.query?.enableQuerySyntax;var gx=we(e=>Fa(e)?.q,e=>e.search.requestId,e=>e.generatedAnswer.cannotAnswer,e=>e.configuration.analytics.analyticsMode,e=>e.search.searchAction?.actionCause,(e,t,r,n,a)=>({q:e,requestId:t,cannotAnswer:r,analyticsMode:n,actionCause:a})),di=we(e=>e.generatedAnswer?.answerApiQueryParams,e=>e);l();s();u();c();l();s();u();c();l();s();u();c();var Nl=()=>({contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!1,isLoading:!0});l();s();u();c();l();s();u();c();l();s();u();c();var yx=(e,t)=>{t&&(e.answerId=t)},hx=(e,t)=>{let{contentFormat:r}=t;e.contentFormat=r,e.isStreaming=!0,e.isLoading=!1},Sx=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},Cx=(e,t)=>{e.citations=t.citations},Ax=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},xx=(e,t)=>{let r=t.errorMessage||"Unknown error occurred";e.error={message:r,code:t.code??500},e.isStreaming=!1,e.isLoading=!1,console.error(`Generated answer error: ${r} (code: ${t.code})`)};var Ml={handleOpen:(e,t)=>{let r=e.headers.get("x-answer-id");r&&t(n=>{yx(n,r)})},handleMessage:{"agentInteraction.answerHeader":(e,t)=>{t(r=>{hx(r,{contentFormat:"text/markdown"})})},"generativeengines.messageType":(e,t)=>{e?.payload?.textDelta&&t(r=>{Sx(r,e.payload)})},"agentInteraction.citations":(e,t)=>{e?.payload?.citations!==void 0&&t(r=>{Cx(r,e.payload)})},"generativeengines.endOfStreamType":(e,t)=>{t(r=>{Ax(r,e.payload)})},error:(e,t)=>{e.finishReason==="ERROR"&&t(r=>{xx(r,e)})}}};var Ll=(e,t,r,n)=>{let{dispatch:a,updateCachedData:o,getState:d}=r,{configuration:{accessToken:p}}=d();return io(e,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${p}`,Accept:"text/event-stream","Content-Type":"application/json","Accept-Encoding":"*"},fetch:y,onopen:async m=>{Ml.handleOpen(m,o),n.handleOpen(m,a)},onclose:()=>{n.handleClose?.(a)},onerror:m=>{n.handleError(m)},onmessage:m=>{let f=Dq(m.data);if(!f)return;Ml.handleMessage.error?.(f,o),n.handleMessage.error?.(f,a);let S=f.payloadType;Ml.handleMessage[S]?.(f,o),n.handleMessage[S]?.(f,a)}})};function Dq(e){if(!e?.length)return null;try{return JSON.parse(e)}catch(t){return console.warn("Failed to parse message",{payload:e,error:t}),null}}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Fx=e=>{let{configuration:t}=e,{organizationId:r,environment:n,knowledge:{agentId:a}}=t,o=Ve(r,n),d=a?.trim();if(!o||!r||!d)throw new Error("Missing required parameters for follow up endpoint");let p=`/api/preview/organizations/${r}/agents`;return`${o}${p}/${d}/follow-up`};var Vq=$r.injectEndpoints({overrideExisting:!0,endpoints:e=>({generateFollowUpAnswer:e.query({queryFn:()=>({data:Nl()}),async onQueryStarted(t,{getState:r,updateCachedData:n,dispatch:a}){let{strategyKey:o,...d}=t,p=Fx(r());await Ll(p,d,{getState:r,updateCachedData:n,dispatch:a},Ql[o]?.())}})})}),Rx=e=>Vq.endpoints.generateFollowUpAnswer.initiate(e);l();s();u();c();var bx=(e,t)=>({conversationId:t.followUpAnswers?.conversationId??"",q:e});var Nq=new j({required:!0}),Ul=w("followUpAnswers/setIsEnabled",e=>I(e,new ne({required:!0}))),_l=w("followUpAnswers/setFollowUpAnswersConversationId",e=>I(e,L)),Mg=w("followUpAnswers/createFollowUpAnswer",e=>I(e,{question:L})),Bl=w("followUpAnswers/setActiveFollowUpAnswerId",e=>I(e,L)),Gl=w("followUpAnswers/setFollowUpAnswerContentFormat",e=>I(e,{contentFormat:Zl,answerId:L})),$l=w("followUpAnswers/setFollowUpIsLoading",e=>I(e,{isLoading:new ne({required:!0}),answerId:L})),Hl=w("followUpAnswers/followUpMessageChunkReceived",e=>I(e,{textDelta:Nq,answerId:L})),Wl=w("followUpAnswers/followUpCitationsReceived",e=>I(e,{citations:new te({required:!0,each:new Q({values:Lg})}),answerId:L})),zl=w("followUpAnswers/followUpCompleted",e=>I(e,{answerId:L,cannotAnswer:new ne({required:!1})})),Yl=w("followUpAnswers/followUpFailed",e=>I(e,{message:new j,code:new J({min:0}),answerId:L})),Kl=w("followUpAnswers/likeFollowUp",e=>I(e,{answerId:L})),Jl=w("followUpAnswers/dislikeFollowUp",e=>I(e,{answerId:L})),vx=w("followUpAnswers/submitFollowUpFeedback",e=>I(e,{answerId:L})),Xl=w("followUpAnswers/resetFollowUpAnswers"),wx=oe("generatedAnswerWithFollowUps/generateFollowUpAnswer",async(e,{getState:t,dispatch:r,extra:{logger:n}})=>{let a=t(),o=To(a)?.trim(),d=bx(e,a);if(!o){n.warn("Missing agentId in engine configuration. The generateFollowUpAnswer action requires an agent ID.");return}if(!d.conversationId){n.warn("Missing conversationId when generating a follow-up answer. The generateFollowUpAnswer action requires an existing conversation.");return}r(Mg({question:e})),await r(Rx({strategyKey:"follow-up-answer",...d}))});var Px=()=>{let e=null;return{handleOpen:(t,r)=>{e=t.headers.get("x-answer-id"),e&&(r(Bl(e)),r($l({answerId:e,isLoading:!0})),r(Gl({contentFormat:"text/markdown",answerId:e})))},handleError:t=>{throw t},handleMessage:{"generativeengines.messageType":(t,r)=>{t?.payload?.textDelta&&r(Hl({textDelta:t.payload.textDelta,answerId:e}))},"agentInteraction.citations":(t,r)=>{t?.payload?.citations!==void 0&&r(Wl({citations:t.payload.citations,answerId:e}))},"generativeengines.endOfStreamType":(t,r)=>{let n=t?.payload?.answerGenerated??!1;r(zl({cannotAnswer:!n,answerId:e}))},error:(t,r)=>{t.finishReason==="ERROR"&&r(Yl({answerId:e,message:t.errorMessage,code:t.code}))}}}};l();s();u();c();l();s();u();c();var ed=e=>{if(e==="yes")return!0;if(e==="no")return!1},Mq=()=>Y("analytics/generatedAnswer/retry",e=>e.makeRetryGeneratedAnswer()),Lq=e=>Y({prefix:"analytics/generatedAnswer/openAnswerSource",__legacy__getBuilder:(t,r)=>{let n=Pe(r),a=pc(r,e);return!n||!a?null:t.makeGeneratedAnswerCitationClick(eA(a,r),{generativeQuestionAnsweringId:n,citationId:a.id,documentId:tA(a)})},analyticsType:"Rga.CitationClick",analyticsPayloadBuilder:t=>{let r=pc(t,e);return{answerId:Pe(t)??"",citationId:e,itemMetadata:{uniqueFieldName:"permanentid",uniqueFieldValue:r?.permanentid??"",title:r?.title,url:r?.clickUri}}}}),Qq=(e,t)=>Y({prefix:"analytics/generatedAnswer/hoverCitation",__legacy__getBuilder:(r,n)=>{let a=Pe(n),o=pc(n,e);return!a||!o?null:r.makeGeneratedAnswerSourceHover({generativeQuestionAnsweringId:a,permanentId:o.permanentid,citationId:o.id,citationHoverTimeMs:t})},analyticsType:"Rga.CitationHover",analyticsPayloadBuilder:r=>{let n=pc(r,e);return{answerId:Pe(r)??"",citationId:e,itemMetadata:{uniqueFieldName:"permanentid",uniqueFieldValue:n?.permanentid??"",title:n?.title,url:n?.clickUri},citationHoverTimeInMs:t}}}),Uq=()=>Y({prefix:"analytics/generatedAnswer/like",__legacy__getBuilder:(e,t)=>{let r=Pe(t);return r?e.makeLikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:Pe(e)??"",action:"like"})}),_q=()=>Y({prefix:"analytics/generatedAnswer/dislike",__legacy__getBuilder:(e,t)=>{let r=Pe(t);return r?e.makeDislikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:Pe(e)??"",action:"dislike"})}),Bq=e=>Y({prefix:"analytics/generatedAnswer/sendFeedback",__legacy__getBuilder:(t,r)=>{let n=Pe(r);return n?t.makeGeneratedAnswerFeedbackSubmitV2({generativeQuestionAnsweringId:n,...e}):null},analyticsType:"Rga.SubmitFeedback",analyticsPayloadBuilder:t=>{let r=Pe(t),{helpful:n,readable:a,documented:o,hallucinationFree:d,correctTopic:p,documentUrl:m,details:f}=e;return{answerId:r??"",helpful:n,details:{readable:ed(a),documented:ed(o),correctTopic:ed(p),hallucinationFree:ed(d)},additionalNotes:f,correctAnswerUrl:m}}}),Ra=e=>Y({prefix:"analytics/generatedAnswer/streamEnd",__legacy__getBuilder:(t,r)=>{let n=Pe(r),a=e?!r.generatedAnswer?.answer||!r.generatedAnswer?.answer.length:void 0;return n?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:n,answerGenerated:e,answerTextIsEmpty:a}):null},analyticsType:"Rga.AnswerReceived",analyticsPayloadBuilder:t=>({answerId:Pe(t)??"",answerGenerated:e??!1})}),pi=()=>Y({prefix:"analytics/generatedAnswer/responseLinked",__legacy__getBuilder:()=>null,analyticsType:"Rga.ResponseLinked",analyticsPayloadBuilder:e=>({answerId:Pe(e)??"",responseId:e.search?.searchResponseId||e.search?.response.searchUid||""})}),Gq=()=>Y({prefix:"analytics/generatedAnswer/show",__legacy__getBuilder:(e,t)=>{let r=Pe(t);return r?e.makeGeneratedAnswerShowAnswers({generativeQuestionAnsweringId:r}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:Pe(e)??"",action:"show"})}),$q=()=>Y({prefix:"analytics/generatedAnswer/hide",__legacy__getBuilder:(e,t)=>{let r=Pe(t);return r?e.makeGeneratedAnswerHideAnswers({generativeQuestionAnsweringId:r}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:Pe(e)??"",action:"hide"})}),Hq=()=>Y({prefix:"analytics/generatedAnswer/expand",__legacy__getBuilder:(e,t)=>{let r=Pe(t);return r?e.makeGeneratedAnswerExpand({generativeQuestionAnsweringId:r}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:Pe(e)??"",action:"expand"})}),Wq=()=>Y({prefix:"analytics/generatedAnswer/collapse",__legacy__getBuilder:(e,t)=>{let r=Pe(t);return r?e.makeGeneratedAnswerCollapse({generativeQuestionAnsweringId:r}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:Pe(e)??"",action:"collapse"})}),zq=()=>Y({prefix:"analytics/generatedAnswer/copy",__legacy__getBuilder:(e,t)=>{let r=Pe(t);return r?e.makeGeneratedAnswerCopyToClipboard({generativeQuestionAnsweringId:r}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:Pe(e)??"",action:"copyToClipboard"})});var mi={logCopyGeneratedAnswer:zq,logGeneratedAnswerHideAnswers:$q,logGeneratedAnswerShowAnswers:Gq,logGeneratedAnswerStreamEnd:Ra,logGeneratedAnswerFeedback:Bq,logDislikeGeneratedAnswer:_q,logLikeGeneratedAnswer:Uq,logHoverCitation:Qq,logOpenGeneratedAnswerSource:Lq,logRetryGeneratedAnswer:Mq,logGeneratedAnswerExpand:Hq,logGeneratedAnswerCollapse:Wq};var Ex=()=>({handleOpen:(e,t)=>{let r=e.headers.get("x-answer-id");r&&t(fi(r))},handleError:e=>{throw e},handleMessage:{"agentInteraction.answerHeader":(e,t)=>{e?.payload?.conversationId&&t(_l(e.payload.conversationId)),e.payload.followUpEnabled&&t(Ul(e.payload.followUpEnabled)),t(Pa("text/markdown")),t(ba(!0)),t(Tn(!1))},"generativeengines.messageType":(e,t)=>{e?.payload?.textDelta&&t(va({textDelta:e.payload.textDelta}))},"agentInteraction.citations":(e,t)=>{e?.payload?.citations!==void 0&&t(wa({citations:e.payload.citations}))},"generativeengines.endOfStreamType":(e,t)=>{let r=e?.payload?.answerGenerated??!1;t(wc(r)),t(Ea(!r)),t(ba(!1)),t(Tn(!1)),t(Ra(r)),t(pi())},error:(e,t)=>{e.finishReason==="ERROR"&&t(vc(e))}}});var Ql={"head-answer":Ex,"follow-up-answer":Px};l();s();u();c();var Ix=e=>{let{configuration:t}=e,{organizationId:r,environment:n,knowledge:{agentId:a}}=t,o=Ve(r,n),d=a?.trim();if(!o||!r||!d)throw new Error("Missing required parameters for answer endpoint");let p=`/api/preview/organizations/${r}/agents`;return`${o}${p}/${d}/answer`};var kx=$r.injectEndpoints({overrideExisting:!0,endpoints:e=>({generateAnswer:e.query({queryFn:()=>({data:Nl()}),async onQueryStarted(t,{getState:r,updateCachedData:n,dispatch:a}){let{strategyKey:o,...d}=t,p=Ix(r());await Ll(p,d,{getState:r,updateCachedData:n,dispatch:a},Ql[o]?.())}})})}),Tx=e=>kx.endpoints.generateAnswer.initiate(e),Ox=(e,t)=>kx.endpoints.generateAnswer.select(e)(t);l();s();u();c();l();s();u();c();var qx=we(e=>e.advancedSearchQueries,e=>{if(!e)return{};let{aq:t,cq:r,dq:n,lq:a}=e;return{...t&&{aq:t},...r&&{cq:r},...n&&{dq:n},...a&&{lq:a}}});l();s();u();c();var jx=e=>e.context;l();s();u();c();var Qg=e=>e.pipeline;l();s();u();c();var Ug=e=>e.searchHub;l();s();u();c();var dt=we(e=>e,e=>{if(!e)return"";for(let t in e)if(e[t].isActive)return e[t].id;return""}),P7=we(e=>e,e=>{let t=dt(e);return t&&e?e[t].expression:""});l();s();u();c();var Dx=e=>{if(!(!e.dictionaryFieldContext||!Object.keys(e.dictionaryFieldContext.contextValues).length))return e.dictionaryFieldContext.contextValues};l();s();u();c();var Vx=e=>e.excerptLength?.length;l();s();u();c();var dr=(e,t)=>e.facetOptions.facets[t]?.enabled??!0,Nx=e=>{let{freezeFacetOrder:t}=e.facetOptions??{};return t!==void 0?{freezeFacetOrder:t}:void 0};l();s();u();c();var Mx=e=>{if(e.folding)return{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}};l();s();u();c();var Lx=e=>e.sortCriteria;var Qx=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:Ve(e.configuration.organizationId,e.configuration.environment),streamId:e.search.extendedResults?.generativeQuestionAnsweringId}),Ux=(e,t)=>{let r=Fa(e)?.q,{aq:n,cq:a,dq:o,lq:d}=Kq(e),p=jx(e),m=Br(e.configuration.analytics,t,{actionCause:wg(e)}),f=Ug(e),S=Qg(e),C=Kf(e)??[],x=Bx(e),A=dt(e.tabSet)||"default",F=zf(e),v=BC(e),b=t.referrer||"",R=Nx(e),E=Lx(e),P=Yq(e),k=Vx(e),N=Mx(e),q=Dx(e);return{q:r,...n&&{aq:n},...a&&{cq:a},...o&&{dq:o},...d&&{lq:d},...e.query&&{enableQuerySyntax:fx(e)},...p?.contextValues&&{context:p.contextValues},pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:C}},...f?.length&&{searchHub:f},...S?.length&&{pipeline:S},...x.length&&{facets:x},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...e.pagination&&{numberOfResults:bg(e),firstResult:e.pagination.firstResult},tab:A,locale:F,timezone:v,...e.debug!==void 0&&{debug:e.debug},referrer:b,...P,...N??{},...k&&{excerptLength:k},...q&&{dictionaryFieldContext:q},sortCriteria:E,...R&&{facetOptions:R},...m,...e.insightCaseContext?.caseContext&&{caseContext:e.insightCaseContext?.caseContext}}},_x=(e,t)=>{let r=Fa(e)?.q,n=Bx(e),a=Br(e.configuration.analytics,t,{actionCause:wg(e)}),o=zf(e),d=Ug(e),p=Qg(e),m=Kf(e)??[];return{q:r||"",...n.length&&{facets:n},pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:m}},...d?.length&&{searchHub:d},...p?.length&&{pipeline:p},...a,locale:o}},Bx=e=>Il(e)?.map(t=>hg(t,yg())).sort((t,r)=>t.facetId>r.facetId?1:r.facetId>t.facetId?-1:0),Yq=e=>({actionsHistory:e.configuration.analytics.enabled?yt.getInstance().getHistory():[]}),Kq=e=>{let t=qx(e),r=vg(e);return{...t,...r&&{cq:r}}};l();s();u();c();var Gx=["text/plain","text/markdown"];var gi=new j({required:!0}),$x=new j,yi=new ne({required:!0}),Lg={id:gi,title:gi,uri:gi,permanentid:gi,clickUri:$x},Zl=new j({required:!0,constrainTo:Gx}),hi=w("generatedAnswer/setIsVisible",e=>I(e,yi)),fi=w("generatedAnswer/setAnswerId",e=>I(e,L)),td=w("generatedAnswer/setAnswerGenerationMode",e=>I(e,new j({constrainTo:["automatic","manual"],required:!1,default:"automatic"}))),Pc=w("generatedAnswer/setIsEnabled",e=>I(e,yi)),va=w("generatedAnswer/updateMessage",e=>I(e,{textDelta:gi})),wa=w("generatedAnswer/updateCitations",e=>I(e,{citations:new te({required:!0,each:new Q({values:Lg})})})),vc=w("generatedAnswer/updateError",e=>I(e,{message:$x,code:new J({min:0})})),Ct=w("generatedAnswer/resetAnswer"),rd=w("generatedAnswer/like"),nd=w("generatedAnswer/dislike"),ad=w("generatedAnswer/feedbackModal/open"),Ec=w("generatedAnswer/expand"),od=w("generatedAnswer/collapse"),id=w("generatedAnswer/setId",e=>I(e,{id:new j({required:!0})})),sd=w("generatedAnswer/feedbackModal/close"),Si=w("generatedAnswer/sendFeedback"),Tn=w("generatedAnswer/setIsLoading",e=>I(e,yi)),ba=w("generatedAnswer/setIsStreaming",e=>I(e,yi)),Pa=w("generatedAnswer/setAnswerContentFormat",e=>I(e,Zl)),cd=w("generatedAnswer/updateResponseFormat",e=>I(e,{contentFormat:new te({each:Zl,default:["text/plain"]})})),ud=w("knowledge/updateAnswerConfigurationId",e=>I(e,gi)),ld=w("generatedAnswer/registerFieldsToIncludeInCitations",e=>I(e,yu)),wc=w("generatedAnswer/setIsAnswerGenerated",e=>I(e,yi)),Ea=w("generatedAnswer/setCannotAnswer",e=>I(e,yi)),dd=w("generatedAnswer/setAnswerApiQueryParams",e=>I(e,new Q({}))),Hx=oe("generatedAnswer/streamAnswer",async(e,t)=>{let r=t.getState(),{dispatch:n,extra:a,getState:o}=t,{search:d}=o(),{queryExecuted:p}=d,{setAbortControllerRef:m}=e,f=await Qx(r),S=(A,F)=>{switch(A){case"genqa.headerMessageType":{let v=JSON.parse(F);n(Pa(v.contentFormat));break}case"genqa.messageType":n(va(JSON.parse(F)));break;case"genqa.citationsType":n(wa(JSON.parse(F)));break;case"genqa.endOfStreamType":{let v=JSON.parse(F).answerGenerated,b=p.length!==0&&!v;n(Ea(b)),n(ba(!1)),n(wc(v)),n(Ra(v)),n(pi());break}default:r.debug&&a.logger.warn(`Unknown payloadType: "${A}"`)}};n(Tn(!0));let C=A=>A.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,x=a.streamingClient?.streamGeneratedAnswer(f,{write:A=>{C(f)&&(n(Tn(!1)),A.payload&&A.payloadType&&S(A.payloadType,A.payload))},abort:A=>{C(f)&&n(vc(A))},close:()=>{C(f)&&n(ba(!1))},resetAnswer:()=>{C(f)&&n(Ct())}});x?m(x):n(Tn(!1))}),pd=oe("generatedAnswer/generateAnswer",async(e,{getState:t,dispatch:r,extra:{navigatorContext:n,logger:a}})=>{r(Ct());let o=t();if(o.generatedAnswer.answerConfigurationId){let d=Ux(o,n);r(dd(d)),await r(fd(d))}else a.warn("[WARNING] Missing answerConfigurationId in engine configuration. The generateAnswer action requires an answer configuration ID to use CRGA with the Answer API.")}),md=oe("generatedAnswerWithFollowUps/generateHeadAnswer",async(e,{getState:t,dispatch:r,extra:{navigatorContext:n,logger:a}})=>{let o=t();if(!To(o)){a.warn("Missing agentId in engine configuration. The generateHeadAnswer action requires an agent ID.");return}r(Ct());let p=_x(o,n),m={...p,strategyKey:"head-answer"};r(dd(p)),await r(Tx(m))});var Jq=(e,t)=>{let{contentFormat:r}=t;e.contentFormat=r,e.isStreaming=!0,e.isLoading=!1},Xq=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},Zq=(e,t)=>{e.citations=t.citations},ej=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},tj=(e,t)=>{let r=t.errorMessage||"Unknown error occurred";e.error={message:r,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error(`Generated answer error: ${r} (code: ${t.code})`)},rj=(e,t,r)=>{let n=JSON.parse(e.data);n.finishReason==="ERROR"&&n.errorMessage&&tj(t,n);let a=n.payload.length?JSON.parse(n.payload):{};switch(n.payloadType){case"genqa.headerMessageType":a.contentFormat&&(Jq(t,a),r(Pa(a.contentFormat)));break;case"genqa.messageType":a.textDelta&&(Xq(t,a),r(va({textDelta:a.textDelta})));break;case"genqa.citationsType":a.citations&&(Zq(t,a),r(wa({citations:a.citations})));break;case"genqa.endOfStreamType":ej(t,a),r(Ra(a.answerGenerated??!1)),r(pi());break}},nj=(e,t,r,n)=>{if(!e||!t||!r)throw new Error("Missing required parameters for answer endpoint");let a=`/rest/organizations/${t}`,o=n?`insight/v1/configs/${n}/answer`:"answer/v1/configs";return`${e}${a}/${o}/${r}/generate`},Ia=Vl.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),serializeQueryArgs:({endpointName:t,queryArgs:r})=>{let{analytics:n,...a}=r;return`${t}(${JSON.stringify(a)})`},async onCacheEntryAdded(t,{getState:r,cacheDataLoaded:n,updateCachedData:a,dispatch:o}){await n;let{configuration:d,generatedAnswer:p,insightConfiguration:m}=r(),{organizationId:f,environment:S,accessToken:C}=d,x=Ve(f,S),A=nj(x,f,p.answerConfigurationId,m?.insightId);await io(A,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${C}`,Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch:y,onopen:async F=>{let v=F.headers.get("x-answer-id");v&&a(b=>{b.answerId=v,o(fi(v))})},onmessage:F=>{a(v=>{rj(F,v,o)})},onerror:F=>{throw F},onclose:()=>{a(F=>{o(Ea(!F.generated))})}})}})})}),fd=e=>Ia.endpoints.getAnswer.initiate(e),_g=e=>{let t=di(e);return Ia.endpoints.getAnswer.select(t??xa)(e)};l();s();u();c();var Wx=re(pn,e=>e);l();s();u();c();function aj(e){let t=e.payload?.analyticsAction;return zx(e)&&!ae(t)}function zx(e){return"type"in e}var Yx=e=>t=>r=>{let n;aj(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let a=t(r);return zx(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),a};l();s();u();c();l();s();u();c();l();s();u();c();var Ci=w("tab/register",e=>{let t=new Q({values:{id:L,expression:Re}});return I(e,t)}),Kt=w("tab/updateActiveTab",e=>I(e,L));l();s();u();c();var gd=Ht(dl(),1),Xx=Ht(Kx(),1),Zx=Ht(Jx(),1);gd.default.extend(Zx.default);gd.default.extend(Xx.default);var Ai=()=>({organizationId:"",accessToken:"",search:{locale:"en-US",timezone:gd.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",analyticsMode:"next",source:{}},knowledge:{answerConfigurationId:"",agentId:void 0},environment:"prod"});l();s();u();c();var oj=/(^|; )Coveo-Pendragon=([^;]*)/;function Wg(){return typeof window>"u"?!1:oj.exec(document.cookie)?.pop()||null}var yd=re(Ai(),e=>e.addCase(ir,(t,r)=>{ij(t,r.payload)}).addCase(qt,(t,r)=>{sj(t,r.payload)}).addCase(Sn,(t,r)=>{cj(t,r.payload)}).addCase(Vo,t=>{t.analytics.enabled=!1}).addCase(No,t=>{t.analytics.enabled=!0}).addCase(ol,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(il,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(Kt,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(Mo,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(xe,(t,r)=>{ae(r.payload.tab)||(t.analytics.originLevel2=r.payload.tab)}).addCase(sl,(t,{payload:r})=>{t.knowledge.agentId=r}));function ij(e,t){ae(t.accessToken)||(e.accessToken=t.accessToken),e.environment=t.environment??"prod",ae(t.organizationId)||(e.organizationId=t.organizationId)}function sj(e,t){ae(t.proxyBaseUrl)||(e.search.apiBaseUrl=t.proxyBaseUrl),ae(t.locale)||(e.search.locale=t.locale),ae(t.timezone)||(e.search.timezone=t.timezone),ae(t.authenticationProviders)||(e.search.authenticationProviders=t.authenticationProviders)}function cj(e,t){ae(t.enabled)||(e.analytics.enabled=t.enabled),ae(t.originContext)||(e.analytics.originContext=t.originContext),ae(t.originLevel2)||(e.analytics.originLevel2=t.originLevel2),ae(t.originLevel3)||(e.analytics.originLevel3=t.originLevel3),ae(t.proxyBaseUrl)||(e.analytics.apiBaseUrl=t.proxyBaseUrl),ae(t.trackingId)||(e.analytics.trackingId=t.trackingId),ae(t.analyticsMode)||(e.analytics.analyticsMode=t.analyticsMode),ae(t.source)||(e.analytics.source=t.source);try{let r=Wg();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r)}catch{}ae(t.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.runtimeEnvironment),ae(t.anonymous)||(e.analytics.anonymous=t.anonymous),ae(t.deviceId)||(e.analytics.deviceId=t.deviceId),ae(t.userDisplayName)||(e.analytics.userDisplayName=t.userDisplayName),ae(t.documentLocation)||(e.analytics.documentLocation=t.documentLocation)}var ie=yd;l();s();u();c();function uj(e){return e.instantlyCallable}var eF=()=>e=>t=>e(uj(t)?t():t);l();s();u();c();var zg=HS();zg.startListening({actionCreator:G.pending,effect:async(e,t)=>{let r=t.getState(),n=Fa(r)?.q,a=!n||n.trim()==="";Yf(r)&&(t.dispatch(Ct()),t.dispatch(Xl()),!a&&t.dispatch(md()))}});l();s();u();c();var tF=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let a=n.error;if(n.payload?.ignored||e.error({error:a,action:r},`Action dispatch error ${n.type}`),n.error.name!=="SchemaValidationError")return t(r)},rF=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));l();s();u();c();var Yg=(e,t)=>{let{referrer:r,userAgent:n,location:a,clientId:o}=e.getMeta("");return{...t?t():{},referrer:r,userAgent:n,location:a,clientId:o}};l();s();u();c();function nF(e,t){let r={...e},n,a=o=>(d,p)=>{let m=o(d,p);return n?n(m,p):m};return{get combinedReducer(){let o=vh(Object.entries(t).filter(([d])=>!(d in r)).map(([d,p])=>[d,()=>p]));return a(uo({...o,...r}))},containsAll(o){return Object.keys(o).every(p=>p in r)},add(o){Object.keys(o).filter(d=>!(d in r)).forEach(d=>{r[d]=o[d]})},addCrossReducer(o){n=o}}}l();s();u();c();l();s();u();c();function Kg(e){if(!e||!lj(e))return null;try{let r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=atob(r),a=decodeURIComponent(n.split("").map(o=>`%${`00${o.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));return JSON.parse(a)}catch{return null}}function aF(e,t=60){if(!e)return!1;let r=Kg(e);if(!r||typeof r.exp!="number")return!1;let n=Math.floor(Date.now()/1e3);return r.exp<=n+t}function lj(e){return e?/^[A-Za-z0-9_-]{2,}(?:\.[A-Za-z0-9_-]{2,}){2}$/.test(e):!1}function iF(e,t){let r=0,n=null,a=uu(()=>{r=0},500),o=async(m,f=!1)=>{let S=!n;S&&t&&(n=(async()=>(f&&pj(t),await t()))().finally(()=>{n=null}));let C=await n;return S&&C&&m.dispatch(ir({accessToken:C})),C},d=async m=>{let f=m.getState(),S=mj(f);if(!(!S||!aF(S))){e.debug("Access token is expired or about to expire, attempting renewal.");try{await o(m)?e.debug("Access token was renewed."):e.warn("Access token renewal returned an empty token. Please check the #renewAccessToken function.")}catch(C){e.warn(C,"Access token renewal failed. A retry will occur if necessary.")}}},p=async(m,f,S)=>{if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),oF(m,f.error),f;r++,a(),await o(m,!0),m.dispatch(S)};return m=>f=>async S=>{let C=typeof S=="function",x=typeof t=="function";if(!C)return f(S);x&&await d(m);let A=await f(S);return dj(A)?x?await p(m,A,S):(e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),oF(m,A.error),A):A}}function dj(e){return typeof e=="object"&&e!==null&&"error"in e&&e.error?.name===new so().name}function oF(e,t){e.dispatch(ii({status:401,statusCode:401,message:t.message,type:t.name}))}async function pj(e){try{return await e()}catch{return""}}function mj(e){return e.configuration.accessToken}l();s();u();c();function sF({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:a}){return OS({reducer:e,preloadedState:t,devTools:{stateSanitizer:o=>o.history?{...o,history:"<<OMIT>>"}:o,name:a,shouldHotReload:!1},middleware:o=>o({thunk:{extraArgument:n}}).prepend(...r).concat(rF(n.logger))})}function fj(e,t){let{analytics:r}=e,{analyticsClientMiddleware:n,...a}=r??{},o={...a,...r?.proxyBaseUrl&&{apiBaseUrl:r.proxyBaseUrl,nexApiBaseUrl:r.proxyBaseUrl}};return o.analyticsMode!=="next"&&bh()?(t.info("Analytics disabled since doNotTrack is active."),{...o,enabled:!1}):o}function cF(e,t){let r={...e.reducers,configuration:ie,version:Wx},n=gj({...e,reducers:r},t,ie),{accessToken:a,environment:o,organizationId:d}=e.configuration;n.dispatch(ir({accessToken:a,environment:o,organizationId:d}));let p=fj(e.configuration,n.logger);return p&&n.dispatch(Sn(p)),n}function gj(e,t,r){let{reducers:n,navigatorContextProvider:a}=e,o=nF({...n,configurationReducer:r},e.preloadedState??{});e.crossReducer&&o.addCrossReducer(e.crossReducer);let d=t.logger,p={...t,get relay(){return oc(f.state,a)},get navigatorContext(){return Yg(this.relay,a)}},m=yj(e,p,o),f={addReducers(S){o.containsAll(S)||(o.add(S),m.replaceReducer(o.combinedReducer))},dispatch:m.dispatch,subscribe:m.subscribe,enableAnalytics(){m.dispatch(No())},disableAnalytics(){m.dispatch(Vo())},get state(){return m.getState()},get relay(){return oc(this.state,a)},get navigatorContext(){return Yg(this.relay,a)},logger:d,store:m};return f}function yj(e,t,r){let{preloadedState:n,configuration:a}=e,o=a.name||"coveo-headless",d=hj(e,t.logger);return sF({preloadedState:n,reducer:r.combinedReducer,middlewares:d,thunkExtraArguments:t,name:o})}function hj(e,t){let{renewAccessToken:r}=e.configuration,n=iF(t,r);return[eF,n,tF(t),Yx].concat(Ia.middleware,$r.middleware,zg.middleware,e.middlewares||[])}var Sj=`[Warning] A component from the Coveo Headless library has been instantiated with the Analytics Mode: "Next".
However, this mode is not available for Coveo for Service features, and this configuration may not work as expected.
Please switch back to the "legacy" analytics mode to ensure proper functionality.
For more information, refer to the documentation: https://docs.coveo.com/en/o3r90189/build-a-search-ui/event-protocol`;function On(e){e==="next"&&console.warn(Sj)}l();s();u();c();var hF=Ht(yF(),1);function SF(e){return(0,hF.pino)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}l();s();u();c();function CF(e,t){let r=Vj(e),n=It,a=Nj(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:a,logger:t}}function Vj(e){let{analytics:t}=e,r=(n,a)=>a;return t?.analyticsClientMiddleware||r}function Nj(e){return e.preprocessRequest||mu}l();s();u();c();var ry=(e,t,r,n,a,o)=>{let d=e[t];ae(d)||ae(a)||a!==d&&a!==n&&(o.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),o.warn(`To remove this warning, make sure that access token value [${d}] matches engine configuration value [${r}]`))},ny=(e,t)=>!(ae(e)||t===e),kc=e=>{let t=Kg(e);return t||!1},FF=(e,t)=>(ny(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),AF=(e,t,r,n)=>(ry(e,"searchHub",t.searchHub,gn(),r,n),FF(e,t)),RF=(e,t)=>(ny(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),xF=(e,t,r,n)=>(ry(e,"pipeline",t.pipeline,_r(),r,n),RF(e,t)),bF=(e,t)=>(ny(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),Mj=(e,t,r,n)=>(ry(e,"userDisplayName",t.configuration.analytics.userDisplayName,Ai().analytics.userDisplayName,r,n),bF(e,t)),vF=e=>re({},t=>{t.addCase(si,(r,n)=>{let a=kc(r.configuration.accessToken);return a?AF(a,r,n.payload,e):r}).addCase(Uo,(r,n)=>{let a=kc(r.configuration.accessToken);return a?xF(a,r,n.payload,e):r}).addCase(ir,(r,n)=>{if(r.configuration.accessToken!==n.payload.accessToken)return r;let{accessToken:a}=n.payload;if(!a)return r;let o=kc(a);return o?[RF,FF,bF].reduce((d,p)=>p(o,d),r):r}).addCase(qt,(r,n)=>{let a=kc(r.configuration.accessToken);if(!a)return r;let o=AF(a,r,n.payload.searchHub,e);return xF(a,o,n.payload?.pipeline,e)}).addCase(Sn,(r,n)=>{let a=kc(r.configuration.accessToken);return a?Mj(a,r,n.payload.userDisplayName,e):r})});l();s();u();c();l();s();u();c();var wF={organizationId:L,accessToken:L,name:new j({required:!1,emptyAllowed:!1}),analytics:new Q({options:{required:!1},values:{enabled:new ne({required:!1}),originContext:new j({required:!1}),originLevel2:new j({required:!1}),originLevel3:new j({required:!1}),analyticsMode:new j({constrainTo:["legacy","next"],required:!1,default:"next"}),proxyBaseUrl:new j({required:!1,url:!0}),trackingId:new j({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/})}}),environment:new j({required:!1,default:"prod",constrainTo:["prod","hipaa","stg","dev"]})};function PF(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457"}}var EF=new ue({...wF,search:new Q({options:{required:!1},values:{pipeline:new j({required:!1,emptyAllowed:!0}),searchHub:Ie,locale:Ie,timezone:Ie,authenticationProviders:new te({required:!1,each:L}),proxyBaseUrl:new j({required:!1,url:!0})}})});function ay(){return{...PF(),search:{searchHub:"default"}}}var Lj={debug:Qo,pipeline:_o,searchHub:ci,search:ce};function Qj(e){let{search:t,organizationId:r,environment:n}=e,a=t?.proxyBaseUrl?t.proxyBaseUrl:Me(r,n);return{...t,apiBaseUrl:a}}function IF(e){let t=SF(e.loggerOptions),{configuration:r}=e;Uj(r,t);let n=_j(r,t),a=Bj(t),o={...CF(r,t),apiClient:n,streamingClient:a},d={...e,reducers:Lj,crossReducer:vF(t)},p=cF(d,o),m=Qj(r);return m&&p.dispatch(qt(m)),{...p,get state(){return p.state},executeFirstSearch(f=rl()){if(xc(p.state))return;let S=G({legacy:f,next:sA()});p.dispatch(S)},executeFirstSearchAfterStandaloneSearchBoxRedirect(f){let{cause:S,metadata:C}=f;if(xc(p.state))return;let x=C&&S==="omniboxFromLink",A=G({legacy:x?al(C):nl(),next:x?uA():cA()});p.dispatch(A)}}}function Uj(e,t){try{EF.validate(e)}catch(r){throw t.error(r,"Search engine configuration error"),r}}function _j(e,t){let{search:r}=e;return new fu({logger:t,preprocessRequest:e.preprocessRequest||mu,postprocessSearchResponseMiddleware:r?.preprocessSearchResponseMiddleware||Jh,postprocessFacetSearchResponseMiddleware:r?.preprocessFacetSearchResponseMiddleware||Xh,postprocessQuerySuggestResponseMiddleware:r?.preprocessQuerySuggestResponseMiddleware||Zh})}function Bj(e){return new lu({logger:e})}l();s();u();c();l();s();u();c();l();s();u();c();var Ta={value:L,numberOfResults:new J({min:0}),state:L};l();s();u();c();var le=L;var Wj=new J({min:1,default:8,required:!1}),zj=new J({min:1,max:20,default:5,required:!1}),Yj={desiredCount:zj,numberOfValues:Wj},Fi=w("automaticFacet/setOptions",e=>I(e,Yj)),Ri=w("automaticFacet/deselectAll",e=>I(e,le)),Kj=L,pr=w("automaticFacet/toggleSelectValue",e=>I(e,{field:Kj,selection:new Q({values:Ta})}));l();s();u();c();l();s();u();c();var Jj={state:new be({required:!0}),numberOfResults:new J({required:!0,min:0}),value:new j({required:!0,emptyAllowed:!0}),path:new te({required:!0,each:L}),moreValuesAvailable:new ne({required:!1})};function oy(e){e.children.forEach(t=>{oy(t)}),It({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},Jj)}var bi={facetId:le,field:L,tabs:new Q({options:{required:!1},values:{included:new te({each:new j}),excluded:new te({each:new j})}}),activeTab:new j({required:!1}),delimitingCharacter:new j({required:!1,emptyAllowed:!0}),filterFacetCount:new ne({required:!1}),injectionDepth:new J({required:!1,min:0}),numberOfValues:new J({required:!1,min:1}),sortCriteria:new be({required:!1}),basePath:new te({required:!1,each:L}),filterByBasePath:new ne({required:!1})};var mr=w("categoryFacet/register",e=>I(e,bi)),jn=w("categoryFacet/toggleSelectValue",e=>{try{return It(e.facetId,L),oy(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Nr(t)}}}),fr=w("categoryFacet/deselectAll",e=>I(e,bi.facetId)),Oa=w("categoryFacet/updateNumberOfValues",e=>I(e,{facetId:bi.facetId,numberOfValues:bi.numberOfValues})),vi=w("categoryFacet/updateSortCriterion",e=>I(e,{facetId:bi.facetId,criterion:new be})),Cd=w("categoryFacet/updateBasePath",e=>I(e,{facetId:bi.facetId,basePath:new te({each:L})}));l();s();u();c();var Xj={categoryFacetId:le,categoryFacetPath:new te({required:!0,each:L})},Zj=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let a=e.categoryFacetSet[t]?.request.field,o=`${a}_${t}`;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:a,categoryFacetTitle:o}},Ad=e=>Y("analytics/categoryFacet/breadcrumb",(t,r)=>(I(e,Xj),t.makeBreadcrumbFacet(Zj(r,e)))),kF=()=>({actionCause:"breadcrumbFacet"});l();s();u();c();l();s();u();c();var me=w("facetOptions/update",(e={freezeFacetOrder:!0})=>I(e,{freezeFacetOrder:new ne({required:!1})})),ot=w("facetOptions/facet/enable",e=>I(e,le)),ke=w("facetOptions/facet/disable",e=>I(e,le));l();s();u();c();l();s();u();c();var Tc={facetId:le,captions:new Q({options:{required:!1}}),numberOfValues:new J({required:!1,min:1}),query:new j({required:!1,emptyAllowed:!0})};var eD={path:new te({required:!0,each:L}),displayValue:Re,rawValue:Re,count:new J({required:!0,min:0})},wi=w("categoryFacet/selectSearchResult",e=>I(e,{facetId:le,value:new Q({values:eD})})),Pi=w("categoryFacetSearch/register",e=>I(e,Tc));l();s();u();c();function Ei(e,t){let{facetId:r,criterion:n}=t,a=e[r]?.request;a&&(a.sortCriteria=n)}function Oc(e){e&&(e.currentValues=e.currentValues.map(t=>({...t,previousState:t.state!=="idle"?t.state:void 0,state:"idle"})),e.preventAutoSelect=!0)}function xd(e,t){e&&(e.numberOfValues=t)}l();s();u();c();function Fd(e,t){let r=e[t];r&&(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function iy(e,t,r){e.currentValues=tD(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function tD(e,t){if(!e.length)return[];let r=TF(e[0],t),n=r;for(let a of e.splice(1)){let o=TF(a,t);n.children.push(o),n=o}return n.state="selected",n.retrieveChildren=!0,[r]}function TF(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var gr=re(vo(),e=>{e.addCase(mr,(t,r)=>{let n=r.payload,{facetId:a}=n;if(a in t)return;let o=nD(n),d=o.numberOfValues;t[a]={request:o,initialNumberOfValues:d}}).addCase(Ae.fulfilled,(t,r)=>r.payload?.categoryFacetSet??t).addCase(xe,(t,r)=>{let n=r.payload.cf||{};Object.keys(t).forEach(a=>{let o=t[a].request,d=n[a]||[];(d.length||o.currentValues.length)&&iy(o,d,t[a].initialNumberOfValues)})}).addCase(vi,(t,r)=>{let{facetId:n,criterion:a}=r.payload,o=t[n]?.request;o&&(o.sortCriteria=a)}).addCase(Cd,(t,r)=>{let{facetId:n,basePath:a}=r.payload,o=t[n]?.request;o&&(o.basePath=[...a])}).addCase(jn,(t,r)=>{let{facetId:n,selection:a,retrieveCount:o}=r.payload,d=t[n]?.request;if(!d)return;let{path:p}=a,m=p.slice(0,p.length-1),f=rD(d,m,o);if(f.length){let C=f[0];C.retrieveChildren=!0,C.state="selected",C.previousState="idle",C.children=[];return}let S=qF(a.value,o);S.state="selected",S.previousState="idle",f.push(S),d.numberOfValues=1}).addCase(fr,(t,r)=>{let n=r.payload;Fd(t,n)}).addCase(_e,t=>{Object.keys(t).forEach(r=>Fd(t,r))}).addCase(sr,(t,r)=>Object.keys(t).forEach(n=>{t[n].request.preventAutoSelect=!r.payload.allow})).addCase(Oa,(t,r)=>{let{facetId:n,numberOfValues:a}=r.payload,o=t[n]?.request;if(o){if(!o.currentValues.length)return xd(o,a);aD(t,r.payload)}}).addCase(wi,(t,r)=>{let{facetId:n,value:a}=r.payload,o=t[n];if(!o)return;let d=[...a.path,a.rawValue];iy(o.request,d,o.initialNumberOfValues)}).addCase(Mt.fulfilled,(t,r)=>{OF(t,r.payload.response.facets)}).addCase(G.fulfilled,(t,r)=>{OF(t,r.payload.response.facets)}).addCase(ke,(t,r)=>{Fd(t,r.payload)})}),qc={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function rD(e,t,r){let n=e.currentValues;for(let a of t){let o=n[0];(!o||a!==o.value)&&(o=qF(a,r),n.length=0,n.push(o)),o.retrieveChildren=!1,o.previousState=void 0,o.state="idle",n=o.children}return n}function nD(e){return{...qc,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function qF(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function OF(e,t){t.forEach(r=>{if(!oD(e,r))return;let n=r.facetId,a=e[n]?.request;if(!a)return;let o=iD(a,r);a.currentValues=o?[]:a.currentValues,a.preventAutoSelect=!1})}function aD(e,t){let{facetId:r,numberOfValues:n}=t,a=e[r]?.request.currentValues[0];if(a){for(;a.children.length&&a?.state!=="selected";)a=a.children[0];a.retrieveCount=n}}function oD(e,t){return t.facetId in e}function iD(e,t){let r=gt(e.currentValues),n=gt(t.values);return r.length!==n.length}l();s();u();c();l();s();u();c();var yr=new j({regex:/^[a-zA-Z0-9-_]+$/}),hr=new j({required:!0}),jF=new te({each:new j}),DF=new j,VF=new ne,Sr=new ne,Cr=new J({min:0}),Jt=new J({min:1}),Rd=new ne({required:!0}),sD=new Q,cD=new j,uD={captions:sD,numberOfValues:Jt,query:cD},Ii=new Q({values:uD}),bd=new Q({options:{required:!1},values:{type:new j({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new te({required:!0,max:25,each:new j({emptyAllowed:!1,required:!0})})}}),NF=new ne,vd=new te({min:1,max:25,required:!1,each:new j({emptyAllowed:!1,required:!0})});var lD={facetId:le,field:new j({required:!0,emptyAllowed:!0}),tabs:new Q({options:{required:!1},values:{included:new te({each:new j}),excluded:new te({each:new j})}}),activeTab:new j({required:!1}),filterFacetCount:new ne({required:!1}),injectionDepth:new J({required:!1,min:0}),numberOfValues:new J({required:!1,min:1}),sortCriteria:new be({required:!1}),resultsMustMatch:new be({required:!1}),allowedValues:bd,customSort:vd},Ar=w("facet/register",e=>I(e,lD)),xr=w("facet/toggleSelectValue",e=>I(e,{facetId:le,selection:new Q({values:Ta})})),Fr=w("facet/toggleExcludeValue",e=>I(e,{facetId:le,selection:new Q({values:Ta})})),Te=w("facet/deselectAll",e=>I(e,le)),ki=w("facet/updateSortCriterion",e=>I(e,{facetId:le,criterion:new be({required:!0})})),qa=w("facet/updateNumberOfValues",e=>I(e,{facetId:le,numberOfValues:new J({required:!0,min:1})})),ja=w("facet/updateIsFieldExpanded",e=>I(e,{facetId:le,isFieldExpanded:new ne({required:!0})})),Wr=w("facet/updateFreezeCurrentValues",e=>I(e,{facetId:le,freezeCurrentValues:new ne({required:!0})}));l();s();u();c();var Ti=e=>Y("analytics/facet/showMore",(t,r)=>{I(e,le);let n=Io(e,bt(r));return t.makeFacetShowMore(n)}),Oi=e=>Y("analytics/facet/showLess",(t,r)=>{I(e,le);let n=Io(e,bt(r));return t.makeFacetShowLess(n)}),Rr=e=>Y("analytics/facet/sortChange",(t,r)=>{I(e,{facetId:le,criterion:new be({required:!0})});let{facetId:n,criterion:a}=e,o=bt(r),p={...Io(n,o),criteria:a};return t.makeFacetUpdateSort(p)}),$e=e=>Y("analytics/facet/reset",(t,r)=>{I(e,le);let n=bt(r),a=Io(e,n);return t.makeFacetClearAll(a)}),je=e=>Y("analytics/facet/select",(t,r)=>{I(e,{facetId:le,facetValue:L});let n=bt(r),a=ko(e,n);return t.makeFacetSelect(a)}),wt=e=>Y("analytics/facet/exclude",(t,r)=>{I(e,{facetId:le,facetValue:L});let n=bt(r),a=ko(e,n);return t.makeFacetExclude(a)}),Xt=e=>Y("analytics/facet/deselect",(t,r)=>{I(e,{facetId:le,facetValue:L});let n=bt(r),a=ko(e,n);return t.makeFacetDeselect(a)}),zr=e=>Y("analytics/facet/unexclude",(t,r)=>{I(e,{facetId:le,facetValue:L});let n=bt(r),a=ko(e,n);return t.makeFacetUnexclude(a)}),qi=e=>Y("analytics/facet/breadcrumb",(t,r)=>{I(e,{facetId:le,facetValue:L});let n=ko(e,bt(r));return t.makeBreadcrumbFacet(n)}),it=()=>({actionCause:"facetClearAll"}),Be=()=>({actionCause:"facetSelect"}),Yr=()=>({actionCause:"facetExclude"}),Kr=()=>({actionCause:"facetDeselect"}),MF=()=>({actionCause:"facetUnexclude"}),wd=()=>({actionCause:"breadcrumbFacet"});l();s();u();c();l();s();u();c();var LF={facetId:le,value:new Q({values:{displayValue:Re,rawValue:Re,count:new J({required:!0,min:0})}})},Pd=w("facetSearch/register",e=>I(e,Tc)),Dn=w("facetSearch/update",e=>I(e,Tc)),Da=w("facetSearch/toggleSelectValue",e=>I(e,LF)),Va=w("facetSearch/toggleExcludeValue",e=>I(e,LF));var Lt=re(Eo(),e=>{e.addCase(Ar,(t,r)=>{let{facetId:n}=r.payload;n in t||(t[n]=NC(dD(r.payload)))}).addCase(Ae.fulfilled,(t,r)=>{if(r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(xe,(t,r)=>{let n=r.payload.f||{},a=r.payload.fExcluded||{};Object.keys(t).forEach(d=>{let{request:p}=t[d],m=n[d]||[],f=a[d]||[],S=m.length+f.length,C=p.currentValues.filter(x=>!m.includes(x.value)&&!f.includes(x.value));p.currentValues=[...m.map(UF),...f.map(_F),...C.map(mD)],p.preventAutoSelect=S>0,p.numberOfValues=Math.max(S,p.numberOfValues)})}).addCase(xr,(t,r)=>{let{facetId:n,selection:a}=r.payload,o=t[n]?.request;if(!o)return;o.preventAutoSelect=!0;let d=o.currentValues.find(m=>m.value===a.value);if(!d){Ed(o,a);return}let p=d.state==="selected";d.previousState=d.state,d.state=p?"idle":"selected",o.freezeCurrentValues=!0}).addCase(Fr,(t,r)=>{let{facetId:n,selection:a}=r.payload,o=t[n]?.request;if(!o)return;o.preventAutoSelect=!0;let d=o.currentValues.find(m=>m.value===a.value);if(!d){Ed(o,a);return}let p=d.state==="excluded";d.previousState=d.state,d.state=p?"idle":"excluded",o.freezeCurrentValues=!0}).addCase(Wr,(t,r)=>{let{facetId:n,freezeCurrentValues:a}=r.payload,o=t[n]?.request;o&&(o.freezeCurrentValues=a)}).addCase(Te,(t,r)=>{Oc(t[r.payload]?.request)}).addCase(_e,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Oc(r))}).addCase(Bo,t=>{Object.values(t).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Oc(r))}).addCase(sr,(t,r)=>Object.values(t).forEach(n=>{n.request.preventAutoSelect=!r.payload.allow})).addCase(ki,(t,r)=>{Ei(t,r.payload)}).addCase(qa,(t,r)=>{let{facetId:n,numberOfValues:a}=r.payload;xd(t[n]?.request,a)}).addCase(ja,(t,r)=>{let{facetId:n,isFieldExpanded:a}=r.payload,o=t[n]?.request;o&&(o.isFieldExpanded=a)}).addCase(G.fulfilled,(t,r)=>{r.payload.response.facets.forEach(a=>QF(t[a.facetId]?.request,a))}).addCase(Mt.fulfilled,(t,r)=>{r.payload.response.facets.forEach(a=>QF(t[a.facetId]?.request,a))}).addCase(Da,(t,r)=>{let{facetId:n,value:a}=r.payload,o=t[n]?.request;if(!o)return;let{rawValue:d}=a,{currentValues:p}=o,m=p.find(S=>S.value===d);if(m){m.state="selected";return}let f=UF(d);Ed(o,f),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(Va,(t,r)=>{let{facetId:n,value:a}=r.payload,o=t[n]?.request;if(!o)return;let{rawValue:d}=a,{currentValues:p}=o,m=p.find(S=>S.value===d);if(m){m.state="excluded";return}let f=_F(d);Ed(o,f),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(ke,(t,r)=>{if(!(r.payload in t))return;let{request:n}=t[r.payload];Oc(n)})});function Ed(e,t){let{currentValues:r}=e,n=r.findIndex(o=>o.state==="idle"),a=n===-1?r.length:n;e.currentValues.splice(a,0,t),n>-1&&e.currentValues.pop(),e.numberOfValues=e.currentValues.length}function QF(e,t){e&&(e.currentValues=t.values.map(pD),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var jc={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function dD(e){return{...jc,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function pD(e){let{value:t,state:r}=e;return{value:t,state:r}}function UF(e){return{value:e,state:"selected"}}function _F(e){return{value:e,state:"excluded"}}function mD(e){return{...e,state:"idle"}}l();s();u();c();var Id=()=>Y("analytics/facet/deselectAllBreadcrumbs",e=>e.makeBreadcrumbResetAll());l();s();u();c();l();s();u();c();function Vn(e){let t=BF(e.start,e),r=BF(e.end,e),n=e.endInclusive??!1,a=e.state??"idle";return{start:t,end:r,endInclusive:n,state:a}}function BF(e,t){let{dateFormat:r}=t;return bA(e)?(Rn(e),xA(e)):typeof e=="string"&&lr(e)?(Rn(e),e):(ml(e,r),hc(Sa(e,r)))}l();s();u();c();var ji=w("rangeFacet/updateSortCriterion",e=>I(e,{facetId:le,criterion:new be({required:!0})}));l();s();u();c();var Na={state:L,start:new J({required:!0}),end:new J({required:!0}),endInclusive:new ne({required:!0}),numberOfResults:new J({required:!0,min:0})},Ma={start:L,end:L,endInclusive:new ne({required:!0}),state:L,numberOfResults:new J({required:!0,min:0})},La=e=>({facetId:le,selection:typeof e.start=="string"?new Q({values:Ma}):new Q({values:Na})});var fD={start:L,end:L,endInclusive:new ne({required:!0}),state:L},gD={facetId:le,field:L,tabs:new Q({options:{required:!1},values:{included:new te({each:new j}),excluded:new te({each:new j})}}),activeTab:new j({required:!1}),currentValues:new te({required:!1,each:new Q({values:fD})}),generateAutomaticRanges:new ne({required:!0}),filterFacetCount:new ne({required:!1}),injectionDepth:new J({required:!1,min:0}),numberOfValues:new J({required:!1,min:1}),sortCriteria:new be({required:!1}),rangeAlgorithm:new be({required:!1})};function GF(e){return lr(e)?Cc(e):e}function kd(e){e.currentValues&&e.currentValues.forEach(t=>{let{start:r,end:n}=Vn(t);if(Sa(GF(r)).isAfter(Sa(GF(n))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var br=w("dateFacet/register",e=>{try{return It(e,gD),kd(e),{payload:e,error:null}}catch(t){return{payload:e,error:Nr(t)}}}),vr=w("dateFacet/toggleSelectValue",e=>I(e,{facetId:le,selection:new Q({values:Ma})})),wr=w("dateFacet/toggleExcludeValue",e=>I(e,{facetId:le,selection:new Q({values:Ma})})),Jr=w("dateFacet/updateFacetValues",e=>{try{return It(e,{facetId:le,values:new te({each:new Q({values:Ma})})}),kd({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Nr(t)}}}),Td=ji,Od=Te;l();s();u();c();l();s();u();c();var qd=(e,{facetId:t,selection:r})=>{let a=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field,o=`${a}_${t}`;return{facetId:t,facetField:a,facetTitle:o,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}},jd=()=>({actionCause:"breadcrumbFacet"});var Dc=e=>Y("analytics/dateFacet/breadcrumb",(t,r)=>{I(e,La(e.selection));let n=qd(r,e);return t.makeBreadcrumbFacet(n)}),sy=jd;l();s();u();c();function yD(e,t){return!!t&&t.facetId in e.dateFacetSet}var $F=(e,t)=>{let r=Wt(e,t);if(yD(e,r))return r},HF=(e,t)=>($F(e,t)||{values:[]}).values.filter(n=>n.state==="selected"),WF=(e,t)=>($F(e,t)||{values:[]}).values.filter(n=>n.state!=="idle");l();s();u();c();l();s();u();c();var Vd={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function Nd(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let a=zF(r);r.numberOfValues=a,e[n]=t}function Md(e,t,r){let n=e[t]?.request;n&&(n.currentValues=r,n.numberOfValues=zF(n))}function Ld(e,t,r){let n=e[t]?.request;if(!n)return;let a=Dd(n.currentValues,r);if(!a)return;let o=a.state==="selected";a.previousState=a.state,a.state=o?"idle":"selected",n.preventAutoSelect=!0}function Qd(e,t,r){let n=e[t]?.request;if(!n)return;let a=Dd(n.currentValues,r);if(!a)return;let o=a.state==="excluded";a.previousState=a.state,a.state=o?"idle":"excluded",n.preventAutoSelect=!0}function Nn(e,t){let r=e[t]?.request;r&&r.currentValues.forEach(n=>{n.state!=="idle"&&(n.previousState=n.state),n.state="idle"})}function Ud(e,t){Object.entries(e).forEach(([r,{request:n}])=>{let a=t[r]||[];n.currentValues.forEach(p=>(!!Dd(a,p)&&(p.state="selected"),p));let o=a.filter(p=>!Dd(n.currentValues,p)),d=n.currentValues;d.push(...o),n.numberOfValues=Math.max(n.numberOfValues,d.length)})}function _d(e,t,r){t.forEach(n=>{let a=n.facetId,o=e[a]?.request;if(!o)return;let d=r(n.values);o.currentValues=d,o.preventAutoSelect=!1})}function Dd(e,t){let{start:r,end:n}=t;return e.find(a=>a.start===r&&a.end===n)}function zF(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}var Pr=re(wo(),e=>{e.addCase(br,(t,r)=>{let{payload:n}=r,a=hD(n);Nd(t,DC(a))}).addCase(Ae.fulfilled,(t,r)=>r.payload?.dateFacetSet??t).addCase(xe,(t,r)=>{let n=r.payload.df||{};Ud(t,n)}).addCase(vr,(t,r)=>{let{facetId:n,selection:a}=r.payload;Ld(t,n,a)}).addCase(wr,(t,r)=>{let{facetId:n,selection:a}=r.payload;Qd(t,n,a)}).addCase(Jr,(t,r)=>{let{facetId:n,values:a}=r.payload;Md(t,n,a)}).addCase(Od,(t,r)=>{Nn(t,r.payload)}).addCase(_e,t=>{Object.keys(t).forEach(r=>{Nn(t,r)})}).addCase(Td,(t,r)=>{Ei(t,r.payload)}).addCase(G.fulfilled,(t,r)=>{let n=r.payload.response.facets;_d(t,n,SD)}).addCase(ke,(t,r)=>{Nn(t,r.payload)})});function hD(e){return{...Vd,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function SD(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}l();s();u();c();var CD={state:L,start:new J({required:!0}),end:new J({required:!0}),endInclusive:new ne({required:!0})},AD={facetId:le,field:L,tabs:new Q({options:{required:!1},values:{included:new te({each:new j}),excluded:new te({each:new j})}}),activeTab:new j({required:!1}),currentValues:new te({required:!1,each:new Q({values:CD})}),generateAutomaticRanges:new ne({required:!0}),filterFacetCount:new ne({required:!1}),injectionDepth:new J({required:!1,min:0}),numberOfValues:new J({required:!1,min:1}),sortCriteria:new be({required:!1}),rangeAlgorithm:new be({required:!1})};function Bd(e){e.currentValues&&e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var Er=w("numericFacet/register",e=>{try{return I(e,AD),Bd(e),{payload:e,error:null}}catch(t){return{payload:e,error:Nr(t)}}}),Ir=w("numericFacet/toggleSelectValue",e=>I(e,{facetId:le,selection:new Q({values:Na})})),kr=w("numericFacet/toggleExcludeValue",e=>I(e,{facetId:le,selection:new Q({values:Na})})),Xr=w("numericFacet/updateFacetValues",e=>{try{return It(e,{facetId:le,values:new te({each:new Q({values:Na})})}),Bd({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Nr(t)}}}),Gd=ji,$d=Te;l();s();u();c();var Vc=e=>Y("analytics/numericFacet/breadcrumb",(t,r)=>{I(e,La(e.selection));let n=qd(r,e);return t.makeBreadcrumbFacet(n)}),cy=jd;l();s();u();c();function xD(e,t){return!!t&&t.facetId in e.numericFacetSet}var YF=(e,t)=>{let r=Wt(e,t);if(xD(e,r))return r},KF=(e,t)=>(YF(e,t)||{values:[]}).values.filter(n=>n.state!=="idle"),JF=(e,t)=>(YF(e,t)||{values:[]}).values.filter(n=>n.state==="selected");l();s();u();c();var Qt=re(Po(),e=>{e.addCase(Er,(t,r)=>{let{payload:n}=r,a=FD(n);Nd(t,VC(a))}).addCase(Ae.fulfilled,(t,r)=>r.payload?.numericFacetSet??t).addCase(xe,(t,r)=>{let n=r.payload.nf||{};Ud(t,n)}).addCase(Ir,(t,r)=>{let{facetId:n,selection:a}=r.payload;Ld(t,n,a)}).addCase(kr,(t,r)=>{let{facetId:n,selection:a}=r.payload;Qd(t,n,a)}).addCase(Xr,(t,r)=>{let{facetId:n,values:a}=r.payload;Md(t,n,a)}).addCase($d,(t,r)=>{Nn(t,r.payload)}).addCase(_e,t=>{Object.keys(t).forEach(r=>{Nn(t,r)})}).addCase(Gd,(t,r)=>{Ei(t,r.payload)}).addCase(G.fulfilled,(t,r)=>{let n=r.payload.response.facets;_d(t,n,RD)}).addCase(ke,(t,r)=>{Nn(t,r.payload)})});function FD(e){return{...Vd,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function RD(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}l();s();u();c();l();s();u();c();var Qa=L,Hd=new Q({options:{required:!0},values:{caption:Re,expression:Re,state:new j({constrainTo:["idle","selected","excluded"]})}}),Wd=new te({required:!0,each:Hd});var Di=w("staticFilter/register",e=>I(e,{id:Qa,values:Wd})),Zr=w("staticFilter/toggleSelect",e=>I(e,{id:Qa,value:Hd})),en=w("staticFilter/toggleExclude",e=>I(e,{id:Qa,value:Hd})),Mn=w("staticFilter/deselectAllFilterValues",e=>I(e,Qa)),zd=e=>Y("analytics/staticFilter/select",t=>t.makeStaticFilterSelect(e)),Vi=e=>Y("analytics/staticFilter/deselect",t=>t.makeStaticFilterDeselect(e)),Yd=e=>Y("analytics/staticFilter/clearAll",t=>t.makeStaticFilterClearAll(e));l();s();u();c();l();s();u();c();function ee(e){let t,r=new Map,n=()=>r.size===0,a=o=>{try{let d=JSON.stringify(o),p=t!==d;return t=d,p}catch(d){return console.warn('Could not detect if state has changed, check the controller "get state method"',d),!0}};return{subscribe(o){o();let d=Symbol(),p;return n()&&(t=JSON.stringify(this.state),p=e.subscribe(()=>{a(this.state)&&r.forEach(m=>m())})),r.set(d,o),()=>{r.delete(d),n()&&p?.()}},get state(){return{}}}}var Kd=e=>Object.keys(e.facetSet).map(t=>{let r=e.facetValuesSelector(e.engine.state,t).map(n=>({value:n,deselect:()=>{n.state==="selected"?e.executeToggleSelect({facetId:t,selection:n}):n.state==="excluded"&&e.executeToggleExclude({facetId:t,selection:n})}}));return{facetId:t,field:e.facetSet[t].request.field,values:r}}).filter(t=>t.values.length);function XF(e){let t=ee(e),{dispatch:r}=e;return{...t,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(_e())},deselectBreadcrumb(n){n.deselect()}}}function ZF(e){if(!bD(e))throw W;let t=XF(e),{dispatch:r}=e,n=()=>e.state,a=()=>{let b={engine:e,facetSet:n().facetSet,executeToggleSelect:({facetId:R,selection:E})=>{r(xr({facetId:R,selection:E})),r(Wr({facetId:R,freezeCurrentValues:!1})),r(G({legacy:qi({facetId:R,facetValue:E.value}),next:wd()}))},executeToggleExclude:({facetId:R,selection:E})=>{r(Fr({facetId:R,selection:E})),r(Wr({facetId:R,freezeCurrentValues:!1})),r(G({legacy:qi({facetId:R,facetValue:E.value}),next:wd()}))},facetValuesSelector:OC};return Kd(b)},o=()=>{let b={engine:e,facetSet:n().numericFacetSet,executeToggleSelect:R=>{r(Ir(R)),r(G({legacy:Vc(R),next:cy()}))},executeToggleExclude:R=>{r(kr(R)),r(G({legacy:Vc(R),next:cy()}))},facetValuesSelector:KF};return Kd(b)},d=()=>{let b={engine:e,facetSet:n().dateFacetSet,executeToggleSelect:R=>{r(vr(R)),r(G({legacy:Dc(R),next:sy()}))},executeToggleExclude:R=>{r(wr(R)),r(G({legacy:Dc(R),next:sy()}))},facetValuesSelector:WF};return Kd(b)},p=()=>Object.keys(n().categoryFacetSet).map(m).filter(b=>b.path.length),m=b=>{let R=jC(n(),b);return{facetId:b,field:n().categoryFacetSet[b].request.field,path:R,deselect:()=>{r(fr(b)),r(G({legacy:Ad({categoryFacetPath:R.map(E=>E.value),categoryFacetId:b}),next:kF()}))}}},f=()=>{let b=n().staticFilterSet??{};return Object.values(b).map(S)},S=b=>{let{id:R,values:E}=b,P=E.filter(k=>k.state!=="idle").map(k=>C(R,k));return{id:R,values:P}},C=(b,R)=>({value:R,deselect:()=>{let{caption:E,expression:P}=R;R.state==="selected"?r(Zr({id:b,value:R})):R.state==="excluded"&&r(en({id:b,value:R})),r(G({legacy:Vi({staticFilterId:b,staticFilterValue:{caption:E,expression:P}})}))}}),x=()=>{let b=n().automaticFacetSet?.set??{};return Object.values(b).map(R=>A(R.response)).filter(R=>R.values.length>0)},A=b=>{let{field:R,label:E}=b,P=b.values.filter(k=>k.state!=="idle").map(k=>F(R,k));return{facetId:R,field:R,label:E,values:P}},F=(b,R)=>({value:R,deselect:()=>{r(pr({field:b,selection:R})),r(G({legacy:qi({facetId:b,facetValue:R.value}),next:wd()}))}});function v(){return!![...a(),...o(),...d(),...p(),...f(),...x()].length}return{...t,get state(){return{facetBreadcrumbs:a(),categoryFacetBreadcrumbs:p(),numericFacetBreadcrumbs:o(),dateFacetBreadcrumbs:d(),staticFilterBreadcrumbs:f(),automaticFacetBreadcrumbs:x(),hasBreadcrumbs:v()}},deselectAll:()=>{t.deselectAll(),r(G({legacy:Id(),next:{actionCause:"breadcrumbResetAll"}}))}}}function bD(e){return e.addReducers({configuration:ie,search:ce,facetSet:Lt,numericFacetSet:Qt,dateFacetSet:Pr,categoryFacetSet:gr}),!0}l();s();u();c();l();s();u();c();l();s();u();c();var vD=new te({each:L,required:!0}),eR=(e,t)=>(I(e,L),ro(t)?I(t,L):I(t,vD),{payload:{contextKey:e,contextValue:t}}),Ua=w("context/set",e=>{for(let[t,r]of Object.entries(e))eR(t,r);return{payload:e}}),_a=w("context/add",e=>eR(e.contextKey,e.contextValue)),Ba=w("context/remove",e=>I(e,L));l();s();u();c();var Jd=re(Sl(),e=>{e.addCase(Ua,(t,r)=>{t.contextValues=r.payload}).addCase(_a,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(Ba,(t,r)=>{delete t.contextValues[r.payload]}).addCase(Ae.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.context.contextValues)})});l();s();u();c();var wD=["caseId","caseNumber"],PD={caseId:"caseContext",caseNumber:"caseContext"},Nc=class extends Error{constructor(t){super(`The key "${t}" is reserved for internal use. Use ${PD[t]} to set this value.}`)}};function uy(e){return wD.includes(e)}var ED=new ue({values:new Q({options:{required:!1}})});function tR(e,t={}){if(!TD(e))throw W;let r=ee(e),{dispatch:n}=e,a=()=>e.state,o=Le(e,ED,t.initialState,"buildContext");return o.values&&n(Ua(o.values)),{...r,get state(){return{values:a().context.contextValues}},set(d){n(Ua(d))},...a().configuration.analytics.analyticsMode==="legacy"?ID(n):kD(n)}}var ID=e=>({add(t,r){e(_a({contextKey:t,contextValue:r}))},remove(t){e(Ba(t))}}),kD=e=>({add(t,r){if(uy(t))throw new Nc(t);e(_a({contextKey:t,contextValue:r}))},remove(t){if(uy(t))throw new Nc(t);e(Ba(t))}});function TD(e){return e.addReducers({context:Jd}),!0}function rR(e,t){return tR(e,t)}l();s();u();c();l();s();u();c();var He=re(Al(),e=>{e.addCase(me,(t,r)=>({...t,...r.payload})).addCase(G.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(G.rejected,t=>{t.freezeFacetOrder=!1}).addCase(Ae.fulfilled,(t,r)=>r.payload?.facetOptions??t).addCase(mr,(t,r)=>{let{facetId:n,tabs:a}=r.payload;Xd(a,t,n)}).addCase(Ar,(t,r)=>{let{facetId:n,tabs:a}=r.payload;Xd(a,t,n)}).addCase(br,(t,r)=>{let{facetId:n,tabs:a}=r.payload;Xd(a,t,n)}).addCase(Er,(t,r)=>{let{facetId:n,tabs:a}=r.payload;Xd(a,t,n)}).addCase(ot,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(ke,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(xe,(t,r)=>{[...Object.keys(r.payload.f??{}),...Object.keys(r.payload.fExcluded??{}),...Object.keys(r.payload.cf??{}),...Object.keys(r.payload.nf??{}),...Object.keys(r.payload.df??{})].forEach(n=>{n in t||(t.facets[n]=Cg()),t.facets[n].enabled=!0})})});function Xd(e,t,r){let n={...Cg(),tabs:e??{}};t.facets[r]=n}l();s();u();c();var ly=(e,t)=>typeof e=="object"&&Object.keys({...e}).length===0||!t||!e?!0:e.excluded?.includes(t)?!1:!!(e.included&&(e.included.length===0||e.included.includes(t)));l();s();u();c();l();s();u();c();var Ni=re(Rl(),e=>{e.addCase(Ci,(t,r)=>{let n=r.payload,{id:a}=n;a in t||(t[a]={...n,isActive:!1})}).addCase(Kt,(t,r)=>{let n=r.payload;nR(t,n)}).addCase(Mo,(t,r)=>{let n=r.payload;nR(t,n)}).addCase(Ae.fulfilled,(t,r)=>r.payload?.tabSet??t).addCase(xe,(t,r)=>{let n=r.payload.tab;ae(n)||Object.keys(t).forEach(a=>{t[a].isActive=a===n})})});function nR(e,t){t in e&&Object.keys(e).forEach(n=>{e[n].isActive=n===t})}function Zd(e){if(!OD(e))throw W;let t=ee(e),r=we(n=>n.tabSet,n=>Object.values(n).find(o=>o.isActive)?.id??"");return{...t,get state(){return{activeTab:r(e.state)}}}}function OD(e){return e.addReducers({tabSet:Ni}),!0}function aR(e,t){if(!qD(e))throw W;let r=Zd(e),n=F=>e.state.facetOptions.facets[F]?.enabled??!1,a=F=>e.state.facetSet?.[F]?.request?.currentValues??e.state.categoryFacetSet?.[F]?.request?.currentValues??e.state.numericFacetSet?.[F]?.request?.currentValues??e.state.dateFacetSet?.[F]?.request?.currentValues??null,o=F=>F in e.state.facetOptions.facets,d=F=>e.state.facetOptions.facets[F]?.tabs,p=()=>ao({isFacetRegistered:o(t.facetId),parentFacets:t.conditions.map(({parentFacetId:F})=>o(F)?{enabled:n(F),values:a(F)}:null),isTabEnabled:ly(d(t.facetId),r.state.activeTab)}),m=()=>{let F=p();return F===x?!1:(x=F,!0)},f=()=>t.conditions.length>0?t.conditions.some(F=>{if(!n(F.parentFacetId))return!1;let v=a(F.parentFacetId);return v===null?!1:F.condition(v)}):!0,S=()=>{e.state.facetSet&&Object.entries(e.state.facetSet).forEach(([F,v])=>v.request.freezeCurrentValues&&e.dispatch(Wr({facetId:F,freezeCurrentValues:!1})))},C=()=>{if(!o(t.facetId))return;let F=n(t.facetId),v=f(),b=ly(d(t.facetId),r.state.activeTab),R=v&&b;F!==R&&(e.dispatch(R?ot(t.facetId):ke(t.facetId)),S())},x=p(),A=e.subscribe(()=>{m()&&C()});return C(),{stopWatching(){A()}}}function qD(e){return e.addReducers({facetOptions:He}),!0}l();s();u();c();l();s();u();c();var Mi=w("dictionaryFieldContext/set",e=>{let t=new Q({options:{required:!0}}),r=I(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),a=new te({each:Re}),o=I(n,a).error;return o?{payload:e,error:o}:{payload:e}}),Li=w("dictionaryFieldContext/add",e=>{let t=new Q({options:{required:!0},values:{field:Re,key:Re}});return I(e,t)}),Qi=w("dictionaryFieldContext/remove",e=>I(e,Re));l();s();u();c();var ep=re(Cl(),e=>{e.addCase(Mi,(t,r)=>{t.contextValues=r.payload}).addCase(Li,(t,r)=>{let{field:n,key:a}=r.payload;t.contextValues[n]=a}).addCase(Qi,(t,r)=>{delete t.contextValues[r.payload]}).addCase(Ae.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})});function oR(e){if(!jD(e))throw W;let t=ee(e),{dispatch:r}=e,n=()=>e.state;return{...t,get state(){return{values:n().dictionaryFieldContext.contextValues}},set(a){r(Mi(a))},add(a,o){r(Li({field:a,key:o}))},remove(a){r(Qi(a))}}}function jD(e){return e.addReducers({dictionaryFieldContext:ep}),!0}l();s();u();c();l();s();u();c();l();s();u();c();var iR=e=>e.queryCorrection.correctedQuery!==""||e.wasCorrectedTo!=="";l();s();u();c();l();s();u();c();l();s();u();c();var tp=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""}),sR=()=>({correctedQuery:"",corrections:[],originalQuery:""});function cR(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:tp(),originalQuery:"",automaticallyCorrectQuery:!0,queryCorrectionMode:"legacy"}}var uR=(e,t)=>{let r={...sR(),...t,correctedQuery:t?.correctedQuery||t?.corrections[0]?.correctedQuery||""};e.queryCorrection=r,e.wasCorrectedTo=r.correctedQuery};var rp=re(cR(),e=>{e.addCase(ei,t=>{t.enableDidYouMean=!0}).addCase(gl,t=>{t.enableDidYouMean=!1}).addCase(yl,t=>{t.automaticallyCorrectQuery=!0}).addCase(ti,t=>{t.automaticallyCorrectQuery=!1}).addCase(G.pending,t=>{t.queryCorrection=tp(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(G.fulfilled,(t,r)=>{let{queryCorrection:n,queryCorrections:a}=r.payload.response;if(t.queryCorrectionMode==="legacy"){let o=a?.[0]?a[0]:tp();t.queryCorrection=o}t.queryCorrectionMode==="next"&&uR(t,n),t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected,t.originalQuery=r.payload.originalQuery}).addCase(jt,(t,r)=>{t.wasCorrectedTo=r.payload}).addCase(Ca,(t,r)=>{t.queryCorrectionMode=r.payload})});function lR(e,t={}){if(!DD(e))throw W;let r=ee(e),{dispatch:n}=e;n(ei()),t.options?.automaticallyCorrectQuery===!1&&n(ti()),n(Ca(t.options?.queryCorrectionMode||"next"));let a=()=>e.state,o=()=>iR(a().didYouMean);return{...r,get state(){let d=a();return{originalQuery:d.didYouMean.originalQuery,wasCorrectedTo:d.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:d.didYouMean.wasAutomaticallyCorrected,queryCorrection:d.didYouMean.queryCorrection,hasQueryCorrection:o()}},applyCorrection(){n(jt(this.state.queryCorrection.correctedQuery))},updateQueryCorrectionMode(d){n(Ca(d))}}}function DD(e){return e.addReducers({configuration:ie,didYouMean:rp}),!0}function dR(e,t={}){let r=lR(e,t),{dispatch:n}=e;return{...r,get state(){return r.state},applyCorrection(){r.applyCorrection(),n(G({legacy:hl(),next:IA()}))}}}l();s();u();c();l();s();u();c();function pR(e){if(!VD(e))throw W;let t=ee(e),r=()=>e.state;return{...t,sort(n){return Ac(n,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map(o=>o.facetId)}}}}function VD(e){return e.addReducers({search:ce,facetOptions:He}),!0}function mR(e){return pR(e)}l();s();u();c();l();s();u();c();var np=re(Ro(),e=>{e.addCase(G.fulfilled,(t,r)=>{t.set={},r.payload.response.generateAutomaticFacets?.facets?.forEach(a=>{t.set[a.field]={response:a}})}).addCase(Fi,(t,r)=>{r.payload.desiredCount&&(t.desiredCount=r.payload.desiredCount),r.payload.numberOfValues&&(t.numberOfValues=r.payload.numberOfValues)}).addCase(pr,(t,r)=>{let{field:n,selection:a}=r.payload,o=t.set[n]?.response;if(!o)return;let d=o.values.find(m=>m.value===a.value);if(!d)return;let p=d.state==="selected";d.state=p?"idle":"selected"}).addCase(Ri,(t,r)=>{let n=r.payload,a=t.set[n]?.response;if(a)for(let o of a.values)o.state="idle"}).addCase(xe,(t,r)=>{let n=r.payload.af??{},a=Object.keys(t.set);for(let o in n)if(!t.set[o]){let d=ND(o),p=n[o].map(m=>fR(m));d.values.push(...p),t.set[o]={response:d}}for(let o of a)if(!(o in n)){let d=t.set[o]?.response;for(let p of d.values)p.state="idle"}for(let o in n){let d=t.set[o]?.response;if(d){let p=d.values,m=new Set(n[o]);for(let f of p)m.has(f.value)?(f.state="selected",m.delete(f.value)):f.state="idle";for(let f of m)d.values.push(fR(f))}}}).addCase(Ae.fulfilled,(t,r)=>{if(r.payload&&Object.keys(r.payload.automaticFacetSet.set).length!==0)return r.payload.automaticFacetSet}).addCase(_e,t=>{Object.values(t.set).forEach(({response:r})=>{r.values.forEach(n=>{n.state="idle"})})})});function ND(e){return{field:e,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function fR(e){return{value:e,state:"selected",numberOfResults:0}}l();s();u();c();l();s();u();c();var ap=e=>e.state==="selected",op=e=>e.state==="excluded",ip=(e,t)=>{let r={facetId:e,facetValue:t.value};return ap(t)?Xt(r):je(r)},sp=e=>ap(e)?Kr():Be(),gR=(e,t)=>{let r={facetId:e,facetValue:t.value};return op(t)?zr(r):wt(r)},yR=e=>op(e)?MF():Yr();function hR(e,t){let{dispatch:r}=e,n=ee(e),{field:a}=t;return{...n,toggleSelect(o){r(pr({field:a,selection:o})),r(G({legacy:ip(a,o),next:sp(o)}))},deselectAll(){r(Ri(a)),r(G({legacy:$e(a),next:it()}))},get state(){let o=e.state.automaticFacetSet?.set[a]?.response;return o?{field:o.field,label:o.label,values:o.values}:{field:"",values:[],label:""}}}}l();s();u();c();function SR(e){return{desiredCount:e.desiredCount,numberOfValues:e.numberOfValues}}function CR(e,t){if(!MD(e))throw W;let{dispatch:r}=e,n=SR(t.options);return r(Fi(n)),{...ee(e),get state(){return{automaticFacets:e.state.search.response.generateAutomaticFacets?.facets.map(d=>hR(e,{field:d.field}))??[]}}}}function MD(e){return e.addReducers({automaticFacetSet:np,configuration:ie,search:ce}),!0}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var cp=(r=>(r.Relevance="relevance",r.Fields="fields",r))(cp||{}),dy=(r=>(r.Ascending="asc",r.Descending="desc",r))(dy||{});var qfe=new Q({options:{required:!1},values:{by:new on({enum:cp,required:!0}),fields:new te({each:new Q({values:{field:new j({required:!0}),direction:new on({enum:dy}),displayName:new j}})})}});l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Zt=e=>e.error!==void 0;function AR(e,t="prod"){return`${Ve(e,t)}/rest/organizations/${e}/commerce/v2`}l();s();u();c();var xR=e=>QD(e.cartItems,e.cart);function QD(e,t){let r=e.reduce((n,a)=>{let{productId:o,quantity:d}=t[a];return o in n||(n[o]={productId:o,quantity:0}),n[o].quantity+=d,n},{});return[...Object.values(r)]}var Ui=(e,t)=>{let{view:r,location:n,custom:a,...o}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.commerce.apiBaseUrl??AR(e.configuration.organizationId,e.configuration.environment),organizationId:e.configuration.organizationId,trackingId:e.configuration.analytics.trackingId,...o,...e.configuration.analytics.enabled?{clientId:t.clientId}:{},context:{user:{...n,...t.userAgent?{userAgent:t.userAgent}:{}},view:{...r,...t.referrer?{referrer:t.referrer}:{}},capture:t.capture??(e.configuration.analytics.enabled&&t.clientId!==""),cart:xR(e.cart),source:mn(e.configuration.analytics),...a?{custom:a}:{}}}};var FR=(e,t,r)=>({...Ui(e,t),...UD(e,r)}),UD=(e,t)=>{let r=t?e.commercePagination?.recommendations[t]:e.commercePagination?.principal;return r&&{page:r.page,...r.perPage&&{perPage:r.perPage}}};var Ut=(e,t)=>({...FR(e,t),facets:[..._D(e)],...e.commerceSort&&{sort:BD(e.commerceSort.appliedSort)}});function _D(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.filter(t=>e.commerceFacetSet?.[t]).map(t=>e.manualNumericFacetSet?.[t]?.manualRange?{facetId:t,field:t,numberOfValues:1,isFieldExpanded:!1,preventAutoSelect:!0,type:"numericalRange",values:[e.manualNumericFacetSet[t].manualRange],initialNumberOfValues:1}:e.commerceFacetSet[t].request).filter(t=>t&&t.values.length>0)}function BD(e){return e.by==="relevance"?{sortCriteria:"relevance"}:{sortCriteria:"fields",fields:e.fields.map(({name:t,direction:r})=>({field:t,direction:r}))}}var RR=(e,t,r,n)=>{let a=t.categoryFacetSearchSet[e].options.query,o=`*${a}*`,d=t.commerceFacetSet[Mc(e)]?.request,p=d&&GD(d)?d&&$D(d):[],m=p.length?[p]:[],f=r?a:t.commerceQuery?.query,S=t.categoryFacetSearchSet[e].options.numberOfValues,{url:C,accessToken:x,organizationId:A,trackingId:F,language:v,country:b,currency:R,clientId:E,context:P,...k}=Ut(t,n);return{url:C,accessToken:x,organizationId:A,facetId:Mc(e),facetQuery:r?"*":o,numberOfValues:S,ignorePaths:m,trackingId:F,language:v,country:b,currency:R,clientId:E,context:P,query:f,...!r&&{...k}}};function GD(e){return e.type==="hierarchical"}var $D=e=>{let t=[],r=e.values[0];for(;r;)t.push(r.value),r=r.children[0];return t};l();s();u();c();var bR=(e,t,r,n)=>{let a=t.facetSearchSet[e].options.query,o=t.facetSearchSet[e].options.numberOfValues,d=`*${a}*`,p=r?a:t.commerceQuery?.query,{url:m,accessToken:f,organizationId:S,trackingId:C,language:x,country:A,currency:F,clientId:v,context:b,...R}=Ut(t,n);return{url:m,accessToken:f,organizationId:S,facetId:Mc(e),facetQuery:r?"*":d,numberOfValues:o,trackingId:C,language:x,country:A,currency:F,clientId:v,context:b,query:p,...!r&&{...R}}};var vR=e=>async({facetId:t,facetSearchType:r},{getState:n,extra:{validatePayload:a,navigatorContext:o,apiClient:d}})=>{let p=n();a(t,L);let m=HD(p,t)||WD(p,t)?bR(t,p,e,o):RR(t,p,e,o),f=await d.facetSearch(m,r);return{facetId:t,response:f}},Ln=oe("commerce/facetSearch/executeSearch",vR(!1)),Qn=oe("commerce/facetSearch/facetFieldSuggest",vR(!0)),HD=(e,t)=>"facetSearchSet"in e&&e.facetSearchSet[t]!==void 0&&e.commerceFacetSet[t]!==void 0,WD=(e,t)=>"fieldSuggestionsOrder"in e?e.fieldSuggestionsOrder.some(r=>r.facetId===t&&r.type==="regular"):!1,up="field_suggestion:";function Mc(e){return e.startsWith(up)?e.slice(up.length):e}function Un(e){return e.startsWith(up)?e:`${up}${e}`}l();s();u();c();l();s();u();c();var lp=e=>e.commercePagination?.principal.perPage||0;var dp=e=>e.commercePagination?.principal.totalEntries||0;l();s();u();c();l();s();u();c();var zD="coveo-headless-internal-state",_i=Symbol.for(zD);var my=e=>e.productListing?.results.length||e.productListing?.products.length||0,wR=we(e=>({total:dp(e),current:my(e)}),({current:e,total:t})=>e<t);var Bi=oe("commerce/productListing/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:a}})=>{let o=t(),d=Ut(o,a),p=await n.getProductListing({...d,enableResults:!!e?.enableResults});return Zt(p)?r(p.error):{response:p.success}}),ohe=oe("commerce/productListing/fetchMoreProducts",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:a}})=>{let o=t();if(!wR(o))return null;let p=lp(o),f=my(o)/p,S=await n.getProductListing({...Ut(o,a),enableResults:!!e?.enableResults,page:f});return Zt(S)?r(S.error):{response:S.success}}),YD={child:new Q({options:{required:!0},values:{permanentid:new j({required:!0})}})},ihe=w("commerce/productListing/promoteChildToParent",e=>I(e,YD));l();s();u();c();l();s();u();c();var PR=(e,t,r)=>({...Ui(t,r),query:t.querySet[e]});var ER=w("commerce/querySuggest/clear",e=>I(e,{id:L})),_n=oe("commerce/querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:a,navigatorContext:o}})=>{a(e,{id:L});let d=t(),p=PR(e.id,d,o),m=await n.querySuggest(p);return Zt(m)?r(m.error):{id:e.id,query:p.query,...m.success}}),IR=w("commerce/querySuggest/register",e=>I(e,{id:L,count:new J({min:0})})),kR=w("commerce/querySuggest/selectSuggestion",e=>I(e,{id:L,expression:Re}));l();s();u();c();l();s();u();c();var The=w("commerce/facets/core/updateNumberOfValues",e=>I(e,{facetId:L,numberOfValues:new J({required:!0,min:1})})),Ohe=w("commerce/facets/core/updateIsFieldExpanded",e=>I(e,{facetId:L,isFieldExpanded:new ne({required:!0})})),qhe=w("commerce/facets/core/clearAll"),TR=w("commerce/facets/core/deleteAll"),jhe=w("commerce/facets/core/deselectAllValues",e=>I(e,{facetId:L})),Dhe=w("commerce/facets/core/updateFreezeCurrentValues",e=>I(e,{facetId:L,freezeCurrentValues:new ne({required:!0})})),OR=w("commerce/facets/core/updateAutoSelectionForAll",e=>I(e,{allow:new ne({required:!0})}));l();s();u();c();var pp={slotId:eS},KD={...pp,pageSize:new J({required:!0,min:0})},Ghe=w("commerce/pagination/setPageSize",e=>I(e,KD)),JD={...pp,page:new J({required:!0,min:0})},qR=w("commerce/pagination/selectPage",e=>I(e,JD)),$he=w("commerce/pagination/nextPage",e=>I(e,pp)),Hhe=w("commerce/pagination/previousPage",e=>I(e,pp)),Whe=w("commerce/pagination/registerRecommendationsSlot",e=>I(e,{slotId:L}));l();s();u();c();var mp=w("commerce/query/update",e=>I(e,{query:new j}));l();s();u();c();l();s();u();c();var jR=w("commerce/triggers/query/updateIgnore",e=>I(e,{q:new j({emptyAllowed:!0,required:!0})})),DR=w("commerce/triggers/query/applyModification",e=>I(e,new Q({values:{originalQuery:Ie,modification:Ie}})));l();s();u();c();l();s();u();c();function fy(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{q:n}:{}}function gy(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{sortCriteria:n}:{}}function Ga(e,t,r,n){if(e===void 0)return{};let a=Object.entries(e).filter(([o])=>t(o)).map(([o,{request:d}])=>{let p=r(d);return p.length?{[o]:p}:{}}).reduce((o,d)=>({...o,...d}),{});return Object.keys(a).length?{[n]:a}:{}}function VR(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{tab:n}:{}}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var yy=e=>e.commerceSearch?.products.length||0,NR=we(e=>({total:dp(e),current:yy(e)}),({current:e,total:t})=>e<t);var fp=e=>e.commerceQuery?.query??"";var MR=(e,t)=>ae(t.queryCorrection?.correctedQuery)?fp(e):t.queryCorrection.correctedQuery;var Lc=class{constructor(t){this.config=t}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}async fetchFromAPI(t){let r=Date.now(),n=await this.extra.apiClient.search(t),a=Date.now()-r,o=this.getState().commerceQuery.query||"";return{response:n,duration:a,queryExecuted:o,requestExecuted:t,enableResults:!!("enableResults"in t&&t.enableResults)}}processSuccessResponse(t){return{...t,response:this.getSuccessResponse(t),originalQuery:this.getCurrentQuery()}}processQueryErrorOrContinue(t){return Zt(t.response)?this.rejectWithValue(t.response.error):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{queryCorrection:a}=n;if(!(!ae(a)&&!ae(a.correctedQuery)))return null;let{correctedQuery:d,originalQuery:p}=n.queryCorrection;return this.onUpdateQueryForCorrection(d??""),{...t,response:{...n},queryExecuted:MR(r,n),originalQuery:p??""}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(p=>p.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(jR({q:""})),null;let o=this.getCurrentQuery(),d=await this.automaticallyRetryQueryWithTriggerModification(n,t.enableResults);return Zt(d.response)?this.rejectWithValue(d.response.error):{...d,response:{...d.response.success},originalQuery:o}}async automaticallyRetryQueryWithTriggerModification(t,r){return this.dispatch(DR({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI({...Ut(this.getState(),this.navigatorContext),query:t,enableResults:!!r})}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getState(){return this.config.getState()}get navigatorContext(){return this.config.extra.navigatorContext}getCurrentQuery(){let t=this.getState();return t.commerceQuery.query!==void 0?t.commerceQuery.query:""}getSuccessResponse(t){return Zt(t.response)?null:t.response.success}get extra(){return this.config.extra}onUpdateQueryForCorrection(t){this.dispatch(mp({query:t}))}};var Bn=oe("commerce/search/executeSearch",async(e={},t)=>{let{getState:r}=t,n=r(),{navigatorContext:a}=t.extra,o=Ut(n,a),d=fp(n),p=new Lc(t),m=await p.fetchFromAPI({...o,query:d,enableResults:!!e?.enableResults});return p.process(m)}),kCe=oe("commerce/search/fetchMoreProducts",async(e={},t)=>{let{getState:r}=t,n=r(),{navigatorContext:a}=t.extra;if(!NR(n))return null;let d=lp(n),m=yy(n)/d,f=fp(n),S=Ut(n,a),C=new Lc(t),x=await C.fetchFromAPI({...S,query:f,page:m,enableResults:!!e?.enableResults});return C.process(x)}),TCe=oe("commerce/search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;I(e,{query:new j,clearFilters:new ne}),e.clearFilters&&r(TR()),r(OR({allow:!0})),r(mp({query:e.query})),r(qR({page:0}))}),OCe=oe("commerce/search/fetchInstantProducts",async(e,{getState:t,rejectWithValue:r,extra:n})=>{let a=t(),{apiClient:o,navigatorContext:d}=n,{q:p}=e,m=await o.productSuggestions({...Ui(a,d),query:p});return Zt(m)?r(m.error):{response:{...m.success,products:m.success.products}}}),XD={child:new Q({options:{required:!0},values:{permanentid:new j({required:!0})}})},qCe=w("commerce/search/promoteChildToParent",e=>I(e,XD));l();s();u();c();function Qc(e,t,r){let{facetId:n}=t;if(e[n])return;let a=!1,o={...At,...t},d=r();e[n]={options:o,isLoading:a,response:d,initialNumberOfValues:o.numberOfValues,requestId:""}}function gp(e,t){let{facetId:r,...n}=t,a=e[r];a&&(a.options={...a.options,...n})}function Gn(e,t,r){let n=e[t];n&&(n.requestId=r,n.isLoading=!0)}function $n(e,t){let r=e[t];r&&(r.isLoading=!1)}function yp(e,t,r){let{facetId:n,response:a}=t,o=e[n];o&&o.requestId===r&&(o.isLoading=!1,o.response=a)}function hp(e,t,r){let{facetId:n,response:a}=t,o=e[n];o&&o.requestId===r&&(o.isLoading=!1,"success"in a&&(o.response=a.success))}function Sp(e,t,r,n){let{facetId:a,response:o}=t,d=Un(a),p=e[d];if(!p)Qc(e,{facetId:d},n),p=e[d];else if(p.requestId!==r)return;p.isLoading=!1,"success"in o&&(p.response=o.success)}function LR(e,t,r,n){if(t.fieldSuggestionsFacets)for(let a of t.fieldSuggestionsFacets)a.facetId in e||a.type!=="regular"||(e[a.facetId]={options:{...At,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:At.numberOfValues,requestId:r})}function QR(e,t,r,n){if(t.fieldSuggestionsFacets)for(let a of t.fieldSuggestionsFacets){let o=Un(a.facetId);o in e||a.type!=="hierarchical"||(e[o]={options:{...At,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:At.numberOfValues,requestId:r})}}function Uc(e,t,r){let{facetId:n}=t,a=e[n];a&&(a.requestId="",a.isLoading=!1,a.response=r(),a.options.numberOfValues=a.initialNumberOfValues,a.options.query=At.query)}function tn(e,t){Object.keys(e).forEach(r=>Uc(e,{facetId:r},t))}var At={captions:{},numberOfValues:10,query:""};l();s();u();c();l();s();u();c();var UR=async(e,t,r,n)=>{let a=t.categoryFacetSearchSet[e].options,o=t.categoryFacetSet[e].request,{captions:d,query:p,numberOfValues:m}=a,{field:f,delimitingCharacter:S,basePath:C,filterFacetCount:x}=o,A=ZD(o),F=A.length?[A]:[],v=`*${p}*`;return{url:t.configuration.search.apiBaseUrl??Me(t.configuration.organizationId,t.configuration.environment),accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:C,captions:d,numberOfValues:m,query:v,field:f,delimitingCharacter:S,ignorePaths:F,filterFacetCount:x,type:"hierarchical",...n?{}:{searchContext:(await Vt(t,r)).request}}},ZD=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};l();s();u();c();var _R=async(e,t,r,n)=>{let{captions:a,query:o,numberOfValues:d}=t.facetSearchSet[e].options,{field:p,currentValues:m,filterFacetCount:f}=t.facetSet[e].request,S=m.filter(x=>x.state!=="idle").map(x=>x.value),C=`*${o}*`;return{url:t.configuration.search.apiBaseUrl??Me(t.configuration.organizationId,t.configuration.environment),accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:a,numberOfValues:d,query:C,field:p,ignoreValues:S,filterFacetCount:f,type:"specific",...n?{}:{searchContext:(await Vt(t,r)).request}}};var BR=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:a,navigatorContext:o}})=>{let d=r(),p;a(t,L),eV(d,t)?p=await _R(t,d,o,e):p=await UR(t,d,o,e);let m=await n.facetSearch(p);return{facetId:t,response:m}},We=oe("facetSearch/executeSearch",BR(!1)),Tr=oe("facetSearch/executeSearch",BR(!0)),Gi=w("facetSearch/clearResults",e=>I(e,{facetId:le})),eV=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;l();s();u();c();function GR(){return{}}var $i=re(GR(),e=>{e.addCase(Pi,(t,r)=>{let n=r.payload;Qc(t,n,$a)}).addCase(Dn,(t,r)=>{gp(t,r.payload)}).addCase(Ln.pending,(t,r)=>{let{facetId:n}=r.meta.arg;Gn(t,n,r.meta.requestId)}).addCase(Qn.pending,(t,r)=>{let{facetId:n}=r.meta.arg;Gn(t,n,r.meta.requestId)}).addCase(We.pending,(t,r)=>{let n=r.meta.arg;Gn(t,n,r.meta.requestId)}).addCase(Ln.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;$n(t,n)}).addCase(Qn.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;$n(t,Un(n))}).addCase(We.rejected,(t,r)=>{let n=r.meta.arg;$n(t,n)}).addCase(Ln.fulfilled,(t,r)=>{hp(t,r.payload,r.meta.requestId)}).addCase(Qn.fulfilled,(t,r)=>{Sp(t,r.payload,r.meta.requestId,$a)}).addCase(_n.fulfilled,(t,r)=>{QR(t,r.payload,r.meta.requestId,$a)}).addCase(We.fulfilled,(t,r)=>{yp(t,r.payload,r.meta.requestId)}).addCase(Gi,(t,{payload:{facetId:r}})=>{Uc(t,{facetId:r},$a)}).addCase(Bi.fulfilled,t=>tn(t,$a)).addCase(Bn.fulfilled,t=>tn(t,$a)).addCase(G.fulfilled,t=>{tn(t,$a)})});function $a(){return{moreValuesAvailable:!1,values:[]}}l();s();u();c();l();s();u();c();l();s();u();c();function $R(e,t){let{field:r,state:n}=e;if(!tV(e))return r;let a=`${r}_`,o=rV(a,n);return aV(r,t),`${a}${o}`}function tV(e){let{field:t,state:r}=e;return HR(r).some(a=>a&&t in a)}function rV(e,t){let n=HR(t).map(a=>Object.keys(a||{})).reduce((a,o)=>a.concat(o),[]);return nV(n,e)+1}function HR(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:a}=e;return[t,r,n,a]}function nV(e,t){return e.map(o=>{let d=o.split(t)[1],p=parseInt(d,10);return Number.isNaN(p)?0:p}).sort().pop()??0}function aV(e,t){let r=`A facet with field "${e}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}function st(e,t){let{state:r,logger:n}=e,{field:a,facetId:o}=t;return o||$R({field:a,state:r},n)}l();s();u();c();l();s();u();c();var WR=["alphanumeric","occurrences"];var zR=new ue({field:hr,tabs:new Q({options:{required:!1},values:{included:new te({each:new j}),excluded:new te({each:new j})}}),basePath:jF,delimitingCharacter:DF,facetId:yr,facetSearch:Ii,filterByBasePath:VF,filterFacetCount:Sr,injectionDepth:Cr,numberOfValues:Jt,sortCriteria:new j({constrainTo:WR})});function YR(e,t){if(!oV(e))throw W;let r=ee(e),{dispatch:n}=e,a=st(e,t.options),o=t.options.tabs??{},d=dt(e.state.tabSet),p={...qc,...cu("facetSearch",t.options),field:t.options.field,facetId:a,tabs:o,activeTab:d},m={facetSearch:{...At,...t.options.facetSearch},...p};ve(e,zR,m,"buildCategoryFacet");let f=()=>Gf(e.state,a),S=()=>Bf(e.state,a),C=()=>ar(e.state),x=()=>dr(e.state,a);return n(mr(p)),{...r,toggleSelect(A){let F=m.numberOfValues;n(jn({facetId:a,selection:A,retrieveCount:F})),n(me())},deselectAll(){n(fr(a)),n(me())},sortBy(A){n(vi({facetId:a,criterion:A})),n(me())},isSortedBy(A){return f().sortCriteria===A},showMoreValues(){let{numberOfValues:A}=m,{activeValue:F,valuesAsTrees:v}=this.state,b=(F?.children.length??v.length)+A;n(Oa({facetId:a,numberOfValues:b})),n(me())},showLessValues(){let{numberOfValues:A}=m;n(Oa({facetId:a,numberOfValues:A})),n(me())},enable(){n(ot(a))},disable(){n(ke(a))},get state(){let A=f(),F=S(),v=C(),b=x(),R=F?.values??[],E=R.some(U=>U.children.length>0)??!1,{parents:P,values:k}=qC(F?.values),N=gt(R),q=N.length?N[N.length-1]:void 0,T=!!q,O=q?.moreValuesAvailable??F?.moreValuesAvailable??!1,D=q?q.children.length>m.numberOfValues:R.length>m.numberOfValues;return{facetId:a,parents:P,selectedValueAncestry:N,values:k,isHierarchical:E,valuesAsTrees:R,activeValue:q,isLoading:v,hasActiveValues:T,canShowMoreValues:O,canShowLessValues:D,sortCriteria:A.sortCriteria,enabled:b}}}}function oV(e){return e.addReducers({categoryFacetSet:gr,categoryFacetSearchSet:$i,facetOptions:He,configuration:ie,search:ce}),!0}l();s();u();c();l();s();u();c();l();s();u();c();function Hi(e,t){let r=e.dispatch,{options:n,getFacetSearch:a,executeFacetSearchActionCreator:o,executeFieldSuggestActionCreator:d}=t,{facetId:p}=n;return{updateText(m){r(Dn({facetId:p,query:m,numberOfValues:a().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:m,options:f}=a();r(Dn({facetId:p,numberOfValues:f.numberOfValues+m})),r(t.isForFieldSuggestions?d(p):o(p))},search(){r(t.isForFieldSuggestions?d(p):o(p))},clear(){r(Gi({facetId:p}))},updateCaptions(m){r(Dn({facetId:p,captions:m}))},get state(){let{response:m,isLoading:f,options:S}=a(),{query:C}=S,x=m.values;return{...m,values:x,isLoading:f,query:C}}}}function KR(e,t){let{dispatch:r}=e,n={...At,...t.options},{facetId:a}=n,o=()=>"state"in e?e.state.categoryFacetSearchSet[a]:e[_i].categoryFacetSearchSet[a];r(Pi(n));let d=Hi(e,{options:n,getFacetSearch:o,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:t.executeFacetSearchActionCreator,executeFieldSuggestActionCreator:t.executeFieldSuggestActionCreator});return{...d,select(p){r(wi({facetId:a,value:p})),t.select(p)},get state(){return d.state}}}function Cp(e,t){let{executeFacetSearchActionCreator:r,executeFieldSuggestActionCreator:n,select:a,isForFieldSuggestions:o}=t,{dispatch:d}=e,p={...At,...t.options},{facetId:m}=p,f=()=>e.state.categoryFacetSearchSet[m],S=KR(e,{options:{...p},executeFacetSearchActionCreator:r,executeFieldSuggestActionCreator:n,select:a,isForFieldSuggestions:o});d(Pi(p));let C=Hi(e,{options:p,getFacetSearch:f,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:We,executeFieldSuggestActionCreator:Tr});return{...C,...S,get state(){return{...C.state,...S.state}}}}function JR(e,t){if(!iV(e))throw W;let r=YR(e,t),{dispatch:n}=e,a=()=>r.state.facetId,o=Cp(e,{options:{facetId:a(),...t.options.facetSearch},executeFacetSearchActionCreator:We,executeFieldSuggestActionCreator:Tr,select:m=>{n(me()),n(G({legacy:je({facetId:a(),facetValue:m.rawValue}),next:Be()}))},isForFieldSuggestions:!1}),{state:d,...p}=o;return{...r,facetSearch:p,toggleSelect(m){r.toggleSelect(m),n(G({legacy:sV(a(),m),next:cV(m)}))},deselectAll(){r.deselectAll(),n(G({legacy:$e(a()),next:it()}))},sortBy(m){r.sortBy(m),n(G({legacy:Rr({facetId:a(),criterion:m})}))},showMoreValues(){r.showMoreValues(),n(Mt({legacy:Ti(a())}))},showLessValues(){r.showLessValues(),n(Mt({legacy:Oi(a())}))},get state(){return{...r.state,facetSearch:o.state}}}}function iV(e){return e.addReducers({categoryFacetSet:gr,categoryFacetSearchSet:$i,configuration:ie,search:ce}),!0}function sV(e,t){let r={facetId:e,facetValue:t.value};return t.state==="selected"?Xt(r):je(r)}function cV(e){return e.state==="selected"?Kr():Be()}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var uV=Intl.supportedValuesOf("currency"),lV=new j({required:!0,emptyAllowed:!1,constrainTo:uV}),hy={url:L},Sy={latitude:new J({min:-90,max:90,required:!0}),longitude:new J({min:-180,max:180,required:!0})},XR={custom:new Q({options:{required:!1}})},Cy={language:L,country:L,currency:lV,view:new Q({options:{required:!0},values:hy}),location:new Q({options:{required:!1},values:Sy}),custom:new Q({options:{required:!1}})},AFe=new ue(Cy);var ZR=w("commerce/context/set",e=>I(e,Cy)),Ap=w("commerce/context/setView",e=>I(e,hy)),IFe=w("commerce/context/setLocation",e=>I(e,Sy)),kFe=w("commerce/context/setCustom",e=>I({custom:e},XR));l();s();u();c();function eb(){return{}}var Wi=re(eb(),e=>{e.addCase(Pd,(t,r)=>{let n=r.payload;Qc(t,n,Hn)}).addCase(Dn,(t,r)=>{gp(t,r.payload)}).addCase(Ln.pending,(t,r)=>{let{facetId:n}=r.meta.arg;Gn(t,n,r.meta.requestId)}).addCase(Qn.pending,(t,r)=>{let{facetId:n}=r.meta.arg;Gn(t,Un(n),r.meta.requestId)}).addCase(We.pending,(t,r)=>{let n=r.meta.arg;Gn(t,n,r.meta.requestId)}).addCase(Ln.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;$n(t,n)}).addCase(Qn.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;$n(t,Un(n))}).addCase(We.rejected,(t,r)=>{let n=r.meta.arg;$n(t,n)}).addCase(Ln.fulfilled,(t,r)=>{hp(t,r.payload,r.meta.requestId)}).addCase(Qn.fulfilled,(t,r)=>{Sp(t,r.payload,r.meta.requestId,Hn)}).addCase(_n.fulfilled,(t,r)=>{LR(t,r.payload,r.meta.requestId,Hn)}).addCase(We.fulfilled,(t,r)=>{yp(t,r.payload,r.meta.requestId)}).addCase(Gi,(t,{payload:r})=>{Uc(t,r,Hn)}).addCase(G.fulfilled,t=>{tn(t,Hn)}).addCase(Bi.fulfilled,t=>tn(t,Hn)).addCase(Bn.fulfilled,t=>tn(t,Hn)).addCase(Ap,t=>tn(t,Hn))});function Hn(){return{moreValuesAvailable:!1,values:[]}}l();s();u();c();l();s();u();c();var tb={facetId:le,selection:new Q({values:Ta})},rb=oe("facet/executeToggleSelect",({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:a}}=r;a({facetId:e,selection:t},tb),n(xr({facetId:e,selection:t})),n(me())}),nb=oe("facet/executeToggleExclude",({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:a}}=r;a({facetId:e,selection:t},tb),n(Fr({facetId:e,selection:t})),n(me())});l();s();u();c();l();s();u();c();var zi=["allValues","atLeastOneValue"];l();s();u();c();var xp=["score","alphanumeric","alphanumericDescending","occurrences","automatic","alphanumericNatural","alphanumericNaturalDescending"];var ab=new ue({facetId:yr,tabs:new Q({options:{required:!1},values:{included:new te({each:new j}),excluded:new te({each:new j})}}),field:hr,filterFacetCount:Sr,injectionDepth:Cr,numberOfValues:Jt,sortCriteria:new j({constrainTo:xp}),resultsMustMatch:new j({constrainTo:zi}),facetSearch:Ii});function ob(e,t,r=ab){if(!dV(e))throw W;let{dispatch:n}=e,a=ee(e),o=st(e,t.options),d=t.options.tabs??{},p=dt(e.state.tabSet),m={...jc,...cu("facetSearch",t.options),field:t.options.field,facetId:o,tabs:d,activeTab:p},f={facetSearch:{...At,...t.options.facetSearch},...m};ve(e,r,f,"buildFacet");let S=()=>zu(e.state,o),C=()=>bo(e.state,o),x=()=>ar(e.state),A=()=>dr(e.state,o),F=()=>{let{currentValues:b}=S();return b.filter(R=>R.state!=="idle").length},v=()=>{let{currentValues:b}=S(),R=f.numberOfValues,E=!!b.find(P=>P.state==="idle");return R<b.length&&E};return n(Ar(m)),{...a,toggleSelect:b=>n(rb({facetId:f.facetId,selection:b})),toggleExclude:b=>n(nb({facetId:f.facetId,selection:b})),toggleSingleSelect:function(b){b.state==="idle"&&n(Te(o)),this.toggleSelect(b)},toggleSingleExclude:function(b){b.state==="idle"&&n(Te(o)),this.toggleExclude(b)},isValueSelected:ap,isValueExcluded:op,deselectAll(){n(Te(o)),n(me())},sortBy(b){n(ki({facetId:o,criterion:b})),n(me())},isSortedBy(b){return this.state.sortCriterion===b},showMoreValues(){let b=S().numberOfValues,R=f.numberOfValues,E=R-b%R,P=b+E;n(qa({facetId:o,numberOfValues:P})),n(ja({facetId:o,isFieldExpanded:!0})),n(me())},showLessValues(){let b=f.numberOfValues,R=Math.max(b,F());n(qa({facetId:o,numberOfValues:R})),n(ja({facetId:o,isFieldExpanded:!1})),n(me())},enable(){n(ot(o))},disable(){n(ke(o))},get state(){let b=S(),R=C(),E=x(),P=A(),k;typeof b.sortCriteria=="object"?k=b.sortCriteria.order==="descending"?"alphanumericDescending":"alphanumeric":k=b.sortCriteria;let N=R?R.values:[],q=N.some(D=>D.state!=="idle"),T=R?R.moreValuesAvailable:!1,O=b.resultsMustMatch;return{label:R?.label,facetId:o,tabs:d,values:N,sortCriterion:k,resultsMustMatch:O,isLoading:E,hasActiveValues:q,canShowMoreValues:T,canShowLessValues:v(),enabled:P}}}}function dV(e){return e.addReducers({facetSet:Lt,facetOptions:He,configuration:ie,facetSearchSet:Wi}),!0}l();s();u();c();function Fp(e,t){let{dispatch:r}=e,{options:n,select:a,exclude:o,isForFieldSuggestions:d,executeFacetSearchActionCreator:p,executeFieldSuggestActionCreator:m}=t,{facetId:f}=n,S=()=>"state"in e?e.state.facetSearchSet[f]:e[_i].facetSearchSet[f];r(Pd(n));let C=Hi(e,{options:n,getFacetSearch:S,isForFieldSuggestions:d,executeFacetSearchActionCreator:p,executeFieldSuggestActionCreator:m});return{...C,select(x){r(Da({facetId:f,value:x})),a(x)},exclude(x){r(Va({facetId:f,value:x})),o(x)},singleSelect(x){r(Te(f)),r(Da({facetId:f,value:x})),a(x)},singleExclude(x){r(Te(f)),r(Va({facetId:f,value:x})),o(x)},get state(){let{values:x}=C.state;return{...C.state,values:x.map(({count:A,displayValue:F,rawValue:v})=>({count:A,displayValue:F,rawValue:v}))}}}}l();s();u();c();var ib=new ue({facetId:yr,field:hr,tabs:new Q({options:{required:!1},values:{included:new te({each:new j}),excluded:new te({each:new j})}}),filterFacetCount:Sr,injectionDepth:Cr,numberOfValues:Jt,sortCriteria:new j({constrainTo:xp}),resultsMustMatch:new j({constrainTo:zi}),facetSearch:Ii,allowedValues:bd,hasBreadcrumbs:NF,customSort:vd});function sb(e,t){if(!pV(e))throw W;let{dispatch:r}=e,n=ob(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},ib),a=()=>n.state.facetId,d=(()=>{let{facetSearch:f}=t.options;return Fp(e,{options:{facetId:a(),...f},select:S=>{r(me()),r(G({legacy:je({facetId:a(),facetValue:S.rawValue}),next:Be()}))},exclude:S=>{r(me()),r(G({legacy:wt({facetId:a(),facetValue:S.rawValue}),next:Yr()}))},isForFieldSuggestions:!1,executeFacetSearchActionCreator:We,executeFieldSuggestActionCreator:Tr})})(),{state:p,...m}=d;return{...n,facetSearch:m,toggleSelect(f){n.toggleSelect(f),r(G({legacy:ip(a(),f),next:sp(f)}))},toggleExclude(f){n.toggleExclude(f),r(G({legacy:gR(a(),f),next:yR(f)}))},deselectAll(){n.deselectAll(),r(G({legacy:$e(a()),next:it()}))},sortBy(f){n.sortBy(f),r(G({legacy:Rr({facetId:a(),criterion:f})}))},isSortedBy(f){return this.state.sortCriterion===f},showMoreValues(){n.showMoreValues(),r(Mt({legacy:Ti(a())}))},showLessValues(){n.showLessValues(),r(Mt({legacy:Oi(a())}))},get state(){return{...n.state,facetSearch:d.state}}}}function pV(e){return e.addReducers({facetSet:Lt,configuration:ie,facetSearchSet:Wi,search:ce}),!0}l();s();u();c();l();s();u();c();var Rp=e=>e.state==="selected",Ay=e=>e.state==="excluded",bp=(e,t)=>{let r=`${t.start}..${t.end}`,n={facetId:e,facetValue:r};return Rp(t)?Xt(n):je(n)},vp=e=>Rp(e)?Kr():Be(),cb=(e,t)=>{let r=`${t.start}..${t.end}`,n={facetId:e,facetValue:r};return Ay(t)?zr(n):wt(n)};l();s();u();c();l();s();u();c();l();s();u();c();var wp=w("rangeFacet/executeToggleSelect",e=>I(e,La(e.selection))),Pp=w("rangeFacet/executeToggleExclude",e=>I(e,La(e.selection)));var ub={facetId:le,selection:new Q({values:Ma})},lb=oe("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,ub),t(vr(e)),t(wp(e)),t(me())}),db=oe("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,ub),t(wr(e)),t(Pp(e)),t(me())});l();s();u();c();function Ep(e,t){if(!e.generateAutomaticRanges&&e.currentValues===void 0){let r=`currentValues should be specified for ${t} when generateAutomaticRanges is false.`;throw new Error(r)}}l();s();u();c();function Ip(e,t){let{facetId:r,getRequest:n}=t,a=ee(e),o=e.dispatch,d=()=>dr(e.state,r);return{...a,isValueSelected:Rp,isValueExcluded:Ay,deselectAll(){o(Te(r)),o(me())},sortBy(p){o(ji({facetId:r,criterion:p})),o(me())},isSortedBy(p){return this.state.sortCriterion===p},enable(){o(ot(r))},disable(){o(ke(r))},get state(){let p=n(),m=Wt(e.state,r),f=p.sortCriteria,S=p.resultsMustMatch,C=m?m.values:[],x=ar(e.state),A=d(),F=C.some(b=>b.state!=="idle"),v=m?.domain;return{facetId:r,values:C,sortCriterion:f,resultsMustMatch:S,hasActiveValues:F,isLoading:x,enabled:A,domain:v}}}}l();s();u();c();l();s();u();c();var kp=["idle","selected","excluded"];l();s();u();c();var Tp=["ascending","descending"],Op=["even","equiprobable"];var mV={start:new j,end:new j,endInclusive:new ne,state:new j({constrainTo:kp})},fV=new ue({facetId:yr,field:hr,tabs:new Q({options:{required:!1},values:{included:new te({each:new j}),excluded:new te({each:new j})}}),generateAutomaticRanges:Rd,filterFacetCount:Sr,injectionDepth:Cr,numberOfValues:Jt,currentValues:new te({each:new Q({values:mV})}),sortCriteria:new j({constrainTo:Tp}),rangeAlgorithm:new j({constrainTo:Op})});function qp(e,t){ve(e,fV,t,"buildDateFacet"),kd(t)}function pb(e,t){if(!gV(e))throw W;Ep(t.options,"buildDateFacet");let r=e.dispatch,n=st(e,t.options),a=t.options.tabs??{},o=dt(e.state.tabSet),d={currentValues:[],...t.options,facetId:n,tabs:a,activeTab:o};qp(e,d),r(br(d));let p=Ip(e,{facetId:n,getRequest:()=>e.state.dateFacetSet[n].request});return{...p,toggleSelect:m=>r(lb({facetId:n,selection:m})),toggleSingleSelect:function(m){m.state==="idle"&&r(Te(n)),this.toggleSelect(m)},toggleExclude:m=>r(db({facetId:n,selection:m})),toggleSingleExclude:function(m){m.state==="idle"&&r(Te(n)),this.toggleExclude(m)},get state(){return p.state}}}function gV(e){return e.addReducers({configuration:ie,search:ce,dateFacetSet:Pr,facetOptions:He}),!0}function mb(e,t){let r=pb(e,t),n=e.dispatch,a=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(G({legacy:$e(a()),next:it()}))},sortBy(o){r.sortBy(o),n(G({legacy:Rr({facetId:a(),criterion:o})}))},toggleSelect:o=>{r.toggleSelect(o),n(G({legacy:bp(a(),o),next:vp(o)}))},toggleExclude:o=>{r.toggleExclude(o),n(G({legacy:cb(a(),o)}))},get state(){return r.state}}}l();s();u();c();l();s();u();c();function fb(e,t){if(!yV(e))throw W;let r=ee(e),{dispatch:n}=e,a=()=>e.state,o=st(e,t.options),d=t.options.tabs??{},p=dt(e.state.tabSet),m={...t.options,currentValues:t.initialState?.range?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o,tabs:d,activeTab:p};qp(e,m),n(br(m));let f=()=>dr(e.state,o);return{...r,clear:()=>{n(Jr({facetId:o,values:[]})),n(me())},setRange:S=>{let C={...S,state:"selected",numberOfResults:0,endInclusive:!0},x=Jr({facetId:o,values:[C]});return x.error?!1:(n(x),n(me()),!0)},enable(){n(ot(o))},disable(){n(ke(o))},get state(){let S=ar(a()),C=f(),x=HF(a(),o),A=x.length?x[0]:void 0;return{facetId:o,isLoading:S,range:A,enabled:C}}}}function yV(e){return e.addReducers({dateFacetSet:Pr,facetOptions:He,configuration:ie,search:ce}),!0}function gb(e,t){if(!hV(e))throw W;let r=fb(e,t),{dispatch:n}=e,a=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(G({legacy:$e(a()),next:it()}))},setRange:o=>{let d=r.setRange(o);return d&&n(G({legacy:je({facetId:a(),facetValue:`${o.start}..${o.end}`}),next:Be()})),d},get state(){return{...r.state}}}}function hV(e){return e.addReducers({dateFacetSet:Pr,configuration:ie,search:ce}),!0}l();s();u();c();l();s();u();c();l();s();u();c();var yb={facetId:le,selection:new Q({values:Na})},hb=oe("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,yb),t(Ir(e)),t(wp(e)),t(me())}),iPe=oe("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,yb),t(kr(e)),t(Pp(e)),t(me())});l();s();u();c();var SV={start:new J,end:new J,endInclusive:new ne,state:new j({constrainTo:kp})},CV=new ue({facetId:yr,tabs:new Q({options:{required:!1},values:{included:new te({each:new j}),excluded:new te({each:new j})}}),field:hr,generateAutomaticRanges:Rd,filterFacetCount:Sr,injectionDepth:Cr,numberOfValues:Jt,currentValues:new te({each:new Q({values:SV})}),sortCriteria:new j({constrainTo:Tp}),resultsMustMatch:new j({constrainTo:zi}),rangeAlgorithm:new j({constrainTo:Op})});function jp(e,t){ve(e,CV,t,"buildNumericFacet"),Bd(t)}l();s();u();c();function Yi(e){return{endInclusive:!1,state:"idle",...e}}function Sb(e,t){if(!AV(e))throw W;Ep(t.options,"buildNumericFacet");let r=e.dispatch,n=st(e,t.options),a=t.options.tabs??{},o=dt(e.state.tabSet),d={currentValues:[],...t.options,facetId:n,tabs:a,activeTab:o};jp(e,d),r(Er(d));let p=Ip(e,{facetId:n,getRequest:()=>e.state.numericFacetSet[n].request});return{...p,toggleSelect:m=>r(hb({facetId:n,selection:m})),toggleSingleSelect(m){m.state==="idle"&&r(Te(n)),this.toggleSelect(m)},get state(){return p.state}}}function AV(e){return e.addReducers({numericFacetSet:Qt,facetOptions:He,configuration:ie,search:ce}),!0}function Cb(e,t){if(!xV(e))throw W;let r=Sb(e,t),n=e.dispatch,a=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(G({legacy:$e(a()),next:it()}))},sortBy(o){r.sortBy(o),n(G({legacy:Rr({facetId:a(),criterion:o})}))},toggleSelect:o=>{r.toggleSelect(o),n(G({legacy:bp(a(),o),next:vp(o)}))},get state(){return{...r.state}}}}function xV(e){return e.addReducers({numericFacetSet:Qt,configuration:ie,search:ce}),!0}l();s();u();c();l();s();u();c();function Ab(e,t){if(!FV(e))throw W;let r=ee(e),{dispatch:n}=e,a=()=>e.state,o=st(e,t.options),d=t.options.tabs??{},p=dt(e.state.tabSet),m={...t.options,currentValues:t.initialState?.range?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o,tabs:d,activeTab:p};jp(e,m),n(Er(m));let f=()=>dr(e.state,o);return{...r,clear:()=>{n(Xr({facetId:o,values:[]})),n(me())},setRange:S=>{let C={...S,state:"selected",numberOfResults:0,endInclusive:!0},x=Xr({facetId:o,values:[C]});return x.error?!1:(n(x),n(me()),!0)},enable(){n(ot(o))},disable(){n(ke(o))},get state(){let S=ar(a()),C=f(),x=JF(a(),o),A=x.length?x[0]:void 0;return{facetId:o,isLoading:S,range:A,enabled:C}}}}function FV(e){return e.addReducers({numericFacetSet:Qt,facetOptions:He,configuration:ie,search:ce}),!0}function xb(e,t){if(!RV(e))throw W;let r=Ab(e,t),{dispatch:n}=e,a=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(G({legacy:$e(a()),next:it()}))},setRange:o=>{let d=r.setRange(o);return d&&n(G({legacy:je({facetId:a(),facetValue:`${o.start}..${o.end}`}),next:Be()})),d},get state(){return{...r.state}}}}function RV(e){return e.addReducers({numericFacetSet:Qt,configuration:ie,search:ce}),!0}l();s();u();c();function Fb(e,t){if(!bV(e))throw W;let{facetSearch:r,...n}=t.options.facet,a=st(e,n);e.dispatch(mr({...qc,...n,facetId:a}));let o=Cp(e,{options:{...r,facetId:a},executeFacetSearchActionCreator:We,executeFieldSuggestActionCreator:Tr,select:p=>{e.dispatch(me()),e.dispatch(G({legacy:je({facetId:a,facetValue:p.rawValue}),next:Be()}))},isForFieldSuggestions:!0});return{...ee(e),...o,updateText:p=>{o.updateText(p),o.search()},get state(){return o.state}}}function bV(e){return e.addReducers({categoryFacetSet:gr,configuration:ie,categoryFacetSearchSet:$i,search:ce}),!0}l();s();u();c();function Rb(e,t){if(!vV(e))throw W;let{facetSearch:r,allowedValues:n,...a}=t.options.facet,o=st(e,a);e.dispatch(Ar({...jc,...a,facetId:o,...n&&{allowedValues:{type:"simple",values:n}}}));let d=Fp(e,{options:{...r,facetId:o},select:m=>{e.dispatch(me()),e.dispatch(G({legacy:je({facetId:o,facetValue:m.rawValue}),next:Be()}))},exclude:m=>{e.dispatch(me()),e.dispatch(G({legacy:wt({facetId:o,facetValue:m.rawValue}),next:Yr()}))},isForFieldSuggestions:!0,executeFacetSearchActionCreator:We,executeFieldSuggestActionCreator:Tr});return{...ee(e),...d,updateText:m=>{d.updateText(m),d.search()},get state(){return d.state}}}function vV(e){return e.addReducers({facetSet:Lt,configuration:ie,facetSearchSet:Wi,search:ce}),!0}l();s();u();c();l();s();u();c();var xy={collectionField:new j({emptyAllowed:!1,required:!1}),parentField:new j({emptyAllowed:!1,required:!1}),childField:new j({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new J({min:0,required:!1})},Wn=w("folding/register",e=>I(e,xy)),zn=oe("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:a}})=>{let o=t(),d=o.configuration.analytics.analyticsMode==="legacy"?await xn(o):Jo(o,a),p=await n.search({...d,q:wV(o),enableQuerySyntax:!0,cq:`@${o.folding.fields.collection}="${e}"`,filterField:o.folding.fields.collection,childField:o.folding.fields.parent,parentField:o.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return Ge(p)?r(p.error):{collectionId:e,results:p.success.results,searchUid:p.success.searchUid,rootResult:o.folding.collections[e].result}});function wV(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}l();s();u();c();var PV=e=>Y("analytics/folding/showMore",(t,r)=>(ht(e),t.makeShowMoreFoldedResults(Ue(e,r),Ee(e)))),EV=()=>Y("analytics/folding/showLess",e=>e.makeShowLessFoldedResults()),bb={logShowMoreFoldedResults:PV,logShowLessFoldedResults:EV};l();s();u();c();l();s();u();c();l();s();u();c();var Dp=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});function IV(e,t){return e.raw[t.collection]}function Fy(e,t){return e.raw[t.parent]}function _c(e,t){let r=e.raw[t.child];return iu(r)?r[0]:r}function kV(e,t){return(e||t)!==void 0&&e===t}function wb(e,t,r,n=[]){let a=_c(e,r);return a?n.indexOf(a)!==-1?[]:t.filter(o=>{let d=_c(o,r)===_c(e,r);return Fy(o,r)===a&&!d}).map(o=>{let d={...o,searchUid:e.searchUid};return{result:d,children:wb(d,t,r,[...n,a])}}):[]}function TV(e,t){return e.find(r=>{let n=Fy(r,t)===void 0,a=kV(Fy(r,t),_c(r,t));return n||a})}function Pb(e){return e.parentResult?Pb(e.parentResult):e}function OV(e,t,r,n){let a=el(e),d={...n??TV(a,t)??Pb(e),searchUid:r};return{result:d,children:wb(d,a,t),moreResultsAvailable:e.totalNumberOfChildResults>1,isLoadingMoreResults:!1}}function Vp(e,t,r,n){let a={};return e.forEach(o=>{let d=IV(o,t);d&&(!_c(o,t)&&!o.parentResult||(a[d]=OV(o,t,r,n)))}),a}function vb(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var Np=re(Dp(),e=>e.addCase(G.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?Vp(r.response.results,t.fields,r.response.searchUid):{}}).addCase(at.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?Vp(r.response.results,t.fields,r.response.searchUid):{}}).addCase(Nt.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...Vp(r.response.results,t.fields,r.response.searchUid)}:{}}).addCase(Wn,(t,{payload:r})=>t.enabled?t:{enabled:!0,collections:{},fields:{collection:r.collectionField??t.fields.collection,parent:r.parentField??t.fields.parent,child:r.childField??t.fields.child},filterFieldRange:r.numberOfFoldedResults??t.filterFieldRange}).addCase(zn.pending,(t,{meta:r})=>{let n=r.arg;vb(t,n).isLoadingMoreResults=!0}).addCase(zn.rejected,(t,{meta:r})=>{let n=r.arg;vb(t,n).isLoadingMoreResults=!1}).addCase(zn.fulfilled,(t,{payload:{collectionId:r,results:n,rootResult:a,searchUid:o}})=>{let d=Vp(n,t.fields,o,a);if(!d||!d[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(n)}. Folding most probably in an invalid state... `);t.collections[r]=d[r],t.collections[r].moreResultsAvailable=!1}));l();s();u();c();l();s();u();c();var Bc={id:L},Ki=w("querySuggest/register",e=>I(e,{...Bc,count:new J({min:0})})),Eb=w("querySuggest/unregister",e=>I(e,Bc)),Or=w("querySuggest/selectSuggestion",e=>I(e,{...Bc,expression:Re})),Yn=w("querySuggest/clear",e=>I(e,Bc)),Kn=oe("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:a,navigatorContext:o}})=>{a(e,Bc);let d=e.id,p=await qV(d,t(),o),m=await n.querySuggest(p);return Ge(m)?r(m.error):{id:d,q:p.q,...m.success}}),qV=async(e,t,r)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl??Me(t.configuration.organizationId,t.configuration.environment),count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?yt.getInstance().getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},tab:t.configuration.analytics.originLevel2,...t.configuration.analytics.enabled&&{...t.configuration.analytics.enabled&&t.configuration.analytics.analyticsMode==="legacy"?await Xo(t.configuration.analytics):Br(t.configuration.analytics,r)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var ze=re(Qe(),e=>e.addCase(nt,(t,r)=>({...t,...r.payload})).addCase(jt,(t,r)=>{t.q=r.payload}).addCase(Or,(t,r)=>{t.q=r.payload.expression}).addCase(Ae.fulfilled,(t,r)=>r.payload?.query??t).addCase(xe,(t,r)=>{t.q=r.payload.q??t.q,t.enableQuerySyntax=r.payload.enableQuerySyntax??t.enableQuerySyntax}));l();s();u();c();l();s();u();c();var Jn=w("fields/registerFieldsToInclude",e=>I(e,yu)),Ji=w("fields/fetchall/enable"),Ha=w("fields/fetchall/disable"),Xi=oe("fields/fetchDescription",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),{accessToken:o,environment:d,organizationId:p}=a.configuration,{apiBaseUrl:m}=a.configuration.search,f=await t.apiClient.fieldDescriptions({accessToken:o,organizationId:p,url:m??Me(p,d)});return Ge(f)?n(f.error):f.success.fields});l();s();u();c();l();s();u();c();var Mp=["author","language","urihash","objecttype","collection","source","permanentid"],Ry=[...Mp,"date","filetype","parents"],Ib=[...Ry,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],kb=()=>({fieldsToInclude:Mp,fetchAllFields:!1,fieldsDescription:[]});var Xn=re(kb(),e=>e.addCase(Jn,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(Ji,t=>{t.fetchAllFields=!0}).addCase(Ha,t=>{t.fetchAllFields=!1}).addCase(Xi.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(Wn,(t,{payload:r})=>{let n=Dp().fields;t.fieldsToInclude.push(r.collectionField??n.collection,r.parentField??n.parent,r.childField??n.child)}));l();s();u();c();function Zi(e){if(!jV(e))throw W;let t=ee(e),r=()=>e.state;return{...t,get state(){let n=r();return{hasError:n.search.error!==null,isLoading:n.search.isLoading,hasResults:!!n.search.results.length,firstSearchExecuted:xc(n)}}}}function jV(e){return e.addReducers({search:ce}),!0}var DV=new ue({fieldsToInclude:new te({required:!1,each:new j({required:!0,emptyAllowed:!1})})});function Lp(e,t){if(!VV(e))throw W;let r=ee(e),n=Zi(e),{dispatch:a}=e,o=()=>e.state,d=ve(e,DV,t?.options,"buildCoreResultList");d.fieldsToInclude&&a(Jn(d.fieldsToInclude));let p=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,m=0,f=0,S=5,C=200,x=!1;return{...r,get state(){let F=o();return{...n.state,results:F.search.results,moreResultsAvailable:p(),searchResponseId:F.search.searchResponseId}},fetchMoreResults:async()=>{if(e.state.search.isLoading)return;if(!p()){e.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-m<C){if(f++,f>=S){m=Date.now(),!x&&e.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${S} times, with little delay. Please verify the conditions under which the function is called.`),x=!0;return}}else f=0;x=!1,t?.fetchMoreResultsActionCreator&&(await a(t?.fetchMoreResultsActionCreator()),m=Date.now())}}}function VV(e){return e.addReducers({search:ce,configuration:ie,fields:Xn}),!0}var NV=new ue(xy);function Tb(e,t,r){if(!MV(e))throw W;let n=Lp(e,t),{dispatch:a}=e,o=()=>e.state,d=t.options?.folding?ve(e,NV,t.options.folding,"buildFoldedResultList"):{};return a(Wn({...d})),{...n,loadCollection:p=>{a(t.loadCollectionActionCreator(p.result.raw[e.state.folding.fields.collection])),a(r.logShowMoreFoldedResults(p.result))},logShowMoreFoldedResults:p=>{a(r.logShowMoreFoldedResults(p))},logShowLessFoldedResults:()=>{a(r.logShowLessFoldedResults())},findResultById(p){return by(this.state.results,m=>m.result.uniqueId===p.result.uniqueId)},findResultByCollection(p){return by(this.state.results,m=>m.result.raw.foldingcollection===p.result.raw.foldingcollection)},get state(){let p=o();return{...n.state,results:n.state.results.map(m=>{let f=m.raw[p.folding.fields.collection];return!f||!p.folding.collections[f]?{result:m,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:p.folding.collections[f]})}}}}function MV(e){return e.addReducers({search:ce,configuration:yd,folding:Np,query:ze}),!0}function by(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(t(n))return n;if(n.children.length){let a=by(n.children,t);if(a)return a}}return null}function Ob(e,t={}){let r=Tb(e,{...t,loadCollectionActionCreator:zn,fetchMoreResultsActionCreator:Nt},bb);return{...r,get state(){return r.state}}}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();function vy(){return{id:"",isVisible:!0,isEnabled:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{contentFormat:["text/plain"]},feedbackModalOpen:!1,feedbackSubmitted:!1,fieldsToIncludeInCitations:[],isAnswerGenerated:!1,expanded:!1,cannotAnswer:!1,answerApiQueryParams:void 0,answerId:void 0,answerGenerationMode:"automatic"}}l();s();u();c();function es(e){let t=new Set;return e.filter(r=>{let n=!t.has(r.uri);return n&&t.add(r.uri),n})}var ts=re(vy(),e=>e.addCase(hi,(t,{payload:r})=>{t.isVisible=r}).addCase(Pc,(t,{payload:r})=>{t.isEnabled=r}).addCase(id,(t,{payload:r})=>{t.id=r.id}).addCase(va,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.answer||(t.answer=""),t.answer+=r.textDelta,delete t.error}).addCase(wa,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.citations=es([...t.citations,...r.citations]),delete t.error}).addCase(vc,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!1,t.error={...r,isRetryable:r.code===Um},t.citations=[],delete t.answer}).addCase(rd,t=>{t.liked=!0,t.disliked=!1}).addCase(nd,t=>{t.liked=!1,t.disliked=!0}).addCase(ad,t=>{t.feedbackModalOpen=!0}).addCase(sd,t=>{t.feedbackModalOpen=!1}).addCase(Si,t=>{t.feedbackSubmitted=!0}).addCase(Ct,t=>({...vy(),...t.answerConfigurationId?{answerConfigurationId:t.answerConfigurationId}:{},responseFormat:t.responseFormat,fieldsToIncludeInCitations:t.fieldsToIncludeInCitations,isVisible:t.isVisible,id:t.id})).addCase(Tn,(t,{payload:r})=>{t.isLoading=r}).addCase(ba,(t,{payload:r})=>{t.isStreaming=r}).addCase(Pa,(t,{payload:r})=>{t.answerContentFormat=r}).addCase(cd,(t,{payload:r})=>{t.responseFormat=r}).addCase(ld,(t,r)=>{t.fieldsToIncludeInCitations=[...new Set(t.fieldsToIncludeInCitations.concat(r.payload))]}).addCase(wc,(t,{payload:r})=>{t.isAnswerGenerated=r}).addCase(Ec,t=>{t.expanded=!0}).addCase(od,t=>{t.expanded=!1}).addCase(ud,(t,{payload:r})=>{t.answerConfigurationId=r}).addCase(Ea,(t,{payload:r})=>{t.cannotAnswer=r}).addCase(dd,(t,{payload:r})=>{t.answerApiQueryParams=r}).addCase(fi,(t,{payload:r})=>{t.answerId=r}).addCase(td,(t,{payload:r})=>{t.answerGenerationMode=r}));l();s();u();c();function rs(e,t,r={}){if(!LV(e))throw W;let{dispatch:n}=e,a=ee(e),o=()=>e.state,d=r.initialState?.isVisible;d!==void 0&&n(hi(d));let p=r.initialState?.responseFormat;p&&n(cd(p));let m=r.fieldsToIncludeInCitations;return m&&n(ld(m)),r.initialState?.expanded&&n(Ec()),{...a,get state(){return o().generatedAnswer},like(){this.state.liked||(n(rd()),n(t.logLikeGeneratedAnswer()))},dislike(){this.state.disliked||(n(nd()),n(t.logDislikeGeneratedAnswer()))},openFeedbackModal(){n(ad())},closeFeedbackModal(){n(sd())},sendFeedback(S){n(t.logGeneratedAnswerFeedback(S)),n(Si())},logCitationClick(S){n(t.logOpenGeneratedAnswerSource(S))},logCitationHover(S,C){n(t.logHoverCitation(S,C))},show(){this.state.isVisible||(n(hi(!0)),n(t.logGeneratedAnswerShowAnswers()))},hide(){this.state.isVisible&&(n(hi(!1)),n(t.logGeneratedAnswerHideAnswers()))},expand(){this.state.expanded||(n(Ec()),n(t.logGeneratedAnswerExpand()))},collapse(){this.state.expanded&&(n(od()),n(t.logGeneratedAnswerCollapse()))},enable(){this.state.isEnabled||n(Pc(!0))},disable(){this.state.isEnabled&&n(Pc(!1))},logCopyToClipboard(){n(t.logCopyGeneratedAnswer())},retry(){}}}function LV(e){return e.addReducers({generatedAnswer:ts}),!0}var ct={engines:{},setAbortControllerRef:(e,t)=>{ct.engines[t].abortController=e},getIsStreamInProgress:e=>!ct.engines[e].abortController||ct.engines[e].abortController?.signal.aborted?(ct.engines[e].abortController=void 0,!1):!0,subscribeToSearchRequests:e=>{let t=()=>{let r=e.state,n=r.search.requestId,a=r.search.extendedResults.generativeQuestionAnsweringId,o=r.generatedAnswer.id;if(ct.engines[o].lastRequestId!==n){if(ct.engines[o].lastRequestId=n,ct.engines[o].abortController?.abort(),r.generatedAnswer.isEnabled===!1)return;e.dispatch(Ct())}if(!ct.getIsStreamInProgress(o)&&a&&a!==ct.engines[o].lastStreamId){if(ct.engines[o].lastStreamId=a,r.generatedAnswer.isEnabled===!1)return;e.dispatch(Hx({setAbortControllerRef:p=>ct.setAbortControllerRef(p,o)}))}};return e.subscribe(t)}};function qb(e,t,r={}){if(!QV(e))throw W;let n=rs(e,t,r),a=()=>e.state;if(e.state.generatedAnswer.id&&!ct.engines[e.state.generatedAnswer.id]&&(ct.engines[e.state.generatedAnswer.id]={abortController:void 0,lastRequestId:e.state.search.requestId,lastStreamId:e.state.search.extendedResults.generativeQuestionAnsweringId??""}),!e.state.generatedAnswer.id){let d=sn("genQA-",12);e.dispatch(id({id:d}))}ct.engines[e.state.generatedAnswer.id]||(ct.engines[e.state.generatedAnswer.id]={abortController:void 0,lastRequestId:"",lastStreamId:""}),ct.subscribeToSearchRequests(e);let o=d=>"executeFirstSearchAfterStandaloneSearchBoxRedirect"in d;return{...n,get state(){return a().generatedAnswer},retry(){o(e)&&e.dispatch(G({legacy:t.logRetryGeneratedAnswer()}))}}}function QV(e){return e.addReducers({generatedAnswer:ts}),!0}l();s();u();c();l();s();u();c();var jb=Vl.injectEndpoints({endpoints:e=>({post:e.query({query:t=>({url:"/evaluations",method:"POST",body:t})})})});var Qp=e=>e==="yes"?!0:e==="no"?!1:null,UV=({answerApiState:e,feedback:t,query:r})=>({additionalNotes:t.details??null,answer:{text:e.answer,responseId:e.answerId,format:e.contentFormat??"text/plain"},correctAnswerUrl:t.documentUrl??null,details:{correctTopic:Qp(t.correctTopic),documented:Qp(t.documented),hallucinationFree:Qp(t.hallucinationFree),readable:Qp(t.readable)},helpful:t.helpful,question:r}),_V=e=>{let t="",r=()=>{let n=e.state,a=gx(n),o=a.requestId;o!==t&&(t=o,e.dispatch(Ct()),a.q?.length>0&&e.dispatch(pd()))};e.subscribe(r)};function Db(e,t,r={}){if(!BV(e))throw W;On(e.state.configuration.analytics.analyticsMode);let{...n}=rs(e,t,r),a=()=>e.state;return e.dispatch(ud(r.answerConfigurationId)),_V(e),{...n,get state(){let o=_g(e.state).data,d=a().generatedAnswer;return{...d,answer:o?.answer,citations:es(o?.citations??[]),error:{message:o?.error?.message,statusCode:o?.error?.code},isLoading:o?.isLoading??!1,isStreaming:o?.isStreaming??!1,answerContentFormat:o?.contentFormat??"text/plain",isAnswerGenerated:o?.generated??!1,cannotAnswer:d.cannotAnswer||o?.generated===!1&&!o?.isLoading&&!o?.isStreaming}},retry(){let o=di(a());e.dispatch(fd(o??xa))},reset(){e.dispatch(Ct())},async sendFeedback(o){e.dispatch(t.logGeneratedAnswerFeedback(o));let d=UV({query:a().query.q,feedback:o,answerApiState:_g(e.state).data});e.dispatch(jb.endpoints.post.initiate(d)),e.dispatch(Si())}}}function BV(e){return e.addReducers({[Ia.reducerPath]:Ia.reducer,query:ze}),!0}l();s();u();c();l();s();u();c();l();s();u();c();function Vb(){return{conversationId:"",isEnabled:!1,followUpAnswers:[]}}var Nb=e=>({question:e,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,feedbackSubmitted:!1,cannotAnswer:!1,isActive:!0});function Mb(e){return e.followUpAnswers.find(t=>t.isActive)}function rn(e,t){return e.followUpAnswers.find(r=>r.answerId===t)}var Lb=re(Vb(),e=>e.addCase(Ul,(t,{payload:r})=>{t.isEnabled=r}).addCase(_l,(t,{payload:r})=>{t.conversationId=r}).addCase(Mg,(t,{payload:r})=>{let n=Mb(t);n&&(n.isActive=!1),t.followUpAnswers.push(Nb(r.question))}).addCase(Bl,(t,{payload:r})=>{let n=Mb(t);!n||n.answerId||(n.answerId=r)}).addCase(Gl,(t,{payload:r})=>{let n=rn(t,r.answerId);n&&(n.answerContentFormat=r.contentFormat)}).addCase($l,(t,{payload:r})=>{let n=rn(t,r.answerId);n&&(n.isLoading=r.isLoading)}).addCase(Hl,(t,{payload:r})=>{let n=rn(t,r.answerId);n&&(n.isLoading=!1,n.isStreaming=!0,n.answer||(n.answer=""),n.answer+=r.textDelta,delete n.error)}).addCase(Wl,(t,{payload:r})=>{let n=rn(t,r.answerId);n&&(n.isLoading=!1,n.isStreaming=!0,n.citations=es([...n.citations,...r.citations]),delete n.error)}).addCase(zl,(t,{payload:r})=>{let n=rn(t,r.answerId);n&&(n.isLoading=!1,n.isStreaming=!1,n.isActive=!1,n.cannotAnswer=!!r.cannotAnswer)}).addCase(Yl,(t,{payload:r})=>{let n=rn(t,r.answerId);n&&(n.isLoading=!1,n.isStreaming=!1,n.error={message:r.message,code:r.code},n.citations=[],delete n.answer)}).addCase(Kl,(t,{payload:r})=>{let n=rn(t,r.answerId);n&&(n.liked=!0,n.disliked=!1)}).addCase(Jl,(t,{payload:r})=>{let n=rn(t,r.answerId);n&&(n.liked=!1,n.disliked=!0)}).addCase(vx,(t,{payload:r})=>{let n=rn(t,r.answerId);n&&(n.feedbackSubmitted=!0)}).addCase(Xl,t=>{t.followUpAnswers=[],t.conversationId=""}));function Qb(e,t,r){if(!r.agentId||r.agentId.trim()==="")throw new Error("agentId is required for GeneratedAnswerWithFollowUps");if(!GV(e))throw W;let{...n}=rs(e,t,r),a=()=>e.state;return e.dispatch(sl(r.agentId)),{...n,get state(){let o=a().generatedAnswer,p={...di(e.state)??{},strategyKey:"head-answer"},m=Ox(p,e.state)?.data,f=a().followUpAnswers;return{answer:m?.answer,answerContentFormat:m?.contentFormat??"text/plain",citations:m?.citations??[],isLoading:m?.isLoading??!1,isStreaming:m?.isStreaming??!1,...m?.error&&{error:m.error},answerId:m?.answerId,isAnswerGenerated:!!m?.generated,cannotAnswer:m?.generated===!1,isVisible:o.isVisible,expanded:o.expanded,liked:o.liked,disliked:o.disliked,feedbackSubmitted:o.feedbackSubmitted,feedbackModalOpen:o.feedbackModalOpen,isEnabled:o.isEnabled,responseFormat:o.responseFormat,fieldsToIncludeInCitations:o.fieldsToIncludeInCitations,answerGenerationMode:o.answerGenerationMode,id:o.id,followUpAnswers:f}},retry(){e.dispatch(md())},like(o){if(!o||this.state.answerId===o){n.like();return}e.dispatch(Kl({answerId:o}))},dislike(o){if(!o||this.state.answerId===o){n.dislike();return}e.dispatch(Jl({answerId:o}))},logCopyToClipboard(o){if(!o||this.state.answerId===o){n.logCopyToClipboard();return}console.warn("Method not yet implemented to send analytics for copy to clipboard on a followup answer")},askFollowUp(o){!o||o.trim()===""||e.dispatch(wx(o))}}}function GV(e){return e.addReducers({[$r.reducerPath]:$r.reducer,followUpAnswers:Lb}),!0}function Ub(e,t={}){On(e.state.configuration.analytics.analyticsMode);let r;return t.agentId&&t.agentId.trim()!==""?r=Qb(e,mi,{...t,agentId:t.agentId}):t.answerConfigurationId&&t.answerConfigurationId.trim()!==""?r=Db(e,mi,t):r=qb(e,mi,t),{...r,get state(){return r.state}}}l();s();u();c();l();s();u();c();l();s();u();c();function xt(e,t,r){if(!$V(e))throw W;let n=1e3,a={selectionDelay:n,debounceWait:n,...t.options},o;return{select:uu(r,a.debounceWait,{isImmediate:!0}),beginDelayedSelect(){o=setTimeout(r,a.selectionDelay)},cancelPendingSelect(){o&&clearTimeout(o)}}}function $V(e){return e.addReducers({configuration:ie}),!0}function _b(e,t,r){let n=!1,a=()=>{n||(n=!0,e.dispatch(t.logOpenGeneratedAnswerSource(r.options.citation.id)))};return xt(e,r,()=>{a()})}function Bb(e,t){return _b(e,mi,t)}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Up={f:new Q,fExcluded:new Q,lf:new Q,cf:new Q,nf:new Q,nfExcluded:new Q,mnf:new Q,mnfExcluded:new Q,df:new Q,dfExcluded:new Q,sortCriteria:new Q,page:new J({min:0}),perPage:new J({min:1})};var Gb=w("commerce/productListingParameters/restore",e=>I(e,Up));l();s();u();c();l();s();u();c();var $b={q:new j,...Up};var _p=w("commerce/searchParameters/restore",e=>I(e,$b));var ns=re(ri(),e=>{e.addCase(G.fulfilled,wy).addCase(Bi.fulfilled,wy).addCase(Bn.fulfilled,wy).addCase(_p,Hb).addCase(Gb,Hb).addCase(Ae.fulfilled,(t,r)=>r.payload?.facetOrder??t).addCase(Ap,()=>ri()).addCase(ZR,()=>ri())});function wy(e,t){return t.payload.response.facets.map(r=>r.facetId)}function Hb(e,t){return[...Object.keys(t.payload.f??{}),...Object.keys(t.payload.lf??{}),...Object.keys(t.payload.nf??{}),...Object.keys(t.payload.df??{}),...Object.keys(t.payload.cf??{}),...Object.keys(t.payload.mnf??{})]}l();s();u();c();var Bp=()=>Y("history/analytics/forward",e=>e.makeSearchEvent("historyForward")),Gp=()=>Y("history/analytics/backward",e=>e.makeSearchEvent("historyBackward")),$p=()=>Y("history/analytics/noresultsback",e=>e.makeNoResultsBack());l();s();u();c();l();s();u();c();var Wb=e=>({past:[],present:e,future:[]}),HV=e=>{let{past:t,present:r,future:n}=e;if(!r||t.length===0)return e;let a=t[t.length-1];return{past:t.slice(0,t.length-1),present:a,future:[r,...n]}},WV=e=>{let{past:t,present:r,future:n}=e;if(!r||n.length===0)return e;let a=n[0],o=n.slice(1);return{past:[...t,r],present:a,future:o}},zV=e=>{let{action:t,state:r,reducer:n}=e,{past:a,present:o}=r,d=n(o,t);return o?o===d?r:{past:[...a,o].slice(-10),present:d,future:[]}:Wb(d)},zb=e=>{let{actionTypes:t,reducer:r}=e,n=Wb();return(a=n,o)=>{switch(o.type){case t.undo:return HV(a);case t.redo:return WV(a);case t.snapshot:return zV({state:a,reducer:r,action:o});default:return a}}};l();s();u();c();l();s();u();c();var YV=Object.getOwnPropertyNames,KV=Object.getOwnPropertySymbols,JV=Object.prototype.hasOwnProperty;function Yb(e,t){return function(n,a,o){return e(n,a,o)&&t(n,a,o)}}function Hp(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var o=a.cache,d=o.get(r),p=o.get(n);if(d&&p)return d===n&&p===r;o.set(r,n),o.set(n,r);var m=e(r,n,a);return o.delete(r),o.delete(n),m}}function Kb(e){return YV(e).concat(KV(e))}var XV=Object.hasOwn||function(e,t){return JV.call(e,t)};function Wa(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var ZV="__v",eN="__o",tN="_owner",Jb=Object.getOwnPropertyDescriptor,Xb=Object.keys;function rN(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function nN(e,t){return Wa(e.getTime(),t.getTime())}function aN(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function oN(e,t){return e===t}function Zb(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),o=e.entries(),d,p,m=0;(d=o.next())&&!d.done;){for(var f=t.entries(),S=!1,C=0;(p=f.next())&&!p.done;){if(a[C]){C++;continue}var x=d.value,A=p.value;if(r.equals(x[0],A[0],m,C,e,t,r)&&r.equals(x[1],A[1],x[0],A[0],e,t,r)){S=a[C]=!0;break}C++}if(!S)return!1;m++}return!0}var iN=Wa;function sN(e,t,r){var n=Xb(e),a=n.length;if(Xb(t).length!==a)return!1;for(;a-- >0;)if(!nv(e,t,r,n[a]))return!1;return!0}function Gc(e,t,r){var n=Kb(e),a=n.length;if(Kb(t).length!==a)return!1;for(var o,d,p;a-- >0;)if(o=n[a],!nv(e,t,r,o)||(d=Jb(e,o),p=Jb(t,o),(d||p)&&(!d||!p||d.configurable!==p.configurable||d.enumerable!==p.enumerable||d.writable!==p.writable)))return!1;return!0}function cN(e,t){return Wa(e.valueOf(),t.valueOf())}function uN(e,t){return e.source===t.source&&e.flags===t.flags}function ev(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),o=e.values(),d,p;(d=o.next())&&!d.done;){for(var m=t.values(),f=!1,S=0;(p=m.next())&&!p.done;){if(!a[S]&&r.equals(d.value,p.value,d.value,p.value,e,t,r)){f=a[S]=!0;break}S++}if(!f)return!1}return!0}function lN(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function dN(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function nv(e,t,r,n){return(n===tN||n===eN||n===ZV)&&(e.$$typeof||t.$$typeof)?!0:XV(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var pN="[object Arguments]",mN="[object Boolean]",fN="[object Date]",gN="[object Error]",yN="[object Map]",hN="[object Number]",SN="[object Object]",CN="[object RegExp]",AN="[object Set]",xN="[object String]",FN="[object URL]",RN=Array.isArray,tv=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,rv=Object.assign,bN=Object.prototype.toString.call.bind(Object.prototype.toString);function vN(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,o=e.areMapsEqual,d=e.areNumbersEqual,p=e.areObjectsEqual,m=e.arePrimitiveWrappersEqual,f=e.areRegExpsEqual,S=e.areSetsEqual,C=e.areTypedArraysEqual,x=e.areUrlsEqual;return function(F,v,b){if(F===v)return!0;if(F==null||v==null)return!1;var R=typeof F;if(R!==typeof v)return!1;if(R!=="object")return R==="number"?d(F,v,b):R==="function"?a(F,v,b):!1;var E=F.constructor;if(E!==v.constructor)return!1;if(E===Object)return p(F,v,b);if(RN(F))return t(F,v,b);if(tv!=null&&tv(F))return C(F,v,b);if(E===Date)return r(F,v,b);if(E===RegExp)return f(F,v,b);if(E===Map)return o(F,v,b);if(E===Set)return S(F,v,b);var P=bN(F);return P===fN?r(F,v,b):P===CN?f(F,v,b):P===yN?o(F,v,b):P===AN?S(F,v,b):P===SN?typeof F.then!="function"&&typeof v.then!="function"&&p(F,v,b):P===FN?x(F,v,b):P===gN?n(F,v,b):P===pN?p(F,v,b):P===mN||P===hN||P===xN?m(F,v,b):!1}}function wN(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?Gc:rN,areDatesEqual:nN,areErrorsEqual:aN,areFunctionsEqual:oN,areMapsEqual:n?Yb(Zb,Gc):Zb,areNumbersEqual:iN,areObjectsEqual:n?Gc:sN,arePrimitiveWrappersEqual:cN,areRegExpsEqual:uN,areSetsEqual:n?Yb(ev,Gc):ev,areTypedArraysEqual:n?Gc:lN,areUrlsEqual:dN};if(r&&(a=rv({},a,r(a))),t){var o=Hp(a.areArraysEqual),d=Hp(a.areMapsEqual),p=Hp(a.areObjectsEqual),m=Hp(a.areSetsEqual);a=rv({},a,{areArraysEqual:o,areMapsEqual:d,areObjectsEqual:p,areSetsEqual:m})}return a}function PN(e){return function(t,r,n,a,o,d,p){return e(t,r,p)}}function EN(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,o=e.strict;if(n)return function(m,f){var S=n(),C=S.cache,x=C===void 0?t?new WeakMap:void 0:C,A=S.meta;return r(m,f,{cache:x,equals:a,meta:A,strict:o})};if(t)return function(m,f){return r(m,f,{cache:new WeakMap,equals:a,meta:void 0,strict:o})};var d={cache:void 0,equals:a,meta:void 0,strict:o};return function(m,f){return r(m,f,d)}}var Xje=qr(),Zje=qr({strict:!0}),eDe=qr({circular:!0}),tDe=qr({circular:!0,strict:!0}),rDe=qr({createInternalComparator:function(){return Wa}}),nDe=qr({strict:!0,createInternalComparator:function(){return Wa}}),aDe=qr({circular:!0,createInternalComparator:function(){return Wa}}),oDe=qr({circular:!0,createInternalComparator:function(){return Wa},strict:!0});function qr(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,o=e.strict,d=o===void 0?!1:o,p=wN(e),m=vN(p),f=n?n(m):PN(m);return EN({circular:r,comparator:m,createState:a,equals:f,strict:d})}function za(e,t,r=(n,a)=>n===a){return e.length===t.length&&e.findIndex((n,a)=>!r(t[a],n))===-1}function IN(e,t){return e.length!==t.length?!1:e.every(r=>t.findIndex(n=>$c(r,n))!==-1)}var $c=qr({createCustomConfig:e=>({...e,areArraysEqual:IN})});var kN=re(TA(),e=>{e.addCase(vt,(t,r)=>TN(t,r.payload)?void 0:r.payload)}),TN=(e,t)=>ON(e.context,t.context)&&qN(e.dictionaryFieldContext,t.dictionaryFieldContext)&&QN(e.advancedSearchQueries,t.advancedSearchQueries)&&jN(e.tabSet,t.tabSet)&&DN(e.staticFilterSet,t.staticFilterSet)&&Py(e.facetSet,t.facetSet)&&Py(e.dateFacetSet,t.dateFacetSet)&&Py(e.numericFacetSet,t.numericFacetSet)&&NN(e.automaticFacetSet,t.automaticFacetSet)&&VN(e.categoryFacetSet,t.categoryFacetSet)&&MN(e.pagination,t.pagination)&&LN(e.query,t.query)&&UN(e,t)&&_N(e.pipeline,t.pipeline)&&BN(e.searchHub,t.searchHub)&&GN(e.facetOrder,t.facetOrder)&&$N(e.debug,t.debug),ON=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),qN=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),jN=(e,t)=>{let r=av(e),n=av(t);return r?.id===n?.id},av=e=>Object.values(e).find(t=>t.isActive),DN=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let a=ov(e[r]),o=ov(n);if(JSON.stringify(a)!==JSON.stringify(o))return!1}return!0},ov=e=>e.values.filter(t=>t.state!=="idle"),Py=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let a=e[r].request.currentValues.filter(d=>d.state!=="idle"),o=n.request.currentValues.filter(d=>d.state!=="idle");if(JSON.stringify(a)!==JSON.stringify(o))return!1}return!0},VN=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let a=gt(e[r]?.request.currentValues).map(({value:d})=>d),o=gt(n?.request.currentValues).map(({value:d})=>d);if(JSON.stringify(a)!==JSON.stringify(o))return!1}return!0},NN=(e,t)=>{for(let[r,n]of Object.entries(t.set)){if(!e.set[r])return!1;let a=e.set[r].response.values.filter(d=>d.state!=="idle"),o=n.response.values.filter(d=>d.state!=="idle");if(JSON.stringify(a)!==JSON.stringify(o))return!1}return!0},MN=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,LN=(e,t)=>JSON.stringify(e)===JSON.stringify(t),QN=(e,t)=>JSON.stringify(e)===JSON.stringify(t),UN=(e,t)=>e.sortCriteria===t.sortCriteria,_N=(e,t)=>e===t,BN=(e,t)=>e===t,GN=(e,t)=>za(e,t),$N=(e,t)=>e===t,Wp=zb({actionTypes:{redo:og.type,undo:ag.type,snapshot:vt.type},reducer:kN});function iv(e){if(!HN(e))throw W;let t=ee(e),{dispatch:r}=e,n=()=>e.state,a=o=>o.past.length>0&&!ae(o.present);return{...t,subscribe(o){o();let d=JSON.stringify(n().history.present),p=()=>{let m=JSON.stringify(n().history.present);d!==m&&(d=m,o())};return e.subscribe(()=>p())},get state(){return n().history},async back(){a(this.state)&&(await r(gc()),r(G({legacy:Gp()})))},async forward(){!this.state.future.length||!this.state.present||(await r(ul()),r(G({legacy:Bp()})))},async backOnNoResults(){a(this.state)&&(await r(gc()),r(G({legacy:$p()})))}}}function HN(e){return e.addReducers({history:Wp,configuration:ie,facetOrder:ns}),!0}l();s();u();c();l();s();u();c();var WN={results:new te({required:!0,each:new Q({values:tl})}),maxLength:new J({required:!0,min:1,default:10})},as=w("recentResults/registerRecentResults",e=>I(e,WN)),_t=w("recentResults/pushRecentResult",e=>(ht(e),{payload:e})),os=w("recentResults/clearRecentResults");function sv(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(dA(t.options.result)))};return xt(e,t,()=>{n(),e.dispatch(_t(t.options.result))})}l();s();u();c();l();s();u();c();function zp(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}l();s();u();c();l();s();u();c();var cv=(e,t)=>{let{id:r}=e;if(!t[r])return t[r]={q:"",cache:{}},t},uv=(e,t)=>{let{q:r,id:n}=e;r&&(t[n].q=r)},lv=(e,t)=>{let{id:r}=e;Object.entries(t[r].cache).forEach(([n,a])=>{zp(a)&&delete t[r].cache[n]})},dv=(e,t,r)=>{for(let a in t)for(let o in t[a].cache)t[a].cache[o].isActive=!1;if(!Ey(e,t)){zN(e,t,r);return}let n=Ey(e,t);n.isLoading=!0,n.isActive=!0,n.error=null},pv=(e,t,r)=>{let{id:n,q:a,searchUid:o,cacheTimeout:d,totalCountFiltered:p,duration:m}=e;t[n].cache[a]={...Ey(e,t),...r,isActive:!0,searchUid:o,isLoading:!1,error:null,expiresAt:d?d+Date.now():0,totalCountFiltered:p,duration:m}},mv=(e,t)=>{let{id:r,q:n,error:a}=e;t[r].cache[n].error=a||null,t[r].cache[n].isLoading=!1,t[r].cache[n].isActive=!1},Ey=(e,t)=>{let{q:r,id:n}=e;return t[n].cache[r]||null},zN=(e,t,r)=>{let{q:n,id:a}=e;t[a].cache[n]={isLoading:!0,error:null,expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0,...r}};l();s();u();c();function fv(){return{}}var Yp=re(fv(),e=>{e.addCase(Go,(t,r)=>{cv(r.payload,t)}),e.addCase(cr,(t,r)=>{uv(r.payload,t)}),e.addCase($o,(t,r)=>{lv(r.payload,t)}),e.addCase(oi.pending,(t,r)=>{dv(r.meta.arg,t,{results:[]})}),e.addCase(oi.fulfilled,(t,r)=>{let n=r.payload.results.map(a=>({...a,searchUid:r.payload.searchUid}));pv({...r.payload,...r.meta.arg},t,{results:n})}),e.addCase(oi.rejected,(t,r)=>{mv(r.meta.arg,t)})});l();s();u();c();var YN={searchBoxId:Ie,maxResultsPerQuery:new J({required:!0,min:1}),cacheTimeout:new J},gv=new ue(YN);function yv(e,t){if(!KN(e))throw W;let r=ee(e),{dispatch:n}=e,a=()=>e.state,o={searchBoxId:t.options.searchBoxId||sn("instant-results-"),cacheTimeout:t.options.cacheTimeout||6e4,maxResultsPerQuery:t.options.maxResultsPerQuery};ve(e,gv,o,"buildInstantResults");let d=o.searchBoxId;n(Go({id:d}));let p=()=>a().instantResults[d],m=C=>p().cache[C],f=()=>p().q,S=()=>{let C=m(f());return C?C.isLoading?[]:C.results:[]};return{...r,updateQuery(C){if(!C)return;let x=m(C);(!x||!x.isLoading&&(x.error||zp(x)))&&n(oi({id:d,q:C,maxResultsPerQuery:o.maxResultsPerQuery,cacheTimeout:o.cacheTimeout})),n(cr({id:d,q:C}))},clearExpired(){n($o({id:d}))},get state(){let C=f(),x=m(C);return{q:C,isLoading:x?.isLoading||!1,error:x?.error||null,results:S()}}}}function KN(e){return e.addReducers({instantResults:Yp}),!0}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Bt=re(Dt(),e=>{e.addCase(Ho,(t,r)=>{let n=Iy(t),a=r.payload;t.defaultNumberOfResults=t.numberOfResults=a,t.firstResult=Hc(n,a)}).addCase(Wo,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(Kt,t=>{t.firstResult=0}).addCase(zo,(t,r)=>{let n=r.payload;t.firstResult=Hc(n,t.numberOfResults)}).addCase(ur,(t,r)=>{let n=r.payload;t.firstResult=Hc(n,t.numberOfResults)}).addCase(Ko,t=>{let r=Iy(t),n=Math.max(r-1,1);t.firstResult=Hc(n,t.numberOfResults)}).addCase(Yo,t=>{let r=Iy(t),n=JN(t),a=Math.min(r+1,n);t.firstResult=Hc(a,t.numberOfResults)}).addCase(Ae.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(xe,(t,r)=>{t.firstResult=r.payload.firstResult??t.firstResult,t.numberOfResults=r.payload.numberOfResults??t.defaultNumberOfResults}).addCase(G.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase(at.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase(Te,t=>{ut(t)}).addCase(wr,t=>{ut(t)}).addCase(Fr,t=>{ut(t)}).addCase(kr,t=>{ut(t)}).addCase(Va,t=>{ut(t)}).addCase(xr,t=>{ut(t)}).addCase(fr,t=>{ut(t)}).addCase(jn,t=>{ut(t)}).addCase(wi,t=>{ut(t)}).addCase(vr,t=>{ut(t)}).addCase(Ir,t=>{ut(t)}).addCase(_e,t=>{ut(t)}).addCase(Jr,t=>{ut(t)}).addCase(Xr,t=>{ut(t)}).addCase(Da,t=>{ut(t)}).addCase(pr,t=>{ut(t)})});function ut(e){e.firstResult=Dt().firstResult}function Iy(e){let{firstResult:t,numberOfResults:r}=e;return ky(t,r)}function JN(e){let{totalCountFiltered:t,numberOfResults:r}=e;return Ty(t,r)}function Hc(e,t){return(e-1)*t}function ky(e,t){return Math.round(e/t)+1}function Ty(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}function XN(e){return e.pagination.firstResult}function hv(e){return e.pagination.numberOfResults}function ZN(e){return e.pagination.totalCountFiltered}var nn=e=>{let t=XN(e),r=hv(e);return ky(t,r)},Wc=e=>{let t=ZN(e),r=hv(e);return Ty(t,r)},Kp=(e,t)=>{let r=nn(e),n=Wc(e),a=eM(r,t);return a=tM(a),a=rM(a,n),nM(a)};function eM(e,t){let r=t%2===0,n=Math.floor(t/2),a=r?n-1:n,o=e-n,d=e+a;return{start:o,end:d}}function tM(e){let t=Math.max(1-e.start,0),r=e.start+t,n=e.end+t;return{start:r,end:n}}function rM(e,t){let r=Math.max(e.end-t,0),n=Math.max(e.start-r,1),a=e.end-r;return{start:n,end:a}}function nM(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var ss=()=>Y("analytics/pager/resize",(e,t)=>e.makePagerResize({currentResultsPerPage:t.pagination?.numberOfResults||Dt().numberOfResults})),cs=()=>Y("analytics/pager/number",(e,t)=>e.makePagerNumber({pagerNumber:nn(t)})),Jp=()=>Y("analytics/pager/next",(e,t)=>e.makePagerNext({pagerNumber:nn(t)})),Xp=()=>Y("analytics/pager/previous",(e,t)=>e.makePagerPrevious({pagerNumber:nn(t)})),us=()=>({actionCause:"browseResults"});l();s();u();c();var aM=new ue({numberOfPages:new J({default:5,min:0})}),oM=new ue({page:new J({min:1})});function Sv(e,t={}){if(!iM(e))throw W;let r=ee(e),{dispatch:n}=e,a=ve(e,aM,t.options,"buildPager"),d=Le(e,oM,t.initialState,"buildPager").page;d&&n(zo(d));let p=()=>nn(e.state),m=()=>{let{numberOfPages:S}=a;return Kp(e.state,S)},f=()=>Wc(e.state);return{...r,get state(){let S=p(),C=f(),x=S>1&&C>0,A=S<C;return{currentPage:S,currentPages:m(),maxPage:C,hasPreviousPage:x,hasNextPage:A}},selectPage(S){n(ur(S))},nextPage(){n(Yo())},previousPage(){n(Ko())},isCurrentPage(S){return S===this.state.currentPage}}}function iM(e){return e.addReducers({configuration:ie,pagination:Bt}),!0}function Cv(e,t={}){let{dispatch:r}=e,n=Sv(e,t);return{...n,get state(){return n.state},selectPage(a){n.selectPage(a),r(at({legacy:cs(),next:us()}))},nextPage(){n.nextPage(),r(at({legacy:Jp(),next:us()}))},previousPage(){n.previousPage(),r(at({legacy:Xp(),next:us()}))}}}l();s();u();c();l();s();u();c();function Av(e){if(!sM(e))throw W;let t=ee(e),r=()=>e.state;return{...t,get state(){return{hasError:r().search.error!==null,error:r().search.error}}}}function sM(e){return e.addReducers({search:ce}),!0}function xv(e){return Av(e)}l();s();u();c();l();s();u();c();function Fv(e){if(!cM(e))throw W;let t=ee(e),r=Zi(e),n=()=>e.state,a=()=>{let o=n().search.duration/1e3;return Math.round((o+Number.EPSILON)*100)/100};return{...t,get state(){return{...r.state,durationInMilliseconds:n().search.duration,durationInSeconds:a(),firstResult:n().pagination.firstResult+1,hasDuration:n().search.duration!==0,hasQuery:n().search.queryExecuted!=="",lastResult:n().pagination.firstResult+n().search.results.length,query:n().search.queryExecuted,total:n().pagination.totalCountFiltered}}}}function cM(e){return e.addReducers({search:ce,pagination:Bt}),!0}function Rv(e){return Fv(e)}l();s();u();c();l();s();u();c();l();s();u();c();async function Zp(e,t){let{search:r,accessToken:n,organizationId:a}=e.configuration,o=e.query?.q||"";return{url:r.apiBaseUrl??Me(e.configuration.organizationId,e.configuration.environment),accessToken:n,organizationId:a,enableNavigation:!1,q:o,...t,requestedOutputSize:t.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var Ya=oe("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),o=await Zp(a,e),d=await t.apiClient.html(o);return Ge(d)?n(d.error):{content:d.success,uniqueId:e.uniqueId}}),ls=w("resultPreview/next"),ds=w("resultPreview/previous"),ps=w("resultPreview/prepare",e=>I(e,{results:new te({required:!0})})),bv=2048,ms=oe("resultPreview/updateContentURL",async(e,{getState:t,extra:r})=>{let n=t(),a=Wh(await e.buildResultPreviewRequest(n,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return a?.length>bv&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${bv} characters.`),{contentURL:a}});l();s();u();c();var vv=e=>Y({prefix:"analytics/resultPreview/open",__legacy__getBuilder:(t,r)=>{ht(e);let n=Ue(e,r),a=Ee(e);return t.makeDocumentQuickview(n,a)},analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=Ue(e,t),n=Ee(e);return{responseId:e.searchUid??"",position:r.documentPosition,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});l();s();u();c();l();s();u();c();l();s();u();c();function Oy(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var qy=e=>{let{content:t,isLoading:r,uniqueId:n,contentURL:a}=Oy();e.content=t,e.isLoading=r,e.uniqueId=n,e.contentURL=a},jy=e=>e.filter(t=>t.hasHtmlVersion).map(t=>t.uniqueId),em=re(Oy(),e=>{e.addCase(Ya.pending,t=>{t.isLoading=!0}).addCase(Ya.fulfilled,(t,r)=>{let{content:n,uniqueId:a}=r.payload;t.position=t.resultsWithPreview.indexOf(a),t.content=n,t.uniqueId=a,t.isLoading=!1}).addCase(G.fulfilled,(t,r)=>{qy(t),t.resultsWithPreview=jy(r.payload.response.results)}).addCase(Nt.fulfilled,(t,r)=>{qy(t),t.resultsWithPreview=t.resultsWithPreview.concat(jy(r.payload.response.results))}).addCase(at.fulfilled,qy).addCase(ps,(t,r)=>{t.resultsWithPreview=jy(r.payload.results)}).addCase(ls,t=>{if(t.isLoading)return;let r=t.position+1;r>t.resultsWithPreview.length-1&&(r=0),t.position=r}).addCase(ds,t=>{if(t.isLoading)return;let r=t.position-1;r<0&&(r=t.resultsWithPreview.length-1),t.position=r}).addCase(ms.fulfilled,(t,r)=>{t.contentURL=r.payload.contentURL})});function wv(e,t,r,n,a){if(!uM(e))throw W;let{dispatch:o}=e,d=()=>e.state,p=ee(e),{result:m,maximumPreviewSize:f}=t.options,S=()=>{let{resultsWithPreview:x,position:A}=d().resultPreview;return x[A]},C=x=>{o(ms({uniqueId:x,requestedOutputSize:f,buildResultPreviewRequest:r,path:n})),t.options.onlyContentURL||o(Ya({uniqueId:x,requestedOutputSize:f})),a&&a()};return{...p,fetchResultContent(){C(m.uniqueId)},next(){o(ls()),C(S())},previous(){o(ds()),C(S())},get state(){let x=d(),A=m.hasHtmlVersion,F=x.resultPreview,v=m.uniqueId===F.uniqueId?F.content:"",b=F.isLoading,R=F.contentURL,E=S();return{content:v,resultHasPreview:A,isLoading:b,contentURL:R,currentResultUniqueId:E}}}}function uM(e){return e.addReducers({configuration:ie,resultPreview:em}),!0}function Pv(e,t){if(!lM(e))throw W;let{dispatch:r}=e,n=()=>e.state,a=()=>n().search.results,p=wv(e,t,Zp,"/html",()=>{e.dispatch(vv(t.options.result))});return r(ps({results:a()})),{...p,get state(){return{...p.state,currentResult:a().findIndex(m=>m.uniqueId===p.state.currentResultUniqueId)+1,totalResults:a().length}}}}function lM(e){return e.addReducers({search:ce}),!0}l();s();u();c();l();s();u();c();var Ev=()=>Y("analytics/recentQueries/clear",e=>e.makeClearRecentQueries()),Iv=()=>Y("analytics/recentQueries/click",e=>e.makeRecentQueryClick());l();s();u();c();l();s();u();c();var dM={queries:new te({required:!0,each:new j({emptyAllowed:!1})}),maxLength:new J({required:!0,min:1,default:10})},Ka=w("recentQueries/registerRecentQueries",e=>I(e,dM)),fs=w("recentQueries/clearRecentQueries");l();s();u();c();l();s();u();c();function kv(){return{queries:[],maxLength:10}}var tm=re(kv(),e=>{e.addCase(Ka,pM).addCase(fs,mM).addCase(G.fulfilled,(t,r)=>{let n=r.payload.queryExecuted,a=r.payload.response.results;!n.length||!a.length||fM(n,t)})});function pM(e,t){e.queries=Array.from(new Set(t.payload.queries.map(r=>r.trim().toLowerCase()))).slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}function mM(e){e.queries=[]}function fM(e,t){let r=e.trim().toLowerCase();if(r==="")return;let n=Array.from(new Set(t.queries.filter(a=>a.trim().toLowerCase()!==r))).slice(0,t.maxLength-1);t.queries=[r,...n]}var gM={queries:[]},yM={maxLength:10,clearFilters:!0},hM=new ue({queries:new te({required:!0})}),SM=new ue({maxLength:new J({required:!0,min:1}),clearFilters:new ne});function CM(e,t){ve(e,SM,t?.options,"buildRecentQueriesList"),Le(e,hM,t?.initialState,"buildRecentQueriesList")}function Tv(e,t){if(!AM(e))throw W;let r=ee(e),{dispatch:n}=e,a=()=>e.state,o={...yM,...t?.options},d={...gM,...t?.initialState};CM(e,{options:o,initialState:d});let p={queries:d.queries,maxLength:o.maxLength};return n(Ka(p)),{...r,get state(){let m=a();return{...m.recentQueries,analyticsEnabled:m.configuration.analytics.enabled}},clear(){n(fs())},updateRecentQueries(m){let f=new te({required:!0,each:new j({required:!0}),min:1}).validate(m);if(f)throw new Error(f);n(Ka({queries:m,maxLength:o.maxLength}))},executeRecentQuery(m){let f=new J({required:!0,min:0,max:this.state.queries.length}).validate(m);if(f)throw new Error(f);let S={q:this.state.queries[m],clearFilters:o.clearFilters};ou(e.state.query?.enableQuerySyntax)&&(S.enableQuerySyntax=e.state.query.enableQuerySyntax),n(ai(S))}}}function AM(e){return e.addReducers({search:ce,recentQueries:tm,query:ze}),!0}function Ov(e,t){let r=Tv(e,t),{dispatch:n}=e;return{...r,get state(){return r.state},clear(){n(Ev()),r.clear()},executeRecentQuery(a){r.executeRecentQuery(a),n(G({legacy:Iv(),next:{actionCause:"recentQueriesClick"}}))}}}l();s();u();c();l();s();u();c();var qv=e=>Y("analytics/recentResults/click",(t,r)=>(ht(e),t.makeRecentResultClick(Ue(e,r),Ee(e)))),jv=()=>Y("analytics/recentResults/clear",e=>e.makeClearRecentResults());function Dv(e,t){return xt(e,t,()=>e.dispatch(qv(t.options.result)))}l();s();u();c();l();s();u();c();l();s();u();c();function Vv(){return{results:[],maxLength:10}}var rm=re(Vv(),e=>{e.addCase(as,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(os,t=>{t.results=[]}).addCase(_t,(t,r)=>{let n=r.payload;t.results=t.results.filter(o=>o.uniqueId!==n.uniqueId);let a=t.results.slice(0,t.maxLength-1);t.results=[n,...a]})});var xM={initialState:{results:[]},options:{maxLength:10}},FM=new ue({results:new te({required:!0})}),RM=new ue({maxLength:new J({required:!0,min:1})});function bM(e,t){ve(e,RM,t?.options,"buildRecentResultsList"),Le(e,FM,t?.initialState,"buildRecentResultsList")}function Nv(e,t){if(!vM(e))throw W;let r=ee(e),{dispatch:n}=e,a=()=>e.state,o={...xM,...t};bM(e,o);let d={results:o.initialState.results,maxLength:o.options.maxLength};return n(as(d)),{...r,get state(){return a().recentResults},clear(){n(jv()),n(os())}}}function vM(e){return e.addReducers({recentResults:rm}),!0}l();s();u();c();l();s();u();c();l();s();u();c();var Lv=e=>{let t=/Document weights:\n((?:.)*?)\n+/g,r=/Terms weights:\n((?:.|\n)*)\n+/g,n=/Total weight: ([0-9]+)/g;if(!e)return null;let a=t.exec(e),o=r.exec(e),d=n.exec(e),p=PM(e),m=Qv(a?a[1]:null),f=wM(o),S=d?Number(d[1]):null;return{documentWeights:m,termsWeight:f,totalWeight:S,qreWeights:p}},Qv=e=>{let t=/(\w+(?:\s\w+)*): ([-0-9]+)/g,r=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;let n=e.match(t);if(!n)return null;let a={};for(let o of n){let d=o.match(r);if(d){let p=d[1],m=d[2];a[p]=Number(m)}}return a},Mv=(e,t)=>{let r=[],n;for(;n=t.exec(e),n!==null;)r.push(n);return r},wM=e=>{let t=/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g,r=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;let n=Mv(e[1],t);if(!n)return null;let a={};for(let o of n){let d=Mv(o[1],r),p={};for(let f of d)p[f[1]]={Correlation:Number(f[2]),"TF-IDF":Number(f[3])};let m=Qv(o[2]);a[Object.keys(p).join(", ")]={terms:p,Weights:m}}return a},PM=e=>{let t=/(Expression:\s".*")\sScore:\s(?!0)([-0-9]+)\n+/g,r=t.exec(e),n=[];for(;r;)n.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return n};function Uv(e){return e.search.response.results.map(r=>{let n=Lv(r.rankingInfo);return{result:r,ranking:n}})}var EM=new ue({enabled:new ne({default:!1})});function _v(e,t={}){if(!IM(e))throw W;let r=ee(e),{dispatch:n}=e,a=()=>e.state;Le(e,EM,t.initialState,"buildRelevanceInspector").enabled&&n(Cn());let d=p=>{e.logger.warn(`Flag [ ${p} ] is now activated. This should *not* be used in any production environment as it negatively impact performance.`)};return{...r,get state(){let p=a(),m=p.debug;if(!p.debug)return{isEnabled:m};let{executionReport:f,basicExpression:S,advancedExpression:C,constantExpression:x,userIdentities:A,rankingExpressions:F}=p.search.response,{fieldsDescription:v,fetchAllFields:b}=p.fields;return{isEnabled:m,rankingInformation:Uv(p),executionReport:f,expressions:{basicExpression:S,advancedExpression:C,constantExpression:x},userIdentities:A,rankingExpressions:F,fieldsDescription:v,fetchAllFields:b}},enable(){n(Cn()),d("debug")},disable(){n(Lo()),n(Ha())},enableFetchAllFields(){n(Ji()),d("fetchAllFields")},disableFetchAllFields(){n(Ha())},fetchFieldsDescription(){!this.state.isEnabled&&n(Cn()),n(Xi()),d("fieldsDescription"),e.logger.warn(`For production environment, please specify the necessary fields either when instantiating a ResultList controller, or by dispatching a registerFieldsToInclude action.
        
        https://docs.coveo.com/en/headless/latest/reference/interfaces/Search.ResultListOptions.html
        https://docs.coveo.com/en/headless/latest/reference/interfaces/Search.FieldActionCreators.html#registerfieldstoinclude`)}}}function IM(e){return e.addReducers({debug:Qo,search:ce,configuration:ie,fields:Xn}),!0}l();s();u();c();l();s();u();c();var nm=e=>Y({prefix:"analytics/result/open",__legacy__getBuilder:(t,r)=>(ht(e),t.makeDocumentOpen(Ue(e,r),Ee(e))),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=Ue(e,t),n=Ee(e);return{responseId:e.searchUid??"",position:r.documentPosition,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});function Bv(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(nm(t.options.result)))};return xt(e,t,()=>{n(),e.dispatch(_t(t.options.result))})}l();s();u();c();function Gv(e,t){return Lp(e,{...t,fetchMoreResultsActionCreator:Nt})}l();s();u();c();l();s();u();c();var kM=new ue({numberOfResults:new J({min:0})});function $v(e,t={}){if(!TM(e))throw W;let r=ee(e),{dispatch:n}=e,a=()=>e.state,d=Le(e,kM,t.initialState,"buildResultsPerPage").numberOfResults;return d!==void 0&&n(Ho(d)),{...r,get state(){return{numberOfResults:a().pagination.numberOfResults}},set(p){n(Wo(p))},isSetTo(p){return p===this.state.numberOfResults}}}function TM(e){return e.addReducers({pagination:Bt,configuration:ie}),!0}function Hv(e,t={}){if(!OM(e))throw W;let r=$v(e,t),{dispatch:n}=e;return{...r,get state(){return{...r.state}},set(a){r.set(a),n(at({legacy:ss(),next:us()}))}}}function OM(e){return e.addReducers({pagination:Bt,configuration:ie}),!0}l();s();u();c();l();s();u();c();var Zn=()=>Y("analytics/searchbox/submit",e=>e.makeSearchboxSubmit()),am=()=>({actionCause:"searchboxSubmit"});l();s();u();c();l();s();u();c();var zc={id:L,query:Re},gs=w("querySet/register",e=>I(e,zc)),Ja=w("querySet/update",e=>I(e,zc));l();s();u();c();l();s();u();c();var Wv=w("commerce/querySet/register",e=>I(e,zc)),zv=w("commerce/querySet/update",e=>I(e,zc));var ea=re(xl(),e=>{e.addCase(gs,(t,r)=>Kv(t,r.payload)).addCase(Wv,(t,r)=>Kv(t,r.payload)).addCase(Ja,(t,r)=>{let{id:n,query:a}=r.payload;Yc(t,n,a)}).addCase(zv,(t,r)=>{let{id:n,query:a}=r.payload;Yc(t,n,a)}).addCase(Or,(t,r)=>{let{id:n,expression:a}=r.payload;Yc(t,n,a)}).addCase(kR,(t,r)=>{let{id:n,expression:a}=r.payload;Yc(t,n,a)}).addCase(Bn.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;Dy(t,n)}).addCase(G.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;Dy(t,n)}).addCase(xe,Yv).addCase(_p,Yv).addCase(Ae.fulfilled,(t,r)=>{if(r.payload)for(let[n,a]of Object.entries(r.payload.querySet))Yc(t,n,a)})});function Yv(e,t){ae(t.payload.q)||Dy(e,t.payload.q)}function Dy(e,t){Object.keys(e).forEach(r=>{e[r]=t})}var Yc=(e,t,r)=>{t in e&&(e[t]=r)},Kv=(e,t)=>{let{id:r,query:n}=t;r in e||(e[r]=n)};l();s();u();c();var om=e=>Y("analytics/querySuggest",(t,r)=>{let n=Vy(r,e);return t.makeOmniboxAnalytics(n)}),Jv=()=>({actionCause:"omniboxAnalytics"});function Vy(e,t){let{id:r,suggestion:n}=t,a=e.querySuggest?.[r];if(!a)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let o=a.completions.map(f=>f.expression),d=a.partialQueries.length-1,p=a.partialQueries[d]||"",m=a.responseId;return{suggestionRanking:o.indexOf(n),partialQuery:p,partialQueries:a.partialQueries,suggestions:o,querySuggestResponseId:m}}l();s();u();c();l();s();u();c();var Xv=()=>({});var ys=re(Xv(),e=>e.addCase(Ki,(t,r)=>{Zv(t,r.payload)}).addCase(IR,(t,r)=>{Zv(t,r.payload)}).addCase(Eb,(t,r)=>{delete t[r.payload.id]}).addCase(Kn.pending,ew).addCase(Kn.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{q:a}=r.payload;a&&n.partialQueries.push(a.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions,n.isLoading=!1,n.error=null}).addCase(Kn.rejected,tw).addCase(_n.pending,ew).addCase(_n.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{query:a}=r.payload;a&&n.partialQueries.push(a.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions.map(o=>({expression:o.expression,highlighted:o.highlighted,score:0,executableConfidence:0})),n.isLoading=!1,n.error=null}).addCase(_n.rejected,tw).addCase(Yn,(t,r)=>{rw(t,r.payload)}).addCase(ER,(t,r)=>{rw(t,r.payload)}).addCase(ii,(t,r)=>{Object.keys(t).forEach(n=>{let a=t[n];a&&(a.error=r.payload,a.isLoading=!1)})}));function Zv(e,t){let r=t.id;r in e||(e[r]=qM(t))}function qM(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}function ew(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function tw(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1)}function rw(e,t){let r=e[t.id];r&&(r.responseId="",r.completions=[],r.partialQueries=[])}l();s();u();c();var im={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},Ny={open:new j,close:new j},My={id:L,numberOfSuggestions:new J({min:0}),enableQuerySyntax:new ne,highlightOptions:new Q({values:{notMatchDelimiters:new Q({values:Ny}),exactMatchDelimiters:new Q({values:Ny}),correctionDelimiters:new Q({values:Ny})}}),clearFilters:new ne},nw=new ue(My);function aw(e,t){if(!DM(e))throw W;let r=ee(e),{dispatch:n}=e,a=()=>e.state,o=t.options?.id||sn("search_box"),d={id:o,highlightOptions:{...t.options?.highlightOptions},...im,...t.options};ve(e,nw,d,"buildSearchBox"),n(gs({id:o,query:e.state.query.q})),d.numberOfSuggestions&&n(Ki({id:o,count:d.numberOfSuggestions})),d.enableQuerySyntax&&n(nt({enableQuerySyntax:d.enableQuerySyntax}));let p=()=>e.state.querySet[d.id],m=async f=>{let{enableQuerySyntax:S,clearFilters:C}=d;n(ai({q:p(),enableQuerySyntax:S,clearFilters:C})),t.isNextAnalyticsReady?n(t.executeSearchActionCreator(f)):n(t.executeSearchActionCreator(f.legacy))};return{...r,updateText(f){n(Ja({id:o,query:f})),this.showSuggestions()},clear(){n(Ja({id:o,query:""})),n(Yn({id:o}))},showSuggestions(){d.numberOfSuggestions&&n(t.fetchQuerySuggestionsActionCreator({id:o}))},selectSuggestion(f){n(Or({id:o,expression:f})),m({legacy:om({id:o,suggestion:f}),next:Jv()}).then(()=>{n(Yn({id:o}))})},submit(f=Zn(),S){m({legacy:f,next:S}),n(Yn({id:o}))},get state(){let f=a(),S=f.querySuggest[d.id],C=jM(S,d.highlightOptions),x=S?S.isLoading:!1;return{searchBoxId:o,value:p(),suggestions:C,isLoading:f.search.isLoading,isLoadingSuggestions:x}}}}function jM(e,t){return e?e.completions.map(r=>({highlightedValue:Vm(r.highlighted,t),rawValue:r.expression})):[]}function DM(e){return e.addReducers({query:ze,querySuggest:ys,configuration:ie,querySet:ea,search:ce}),!0}function sm(e,t={}){let r=aw(e,{...t,executeSearchActionCreator:G,fetchQuerySuggestionsActionCreator:Kn,isNextAnalyticsReady:!0});return{...r,submit(){r.submit(Zn(),am())},get state(){return r.state}}}l();s();u();c();l();s();u();c();l();s();u();c();var hs=()=>Y("analytics/sort/results",(e,t)=>e.makeResultsSort({resultsSortBy:t.sortCriteria||Ot()})),cm=()=>({actionCause:"resultsSort"});function iw(e,t){return e.q!==t.q?Zn():e.sortCriteria!==t.sortCriteria?hs():e.firstResult!==t.firstResult?cs():e.numberOfResults!==t.numberOfResults?ss():Gt(e.f,t.f)?Kc(e.f,t.f):Gt(e.fExcluded,t.fExcluded)?Kc(e.fExcluded,t.fExcluded,!0):Gt(e.cf,t.cf)?Kc(e.cf,t.cf):Gt(e.af,t.af)?Kc(e.af,t.af):Gt(e.nf,t.nf)?ow(e.nf,t.nf):Gt(e.df,t.df)?ow(e.df,t.df):hn()}function Kc(e={},t={},r=!1){let n=Object.keys(e),a=Object.keys(t),o=n.filter(x=>!a.includes(x));if(o.length){let x=o[0];switch(!0){case e[x].length>1:return $e(x);case r:return zr({facetId:x,facetValue:e[x][0]});default:return Xt({facetId:x,facetValue:e[x][0]})}}let d=a.filter(x=>!n.includes(x));if(d.length){let x=d[0];return r?wt({facetId:x,facetValue:t[x][0]}):je({facetId:x,facetValue:t[x][0]})}let p=a.find(x=>t[x].filter(A=>e[x].includes(A)));if(!p)return hn();let m=e[p],f=t[p],S=f.filter(x=>!m.includes(x));if(S.length)return r?wt({facetId:p,facetValue:S[0]}):je({facetId:p,facetValue:S[0]});let C=m.filter(x=>!f.includes(x));return C.length?r?zr({facetId:p,facetValue:C[0]}):Xt({facetId:p,facetValue:C[0]}):hn()}function ow(e={},t={}){return Kc(Cs(e),Cs(t))}function sw(e,t){return e.q!==t.q?am():e.sortCriteria!==t.sortCriteria?cm():Gt(e.f,t.f)?Ss(e.f,t.f):Gt(e.fExcluded,t.fExcluded)?Ss(e.fExcluded,t.fExcluded,!0):Gt(e.cf,t.cf)?Ss(e.cf,t.cf):Gt(e.af,t.af)?Ss(e.af,t.af):Gt(e.nf,t.nf)?Ss(Cs(e.nf),Cs(t.nf)):Gt(e.df,t.df)?Ss(Cs(e.df),Cs(t.df)):Do()}function Gt(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function Ss(e={},t={},r=!1){let n=Object.keys(e),a=Object.keys(t),o=n.filter(x=>!a.includes(x));if(o.length){let x=o[0];return e[x].length>1?it():Kr()}if(a.filter(x=>!n.includes(x)).length)return r?Yr():Be();let p=a.find(x=>t[x].filter(A=>e[x].includes(A)));if(!p)return Do();let m=e[p],f=t[p];return f.filter(x=>!m.includes(x)).length?r?Yr():Be():m.filter(x=>!f.includes(x)).length?Kr():Do()}function Cs(e={}){let t={};return Object.keys(e).forEach(r=>{t[r]=e[r].map(n=>`${n.start}..${n.end}`)}),t}l();s();u();c();l();s();u();c();function cw(e){return{q:Qe().q,enableQuerySyntax:Qe().enableQuerySyntax,aq:e.advancedSearchQueries?.defaultFilters.aq??zt().defaultFilters.aq,cq:e.advancedSearchQueries?.defaultFilters.cq??zt().defaultFilters.cq,firstResult:Dt().firstResult,numberOfResults:e.pagination?.defaultNumberOfResults??Dt().defaultNumberOfResults,sortCriteria:Ot(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:An(),sf:{},tab:"",af:{},mnf:{}}}var VM=new ue({parameters:new Q({options:{required:!0},values:cl})});function lw(e,t){let{dispatch:r}=e,n=ee(e);Le(e,VM,t.initialState,"buildSearchParameterManager");let a=uw(e.state.tabSet,t.initialState.parameters);return r(xe(a)),{...n,synchronize(o){let d=uw(e.state.tabSet,um(e,o));r(xe(d))},get state(){return{parameters:Ly(e)}}}}function um(e,t){return{...cw(e.state),...t}}function uw(e,t){if(t.tab&&e){let r=Object.values(e).some(a=>a.id===t.tab),n=Object.values(e).find(a=>a.isActive);if(!r&&n)return{...t,tab:n.id};if(!r)return{...t,tab:""}}return t}function Ly(e){let t=e.state;return{...fy(t.query,r=>r.q,Qe().q),...VR(t.tabSet,r=>{let n=Object.values(r??{}).find(a=>a.isActive);return n?n.id:Object.keys(r??{})[0]},t.tabSet?Object.keys(t.tabSet)[0]:""),...gy(t.sortCriteria,r=>r,Ot()),...Ga(t.facetSet,Jc(t),NM,"f"),...Ga(t.facetSet,Jc(t),MM,"fExcluded"),...LM(t),...QM(t),...UM(t),..._M(t)}}function Jc(e){return t=>e.facetOptions?.facets[t]?.enabled??!0}function NM(e){return e.currentValues.filter(t=>t.state==="selected").map(t=>t.value)}function dw(e){return e.currentValues.filter(t=>t.state==="selected")}function MM(e){return e.currentValues.filter(t=>t.state==="excluded").map(t=>t.value)}function LM(e){return Ga(e.categoryFacetSet,Jc(e),t=>gt(t.currentValues).map(r=>r.value),"cf")}function QM(e){return Ga(e.numericFacetSet,Jc(e),dw,"nf")}function UM(e){return Ga(e.dateFacetSet,Jc(e),dw,"df")}function _M(e){let t=e.automaticFacetSet?.set;if(t===void 0)return{};let r=Object.entries(t).map(([n,{response:a}])=>{let o=BM(a);return o.length?{[n]:o}:{}}).reduce((n,a)=>({...n,...a}),{});return Object.keys(r).length?{af:r}:{}}function BM(e){return e.values.filter(t=>t.state==="selected").map(t=>t.value)}function lm(e,t){let{dispatch:r}=e,n=lw(e,t);return{...n,synchronize(a){let o=pw(e),d=um(e,o),p=um(e,a);$c(d,p)||(n.synchronize(a),r(G({legacy:iw(d,p),next:sw(d,p)})))},get state(){return{parameters:pw(e)}}}}function pw(e){let t=e.state;return{...Ly(e),...GM(t),...$M(t),...HM(t),...WM(t),...zM(t),...JM(t),...YM(t)}}function GM(e){if(e.query===void 0)return{};let t=e.query.enableQuerySyntax;return t!==void 0&&t!==Qe().enableQuerySyntax?{enableQuerySyntax:t}:{}}function $M(e){if(e.advancedSearchQueries===void 0)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function HM(e){if(e.advancedSearchQueries===void 0)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function WM(e){if(e.pagination===void 0)return{};let t=e.pagination.firstResult;return t!==Dt().firstResult?{firstResult:t}:{}}function zM(e){if(e.pagination===void 0)return{};let{numberOfResults:t,defaultNumberOfResults:r}=e.pagination;return t!==r?{numberOfResults:t}:{}}function YM(e){if(e.staticFilterSet===void 0)return{};let t=Object.entries(e.staticFilterSet).map(([r,n])=>{let a=KM(n.values);return a.length?{[r]:a}:{}}).reduce((r,n)=>({...r,...n}),{});return Object.keys(t).length?{sf:t}:{}}function KM(e){return e.filter(t=>t.state==="selected").map(t=>t.caption)}function JM(e){if(e.debug===void 0)return{};let t=e.debug;return t!==An()?{debug:t}:{}}l();s();u();c();function mw(e){return Zi(e)}l();s();u();c();l();s();u();c();l();s();u();c();var dm=()=>new Q({values:{questionAnswerId:L},options:{required:!0}}),Qy=()=>new Q({values:{linkText:Re,linkURL:Re},options:{required:!0}});function As(e){return I(e,dm())}l();s();u();c();function Ne(e,t){let r=t??e.search?.questionAnswer?.documentId;return r&&e.search&&HA(e,r.contentIdKey,r.contentIdValue)}function er(e,t){let r=e.questionAnswering?.relatedQuestions.findIndex(a=>a.questionAnswerId===t)??-1;return r===-1?null:e.search?.questionAnswer?.relatedQuestions?.[r]??null}var Uy=()=>Y({prefix:"analytics/smartSnippet/expand",__legacy__getBuilder:e=>e.makeExpandSmartSnippet(),analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:e=>{let t=Ne(e),r=Ee(t),n=e.search?.response.searchUid;if(n)return{action:"expand",snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),_y=()=>Y({prefix:"analytics/smartSnippet/collapse",__legacy__getBuilder:e=>e.makeCollapseSmartSnippet(),analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:e=>{let t=Ne(e),r=Ee(t),n=e.search?.response.searchUid;if(n)return{action:"collapse",snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),By=()=>Y({prefix:"analytics/smartSnippet/like",__legacy__getBuilder:e=>e.makeLikeSmartSnippet(),analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:e=>{let t=Ne(e),r=Ee(t),n=e.search?.response.searchUid;if(n)return{action:"like",snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),Gy=()=>Y({prefix:"analytics/smartSnippet/dislike",__legacy__getBuilder:e=>e.makeDislikeSmartSnippet(),analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:e=>{let t=Ne(e),r=Ee(t),n=e.search?.response.searchUid;if(n)return{action:"dislike",snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),$y=()=>Y({prefix:"analytics/smartSnippet/source/open",__legacy__getBuilder:(e,t)=>{let r=Ne(t);return e.makeOpenSmartSnippetSource(Ue(r,t),Ee(r))},analyticsType:"SmartSnippets.SourceClick",analyticsPayloadBuilder:e=>{let t=Ne(e),r=Ee(t),n=e.search?.response.searchUid;if(n)return{snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),Xc=e=>Y({prefix:"analytics/smartSnippet/source/open",__legacy__getBuilder:(t,r)=>{I(e,Qy());let n=Ne(r);return n?t.makeOpenSmartSnippetInlineLink(Ue(n,r),{...Ee(n),...e}):null},analyticsType:"SmartSnippets.SourceClick",analyticsPayloadBuilder:t=>{let r=Ne(t),n=Ee(r),a=t.search?.response.searchUid;if(a)return{snippetType:"SmartSnippet",responseId:a,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.title,url:r.clickUri}}}}),Hy=()=>Y("analytics/smartSnippet/feedbackModal/open",e=>e.makeOpenSmartSnippetFeedbackModal()),Wy=()=>Y("analytics/smartSnippet/feedbackModal/close",e=>e.makeCloseSmartSnippetFeedbackModal()),XM={does_not_answer:"doesNotAnswer",partially_answers:"partiallyAnswers",was_not_a_question:"wasNotAQuestion"},zy=e=>Y({prefix:"analytics/smartSnippet/sendFeedback",__legacy__getBuilder:t=>t.makeSmartSnippetFeedbackReason(e),analyticsType:"SmartSnippets.SubmitFeedback",analyticsPayloadBuilder:t=>{let r=Ne(t),n=Ee(r),a=t.search?.response.searchUid;if(a)return{responseId:a,snippetType:"SmartSnippet",itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.title,url:r.clickUri},reason:XM[e]}}}),Yy=e=>Y({prefix:"analytics/smartSnippet/sendFeedback",__legacy__getBuilder:t=>t.makeSmartSnippetFeedbackReason("other",e),analyticsType:"SmartSnippets.SubmitFeedback",analyticsPayloadBuilder:t=>{let r=Ne(t),n=Ee(r),a=t.search?.response.searchUid;if(a)return{responseId:a,snippetType:"SmartSnippet",itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.title,url:r.clickUri},reason:"other",additionalNotes:e}}}),Ky=e=>Y({prefix:"analytics/smartSnippetSuggestion/expand",__legacy__getBuilder:(t,r)=>{As(e);let n=er(r,e.questionAnswerId);return n?t.makeExpandSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null},analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:t=>{let r=er(t,e.questionAnswerId),n=t.search?.response.searchUid;if(n&&r){let a=Ne(t,r.documentId);return{action:"expand",responseId:n,snippetType:"SmartSnippetSuggestion",itemMetadata:{uniqueFieldName:r.documentId.contentIdKey,uniqueFieldValue:r.documentId.contentIdValue,title:a?.title,url:a?.clickUri}}}}}),Jy=e=>Y({prefix:"analytics/smartSnippetSuggestion/collapse",__legacy__getBuilder:(t,r)=>{As(e);let n=er(r,e.questionAnswerId);return n?t.makeCollapseSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null},analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:t=>{let r=er(t,e.questionAnswerId),n=t.search?.response.searchUid;if(n&&r){let a=Ne(t,r.documentId);return{action:"collapse",responseId:n,snippetType:"SmartSnippetSuggestion",itemMetadata:{uniqueFieldName:r.documentId.contentIdKey,uniqueFieldValue:r.documentId.contentIdValue,title:a?.title,url:a?.clickUri}}}}}),Zc=e=>Y({prefix:"analytics/smartSnippetSuggestion/source/open",__legacy__getBuilder:(t,r)=>{I(e,dm());let n=er(r,e.questionAnswerId);if(!n)return null;let a=Ne(r,n.documentId);return a?t.makeOpenSmartSnippetSuggestionSource(Ue(a,r),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null},analyticsType:"SmartSnippets.SourceClick",analyticsPayloadBuilder:t=>{let r=er(t,e.questionAnswerId),n=t.search?.response.searchUid;if(n&&r){let a=Ne(t,r.documentId);return{responseId:n,snippetType:"SmartSnippetSuggestion",itemMetadata:{uniqueFieldName:r.documentId.contentIdKey,uniqueFieldValue:r.documentId.contentIdValue,title:a?.title,url:a?.clickUri}}}}}),pm=(e,t)=>Y({prefix:"analytics/smartSnippetSuggestion/source/open",__legacy__getBuilder:(r,n)=>{I(e,dm()),I(t,Qy());let a=er(n,e.questionAnswerId);if(!a)return null;let o=Ne(n,a.documentId);return o?r.makeOpenSmartSnippetSuggestionInlineLink(Ue(o,n),{question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId,linkText:t.linkText,linkURL:t.linkURL}):null},analyticsType:"SmartSnippets.SourceClick",analyticsPayloadBuilder:r=>{let n=er(r,e.questionAnswerId),a=r.search?.response.searchUid;if(a&&n){let o=Ne(r,n.documentId);return{responseId:a,snippetType:"SmartSnippetSuggestion",itemMetadata:{uniqueFieldName:n.documentId.contentIdKey,uniqueFieldValue:n.documentId.contentIdValue,title:o?.title,url:o?.clickUri}}}}}),mm={logExpandSmartSnippet:Uy,logCollapseSmartSnippet:_y,logLikeSmartSnippet:By,logDislikeSmartSnippet:Gy,logOpenSmartSnippetSource:$y,logOpenSmartSnippetInlineLink:Xc,logOpenSmartSnippetFeedbackModal:Hy,logCloseSmartSnippetFeedbackModal:Wy,logSmartSnippetFeedback:zy,logSmartSnippetDetailedFeedback:Yy,logExpandSmartSnippetSuggestion:Ky,logCollapseSmartSnippetSuggestion:Jy,logOpenSmartSnippetSuggestionSource:Zc};l();s();u();c();l();s();u();c();var xs=w("smartSnippet/expand"),Fs=w("smartSnippet/collapse"),Rs=w("smartSnippet/like"),bs=w("smartSnippet/dislike"),vs=w("smartSnippet/feedbackModal/open"),ta=w("smartSnippet/feedbackModal/close"),ws=w("smartSnippet/related/expand",e=>As(e)),Ps=w("smartSnippet/related/collapse",e=>As(e));l();s();u();c();l();s();u();c();var Xy=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var fw=(e,t)=>e.findIndex(r=>r.questionAnswerId===t.questionAnswerId);function gw({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){return ao({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n})}function ZM(e,t){let r=gw(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var jr=re(Xy(),e=>e.addCase(xs,t=>{t.expanded=!0}).addCase(Fs,t=>{t.expanded=!1}).addCase(Rs,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(bs,t=>{t.liked=!1,t.disliked=!0}).addCase(vs,t=>{t.feedbackModalOpen=!0}).addCase(ta,t=>{t.feedbackModalOpen=!1}).addCase(G.fulfilled,(t,r)=>{let n=r.payload.response.questionAnswer.relatedQuestions.map((o,d)=>ZM(o,t.relatedQuestions[d])),a=gw(r.payload.response.questionAnswer);return t.questionAnswerId===a?{...t,relatedQuestions:n}:{...Xy(),relatedQuestions:n,questionAnswerId:a}}).addCase(ws,(t,r)=>{let n=fw(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!0)}).addCase(Ps,(t,r)=>{let n=fw(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!1)}));function yw(e,t,r){if(!eL(e))throw W;let n=ee(e),a=()=>e.state,o=()=>Ne(a()),d=null,p=xt(e,{options:{selectionDelay:r?.options?.selectionDelay}},()=>{let m=o();if(!m){d=null;return}let{searchResponseId:f}=a().search;d!==f&&(d=f,e.dispatch(t.logOpenSmartSnippetSource()),e.dispatch(_t(m)))});return{...n,get state(){let m=a();return{question:m.search.questionAnswer.question,answer:m.search.questionAnswer.answerSnippet,documentId:m.search.questionAnswer.documentId,expanded:m.questionAnswering.expanded,answerFound:m.search.questionAnswer.answerSnippet!=="",liked:m.questionAnswering.liked,disliked:m.questionAnswering.disliked,feedbackModalOpen:m.questionAnswering.feedbackModalOpen,source:o()}},expand(){e.dispatch(t.logExpandSmartSnippet()),e.dispatch(xs())},collapse(){e.dispatch(t.logCollapseSmartSnippet()),e.dispatch(Fs())},like(){e.dispatch(t.logLikeSmartSnippet()),e.dispatch(Rs())},dislike(){e.dispatch(t.logDislikeSmartSnippet()),e.dispatch(bs())},openFeedbackModal(){e.dispatch(t.logOpenSmartSnippetFeedbackModal()),e.dispatch(vs())},closeFeedbackModal(){e.dispatch(t.logCloseSmartSnippetFeedbackModal()),e.dispatch(ta())},sendFeedback(m){e.dispatch(t.logSmartSnippetFeedback(m)),e.dispatch(ta())},sendDetailedFeedback(m){e.dispatch(t.logSmartSnippetDetailedFeedback(m)),e.dispatch(ta())},selectSource(){p.select()},beginDelayedSelectSource(){p.beginDelayedSelect()},cancelPendingSelectSource(){p.cancelPendingSelect()}}}function eL(e){return e.addReducers({search:ce,questionAnswering:jr}),!0}l();s();u();c();function fm(e,t){if(!tL(e))throw W;let r=()=>e.state,n=new Set,a=S=>n.has(S)?!0:(n.add(S),!1),o=null,d=S=>{o!==S&&(o=S,m={},n.clear())},p=(S,C,x)=>xt(e,{options:{selectionDelay:t?.options?.selectionDelay}},()=>{a(C)||e.dispatch(x?pm({questionAnswerId:x},S):Xc(S))}),m={},f=(S,C)=>{let{searchResponseId:x}=r().search;d(x);let A=ao({...S,questionAnswerId:C});return A in m||(m[A]=p(S,A,C)),m[A]};return{selectInlineLink(S,C){f(S,C)?.select()},beginDelayedSelectInlineLink(S,C){f(S,C)?.beginDelayedSelect()},cancelPendingSelectInlineLink(S,C){f(S,C)?.cancelPendingSelect()}}}function tL(e){return e.addReducers({search:ce,questionAnswering:jr}),!0}function hw(e,t){On(e.state.configuration.analytics.analyticsMode);let r=yw(e,mm,t),n=fm(e,{options:{selectionDelay:t?.options?.selectionDelay}});return{...r,get state(){return r.state},selectInlineLink(a){n.selectInlineLink(a)},beginDelayedSelectInlineLink(a){n.beginDelayedSelectInlineLink(a)},cancelPendingSelectInlineLink(a){n.cancelPendingSelectInlineLink(a)}}}l();s();u();c();l();s();u();c();function Sw(e,t){if(!rL(e))throw W;let r=ee(e),n=()=>e.state,a=o=>{let{contentIdKey:d,contentIdValue:p}=o;return e.state.search.results.find(m=>kn(m,d)===p)};return{...r,get state(){let o=n();return{questions:o.search.questionAnswer.relatedQuestions.map((d,p)=>({question:d.question,answer:d.answerSnippet,documentId:d.documentId,questionAnswerId:o.questionAnswering.relatedQuestions[p].questionAnswerId,expanded:o.questionAnswering.relatedQuestions[p].expanded,source:a(d.documentId)}))}},expand(o){let d={questionAnswerId:o};e.dispatch(t.logExpandSmartSnippetSuggestion(d)),e.dispatch(ws(d))},collapse(o){let d={questionAnswerId:o};e.dispatch(t.logCollapseSmartSnippetSuggestion(d)),e.dispatch(Ps(d))}}}function rL(e){return e.addReducers({search:ce,questionAnswering:jr}),!0}l();s();u();c();function Cw(e,t){if(!nL(e))throw W;let r=()=>e.state,n=C=>{let x=r(),A=er(x,C);return A?Ne(x,A.documentId):null},a=new Set,o=C=>a.has(C)?!0:(a.add(C),!1),d=null,p=C=>{d!==C&&(d=C,f={},a.clear())},m=(C,x)=>xt(e,{options:{selectionDelay:t?.options?.selectionDelay}},()=>{o(x)||(e.dispatch(Zc({questionAnswerId:x})),e.dispatch(_t(C)))}),f={},S=C=>{let{searchResponseId:x}=r().search;p(x);let A=n(C);return A?(C in f||(f[C]=m(A,C)),f[C]):null};return{selectSource(C){S(C)?.select()},beginDelayedSelectSource(C){S(C)?.beginDelayedSelect()},cancelPendingSelectSource(C){S(C)?.cancelPendingSelect()}}}function nL(e){return e.addReducers({search:ce,questionAnswering:jr}),!0}function Aw(e,t){On(e.state.configuration.analytics.analyticsMode);let r=Sw(e,mm),n=fm(e,{options:{selectionDelay:t?.options?.selectionDelay}}),a=Cw(e,{options:{selectionDelay:t?.options?.selectionDelay}});return{...r,get state(){return r.state},selectSource(o){a.selectSource(o)},beginDelayedSelectSource(o){a.beginDelayedSelectSource(o)},cancelPendingSelectSource(o){a.cancelPendingSelectSource(o)},selectInlineLink(o,d){n.selectInlineLink(d,o)},beginDelayedSelectInlineLink(o,d){n.beginDelayedSelectInlineLink(d,o)},cancelPendingSelectInlineLink(o,d){n.cancelPendingSelectInlineLink(d,o)}}}l();s();u();c();l();s();u();c();l();s();u();c();var xw={by:new on({enum:ya,required:!0})},Es=w("sortCriteria/register",e=>Fw(e)),Is=w("sortCriteria/update",e=>Fw(e)),Fw=e=>no(e)?(e.forEach(t=>I(t,xw)),{payload:e}):I(e,xw);l();s();u();c();var gm=re(Ot(),e=>{e.addCase(Es,(t,r)=>or(r.payload)).addCase(Is,(t,r)=>or(r.payload)).addCase(Ae.fulfilled,(t,r)=>r.payload?.sortCriteria??t).addCase(xe,(t,r)=>r.payload.sortCriteria??t)});function aL(e,t){if(!t)return;let r=new ue({criterion:new te({each:GC})}),n=oL(t),a={...t,criterion:n};Le(e,r,a,"buildSort")}function oL(e){return e.criterion?no(e.criterion)?e.criterion:[e.criterion]:[]}function Rw(e,t){if(!iL(e))throw W;let r=ee(e),{dispatch:n}=e,a=()=>e.state;aL(e,t.initialState);let o=t.initialState?.criterion;return o&&n(Es(o)),{...r,sortBy(d){n(Is(d)),n(ur(1))},isSortedBy(d){return this.state.sortCriteria===or(d)},get state(){return{sortCriteria:a().sortCriteria}}}}function iL(e){return e.addReducers({configuration:ie,sortCriteria:gm}),!0}function bw(e,t={}){let{dispatch:r}=e,n=Rw(e,t),a=()=>r(G({legacy:hs(),next:cm()}));return{...n,get state(){return n.state},sortBy(o){n.sortBy(o),a()}}}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();function vw(e){return e.type==="redirect"}var ym=class{constructor(t){this.response=t}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let t=this.response.preprocessingOutput.triggers.filter(vw);return t.length?t[0].content:null}};var ks=w("standaloneSearchBox/register",e=>I(e,{id:L,redirectionUrl:L,overwrite:new ne({required:!1})})),Ts=w("standaloneSearchBox/updateRedirectionUrl",e=>I(e,{id:L,redirectionUrl:L})),Os=w("standaloneSearchBox/reset",e=>I(e,{id:L})),qs=w("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>I(e,{id:L})),js=w("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),ra=oe("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:o,navigatorContext:d}})=>{o(e,{id:new j({emptyAllowed:!1})});let p=await cL(r(),d),m=await a.plan(p);if(Ge(m))return n(m.error);let{redirectionUrl:f}=new ym(m.success);return f&&t(sL(f)),f||""}),sL=e=>Y("analytics/standaloneSearchBox/redirect",t=>t.makeTriggerRedirect({redirectedTo:e})),cL=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??Me(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&e.configuration.analytics.analyticsMode==="legacy"?await Xo(e.configuration.analytics):Br(e.configuration.analytics,t),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});l();s();u();c();l();s();u();c();function ww(){return{}}var hm=re(ww(),e=>e.addCase(ks,(t,r)=>{let{id:n,redirectionUrl:a,overwrite:o}=r.payload;!o&&n in t||(t[n]=Zy(a))}).addCase(Os,(t,r)=>{let{id:n}=r.payload,a=t[n];if(a){t[n]=Zy(a.defaultRedirectionUrl);return}}).addCase(Ts,(t,r)=>{let{id:n,redirectionUrl:a}=r.payload;n in t&&(t[n]=Zy(a))}).addCase(ra.pending,(t,r)=>{let n=t[r.meta.arg.id];n&&(n.isLoading=!0)}).addCase(ra.fulfilled,(t,r)=>{let n=r.payload,a=t[r.meta.arg.id];a&&(a.redirectTo=n||a.defaultRedirectionUrl,a.isLoading=!1)}).addCase(ra.rejected,(t,r)=>{let n=t[r.meta.arg.id];n&&(n.isLoading=!1)}).addCase(qs,(t,r)=>{let n=t[r.payload.id];n&&(n.analytics.cause="searchFromLink")}).addCase(js,(t,r)=>{let n=t[r.payload.id];n&&(n.analytics.cause="omniboxFromLink",n.analytics.metadata=r.payload.metadata)}));function Zy(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}l();s();u();c();var Pw=new ue({...My,redirectionUrl:new j({required:!0,emptyAllowed:!1}),overwrite:new ne({required:!1})});function Ew(e,t){if(!uL(e))throw W;let{dispatch:r}=e,n=()=>e.state,a=t.options.id||sn("standalone_search_box"),o={id:a,highlightOptions:{...t.options.highlightOptions},...im,overwrite:!1,...t.options};ve(e,Pw,o,"buildStandaloneSearchBox");let d=sm(e,{options:o});return r(ks({id:a,redirectionUrl:o.redirectionUrl,overwrite:o.overwrite})),{...d,updateText(p){d.updateText(p),r(qs({id:a}))},selectSuggestion(p){let m=Vy(n(),{id:a,suggestion:p});r(Or({id:a,expression:p})),r(js({id:a,metadata:m})),this.submit()},afterRedirection(){r(Os({id:a}))},updateRedirectUrl(p){r(Ts({id:a,redirectionUrl:p}))},submit(){r(nt({q:this.state.value,enableQuerySyntax:o.enableQuerySyntax})),r(ra({id:a}))},get state(){let m=n().standaloneSearchBoxSet[a];return{...d.state,isLoading:m.isLoading,redirectTo:m.redirectTo,analytics:m.analytics}}}}function uL(e){return e.addReducers({standaloneSearchBoxSet:hm,configuration:ie,query:ze,querySuggest:ys}),!0}l();s();u();c();l();s();u();c();var Sm=re(Fl(),e=>e.addCase(Di,(t,r)=>{let n=r.payload,{id:a}=n;a in t||(t[a]=n)}).addCase(Zr,(t,r)=>{let{id:n,value:a}=r.payload,o=t[n];if(!o)return;let d=o.values.find(m=>m.caption===a.caption);if(!d)return;let p=d.state==="selected";d.state=p?"idle":"selected"}).addCase(en,(t,r)=>{let{id:n,value:a}=r.payload,o=t[n];if(!o)return;let d=o.values.find(m=>m.caption===a.caption);if(!d)return;let p=d.state==="excluded";d.state=p?"idle":"excluded"}).addCase(Mn,(t,r)=>{let n=r.payload,a=t[n];a&&a.values.forEach(o=>{o.state="idle"})}).addCase(_e,t=>{Object.values(t).forEach(r=>{r.values.forEach(n=>{n.state="idle"})})}).addCase(xe,(t,r)=>{let n=r.payload.sf||{};Object.entries(t).forEach(([a,o])=>{let d=n[a]||[];o.values.forEach(p=>{p.state=d.includes(p.caption)?"selected":"idle"})})}));l();s();u();c();function eh(e){return{state:"idle",...e}}var lL=new ue({id:Qa,values:Wd});function Iw(e,t){if(!dL(e))throw W;ve(e,lL,t.options,"buildStaticFilter");let r=ee(e),{dispatch:n}=e,a=()=>e.state,{id:o}=t.options;return n(Di(t.options)),{...r,toggleSelect(d){n(Zr({id:o,value:d})),n(G({legacy:Cm(o,d)}))},toggleSingleSelect(d){d.state==="idle"&&n(Mn(o)),n(Zr({id:o,value:d})),n(G({legacy:Cm(o,d)}))},toggleExclude(d){n(en({id:o,value:d})),n(G({legacy:Cm(o,d)}))},toggleSingleExclude(d){d.state==="idle"&&n(Mn(o)),n(en({id:o,value:d})),n(G({legacy:Cm(o,d)}))},deselectAll(){n(Mn(o)),n(G({legacy:Yd({staticFilterId:o})}))},isValueSelected(d){return d.state==="selected"},isValueExcluded(d){return d.state==="excluded"},get state(){let d=a().staticFilterSet[o]?.values||[],p=d.some(m=>m.state!=="idle");return{id:o,values:d,hasActiveValues:p}}}}function dL(e){return e.addReducers({staticFilterSet:Sm}),!0}function Cm(e,t){let{caption:r,expression:n,state:a}=t;return(a==="idle"?zd:Vi)({staticFilterId:e,staticFilterValue:{caption:r,expression:n}})}l();s();u();c();l();s();u();c();var pL=new ue({expression:Re,id:L,clearFiltersOnTabChange:new ne}),mL=new ue({isActive:new ne});function kw(e,t){if(gL(t.options.id),!fL(e))throw W;let r=ee(e),{dispatch:n}=e;ve(e,pL,t.options,"buildTab");let a=Le(e,mL,t.initialState,"buildTab"),{id:o,expression:d}=t.options;return n(Ci({id:o,expression:d})),Object.keys(e.state.tabSet).length===1&&(a.isActive=!0),a.isActive&&n(Kt(o)),{...r,select(){t.options.clearFiltersOnTabChange&&n(ai({q:"",clearFilters:!0})),n(Kt(o))},get state(){return{isActive:e.state.tabSet[o]?.isActive}}}}function fL(e){return e.addReducers({configuration:ie,tabSet:Ni}),!0}function gL(e){let t=Ai().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function Tw(e,t){let{dispatch:r}=e,n=kw(e,t),a=()=>r(G({legacy:hn(),next:Do()}));return{...n,get state(){return n.state},select(){n.select(),a()}}}l();s();u();c();function Ow(e){let t=Zd(e);return{...t,get state(){return t.state}}}l();s();u();c();l();s();u();c();l();s();u();c();function qw(e){return e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore},e}function jw(e,t){let r=[],n=[],a=[],o=[];return t.forEach(d=>{switch(d.type){case"redirect":r.push(d.content);break;case"query":n.push(d.content);break;case"execute":a.push({functionName:d.content.name,params:d.content.params});break;case"notify":o.push(d.content);break}}),e.redirectTo=r[0]??"",e.query=e.queryModification.newQuery,e.executions=a,e.notifications=o,e}function Dw(e,t){return e.queryModification={...t,queryToIgnore:""},e}function Vw(e,t){return e.queryModification.queryToIgnore=t,e}l();s();u();c();var Nw=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});var na=re(Nw(),e=>e.addCase(G.pending,qw).addCase(G.fulfilled,(t,r)=>jw(t,r.payload.response.triggers)).addCase(ni,(t,r)=>Dw(t,r.payload)).addCase(vn,(t,r)=>Vw(t,r.payload)));function Mw(e){if(!yL(e))throw W;let t=ee(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.executions;return{...t,subscribe(o){let d=()=>{let p=!za(this.state.executions,a,(m,f)=>m.functionName===f.functionName&&za(m.params,f.params));a=this.state.executions,p&&this.state.executions.length&&(o(),r(El()))};return d(),e.subscribe(d)},get state(){return{executions:n().triggers.executions}}}}function yL(e){return e.addReducers({triggers:na}),!0}l();s();u();c();l();s();u();c();function Lw(e,t){let r=t.options.logNotifyTriggerActionCreator;if(!hL(e))throw W;let n=ee(e),{dispatch:a}=e,o=()=>e.state,d=o().triggers.notifications;return{...n,subscribe(p){let m=()=>{let f=!za(d,this.state.notifications);d=this.state.notifications,f&&(p(),a(r()))};return m(),e.subscribe(m)},get state(){return{notifications:o().triggers.notifications}}}}function hL(e){return e.addReducers({triggers:na}),!0}function Qw(e){return Lw(e,{options:{logNotifyTriggerActionCreator:wl}})}l();s();u();c();function Uw(e){if(!SL(e))throw W;let t=ee(e),{dispatch:r}=e,n=()=>e.state,a=()=>n().triggers.queryModification.newQuery,o=()=>n().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:a(),originalQuery:o(),wasQueryModified:a()!==""}},undo(){r(vn(a())),r(nt({q:o()})),r(G({legacy:vl({undoneQuery:a()})}))}}}function SL(e){return e.addReducers({triggers:na,query:ze}),!0}l();s();u();c();function _w(e){if(!CL(e))throw W;let t=ee(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.redirectTo;return{...t,subscribe(o){let d=()=>{let p=a!==this.state.redirectTo;a=this.state.redirectTo,p&&this.state.redirectTo&&(o(),r(Pl()))};return d(),e.subscribe(d)},get state(){return{redirectTo:n().triggers.redirectTo}}}}function CL(e){return e.addReducers({triggers:na}),!0}l();s();u();c();l();s();u();c();var Gw="..",th="...",AL=/^(f|fExcluded|cf|nf|df|sf|af|mnf)-(.+)$/,xL={f:!0,fExcluded:!0,cf:!0,sf:!0,af:!0,nf:!0,df:!0,mnf:!0},Am="&",eu="=";function tu(){return{serialize:bL(vL),deserialize:TL}}function ru(e){return e in xL}function FL(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,debug:!0,tab:!0}}function RL(e){let r=e in{nf:!0,df:!0,mnf:!0};return ru(e)&&r}function $w(e){return FL(e)||ru(e)}var bL=e=>t=>Object.entries(t).map(e).filter(r=>r).join(Am);function vL(e){let[t,r]=e;return $w(t)?ru(t)&&!RL(t)?PL(r)?IL(t,r):"":t==="nf"||t==="df"?EL(r)?kL(t,r):"":wL(t,r):""}function wL(e,t){return`${e}${eu}${encodeURIComponent(t)}`}function PL(e){return rh(e)?Hw(e,r=>typeof r=="string"):!1}function EL(e){return rh(e)?Hw(e,r=>rh(r)&&"start"in r&&"end"in r):!1}function rh(e){return!!(e&&typeof e=="object")}function Hw(e,t){return Object.entries(e).filter(n=>{let a=n[1];return!Array.isArray(a)||!a.every(t)}).length===0}function IL(e,t){return Object.entries(t).map(([r,n])=>`${e}-${r}${eu}${n.map(a=>encodeURIComponent(a)).join(",")}`).join(Am)}function kL(e,t){return Object.entries(t).map(([r,n])=>{let a=n.map(({start:o,end:d,endInclusive:p})=>`${o}${p?th:Gw}${d}`).join(",");return`${e}-${r}${eu}${a}`}).join(Am)}function TL(e){return e.split(Am).map(n=>OL(n)).map(n=>qL(n)).filter(NL).map(n=>ML(n)).reduce((n,a)=>{let[o,d]=a;if(ru(o)){let p={...n[o],...d};return{...n,[o]:p}}return{...n,[o]:d}},{})}function OL(e){let[t,...r]=e.split(eu),n=r.join(eu);return[t,n]}function qL(e,t=AL){let[r,n]=e,a=t.exec(r);if(!a)return e;let o=a[1],d=a[2],p=n.split(","),m=jL(o,p),f={[d]:m};return[o,JSON.stringify(f)]}function jL(e,t){return e==="nf"||e==="mnf"?DL(t,"selected"):e==="df"?VL(t,"selected"):t}function DL(e,t){let r=[];for(let n of e){let{startAsString:a,endAsString:o,isEndInclusive:d}=Ww(n),p=parseFloat(a),m=parseFloat(o);!Number.isFinite(p)||!Number.isFinite(m)||r.push(Yi({start:p,end:m,state:t,endInclusive:d}))}return r}function Bw(e){try{return hA(e)?(ml(e,Zo),!0):lr(e)?(Rn(e),!0):!1}catch{return!1}}function VL(e,t){let r=[];for(let n of e){let{isEndInclusive:a,startAsString:o,endAsString:d}=Ww(n);!Bw(o)||!Bw(d)||r.push(Vn({start:o,end:d,state:t,endInclusive:a}))}return r}function NL(e){let t=$w(e[0]),r=e.length===2;return t&&r}function ML(e,t=!0){let[r,n]=e;return r==="enableQuerySyntax"?[r,n==="true"]:r==="debug"?[r,n==="true"]:r==="firstResult"?[r,parseInt(n)]:r==="numberOfResults"?[r,parseInt(n)]:ru(r)?[r,LL(n)]:[r,t?decodeURIComponent(n):n]}function LL(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach(n=>{let[a,o]=n;r[a]=o.map(d=>ro(d)?decodeURIComponent(d):d)}),r}function Ww(e){let t=e.indexOf(th)!==-1,[r,n]=e.split(t?th:Gw);return{isEndInclusive:t,startAsString:r,endAsString:n}}var QL=new ue({fragment:new j});function zw(e,t){let r;function n(){r=e.state.search.requestId}function a(){return r!==e.state.search.requestId}if(!_L(e))throw W;Le(e,QL,t.initialState,"buildUrlManager");let o=ee(e),d=t.initialState.fragment;n();let p=lm(e,{initialState:{parameters:xm(d)}});return{...o,subscribe(m){let f=()=>{let S=this.state.fragment;!UL(d,S)&&a()&&(d=S,m()),n()};return f(),e.subscribe(f)},get state(){return{fragment:tu().serialize(p.state.parameters)}},synchronize(m){d=m;let f=xm(m);p.synchronize(f)}}}function UL(e,t){if(e===t)return!0;let r=xm(e),n=xm(t);return $c(r,n)}function xm(e){return tu().deserialize(e)}function _L(e){return e.addReducers({configuration:ie}),!0}l();s();u();c();l();s();u();c();var Yw=oe("analytics/addPageViewEntry",async(e,{getState:t})=>{t().configuration.analytics.enabled&&yt.getInstance().addElement({name:"PageView",value:e,time:JSON.stringify(new Date)})});function BL(e){return e.addReducers({}),{addPageViewEntryInActionsHistory:Yw}}l();s();u();c();l();s();u();c();l();s();u();c();var aa=()=>new j({required:!1,emptyAllowed:!0}),Fm=w("advancedSearchQueries/update",e=>I(e,{aq:aa(),cq:aa(),lq:aa(),dq:aa()})),Rm=w("advancedSearchQueries/register",e=>I(e,{aq:aa(),cq:aa(),lq:aa(),dq:aa()}));var Kw=re(zt(),e=>{e.addCase(Fm,(t,r)=>{let{aq:n,cq:a,lq:o,dq:d}=r.payload;Je(n)||(t.aq=n,t.aqWasSet=!0),Je(a)||(t.cq=a,t.cqWasSet=!0),Je(o)||(t.lq=o,t.lqWasSet=!0),Je(d)||(t.dq=d,t.dqWasSet=!0)}).addCase(Rm,(t,r)=>{let{aq:n,cq:a,lq:o,dq:d}=r.payload;Je(n)||(t.defaultFilters.aq=n,t.aqWasSet||(t.aq=n)),Je(a)||(t.defaultFilters.cq=a,t.cqWasSet||(t.cq=a)),Je(o)||(t.defaultFilters.lq=o,t.lqWasSet||(t.lq=o)),Je(d)||(t.defaultFilters.dq=d,t.dqWasSet||(t.dq=d))}).addCase(Ae.fulfilled,(t,r)=>r.payload?.advancedSearchQueries??t).addCase(xe,(t,r)=>{let{aq:n,cq:a}=r.payload;Je(n)||(t.aq=n,t.aqWasSet=!0),Je(a)||(t.cq=a,t.cqWasSet=!0)})});function GL(e){return e.addReducers({advancedSearchQueries:Kw}),{updateAdvancedSearchQueries:Fm,registerAdvancedSearchQueries:Rm}}l();s();u();c();function $L(e){return e.addReducers({}),{logDocumentOpen:nm,logOpenSmartSnippetSource:$y,logOpenSmartSnippetSuggestionSource:Zc,logOpenSmartSnippetInlineLink:Xc,logOpenSmartSnippetSuggestionInlineLink:pm}}l();s();u();c();function HL(e){return e.addReducers({}),{logSearchEvent:aA,logClickEvent:oA,logCustomEvent:iA}}l();s();u();c();function WL(e){return e.addReducers({}),{logClearBreadcrumbs:Id,logInterfaceLoad:rl,logSearchFromLink:nl,logOmniboxFromLink:al,logInterfaceChange:hn,logDidYouMeanClick:hl,logCategoryFacetBreadcrumb:Ad,logFacetBreadcrumb:qi,logFacetClearAll:$e,logFacetUnexclude:zr,logFacetExclude:wt,logFacetDeselect:Xt,logFacetSelect:je,logFacetShowLess:Oi,logFacetShowMore:Ti,logFacetUpdateSort:Rr,logDateFacetBreadcrumb:Dc,logNumericFacetBreadcrumb:Vc,logNavigateBackward:Gp,logNavigateForward:Bp,logPageNext:Jp,logPageNumber:cs,logPagePrevious:Xp,logPagerResize:ss,logSearchboxSubmit:Zn,logQuerySuggestionClick:om,logResultsSort:hs,logDislikeSmartSnippet:Gy,logLikeSmartSnippet:By,logOpenSmartSnippetFeedbackModal:Hy,logCloseSmartSnippetFeedbackModal:Wy,logSmartSnippetFeedback:zy,logSmartSnippetDetailedFeedback:Yy,logExpandSmartSnippet:Uy,logCollapseSmartSnippet:_y,logExpandSmartSnippetSuggestion:Ky,logCollapseSmartSnippetSuggestion:Jy,logNoResultsBack:$p,logStaticFilterSelect:zd,logStaticFilterDeselect:Vi,logStaticFilterClearAll:Yd,logTriggerQuery:bl,logUndoTriggerQuery:vl,logNotifyTrigger:wl,logTriggerRedirect:Pl,logTriggerExecute:El}}l();s();u();c();function zL(e){return e.addReducers({}),{deselectAllBreadcrumbs:_e,deselectAllNonBreadcrumbs:Bo}}l();s();u();c();function YL(e){return e.addReducers({configuration:ie}),{disableAnalytics:Vo,enableAnalytics:No,setOriginLevel2:ol,setOriginLevel3:il,updateAnalyticsConfiguration:Sn,updateBasicConfiguration:ir}}l();s();u();c();function KL(e){return e.addReducers({configuration:ie,pipeline:_o,searchHub:ci}),{updateSearchConfiguration:qt}}l();s();u();c();function JL(e){return e.addReducers({context:Jd}),{addContext:_a,removeContext:Ba,setContext:Ua}}l();s();u();c();function XL(e){return e.addReducers({debug:Qo}),{disableDebug:Lo,enableDebug:Cn}}l();s();u();c();function ZL(e){return e.addReducers({dictionaryFieldContext:ep}),{addContext:Li,removeContext:Qi,setContext:Mi}}l();s();u();c();function eQ(e){return e.addReducers({didYouMean:rp,query:ze}),{applyDidYouMeanCorrection:jt,disableDidYouMean:gl,enableDidYouMean:ei,enableAutomaticQueryCorrection:yl,disableAutomaticQueryCorrection:ti,setCorrectionMode:Ca}}l();s();u();c();l();s();u();c();l();s();u();c();var bm=w("excerptLength/set",e=>I(e,new J({min:0,required:!0})));l();s();u();c();function Jw(){return{length:void 0}}var Xw=re(Jw(),e=>{e.addCase(bm,(t,r)=>{t.length=r.payload})});function tQ(e){return e.addReducers({excerptLength:Xw}),{setExcerptLength:bm}}l();s();u();c();function rQ(e){return e.addReducers({facetOptions:He}),{updateFacetOptions:me,enableFacet:ot,disableFacet:ke}}l();s();u();c();function nQ(e){return e.addReducers({automaticFacetSet:np}),{setOptions:Fi,deselectAllAutomaticFacetValues:Ri,toggleSelectAutomaticFacetValue:pr}}l();s();u();c();function aQ(e){return e.addReducers({categoryFacetSet:gr}),{deselectAllCategoryFacetValues:fr,registerCategoryFacet:mr,toggleSelectCategoryFacetValue:jn,updateCategoryFacetNumberOfValues:Oa,updateCategoryFacetSortCriterion:vi,updateFacetAutoSelection:sr,updateCategoryFacetBasePath:Cd}}l();s();u();c();function oQ(e){return e.addReducers({facetSet:Lt}),{deselectAllFacetValues:Te,registerFacet:Ar,toggleSelectFacetValue:xr,toggleExcludeFacetValue:Fr,updateFacetIsFieldExpanded:ja,updateFacetNumberOfValues:qa,updateFacetSortCriterion:ki,updateFreezeCurrentValues:Wr,updateFacetAutoSelection:sr}}l();s();u();c();function iQ(e){return e.addReducers({dateFacetSet:Pr}),{deselectAllDateFacetValues:Od,registerDateFacet:br,toggleSelectDateFacetValue:vr,toggleExcludeDateFacetValue:wr,updateDateFacetSortCriterion:Td,updateDateFacetValues:Jr}}l();s();u();c();function sQ(e){return e.addReducers({numericFacetSet:Qt}),{deselectAllNumericFacetValues:$d,registerNumericFacet:Er,toggleSelectNumericFacetValue:Ir,toggleExcludeNumericFacetValue:kr,updateNumericFacetSortCriterion:Gd,updateNumericFacetValues:Xr}}l();s();u();c();function cQ(e){return e.addReducers({fields:Xn}),{registerFieldsToInclude:Jn,enableFetchAllFields:Ji,disableFetchAllFields:Ha,fetchFieldsDescription:Xi}}l();s();u();c();function uQ(e){return e.addReducers({folding:Np}),{registerFolding:Wn,loadCollection:zn}}l();s();u();c();function lQ(e){return e.addReducers({generatedAnswer:ts}),{generateAnswer:pd,resetAnswer:Ct,setAnswerGenerationMode:td}}l();s();u();c();function dQ(e){return e.addReducers({history:Wp,facetOrder:ns}),{back:gc,forward:ul}}l();s();u();c();function pQ(e){return e.addReducers({instantResults:Yp}),{registerInstantResults:Go,updateInstantResultsQuery:cr,clearExpiredResults:$o}}l();s();u();c();function mQ(e){return e.addReducers({pagination:Bt}),{nextPage:Yo,previousPage:Ko,registerNumberOfResults:Ho,registerPage:zo,updateNumberOfResults:Wo,updatePage:ur}}l();s();u();c();function fQ(e){return e.addReducers({pipeline:_o}),{setPipeline:Uo}}l();s();u();c();function gQ(e){return e.addReducers({query:ze}),{updateQuery:nt}}l();s();u();c();function yQ(e){return e.addReducers({querySet:ea}),{registerQuerySetQuery:gs,updateQuerySetQuery:Ja}}l();s();u();c();function hQ(e){return e.addReducers({querySuggest:ys,querySet:ea}),{clearQuerySuggest:Yn,fetchQuerySuggestions:Kn,registerQuerySuggest:Ki,selectQuerySuggestion:Or}}l();s();u();c();function SQ(e){return e.addReducers({questionAnswering:jr}),{collapseSmartSnippet:Fs,expandSmartSnippet:xs,dislikeSmartSnippet:bs,likeSmartSnippet:Rs,openFeedbackModal:vs,closeFeedbackModal:ta,expandSmartSnippetRelatedQuestion:ws,collapseSmartSnippetRelatedQuestion:Ps}}l();s();u();c();function CQ(e){return e.addReducers({recentQueries:tm}),{registerRecentQueries:Ka,clearRecentQueries:fs}}l();s();u();c();function AQ(e){return e.addReducers({recentResults:rm}),{registerRecentResults:as,clearRecentResults:os,pushRecentResult:_t}}l();s();u();c();function xQ(e){return e.addReducers({resultPreview:em}),{fetchResultContent:Ya,updateContentURL:ms,nextPreview:ls,previousPreview:ds,preparePreviewPagination:ps}}l();s();u();c();l();s();u();c();var FQ=new ue({content:new be({required:!0}),conditions:new be({required:!0}),priority:new J({required:!1,default:0,min:0}),fields:new te({required:!1,each:L})});function Zw(){let e=[],t=r=>{let n=FQ.validate(r);if(!r.conditions.every(o=>o instanceof Function))throw new Us("Each template condition should be a function that takes a Result or Product as an argument and returns a boolean");return n};return{registerTemplates(...r){r.forEach(n=>{let a={...t(n),fields:n.fields||[]};e.push(a)}),e.sort((n,a)=>a.priority-n.priority)},selectTemplate(r){let n=e.find(a=>a.conditions.every(o=>o(r)));return n?n.content:null},selectLinkTemplate(r){let n=e.find(a=>a.conditions.every(o=>o(r)));return n?n.linkContent:null}}}function eP(e){if(!RQ(e))throw W;let{registerTemplates:t,selectTemplate:r,selectLinkTemplate:n}=Zw();return{registerTemplates:(...a)=>{t(...a);let o=[];a.forEach(d=>{d.fields&&o.push(...d.fields)}),e.dispatch(Jn(o))},selectTemplate:r,selectLinkTemplate:n}}function RQ(e){return e.addReducers({fields:Xn}),!0}l();s();u();c();function bQ(e){return e.addReducers({search:ce}),{executeSearch:qA,fetchMoreResults:DA,fetchFacetValues:VA,fetchPage:jA,fetchInstantResults:NA}}l();s();u();c();function vQ(e){return e.addReducers({searchHub:ci}),{setSearchHub:si}}l();s();u();c();function wQ(e){return e.addReducers({facetOrder:ns,facetSet:Lt,pagination:Bt,query:ze,querySet:ea}),{restoreSearchParameters:xe,restoreTab:Mo}}l();s();u();c();function PQ(e){return e.addReducers({sortCriteria:gm}),{registerSortCriterion:Es,updateSortCriterion:Is}}l();s();u();c();function EQ(e){return e.addReducers({standaloneSearchBoxSet:hm}),{registerStandaloneSearchBox:ks,fetchRedirectUrl:ra,updateStandaloneSearchBoxRedirectionUrl:Ts,updateAnalyticsToSearchFromLink:qs,updateAnalyticsToOmniboxFromLink:js,resetStandaloneSearchBox:Os}}l();s();u();c();function IQ(e){return e.addReducers({staticFilterSet:Sm}),{registerStaticFilter:Di,toggleSelectStaticFilterValue:Zr,toggleExcludeStaticFilterValue:en,deselectAllStaticFilterValues:Mn}}l();s();u();c();function kQ(e){return e.addReducers({tabSet:Ni}),{registerTab:Ci,updateActiveTab:Kt}}l();s();u();c();function TQ(e){let{by:t,order:r}=e;switch(t){case"relevancy":return Oo();case"qre":return Ju();case"nosort":return Xu();case"date":if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return Yu(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return Ku(t,r)}}function OQ(e){return e===void 0||e==="ascending"||e==="descending"}function tP(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map(n=>{let a=n.trim().split(" "),o=a[0].toLowerCase(),d=a[1]?.toLowerCase();if(a.length>2||o==="")throw r;if(!OQ(d))throw new Error(`Wrong criterion sort order "${d}" in expression "${e}". Order should either be "ascending" or "descending"`);return TQ({by:o,order:d})})}l();s();u();c();l();s();u();c();l();s();u();c();function Ye(e){return e.negate?"NOT ":""}l();s();u();c();function $t(e){return{contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="}[e]}function rP(e){return{toQuerySyntax(){let{field:t,value:r}=e,n=$t(e.operator);return`${Ye(e)}@${t}${n}${r}`}}}l();s();u();c();function nP(e){return{toQuerySyntax(){let t=Ye(e),{field:r,from:n,to:a}=e,o=$t("isExactly");return`${t}@${r}${o}${n}..${a}`}}}l();s();u();c();function aP(e){return{toQuerySyntax(){let t=Ye(e),{expression:r}=e;return`${t}"${r}"`}}}l();s();u();c();function oP(e){return{toQuerySyntax(){let t=Ye(e),{field:r}=e;return`${t}@${r}`}}}l();s();u();c();function iP(e){return{toQuerySyntax(){let{expression:t,negate:r}=e;return r?`NOT (${t})`:t}}}l();s();u();c();function sP(e){return{toQuerySyntax(){let t=Ye(e),{startTerm:r,otherTerms:n}=e,a=qQ(n),o=`${r} ${a}`;return e.negate?`${t}(${o})`:o}}}function qQ(e){return e.map(t=>{let{endTerm:r,maxKeywordsBetween:n}=t;return`near:${n} ${r}`}).join(" ")}l();s();u();c();function cP(e){return{toQuerySyntax(){let{field:t,value:r}=e,n=Ye(e),a=$t(e.operator);return`${n}@${t}${a}${r}`}}}l();s();u();c();function uP(e){return{toQuerySyntax(){let t=Ye(e),{field:r,from:n,to:a}=e,o=$t("isExactly");return`${t}@${r}${o}${n}..${a}`}}}l();s();u();c();function lP(e){return{toQuerySyntax(){let{name:t,parameters:r}=e,n=jQ(r);return`$${t}(${n})`}}}function jQ(e){return Object.entries(e).map(t=>{let[r,n]=t,a=typeof n=="string"?n:n.toQuerySyntax();return`${r}: ${a}`}).join(", ")}l();s();u();c();function dP(e){return{toQuerySyntax(){let t=Ye(e),{field:r,operator:n,value:a}=e,o=$t(n),d=n==="fuzzyMatch"?` $quoteVar(value: ${a})`:`("${a}")`;return`${t}@${r}${o}${d}`}}}l();s();u();c();function pP(e){return{toQuerySyntax(){let{field:t}=e,r=Ye(e),n=$t(e.operator),a=e.values.map(d=>`"${d}"`),o=a.length===1?a[0]:`(${a.join(",")})`;return`${r}@${t}${n}${o}`}}}function DQ(){let e=[],t="and";return{addExpression(r){return e.push(r),this},addKeyword(r){return e.push(iP(r)),this},addNear(r){return e.push(sP(r)),this},addExactMatch(r){return e.push(aP(r)),this},addFieldExists(r){return e.push(oP(r)),this},addStringField(r){return e.push(pP(r)),this},addStringFacetField(r){return e.push(dP(r)),this},addNumericField(r){return e.push(cP(r)),this},addNumericRangeField(r){return e.push(uP(r)),this},addDateField(r){return e.push(rP(r)),this},addDateRangeField(r){return e.push(nP(r)),this},addQueryExtension(r){return e.push(lP(r)),this},joinUsing(r){return t=r,this},toQuerySyntax(){let r=VQ(t),n=e.map(a=>a.toQuerySyntax()).join(`) ${r} (`);return e.length<=1?n:`(${n})`}}}function VQ(e){return e==="and"?"AND":"OR"}
/**
 * @license
 *
 * Copyright 2026 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

if(__exports != exports)module.exports = exports;return module.exports}));
//# sourceMappingURL=headless.js.map
