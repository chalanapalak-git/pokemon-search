/**
 * @license
 *
 * Copyright 2026 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(g,f){if(typeof exports=="object"&&typeof module<"u"){module.exports=f(require)}else if("function"==typeof define && define.amd){define("CoveoHeadlessCaseAssist",["crypto"],function(_d_0){var d={"crypto": _d_0},r=function(m){if(m in d) return d[m];if(typeof require=="function") return require(m);throw new Error("Cannot find module '"+m+"'")};return f(r)})}else {var gN={"crypto":"crypto"},gReq=function(r){var mod = r in gN ? g[gN[r]] : g[r]; return mod };g["CoveoHeadlessCaseAssist"]=f(gReq)}}(typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : this,function(require){var exports={};var __exports=exports;var module={exports};
"use strict";var Qf=Object.create;var Tr=Object.defineProperty;var Bf=Object.getOwnPropertyDescriptor;var $f=Object.getOwnPropertyNames;var Hf=Object.getPrototypeOf,Gf=Object.prototype.hasOwnProperty;var zf=(e,t,r)=>t in e?Tr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Dr=(e,t)=>()=>(e&&(t=e(e=0)),t);var ye=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Wf=(e,t)=>{for(var r in t)Tr(e,r,{get:t[r],enumerable:!0})},Ha=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of $f(t))!Gf.call(e,i)&&i!==r&&Tr(e,i,{get:()=>t[i],enumerable:!(n=Bf(t,i))||n.enumerable});return e};var _e=(e,t,r)=>(r=e!=null?Qf(Hf(e)):{},Ha(t||!e||!e.__esModule?Tr(r,"default",{value:e,enumerable:!0}):r,e)),Yf=e=>Ha(Tr({},"__esModule",{value:!0}),e);var se=(e,t,r)=>zf(e,typeof t!="symbol"?t+"":t,r);var A,l=Dr(()=>{"use strict";A=typeof globalThis<"u"?globalThis:window});function Cn(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Cn=function(t){return typeof t}:Cn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cn(e)}function Xf(){"navigator"in this||(this.navigator={}),typeof this.navigator.sendBeacon!="function"&&(this.navigator.sendBeacon=Zf.bind(this))}function Zf(e,t){var r=this.event&&this.event.type,n=r==="unload"||r==="beforeunload",i="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.open("POST",e,!n),i.withCredentials=!0,i.setRequestHeader("Accept","*/*"),Kf(t)?(i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),i.responseType="text"):Jf(t)&&t.type&&i.setRequestHeader("Content-Type",t.type);try{i.send(t)}catch{return!1}return!0}var Kf,Jf,d=Dr(()=>{"use strict";Kf=function(t){return typeof t=="string"},Jf=function(t){return t instanceof Blob};Xf.call((typeof window>"u"?"undefined":Cn(window))==="object"?window:{})});var ho=ye(qr=>{"use strict";f();l();p();d();Object.defineProperty(qr,"__esModule",{value:!0});function Ga(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tg(e,t,r){return t=Qt(t),ng(e,Ka()?Reflect.construct(t,r||[],Qt(e).constructor):t.apply(e,r))}function go(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function za(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ag(n.key),n)}}function mo(e,t,r){return t&&za(e.prototype,t),r&&za(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wa(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=cg(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,g=!1;return{s:function(){r=r.call(e)},n:function(){var u=r.next();return s=u.done,u},e:function(u){g=!0,o=u},f:function(){try{s||r.return==null||r.return()}finally{if(g)throw o}}}}function po(){return po=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=ig(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},po.apply(null,arguments)}function Qt(e){return Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qt(e)}function rg(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fo(e,t)}function Ka(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ka=function(){return!!e})()}function ng(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eg(e)}function fo(e,t){return fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},fo(e,t)}function ig(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=Qt(e))!==null;);return e}function og(e,t,r,n){var i=po(Qt(1&n?e.prototype:e),t,r);return 2&n&&typeof i=="function"?function(o){return i.apply(r,o)}:i}function sg(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ag(e){var t=sg(e,"string");return typeof t=="symbol"?t:t+""}function cg(e,t){if(e){if(typeof e=="string")return Ga(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ga(e,t):void 0}}(function(e){return{NativeAbortSignal:e.AbortSignal,NativeAbortController:e.AbortController}})(typeof self<"u"?self:global);function ug(e){var t;try{t=new Event("abort")}catch{typeof document<"u"?document.createEvent?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):(t=document.createEventObject(),t.type="abort"):t={type:"abort",bubbles:!1,cancelable:!1}}return t.reason=e,t}function lg(e){if(e===void 0)if(typeof document>"u")e=new Error("This operation was aborted"),e.name="AbortError";else try{e=new DOMException("signal is aborted without reason"),Object.defineProperty(e,"name",{value:"AbortError"})}catch{e=new Error("This operation was aborted"),e.name="AbortError"}return e}var Ya=function(){function e(){go(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return mo(e,[{key:"addEventListener",value:function(r,n,i){r in this.listeners||(this.listeners[r]=[]),this.listeners[r].push({callback:n,options:i})}},{key:"removeEventListener",value:function(r,n){if(r in this.listeners){for(var i=this.listeners[r],o=0,s=i.length;o<s;o++)if(i[o].callback===n){i.splice(o,1);return}}}},{key:"dispatchEvent",value:function(r){var n=this;if(r.type in this.listeners){for(var i=this.listeners[r.type],o=i.slice(),s=function(){var m=o[g];try{m.callback.call(n,r)}catch(h){Promise.resolve().then(function(){throw h})}m.options&&m.options.once&&n.removeEventListener(r.type,m.callback)},g=0,u=o.length;g<u;g++)s();return!r.defaultPrevented}}}])}(),yo=function(e){function t(){var r;return go(this,t),r=tg(this,t),r.listeners||Ya.call(r),Object.defineProperty(r,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(r,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(r,"reason",{value:void 0,writable:!0,configurable:!0}),r}return rg(t,e),mo(t,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(n){n.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,n)),og(t,"dispatchEvent",this,3)([n])}},{key:"throwIfAborted",value:function(){var n=this.aborted,i=this.reason,o=i===void 0?"Aborted":i;if(n)throw o}}],[{key:"timeout",value:function(n){var i=new bn;return setTimeout(function(){return i.abort(new DOMException("This signal is timeout in ".concat(n,"ms"),"TimeoutError"))},n),i.signal}},{key:"any",value:function(n){var i=new bn;function o(){i.abort(this.reason),s()}function s(){var m=Wa(n),h;try{for(m.s();!(h=m.n()).done;){var S=h.value;S.removeEventListener("abort",o)}}catch(y){m.e(y)}finally{m.f()}}var g=Wa(n),u;try{for(g.s();!(u=g.n()).done;){var a=u.value;if(a.aborted){i.abort(a.reason);break}else a.addEventListener("abort",o)}}catch(m){g.e(m)}finally{g.f()}return i.signal}}])}(Ya),bn=function(){function e(){go(this,e),Object.defineProperty(this,"signal",{value:new yo,writable:!0,configurable:!0})}return mo(e,[{key:"abort",value:function(r){var n=lg(r),i=ug(n);this.signal.reason=n,this.signal.dispatchEvent(i)}},{key:"toString",value:function(){return"[object AbortController]"}}])}();typeof Symbol<"u"&&Symbol.toStringTag&&(bn.prototype[Symbol.toStringTag]="AbortController",yo.prototype[Symbol.toStringTag]="AbortSignal");function dg(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof e.Request=="function"&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}function pg(e){typeof e=="function"&&(e={fetch:e});var t=e,r=t.fetch,n=t.Request,i=n===void 0?r.Request:n,o=t.AbortController,s=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,g=s===void 0?!1:s;if(!dg({fetch:r,Request:i,AbortController:o,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:g}))return{fetch:r,Request:u};var u=i;(u&&!u.prototype.hasOwnProperty("signal")||g)&&(u=function(S,y){var v;y&&y.signal&&(v=y.signal,delete y.signal);var R=new i(S,y);return v&&Object.defineProperty(R,"signal",{writable:!1,enumerable:!1,configurable:!0,value:v}),R},u.prototype=i.prototype);var a=r,m=function(S,y){var v=u&&u.prototype.isPrototypeOf(S)?S.signal:y?y.signal:void 0;if(v){var R;try{R=new DOMException("Aborted","AbortError")}catch{R=new Error("Aborted"),R.name="AbortError"}if(v.aborted)return Promise.reject(R);var I=new Promise(function(b,P){v.addEventListener("abort",function(){return P(R)},{once:!0})});return y&&y.signal&&delete y.signal,Promise.race([I,a(S,y)])}return a(S,y)};return{fetch:m,Request:u}}qr.AbortController=bn;qr.AbortSignal=yo;qr.abortableFetch=pg});var Ja,c,w,p=Dr(()=>{"use strict";Ja=_e(ho(),1),c=_e(ho(),1),{fetch:w}=(0,Ja.abortableFetch)({fetch})});function jr(e){if(Cg.test(e)||e.trim()==="")throw new TypeError("Invalid character in header field name");return e.trim().toLowerCase()}function So(e){return e.replace(bg,"")}function Mr(e){if(typeof e!="string"||e.length===0)return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r>127||!xg(r))return!1}return!0}function xg(e){return![127,32,"(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"].includes(e)}function Za(e){if(typeof e!="string"||e.trim()!==e)return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r===0||r===10||r===13)return!1}return!0}var fg,ic,gg,oc,mg,yg,hg,Sg,vg,Ag,wg,Cg,Xa,bg,Bt,vo,ec,tc,rc,nc,C,ac=Dr(()=>{"use strict";f();l();p();d();fg=Object.create,ic=Object.defineProperty,gg=Object.getOwnPropertyDescriptor,oc=Object.getOwnPropertyNames,mg=Object.getPrototypeOf,yg=Object.prototype.hasOwnProperty,hg=(e,t)=>function(){return t||(0,e[oc(e)[0]])((t={exports:{}}).exports,t),t.exports},Sg=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of oc(t))!yg.call(e,i)&&i!==r&&ic(e,i,{get:()=>t[i],enumerable:!(n=gg(t,i))||n.enumerable});return e},vg=(e,t,r)=>(r=e!=null?fg(mg(e)):{},Sg(t||!e||!e.__esModule?ic(r,"default",{value:e,enumerable:!0}):r,e)),Ag=hg({"node_modules/set-cookie-parser/lib/set-cookie.js"(e,t){"use strict";var r={decodeValues:!0,map:!1,silent:!1};function n(u){return typeof u=="string"&&!!u.trim()}function i(u,a){var m=u.split(";").filter(n),h=m.shift(),S=o(h),y=S.name,v=S.value;a=a?Object.assign({},r,a):r;try{v=a.decodeValues?decodeURIComponent(v):v}catch(I){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+v+"'. Set options.decodeValues to false to disable this feature.",I)}var R={name:y,value:v};return m.forEach(function(I){var b=I.split("="),P=b.shift().trimLeft().toLowerCase(),x=b.join("=");P==="expires"?R.expires=new Date(x):P==="max-age"?R.maxAge=parseInt(x,10):P==="secure"?R.secure=!0:P==="httponly"?R.httpOnly=!0:P==="samesite"?R.sameSite=x:R[P]=x}),R}function o(u){var a="",m="",h=u.split("=");return h.length>1?(a=h.shift(),m=h.join("=")):m=u,{name:a,value:m}}function s(u,a){if(a=a?Object.assign({},r,a):r,!u)return a.map?{}:[];if(u.headers)if(typeof u.headers.getSetCookie=="function")u=u.headers.getSetCookie();else if(u.headers["set-cookie"])u=u.headers["set-cookie"];else{var m=u.headers[Object.keys(u.headers).find(function(S){return S.toLowerCase()==="set-cookie"})];!m&&u.headers.cookie&&!a.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),u=m}if(Array.isArray(u)||(u=[u]),a=a?Object.assign({},r,a):r,a.map){var h={};return u.filter(n).reduce(function(S,y){var v=i(y,a);return S[v.name]=v,S},h)}else return u.filter(n).map(function(S){return i(S,a)})}function g(u){if(Array.isArray(u))return u;if(typeof u!="string")return[];var a=[],m=0,h,S,y,v,R;function I(){for(;m<u.length&&/\s/.test(u.charAt(m));)m+=1;return m<u.length}function b(){return S=u.charAt(m),S!=="="&&S!==";"&&S!==","}for(;m<u.length;){for(h=m,R=!1;I();)if(S=u.charAt(m),S===","){for(y=m,m+=1,I(),v=m;m<u.length&&b();)m+=1;m<u.length&&u.charAt(m)==="="?(R=!0,m=v,a.push(u.substring(h,y)),h=m):m=y+1}else m+=1;(!R||m>=u.length)&&a.push(u.substring(h,u.length))}return a}t.exports=s,t.exports.parse=s,t.exports.parseString=i,t.exports.splitCookiesString=g}}),wg=vg(Ag()),Cg=/[^a-z0-9\-#$%&'*+.^_`|~]/i;Xa=[`
`,"\r","	"," "],bg=new RegExp(`(^[${Xa.join("")}]|$[${Xa.join("")}])`,"g");Bt=Symbol("normalizedHeaders"),vo=Symbol("rawHeaderNames"),ec=", ",C=class sc{constructor(t){this[tc]={},this[rc]=new Map,this[nc]="Headers",["Headers","HeadersPolyfill"].includes(t?.constructor.name)||t instanceof sc||typeof A.Headers<"u"&&t instanceof A.Headers?t.forEach((n,i)=>{this.append(i,n)},this):Array.isArray(t)?t.forEach(([r,n])=>{this.append(r,Array.isArray(n)?n.join(ec):n)}):t&&Object.getOwnPropertyNames(t).forEach(r=>{let n=t[r];this.append(r,Array.isArray(n)?n.join(ec):n)})}[(tc=Bt,rc=vo,nc=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}*keys(){for(let[t]of this.entries())yield t}*values(){for(let[,t]of this.entries())yield t}*entries(){let t=Object.keys(this[Bt]).sort((r,n)=>r.localeCompare(n));for(let r of t)if(r==="set-cookie")for(let n of this.getSetCookie())yield[r,n];else yield[r,this.get(r)]}has(t){if(!Mr(t))throw new TypeError(`Invalid header name "${t}"`);return this[Bt].hasOwnProperty(jr(t))}get(t){if(!Mr(t))throw TypeError(`Invalid header name "${t}"`);return this[Bt][jr(t)]??null}set(t,r){if(!Mr(t)||!Za(r))return;let n=jr(t),i=So(r);this[Bt][n]=So(i),this[vo].set(n,t)}append(t,r){if(!Mr(t)||!Za(r))return;let n=jr(t),i=So(r),o=this.has(n)?`${this.get(n)}, ${i}`:i;this.set(t,o)}delete(t){if(!Mr(t)||!this.has(t))return;let r=jr(t);delete this[Bt][r],this[vo].delete(r)}forEach(t,r){for(let[n,i]of this.entries())t.call(r,i,n,this)}getSetCookie(){let t=this.get("set-cookie");return t===null?[]:t===""?[""]:(0,wg.splitCookiesString)(t)}}});var f=Dr(()=>{"use strict";ac()});var cc=ye(Nr=>{"use strict";f();l();p();d();var xn=Nr&&Nr.__assign||function(){return xn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xn.apply(this,arguments)};Object.defineProperty(Nr,"__esModule",{value:!0});var Rg={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function Eg(e){var t=xn(xn({},Rg),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}Nr.getSanitizedOptions=Eg});var uc=ye(Ao=>{"use strict";f();l();p();d();Object.defineProperty(Ao,"__esModule",{value:!0});function Ig(e){var t=Math.random()*e;return Math.round(t)}Ao.fullJitter=Ig});var lc=ye(wo=>{"use strict";f();l();p();d();Object.defineProperty(wo,"__esModule",{value:!0});function kg(e){return e}wo.noJitter=kg});var dc=ye(Co=>{"use strict";f();l();p();d();Object.defineProperty(Co,"__esModule",{value:!0});var Pg=uc(),Fg=lc();function Og(e){switch(e.jitter){case"full":return Pg.fullJitter;case"none":default:return Fg.noJitter}}Co.JitterFactory=Og});var xo=ye(bo=>{"use strict";f();l();p();d();Object.defineProperty(bo,"__esModule",{value:!0});var Tg=dc(),Dg=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=Tg.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,n=this.numOfDelayedAttempts,i=t*Math.pow(r,n);return Math.min(i,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();bo.Delay=Dg});var pc=ye(Ze=>{"use strict";f();l();p();d();var qg=Ze&&Ze.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jg=Ze&&Ze.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function g(m){try{a(n.next(m))}catch(h){s(h)}}function u(m){try{a(n.throw(m))}catch(h){s(h)}}function a(m){m.done?o(m.value):i(m.value).then(g,u)}a((n=n.apply(e,t||[])).next())})},Mg=Ze&&Ze.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function g(a){return function(m){return u([a,m])}}function u(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(m){a=[6,m],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(Ze,"__esModule",{value:!0});var Ng=xo(),_g=function(e){qg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return jg(this,void 0,void 0,function(){return Mg(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(Ng.Delay);Ze.SkipFirstDelay=_g});var fc=ye(_r=>{"use strict";f();l();p();d();var Ug=_r&&_r.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(_r,"__esModule",{value:!0});var Lg=xo(),Vg=function(e){Ug(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Lg.Delay);_r.AlwaysDelay=Vg});var gc=ye(Ro=>{"use strict";f();l();p();d();Object.defineProperty(Ro,"__esModule",{value:!0});var Qg=pc(),Bg=fc();function $g(e,t){var r=Hg(e);return r.setAttemptNumber(t),r}Ro.DelayFactory=$g;function Hg(e){return e.delayFirstAttempt?new Bg.AlwaysDelay(e):new Qg.SkipFirstDelay(e)}});var mc=ye(Ct=>{"use strict";f();l();p();d();var Eo=Ct&&Ct.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function g(m){try{a(n.next(m))}catch(h){s(h)}}function u(m){try{a(n.throw(m))}catch(h){s(h)}}function a(m){m.done?o(m.value):i(m.value).then(g,u)}a((n=n.apply(e,t||[])).next())})},Io=Ct&&Ct.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function g(a){return function(m){return u([a,m])}}function u(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(m){a=[6,m],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(Ct,"__esModule",{value:!0});var Gg=cc(),zg=gc();function Wg(e,t){return t===void 0&&(t={}),Eo(this,void 0,void 0,function(){var r,n;return Io(this,function(i){switch(i.label){case 0:return r=Gg.getSanitizedOptions(t),n=new Yg(e,r),[4,n.execute()];case 1:return[2,i.sent()]}})})}Ct.backOff=Wg;var Yg=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return Eo(this,void 0,void 0,function(){var t,r;return Io(this,function(n){switch(n.label){case 0:if(this.attemptLimitReached)return[3,7];n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return n.sent(),[4,this.request()];case 3:return[2,n.sent()];case 4:return t=n.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=n.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return Eo(this,void 0,void 0,function(){var t;return Io(this,function(r){switch(r.label){case 0:return t=zg.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var Li=ye((na,ia)=>{"use strict";f();l();p();d();(function(e,t){typeof na=="object"&&typeof ia<"u"?ia.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof A<"u"?A:e||self).dayjs=t()})(na,function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",o="minute",s="hour",g="day",u="week",a="month",m="quarter",h="year",S="date",y="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,I={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(V){var U=["th","st","nd","rd"],N=V%100;return"["+V+(U[(N-20)%10]||U[N]||U[0])+"]"}},b=function(V,U,N){var Q=String(V);return!Q||Q.length>=U?V:""+Array(U+1-Q.length).join(N)+V},P={s:b,z:function(V){var U=-V.utcOffset(),N=Math.abs(U),Q=Math.floor(N/60),L=N%60;return(U<=0?"+":"-")+b(Q,2,"0")+":"+b(L,2,"0")},m:function V(U,N){if(U.date()<N.date())return-V(N,U);var Q=12*(N.year()-U.year())+(N.month()-U.month()),L=U.clone().add(Q,a),$=N-L<0,H=U.clone().add(Q+($?-1:1),a);return+(-(Q+(N-L)/($?L-H:H-L))||0)},a:function(V){return V<0?Math.ceil(V)||0:Math.floor(V)},p:function(V){return{M:a,y:h,w:u,d:g,D:S,h:s,m:o,s:i,ms:n,Q:m}[V]||String(V||"").toLowerCase().replace(/s$/,"")},u:function(V){return V===void 0}},x="en",E={};E[x]=I;var j="$isDayjsObject",O=function(V){return V instanceof M||!(!V||!V[j])},k=function V(U,N,Q){var L;if(!U)return x;if(typeof U=="string"){var $=U.toLowerCase();E[$]&&(L=$),N&&(E[$]=N,L=$);var H=U.split("-");if(!L&&H.length>1)return V(H[0])}else{var z=U.name;E[z]=U,L=z}return!Q&&L&&(x=L),L||!Q&&x},F=function(V,U){if(O(V))return V.clone();var N=typeof U=="object"?U:{};return N.date=V,N.args=arguments,new M(N)},T=P;T.l=k,T.i=O,T.w=function(V,U){return F(V,{locale:U.$L,utc:U.$u,x:U.$x,$offset:U.$offset})};var M=function(){function V(N){this.$L=k(N.locale,null,!0),this.parse(N),this.$x=this.$x||N.x||{},this[j]=!0}var U=V.prototype;return U.parse=function(N){this.$d=function(Q){var L=Q.date,$=Q.utc;if(L===null)return new Date(NaN);if(T.u(L))return new Date;if(L instanceof Date)return new Date(L);if(typeof L=="string"&&!/Z$/i.test(L)){var H=L.match(v);if(H){var z=H[2]-1||0,Z=(H[7]||"0").substring(0,3);return $?new Date(Date.UTC(H[1],z,H[3]||1,H[4]||0,H[5]||0,H[6]||0,Z)):new Date(H[1],z,H[3]||1,H[4]||0,H[5]||0,H[6]||0,Z)}}return new Date(L)}(N),this.init()},U.init=function(){var N=this.$d;this.$y=N.getFullYear(),this.$M=N.getMonth(),this.$D=N.getDate(),this.$W=N.getDay(),this.$H=N.getHours(),this.$m=N.getMinutes(),this.$s=N.getSeconds(),this.$ms=N.getMilliseconds()},U.$utils=function(){return T},U.isValid=function(){return this.$d.toString()!==y},U.isSame=function(N,Q){var L=F(N);return this.startOf(Q)<=L&&L<=this.endOf(Q)},U.isAfter=function(N,Q){return F(N)<this.startOf(Q)},U.isBefore=function(N,Q){return this.endOf(Q)<F(N)},U.$g=function(N,Q,L){return T.u(N)?this[Q]:this.set(L,N)},U.unix=function(){return Math.floor(this.valueOf()/1e3)},U.valueOf=function(){return this.$d.getTime()},U.startOf=function(N,Q){var L=this,$=!!T.u(Q)||Q,H=T.p(N),z=function(oe,ce){var pe=T.w(L.$u?Date.UTC(L.$y,ce,oe):new Date(L.$y,ce,oe),L);return $?pe:pe.endOf(g)},Z=function(oe,ce){return T.w(L.toDate()[oe].apply(L.toDate("s"),($?[0,0,0,0]:[23,59,59,999]).slice(ce)),L)},ne=this.$W,X=this.$M,ee=this.$D,J="set"+(this.$u?"UTC":"");switch(H){case h:return $?z(1,0):z(31,11);case a:return $?z(1,X):z(0,X+1);case u:var te=this.$locale().weekStart||0,le=(ne<te?ne+7:ne)-te;return z($?ee-le:ee+(6-le),X);case g:case S:return Z(J+"Hours",0);case s:return Z(J+"Minutes",1);case o:return Z(J+"Seconds",2);case i:return Z(J+"Milliseconds",3);default:return this.clone()}},U.endOf=function(N){return this.startOf(N,!1)},U.$set=function(N,Q){var L,$=T.p(N),H="set"+(this.$u?"UTC":""),z=(L={},L[g]=H+"Date",L[S]=H+"Date",L[a]=H+"Month",L[h]=H+"FullYear",L[s]=H+"Hours",L[o]=H+"Minutes",L[i]=H+"Seconds",L[n]=H+"Milliseconds",L)[$],Z=$===g?this.$D+(Q-this.$W):Q;if($===a||$===h){var ne=this.clone().set(S,1);ne.$d[z](Z),ne.init(),this.$d=ne.set(S,Math.min(this.$D,ne.daysInMonth())).$d}else z&&this.$d[z](Z);return this.init(),this},U.set=function(N,Q){return this.clone().$set(N,Q)},U.get=function(N){return this[T.p(N)]()},U.add=function(N,Q){var L,$=this;N=Number(N);var H=T.p(Q),z=function(X){var ee=F($);return T.w(ee.date(ee.date()+Math.round(X*N)),$)};if(H===a)return this.set(a,this.$M+N);if(H===h)return this.set(h,this.$y+N);if(H===g)return z(1);if(H===u)return z(7);var Z=(L={},L[o]=t,L[s]=r,L[i]=e,L)[H]||1,ne=this.$d.getTime()+N*Z;return T.w(ne,this)},U.subtract=function(N,Q){return this.add(-1*N,Q)},U.format=function(N){var Q=this,L=this.$locale();if(!this.isValid())return L.invalidDate||y;var $=N||"YYYY-MM-DDTHH:mm:ssZ",H=T.z(this),z=this.$H,Z=this.$m,ne=this.$M,X=L.weekdays,ee=L.months,J=L.meridiem,te=function(ce,pe,Re,De){return ce&&(ce[pe]||ce(Q,$))||Re[pe].slice(0,De)},le=function(ce){return T.s(z%12||12,ce,"0")},oe=J||function(ce,pe,Re){var De=ce<12?"AM":"PM";return Re?De.toLowerCase():De};return $.replace(R,function(ce,pe){return pe||function(Re){switch(Re){case"YY":return String(Q.$y).slice(-2);case"YYYY":return T.s(Q.$y,4,"0");case"M":return ne+1;case"MM":return T.s(ne+1,2,"0");case"MMM":return te(L.monthsShort,ne,ee,3);case"MMMM":return te(ee,ne);case"D":return Q.$D;case"DD":return T.s(Q.$D,2,"0");case"d":return String(Q.$W);case"dd":return te(L.weekdaysMin,Q.$W,X,2);case"ddd":return te(L.weekdaysShort,Q.$W,X,3);case"dddd":return X[Q.$W];case"H":return String(z);case"HH":return T.s(z,2,"0");case"h":return le(1);case"hh":return le(2);case"a":return oe(z,Z,!0);case"A":return oe(z,Z,!1);case"m":return String(Z);case"mm":return T.s(Z,2,"0");case"s":return String(Q.$s);case"ss":return T.s(Q.$s,2,"0");case"SSS":return T.s(Q.$ms,3,"0");case"Z":return H}return null}(ce)||H.replace(":","")})},U.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},U.diff=function(N,Q,L){var $,H=this,z=T.p(Q),Z=F(N),ne=(Z.utcOffset()-this.utcOffset())*t,X=this-Z,ee=function(){return T.m(H,Z)};switch(z){case h:$=ee()/12;break;case a:$=ee();break;case m:$=ee()/3;break;case u:$=(X-ne)/6048e5;break;case g:$=(X-ne)/864e5;break;case s:$=X/r;break;case o:$=X/t;break;case i:$=X/e;break;default:$=X}return L?$:T.a($)},U.daysInMonth=function(){return this.endOf(a).$D},U.$locale=function(){return E[this.$L]},U.locale=function(N,Q){if(!N)return this.$L;var L=this.clone(),$=k(N,Q,!0);return $&&(L.$L=$),L},U.clone=function(){return T.w(this.$d,this)},U.toDate=function(){return new Date(this.valueOf())},U.toJSON=function(){return this.isValid()?this.toISOString():null},U.toISOString=function(){return this.$d.toISOString()},U.toString=function(){return this.$d.toUTCString()},V}(),B=M.prototype;return F.prototype=B,[["$ms",n],["$s",i],["$m",o],["$H",s],["$W",g],["$M",a],["$y",h],["$D",S]].forEach(function(V){B[V[1]]=function(U){return this.$g(U,V[0],V[1])}}),F.extend=function(V,U){return V.$i||(V(U,M,F),V.$i=!0),F},F.locale=k,F.isDayjs=O,F.unix=function(V){return F(1e3*V)},F.en=E[x],F.Ls=E,F.p={},F})});var Ud=ye((oa,sa)=>{"use strict";f();l();p();d();(function(e,t){typeof oa=="object"&&typeof sa<"u"?sa.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof A<"u"?A:e||self).dayjs_plugin_quarterOfYear=t()})(oa,function(){"use strict";var e="month",t="quarter";return function(r,n){var i=n.prototype;i.quarter=function(g){return this.$utils().u(g)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(g-1))};var o=i.add;i.add=function(g,u){return g=Number(g),this.$utils().p(u)===t?this.add(3*g,e):o.bind(this)(g,u)};var s=i.startOf;i.startOf=function(g,u){var a=this.$utils(),m=!!a.u(u)||u;if(a.p(g)===t){var h=this.quarter()-1;return m?this.month(3*h).startOf(e).startOf("day"):this.month(3*h+2).endOf(e).endOf("day")}return s.bind(this)(g,u)}}})});var Ld=ye((aa,ca)=>{"use strict";f();l();p();d();(function(e,t){typeof aa=="object"&&typeof ca<"u"?ca.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof A<"u"?A:e||self).dayjs_plugin_customParseFormat=t()})(aa,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,n=/\d\d/,i=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,s={},g=function(v){return(v=+v)+(v>68?1900:2e3)},u=function(v){return function(R){this[v]=+R}},a=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(R){if(!R||R==="Z")return 0;var I=R.match(/([+-]|\d\d)/g),b=60*I[1]+(+I[2]||0);return b===0?0:I[0]==="+"?-b:b}(v)}],m=function(v){var R=s[v];return R&&(R.indexOf?R:R.s.concat(R.f))},h=function(v,R){var I,b=s.meridiem;if(b){for(var P=1;P<=24;P+=1)if(v.indexOf(b(P,0,R))>-1){I=P>12;break}}else I=v===(R?"pm":"PM");return I},S={A:[o,function(v){this.afternoon=h(v,!1)}],a:[o,function(v){this.afternoon=h(v,!0)}],Q:[r,function(v){this.month=3*(v-1)+1}],S:[r,function(v){this.milliseconds=100*+v}],SS:[n,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[i,u("seconds")],ss:[i,u("seconds")],m:[i,u("minutes")],mm:[i,u("minutes")],H:[i,u("hours")],h:[i,u("hours")],HH:[i,u("hours")],hh:[i,u("hours")],D:[i,u("day")],DD:[n,u("day")],Do:[o,function(v){var R=s.ordinal,I=v.match(/\d+/);if(this.day=I[0],R)for(var b=1;b<=31;b+=1)R(b).replace(/\[|\]/g,"")===v&&(this.day=b)}],w:[i,u("week")],ww:[n,u("week")],M:[i,u("month")],MM:[n,u("month")],MMM:[o,function(v){var R=m("months"),I=(m("monthsShort")||R.map(function(b){return b.slice(0,3)})).indexOf(v)+1;if(I<1)throw new Error;this.month=I%12||I}],MMMM:[o,function(v){var R=m("months").indexOf(v)+1;if(R<1)throw new Error;this.month=R%12||R}],Y:[/[+-]?\d+/,u("year")],YY:[n,function(v){this.year=g(v)}],YYYY:[/\d{4}/,u("year")],Z:a,ZZ:a};function y(v){var R,I;R=v,I=s&&s.formats;for(var b=(v=R.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(F,T,M){var B=M&&M.toUpperCase();return T||I[M]||e[M]||I[B].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(V,U,N){return U||N.slice(1)})})).match(t),P=b.length,x=0;x<P;x+=1){var E=b[x],j=S[E],O=j&&j[0],k=j&&j[1];b[x]=k?{regex:O,parser:k}:E.replace(/^\[|\]$/g,"")}return function(F){for(var T={},M=0,B=0;M<P;M+=1){var V=b[M];if(typeof V=="string")B+=V.length;else{var U=V.regex,N=V.parser,Q=F.slice(B),L=U.exec(Q)[0];N.call(T,L),F=F.replace(L,"")}}return function($){var H=$.afternoon;if(H!==void 0){var z=$.hours;H?z<12&&($.hours+=12):z===12&&($.hours=0),delete $.afternoon}}(T),T}}return function(v,R,I){I.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(g=v.parseTwoDigitYear);var b=R.prototype,P=b.parse;b.parse=function(x){var E=x.date,j=x.utc,O=x.args;this.$u=j;var k=O[1];if(typeof k=="string"){var F=O[2]===!0,T=O[3]===!0,M=F||T,B=O[2];T&&(B=O[2]),s=this.$locale(),!F&&B&&(s=I.Ls[B]),this.$d=function(Q,L,$,H){try{if(["x","X"].indexOf(L)>-1)return new Date((L==="X"?1e3:1)*Q);var z=y(L)(Q),Z=z.year,ne=z.month,X=z.day,ee=z.hours,J=z.minutes,te=z.seconds,le=z.milliseconds,oe=z.zone,ce=z.week,pe=new Date,Re=X||(Z||ne?1:pe.getDate()),De=Z||pe.getFullYear(),at=0;Z&&!ne||(at=ne>0?ne-1:pe.getMonth());var Lt,Vt=ee||0,Or=J||0,uo=te||0,lo=le||0;return oe?new Date(Date.UTC(De,at,Re,Vt,Or,uo,lo+60*oe.offset*1e3)):$?new Date(Date.UTC(De,at,Re,Vt,Or,uo,lo)):(Lt=new Date(De,at,Re,Vt,Or,uo,lo),ce&&(Lt=H(Lt).week(ce).toDate()),Lt)}catch{return new Date("")}}(E,k,j,I),this.init(),B&&B!==!0&&(this.$L=this.locale(B).$L),M&&E!=this.format(k)&&(this.$d=new Date("")),s={}}else if(k instanceof Array)for(var V=k.length,U=1;U<=V;U+=1){O[1]=k[U-1];var N=I.apply(this,O);if(N.isValid()){this.$d=N.$d,this.$L=N.$L,this.init();break}U===V&&(this.$d=new Date(""))}else P.call(this,x)}}})});var vp=ye((wa,Ca)=>{"use strict";f();l();p();d();(function(e,t){typeof wa=="object"&&typeof Ca<"u"?Ca.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof A<"u"?A:e||self).dayjs_plugin_timezone=t()})(wa,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,i){var o,s=function(m,h,S){S===void 0&&(S={});var y=new Date(m),v=function(R,I){I===void 0&&(I={});var b=I.timeZoneName||"short",P=R+"|"+b,x=t[P];return x||(x=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:R,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),t[P]=x),x}(h,S);return v.formatToParts(y)},g=function(m,h){for(var S=s(m,h),y=[],v=0;v<S.length;v+=1){var R=S[v],I=R.type,b=R.value,P=e[I];P>=0&&(y[P]=parseInt(b,10))}var x=y[3],E=x===24?0:x,j=y[0]+"-"+y[1]+"-"+y[2]+" "+E+":"+y[4]+":"+y[5]+":000",O=+m;return(i.utc(j).valueOf()-(O-=O%1e3))/6e4},u=n.prototype;u.tz=function(m,h){m===void 0&&(m=o);var S,y=this.utcOffset(),v=this.toDate(),R=v.toLocaleString("en-US",{timeZone:m}),I=Math.round((v-new Date(R))/1e3/60),b=15*-Math.round(v.getTimezoneOffset()/15)-I;if(!Number(b))S=this.utcOffset(0,h);else if(S=i(R,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(b,!0),h){var P=S.utcOffset();S=S.add(y-P,"minute")}return S.$x.$timezone=m,S},u.offsetName=function(m){var h=this.$x.$timezone||i.tz.guess(),S=s(this.valueOf(),h,{timeZoneName:m}).find(function(y){return y.type.toLowerCase()==="timezonename"});return S&&S.value};var a=u.startOf;u.startOf=function(m,h){if(!this.$x||!this.$x.$timezone)return a.call(this,m,h);var S=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return a.call(S,m,h).tz(this.$x.$timezone,!0)},i.tz=function(m,h,S){var y=S&&h,v=S||h||o,R=g(+i(),v);if(typeof m!="string")return i(m).tz(v);var I=function(E,j,O){var k=E-60*j*1e3,F=g(k,O);if(j===F)return[k,j];var T=g(k-=60*(F-j)*1e3,O);return F===T?[k,F]:[E-60*Math.min(F,T)*1e3,Math.max(F,T)]}(i.utc(m,y).valueOf(),R,v),b=I[0],P=I[1],x=i(b).utcOffset(P);return x.$x.$timezone=v,x},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(m){o=m}}})});var Ap=ye((ba,xa)=>{"use strict";f();l();p();d();(function(e,t){typeof ba=="object"&&typeof xa<"u"?xa.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof A<"u"?A:e||self).dayjs_plugin_utc=t()})(ba,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,o){var s=i.prototype;o.utc=function(y){var v={date:y,utc:!0,args:arguments};return new i(v)},s.utc=function(y){var v=o(this.toDate(),{locale:this.$L,utc:!0});return y?v.add(this.utcOffset(),e):v},s.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var g=s.parse;s.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),g.call(this,y)};var u=s.init;s.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else u.call(this)};var a=s.utcOffset;s.utcOffset=function(y,v){var R=this.$utils().u;if(R(y))return this.$u?0:R(this.$offset)?a.call(this):this.$offset;if(typeof y=="string"&&(y=function(x){x===void 0&&(x="");var E=x.match(t);if(!E)return null;var j=(""+E[0]).match(r)||["-",0,0],O=j[0],k=60*+j[1]+ +j[2];return k===0?0:O==="+"?k:-k}(y),y===null))return this;var I=Math.abs(y)<=16?60*y:y,b=this;if(v)return b.$offset=I,b.$u=y===0,b;if(y!==0){var P=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(I+P,e)).$offset=I,b.$x.$localOffset=P}else b=this.utc();return b};var m=s.format;s.format=function(y){var v=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return m.call(this,v)},s.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var h=s.toDate;s.toDate=function(y){return y==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var S=s.diff;s.diff=function(y,v,R){if(y&&this.$u===y.$u)return S.call(this,y,v,R);var I=this.local(),b=o(y).local();return S.call(I,b,v,R)}}})});var nf=ye((mG,rf)=>{"use strict";f();l();p();d();function GA(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}rf.exports=zA;function zA(e,t,r){var n=r&&r.stringify||GA,i=1;if(typeof e=="object"&&e!==null){var o=t.length+i;if(o===1)return e;var s=new Array(o);s[0]=n(e);for(var g=1;g<o;g++)s[g]=n(t[g]);return s.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var a="",m=1-i,h=-1,S=e&&e.length||0,y=0;y<S;){if(e.charCodeAt(y)===37&&y+1<S){switch(h=h>-1?h:0,e.charCodeAt(y+1)){case 100:case 102:if(m>=u||t[m]==null)break;h<y&&(a+=e.slice(h,y)),a+=Number(t[m]),h=y+2,y++;break;case 105:if(m>=u||t[m]==null)break;h<y&&(a+=e.slice(h,y)),a+=Math.floor(Number(t[m])),h=y+2,y++;break;case 79:case 111:case 106:if(m>=u||t[m]===void 0)break;h<y&&(a+=e.slice(h,y));var v=typeof t[m];if(v==="string"){a+="'"+t[m]+"'",h=y+2,y++;break}if(v==="function"){a+=t[m].name||"<anonymous>",h=y+2,y++;break}a+=n(t[m]),h=y+2,y++;break;case 115:if(m>=u)break;h<y&&(a+=e.slice(h,y)),a+=String(t[m]),h=y+2,y++;break;case 37:h<y&&(a+=e.slice(h,y)),a+="%",h=y+2,y++,m--;break}++m}++y}return h===-1?e:(h<S&&(a+=e.slice(h)),a)}});var lf=ye((AG,to)=>{"use strict";f();l();p();d();var of=nf();to.exports=ot;var An=cw().console||{},WA={mapHttpRequest:eo,mapHttpResponse:eo,wrapRequestSerializer:qa,wrapResponseSerializer:qa,wrapErrorSerializer:qa,req:eo,res:eo,err:af,errWithCause:af};function vt(e,t){return e==="silent"?1/0:t.levels.values[e]}var Na=Symbol("pino.logFuncs"),ja=Symbol("pino.hierarchy"),YA={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function sf(e,t){let r={logger:t,parent:e[ja]};t[ja]=r}function KA(e,t,r){let n={};t.forEach(i=>{n[i]=r[i]?r[i]:An[i]||An[YA[i]||"log"]||Ir}),e[Na]=n}function JA(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function ot(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||An;e.browser.write&&(e.browser.asObject=!0);let n=e.serializers||{},i=JA(e.browser.serialize,n),o=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);let s=Object.keys(e.customLevels||{}),g=["error","fatal","warn","info","debug","trace"].concat(s);typeof r=="function"&&g.forEach(function(R){r[R]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let u=e.level||"info",a=Object.create(r);a.log||(a.log=Ir),KA(a,g,r),sf({},a),Object.defineProperty(a,"levelVal",{get:h}),Object.defineProperty(a,"level",{get:S,set:y});let m={transmit:t,serialize:i,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:g,timestamp:ow(e),messageKey:e.messageKey||"msg",onChild:e.onChild||Ir};a.levels=XA(e),a.level=u,a.isLevelEnabled=function(R){return this.levels.values[R]?this.levels.values[R]>=this.levels.values[this.level]:!1},a.setMaxListeners=a.getMaxListeners=a.emit=a.addListener=a.on=a.prependListener=a.once=a.prependOnceListener=a.removeListener=a.removeAllListeners=a.listeners=a.listenerCount=a.eventNames=a.write=a.flush=Ir,a.serializers=n,a._serialize=i,a._stdErrSerialize=o,a.child=function(...R){return v.call(this,m,...R)},t&&(a._logEvent=Ma());function h(){return vt(this.level,this)}function S(){return this._level}function y(R){if(R!=="silent"&&!this.levels.values[R])throw Error("unknown level "+R);this._level=R,_t(this,m,a,"error"),_t(this,m,a,"fatal"),_t(this,m,a,"warn"),_t(this,m,a,"info"),_t(this,m,a,"debug"),_t(this,m,a,"trace"),s.forEach(I=>{_t(this,m,a,I)})}function v(R,I,b){if(!I)throw new Error("missing bindings for child Pino");b=b||{},i&&I.serializers&&(b.serializers=I.serializers);let P=b.serializers;if(i&&P){var x=Object.assign({},n,P),E=e.browser.serialize===!0?Object.keys(x):i;delete I.serializers,_a([I],E,x,this._stdErrSerialize)}function j(k){this._childLevel=(k._childLevel|0)+1,this.bindings=I,x&&(this.serializers=x,this._serialize=E),t&&(this._logEvent=Ma([].concat(k._logEvent.bindings,I)))}j.prototype=this;let O=new j(this);return sf(this,O),O.child=function(...k){return v.call(this,R,...k)},O.level=b.level||this.level,R.onChild(O),O}return a}function XA(e){let t=e.customLevels||{},r=Object.assign({},ot.levels.values,t),n=Object.assign({},ot.levels.labels,ZA(t));return{values:r,labels:n}}function ZA(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}ot.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};ot.stdSerializers=WA;ot.stdTimeFunctions=Object.assign({},{nullTime:cf,epochTime:uf,unixTime:sw,isoTime:aw});function ew(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[ja];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function _t(e,t,r,n){if(Object.defineProperty(e,n,{value:vt(e.level,r)>vt(n,r)?Ir:r[Na][n],writable:!0,enumerable:!0,configurable:!0}),e[n]===Ir){if(!t.transmit)return;let o=t.transmit.level||e.level,s=vt(o,r);if(vt(n,r)<s)return}e[n]=rw(e,t,r,n);let i=ew(e);i.length!==0&&(e[n]=tw(i,e[n]))}function tw(e,t){return function(){return t.apply(this,[...e,...arguments])}}function rw(e,t,r,n){return function(i){return function(){let s=t.timestamp(),g=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===An?An:this;for(var a=0;a<g.length;a++)g[a]=arguments[a];var m=!1;if(t.serialize&&(_a(g,this._serialize,this.serializers,this._stdErrSerialize),m=!0),t.asObject||t.formatters?i.call(u,...nw(this,n,g,s,t)):i.apply(u,g),t.transmit){let h=t.transmit.level||e._level,S=vt(h,r),y=vt(n,r);if(y<S)return;iw(this,{ts:s,methodLevel:n,methodValue:y,transmitLevel:h,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:vt(e._level,r)},g,m)}}}(e[Na][n])}function nw(e,t,r,n,i){let{level:o,log:s=h=>h}=i.formatters||{},g=r.slice(),u=g[0],a={},m=(e._childLevel|0)+1;if(m<1&&(m=1),n&&(a.time=n),o){let h=o(t,e.levels.values[t]);Object.assign(a,h)}else a.level=e.levels.values[t];if(i.asObjectBindingsOnly){if(u!==null&&typeof u=="object")for(;m--&&typeof g[0]=="object";)Object.assign(a,g.shift());return[s(a),...g]}else{if(u!==null&&typeof u=="object"){for(;m--&&typeof g[0]=="object";)Object.assign(a,g.shift());u=g.length?of(g.shift(),g):void 0}else typeof u=="string"&&(u=of(g.shift(),g));return u!==void 0&&(a[i.messageKey]=u),[s(a)]}}function _a(e,t,r,n){for(let i in e)if(n&&e[i]instanceof Error)e[i]=ot.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i])&&t)for(let o in e[i])t.indexOf(o)>-1&&o in r&&(e[i][o]=r[o](e[i][o]))}function iw(e,t,r,n=!1){let i=t.send,o=t.ts,s=t.methodLevel,g=t.methodValue,u=t.val,a=e._logEvent.bindings;n||_a(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=r.filter(function(m){return a.indexOf(m)===-1}),e._logEvent.level.label=s,e._logEvent.level.value=g,i(s,e._logEvent,u),e._logEvent=Ma(a)}function Ma(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function af(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function ow(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?cf:uf}function eo(){return{}}function qa(e){return e}function Ir(){}function cf(){return!1}function uf(){return Date.now()}function sw(){return Math.round(Date.now()/1e3)}function aw(){return new Date(Date.now()).toISOString()}function cw(){function e(t){return typeof t<"u"&&t}try{return typeof A<"u"?A:(Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),A)}catch{return e(self)||e(window)||e(this)||{}}}to.exports.default=ot;to.exports.pino=ot});var Dw={};Wf(Dw,{ResultTemplatesHelpers:()=>ep,buildCaseAssistEngine:()=>yf,buildCaseField:()=>Of,buildCaseInput:()=>Tf,buildController:()=>Xe,buildDocumentSuggestion:()=>La,buildDocumentSuggestionList:()=>La,buildInteractiveResult:()=>qf,buildQuickview:()=>_f,getAnalyticsNextApiBaseUrl:()=>En,getOrganizationEndpoint:()=>ue,loadCaseAssistAnalyticsActions:()=>Pw,loadCaseFieldActions:()=>Fw,loadCaseInputActions:()=>Ow,loadDocumentSuggestionActions:()=>Tw,loadGenericAnalyticsActions:()=>kw});module.exports=Yf(Dw);f();l();p();d();f();l();p();d();var bc=_e(mc(),1);f();l();p();d();var qe=new Error("Failed to load reducers."),$t=class extends Error{constructor(){super(),this.name="UnauthorizedTokenError",this.message="The token being used to perform the request is unauthorized. It may be expired or invalid."}},bt=class extends Error{constructor(r,n){super();se(this,"statusCode");this.name="Disconnected",this.message=`Client could not connect to the following URL: ${r}`,this.statusCode=n??0}};f();l();p();d();function yc(e){return Array.isArray(e)}function hc(e,t){return[...e.reduce((r,n)=>{let i=t(n);return r.has(i)||r.set(i,n),r},new Map).values()]}var Kg=new Set(["1",1,"yes",!0]);function Sc(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>Kg.has(r))}function vc(e){let t={};for(let[r,n]of e)t[r]=n;return t}function Ur(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function Rn(e,t,r={}){let n;return(...i)=>{let o=r.isImmediate&&!n;if(clearTimeout(n),n=setTimeout(()=>{n=void 0,r.isImmediate||e.apply(void 0,i)},t),o)return e.apply(void 0,i)}}f();l();p();d();function Ac(e){let t=[];for(let r in e){let n=encodeURIComponent(r),i=encodeURIComponent(e[r]);t.push(`${n}=${i}`)}return t.join("&")}function wc(e){return typeof e!="object"||!e?!1:Object.values(e).every(Jg)}function Jg(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function Cc(e){return e===429}var ct=class e{static async call(t){let r=Xg(t),{logger:n}=t,i=await e.preprocessRequest(r,t);n.info(i,"Platform request");let{url:o,...s}=i,g=async()=>{let u=await w(o,s);if(Cc(u.status))throw u;return u};try{let u=await(0,bc.backOff)(g,{startingDelay:100,timeMultiple:2,maxDelay:800,numOfAttempts:4,jitter:"full",retry:async a=>{let m=a&&Cc(a.status);return m&&(n.info("Platform retrying request"),await new Promise(h=>setTimeout(h,1e3))),m}});switch(u.status){case 419:case 401:throw n.info("Platform renewing token"),new $t;case 404:throw new bt(o,u.status);default:return n.info({response:u,requestInfo:i},"Platform response"),u}}catch(u){return u.message==="Failed to fetch"?new bt(o):u}}static async preprocessRequest(t,r){let{origin:n,preprocessRequest:i,logger:o,requestMetadata:s}=r,{signal:g,...u}=t,a=Ur(u);try{let m=await i(t,n,s);return{...t,...m}}catch(m){o.error(m,"Platform request preprocessing failed. Returning default request options.")}return a}};function ue(e,t="prod",r="platform"){let n=t==="prod"?"":t,i=r==="platform"?"":`.${r}`;return`https://${e}${i}.org${n}.coveo.com`}function Ht(e,t="prod"){return`${ue(e,t)}/rest/search/v2`}function En(e,t="prod"){return`${ue(e,t,"analytics")}/rest/organizations/${e}/events/v1`}function Xg(e){let{url:t,method:r,requestParams:n,contentType:i,accessToken:o,signal:s}=e,g=e.method==="POST"||e.method==="PUT",u=Zg(n,i);return{url:t,method:r,headers:{"Content-Type":i,Authorization:`Bearer ${o}`,...e.headers},...g&&{body:u},signal:s}}function Zg(e,t){return t==="application/x-www-form-urlencoded"?wc(e)?Ac(e):"":JSON.stringify(e)}f();l();p();d();f();l();p();d();function em(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new ko(r)}var ko=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},Ue=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let i in this.definition){let o=this.definition[i].validate(r[i]);o&&n.push(`${i}: ${o}`)}if(n.length)throw em(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},xt=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&K(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function Gt(e){return e===void 0}function tm(e){return e===null}function K(e){return Gt(e)||tm(e)}var fe=class{constructor(e={}){se(this,"value");this.value=new xt(e)}validate(e){let t=this.value.validate(e);return t||(rm(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function rm(e){return Gt(e)||xc(e)}function xc(e){return typeof e=="boolean"}var we=class{constructor(e={}){se(this,"value");this.config=e,this.value=new xt(e)}validate(e){let t=this.value.validate(e);return t||(nm(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function nm(e){return Gt(e)||Rc(e)}function Rc(e){return typeof e=="number"&&!Number.isNaN(e)}var im=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,W=class{constructor(e={}){se(this,"value");se(this,"config");this.config={emptyAllowed:!0,url:!1,...e},this.value=new xt(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:i,ISODate:o}=this.config,s=this.value.validate(e);if(s)return s;if(Gt(e))return null;if(!Ec(e))return"value is not a string.";if(!t&&!e.length)return"value is an empty string.";if(r)try{new URL(e)}catch{return"value is not a valid URL."}return n&&!n.test(e)?`value did not match provided regex ${n}`:i&&!i.includes(e)?`value should be one of: ${i.join(", ")}.`:o&&!(im.test(e)&&new Date(e).toString()!=="Invalid Date")?"value is not a valid ISO8601 date string":null}get default(){return this.value.default}get required(){return this.value.required}};function Ec(e){return Object.prototype.toString.call(e)==="[object String]"}var ae=class{constructor(e={}){se(this,"config");this.config={options:{required:!1},values:{},...e}}validate(e){if(Gt(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Ic(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&K(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let i=e[r],o=n.validate(i);o!==null&&(t+=` ${o}`)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Ic(e){return e!==void 0&&typeof e=="object"}var Le=class{constructor(e={}){se(this,"value");this.config=e,this.value=new xt(this.config)}validate(e){if(!K(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(K(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&K(n)&&(r=`value is null or undefined: ${e.join(",")}`);let i=this.validatePrimitiveValue(n,this.config.each);i!==null&&(r+=` ${i}`)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return xc(e)||Ec(e)||Rc(e)||Ic(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function kc(e){return Array.isArray(e)}var Po=class{constructor(e){se(this,"value");this.config=e,this.value=new xt(e)}validate(e){let t=this.value.validate(e);return t!==null?t:Gt(e)||Object.values(this.config.enum).find(n=>n===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};f();l();p();d();var In=e=>e;f();l();p();d();f();l();p();d();f();l();p();d();var zt=class{constructor(t){se(this,"_basePath");se(this,"_params",{});this._basePath=t}addParam(t,r){this._params={...this.params,[t]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([t,r])=>`${t}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}};f();l();p();d();function Fo(e){let{url:t,accessToken:r,organizationId:n,authentication:i,...o}=e;return o}var Oo=e=>{let{response:t}=e;return t.body?om(e):sm(t)},om=e=>cm(e)?um(e):am(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},sm=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function am(e){return e.body.statusCode!==void 0}function cm(e){return e.body.exception!==void 0}var um=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});f();l();p();d();function Pc(e){return((e.headers.get("content-type")||"").split(";").find(n=>n.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}f();l();p();d();var To=(e,t,r,n)=>{let i=new zt(`${e.url}${n}`);return i.addParam("organizationId",e.organizationId),e.authentication&&i.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:i.href,origin:"searchApiFetch"}};var Fc=(e,t)=>{let r=new zt(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),e.authentication&&r.addParam("authentication",e.authentication),e.q!==void 0&&r.addParam("q",e.q),e.enableNavigation!==void 0&&r.addParam("enableNavigation",`${e.enableNavigation}`),e.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),r.href},Do=async(e,t)=>{let r=await ct.call({...To(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:Fo(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=Pc(r),i=await r.arrayBuffer(),s=new TextDecoder(n).decode(i);return lm(s)?{success:s}:{error:Oo({response:r,body:s})}};function lm(e){return typeof e=="string"}f();l();p();d();function dm(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function pm(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function kn(e,t){if(t&&e.name==="AbortError")return{error:pm(e)};if(e instanceof bt)return{error:dm(e)};throw e}f();l();p();d();f();l();p();d();var Pn=(e,t,r,n,i={})=>{fm(e);let o=`${e.url}/rest/organizations/${e.organizationId}/caseassists/${e.caseAssistId}${n}`,s=gm(i),g=s?`${o}?${s}`:o;return{accessToken:e.accessToken,method:t,contentType:r,url:g,origin:"caseAssistApiFetch"}},Fn=e=>Object.keys(e).filter(t=>e[t].value!=="").reduce((t,r)=>(t[r]=e[r],t),{}),On=e=>Object.keys(e).filter(t=>e[t].value!=="").reduce((t,r)=>(t[r]=e[r].value,t),{}),fm=e=>{if(!e.url)throw new Error("The 'url' attribute must contain a valid platform URL.");if(!e.organizationId)throw new Error("The 'organizationId' attribute must contain a valid organization ID.");if(!e.accessToken)throw new Error("The 'accessToken' attribute must contain a valid platform access token.");if(!e.caseAssistId)throw new Error("The 'caseAssistId' attribute must contain a valid Case Assist configuration ID.")},gm=e=>Object.keys(e).map(t=>`${t}=${encodeURIComponent(e[t])}`).join("&");var Oc=e=>{let t=e.debug?{debug:"1"}:{};return{...Pn(e,"POST","application/json","/classify",t),requestParams:mm(e)}},mm=e=>({clientId:e.clientId,locale:e.locale,fields:Fn(e.fields)});f();l();p();d();var Tc=e=>{let t={};return e.debug&&(t.debug="1"),e.numberOfResults&&(t.numberOfResults=e.numberOfResults.toString()),{...Pn(e,"POST","application/json","/documents/suggest",t),requestParams:ym(e)}},ym=e=>({clientId:e.clientId,locale:e.locale,fields:Fn(e.fields),context:e.context,analytics:e.analytics});var Tn=class{constructor(t){this.options=t}async getCaseClassifications(t){let r=await ct.call({...Oc(t),...this.options});if(r instanceof Error)return kn(r);let n=await r.json();return r.ok?{success:n}:{error:n}}async getDocumentSuggestions(t){let r=await ct.call({...Tc(t),...this.options});if(r instanceof Error)return kn(r);let n=await r.json();return r.ok?{success:n}:{error:n}}async html(t){return Do(t,this.options)}};f();l();p();d();f();l();p();d();f();l();p();d();function he(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var hm=typeof Symbol=="function"&&Symbol.observable||"@@observable",Dc=hm,qo=()=>Math.random().toString(36).substring(7).split("").join("."),Sm={INIT:`@@redux/INIT${qo()}`,REPLACE:`@@redux/REPLACE${qo()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${qo()}`},Dn=Sm;function Be(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function jo(e,t,r){if(typeof e!="function")throw new Error(he(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(he(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(he(1));return r(jo)(e,t)}let n=e,i=t,o=new Map,s=o,g=0,u=!1;function a(){s===o&&(s=new Map,o.forEach((I,b)=>{s.set(b,I)}))}function m(){if(u)throw new Error(he(3));return i}function h(I){if(typeof I!="function")throw new Error(he(4));if(u)throw new Error(he(5));let b=!0;a();let P=g++;return s.set(P,I),function(){if(b){if(u)throw new Error(he(6));b=!1,a(),s.delete(P),o=null}}}function S(I){if(!Be(I))throw new Error(he(7));if(typeof I.type>"u")throw new Error(he(8));if(typeof I.type!="string")throw new Error(he(17));if(u)throw new Error(he(9));try{u=!0,i=n(i,I)}finally{u=!1}return(o=s).forEach(P=>{P()}),I}function y(I){if(typeof I!="function")throw new Error(he(10));n=I,S({type:Dn.REPLACE})}function v(){let I=h;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(he(11));function P(){let E=b;E.next&&E.next(m())}return P(),{unsubscribe:I(P)}},[Dc](){return this}}}return S({type:Dn.INIT}),{dispatch:S,subscribe:h,getState:m,replaceReducer:y,[Dc]:v}}function vm(e){Object.keys(e).forEach(t=>{let r=e[t];if(typeof r(void 0,{type:Dn.INIT})>"u")throw new Error(he(12));if(typeof r(void 0,{type:Dn.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(he(13))})}function Wt(e){let t=Object.keys(e),r={};for(let s=0;s<t.length;s++){let g=t[s];typeof e[g]=="function"&&(r[g]=e[g])}let n=Object.keys(r),i,o;try{vm(r)}catch(s){o=s}return function(g={},u){if(o)throw o;let a=!1,m={};for(let h=0;h<n.length;h++){let S=n[h],y=r[S],v=g[S],R=y(v,u);if(typeof R>"u"){let I=u&&u.type;throw new Error(he(14))}m[S]=R,a=a||R!==v}return a=a||n.length!==Object.keys(g).length,a?m:g}}function Yt(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function qc(...e){return t=>(r,n)=>{let i=t(r,n),o=()=>{throw new Error(he(15))},s={getState:i.getState,dispatch:(u,...a)=>o(u,...a)},g=e.map(u=>u(s));return o=Yt(...g)(i.dispatch),{...i,dispatch:o}}}function Kt(e){return Be(e)&&"type"in e&&typeof e.type=="string"}f();l();p();d();var Ho=Symbol.for("immer-nothing"),Lr=Symbol.for("immer-draftable"),Ee=Symbol.for("immer-state");function Se(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Jt=Object.getPrototypeOf;function Fe(e){return!!e&&!!e[Ee]}function Ie(e){return e?Lc(e)||Array.isArray(e)||!!e[Lr]||!!e.constructor?.[Lr]||Xt(e)||Gr(e):!1}var Am=Object.prototype.constructor.toString(),jc=new WeakMap;function Lc(e){if(!e||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=jc.get(r);return n===void 0&&(n=Function.toString.call(r),jc.set(r,n)),n===Am}function Go(e){return Fe(e)||Se(15,e),e[Ee].base_}function Vr(e,t,r=!0){Et(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Et(e){let t=e[Ee];return t?t.type_:Array.isArray(e)?1:Xt(e)?2:Gr(e)?3:0}function Qr(e,t){return Et(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Mo(e,t){return Et(e)===2?e.get(t):e[t]}function Vc(e,t,r){let n=Et(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function wm(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Xt(e){return e instanceof Map}function Gr(e){return e instanceof Set}function Rt(e){return e.copy_||e.base_}function Uo(e,t){if(Xt(e))return new Map(e);if(Gr(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=Lc(e);if(t===!0||t==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(e);delete n[Ee];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let s=i[o],g=n[s];g.writable===!1&&(g.writable=!0,g.configurable=!0),(g.get||g.set)&&(n[s]={configurable:!0,writable:!0,enumerable:g.enumerable,value:e[s]})}return Object.create(Jt(e),n)}else{let n=Jt(e);if(n!==null&&r)return{...e};let i=Object.create(n);return Object.assign(i,e)}}function Nn(e,t=!1){return _n(e)||Fe(e)||!Ie(e)||(Et(e)>1&&Object.defineProperties(e,{set:qn,add:qn,clear:qn,delete:qn}),Object.freeze(e),t&&Object.values(e).forEach(r=>Nn(r,!0))),e}function Cm(){Se(2)}var qn={value:Cm};function _n(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Lo={};function It(e){let t=Lo[e];return t||Se(0,e),t}function bm(e,t){Lo[e]||(Lo[e]=t)}var Br;function Qc(){return Br}function xm(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Mc(e,t){t&&(It("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Vo(e){Qo(e),e.drafts_.forEach(Rm),e.drafts_=null}function Qo(e){e===Br&&(Br=e.parent_)}function Nc(e){return Br=xm(Br,e)}function Rm(e){let t=e[Ee];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function _c(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ee].modified_&&(Vo(t),Se(4)),Ie(e)&&(e=jn(t,e),t.parent_||Mn(t,e)),t.patches_&&It("Patches").generateReplacementPatches_(r[Ee].base_,e,t.patches_,t.inversePatches_)):e=jn(t,r,[]),Vo(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ho?e:void 0}function jn(e,t,r){if(_n(t))return t;let n=e.immer_.shouldUseStrictIteration(),i=t[Ee];if(!i)return Vr(t,(o,s)=>Uc(e,i,t,o,s,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return Mn(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;let o=i.copy_,s=o,g=!1;i.type_===3&&(s=new Set(o),o.clear(),g=!0),Vr(s,(u,a)=>Uc(e,i,o,u,a,r,g),n),Mn(e,o,!1),r&&e.patches_&&It("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function Uc(e,t,r,n,i,o,s){if(i==null||typeof i!="object"&&!s)return;let g=_n(i);if(!(g&&!s)){if(Fe(i)){let u=o&&t&&t.type_!==3&&!Qr(t.assigned_,n)?o.concat(n):void 0,a=jn(e,i,u);if(Vc(r,n,a),Fe(a))e.canAutoFreeze_=!1;else return}else s&&r.add(i);if(Ie(i)&&!g){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&g)return;jn(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Xt(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Mn(e,i)}}}function Mn(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Nn(t,r)}function Em(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Qc(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=zo;r&&(i=[n],o=$r);let{revoke:s,proxy:g}=Proxy.revocable(i,o);return n.draft_=g,n.revoke_=s,g}var zo={get(e,t){if(t===Ee)return e;let r=Rt(e);if(!Qr(r,t))return Im(e,r,t);let n=r[t];return e.finalized_||!Ie(n)?n:n===No(e.base_,t)?(_o(e),e.copy_[t]=$o(n,e)):n},has(e,t){return t in Rt(e)},ownKeys(e){return Reflect.ownKeys(Rt(e))},set(e,t,r){let n=Bc(Rt(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let i=No(Rt(e),t),o=i?.[Ee];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(wm(r,i)&&(r!==void 0||Qr(e.base_,t)))return!0;_o(e),Bo(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return No(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,_o(e),Bo(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=Rt(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Se(11)},getPrototypeOf(e){return Jt(e.base_)},setPrototypeOf(){Se(12)}},$r={};Vr(zo,(e,t)=>{$r[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});$r.deleteProperty=function(e,t){return $r.set.call(this,e,t,void 0)};$r.set=function(e,t,r){return zo.set.call(this,e[0],t,r,e[0])};function No(e,t){let r=e[Ee];return(r?Rt(r):e)[t]}function Im(e,t,r){let n=Bc(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function Bc(e,t){if(!(t in e))return;let r=Jt(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Jt(r)}}function Bo(e){e.modified_||(e.modified_=!0,e.parent_&&Bo(e.parent_))}function _o(e){e.copy_||(e.copy_=Uo(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var km=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let o=r;r=t;let s=this;return function(u=o,...a){return s.produce(u,m=>r.call(this,m,...a))}}typeof r!="function"&&Se(6),n!==void 0&&typeof n!="function"&&Se(7);let i;if(Ie(t)){let o=Nc(this),s=$o(t,void 0),g=!0;try{i=r(s),g=!1}finally{g?Vo(o):Qo(o)}return Mc(o,n),_c(i,o)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===Ho&&(i=void 0),this.autoFreeze_&&Nn(i,!0),n){let o=[],s=[];It("Patches").generateReplacementPatches_(t,i,o,s),n(o,s)}return i}else Se(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...g)=>this.produceWithPatches(s,u=>t(u,...g));let n,i;return[this.produce(t,r,(s,g)=>{n=s,i=g}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ie(e)||Se(8),Fe(e)&&(e=$c(e));let t=Nc(this),r=$o(e,void 0);return r[Ee].isManual_=!0,Qo(t),r}finishDraft(e,t){let r=e&&e[Ee];(!r||!r.isManual_)&&Se(9);let{scope_:n}=r;return Mc(n,t),_c(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));let n=It("Patches").applyPatches_;return Fe(e)?n(e,t):this.produce(e,i=>n(i,t))}};function $o(e,t){let r=Xt(e)?It("MapSet").proxyMap_(e,t):Gr(e)?It("MapSet").proxySet_(e,t):Em(e,t);return(t?t.scope_:Qc()).drafts_.push(r),r}function $c(e){return Fe(e)||Se(10,e),Hc(e)}function Hc(e){if(!Ie(e)||_n(e))return e;let t=e[Ee],r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Uo(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Uo(e,!0);return Vr(r,(i,o)=>{Vc(r,i,Hc(o))},n),t&&(t.finalized_=!1),r}function Gc(){let t="replace",r="add",n="remove";function i(S,y,v,R){switch(S.type_){case 0:case 2:return s(S,y,v,R);case 1:return o(S,y,v,R);case 3:return g(S,y,v,R)}}function o(S,y,v,R){let{base_:I,assigned_:b}=S,P=S.copy_;P.length<I.length&&([I,P]=[P,I],[v,R]=[R,v]);for(let x=0;x<I.length;x++)if(b[x]&&P[x]!==I[x]){let E=y.concat([x]);v.push({op:t,path:E,value:h(P[x])}),R.push({op:t,path:E,value:h(I[x])})}for(let x=I.length;x<P.length;x++){let E=y.concat([x]);v.push({op:r,path:E,value:h(P[x])})}for(let x=P.length-1;I.length<=x;--x){let E=y.concat([x]);R.push({op:n,path:E})}}function s(S,y,v,R){let{base_:I,copy_:b}=S;Vr(S.assigned_,(P,x)=>{let E=Mo(I,P),j=Mo(b,P),O=x?Qr(I,P)?t:r:n;if(E===j&&O===t)return;let k=y.concat(P);v.push(O===n?{op:O,path:k}:{op:O,path:k,value:j}),R.push(O===r?{op:n,path:k}:O===n?{op:r,path:k,value:h(E)}:{op:t,path:k,value:h(E)})})}function g(S,y,v,R){let{base_:I,copy_:b}=S,P=0;I.forEach(x=>{if(!b.has(x)){let E=y.concat([P]);v.push({op:n,path:E,value:x}),R.unshift({op:r,path:E,value:x})}P++}),P=0,b.forEach(x=>{if(!I.has(x)){let E=y.concat([P]);v.push({op:r,path:E,value:x}),R.unshift({op:n,path:E,value:x})}P++})}function u(S,y,v,R){v.push({op:t,path:[],value:y===Ho?void 0:y}),R.push({op:t,path:[],value:S})}function a(S,y){return y.forEach(v=>{let{path:R,op:I}=v,b=S;for(let j=0;j<R.length-1;j++){let O=Et(b),k=R[j];typeof k!="string"&&typeof k!="number"&&(k=""+k),(O===0||O===1)&&(k==="__proto__"||k==="constructor")&&Se(19),typeof b=="function"&&k==="prototype"&&Se(19),b=Mo(b,k),typeof b!="object"&&Se(18,R.join("/"))}let P=Et(b),x=m(v.value),E=R[R.length-1];switch(I){case t:switch(P){case 2:return b.set(E,x);case 3:Se(16);default:return b[E]=x}case r:switch(P){case 1:return E==="-"?b.push(x):b.splice(E,0,x);case 2:return b.set(E,x);case 3:return b.add(x);default:return b[E]=x}case n:switch(P){case 1:return b.splice(E,1);case 2:return b.delete(E);case 3:return b.delete(v.value);default:return delete b[E]}default:Se(17,I)}}),S}function m(S){if(!Ie(S))return S;if(Array.isArray(S))return S.map(m);if(Xt(S))return new Map(Array.from(S.entries()).map(([v,R])=>[v,m(R)]));if(Gr(S))return new Set(Array.from(S).map(m));let y=Object.create(Jt(S));for(let v in S)y[v]=m(S[v]);return Qr(S,Lr)&&(y[Lr]=S[Lr]),y}function h(S){return Fe(S)?m(S):S}bm("Patches",{applyPatches_:a,generatePatches_:i,generateReplacementPatches_:u})}var Hr=new km,et=Hr.produce,Un=Hr.produceWithPatches.bind(Hr);var Wo=Hr.applyPatches.bind(Hr);f();l();p();d();function Pm(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Fm(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Om(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var zc=e=>Array.isArray(e)?e:[e];function Tm(e){let t=Array.isArray(e[0])?e[0]:e;return Om(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Dm(e,t){let r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var Zx=Symbol();var eR=Object.getPrototypeOf({});var qm=class{constructor(e){this.value=e}deref(){return this.value}},jm=typeof WeakRef<"u"?WeakRef:qm,Mm=0,Wc=1;function Ln(){return{s:Mm,v:void 0,o:null,p:null}}function Zt(e,t={}){let r=Ln(),{resultEqualityCheck:n}=t,i,o=0;function s(){let g=r,{length:u}=arguments;for(let h=0,S=u;h<S;h++){let y=arguments[h];if(typeof y=="function"||typeof y=="object"&&y!==null){let v=g.o;v===null&&(g.o=v=new WeakMap);let R=v.get(y);R===void 0?(g=Ln(),v.set(y,g)):g=R}else{let v=g.p;v===null&&(g.p=v=new Map);let R=v.get(y);R===void 0?(g=Ln(),v.set(y,g)):g=R}}let a=g,m;if(g.s===Wc)m=g.v;else if(m=e.apply(null,arguments),o++,n){let h=i?.deref?.()??i;h!=null&&n(h,m)&&(m=h,o!==0&&o--),i=typeof m=="object"&&m!==null||typeof m=="function"?new jm(m):m}return a.s=Wc,a.v=m,m}return s.clearCache=()=>{r=Ln(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function Yc(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let o=0,s=0,g,u={},a=i.pop();typeof a=="object"&&(u=a,a=i.pop()),Pm(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);let m={...r,...u},{memoize:h,memoizeOptions:S=[],argsMemoize:y=Zt,argsMemoizeOptions:v=[],devModeChecks:R={}}=m,I=zc(S),b=zc(v),P=Tm(i),x=h(function(){return o++,a.apply(null,arguments)},...I),E=!0,j=y(function(){s++;let k=Dm(P,arguments);return g=x.apply(null,k),g},...b);return Object.assign(j,{resultFunc:a,memoizedResultFunc:x,dependencies:P,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>g,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:h,argsMemoize:y})};return Object.assign(n,{withTypes:()=>n}),n}var de=Yc(Zt),Nm=Object.assign((e,t=de)=>{Fm(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map(o=>e[o]);return t(n,(...o)=>o.reduce((s,g,u)=>(s[r[u]]=g,s),{}))},{withTypes:()=>Nm});f();l();p();d();function Kc(e){return({dispatch:r,getState:n})=>i=>o=>typeof o=="function"?o(r,n,e):i(o)}var Jc=Kc(),Xc=Kc;var _m=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yt:Yt.apply(null,arguments)},SR=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}},Um=e=>e&&typeof e.match=="function";function _(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(xe(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Kt(n)&&n.type===e,r}var su=class zr extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,zr.prototype)}static get[Symbol.species](){return zr}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new zr(...t[0].concat(this)):new zr(...t.concat(this))}};function Zc(e){return Ie(e)?et(e,()=>{}):e}function eu(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Lm(e){return typeof e=="boolean"}var Vm=()=>function(t){let{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{},s=new su;return r&&(Lm(r)?s.push(Jc):s.push(Xc(r.extraArgument))),s},Wr="RTK_autoBatch",rr=()=>e=>({payload:e,meta:{[Wr]:!0}}),tu=e=>t=>{setTimeout(t,e)},Qm=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),i=!0,o=!1,s=!1,g=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:tu(10):e.type==="callback"?e.queueNotification:tu(e.timeout),a=()=>{s=!1,o&&(o=!1,g.forEach(m=>m()))};return Object.assign({},n,{subscribe(m){let h=()=>i&&m(),S=n.subscribe(h);return g.add(m),()=>{S(),g.delete(m)}},dispatch(m){try{return i=!m?.meta?.[Wr],o=!i,o&&(s||(s=!0,u(a))),n.dispatch(m)}finally{i=!0}}})},Bm=e=>function(r){let{autoBatch:n=!0}=r??{},i=new su(e);return n&&i.push(Qm(typeof n=="object"?n:void 0)),i};function au(e){let t=Vm(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=e||{},g;if(typeof r=="function")g=r;else if(Be(r))g=Wt(r);else throw new Error(xe(1));let u;typeof n=="function"?u=n(t):u=t();let a=Yt;i&&(a=_m({trace:!1,...typeof i=="object"&&i}));let m=qc(...u),h=Bm(m),S=typeof s=="function"?s(h):h(),y=a(...S);return jo(g,o,y)}function cu(e){let t={},r=[],n,i={addCase(o,s){let g=typeof o=="string"?o:o.type;if(!g)throw new Error(xe(28));if(g in t)throw new Error(xe(29));return t[g]=s,i},addMatcher(o,s){return r.push({matcher:o,reducer:s}),i},addDefaultCase(o){return n=o,i}};return e(i),[t,r,n]}function $m(e){return typeof e=="function"}function ge(e,t){let[r,n,i]=cu(t),o;if($m(e))o=()=>Zc(e());else{let g=Zc(e);o=()=>g}function s(g=o(),u){let a=[r[u.type],...n.filter(({matcher:m})=>m(u)).map(({reducer:m})=>m)];return a.filter(m=>!!m).length===0&&(a=[i]),a.reduce((m,h)=>{if(h)if(Fe(m)){let y=h(m,u);return y===void 0?m:y}else{if(Ie(m))return et(m,S=>h(S,u));{let S=h(m,u);if(S===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return m},g)}return s.getInitialState=o,s}var uu=(e,t)=>Um(e)?e.match(t):e(t);function $e(...e){return t=>e.some(r=>uu(r,t))}function tr(...e){return t=>e.every(r=>uu(r,t))}function $n(e,t){if(!e||!e.meta)return!1;let r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function Yr(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function Hn(...e){return e.length===0?t=>$n(t,["pending"]):Yr(e)?$e(...e.map(t=>t.pending)):Hn()(e[0])}function Ft(...e){return e.length===0?t=>$n(t,["rejected"]):Yr(e)?$e(...e.map(t=>t.rejected)):Ft()(e[0])}function Kr(...e){let t=r=>r&&r.meta&&r.meta.rejectedWithValue;return e.length===0?tr(Ft(...e),t):Yr(e)?tr(Ft(...e),t):Kr()(e[0])}function tt(...e){return e.length===0?t=>$n(t,["fulfilled"]):Yr(e)?$e(...e.map(t=>t.fulfilled)):tt()(e[0])}function Gn(...e){return e.length===0?t=>$n(t,["pending","fulfilled","rejected"]):Yr(e)?$e(...e.flatMap(t=>[t.pending,t.rejected,t.fulfilled])):Gn()(e[0])}var Hm="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Jr=(e=21)=>{let t="",r=e;for(;r--;)t+=Hm[Math.random()*64|0];return t},Gm=["name","message","stack","code"],Yo=class{constructor(e,t){se(this,"_type");this.payload=e,this.meta=t}},ru=class{constructor(e,t){se(this,"_type");this.payload=e,this.meta=t}},zm=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of Gm)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},ie=(()=>{function e(t,r,n){let i=_(t+"/fulfilled",(u,a,m,h)=>({payload:u,meta:{...h||{},arg:m,requestId:a,requestStatus:"fulfilled"}})),o=_(t+"/pending",(u,a,m)=>({payload:void 0,meta:{...m||{},arg:a,requestId:u,requestStatus:"pending"}})),s=_(t+"/rejected",(u,a,m,h,S)=>({payload:h,error:(n&&n.serializeError||zm)(u||"Rejected"),meta:{...S||{},arg:m,requestId:a,rejectedWithValue:!!h,requestStatus:"rejected",aborted:u?.name==="AbortError",condition:u?.name==="ConditionError"}}));function g(u){return(a,m,h)=>{let S=n?.idGenerator?n.idGenerator(u):Jr(),y=new c.AbortController,v,R;function I(P){R=P,y.abort()}let b=async function(){let P;try{let E=n?.condition?.(u,{getState:m,extra:h});if(Ym(E)&&(E=await E),E===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let j=new Promise((O,k)=>{v=()=>{k({name:"AbortError",message:R||"Aborted"})},y.signal.addEventListener("abort",v)});a(o(S,u,n?.getPendingMeta?.({requestId:S,arg:u},{getState:m,extra:h}))),P=await Promise.race([j,Promise.resolve(r(u,{dispatch:a,getState:m,extra:h,requestId:S,signal:y.signal,abort:I,rejectWithValue:(O,k)=>new Yo(O,k),fulfillWithValue:(O,k)=>new ru(O,k)})).then(O=>{if(O instanceof Yo)throw O;return O instanceof ru?i(O.payload,S,u,O.meta):i(O,S,u)})])}catch(E){P=E instanceof Yo?s(null,S,u,E.payload,E.meta):s(E,S,u)}finally{v&&y.signal.removeEventListener("abort",v)}return n&&!n.dispatchConditionRejection&&s.match(P)&&P.meta.condition||a(P),P}();return Object.assign(b,{abort:I,requestId:S,arg:u,unwrap(){return b.then(Wm)}})}}return Object.assign(g,{pending:o,rejected:s,fulfilled:i,settled:$e(s,i),typePrefix:t})}return e.withTypes=()=>e,e})();function Wm(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Ym(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var lu=Symbol.for("rtk-slice-createasyncthunk"),bR={[lu]:ie};function Km(e,t){return`${e}/${t}`}function Jm({creators:e}={}){let t=e?.asyncThunk?.[lu];return function(n){let{name:i,reducerPath:o=i}=n;if(!i)throw new Error(xe(11));typeof process<"u";let s=(typeof n.reducers=="function"?n.reducers(Zm()):n.reducers)||{},g=Object.keys(s),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(P,x){let E=typeof P=="string"?P:P.type;if(!E)throw new Error(xe(12));if(E in u.sliceCaseReducersByType)throw new Error(xe(13));return u.sliceCaseReducersByType[E]=x,a},addMatcher(P,x){return u.sliceMatchers.push({matcher:P,reducer:x}),a},exposeAction(P,x){return u.actionCreators[P]=x,a},exposeCaseReducer(P,x){return u.sliceCaseReducersByName[P]=x,a}};g.forEach(P=>{let x=s[P],E={reducerName:P,type:Km(i,P),createNotation:typeof n.reducers=="function"};ty(x)?ny(E,x,a,t):ey(E,x,a)});function m(){let[P={},x=[],E=void 0]=typeof n.extraReducers=="function"?cu(n.extraReducers):[n.extraReducers],j={...P,...u.sliceCaseReducersByType};return ge(n.initialState,O=>{for(let k in j)O.addCase(k,j[k]);for(let k of u.sliceMatchers)O.addMatcher(k.matcher,k.reducer);for(let k of x)O.addMatcher(k.matcher,k.reducer);E&&O.addDefaultCase(E)})}let h=P=>P,S=new Map,y;function v(P,x){return y||(y=m()),y(P,x)}function R(){return y||(y=m()),y.getInitialState()}function I(P,x=!1){function E(O){let k=O[P];return typeof k>"u"&&x&&(k=R()),k}function j(O=h){let k=eu(S,x,()=>new WeakMap);return eu(k,O,()=>{let F={};for(let[T,M]of Object.entries(n.selectors??{}))F[T]=Xm(M,O,R,x);return F})}return{reducerPath:P,getSelectors:j,get selectors(){return j(E)},selectSlice:E}}let b={name:i,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:R,...I(o),injectInto(P,{reducerPath:x,...E}={}){let j=x??o;return P.inject({reducerPath:j,reducer:v},E),{...b,...I(j,!0)}}};return b}}function Xm(e,t,r,n){function i(o,...s){let g=t(o);return typeof g>"u"&&n&&(g=r()),e(g,...s)}return i.unwrapped=e,i}var Ot=Jm();function Zm(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function ey({type:e,reducerName:t,createNotation:r},n,i){let o,s;if("reducer"in n){if(r&&!ry(n))throw new Error(xe(17));o=n.reducer,s=n.prepare}else o=n;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?_(e,s):_(e))}function ty(e){return e._reducerDefinitionType==="asyncThunk"}function ry(e){return e._reducerDefinitionType==="reducerWithPrepare"}function ny({type:e,reducerName:t},r,n,i){if(!i)throw new Error(xe(18));let{payloadCreator:o,fulfilled:s,pending:g,rejected:u,settled:a,options:m}=r,h=i(e,o,m);n.exposeAction(t,h),s&&n.addCase(h.fulfilled,s),g&&n.addCase(h.pending,g),u&&n.addCase(h.rejected,u),a&&n.addMatcher(h.settled,a),n.exposeCaseReducer(t,{fulfilled:s||Vn,pending:g||Vn,rejected:u||Vn,settled:a||Vn})}function Vn(){}var iy="task",du="listener",pu="completed",Xo="cancelled",oy=`task-${Xo}`,sy=`task-${pu}`,Ko=`${du}-${Xo}`,ay=`${du}-${pu}`,zn=class{constructor(e){se(this,"name","TaskAbortError");se(this,"message");this.code=e,this.message=`${iy} ${Xo} (reason: ${e})`}},Zo=(e,t)=>{if(typeof e!="function")throw new TypeError(xe(32))},Qn=()=>{},fu=(e,t=Qn)=>(e.catch(t),e),gu=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),kt=(e,t)=>{let r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Pt=e=>{if(e.aborted){let{reason:t}=e;throw new zn(t)}};function mu(e,t){let r=Qn;return new Promise((n,i)=>{let o=()=>i(new zn(e.reason));if(e.aborted){o();return}r=gu(e,o),t.finally(()=>r()).then(n,i)}).finally(()=>{r=Qn})}var cy=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof zn?"cancelled":"rejected",error:r}}finally{t?.()}},Bn=e=>t=>fu(mu(e,t).then(r=>(Pt(e),r))),yu=e=>{let t=Bn(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:er}=Object,nu={},Wn="listenerMiddleware",uy=(e,t)=>{let r=n=>gu(e,()=>kt(n,e.reason));return(n,i)=>{Zo(n,"taskExecutor");let o=new c.AbortController;r(o);let s=cy(async()=>{Pt(e),Pt(o.signal);let g=await n({pause:Bn(o.signal),delay:yu(o.signal),signal:o.signal});return Pt(o.signal),g},()=>kt(o,sy));return i?.autoJoin&&t.push(s.catch(Qn)),{result:Bn(e)(s),cancel(){kt(o,oy)}}}},ly=(e,t)=>{let r=async(n,i)=>{Pt(t);let o=()=>{},g=[new Promise((u,a)=>{let m=e({predicate:n,effect:(h,S)=>{S.unsubscribe(),u([h,S.getState(),S.getOriginalState()])}});o=()=>{m(),a()}})];i!=null&&g.push(new Promise(u=>setTimeout(u,i,null)));try{let u=await mu(t,Promise.race(g));return Pt(t),u}finally{o()}};return(n,i)=>fu(r(n,i))},hu=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:o}=e;if(t)i=_(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(xe(21));return Zo(o,"options.listener"),{predicate:i,type:t,effect:o}},Su=er(e=>{let{type:t,predicate:r,effect:n}=hu(e);return{id:Jr(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(xe(22))}}},{withTypes:()=>Su}),iu=(e,t)=>{let{type:r,effect:n,predicate:i}=hu(t);return Array.from(e.values()).find(o=>(typeof r=="string"?o.type===r:o.predicate===i)&&o.effect===n)},Jo=e=>{e.pending.forEach(t=>{kt(t,Ko)})},dy=e=>()=>{e.forEach(Jo),e.clear()},ou=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},vu=er(_(`${Wn}/add`),{withTypes:()=>vu}),py=_(`${Wn}/removeAll`),Au=er(_(`${Wn}/remove`),{withTypes:()=>Au}),fy=(...e)=>{console.error(`${Wn}/error`,...e)},wu=(e={})=>{let t=new Map,{extra:r,onError:n=fy}=e;Zo(n,"onError");let i=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),h=>{m.unsubscribe(),h?.cancelActive&&Jo(m)}),o=m=>{let h=iu(t,m)??Su(m);return i(h)};er(o,{withTypes:()=>o});let s=m=>{let h=iu(t,m);return h&&(h.unsubscribe(),m.cancelActive&&Jo(h)),!!h};er(s,{withTypes:()=>s});let g=async(m,h,S,y)=>{let v=new c.AbortController,R=ly(o,v.signal),I=[];try{m.pending.add(v),await Promise.resolve(m.effect(h,er({},S,{getOriginalState:y,condition:(b,P)=>R(b,P).then(Boolean),take:R,delay:yu(v.signal),pause:Bn(v.signal),extra:r,signal:v.signal,fork:uy(v.signal,I),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((b,P,x)=>{b!==v&&(kt(b,Ko),x.delete(b))})},cancel:()=>{kt(v,Ko),m.pending.delete(v)},throwIfCancelled:()=>{Pt(v.signal)}})))}catch(b){b instanceof zn||ou(n,b,{raisedBy:"effect"})}finally{await Promise.all(I),kt(v,ay),m.pending.delete(v)}},u=dy(t);return{middleware:m=>h=>S=>{if(!Kt(S))return h(S);if(vu.match(S))return o(S.payload);if(py.match(S)){u();return}if(Au.match(S))return s(S.payload);let y=m.getState(),v=()=>{if(y===nu)throw new Error(xe(23));return y},R;try{if(R=h(S),t.size>0){let I=m.getState(),b=Array.from(t.values());for(let P of b){let x=!1;try{x=P.predicate(S,I,y)}catch(E){x=!1,ou(n,E,{raisedBy:"predicate"})}x&&g(P,S,m,v)}}}finally{y=nu}return R},startListening:o,stopListening:s,clearListeners:u}};var RR=Symbol.for("rtk-state-proxy-original");function xe(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}f();l();p();d();var Y=new W({required:!0,emptyAllowed:!1}),me=new W({required:!1,emptyAllowed:!1}),Ve=new W({required:!0,emptyAllowed:!0}),NR=new W({required:!1,emptyAllowed:!0}),Cu=new Le({each:Y,required:!0}),bu=new W({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),xu=new W({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),_R=new W({required:!0,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),gy=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),es=(e,t)=>{if("required"in t)return{payload:new Ue({value:t}).validate({value:e}).value};let i=new ae({options:{required:!0},values:t}).validate(e);if(i)throw new ko(i);return{payload:e}},G=(e,t)=>{try{return es(e,t)}catch(r){return{payload:e,error:gy(r)}}};var Yn=(e,t,r,n)=>{let i=`Check the options of ${n}`;return my(e,t,r,i,"Controller initialization error")},my=(e,t,r,n,i)=>{try{return t.validate(r,n)}catch(o){throw e.logger.error(o,i),o}};var Kn=_("caseAssistConfiguration/set",e=>G(e,{caseAssistId:Y,locale:me,proxyBaseUrl:new W({required:!1,url:!0})}));f();l();p();d();f();l();p();d();var Ru=()=>({caseAssistId:"",locale:"en-US"});var ut=ge(Ru(),e=>{e.addCase(Kn,(t,r)=>{t.caseAssistId=r.payload.caseAssistId,t.locale=r.payload.locale,t.apiBaseUrl=r.payload.proxyBaseUrl})});f();l();p();d();f();l();p();d();f();l();p();d();var Eu={q:new W,enableQuerySyntax:new fe,aq:new W,cq:new W,firstResult:new we({min:0}),numberOfResults:new we({min:0}),sortCriteria:new W,f:new ae,fExcluded:new ae,cf:new ae,nf:new ae,mnf:new ae,df:new ae,debug:new fe,sf:new ae,tab:new W,af:new ae};var Jn=_("searchParameters/restore",e=>G(e,Eu)),Iu=_("searchParameters/restoreTab",e=>G(e,Y));f();l();p();d();var ku=_("debug/enable"),Pu=_("debug/disable");f();l();p();d();var Xn=()=>!1;var Fu=ge(Xn(),e=>{e.addCase(ku,()=>!0).addCase(Pu,()=>!1).addCase(Jn,(t,r)=>r.payload.debug??t)});f();l();p();d();var Zn=_("searchHub/set",e=>G(e,new W({required:!0,emptyAllowed:!0})));f();l();p();d();f();l();p();d();f();l();p();d();var nr="3.45.0",Ou=["@coveo/atomic","@coveo/quantic"];var ts=()=>me,Tu=()=>Y,ir=_("configuration/updateBasicConfiguration",e=>G(e,{accessToken:me,environment:new W({required:!1,constrainTo:["prod","hipaa","stg","dev"]}),organizationId:me})),ei=_("configuration/updateSearchConfiguration",e=>G(e,{proxyBaseUrl:new W({required:!1,url:!0}),pipeline:new W({required:!1,emptyAllowed:!0}),searchHub:me,timezone:me,locale:me,authenticationProviders:new Le({required:!1,each:Y})})),yy={enabled:new fe({default:!0}),originContext:ts(),originLevel2:ts(),originLevel3:ts(),proxyBaseUrl:new W({required:!1,url:!0}),runtimeEnvironment:new xt,anonymous:new fe({default:!1}),deviceId:me,userDisplayName:me,documentLocation:me,trackingId:xu,analyticsMode:new W({constrainTo:["legacy","next"],required:!1,default:"next"}),source:new ae({options:{required:!1},values:Ou.reduce((e,t)=>(e[t]=bu,e),{})})},ti=_("configuration/updateAnalyticsConfiguration",e=>G(e,yy)),ri=_("configuration/analytics/disable"),ni=_("configuration/analytics/enable"),Du=_("configuration/analytics/originlevel2",e=>G(e,{originLevel2:Tu()})),qu=_("configuration/analytics/originlevel3",e=>G(e,{originLevel3:Tu()})),ju=_("knowledge/setAgentId",e=>G(e,new W({required:!0})));f();l();p();d();var hy=_("history/undo"),Sy=_("history/redo"),He=_("history/snapshot"),gI=ie("history/back",async(e,{dispatch:t})=>{t(hy()),await t(ii())}),mI=ie("history/forward",async(e,{dispatch:t})=>{t(Sy()),await t(ii())}),ii=ie("history/change",async(e,{getState:t})=>t().history.present);f();l();p();d();var or=()=>"default";var Mu=ge(or(),e=>{e.addCase(Zn,(t,r)=>r.payload).addCase(ii.fulfilled,(t,r)=>r.payload?.searchHub??t).addCase(ei,(t,r)=>r.payload.searchHub||t)});f();l();p();d();f();l();p();d();f();l();p();d();f();l();p();d();f();l();p();d();f();l();p();d();var Nu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function vy(e){return typeof e=="string"&&Nu.test(e)}var rs=vy;f();l();p();d();var ve=[];for(let e=0;e<256;++e)ve.push((e+256).toString(16).slice(1));function _u(e,t=0){return(ve[e[t+0]]+ve[e[t+1]]+ve[e[t+2]]+ve[e[t+3]]+"-"+ve[e[t+4]]+ve[e[t+5]]+"-"+ve[e[t+6]]+ve[e[t+7]]+"-"+ve[e[t+8]]+ve[e[t+9]]+"-"+ve[e[t+10]]+ve[e[t+11]]+ve[e[t+12]]+ve[e[t+13]]+ve[e[t+14]]+ve[e[t+15]]).toLowerCase()}f();l();p();d();var ns,Ay=new Uint8Array(16);function is(){if(!ns){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ns=crypto.getRandomValues.bind(crypto)}return ns(Ay)}f();l();p();d();f();l();p();d();var wy=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),os={randomUUID:wy};function Cy(e,t,r){e=e||{};let n=e.random??e.rng?.()??is();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)t[r+i]=n[i];return t}return _u(n)}function by(e,t,r){return os.randomUUID&&!t&&!e?os.randomUUID():Cy(e,t,r)}var ss=by;f();l();p();d();function Uu(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}function xy({config:e,environment:t,event:r,listenerManager:n}){let{url:i,token:o,mode:s}=e;s!=="disabled"&&(n.call(r),t.send(i,o,r))}var Lu="visitorId";function Ry(e){return{getClientId:()=>{let t=e.get(),r=t.storage,n=r.getItem(Lu),i=n&&rs(n)?n:t.generateUUID();return r.setItem(Lu,i),i}}}var Hu="1.2.15",as=128,Gu=192,Vu=224,Qu=240,Ey=248;function Iy(e){return(e&Ey)===Qu?4:(e&Qu)===Vu?3:(e&Vu)===Gu?2:1}function ky(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let n=Number.parseInt(e.substring(r-2,r),16);if((n&as)!=as)break;if(r-=3,(n&Gu)!=as){t-r>=Iy(n)*3&&(r=t);break}}return e.substring(0,r)}function Py(e){let{trackingId:t}=e;return{trackingId:t}}function Fy(e){return(e.source||[]).concat([`relay@${Hu}`])}function zu(e,t,r,n){let{getReferrer:i,getLocation:o,getUserAgent:s}=r,g=Py(t),u=n.getClientId();return Object.freeze({type:e,config:g,ts:Date.now(),source:Fy(t),clientId:u,userAgent:s(),referrer:Bu(i()),location:Bu(o())})}function Bu(e){return e!==null?ky(e,1024):null}function Oy(e,t,r,n,i){return{...t,meta:zu(e,r,n,i)}}var Ty="*";function Dy(){let e=[];function t({type:u,callback:a}){return e.findIndex(m=>m.type===u&&m.callback===a)}function r(u,a){return u.type==="*"||a===u.type}function n(u){return t(u)<0&&e.push(u),()=>g(u.type,u.callback)}function i(u){e.forEach(a=>{if(r(a,u.meta.type))try{a.callback(u)}catch(m){console.error(m)}})}function o(u){if(u===Ty)e.length=0;else for(let a=e.length-1;a>=0;a--)e[a].type===u&&e.splice(a,1)}function s(u){let a=t(u);a>=0&&e.splice(a,1)}function g(u,a){a?s({type:u,callback:a}):o(u)}return{add:n,call:i,remove:g}}function $u({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source},...!!n.environment&&{environment:n.environment}})}function qy(e){let t=$u(e);return{get:()=>t,update:r=>{t=$u({...t,...r})}}}var cs=jy();function jy(){let e="coveo_",t=r=>{let n=r.split(".").slice(-2);return n.length==2?n.join("."):""};return{getItem(r){let n=`${e}${r}=`,i=document.cookie.split(";");for(let o of i){let s=o.replace(/^\s+/,"");if(s.lastIndexOf(n,0)===0)return s.substring(n.length,s.length)}return null},setItem(r,n,i){let o=t(window.location.hostname),s=`;expires=${new Date(new Date().getTime()+i).toUTCString()}`,g=o?`;domain=${o}`:"";document.cookie=`${e}${r}=${n}${s}${g};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function My(){return{getItem(e){return cs.getItem(e)||localStorage.getItem(e)},removeItem(e){cs.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),cs.setItem(e,t,31556952e3)}}}function Ny(){let e=document.referrer;return e===""?null:e}function us(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(Uu().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>Ny(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>ss(),storage:My()}}function _y(){try{let e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return e instanceof DOMException&&e.name==="QuotaExceededError"&&localStorage&&localStorage.length!==0}}function Uy(){return{getItem(){return null},removeItem(){},setItem(){}}}function Ly(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:Uy()}}function Vy(e){let t=e.get().mode!=="disabled",r=e.get().environment,n=Ly();return t&&r?{storage:n.storage,...r,runtime:"custom"}:t&&Qy()&&_y()?us():n}function Qy(){try{return typeof window=="object"}catch{return!1}}function By(e){return{get:()=>Object.freeze(Vy(e))}}function Wu(e){let t=qy(e),r=Dy(),n=By(t),i=Ry(n);return{emit:(o,s)=>{let g=t.get(),u=n.get(),a=Oy(o,s,g,u,i);return xy({config:g,environment:u,event:a,listenerManager:r})},getMeta:o=>zu(o,t.get(),n.get(),i),on:(o,s)=>r.add({type:o,callback:s}),off:(o,s)=>r.remove(o,s),updateConfig:o=>t.update(o),version:Hu}}f();l();p();d();function Yu(){return typeof window<"u"&&typeof document<"u"}f();l();p();d();var sr=de(e=>e.source,e=>Object.entries(e).map(([t,r])=>`${t}@${r}`).concat(`@coveo/headless@${nr}`));var Xr=de(e=>e.configuration.organizationId,e=>e.configuration.environment,e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>sr(e.configuration.analytics),(e,t)=>t,(e,t,r,{trackingId:n,apiBaseUrl:i,enabled:o},s,g)=>{let u=Hy(g);return Wu({mode:o?"emit":"disabled",url:i??En(e,t),token:r,trackingId:n??null,source:s,environment:u})}),$y={generateUUID:()=>"",getLocation:()=>null,getReferrer:()=>null,getUserAgent:()=>null,send:()=>{},storage:{getItem:()=>null,setItem:()=>{},removeItem:()=>{}}},Hy=e=>{if(!e)return;let t=e();return{...Yu()?us():$y,generateUUID:()=>t.clientId,getLocation:()=>t.location,getReferrer:()=>t.referrer,getUserAgent:()=>t.userAgent}};f();l();p();d();f();l();p();d();function Ku(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}var Ju=Be;function ul(e,t){if(e===t||!(Ju(e)&&Ju(t)||Array.isArray(e)&&Array.isArray(t)))return t;let r=Object.keys(t),n=Object.keys(e),i=r.length===n.length,o=Array.isArray(t)?[]:{};for(let s of r)o[s]=ul(e[s],t[s]),i&&(i=e[s]===o[s]);return i?e:o}function ar(e){let t=0;for(let r in e)t++;return t}var Xu=e=>[].concat(...e);function Gy(e){return new RegExp("(^|:)//").test(e)}function zy(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function ai(e){return e!=null}function Wy(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var Yy=e=>e.replace(/\/$/,""),Ky=e=>e.replace(/^\//,"");function Jy(e,t){if(!e)return t;if(!t)return e;if(Gy(t))return t;let r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=Yy(e),t=Ky(t),`${e}${r}${t}`}function Xy(e,t,r){return e.has(t)?e.get(t):e.set(t,r).get(t)}var Zu=(...e)=>w(...e),Zy=e=>e.status>=200&&e.status<=299,eh=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function el(e){if(!Be(e))return e;let t={...e};for(let[r,n]of Object.entries(t))n===void 0&&delete t[r];return t}function ll({baseUrl:e,prepareHeaders:t=h=>h,fetchFn:r=Zu,paramsSerializer:n,isJsonContentType:i=eh,jsonContentType:o="application/json",jsonReplacer:s,timeout:g,responseHandler:u,validateStatus:a,...m}={}){return typeof w>"u"&&r===Zu&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(S,y,v)=>{let{getState:R,extra:I,endpoint:b,forced:P,type:x}=y,E,{url:j,headers:O=new C(m.headers),params:k=void 0,responseHandler:F=u??"json",validateStatus:T=a??Zy,timeout:M=g,...B}=typeof S=="string"?{url:S}:S,V,U=y.signal;M&&(V=new c.AbortController,y.signal.addEventListener("abort",V.abort),U=V.signal);let N={...m,signal:U,...B};O=new C(el(O)),N.headers=await t(O,{getState:R,arg:S,extra:I,endpoint:b,forced:P,type:x,extraOptions:v})||O;let Q=J=>typeof J=="object"&&(Be(J)||Array.isArray(J)||typeof J.toJSON=="function");if(!N.headers.has("content-type")&&Q(N.body)&&N.headers.set("content-type",o),Q(N.body)&&i(N.headers)&&(N.body=JSON.stringify(N.body,s)),k){let J=~j.indexOf("?")?"&":"?",te=n?n(k):new URLSearchParams(el(k));j+=J+te}j=Jy(e,j);let L=new Request(j,N);E={request:new Request(j,N)};let H,z=!1,Z=V&&setTimeout(()=>{z=!0,V.abort()},M);try{H=await r(L)}catch(J){return{error:{status:z?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(J)},meta:E}}finally{Z&&clearTimeout(Z),V?.signal.removeEventListener("abort",V.abort)}let ne=H.clone();E.response=ne;let X,ee="";try{let J;if(await Promise.all([h(H,F).then(te=>X=te,te=>J=te),ne.text().then(te=>ee=te,()=>{})]),J)throw J}catch(J){return{error:{status:"PARSING_ERROR",originalStatus:H.status,data:ee,error:String(J)},meta:E}}return T(H,X)?{data:X,meta:E}:{error:{status:H.status,data:X},meta:E}};async function h(S,y){if(typeof y=="function")return y(S);if(y==="content-type"&&(y=i(S.headers)?"json":"text"),y==="json"){let v=await S.text();return v.length?JSON.parse(v):null}return S.text()}}var cr=class{constructor(e,t=void 0){this.value=e,this.meta=t}};async function th(e=0,t=5){let r=Math.min(e,t),n=~~((Math.random()+.4)*(300<<r));await new Promise(i=>setTimeout(o=>i(o),n))}function rh(e,t){throw Object.assign(new cr({error:e,meta:t}),{throwImmediately:!0})}var tl={},nh=(e,t)=>async(r,n,i)=>{let o=[5,(t||tl).maxRetries,(i||tl).maxRetries].filter(m=>m!==void 0),[s]=o.slice(-1),u={maxRetries:s,backoff:th,retryCondition:(m,h,{attempt:S})=>S<=s,...t,...i},a=0;for(;;)try{let m=await e(r,n,i);if(m.error)throw new cr(m);return m}catch(m){if(a++,m.throwImmediately){if(m instanceof cr)return m.value;throw m}if(m instanceof cr&&!u.retryCondition(m.value.error,r,{attempt:a,baseQueryApi:n,extraOptions:i}))return m.value;await u.backoff(a,u.maxRetries)}},ci=Object.assign(nh,{fail:rh}),gs=_("__rtkq/focused"),dl=_("__rtkq/unfocused"),ms=_("__rtkq/online"),pl=_("__rtkq/offline");function ys(e){return e.type==="query"}function ih(e){return e.type==="mutation"}function hs(e){return e.type==="infinitequery"}function Ss(e,t,r,n,i,o){return oh(e)?e(t,r,n,i).filter(ai).map(ds).map(o):Array.isArray(e)?e.map(ds).map(o):[]}function oh(e){return typeof e=="function"}function ds(e){return typeof e=="string"?{type:e}:e}function sh(e,t){return e.catch(t)}var en=Symbol("forceQueryFn"),ps=e=>typeof e[en]=="function";function ah({serializeQueryArgs:e,queryThunk:t,infiniteQueryThunk:r,mutationThunk:n,api:i,context:o}){let s=new Map,g=new Map,{unsubscribeQueryResult:u,removeMutationResult:a,updateSubscriptionOptions:m}=i.internalActions;return{buildInitiateQuery:b,buildInitiateInfiniteQuery:P,buildInitiateMutation:x,getRunningQueryThunk:h,getRunningMutationThunk:S,getRunningQueriesThunk:y,getRunningMutationsThunk:v};function h(E,j){return O=>{let k=o.endpointDefinitions[E],F=e({queryArgs:j,endpointDefinition:k,endpointName:E});return s.get(O)?.[F]}}function S(E,j){return O=>g.get(O)?.[j]}function y(){return E=>Object.values(s.get(E)||{}).filter(ai)}function v(){return E=>Object.values(g.get(E)||{}).filter(ai)}function R(E){}function I(E,j){let O=(k,{subscribe:F=!0,forceRefetch:T,subscriptionOptions:M,[en]:B,...V}={})=>(U,N)=>{let Q=e({queryArgs:k,endpointDefinition:j,endpointName:E}),L,$={...V,type:"query",subscribe:F,forceRefetch:T,subscriptionOptions:M,endpointName:E,originalArgs:k,queryCacheKey:Q,[en]:B};if(ys(j))L=t($);else{let{direction:oe,initialPageParam:ce}=V;L=r({...$,direction:oe,initialPageParam:ce})}let H=i.endpoints[E].select(k),z=U(L),Z=H(N());let{requestId:ne,abort:X}=z,ee=Z.requestId!==ne,J=s.get(U)?.[Q],te=()=>H(N()),le=Object.assign(B?z.then(te):ee&&!J?Promise.resolve(Z):Promise.all([J,z]).then(te),{arg:k,requestId:ne,subscriptionOptions:M,queryCacheKey:Q,abort:X,async unwrap(){let oe=await le;if(oe.isError)throw oe.error;return oe.data},refetch:()=>U(O(k,{subscribe:!1,forceRefetch:!0})),unsubscribe(){F&&U(u({queryCacheKey:Q,requestId:ne}))},updateSubscriptionOptions(oe){le.subscriptionOptions=oe,U(m({endpointName:E,requestId:ne,queryCacheKey:Q,options:oe}))}});if(!J&&!ee&&!B){let oe=Xy(s,U,{});oe[Q]=le,le.then(()=>{delete oe[Q],ar(oe)||s.delete(U)})}return le};return O}function b(E,j){return I(E,j)}function P(E,j){return I(E,j)}function x(E){return(j,{track:O=!0,fixedCacheKey:k}={})=>(F,T)=>{let M=n({type:"mutation",endpointName:E,originalArgs:j,track:O,fixedCacheKey:k}),B=F(M);let{requestId:V,abort:U,unwrap:N}=B,Q=sh(B.unwrap().then(z=>({data:z})),z=>({error:z})),L=()=>{F(a({requestId:V,fixedCacheKey:k}))},$=Object.assign(Q,{arg:B.arg,requestId:V,abort:U,unwrap:N,reset:L}),H=g.get(F)||{};return g.set(F,H),H[V]=$,$.then(()=>{delete H[V],ar(H)||g.delete(F)}),k&&(H[k]=$,$.then(()=>{H[k]===$&&(delete H[k],ar(H)||g.delete(F))})),$}}}function ch(e){return e}var oi=(e={})=>({...e,[Wr]:!0});function uh({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:n,api:i,assertTagType:o,selectors:s}){let g=(F,T,M,B)=>(V,U)=>{let N=r[F],Q=n({queryArgs:T,endpointDefinition:N,endpointName:F});if(V(i.internalActions.queryResultPatched({queryCacheKey:Q,patches:M})),!B)return;let L=i.endpoints[F].select(T)(U()),$=Ss(N.providesTags,L.data,void 0,T,{},o);V(i.internalActions.updateProvidedBy({queryCacheKey:Q,providedTags:$}))};function u(F,T,M=0){let B=[T,...F];return M&&B.length>M?B.slice(0,-1):B}function a(F,T,M=0){let B=[...F,T];return M&&B.length>M?B.slice(1):B}let m=(F,T,M,B=!0)=>(V,U)=>{let Q=i.endpoints[F].select(T)(U()),L={patches:[],inversePatches:[],undo:()=>V(i.util.patchQueryData(F,T,L.inversePatches,B))};if(Q.status==="uninitialized")return L;let $;if("data"in Q)if(Ie(Q.data)){let[H,z,Z]=Un(Q.data,M);L.patches.push(...z),L.inversePatches.push(...Z),$=H}else $=M(Q.data),L.patches.push({op:"replace",path:[],value:$}),L.inversePatches.push({op:"replace",path:[],value:Q.data});return L.patches.length===0||V(i.util.patchQueryData(F,T,L.patches,B)),L},h=(F,T,M)=>B=>B(i.endpoints[F].initiate(T,{subscribe:!1,forceRefetch:!0,[en]:()=>({data:M})})),S=(F,T)=>F.query&&F[T]?F[T]:ch,y=async(F,{signal:T,abort:M,rejectWithValue:B,fulfillWithValue:V,dispatch:U,getState:N,extra:Q})=>{let L=r[F.endpointName];try{let $=S(L,"transformResponse"),H={signal:T,abort:M,dispatch:U,getState:N,extra:Q,endpoint:F.endpointName,type:F.type,forced:F.type==="query"?v(F,N()):void 0,queryCacheKey:F.type==="query"?F.queryCacheKey:void 0},z=F.type==="query"?F[en]:void 0,Z,ne=async(ee,J,te,le)=>{if(J==null&&ee.pages.length)return Promise.resolve({data:ee});let oe={queryArg:F.originalArgs,pageParam:J},ce=await X(oe),pe=le?u:a;return{data:{pages:pe(ee.pages,ce.data,te),pageParams:pe(ee.pageParams,J,te)}}};async function X(ee){let J,{extraOptions:te}=L;if(z?J=z():L.query?J=await t(L.query(ee),H,te):J=await L.queryFn(ee,H,te,oe=>t(oe,H,te)),typeof process<"u",J.error)throw new cr(J.error,J.meta);let le=await $(J.data,J.meta,ee);return{...J,data:le}}if(F.type==="query"&&"infiniteQueryOptions"in L){let{infiniteQueryOptions:ee}=L,{maxPages:J=1/0}=ee,te,le={pages:[],pageParams:[]},oe=s.selectQueryEntry(N(),F.queryCacheKey)?.data,pe=v(F,N())&&!F.direction||!oe?le:oe;if("direction"in F&&F.direction&&pe.pages.length){let Re=F.direction==="backward",at=(Re?fl:fs)(ee,pe);te=await ne(pe,at,J,Re)}else{let{initialPageParam:Re=ee.initialPageParam}=F,De=oe?.pageParams??[],at=De[0]??Re,Lt=De.length;te=await ne(pe,at,J),z&&(te={data:te.data.pages[0]});for(let Vt=1;Vt<Lt;Vt++){let Or=fs(ee,te.data);te=await ne(te.data,Or,J)}}Z=te}else Z=await X(F.originalArgs);return V(Z.data,oi({fulfilledTimeStamp:Date.now(),baseQueryMeta:Z.meta}))}catch($){let H=$;if(H instanceof cr){let z=S(L,"transformErrorResponse");try{return B(await z(H.value,H.meta,F.originalArgs),oi({baseQueryMeta:H.meta}))}catch(Z){H=Z}}throw typeof process<"u",console.error(H),H}};function v(F,T){let M=s.selectQueryEntry(T,F.queryCacheKey),B=s.selectConfig(T).refetchOnMountOrArgChange,V=M?.fulfilledTimeStamp,U=F.forceRefetch??(F.subscribe&&B);return U?U===!0||(Number(new Date)-Number(V))/1e3>=U:!1}let R=()=>ie(`${e}/executeQuery`,y,{getPendingMeta({arg:T}){let M=r[T.endpointName];return oi({startedTimeStamp:Date.now(),...hs(M)?{direction:T.direction}:{}})},condition(T,{getState:M}){let B=M(),V=s.selectQueryEntry(B,T.queryCacheKey),U=V?.fulfilledTimeStamp,N=T.originalArgs,Q=V?.originalArgs,L=r[T.endpointName],$=T.direction;return ps(T)?!0:V?.status==="pending"?!1:v(T,B)||ys(L)&&L?.forceRefetch?.({currentArg:N,previousArg:Q,endpointState:V,state:B})?!0:!(U&&!$)},dispatchConditionRejection:!0}),I=R(),b=R(),P=ie(`${e}/executeMutation`,y,{getPendingMeta(){return oi({startedTimeStamp:Date.now()})}}),x=F=>"force"in F,E=F=>"ifOlderThan"in F,j=(F,T,M)=>(B,V)=>{let U=x(M)&&M.force,N=E(M)&&M.ifOlderThan,Q=($=!0)=>{let H={forceRefetch:$,isPrefetch:!0};return i.endpoints[F].initiate(T,H)},L=i.endpoints[F].select(T)(V());if(U)B(Q());else if(N){let $=L?.fulfilledTimeStamp;if(!$){B(Q());return}(Number(new Date)-Number(new Date($)))/1e3>=N&&B(Q())}else B(Q(!1))};function O(F){return T=>T?.meta?.arg?.endpointName===F}function k(F,T){return{matchPending:tr(Hn(F),O(T)),matchFulfilled:tr(tt(F),O(T)),matchRejected:tr(Ft(F),O(T))}}return{queryThunk:I,mutationThunk:P,infiniteQueryThunk:b,prefetch:j,updateQueryData:m,upsertQueryData:h,patchQueryData:g,buildMatchThunkActions:k}}function fs(e,{pages:t,pageParams:r}){let n=t.length-1;return e.getNextPageParam(t[n],t,r[n],r)}function fl(e,{pages:t,pageParams:r}){return e.getPreviousPageParam?.(t[0],t,r[0],r)}function gl(e,t,r,n){return Ss(r[e.meta.arg.endpointName][t],tt(e)?e.payload:void 0,Kr(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function si(e,t,r){let n=e[t];n&&r(n)}function tn(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function rl(e,t,r){let n=e[tn(t)];n&&r(n)}var Zr={};function lh({reducerPath:e,queryThunk:t,mutationThunk:r,serializeQueryArgs:n,context:{endpointDefinitions:i,apiUid:o,extractRehydrationInfo:s,hasRehydrationInfo:g},assertTagType:u,config:a}){let m=_(`${e}/resetApiState`);function h(O,k,F,T){var M;O[M=k.queryCacheKey]??(O[M]={status:"uninitialized",endpointName:k.endpointName}),si(O,k.queryCacheKey,B=>{B.status="pending",B.requestId=F&&B.requestId?B.requestId:T.requestId,k.originalArgs!==void 0&&(B.originalArgs=k.originalArgs),B.startedTimeStamp=T.startedTimeStamp;let V=i[T.arg.endpointName];hs(V)&&"direction"in k&&(B.direction=k.direction)})}function S(O,k,F,T){si(O,k.arg.queryCacheKey,M=>{if(M.requestId!==k.requestId&&!T)return;let{merge:B}=i[k.arg.endpointName];if(M.status="fulfilled",B)if(M.data!==void 0){let{fulfilledTimeStamp:V,arg:U,baseQueryMeta:N,requestId:Q}=k,L=et(M.data,$=>B($,F,{arg:U.originalArgs,baseQueryMeta:N,fulfilledTimeStamp:V,requestId:Q}));M.data=L}else M.data=F;else M.data=i[k.arg.endpointName].structuralSharing??!0?ul(Fe(M.data)?Go(M.data):M.data,F):F;delete M.error,M.fulfilledTimeStamp=k.fulfilledTimeStamp})}let y=Ot({name:`${e}/queries`,initialState:Zr,reducers:{removeQueryResult:{reducer(O,{payload:{queryCacheKey:k}}){delete O[k]},prepare:rr()},cacheEntriesUpserted:{reducer(O,k){for(let F of k.payload){let{queryDescription:T,value:M}=F;h(O,T,!0,{arg:T,requestId:k.meta.requestId,startedTimeStamp:k.meta.timestamp}),S(O,{arg:T,requestId:k.meta.requestId,fulfilledTimeStamp:k.meta.timestamp,baseQueryMeta:{}},M,!0)}},prepare:O=>({payload:O.map(T=>{let{endpointName:M,arg:B,value:V}=T,U=i[M];return{queryDescription:{type:"query",endpointName:M,originalArgs:T.arg,queryCacheKey:n({queryArgs:B,endpointDefinition:U,endpointName:M})},value:V}}),meta:{[Wr]:!0,requestId:Jr(),timestamp:Date.now()}})},queryResultPatched:{reducer(O,{payload:{queryCacheKey:k,patches:F}}){si(O,k,T=>{T.data=Wo(T.data,F.concat())})},prepare:rr()}},extraReducers(O){O.addCase(t.pending,(k,{meta:F,meta:{arg:T}})=>{let M=ps(T);h(k,T,M,F)}).addCase(t.fulfilled,(k,{meta:F,payload:T})=>{let M=ps(F.arg);S(k,F,T,M)}).addCase(t.rejected,(k,{meta:{condition:F,arg:T,requestId:M},error:B,payload:V})=>{si(k,T.queryCacheKey,U=>{if(!F){if(U.requestId!==M)return;U.status="rejected",U.error=V??B}})}).addMatcher(g,(k,F)=>{let{queries:T}=s(F);for(let[M,B]of Object.entries(T))(B?.status==="fulfilled"||B?.status==="rejected")&&(k[M]=B)})}}),v=Ot({name:`${e}/mutations`,initialState:Zr,reducers:{removeMutationResult:{reducer(O,{payload:k}){let F=tn(k);F in O&&delete O[F]},prepare:rr()}},extraReducers(O){O.addCase(r.pending,(k,{meta:F,meta:{requestId:T,arg:M,startedTimeStamp:B}})=>{M.track&&(k[tn(F)]={requestId:T,status:"pending",endpointName:M.endpointName,startedTimeStamp:B})}).addCase(r.fulfilled,(k,{payload:F,meta:T})=>{T.arg.track&&rl(k,T,M=>{M.requestId===T.requestId&&(M.status="fulfilled",M.data=F,M.fulfilledTimeStamp=T.fulfilledTimeStamp)})}).addCase(r.rejected,(k,{payload:F,error:T,meta:M})=>{M.arg.track&&rl(k,M,B=>{B.requestId===M.requestId&&(B.status="rejected",B.error=F??T)})}).addMatcher(g,(k,F)=>{let{mutations:T}=s(F);for(let[M,B]of Object.entries(T))(B?.status==="fulfilled"||B?.status==="rejected")&&M!==B?.requestId&&(k[M]=B)})}}),R=Ot({name:`${e}/invalidation`,initialState:Zr,reducers:{updateProvidedBy:{reducer(O,k){var M,B;let{queryCacheKey:F,providedTags:T}=k.payload;for(let V of Object.values(O))for(let U of Object.values(V)){let N=U.indexOf(F);N!==-1&&U.splice(N,1)}for(let{type:V,id:U}of T){let N=(M=O[V]??(O[V]={}))[B=U||"__internal_without_id"]??(M[B]=[]);N.includes(F)||N.push(F)}},prepare:rr()}},extraReducers(O){O.addCase(y.actions.removeQueryResult,(k,{payload:{queryCacheKey:F}})=>{for(let T of Object.values(k))for(let M of Object.values(T)){let B=M.indexOf(F);B!==-1&&M.splice(B,1)}}).addMatcher(g,(k,F)=>{var M,B;let{provided:T}=s(F);for(let[V,U]of Object.entries(T))for(let[N,Q]of Object.entries(U)){let L=(M=k[V]??(k[V]={}))[B=N||"__internal_without_id"]??(M[B]=[]);for(let $ of Q)L.includes($)||L.push($)}}).addMatcher($e(tt(t),Kr(t)),(k,F)=>{let T=gl(F,"providesTags",i,u),{queryCacheKey:M}=F.meta.arg;R.caseReducers.updateProvidedBy(k,R.actions.updateProvidedBy({queryCacheKey:M,providedTags:T}))})}}),I=Ot({name:`${e}/subscriptions`,initialState:Zr,reducers:{updateSubscriptionOptions(O,k){},unsubscribeQueryResult(O,k){},internal_getRTKQSubscriptions(){}}}),b=Ot({name:`${e}/internalSubscriptions`,initialState:Zr,reducers:{subscriptionsUpdated:{reducer(O,k){return Wo(O,k.payload)},prepare:rr()}}}),P=Ot({name:`${e}/config`,initialState:{online:Wy(),focused:zy(),middlewareRegistered:!1,...a},reducers:{middlewareRegistered(O,{payload:k}){O.middlewareRegistered=O.middlewareRegistered==="conflict"||o!==k?"conflict":!0}},extraReducers:O=>{O.addCase(ms,k=>{k.online=!0}).addCase(pl,k=>{k.online=!1}).addCase(gs,k=>{k.focused=!0}).addCase(dl,k=>{k.focused=!1}).addMatcher(g,k=>({...k}))}}),x=Wt({queries:y.reducer,mutations:v.reducer,provided:R.reducer,subscriptions:b.reducer,config:P.reducer}),E=(O,k)=>x(m.match(k)?void 0:O,k),j={...P.actions,...y.actions,...I.actions,...b.actions,...v.actions,...R.actions,resetApiState:m};return{reducer:E,actions:j}}var ls=Symbol.for("RTKQ/skipToken"),ml={status:"uninitialized"},nl=et(ml,()=>{}),il=et(ml,()=>{});function dh({serializeQueryArgs:e,reducerPath:t,createSelector:r}){let n=x=>nl,i=x=>il;return{buildQuerySelector:S,buildInfiniteQuerySelector:y,buildMutationSelector:v,selectInvalidatedBy:R,selectCachedArgsForQuery:I,selectApiState:s,selectQueries:g,selectMutations:a,selectQueryEntry:u,selectConfig:m};function o(x){return{...x,...Ku(x.status)}}function s(x){return x[t]}function g(x){return s(x)?.queries}function u(x,E){return g(x)?.[E]}function a(x){return s(x)?.mutations}function m(x){return s(x)?.config}function h(x,E,j){return O=>{if(O===ls)return r(n,j);let k=e({queryArgs:O,endpointDefinition:E,endpointName:x});return r(T=>u(T,k)??nl,j)}}function S(x,E){return h(x,E,o)}function y(x,E){let{infiniteQueryOptions:j}=E;function O(k){let F={...k,...Ku(k.status)},{isLoading:T,isError:M,direction:B}=F,V=B==="forward",U=B==="backward";return{...F,hasNextPage:b(j,F.data),hasPreviousPage:P(j,F.data),isFetchingNextPage:T&&V,isFetchingPreviousPage:T&&U,isFetchNextPageError:M&&V,isFetchPreviousPageError:M&&U}}return h(x,E,O)}function v(){return x=>{let E;return typeof x=="object"?E=tn(x)??ls:E=x,r(E===ls?i:k=>s(k)?.mutations?.[E]??il,o)}}function R(x,E){let j=x[t],O=new Set;for(let k of E.filter(ai).map(ds)){let F=j.provided[k.type];if(!F)continue;let T=(k.id!==void 0?F[k.id]:Xu(Object.values(F)))??[];for(let M of T)O.add(M)}return Xu(Array.from(O.values()).map(k=>{let F=j.queries[k];return F?[{queryCacheKey:k,endpointName:F.endpointName,originalArgs:F.originalArgs}]:[]}))}function I(x,E){return Object.values(g(x)).filter(j=>j?.endpointName===E&&j.status!=="uninitialized").map(j=>j.originalArgs)}function b(x,E){return E?fs(x,E)!=null:!1}function P(x,E){return!E||!x.getPreviousPageParam?!1:fl(x,E)!=null}}var ol=WeakMap?new WeakMap:void 0,sl=({endpointName:e,queryArgs:t})=>{let r="",n=ol?.get(t);if(typeof n=="string")r=n;else{let i=JSON.stringify(t,(o,s)=>(s=typeof s=="bigint"?{$bigint:s.toString()}:s,s=Be(s)?Object.keys(s).sort().reduce((g,u)=>(g[u]=s[u],g),{}):s,s));Be(t)&&ol?.set(t,i),r=i}return`${e}(${r})`};function ph(...e){return function(r){let n=Zt(a=>r.extractRehydrationInfo?.(a,{reducerPath:r.reducerPath??"api"})),i={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...r,extractRehydrationInfo:n,serializeQueryArgs(a){let m=sl;if("serializeQueryArgs"in a.endpointDefinition){let h=a.endpointDefinition.serializeQueryArgs;m=S=>{let y=h(S);return typeof y=="string"?y:sl({...S,queryArgs:y})}}else r.serializeQueryArgs&&(m=r.serializeQueryArgs);return m(a)},tagTypes:[...r.tagTypes||[]]},o={endpointDefinitions:{},batch(a){a()},apiUid:Jr(),extractRehydrationInfo:n,hasRehydrationInfo:Zt(a=>n(a)!=null)},s={injectEndpoints:u,enhanceEndpoints({addTagTypes:a,endpoints:m}){if(a)for(let h of a)i.tagTypes.includes(h)||i.tagTypes.push(h);if(m)for(let[h,S]of Object.entries(m))typeof S=="function"?S(o.endpointDefinitions[h]):Object.assign(o.endpointDefinitions[h]||{},S);return s}},g=e.map(a=>a.init(s,i,o));function u(a){let m=a.endpoints({query:h=>({...h,type:"query"}),mutation:h=>({...h,type:"mutation"}),infiniteQuery:h=>({...h,type:"infinitequery"})});for(let[h,S]of Object.entries(m)){if(a.overrideExisting!==!0&&h in o.endpointDefinitions){if(a.overrideExisting==="throw")throw new Error(xe(39));typeof process<"u";continue}typeof process<"u",o.endpointDefinitions[h]=S;for(let y of g)y.injectEndpoint(h,S)}return s}return s.injectEndpoints({endpoints:r.endpoints})}}function rt(e,...t){return Object.assign(e,...t)}var fh=({api:e,queryThunk:t,internalState:r})=>{let n=`${e.reducerPath}/subscriptions`,i=null,o=null,{updateSubscriptionOptions:s,unsubscribeQueryResult:g}=e.internalActions,u=(y,v)=>{var I,b;if(s.match(v)){let{queryCacheKey:P,requestId:x,options:E}=v.payload;return y?.[P]?.[x]&&(y[P][x]=E),!0}if(g.match(v)){let{queryCacheKey:P,requestId:x}=v.payload;return y[P]&&delete y[P][x],!0}if(e.internalActions.removeQueryResult.match(v))return delete y[v.payload.queryCacheKey],!0;if(t.pending.match(v)){let{meta:{arg:P,requestId:x}}=v,E=y[I=P.queryCacheKey]??(y[I]={});return E[`${x}_running`]={},P.subscribe&&(E[x]=P.subscriptionOptions??E[x]??{}),!0}let R=!1;if(t.fulfilled.match(v)||t.rejected.match(v)){let P=y[v.meta.arg.queryCacheKey]||{},x=`${v.meta.requestId}_running`;R||(R=!!P[x]),delete P[x]}if(t.rejected.match(v)){let{meta:{condition:P,arg:x,requestId:E}}=v;if(P&&x.subscribe){let j=y[b=x.queryCacheKey]??(y[b]={});j[E]=x.subscriptionOptions??j[E]??{},R=!0}}return R},a=()=>r.currentSubscriptions,S={getSubscriptions:a,getSubscriptionCount:y=>{let R=a()[y]??{};return ar(R)},isRequestSubscribed:(y,v)=>!!a()?.[y]?.[v]};return(y,v)=>{if(i||(i=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(y))return i=r.currentSubscriptions={},o=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(y))return[!1,S];let R=u(r.currentSubscriptions,y),I=!0;if(R){o||(o=setTimeout(()=>{let x=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,E]=Un(i,()=>x);v.next(e.internalActions.subscriptionsUpdated(E)),i=x,o=null},500));let b=typeof y.type=="string"&&!!y.type.startsWith(n),P=t.rejected.match(y)&&y.meta.condition&&!!y.meta.arg.subscribe;I=!b&&!P}return[I,!1]}};function gh(e){for(let t in e)return!1;return!0}var mh=2147483647/1e3-1,yh=({reducerPath:e,api:t,queryThunk:r,context:n,internalState:i,selectors:{selectQueryEntry:o,selectConfig:s}})=>{let{removeQueryResult:g,unsubscribeQueryResult:u,cacheEntriesUpserted:a}=t.internalActions,m=$e(u.match,r.fulfilled,r.rejected,a.match);function h(I){let b=i.currentSubscriptions[I];return!!b&&!gh(b)}let S={},y=(I,b,P)=>{let x=b.getState(),E=s(x);if(m(I)){let j;if(a.match(I))j=I.payload.map(O=>O.queryDescription.queryCacheKey);else{let{queryCacheKey:O}=u.match(I)?I.payload:I.meta.arg;j=[O]}v(j,b,E)}if(t.util.resetApiState.match(I))for(let[j,O]of Object.entries(S))O&&clearTimeout(O),delete S[j];if(n.hasRehydrationInfo(I)){let{queries:j}=n.extractRehydrationInfo(I);v(Object.keys(j),b,E)}};function v(I,b,P){let x=b.getState();for(let E of I){let j=o(x,E);R(E,j?.endpointName,b,P)}}function R(I,b,P,x){let j=n.endpointDefinitions[b]?.keepUnusedDataFor??x.keepUnusedDataFor;if(j===1/0)return;let O=Math.max(0,Math.min(j,mh));if(!h(I)){let k=S[I];k&&clearTimeout(k),S[I]=setTimeout(()=>{h(I)||P.dispatch(g({queryCacheKey:I})),delete S[I]},O*1e3)}}return y},al=new Error("Promise never resolved before cacheEntryRemoved."),hh=({api:e,reducerPath:t,context:r,queryThunk:n,mutationThunk:i,internalState:o,selectors:{selectQueryEntry:s,selectApiState:g}})=>{let u=Gn(n),a=Gn(i),m=tt(n,i),h={};function S(b,P,x){let E=h[b];E?.valueResolved&&(E.valueResolved({data:P,meta:x}),delete E.valueResolved)}function y(b){let P=h[b];P&&(delete h[b],P.cacheEntryRemoved())}let v=(b,P,x)=>{let E=R(b);function j(O,k,F,T){let M=s(x,k),B=s(P.getState(),k);!M&&B&&I(O,T,k,P,F)}if(n.pending.match(b))j(b.meta.arg.endpointName,E,b.meta.requestId,b.meta.arg.originalArgs);else if(e.internalActions.cacheEntriesUpserted.match(b))for(let{queryDescription:O,value:k}of b.payload){let{endpointName:F,originalArgs:T,queryCacheKey:M}=O;j(F,M,b.meta.requestId,T),S(M,k,{})}else if(i.pending.match(b))P.getState()[t].mutations[E]&&I(b.meta.arg.endpointName,b.meta.arg.originalArgs,E,P,b.meta.requestId);else if(m(b))S(E,b.payload,b.meta.baseQueryMeta);else if(e.internalActions.removeQueryResult.match(b)||e.internalActions.removeMutationResult.match(b))y(E);else if(e.util.resetApiState.match(b))for(let O of Object.keys(h))y(O)};function R(b){return u(b)?b.meta.arg.queryCacheKey:a(b)?b.meta.arg.fixedCacheKey??b.meta.requestId:e.internalActions.removeQueryResult.match(b)?b.payload.queryCacheKey:e.internalActions.removeMutationResult.match(b)?tn(b.payload):""}function I(b,P,x,E,j){let O=r.endpointDefinitions[b],k=O?.onCacheEntryAdded;if(!k)return;let F={},T=new Promise(Q=>{F.cacheEntryRemoved=Q}),M=Promise.race([new Promise(Q=>{F.valueResolved=Q}),T.then(()=>{throw al})]);M.catch(()=>{}),h[x]=F;let B=e.endpoints[b].select(O.type==="query"?P:x),V=E.dispatch((Q,L,$)=>$),U={...E,getCacheEntry:()=>B(E.getState()),requestId:j,extra:V,updateCachedData:O.type==="query"?Q=>E.dispatch(e.util.updateQueryData(b,P,Q)):void 0,cacheDataLoaded:M,cacheEntryRemoved:T},N=k(P,U);Promise.resolve(N).catch(Q=>{if(Q!==al)throw Q})}return v},Sh=({api:e,context:{apiUid:t},reducerPath:r})=>(n,i)=>{e.util.resetApiState.match(n)&&i.dispatch(e.internalActions.middlewareRegistered(t)),typeof process<"u"},vh=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:n,queryThunk:i,api:o,assertTagType:s,refetchQuery:g,internalState:u})=>{let{removeQueryResult:a}=o.internalActions,m=$e(tt(n),Kr(n)),h=$e(tt(n,i),Ft(n,i)),S=[],y=(I,b)=>{m(I)?R(gl(I,"invalidatesTags",r,s),b):h(I)?R([],b):o.util.invalidateTags.match(I)&&R(Ss(I.payload,void 0,void 0,void 0,void 0,s),b)};function v(I){let{queries:b,mutations:P}=I;for(let x of[b,P])for(let E in x)if(x[E]?.status==="pending")return!0;return!1}function R(I,b){let P=b.getState(),x=P[e];if(S.push(...I),x.config.invalidationBehavior==="delayed"&&v(x))return;let E=S;if(S=[],E.length===0)return;let j=o.util.selectInvalidatedBy(P,E);t.batch(()=>{let O=Array.from(j.values());for(let{queryCacheKey:k}of O){let F=x.queries[k],T=u.currentSubscriptions[k]??{};F&&(ar(T)===0?b.dispatch(a({queryCacheKey:k})):F.status!=="uninitialized"&&b.dispatch(g(F)))}})}return y},Ah=({reducerPath:e,queryThunk:t,api:r,refetchQuery:n,internalState:i})=>{let o={},s=(y,v)=>{(r.internalActions.updateSubscriptionOptions.match(y)||r.internalActions.unsubscribeQueryResult.match(y))&&a(y.payload,v),(t.pending.match(y)||t.rejected.match(y)&&y.meta.condition)&&a(y.meta.arg,v),(t.fulfilled.match(y)||t.rejected.match(y)&&!y.meta.condition)&&u(y.meta.arg,v),r.util.resetApiState.match(y)&&h()};function g(y,v){let I=v.getState()[e].queries[y],b=i.currentSubscriptions[y];if(!(!I||I.status==="uninitialized"))return b}function u({queryCacheKey:y},v){let R=v.getState()[e],I=R.queries[y],b=i.currentSubscriptions[y];if(!I||I.status==="uninitialized")return;let{lowestPollingInterval:P,skipPollingIfUnfocused:x}=S(b);if(!Number.isFinite(P))return;let E=o[y];E?.timeout&&(clearTimeout(E.timeout),E.timeout=void 0);let j=Date.now()+P;o[y]={nextPollTimestamp:j,pollingInterval:P,timeout:setTimeout(()=>{(R.config.focused||!x)&&v.dispatch(n(I)),u({queryCacheKey:y},v)},P)}}function a({queryCacheKey:y},v){let I=v.getState()[e].queries[y],b=i.currentSubscriptions[y];if(!I||I.status==="uninitialized")return;let{lowestPollingInterval:P}=S(b);if(!Number.isFinite(P)){m(y);return}let x=o[y],E=Date.now()+P;(!x||E<x.nextPollTimestamp)&&u({queryCacheKey:y},v)}function m(y){let v=o[y];v?.timeout&&clearTimeout(v.timeout),delete o[y]}function h(){for(let y of Object.keys(o))m(y)}function S(y={}){let v=!1,R=Number.POSITIVE_INFINITY;for(let I in y)y[I].pollingInterval&&(R=Math.min(y[I].pollingInterval,R),v=y[I].skipPollingIfUnfocused||v);return{lowestPollingInterval:R,skipPollingIfUnfocused:v}}return s},wh=({api:e,context:t,queryThunk:r,mutationThunk:n})=>{let i=Hn(r,n),o=Ft(r,n),s=tt(r,n),g={};return(a,m)=>{if(i(a)){let{requestId:h,arg:{endpointName:S,originalArgs:y}}=a.meta,v=t.endpointDefinitions[S],R=v?.onQueryStarted;if(R){let I={},b=new Promise((j,O)=>{I.resolve=j,I.reject=O});b.catch(()=>{}),g[h]=I;let P=e.endpoints[S].select(v.type==="query"?y:h),x=m.dispatch((j,O,k)=>k),E={...m,getCacheEntry:()=>P(m.getState()),requestId:h,extra:x,updateCachedData:v.type==="query"?j=>m.dispatch(e.util.updateQueryData(S,y,j)):void 0,queryFulfilled:b};R(y,E)}}else if(s(a)){let{requestId:h,baseQueryMeta:S}=a.meta;g[h]?.resolve({data:a.payload,meta:S}),delete g[h]}else if(o(a)){let{requestId:h,rejectedWithValue:S,baseQueryMeta:y}=a.meta;g[h]?.reject({error:a.payload??a.error,isUnhandledError:!S,meta:y}),delete g[h]}}},Ch=({reducerPath:e,context:t,api:r,refetchQuery:n,internalState:i})=>{let{removeQueryResult:o}=r.internalActions,s=(u,a)=>{gs.match(u)&&g(a,"refetchOnFocus"),ms.match(u)&&g(a,"refetchOnReconnect")};function g(u,a){let m=u.getState()[e],h=m.queries,S=i.currentSubscriptions;t.batch(()=>{for(let y of Object.keys(S)){let v=h[y],R=S[y];if(!R||!v)continue;(Object.values(R).some(b=>b[a]===!0)||Object.values(R).every(b=>b[a]===void 0)&&m.config[a])&&(ar(R)===0?u.dispatch(o({queryCacheKey:y})):v.status!=="uninitialized"&&u.dispatch(n(v)))}})}return s};function bh(e){let{reducerPath:t,queryThunk:r,api:n,context:i}=e,{apiUid:o}=i,s={invalidateTags:_(`${t}/invalidateTags`)},g=h=>h.type.startsWith(`${t}/`),u=[Sh,yh,vh,Ah,hh,wh];return{middleware:h=>{let S=!1,v={...e,internalState:{currentSubscriptions:{}},refetchQuery:m,isThisApiSliceAction:g},R=u.map(P=>P(v)),I=fh(v),b=Ch(v);return P=>x=>{if(!Kt(x))return P(x);S||(S=!0,h.dispatch(n.internalActions.middlewareRegistered(o)));let E={...h,next:P},j=h.getState(),[O,k]=I(x,E,j),F;if(O?F=P(x):F=k,h.getState()[t]&&(b(x,E,j),g(x)||i.hasRehydrationInfo(x)))for(let T of R)T(x,E,j);return F}},actions:s};function m(h){return e.api.endpoints[h.endpointName].initiate(h.originalArgs,{subscribe:!1,forceRefetch:!0})}}var cl=Symbol(),xh=({createSelector:e=de}={})=>({name:cl,init(t,{baseQuery:r,tagTypes:n,reducerPath:i,serializeQueryArgs:o,keepUnusedDataFor:s,refetchOnMountOrArgChange:g,refetchOnFocus:u,refetchOnReconnect:a,invalidationBehavior:m},h){Gc();let S=X=>(typeof process<"u",X);Object.assign(t,{reducerPath:i,endpoints:{},internalActions:{onOnline:ms,onOffline:pl,onFocus:gs,onFocusLost:dl},util:{}});let y=dh({serializeQueryArgs:o,reducerPath:i,createSelector:e}),{selectInvalidatedBy:v,selectCachedArgsForQuery:R,buildQuerySelector:I,buildInfiniteQuerySelector:b,buildMutationSelector:P}=y;rt(t.util,{selectInvalidatedBy:v,selectCachedArgsForQuery:R});let{queryThunk:x,infiniteQueryThunk:E,mutationThunk:j,patchQueryData:O,updateQueryData:k,upsertQueryData:F,prefetch:T,buildMatchThunkActions:M}=uh({baseQuery:r,reducerPath:i,context:h,api:t,serializeQueryArgs:o,assertTagType:S,selectors:y}),{reducer:B,actions:V}=lh({context:h,queryThunk:x,infiniteQueryThunk:E,mutationThunk:j,serializeQueryArgs:o,reducerPath:i,assertTagType:S,config:{refetchOnFocus:u,refetchOnReconnect:a,refetchOnMountOrArgChange:g,keepUnusedDataFor:s,reducerPath:i,invalidationBehavior:m}});rt(t.util,{patchQueryData:O,updateQueryData:k,upsertQueryData:F,prefetch:T,resetApiState:V.resetApiState,upsertQueryEntries:V.cacheEntriesUpserted}),rt(t.internalActions,V);let{middleware:U,actions:N}=bh({reducerPath:i,context:h,queryThunk:x,mutationThunk:j,infiniteQueryThunk:E,api:t,assertTagType:S,selectors:y});rt(t.util,N),rt(t,{reducer:B,middleware:U});let{buildInitiateQuery:Q,buildInitiateInfiniteQuery:L,buildInitiateMutation:$,getRunningMutationThunk:H,getRunningMutationsThunk:z,getRunningQueriesThunk:Z,getRunningQueryThunk:ne}=ah({queryThunk:x,mutationThunk:j,infiniteQueryThunk:E,api:t,serializeQueryArgs:o,context:h});return rt(t.util,{getRunningMutationThunk:H,getRunningMutationsThunk:z,getRunningQueryThunk:ne,getRunningQueriesThunk:Z}),{name:cl,injectEndpoint(X,ee){var le;let te=(le=t.endpoints)[X]??(le[X]={});ys(ee)&&rt(te,{name:X,select:I(X,ee),initiate:Q(X,ee)},M(x,X)),ih(ee)&&rt(te,{name:X,select:P(),initiate:$(X)},M(j,X)),hs(ee)&&rt(te,{name:X,select:b(X,ee),initiate:L(X,ee)},M(x,X))}}}}),ui=ph(xh());f();l();p();d();var vs=async(e,t,r)=>{let n=t.getState(),{accessToken:i,environment:o,organizationId:s}=n.configuration,g=n.generatedAnswer.answerConfigurationId,u={...e,headers:{...e?.headers||{},Authorization:`Bearer ${i}`}};try{let a=ue(s,o);return{data:ll({baseUrl:`${a}/rest/organizations/${s}/answer/v1/configs/${g}`,fetchFn:async h=>{if(h instanceof String)throw new Error("The provided 'request' must be a Request object.");let S=h.url,y={};return["method","headers","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal"].forEach(v=>{y[v]=h[v]}),y.duplex="half",y.body=await h.text(),w(S,y)}})(u,{...t,signal:null},r)}}catch(a){return{error:a}}},yl=ui({reducerPath:"answer",baseQuery:ci(vs,{maxRetries:3}),endpoints:()=>({})});var ur=ui({reducerPath:"answerGenerationApi",refetchOnMountOrArgChange:!0,baseQuery:ci(vs,{maxRetries:3}),endpoints:()=>({})});f();l();p();d();f();l();p();d();f();l();p();d();var Tt=e=>e.query,hl=e=>e.query?.enableQuerySyntax;var LP=de(e=>Tt(e)?.q,e=>e.search.requestId,e=>e.generatedAnswer.cannotAnswer,e=>e.configuration.analytics.analyticsMode,e=>e.search.searchAction?.actionCause,(e,t,r,n,i)=>({q:e,requestId:t,cannotAnswer:r,analyticsMode:n,actionCause:i})),Rh=de(e=>e.generatedAnswer?.answerApiQueryParams,e=>e);f();l();p();d();f();l();p();d();f();l();p();d();var li=()=>({contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!1,isLoading:!0});f();l();p();d();f();l();p();d();f();l();p();d();async function vl(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value)}function Al(e){let t,r,n,i=!1;return function(s){t===void 0?(t=s,r=0,n=-1):t=Ih(t,s);let g=t.length,u=0;for(;r<g;){i&&(t[r]===10&&(u=++r),i=!1);let a=-1;for(;r<g&&a===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-u);break;case 13:i=!0,a=r;break;case 10:a=r;break}if(a===-1)break;e(t.subarray(u,a),n),u=r,n=-1}u===g?t=void 0:u!==0&&(t=t.subarray(u),r-=u)}}function wl(e,t,r){let n=Sl(),i=new TextDecoder;return function(s,g){if(s.length===0)r?.(n),n=Sl();else if(g>0){let u=i.decode(s.subarray(0,g)),a=g+(s[g+1]===32?2:1),m=i.decode(s.subarray(a));switch(u){case"data":n.data=n.data?`${n.data}
${m}`:m;break;case"event":n.event=m;break;case"id":e(n.id=m);break;case"retry":Eh(m,n,t);break}}}}function Eh(e,t,r){let n=parseInt(e,10);Number.isNaN(n)||r(t.retry=n)}function Ih(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function Sl(){return{data:"",event:"",id:"",retry:void 0}}var As="text/event-stream",kh=1e3,Cl="last-event-id";function bl(){return typeof window<"u"}function di(e,{signal:t,headers:r,onopen:n,onmessage:i,onclose:o,onerror:s,openWhenHidden:g,fetch:u,...a}){return new Promise((m,h)=>{let S={...r};S.accept||(S.accept=As);let y;function v(){y?.abort(),document.hidden||E()}!g&&bl()&&document.addEventListener("visibilitychange",v);let R=kh,I;function b(){bl()&&document.removeEventListener("visibilitychange",v),clearTimeout(I),y?.abort()}t?.addEventListener("abort",()=>{b(),m()});let P=u??w,x=n??Ph;async function E(){y=c.AbortController?new c.AbortController:null;try{let j=await P(e,{...a,headers:S,signal:y?.signal});await x(j),await vl(j.body,Al(wl(O=>{O?S[Cl]=O:delete S[Cl]},O=>{R=O},i))),o?.(),b(),m()}catch(j){if(!y?.signal?.aborted)try{let O=s?.(j)??R;clearTimeout(I),I=setTimeout(E,O)}catch(O){b(),h(O)}}}E()})}function Ph(e){let t=e.headers.get("content-type");if(!t?.startsWith(As))throw new Error(`Expected content-type to be ${As}, Actual: ${t}`)}f();l();p();d();f();l();p();d();var xl=(e,t)=>{t&&(e.answerId=t)},Rl=(e,t)=>{let{contentFormat:r}=t;e.contentFormat=r,e.isStreaming=!0,e.isLoading=!1},El=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},Il=(e,t)=>{e.citations=t.citations},kl=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},Pl=(e,t)=>{let r=t.errorMessage||"Unknown error occurred";e.error={message:r,code:t.code??500},e.isStreaming=!1,e.isLoading=!1,console.error(`Generated answer error: ${r} (code: ${t.code})`)};var pi={handleOpen:(e,t)=>{let r=e.headers.get("x-answer-id");r&&t(n=>{xl(n,r)})},handleMessage:{"agentInteraction.answerHeader":(e,t)=>{t(r=>{Rl(r,{contentFormat:"text/markdown"})})},"generativeengines.messageType":(e,t)=>{e?.payload?.textDelta&&t(r=>{El(r,e.payload)})},"agentInteraction.citations":(e,t)=>{e?.payload?.citations!==void 0&&t(r=>{Il(r,e.payload)})},"generativeengines.endOfStreamType":(e,t)=>{t(r=>{kl(r,e.payload)})},error:(e,t)=>{e.finishReason==="ERROR"&&t(r=>{Pl(r,e)})}}};var fi=(e,t,r,n)=>{let{dispatch:i,updateCachedData:o,getState:s}=r,{configuration:{accessToken:g}}=s();return di(e,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${g}`,Accept:"text/event-stream","Content-Type":"application/json","Accept-Encoding":"*"},fetch:w,onopen:async u=>{pi.handleOpen(u,o),n.handleOpen(u,i)},onclose:()=>{n.handleClose?.(i)},onerror:u=>{n.handleError(u)},onmessage:u=>{let a=Fh(u.data);if(!a)return;pi.handleMessage.error?.(a,o),n.handleMessage.error?.(a,i);let m=a.payloadType;pi.handleMessage[m]?.(a,o),n.handleMessage[m]?.(a,i)}})};function Fh(e){if(!e?.length)return null;try{return JSON.parse(e)}catch(t){return console.warn("Failed to parse message",{payload:e,error:t}),null}}f();l();p();d();f();l();p();d();f();l();p();d();f();l();p();d();f();l();p();d();var Fl=e=>{let{configuration:t}=e,{organizationId:r,environment:n,knowledge:{agentId:i}}=t,o=ue(r,n),s=i?.trim();if(!o||!r||!s)throw new Error("Missing required parameters for follow up endpoint");let g=`/api/preview/organizations/${r}/agents`;return`${o}${g}/${s}/follow-up`};var Oh=ur.injectEndpoints({overrideExisting:!0,endpoints:e=>({generateFollowUpAnswer:e.query({queryFn:()=>({data:li()}),async onQueryStarted(t,{getState:r,updateCachedData:n,dispatch:i}){let{strategyKey:o,...s}=t,g=Fl(r());await fi(g,s,{getState:r,updateCachedData:n,dispatch:i},gi[o]?.())}})})}),Ol=e=>Oh.endpoints.generateFollowUpAnswer.initiate(e);f();l();p();d();var ws=e=>e.configuration.search.locale,Tl=e=>e.configuration.search.timezone,lr=e=>e.configuration?.knowledge?.agentId;f();l();p();d();var Dl=(e,t)=>({conversationId:t.followUpAnswers?.conversationId??"",q:e});var Th=new W({required:!0}),ql=_("followUpAnswers/setIsEnabled",e=>G(e,new fe({required:!0}))),jl=_("followUpAnswers/setFollowUpAnswersConversationId",e=>G(e,Y)),Dh=_("followUpAnswers/createFollowUpAnswer",e=>G(e,{question:Y})),Ml=_("followUpAnswers/setActiveFollowUpAnswerId",e=>G(e,Y)),Nl=_("followUpAnswers/setFollowUpAnswerContentFormat",e=>G(e,{contentFormat:mi,answerId:Y})),_l=_("followUpAnswers/setFollowUpIsLoading",e=>G(e,{isLoading:new fe({required:!0}),answerId:Y})),Ul=_("followUpAnswers/followUpMessageChunkReceived",e=>G(e,{textDelta:Th,answerId:Y})),Ll=_("followUpAnswers/followUpCitationsReceived",e=>G(e,{citations:new Le({required:!0,each:new ae({values:Cs})}),answerId:Y})),Vl=_("followUpAnswers/followUpCompleted",e=>G(e,{answerId:Y,cannotAnswer:new fe({required:!1})})),Ql=_("followUpAnswers/followUpFailed",e=>G(e,{message:new W,code:new we({min:0}),answerId:Y})),oO=_("followUpAnswers/likeFollowUp",e=>G(e,{answerId:Y})),sO=_("followUpAnswers/dislikeFollowUp",e=>G(e,{answerId:Y})),aO=_("followUpAnswers/submitFollowUpFeedback",e=>G(e,{answerId:Y})),Bl=_("followUpAnswers/resetFollowUpAnswers"),cO=ie("generatedAnswerWithFollowUps/generateFollowUpAnswer",async(e,{getState:t,dispatch:r,extra:{logger:n}})=>{let i=t(),o=lr(i)?.trim(),s=Dl(e,i);if(!o){n.warn("Missing agentId in engine configuration. The generateFollowUpAnswer action requires an agent ID.");return}if(!s.conversationId){n.warn("Missing conversationId when generating a follow-up answer. The generateFollowUpAnswer action requires an existing conversation.");return}r(Dh({question:e})),await r(Ol({strategyKey:"follow-up-answer",...s}))});var $l=()=>{let e=null;return{handleOpen:(t,r)=>{e=t.headers.get("x-answer-id"),e&&(r(Ml(e)),r(_l({answerId:e,isLoading:!0})),r(Nl({contentFormat:"text/markdown",answerId:e})))},handleError:t=>{throw t},handleMessage:{"generativeengines.messageType":(t,r)=>{t?.payload?.textDelta&&r(Ul({textDelta:t.payload.textDelta,answerId:e}))},"agentInteraction.citations":(t,r)=>{t?.payload?.citations!==void 0&&r(Ll({citations:t.payload.citations,answerId:e}))},"generativeengines.endOfStreamType":(t,r)=>{let n=t?.payload?.answerGenerated??!1;r(Vl({cannotAnswer:!n,answerId:e}))},error:(t,r)=>{t.finishReason==="ERROR"&&r(Ql({answerId:e,message:t.errorMessage,code:t.code}))}}}};f();l();p();d();f();l();p();d();f();l();p();d();f();l();p();d();f();l();p();d();function nt(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function D(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function g(m){try{a(n.next(m))}catch(h){s(h)}}function u(m){try{a(n.throw(m))}catch(h){s(h)}}function a(m){m.done?o(m.value):i(m.value).then(g,u)}a((n=n.apply(e,t||[])).next())})}var re;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(re||(re={}));function Rs(){return typeof window<"u"}function _s(){return typeof navigator<"u"}function dr(){return typeof document<"u"}function Es(){try{return typeof localStorage<"u"}catch{return!1}}function qh(){try{return typeof sessionStorage<"u"}catch{return!1}}function id(){return _s()&&navigator.cookieEnabled}var jh=[re.click,re.custom,re.search,re.view],Mh=(e,t)=>jh.indexOf(e)!==-1?Object.assign({language:dr()?document.documentElement.lang:"unknown",userAgent:_s()?navigator.userAgent:"unknown"},t):t,nn=class e{static set(t,r,n){var i,o,s,g;n&&(o=new Date,o.setTime(o.getTime()+n)),g=window.location.hostname,g.indexOf(".")===-1?Hl(t,r,o):(s=g.split("."),i=s[s.length-2]+"."+s[s.length-1],Hl(t,r,o,i))}static get(t){for(var r=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){var o=n[i];if(o=o.replace(/^\s+/,""),o.lastIndexOf(r,0)===0)return o.substring(r.length,o.length)}return null}static erase(t){e.set(t,"",-1)}};function Hl(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function Nh(){return Es()?localStorage:id()?new on:qh()?sessionStorage:new fr}var on=class e{getItem(t){return nn.get(`${e.prefix}${t}`)}removeItem(t){nn.erase(`${e.prefix}${t}`)}setItem(t,r,n){nn.set(`${e.prefix}${t}`,r,n)}};on.prefix="coveo_";var Is=class{constructor(){this.cookieStorage=new on}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3)}},fr=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},yi="__coveo.analytics.history",_h=20,Uh=1e3*60,Lh=75,vi=class{constructor(t){this.store=t||Nh()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return D(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return D(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(yi);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return D(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(yi);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(yi,JSON.stringify(t.slice(0,_h)))}catch{}}clear(){try{this.store.removeItem(yi)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,i)=>(i.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,Lh)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>Uh:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:i,value:o}=r;return{name:n,time:i,value:o}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:i}=t;return r&&typeof i=="string"&&r.toLowerCase()==="query"&&i.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};var Vh=(e,t)=>D(void 0,void 0,void 0,function*(){return e===re.view?(yield Qh(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),Qh=e=>D(void 0,void 0,void 0,function*(){let t=new vi,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),hi,Bh=new Uint8Array(16);function $h(){if(!hi&&(hi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hi(Bh)}var Hh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ai(e){return typeof e=="string"&&Hh.test(e)}var Ae=[];for(let e=0;e<256;++e)Ae.push((e+256).toString(16).slice(1));function od(e,t=0){return Ae[e[t+0]]+Ae[e[t+1]]+Ae[e[t+2]]+Ae[e[t+3]]+"-"+Ae[e[t+4]]+Ae[e[t+5]]+"-"+Ae[e[t+6]]+Ae[e[t+7]]+"-"+Ae[e[t+8]]+Ae[e[t+9]]+"-"+Ae[e[t+10]]+Ae[e[t+11]]+Ae[e[t+12]]+Ae[e[t+13]]+Ae[e[t+14]]+Ae[e[t+15]]}function Gh(e){if(!Ai(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function zh(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var Wh="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Yh="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Kh(e,t,r){function n(i,o,s,g){var u;if(typeof i=="string"&&(i=zh(i)),typeof o=="string"&&(o=Gh(o)),((u=o)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+i.length);if(a.set(o),a.set(i,o.length),a=r(a),a[6]=a[6]&15|t,a[8]=a[8]&63|128,s){g=g||0;for(let m=0;m<16;++m)s[g+m]=a[m];return s}return od(a)}try{n.name=e}catch{}return n.DNS=Wh,n.URL=Yh,n}var Jh=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Gl={randomUUID:Jh};function Dt(e,t,r){if(Gl.randomUUID&&!t&&!e)return Gl.randomUUID();e=e||{};let n=e.random||(e.rng||$h)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return od(n)}function Xh(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function bs(e,t){return e<<t|e>>>32-t}function Zh(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let s=unescape(encodeURIComponent(e));e=[];for(let g=0;g<s.length;++g)e.push(s.charCodeAt(g))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),o=new Array(i);for(let s=0;s<i;++s){let g=new Uint32Array(16);for(let u=0;u<16;++u)g[u]=e[s*64+u*4]<<24|e[s*64+u*4+1]<<16|e[s*64+u*4+2]<<8|e[s*64+u*4+3];o[s]=g}o[i-1][14]=(e.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(e.length-1)*8&4294967295;for(let s=0;s<i;++s){let g=new Uint32Array(80);for(let y=0;y<16;++y)g[y]=o[s][y];for(let y=16;y<80;++y)g[y]=bs(g[y-3]^g[y-8]^g[y-14]^g[y-16],1);let u=r[0],a=r[1],m=r[2],h=r[3],S=r[4];for(let y=0;y<80;++y){let v=Math.floor(y/20),R=bs(u,5)+Xh(v,a,m,h)+S+t[v]+g[y]>>>0;S=h,h=m,m=bs(a,30)>>>0,a=u,u=R}r[0]=r[0]+u>>>0,r[1]=r[1]+a>>>0,r[2]=r[2]+m>>>0,r[3]=r[3]+h>>>0,r[4]=r[4]+S>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var eS=Kh("v5",80,Zh),zl=eS,sd="2.30.52",Wl=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,rn={pageview:"pageview",event:"event"},wi=class{constructor({client:t,uuidGenerator:r=Dt}){this.client=t,this.uuidGenerator=r}},ks=class extends wi{constructor({client:t,uuidGenerator:r=Dt}){super({client:t,uuidGenerator:r}),this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=Wl(window.location),this.lastReferrer=dr()?document.referrer:"",this.addHooks()}getApi(t){switch(t){case"setAction":return this.setAction;default:return null}}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:dr()?document.title:"",encoding:dr()?document.characterSet:"UTF-8"},n={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},i={language:navigator.language,userAgent:navigator.userAgent},o={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},o),n),i),r)}updateLocationForNextPageView(t,r){let{pageViewId:n,referrer:i,location:o}=this.getNextValues(t,r);this.lastReferrer=i,this.pageViewId=n,this.currentLocation=o,t===rn.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===rn.pageview?this.nextPageViewId:this.pageViewId,referrer:t===rn.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===rn.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=i=>i.replace(/^\/?(.*)$/,"/$1");return`${(i=>i.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return Wl(window.location)}},lt=class e{constructor(t,r){if(!Ai(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let n=new URL(t);return r.some(i=>new RegExp(i.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(n.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,i]=r;if(n.length!==32||isNaN(parseInt(i)))return null;let o=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return Ai(o)?new e(o,Number.parseInt(i)*1e3):null}};lt.cvo_cid="cvo_cid";lt.expirationTime=120;var Ps=class extends wi{constructor({client:t,uuidGenerator:r=Dt}){super({client:t,uuidGenerator:r})}getApi(t){switch(t){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(t){return D(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(t),n=yield this.client.getCurrentVisitorId();return r.searchParams.set(lt.cvo_cid,new lt(n,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(t){this.client.setAcceptedLinkReferrers(t)}};Ps.Id="link";var Me=Object.keys;function Si(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var xs=128,ad=192,Yl=224,Kl=240;function tS(e){return(e&248)===Kl?4:(e&Kl)===Yl?3:(e&Yl)===ad?2:1}function rS(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let n=Number.parseInt(e.substring(r-2,r),16);if((n&xs)!=xs)break;if(r-=3,(n&ad)!=xs){t-r>=tS(n)*3&&(r=t);break}}return e.substring(0,r)}var Fs={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},nS=Me(Fs).map(e=>Fs[e]),iS=[...nS].join("|"),oS=new RegExp(`^(${iS}$)`),sS={svcAction:"svc_action",svcActionData:"svc_action_data"},aS=e=>Me(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let n=Fs[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})},{}),cS=e=>oS.test(e),uS=[cS],Jl={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Xl={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Ce={action:"pa",list:"pal",listSource:"pls"},Ci={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},lS=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Os={id:"quoteId",affiliation:"quoteAffiliation"},Ts={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},dS={add:Ce,bookmark_add:Ce,bookmark_remove:Ce,click:Ce,checkout:Ce,checkout_option:Ce,detail:Ce,impression:Ce,remove:Ce,refund:Object.assign(Object.assign({},Ce),Ci),purchase:Object.assign(Object.assign({},Ce),Ci),quickview:Ce,quote:Object.assign(Object.assign({},Ce),Os),review:Object.assign(Object.assign({},Ce),Ts)},pS=Me(Jl).map(e=>Jl[e]),fS=Me(Xl).map(e=>Xl[e]),gS=Me(Ce).map(e=>Ce[e]),mS=Me(Ci).map(e=>Ci[e]),yS=Me(Ts).map(e=>Ts[e]),hS=Me(Os).map(e=>Os[e]),SS=[...pS,"custom"].join("|"),vS=[...fS,"custom"].join("|"),cd="(pr[0-9]+)",ud="(il[0-9]+pi[0-9]+)",AS=new RegExp(`^${cd}(${SS})$`),wS=new RegExp(`^(${ud}(${vS}))|(il[0-9]+nm)$`),CS=new RegExp(`^(${gS.join("|")})$`),bS=new RegExp(`^(${mS.join("|")})$`),xS=new RegExp(`^${cd}custom$`),RS=new RegExp(`^${ud}custom$`),ES=new RegExp(`^(${[...lS,...yS,...hS].join("|")})$`),IS=e=>AS.test(e),kS=e=>wS.test(e),PS=e=>CS.test(e),FS=e=>bS.test(e),OS=e=>ES.test(e),TS=[kS,IS,PS,FS,OS],DS=[xS,RS],qS={anonymizeIp:"aip"},jS={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},MS={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},NS=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],_S=Object.assign(Object.assign(Object.assign(Object.assign({},qS),jS),MS),NS.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),Ds=Object.assign(Object.assign({},_S),sS),US=e=>{let t=!!e.action&&dS[e.action]||{};return Me(e).reduce((r,n)=>{let i=t[n]||Ds[n]||n;return Object.assign(Object.assign({},r),{[i]:e[n]})},{})},LS=Me(Ds).map(e=>Ds[e]),VS=e=>LS.indexOf(e)!==-1,QS=e=>e==="custom",BS=e=>[...TS,...uS,VS,QS].some(t=>t(e)),$S=e=>Me(e).reduce((t,r)=>{let n=HS(r);return n?Object.assign(Object.assign({},t),GS(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),HS=e=>{let t;return[...DS].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t}),t},GS=(e,t)=>Me(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),qs=class{constructor(t){this.opts=t}sendEvent(t,r){return D(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:n,preprocessRequest:i}=this.opts,o=yield this.getQueryParamsForEventType(t),{url:s,payload:g}=yield this.preProcessRequestAsPotentialJSONString(`${n}/analytics/${t}?${o}`,r,i),u=this.encodeForEventType(t,g),a=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(s,a)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,n){return D(this,void 0,void 0,function*(){let i=t,o=r;if(n){let s=yield n({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:g,body:u}=s;i=g||t;try{o=JSON.parse(u)}catch(a){console.error("Unable to process the request body as a JSON string",a)}}return{payload:o,url:i}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeEventToJson(t,r):this.encodeEventToJson(t,r,this.opts.token)}getQueryParamsForEventType(t){return D(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:n}=this.opts,i=yield n.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",i?`visitorId=${i}`:"","discardVisitInfo=true"].filter(o=>!!o).join("&")})}isEventTypeLegacy(t){return[re.click,re.custom,re.search,re.view].indexOf(t)!==-1}encodeEventToJson(t,r,n){let i=`${t}Event=${encodeURIComponent(JSON.stringify(r))}`;return n&&(i=`access_token=${encodeURIComponent(n)}&${i}`),i}},js=class{sendEvent(t,r){return D(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return D(this,void 0,void 0,function*(){return Promise.resolve()})}},Zl=A.fetch,bi=class{constructor(t){this.opts=t}sendEvent(t,r){return D(this,void 0,void 0,function*(){let{baseUrl:n,visitorIdProvider:i,preprocessRequest:o}=this.opts,s=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",g={url:`${n}/analytics/${t}${s}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},u=Object.assign(Object.assign({},g),o?yield o(g,"analyticsFetch"):{}),{url:a}=u,m=nt(u,["url"]),h;try{h=yield Zl(a,m)}catch(S){console.error("An error has occured when sending the event.",S);return}if(h.ok){let S=yield h.json();return S.visitorId&&i.setCurrentVisitorId(S.visitorId),S}else{try{h.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,h,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return D(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield Zl(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(t){return[re.click,re.custom,re.search,re.view].indexOf(t)!==-1}getVisitorIdParam(){return D(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},Ms=class{constructor(t,r){Es()&&id()?this.storage=new Is:Es()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new fr),this.client=new bi(t),this.beaconClient=new qs(t),window.addEventListener("beforeunload",()=>{let n=r();for(let{eventType:i,payload:o}of n)this.beaconClient.sendEvent(i,o)})}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Ns=class{constructor(t,r){this.storage=r||new fr,this.client=new bi(t)}getClientDependingOnEventType(t){return this.client}},xi=class{constructor(){this.storage=new fr,this.client=new js}getClientDependingOnEventType(t){return this.client}},zS="xx",WS=e=>e?.startsWith(zS)||!1,YS=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function KS(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var JS=["1",1,"yes",!0];function Ri(){let e=[];return Rs()&&e.push(window.doNotTrack),_s()&&e.push(navigator.doNotTrack,navigator.msDoNotTrack,navigator.globalPrivacyControl),e.some(t=>JS.indexOf(t)!==-1)}var ld="v15",dd={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function XS(e=dd.default,t=ld,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var ZS="38824e1f-37f5-42d3-8372-a4b8fa9df946",Ge=class{get defaultOptions(){return{endpoint:dd.default,isCustomEndpoint:!1,token:"",version:ld,beforeSendHooks:[],afterSendHooks:[]}}get version(){return sd}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Vh,Mh].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};Ri()?this.runtime=new xi:this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),this.addEventTypeMapping(re.view,{newEventType:re.view,addClientIdParameter:!0}),this.addEventTypeMapping(re.click,{newEventType:re.click,addClientIdParameter:!0}),this.addEventTypeMapping(re.custom,{newEventType:re.custom,addClientIdParameter:!0}),this.addEventTypeMapping(re.search,{newEventType:re.search,addClientIdParameter:!0})}initRuntime(t){return Rs()&&dr()?new Ms(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(KS()&&console.warn(YS),new Ns(t))}get storage(){return this.runtime.storage}determineVisitorId(){return D(this,void 0,void 0,function*(){try{return Rs()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||Dt()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),Dt()}})}getCurrentVisitorId(){return D(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return D(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}setClientId(t,r){return D(this,void 0,void 0,function*(){if(Ai(t))this.setCurrentVisitorId(t.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(zl(t,zl(r,ZS)))}})}getParameters(t,...r){return D(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return D(this,void 0,void 0,function*(){let n=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,n)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(Dt()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}extractClientIdFromLink(t){if(Ri())return null;try{let r=new URL(t).searchParams.get(lt.cvo_cid);if(r==null)return null;let n=lt.fromString(r);return!n||!dr()||!n.validate(document.referrer,this.acceptedLinkReferrers)?null:n.clientId}catch{}return null}resolveParameters(t,...r){return D(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:n=[],addVisitorIdParameter:i=!1,usesMeasurementProtocol:o=!1,addClientIdParameter:s=!1}=this.eventTypeMapping[t]||{};return yield[y=>n.length>0?this.parseVariableArgumentsPayload(n,y):y[0],y=>D(this,void 0,void 0,function*(){return Object.assign(Object.assign({},y),{visitorId:i?yield this.getCurrentVisitorId():""})}),y=>D(this,void 0,void 0,function*(){return s?Object.assign(Object.assign({},y),{clientId:yield this.getCurrentVisitorId()}):y}),y=>o?this.ensureAnonymousUserWhenUsingApiKey(y):y,y=>this.beforeSendHooks.reduce((v,R)=>D(this,void 0,void 0,function*(){let I=yield v;return yield R(t,I)}),y)].reduce((y,v)=>D(this,void 0,void 0,function*(){let R=yield y;return yield v(R)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return D(this,void 0,void 0,function*(){let{usesMeasurementProtocol:n=!1}=this.eventTypeMapping[t]||{};return yield[h=>this.setTrackingIdIfTrackingIdNotPresent(h),h=>this.removeEmptyPayloadValues(h,t),h=>this.validateParams(h,t),h=>n?US(h):h,h=>n?this.removeUnknownParameters(h):h,h=>n?this.processCustomParameters(h):this.mapCustomParametersToCustomData(h)].reduce((h,S)=>D(this,void 0,void 0,function*(){let y=yield h;return yield S(y)}),Promise.resolve(r))})}makeEvent(t,...r){return D(this,void 0,void 0,function*(){let{newEventType:n=t}=this.eventTypeMapping[t]||{},i=yield this.resolveParameters(t,...r),o=yield this.resolvePayloadForParameters(t,i);return{eventType:n,payload:o,log:s=>D(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:n,payload:Object.assign(Object.assign({},o),s)}),yield Promise.all(this.afterSendHooks.map(g=>g(t,Object.assign(Object.assign({},i),s)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return D(this,void 0,void 0,function*(){return(yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return D(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:n}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,n)}})}clear(){this.storage.removeItem("visitorId"),new vi().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(t){return D(this,void 0,void 0,function*(){return this.makeEvent(re.search,t)})}sendSearchEvent(t){return D(this,void 0,void 0,function*(){var{searchQueryUid:r}=t,n=nt(t,["searchQueryUid"]);return(yield this.makeSearchEvent(n)).log({searchQueryUid:r})})}makeClickEvent(t){return D(this,void 0,void 0,function*(){return this.makeEvent(re.click,t)})}sendClickEvent(t){return D(this,void 0,void 0,function*(){var{searchQueryUid:r}=t,n=nt(t,["searchQueryUid"]);return(yield this.makeClickEvent(n)).log({searchQueryUid:r})})}makeCustomEvent(t){return D(this,void 0,void 0,function*(){return this.makeEvent(re.custom,t)})}sendCustomEvent(t){return D(this,void 0,void 0,function*(){var{lastSearchQueryUid:r}=t,n=nt(t,["lastSearchQueryUid"]);return(yield this.makeCustomEvent(n)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return D(this,void 0,void 0,function*(){return this.makeEvent(re.view,t)})}sendViewEvent(t){return D(this,void 0,void 0,function*(){return(yield this.makeViewEvent(t)).log({})})}getVisit(){return D(this,void 0,void 0,function*(){let r=yield(yield w(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return D(this,void 0,void 0,function*(){return yield(yield w(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let n={};for(let i=0,o=r.length;i<o;i++){let s=r[i];if(typeof s=="string")n[t[i]]=s;else if(typeof s=="object")return Object.assign(Object.assign({},n),s)}return n}isKeyAllowedEmpty(t,r){return({[re.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let n=i=>typeof i<"u"&&i!==null&&i!=="";return Object.keys(t).filter(i=>this.isKeyAllowedEmpty(r,i)||n(t[i])).reduce((i,o)=>Object.assign(Object.assign({},i),{[o]:t[o]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(n=>{if(BS(n))return!0;console.log(n,"is not processed by coveoua")}).reduce((n,i)=>Object.assign(Object.assign({},n),{[i]:t[i]}),{})}processCustomParameters(t){let{custom:r}=t,n=nt(t,["custom"]),i={};r&&Si(r)&&(i=this.lowercaseKeys(r));let o=$S(n);return Object.assign(Object.assign({},i),o)}mapCustomParametersToCustomData(t){let{custom:r}=t,n=nt(t,["custom"]);if(r&&Si(r)){let i=this.lowercaseKeys(r);return Object.assign(Object.assign({},n),{customData:Object.assign(Object.assign({},i),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),n={};return r.forEach(i=>{n[i.toLowerCase()]=t[i]}),n}validateParams(t,r){let{anonymizeIp:n}=t,i=nt(t,["anonymizeIp"]);return n!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${n}`.toLowerCase())==-1&&(i.anonymizeIp=1),(r==re.view||r==re.click||r==re.search||r==re.custom)&&(i.originLevel3=this.limit(i.originLevel3,1024)),r==re.view&&(i.location=this.limit(i.location,1024)),(r=="pageview"||r=="event")&&(i.referrer=this.limit(i.referrer,2048),i.location=this.limit(i.location,2048),i.page=this.limit(i.page,2048)),i}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,n=nt(t,["userId"]);return WS(this.options.token)&&!r?(n.userId="anonymous",n):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,n=nt(t,["trackingId"]);return r?t:(n.hasOwnProperty("custom")&&Si(n.custom)&&(n.custom.hasOwnProperty("context_website")||n.custom.hasOwnProperty("siteName"))&&(n.trackingId=n.custom.context_website||n.custom.siteName),n.hasOwnProperty("customData")&&Si(n.customData)&&(n.customData.hasOwnProperty("context_website")||n.customData.hasOwnProperty("siteName"))&&(n.trackingId=n.customData.context_website||n.customData.siteName),n)}limit(t,r){return typeof t=="string"?rS(t,r):t}get baseUrl(){return XS(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},it;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(it||(it={}));var q;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2",e.generatedAnswerCitationClick="generatedAnswerCitationClick",e.generatedAnswerCitationDocumentAttach="generatedAnswerCitationDocumentAttach"})(q||(q={}));var ed={[q.triggerNotify]:"queryPipelineTriggers",[q.triggerExecute]:"queryPipelineTriggers",[q.triggerQuery]:"queryPipelineTriggers",[q.triggerRedirect]:"queryPipelineTriggers",[q.queryErrorBack]:"errors",[q.queryErrorClear]:"errors",[q.queryErrorRetry]:"errors",[q.pagerNext]:"getMoreResults",[q.pagerPrevious]:"getMoreResults",[q.pagerNumber]:"getMoreResults",[q.pagerResize]:"getMoreResults",[q.pagerScrolling]:"getMoreResults",[q.facetSearch]:"facet",[q.facetShowLess]:"facet",[q.facetShowMore]:"facet",[q.recommendation]:"recommendation",[q.likeSmartSnippet]:"smartSnippet",[q.dislikeSmartSnippet]:"smartSnippet",[q.expandSmartSnippet]:"smartSnippet",[q.collapseSmartSnippet]:"smartSnippet",[q.openSmartSnippetFeedbackModal]:"smartSnippet",[q.closeSmartSnippetFeedbackModal]:"smartSnippet",[q.sendSmartSnippetReason]:"smartSnippet",[q.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[q.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[q.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[q.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[q.clearRecentQueries]:"recentQueries",[q.recentResultClick]:"recentlyClickedDocuments",[q.clearRecentResults]:"recentlyClickedDocuments",[q.showLessFoldedResults]:"folding",[q.caseDetach]:"case",[q.likeGeneratedAnswer]:"generatedAnswer",[q.dislikeGeneratedAnswer]:"generatedAnswer",[q.openGeneratedAnswerSource]:"generatedAnswer",[q.generatedAnswerStreamEnd]:"generatedAnswer",[q.generatedAnswerSourceHover]:"generatedAnswer",[q.generatedAnswerCopyToClipboard]:"generatedAnswer",[q.generatedAnswerHideAnswers]:"generatedAnswer",[q.generatedAnswerShowAnswers]:"generatedAnswer",[q.generatedAnswerExpand]:"generatedAnswer",[q.generatedAnswerCollapse]:"generatedAnswer",[q.generatedAnswerFeedbackSubmit]:"generatedAnswer",[q.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[it.expandToFullUI]:"interface",[it.openUserActions]:"User Actions",[it.showPrecedingSessions]:"User Actions",[it.showFollowingSessions]:"User Actions",[it.clickViewedDocument]:"User Actions",[it.clickPageView]:"User Actions",[it.createArticle]:"createArticle"},gr=class{constructor(){this.runtime=new xi,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(re.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(re.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(re.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(re.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return sd}};function ev(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function tv(e){return e.map(t=>t.replace(/;/g,""))}function pd(e){let r=e.join(";");return r.length<=256?r:pd(e.slice(1))}var td=e=>{let t=tv(e),r=ev(t);return pd(r)};function rd(e){let t=typeof e.partialQueries=="string"?e.partialQueries:td(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:td(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Ei=class{constructor(t,r){this.opts=t,this.provider=r;let n=t.enableAnalytics===!1||Ri();this.coveoAnalyticsClient=n?new gr:new Ge(t)}disable(){this.coveoAnalyticsClient=new gr}enable(){this.coveoAnalyticsClient=new Ge(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(q.interfaceLoad)}logInterfaceLoad(){return D(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(q.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return D(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(q.recommendation)}logRecommendation(){return D(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(q.recommendationOpen,t,r)}logRecommendationOpen(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(q.staticFilterClearAll,t)}logStaticFilterClearAll(t){return D(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(q.staticFilterSelect,t)}logStaticFilterSelect(t){return D(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(q.staticFilterDeselect,t)}logStaticFilterDeselect(t){return D(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(q.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return D(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(q.interfaceChange,t)}logInterfaceChange(t){return D(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(q.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return D(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(q.didyoumeanClick)}logDidYouMeanClick(){return D(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(q.resultsSort,t)}logResultsSort(t){return D(this,void 0,void 0,function*(){return(yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(q.searchboxSubmit)}logSearchboxSubmit(){return D(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(q.searchboxClear)}logSearchboxClear(){return D(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(q.searchboxAsYouType)}logSearchboxAsYouType(){return D(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(q.breadcrumbFacet,t)}logBreadcrumbFacet(t){return D(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(q.breadcrumbResetAll)}logBreadcrumbResetAll(){return D(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(q.documentQuickview,t,r)}logDocumentQuickview(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(q.documentOpen,t,r)}logDocumentOpen(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(q.omniboxAnalytics,rd(t))}logOmniboxAnalytics(t){return D(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(q.omniboxFromLink,rd(t))}logOmniboxFromLink(t){return D(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(q.searchFromLink)}logSearchFromLink(){return D(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(q.triggerNotify,t)}logTriggerNotify(t){return D(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(q.triggerExecute,t)}logTriggerExecute(t){return D(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(q.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return D(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(q.undoTriggerQuery,t)}logUndoTriggerQuery(t){return D(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(q.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return D(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(q.pagerResize,t)}logPagerResize(t){return D(this,void 0,void 0,function*(){return(yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(q.pagerNumber,t)}logPagerNumber(t){return D(this,void 0,void 0,function*(){return(yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(q.pagerNext,t)}logPagerNext(t){return D(this,void 0,void 0,function*(){return(yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(q.pagerPrevious,t)}logPagerPrevious(t){return D(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(q.pagerScrolling)}logPagerScrolling(){return D(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(q.facetClearAll,t)}logFacetClearAll(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(q.facetSearch,t)}logFacetSearch(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(q.facetSelect,t)}logFacetSelect(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(q.facetDeselect,t)}logFacetDeselect(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(q.facetExclude,t)}logFacetExclude(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(q.facetUnexclude,t)}logFacetUnexclude(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(q.facetSelectAll,t)}logFacetSelectAll(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(q.facetUpdateSort,t)}logFacetUpdateSort(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(q.facetShowMore,t)}logFacetShowMore(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(q.facetShowLess,t)}logFacetShowLess(t){return D(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(q.queryError,t)}logQueryError(t){return D(this,void 0,void 0,function*(){return(yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return D(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(q.queryErrorBack);return{description:t.description,log:()=>D(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(q.queryErrorBack)})}})}logQueryErrorBack(){return D(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return D(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(q.queryErrorRetry);return{description:t.description,log:()=>D(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(q.queryErrorRetry)})}})}logQueryErrorRetry(){return D(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return D(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(q.queryErrorClear);return{description:t.description,log:()=>D(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(q.queryErrorClear)})}})}logQueryErrorClear(){return D(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(q.likeSmartSnippet)}logLikeSmartSnippet(){return D(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(q.dislikeSmartSnippet)}logDislikeSmartSnippet(){return D(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(q.expandSmartSnippet)}logExpandSmartSnippet(){return D(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(q.collapseSmartSnippet)}logCollapseSmartSnippet(){return D(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(q.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return D(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(q.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return D(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(q.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(q.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return D(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(q.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return D(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(q.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return D(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(q.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return D(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(q.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(q.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(q.copyToClipboard,t,r)}logCopyToClipboard(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(q.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(q.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(q.recentQueryClick)}logRecentQueryClick(){return D(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(q.clearRecentQueries)}logClearRecentQueries(){return D(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(q.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(q.clearRecentResults)}logClearRecentResults(){return D(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(q.noResultsBack)}logNoResultsBack(){return D(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(q.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(q.showLessFoldedResults)}logShowLessFoldedResults(){return D(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var n;return{actionCause:r,customData:(n=t.payload)===null||n===void 0?void 0:n.customData}}makeCustomEvent(t,r){return D(this,arguments,void 0,function*(n,i,o=ed[n]){this.coveoAnalyticsClient.getParameters;let s=Object.assign(Object.assign({},this.provider.getBaseMetadata()),i),g=Object.assign(Object.assign({},yield this.getBaseEventRequest(s)),{eventType:o,eventValue:n}),u=yield this.coveoAnalyticsClient.makeCustomEvent(g);return{description:this.makeEventDescription(u,n),log:({searchUID:a})=>u.log({lastSearchQueryUid:a})}})}logCustomEvent(t,r){return D(this,arguments,void 0,function*(n,i,o=ed[n]){return(yield this.makeCustomEvent(n,i,o)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,n){return D(this,void 0,void 0,function*(){let i=Object.assign(Object.assign({},this.provider.getBaseMetadata()),n),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(i)),{eventType:r,eventValue:t}),s=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(s,t),log:({searchUID:g})=>s.log({lastSearchQueryUid:g})}})}logCustomEventWithType(t,r,n){return D(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(t,r,n)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return D(this,void 0,void 0,function*(){let n=yield this.getBaseSearchEventRequest(t,r),i=yield this.coveoAnalyticsClient.makeSearchEvent(n);return{description:this.makeEventDescription(i,t),log:({searchUID:o})=>i.log({searchQueryUid:o})}})}makeClickEvent(t,r,n,i){return D(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),i))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),s=yield this.coveoAnalyticsClient.makeClickEvent(o);return{description:this.makeEventDescription(s,t),log:({searchUID:g})=>s.log({searchQueryUid:g})}})}logClickEvent(t,r,n,i){return D(this,void 0,void 0,function*(){return(yield this.makeClickEvent(t,r,n,i)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){return D(this,void 0,void 0,function*(){var n,i;return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(i=(n=this.provider).getGeneratedAnswerMetadata)===null||i===void 0?void 0:i.call(n)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return D(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Ge?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(q.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return D(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(q.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return D(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(q.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return D(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCitationClick(t,r){return this.makeClickEvent(q.generatedAnswerCitationClick,Object.assign(Object.assign({},t),{documentPosition:1}),{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logGeneratedAnswerCitationClick(t,r){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCitationClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(q.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(q.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(q.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(q.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(t){return this.makeCustomEvent(q.generatedAnswerExpand,t)}logGeneratedAnswerExpand(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerExpand(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(t){return this.makeCustomEvent(q.generatedAnswerCollapse,t)}logGeneratedAnswerCollapse(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCollapse(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(q.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmitV2(t){return this.makeCustomEvent(q.generatedAnswerFeedbackSubmitV2,t)}logGeneratedAnswerFeedbackSubmitV2(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(q.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return D(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(q.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return D(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(q.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return D(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},Ii=Object.assign({},rn),nd=Object.keys(Ii).map(e=>Ii[e]),pr=class extends ks{constructor({client:t,uuidGenerator:r=Dt}){super({client:t,uuidGenerator:r}),this.ticket={}}getApi(t){let r=super.getApi(t);if(r!==null)return r;switch(t){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>nd.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(nd.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(Ii.pageview,{newEventType:re.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(Ii.event,{newEventType:re.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var n;let i=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((n=this.actionData)!==null&&n!==void 0?n:{}).length>0?{svcActionData:this.actionData}:{}),o=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},o),i),r)}getTicketPayload(){return aS(this.ticket)}};pr.Id="svc";var ki;(function(e){e.click="click",e.flowStart="flowStart"})(ki||(ki={}));var je;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.documentSuggestionClick="documentSuggestionClick",e.documentSuggestionQuickview="documentSuggestionQuickview",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(je||(je={}));var Pi;(function(e){e.quit="Quit",e.solved="Solved"})(Pi||(Pi={}));var Fi=class{constructor(t,r){var n;this.options=t,this.provider=r;let i=((n=t.enableAnalytics)!==null&&n!==void 0?n:!0)&&!Ri();this.coveoAnalyticsClient=i?new Ge(t):new gr,this.svc=new pr({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient=new gr,this.svc=new pr({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new Ge(this.options),this.svc=new pr({client:this.coveoAnalyticsClient})}logEnterInterface(t){return this.svc.setAction(je.enterInterface),this.svc.setTicket(t.ticket),this.sendFlowStartEvent()}logUpdateCaseField(t){return this.svc.setAction(je.fieldUpdate,{fieldName:t.fieldName}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectFieldSuggestion(t){return this.svc.setAction(je.fieldSuggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(t){return this.logClickEvent(je.documentSuggestionClick,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logQuickviewDocumentSuggestion(t){return this.logClickEvent(je.documentSuggestionQuickview,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logRateDocumentSuggestion(t){return this.svc.setAction(je.suggestionRate,Object.assign({rate:t.rating},t.suggestion)),this.svc.setTicket(t.ticket),this.sendClickEvent()}logMoveToNextCaseStep(t){return this.svc.setAction(je.nextCaseStep,{stage:t?.stage}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCancelled(t){return this.svc.setAction(je.caseCancelled,{reason:Pi.quit}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseSolved(t){return this.svc.setAction(je.caseSolved,{reason:Pi.solved}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCreated(t){return this.svc.setAction(je.caseCreated),this.svc.setTicket(t.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",ki.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",ki.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}getBaseEventRequest(t){return D(this,void 0,void 0,function*(){var r,n;let i=Object.assign({},t);return Object.assign(Object.assign({},this.getOrigins()),{customData:i,language:(r=this.provider)===null||r===void 0?void 0:r.getLanguage(),anonymous:(n=this.provider)===null||n===void 0?void 0:n.getIsAnonymous(),clientId:yield this.getClientId()})})}getClientId(){return this.coveoAnalyticsClient instanceof Ge?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getOrigins(){var t,r,n,i,o;return{originContext:(r=(t=this.provider)===null||t===void 0?void 0:t.getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:(n=this.provider)===null||n===void 0?void 0:n.getOriginLevel1(),originLevel2:(i=this.provider)===null||i===void 0?void 0:i.getOriginLevel2(),originLevel3:(o=this.provider)===null||o===void 0?void 0:o.getOriginLevel3()}}logClickEvent(t,r,n,i){return D(this,void 0,void 0,function*(){var o,s;let g=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),i))),{searchQueryUid:(s=(o=this.provider)===null||o===void 0?void 0:o.getSearchUID())!==null&&s!==void 0?s:"",actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(g)})}};f();l();p();d();var rv=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},qt=class{constructor(t){this.getState=t;se(this,"state");this.state=t()}getLanguage(){return rv(this.state)}getBaseMetadata(){let{context:t,configuration:r}=this.state,n=t?.contextValues||{},i={};for(let[o,s]of Object.entries(n)){let g=`context_${o}`;i[g]=s}return r.analytics.analyticsMode==="legacy"&&(i.coveoHeadlessVersion=nr),i}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||or()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};f();l();p();d();var mr=e=>new Ge(e).getCurrentVisitorId(),sn=(e,t)=>typeof t=="function"?(...r)=>{let n=Ur(r[0]);try{return t.apply(t,r)}catch(i){return e.error(i,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,an=(e,t)=>(...r)=>{let n=Ur(r[1]);try{return t.apply(t,r)}catch(i){return e.error(i,"Error in analytics hook. Returning original request."),n}};var cn=class extends qt{getSearchUID(){return this.state.documentSuggestion?.status.lastResponseId??""}},fd=({logger:e,getState:t,analyticsClientMiddleware:r=(o,s)=>s,preprocessRequest:n,provider:i=new cn(t)})=>{let o=t(),s=o.configuration.accessToken,g=o.configuration.analytics.apiBaseUrl??ue(o.configuration.organizationId,o.configuration.environment,"analytics"),u=o.configuration.analytics.runtimeEnvironment,a=o.configuration.analytics.enabled,m=new Fi({enableAnalytics:a,token:s,endpoint:g,runtimeEnvironment:u,preprocessRequest:sn(e,n),beforeSendHooks:[an(e,r),(h,S)=>(e.info({...S,type:h,endpoint:g,token:s},"Analytics request"),S)]},i);return a||m.disable(),m};f();l();p();d();f();l();p();d();f();l();p();d();f();l();p();d();function Oi(){return{desiredCount:5,numberOfValues:8,set:{}}}f();l();p();d();f();l();p();d();f();l();p();d();function gd(e){let{activeValue:t,ancestryMap:r}=ov(e);return t?sv(t,r):[]}function ov(e){let t=[...e],r=new Map;for(;t.length>0;){let n=t.shift();if(n.state==="selected")return{activeValue:n,ancestryMap:r};if(r)for(let i of n.children)r.set(i,n);t.unshift(...n.children)}return{}}function sv(e,t){let r=[];if(!e)return[];let n=e;do r.unshift(n),n=t.get(n);while(n);return r}var av=(e,t)=>e.categoryFacetSet[t]?.request;var Us=(e,t)=>{let r=av(e,t);return gd(r?.currentValues??[])};f();l();p();d();function Ti(){return{}}f();l();p();d();function Di(){return{}}f();l();p();d();function qi(){return{}}f();l();p();d();function ji(){return{}}function Ls(e){return{facetSet:e.facetSet??ji(),categoryFacetSet:e.categoryFacetSet??Ti(),dateFacetSet:e.dateFacetSet??Di(),numericFacetSet:e.numericFacetSet??qi(),automaticFacetSet:e.automaticFacetSet??Oi()}}var Vs=e=>{let t=[];return lv(e).forEach((r,n)=>{let i=Sv(e,r.facetId),o=yv(r,n+1);if(uv(r)){if(!!!Us(e,r.facetId).length)return;t.push({...o,...gv(e,r.facetId),facetType:i,state:"selected"});return}r.currentValues.forEach((s,g)=>{if(s.state==="idle")return;let u=md(s,g+1,i),a=cv(r)?yd(s):pv(s);t.push({...o,...u,...a})})}),dv(e).forEach((r,n)=>{let i=mv(r,n+1);r.values.forEach((o,s)=>{if(o.state==="idle")return;let g=md(o,s+1,"specific"),u=yd(o);t.push({...i,...g,...u})})}),t},cv=e=>e.type==="specific",uv=e=>e.type==="hierarchical",lv=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),dv=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),md=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),pv=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),yd=e=>({displayValue:e.value,value:e.value}),fv=(e,t)=>Us(e,t).map(n=>n.value).join(";"),gv=(e,t)=>{let n=fv(e,t);return{value:n,valuePosition:1,displayValue:n}},mv=(e,t)=>({title:hd(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),yv=(e,t)=>({title:hd(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),hd=(e,t)=>`${e}_${t}`,hv=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,Sv=(e,t)=>{let r=hv(e,t);return r?r.type:"specific"};f();l();p();d();var jt=e=>{if(vv(e)||Qs(e))return e.generatedAnswer?.answerId;if(Av(e))return e.search?.response?.extendedResults?.generativeQuestionAnsweringId},vv=e=>"answer"in e&&"generatedAnswer"in e&&!K(e.generatedAnswer?.answerConfigurationId),Qs=e=>{let t=lr(e);return"answerGenerationApi"in e&&"generatedAnswer"in e&&typeof t=="string"&&t.trim().length>0},Av=e=>"search"in e&&e.search!==void 0&&typeof e.search=="object",Bs=e=>e.generatedAnswer?.fieldsToIncludeInCitations,wv=de(e=>e.generatedAnswer?.citations,(e,t)=>t,(e,t)=>e?.find(r=>r.id===t));f();l();p();d();var Qe=()=>({q:"",enableQuerySyntax:!1});f();l();p();d();function $s(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function ze(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:$s(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:$s(),extendedResults:{},searchAction:void 0}}f();l();p();d();f();l();p();d();f();l();p();d();var Sd=(r=>(r.Ascending="ascending",r.Descending="descending",r))(Sd||{}),vd=(o=>(o.Relevancy="relevancy",o.QRE="qre",o.Date="date",o.Field="field",o.NoSort="nosort",o))(vd||{}),Hs=e=>{if(kc(e))return e.map(t=>Hs(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Ad=()=>({by:"relevancy"});var qD=new ae({values:{by:new Po({enum:vd,required:!0}),order:new Po({enum:Sd}),field:new W}});function Mi(){return Hs(Ad())}f();l();p();d();f();l();p();d();f();l();p();d();var yr=class e{static set(t,r,n){let i,o,s;n&&(o=new Date,o.setTime(o.getTime()+n));let g=window.location.hostname,u=/^(\d{1,3}\.){3}\d{1,3}$/,a=/^([0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}$/;u.test(g)||a.test(g)||g.indexOf(".")===-1?Gs(t,r,o):(s=g.split("."),i=s[s.length-2]+"."+s[s.length-1],Gs(t,r,o,i))}static get(t){let r=t+"=",n=document.cookie.split(";");for(let i=0;i<n.length;i++){let o=n[i];if(o=o.replace(/^\s+/,""),o.lastIndexOf(r,0)===0)return o.substring(r.length,o.length)}return null}static erase(t){e.set(t,"",-1)}};function Gs(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}f();l();p();d();function Cv(){return typeof navigator<"u"}function wd(){try{return typeof localStorage<"u"}catch{return!1}}function Cd(){try{return typeof sessionStorage<"u"}catch{return!1}}function bd(){return!!(Cv()&&navigator.cookieEnabled)}var xd=null;function Rd(){return xd||(wd()?localStorage:bd()?new zs:Cd()?sessionStorage:new Ws)}var hr=class hr{getItem(t){return yr.get(`${hr.prefix}${t}`)}removeItem(t){yr.erase(`${hr.prefix}${t}`)}setItem(t,r,n){yr.set(`${hr.prefix}${t}`,r,n)}};se(hr,"prefix","coveo_");var zs=hr;var Ws=class{getItem(t){return null}removeItem(t){}setItem(t,r){}};var Ni="__coveo.analytics.history",bv=20,xv=1e3*60,Rv=75,Mt=class Mt{constructor(t){se(this,"store");this.store=t||Rd()}static getInstance(t){return Mt.instance||(Mt.instance=new Mt(t)),Mt.instance}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}async addElementAsync(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=await this.getHistoryWithInternalTimeAsync();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}async getHistoryAsync(){let t=await this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryWithInternalTime(){try{let t=this.store.getItem(Ni);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}async getHistoryWithInternalTimeAsync(){try{let t=await this.store.getItem(Ni);return t?JSON.parse(t):[]}catch{return[]}}setHistory(t){try{this.store.setItem(Ni,JSON.stringify(t.slice(0,bv)))}catch{}}clear(){try{this.store.removeItem(Ni)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,i)=>(i.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,Rv)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value===t.value?(t.internalTime||0)-(r.internalTime||0)>xv:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:i,value:o}=r;return{name:n,time:i,value:o}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:i}=t;return r&&typeof i=="string"&&r.toLowerCase()==="query"&&i.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};se(Mt,"instance",null);var Ys=Mt,We=Ys;var un=class un extends qt{constructor(){super(...arguments);se(this,"getFacetRequest",r=>this.state.facetSet?.[r]?.request||this.state.categoryFacetSet?.[r]?.request||this.state.dateFacetSet?.[r]?.request||this.state.numericFacetSet?.[r]?.request||this.state.automaticFacetSet?.set[r]?.response)}getFacetState(){return Vs(Ls(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||un.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let r=this.getState();return r.search?.searchResponseId||r.search?.response.searchUid||ze().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let r=!!this.getSplitTestRunName(),n=this.state.search?.response.pipeline||this.state.pipeline||un.fallbackPipelineName;return r?n:void 0}getBaseMetadata(){let r=this.getState(),n=super.getBaseMetadata(),i=jt(r);return i&&(n.generativeQuestionAnsweringId=i),n}getFacetMetadata(r,n){let o=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:o,facetValue:n,facetTitle:`${o}_${r}`}}getFacetClearAllMetadata(r){let i=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:i,facetTitle:`${i}_${r}`}}getFacetUpdateSortMetadata(r,n){let o=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:o,criteria:n,facetTitle:`${o}_${r}`}}getRangeBreadcrumbFacetMetadata(r,n){let o=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:o,facetRangeEnd:n.end,facetRangeEndInclusive:n.endInclusive,facetRangeStart:n.start,facetTitle:`${o}_${r}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??Mi()}}getStaticFilterToggleMetadata(r,n){return{...this.getBaseMetadata(),staticFilterId:r,staticFilterValue:n}}getStaticFilterClearAllMetadata(r){return{...this.getBaseMetadata(),staticFilterId:r}}getUndoTriggerQueryMetadata(r){return{...this.getBaseMetadata(),undoneQuery:r}}getCategoryBreadcrumbFacetMetadata(r,n){let o=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:r,categoryFacetField:o,categoryFacetPath:n,categoryFacetTitle:`${o}_${r}`}}getOmniboxAnalyticsMetadata(r,n){let i=this.state.querySuggest?.[r],o=i.completions.map(a=>a.expression),s=i.partialQueries.length-1,g=i.partialQueries[s]||"",u=i.responseId;return{...this.getBaseMetadata(),suggestionRanking:o.indexOf(n),partialQuery:g,partialQueries:i.partialQueries.length>0?i.partialQueries:"",suggestions:o.length>0?o:"",querySuggestResponseId:u}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(r){return{...this.getBaseMetadata(),...r}}getGeneratedAnswerMetadata(){let r=this.getState(),n={};return r.generatedAnswer?.isVisible!==void 0&&(n.showGeneratedAnswer=r.generatedAnswer.isVisible),n}get resultURIs(){return this.results?.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||Qe().q}get responseTime(){return this.state.search?.duration||ze().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||ze().response.totalCountFiltered}};se(un,"fallbackPipelineName","default");var dt=un,Ed=({logger:e,getState:t,analyticsClientMiddleware:r=(o,s)=>s,preprocessRequest:n,provider:i})=>{let o=t(),s=o.configuration.accessToken,g=o.configuration.analytics.apiBaseUrl??ue(o.configuration.organizationId,o.configuration.environment,"analytics"),u=o.configuration.analytics.runtimeEnvironment,a=o.configuration.analytics.enabled,m=new Ei({token:s,endpoint:g,runtimeEnvironment:u,preprocessRequest:sn(e,n),beforeSendHooks:[an(e,r),(h,S)=>(e.info({...S,type:h,endpoint:g,token:s},"Analytics request"),S)]},i);return a||m.disable(),m},Ks=()=>{let t=We.getInstance().getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};f();l();p();d();function Id(e){let t=kd(e),r=[e,...t].filter(i=>i.parentResult).map(i=>i.parentResult);return hc([e,...t,...r],i=>i.uniqueId)}function kd(e){return e.childResults?e.childResults.flatMap(t=>[t,...kd(t)]):[]}f();l();p();d();var _i=()=>"";function Pd(e,t){return{...new dt(t).getBaseMetadata(),actionCause:e,type:e}}function Ev(e){return Object.assign(e,{instantlyCallable:!0})}function Iv(e,t){let r=o=>Ev(ie(e,o)),n=r(async(o,{getState:s,extra:g})=>{let{analyticsClientMiddleware:u,preprocessRequest:a,logger:m}=g;return await(await t({getState:s,analyticsClientMiddleware:u,preprocessRequest:a,logger:m})).log({state:s(),extra:g})});return Object.assign(n,{prepare:async({getState:o,analyticsClientMiddleware:s,preprocessRequest:g,logger:u})=>{let{description:a,log:m}=await t({getState:o,analyticsClientMiddleware:s,preprocessRequest:g,logger:u});return{description:a,action:r(async(h,{getState:S,extra:y})=>await m({state:S(),extra:y}))}}}),n}var Fd=(e,t,r)=>{function n(...i){let o=i.length===1?{...i[0],__legacy__getBuilder:t(i[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:i[0],__legacy__getBuilder:t(i[1]),__legacy__provider:i[2],analyticsConfigurator:e,providerClass:r};return Fv(o)}return n},kv=e=>e.configuration.analytics.analyticsMode==="legacy",Pv=e=>e.configuration.analytics.analyticsMode==="next",Fv=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:i,analyticsConfigurator:o,providerClass:s})=>(r??(r=g=>new s(g)),Iv(e,async({getState:g,analyticsClientMiddleware:u,preprocessRequest:a,logger:m})=>{let h=[],S={log:async({state:b})=>{for(let P of h)await P(b)}},y=g(),v=o({getState:g,logger:m,analyticsClientMiddleware:u,preprocessRequest:a,provider:r(g)}),R=await t(v,g());S.description=R?.description,h.push(async b=>{kv(b)&&await Ov(R,r,b,m,v.coveoAnalyticsClient)});let{emit:I}=Xr(y);return h.push(async b=>{if(Pv(b)&&i&&n){let P=n(b);await Uv(I,i,P)}}),S}));async function Ov(e,t,r,n,i){t(()=>r);let o=await e?.log({searchUID:t(()=>r).getSearchUID()});n.info({client:i,response:o},"Analytics response")}var Tv=e=>r=>(n,i)=>Promise.resolve({description:{actionCause:e},log:async o=>{r(n,i)}}),be=Fd(e=>Ed({...e,provider:e.provider||new dt(e.getState)}),e=>e,dt),Oe=Fd(fd,Tv("caseAssist"),cn);var Js=(e,t)=>{let r=o=>o+(t.pagination?.firstResult??0),n=-1,i=t.search?.results;return n=Dd(e,i),n<0&&(n=_v(e,i)),n<0&&(n=0),Dv(e,r(n),t)};function Dv(e,t,r){let n=e.raw.collection;return{collectionName:typeof n=="string"?n:"default",documentAuthor:Mv(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:Nv(e),queryPipeline:r.pipeline||_i()}}var Xs=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),Od={urihash:new W,sourcetype:new W,permanentid:new W},Td={uniqueId:Y,raw:new ae({values:Od}),title:Y,uri:Y,clickUri:Y,rankingModifier:new W({required:!1,emptyAllowed:!0})};function qv(e){return Object.assign({},...Object.keys(Od).map(t=>({[t]:e[t]})))}function jv(e){return Object.assign({},...Object.keys(Td).map(t=>({[t]:e[t]})),{raw:qv(e.raw)})}function Mv(e){let t=e.raw.author;return K(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function Nv(e){let t=e.raw.source;return K(t)?"unknown":t}var Zs=e=>new Ue(Td).validate(jv(e));function _v(e,t){for(let[r,n]of t.entries()){let i=Id(n);if(Dd(e,i)!==-1)return r}return-1}function Dd(e,t=[]){return t.findIndex(({uniqueId:r})=>r===e.uniqueId)}async function Uv(e,t,r){await e(t,r)}f();l();p();d();var Sr=e=>be({prefix:"analytics/generatedAnswer/streamEnd",__legacy__getBuilder:(t,r)=>{let n=jt(r),i=e?!r.generatedAnswer?.answer||!r.generatedAnswer?.answer.length:void 0;return n?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:n,answerGenerated:e,answerTextIsEmpty:i}):null},analyticsType:"Rga.AnswerReceived",analyticsPayloadBuilder:t=>({answerId:jt(t)??"",answerGenerated:e??!1})}),vr=()=>be({prefix:"analytics/generatedAnswer/responseLinked",__legacy__getBuilder:()=>null,analyticsType:"Rga.ResponseLinked",analyticsPayloadBuilder:e=>({answerId:jt(e)??"",responseId:e.search?.searchResponseId||e.search?.response.searchUid||""})});var qd=()=>({handleOpen:(e,t)=>{let r=e.headers.get("x-answer-id");r&&t(Ui(r))},handleError:e=>{throw e},handleMessage:{"agentInteraction.answerHeader":(e,t)=>{e?.payload?.conversationId&&t(jl(e.payload.conversationId)),e.payload.followUpEnabled&&t(ql(e.payload.followUpEnabled)),t(gn("text/markdown")),t(dn(!0)),t(Ar(!1))},"generativeengines.messageType":(e,t)=>{e?.payload?.textDelta&&t(pn({textDelta:e.payload.textDelta}))},"agentInteraction.citations":(e,t)=>{e?.payload?.citations!==void 0&&t(fn({citations:e.payload.citations}))},"generativeengines.endOfStreamType":(e,t)=>{let r=e?.payload?.answerGenerated??!1;t(ta(r)),t(mn(!r)),t(dn(!1)),t(Ar(!1)),t(Sr(r)),t(vr())},error:(e,t)=>{e.finishReason==="ERROR"&&t(ea(e))}}});var gi={"head-answer":qd,"follow-up-answer":$l};f();l();p();d();var jd=e=>{let{configuration:t}=e,{organizationId:r,environment:n,knowledge:{agentId:i}}=t,o=ue(r,n),s=i?.trim();if(!o||!r||!s)throw new Error("Missing required parameters for answer endpoint");let g=`/api/preview/organizations/${r}/agents`;return`${o}${g}/${s}/answer`};var Lv=ur.injectEndpoints({overrideExisting:!0,endpoints:e=>({generateAnswer:e.query({queryFn:()=>({data:li()}),async onQueryStarted(t,{getState:r,updateCachedData:n,dispatch:i}){let{strategyKey:o,...s}=t,g=jd(r());await fi(g,s,{getState:r,updateCachedData:n,dispatch:i},gi[o]?.())}})})}),Md=e=>Lv.endpoints.generateAnswer.initiate(e);f();l();p();d();f();l();p();d();var Nd=de(e=>e.advancedSearchQueries,e=>{if(!e)return{};let{aq:t,cq:r,dq:n,lq:i}=e;return{...t&&{aq:t},...r&&{cq:r},...n&&{dq:n},...i&&{lq:i}}});f();l();p();d();var Nt=(e,t,r)=>({analytics:{clientId:t.clientId,clientTimestamp:new Date().toISOString(),documentReferrer:t.referrer,documentLocation:t.location,originContext:e.originContext,...r&&{actionCause:r.actionCause},...r&&{customData:r.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.deviceId&&{deviceId:e.deviceId},...e.trackingId&&{trackingId:e.trackingId},capture:t.capture??t.clientId!=="",source:sr(e)}});f();l();p();d();var _d=e=>e.context;f();l();p();d();var ra=e=>e.pipeline;f();l();p();d();f();l();p();d();var yn=_e(Li(),1),$d=_e(Ud(),1);f();l();p();d();var Vd=_e(Li(),1),Qd=_e(Ld(),1);Vd.default.extend(Qd.default);var Vv="YYYY/MM/DD@HH:mm:ss";function Bd(e){return e.format(Vv)}yn.default.extend($d.default);var Qv=["past","now","next"],Bv=["minute","hour","day","week","month","quarter","year"];function $v(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,yn.default)().subtract(r,n);case"next":return(0,yn.default)().add(r,n);case"now":return(0,yn.default)()}}function ua(e){return Bd($v(Hv(e)))}function Hd(e){return e.toLocaleLowerCase().split("-")}function la(e){let[t,r,n]=Hd(e);if(t==="now")return!0;if(!Qv.includes(t)||!Bv.includes(n))return!1;let i=parseInt(r);return!(Number.isNaN(i)||i<=0)}function Hv(e){let[t,r,n]=Hd(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}f();l();p();d();function Gd(e){return e.type==="dateRange"}function zd(e){return`start${e}`}function Wd(e){return`end${e}`}var da=()=>({dateFacetValueMap:{}});function Gv(e,t,r){let n=e.start,i=e.end;return la(n)&&(n=ua(n),r.dateFacetValueMap[t][zd(n)]=e.start),la(i)&&(i=ua(i),r.dateFacetValueMap[t][Wd(i)]=e.end),{...e,start:n,end:i}}function pa(e,t){if(Gd(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(i=>Gv(i,r,t))}}return e}function pt(e){let t=da();return{request:{...e,facets:e.facets?.map(n=>pa(n,t))},mappings:t}}function zv(e,t,r){return{...e,start:r.dateFacetValueMap[t][zd(e.start)]||e.start,end:r.dateFacetValueMap[t][Wd(e.end)]||e.end}}function Wv(e,t){return e.facetId in t.dateFacetValueMap}function Yv(e,t){return Wv(e,t)?{...e,values:e.values.map(r=>zv(r,e.facetId,t))}:e}function Vi(e,t){return"success"in e?{success:{...e.success,facets:e.success.facets?.map(n=>Yv(n,t))}}:e}f();l();p();d();f();l();p();d();f();l();p();d();function ft(e){return Object.values(e).map(t=>t.request)}function fa(e,t){let r={};e.forEach(o=>{r[o.facetId]=o});let n=[];t.forEach(o=>{o in r&&(n.push(r[o]),delete r[o])});let i=Object.values(r);return[...n,...i]}function Yd(e){return ft(e).map(t=>{let n=t.currentValues.some(({state:i})=>i!=="idle");return t.generateAutomaticRanges&&!n?{...t,currentValues:[]}:t})}var ga={alphanumericDescending:{type:"alphanumeric",order:"descending"},alphanumericNaturalDescending:{type:"alphanumericNatural",order:"descending"}};function Kv(e){return ft(e).map(t=>{let r=ga[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function Jv(e){return[...Kv(e.facetSet??{}),...Yd(e.numericFacetSet??{}),...Yd(e.dateFacetSet??{}),...ft(e.categoryFacetSet??{})]}function Xv(e){return Jv(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function Qi(e){return fa(Xv(e),e.facetOrder??[])}f();l();p();d();f();l();p();d();f();l();p();d();var Kd=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await mr(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...Ks()&&{pageId:Ks()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:sr(e)}}}};var wr=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??Ht(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{actionsHistory:We.getInstance().getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Kd(e.configuration.analytics,t),...e.excerptLength&&!K(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});f();l();p();d();var Bi=(e,t,r)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??Ht(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:t.referrer,timezone:e.configuration.search.timezone,...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&Nt(e.configuration.analytics,t,r),...e.excerptLength&&!K(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});f();l();p();d();var Jd=de(e=>e.staticFilterSet,e=>Object.values(e||{}).map(r=>{let n=r.values.filter(o=>o.state==="selected"&&!!o.expression.trim()),i=n.map(o=>o.expression).join(" OR ");return n.length>1?`(${i})`:i}));var gt=async(e,t,r)=>{let n=ya(e),i=Zv(e),o=eA(e),s=e.configuration.analytics.analyticsMode==="legacy"?await wr(e,r):Bi(e,t,r);return pt({...s,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...n&&{cq:n},...i.length&&{facets:i},...e.pagination&&{numberOfResults:ma(e),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:o}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function ma(e){return e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0}function Zv(e){return fa(rA(e),e.facetOrder??[])}function eA(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(tA).filter(r=>r.currentValues.length>0):void 0}function tA(e){let{field:t,label:r,values:n}=e,i=n.filter(o=>o.state==="selected");return{field:t,label:r,currentValues:i}}function rA(e){return nA(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function nA(e){return[...iA(e.facetSet??{}),...Xd(e.numericFacetSet??{}),...Xd(e.dateFacetSet??{}),...ft(e.categoryFacetSet??{})]}function iA(e){return ft(e).map(t=>{let r=ga[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function Xd(e){return ft(e).map(t=>{let r=t.currentValues,n=r.some(({state:o})=>o!=="idle"),i=r.some(o=>o.previousState);return t.generateAutomaticRanges&&!n&&!i?{...t,currentValues:[]}:t})}function ya(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(o=>o.isActive)?.expression.trim()||"",i=Jd(e);return[t,n,...i].filter(o=>!!o).join(" AND ")}f();l();p();d();f();l();p();d();var Sn=(e,t)=>{let r=e;return K(r[t])?K(e.raw[t])?null:e.raw[t]:r[t]},oA=e=>t=>e.every(r=>!K(Sn(t,r))),sA=e=>t=>e.every(r=>K(Sn(t,r))),aA=(e,t)=>r=>{let n=Zd(e,r);return t.some(i=>n.some(o=>`${o}`.toLowerCase()===i.toLowerCase()))},cA=(e,t)=>r=>{let n=Zd(e,r);return t.every(i=>n.every(o=>`${o}`.toLowerCase()!==i.toLowerCase()))},Zd=(e,t)=>{let r=Sn(t,e);return yc(r)?r:[r]},ep={getResultProperty:Sn,fieldsMustBeDefined:oA,fieldsMustNotBeDefined:sA,fieldMustMatch:aA,fieldMustNotMatch:cA};var ha=de(e=>e.search,e=>e?.searchAction?.actionCause||"");f();l();p();d();var Sa=e=>e.searchHub;f();l();p();d();var va=de(e=>e,e=>{if(!e)return"";for(let t in e)if(e[t].isActive)return e[t].id;return""}),kN=de(e=>e,e=>{let t=va(e);return t&&e?e[t].expression:""});f();l();p();d();var tp=e=>{if(!(!e.dictionaryFieldContext||!Object.keys(e.dictionaryFieldContext.contextValues).length))return e.dictionaryFieldContext.contextValues};f();l();p();d();var rp=e=>e.excerptLength?.length;f();l();p();d();var np=e=>{let{freezeFacetOrder:t}=e.facetOptions??{};return t!==void 0?{freezeFacetOrder:t}:void 0};f();l();p();d();var ip=e=>{if(e.folding)return{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}};f();l();p();d();var op=e=>e.sortCriteria;var sp=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:ue(e.configuration.organizationId,e.configuration.environment),streamId:e.search.extendedResults?.generativeQuestionAnsweringId}),ap=(e,t)=>{let r=Tt(e)?.q,{aq:n,cq:i,dq:o,lq:s}=lA(e),g=_d(e),u=Nt(e.configuration.analytics,t,{actionCause:ha(e)}),a=Sa(e),m=ra(e),h=Bs(e)??[],S=up(e),y=va(e.tabSet)||"default",v=ws(e),R=Tl(e),I=t.referrer||"",b=np(e),P=op(e),x=uA(e),E=rp(e),j=ip(e),O=tp(e);return{q:r,...n&&{aq:n},...i&&{cq:i},...o&&{dq:o},...s&&{lq:s},...e.query&&{enableQuerySyntax:hl(e)},...g?.contextValues&&{context:g.contextValues},pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:h}},...a?.length&&{searchHub:a},...m?.length&&{pipeline:m},...S.length&&{facets:S},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...e.pagination&&{numberOfResults:ma(e),firstResult:e.pagination.firstResult},tab:y,locale:v,timezone:R,...e.debug!==void 0&&{debug:e.debug},referrer:I,...x,...j??{},...E&&{excerptLength:E},...O&&{dictionaryFieldContext:O},sortCriteria:P,...b&&{facetOptions:b},...u,...e.insightCaseContext?.caseContext&&{caseContext:e.insightCaseContext?.caseContext}}},cp=(e,t)=>{let r=Tt(e)?.q,n=up(e),i=Nt(e.configuration.analytics,t,{actionCause:ha(e)}),o=ws(e),s=Sa(e),g=ra(e),u=Bs(e)??[];return{q:r||"",...n.length&&{facets:n},pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:u}},...s?.length&&{searchHub:s},...g?.length&&{pipeline:g},...i,locale:o}},up=e=>Qi(e)?.map(t=>pa(t,da())).sort((t,r)=>t.facetId>r.facetId?1:r.facetId>t.facetId?-1:0),uA=e=>({actionsHistory:e.configuration.analytics.enabled?We.getInstance().getHistory():[]}),lA=e=>{let t=Nd(e),r=ya(e);return{...t,...r&&{cq:r}}};f();l();p();d();var lp=["text/plain","text/markdown"];var Cr=new W({required:!0}),dp=new W,br=new fe({required:!0}),Cs={id:Cr,title:Cr,uri:Cr,permanentid:Cr,clickUri:dp},mi=new W({required:!0,constrainTo:lp}),$_=_("generatedAnswer/setIsVisible",e=>G(e,br)),Ui=_("generatedAnswer/setAnswerId",e=>G(e,Y)),H_=_("generatedAnswer/setAnswerGenerationMode",e=>G(e,new W({constrainTo:["automatic","manual"],required:!1,default:"automatic"}))),G_=_("generatedAnswer/setIsEnabled",e=>G(e,br)),pn=_("generatedAnswer/updateMessage",e=>G(e,{textDelta:Cr})),fn=_("generatedAnswer/updateCitations",e=>G(e,{citations:new Le({required:!0,each:new ae({values:Cs})})})),ea=_("generatedAnswer/updateError",e=>G(e,{message:dp,code:new we({min:0})})),vn=_("generatedAnswer/resetAnswer"),z_=_("generatedAnswer/like"),W_=_("generatedAnswer/dislike"),Y_=_("generatedAnswer/feedbackModal/open"),K_=_("generatedAnswer/expand"),J_=_("generatedAnswer/collapse"),X_=_("generatedAnswer/setId",e=>G(e,{id:new W({required:!0})})),Z_=_("generatedAnswer/feedbackModal/close"),eU=_("generatedAnswer/sendFeedback"),Ar=_("generatedAnswer/setIsLoading",e=>G(e,br)),dn=_("generatedAnswer/setIsStreaming",e=>G(e,br)),gn=_("generatedAnswer/setAnswerContentFormat",e=>G(e,mi)),tU=_("generatedAnswer/updateResponseFormat",e=>G(e,{contentFormat:new Le({each:mi,default:["text/plain"]})})),rU=_("knowledge/updateAnswerConfigurationId",e=>G(e,Cr)),nU=_("generatedAnswer/registerFieldsToIncludeInCitations",e=>G(e,Cu)),ta=_("generatedAnswer/setIsAnswerGenerated",e=>G(e,br)),mn=_("generatedAnswer/setCannotAnswer",e=>G(e,br)),pp=_("generatedAnswer/setAnswerApiQueryParams",e=>G(e,new ae({}))),iU=ie("generatedAnswer/streamAnswer",async(e,t)=>{let r=t.getState(),{dispatch:n,extra:i,getState:o}=t,{search:s}=o(),{queryExecuted:g}=s,{setAbortControllerRef:u}=e,a=await sp(r),m=(y,v)=>{switch(y){case"genqa.headerMessageType":{let R=JSON.parse(v);n(gn(R.contentFormat));break}case"genqa.messageType":n(pn(JSON.parse(v)));break;case"genqa.citationsType":n(fn(JSON.parse(v)));break;case"genqa.endOfStreamType":{let R=JSON.parse(v).answerGenerated,I=g.length!==0&&!R;n(mn(I)),n(dn(!1)),n(ta(R)),n(Sr(R)),n(vr());break}default:r.debug&&i.logger.warn(`Unknown payloadType: "${y}"`)}};n(Ar(!0));let h=y=>y.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,S=i.streamingClient?.streamGeneratedAnswer(a,{write:y=>{h(a)&&(n(Ar(!1)),y.payload&&y.payloadType&&m(y.payloadType,y.payload))},abort:y=>{h(a)&&n(ea(y))},close:()=>{h(a)&&n(dn(!1))},resetAnswer:()=>{h(a)&&n(vn())}});S?u(S):n(Ar(!1))}),oU=ie("generatedAnswer/generateAnswer",async(e,{getState:t,dispatch:r,extra:{navigatorContext:n,logger:i}})=>{r(vn());let o=t();if(o.generatedAnswer.answerConfigurationId){let s=ap(o,n);r(pp(s)),await r(gp(s))}else i.warn("[WARNING] Missing answerConfigurationId in engine configuration. The generateAnswer action requires an answer configuration ID to use CRGA with the Answer API.")}),fp=ie("generatedAnswerWithFollowUps/generateHeadAnswer",async(e,{getState:t,dispatch:r,extra:{navigatorContext:n,logger:i}})=>{let o=t();if(!lr(o)){i.warn("Missing agentId in engine configuration. The generateHeadAnswer action requires an agent ID.");return}r(vn());let g=cp(o,n),u={...g,strategyKey:"head-answer"};r(pp(g)),await r(Md(u))});var dA=(e,t)=>{let{contentFormat:r}=t;e.contentFormat=r,e.isStreaming=!0,e.isLoading=!1},pA=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},fA=(e,t)=>{e.citations=t.citations},gA=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},mA=(e,t)=>{let r=t.errorMessage||"Unknown error occurred";e.error={message:r,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error(`Generated answer error: ${r} (code: ${t.code})`)},yA=(e,t,r)=>{let n=JSON.parse(e.data);n.finishReason==="ERROR"&&n.errorMessage&&mA(t,n);let i=n.payload.length?JSON.parse(n.payload):{};switch(n.payloadType){case"genqa.headerMessageType":i.contentFormat&&(dA(t,i),r(gn(i.contentFormat)));break;case"genqa.messageType":i.textDelta&&(pA(t,i),r(pn({textDelta:i.textDelta})));break;case"genqa.citationsType":i.citations&&(fA(t,i),r(fn({citations:i.citations})));break;case"genqa.endOfStreamType":gA(t,i),r(Sr(i.answerGenerated??!1)),r(vr());break}},hA=(e,t,r,n)=>{if(!e||!t||!r)throw new Error("Missing required parameters for answer endpoint");let i=`/rest/organizations/${t}`,o=n?`insight/v1/configs/${n}/answer`:"answer/v1/configs";return`${e}${i}/${o}/${r}/generate`},Aa=yl.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),serializeQueryArgs:({endpointName:t,queryArgs:r})=>{let{analytics:n,...i}=r;return`${t}(${JSON.stringify(i)})`},async onCacheEntryAdded(t,{getState:r,cacheDataLoaded:n,updateCachedData:i,dispatch:o}){await n;let{configuration:s,generatedAnswer:g,insightConfiguration:u}=r(),{organizationId:a,environment:m,accessToken:h}=s,S=ue(a,m),y=hA(S,a,g.answerConfigurationId,u?.insightId);await di(y,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${h}`,Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch:w,onopen:async v=>{let R=v.headers.get("x-answer-id");R&&i(I=>{I.answerId=R,o(Ui(R))})},onmessage:v=>{i(R=>{yA(v,R,o)})},onerror:v=>{throw v},onclose:()=>{i(v=>{o(mn(!v.generated))})}})}})})}),gp=e=>Aa.endpoints.getAnswer.initiate(e);f();l();p();d();var mp=ge(nr,e=>e);f();l();p();d();function SA(e){let t=e.payload?.analyticsAction;return yp(e)&&!K(t)}function yp(e){return"type"in e}var hp=e=>t=>r=>{let n;SA(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let i=t(r);return yp(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),i};f();l();p();d();f();l();p();d();f();l();p();d();var _U=_("tab/register",e=>{let t=new ae({values:{id:Y,expression:Ve}});return G(e,t)}),Sp=_("tab/updateActiveTab",e=>G(e,Y));f();l();p();d();var $i=_e(Li(),1),wp=_e(vp(),1),Cp=_e(Ap(),1);$i.default.extend(Cp.default);$i.default.extend(wp.default);var bp=()=>({organizationId:"",accessToken:"",search:{locale:"en-US",timezone:$i.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",analyticsMode:"next",source:{}},knowledge:{answerConfigurationId:"",agentId:void 0},environment:"prod"});f();l();p();d();var vA=/(^|; )Coveo-Pendragon=([^;]*)/;function Ra(){return typeof window>"u"?!1:vA.exec(document.cookie)?.pop()||null}var xp=ge(bp(),e=>e.addCase(ir,(t,r)=>{AA(t,r.payload)}).addCase(ei,(t,r)=>{wA(t,r.payload)}).addCase(ti,(t,r)=>{CA(t,r.payload)}).addCase(ri,t=>{t.analytics.enabled=!1}).addCase(ni,t=>{t.analytics.enabled=!0}).addCase(Du,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(qu,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(Sp,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(Iu,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(Jn,(t,r)=>{K(r.payload.tab)||(t.analytics.originLevel2=r.payload.tab)}).addCase(ju,(t,{payload:r})=>{t.knowledge.agentId=r}));function AA(e,t){K(t.accessToken)||(e.accessToken=t.accessToken),e.environment=t.environment??"prod",K(t.organizationId)||(e.organizationId=t.organizationId)}function wA(e,t){K(t.proxyBaseUrl)||(e.search.apiBaseUrl=t.proxyBaseUrl),K(t.locale)||(e.search.locale=t.locale),K(t.timezone)||(e.search.timezone=t.timezone),K(t.authenticationProviders)||(e.search.authenticationProviders=t.authenticationProviders)}function CA(e,t){K(t.enabled)||(e.analytics.enabled=t.enabled),K(t.originContext)||(e.analytics.originContext=t.originContext),K(t.originLevel2)||(e.analytics.originLevel2=t.originLevel2),K(t.originLevel3)||(e.analytics.originLevel3=t.originLevel3),K(t.proxyBaseUrl)||(e.analytics.apiBaseUrl=t.proxyBaseUrl),K(t.trackingId)||(e.analytics.trackingId=t.trackingId),K(t.analyticsMode)||(e.analytics.analyticsMode=t.analyticsMode),K(t.source)||(e.analytics.source=t.source);try{let r=Ra();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r)}catch{}K(t.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.runtimeEnvironment),K(t.anonymous)||(e.analytics.anonymous=t.anonymous),K(t.deviceId)||(e.analytics.deviceId=t.deviceId),K(t.userDisplayName)||(e.analytics.userDisplayName=t.userDisplayName),K(t.documentLocation)||(e.analytics.documentLocation=t.documentLocation)}var Te=xp;f();l();p();d();function bA(e){return e.instantlyCallable}var Rp=()=>e=>t=>e(bA(t)?t():t);f();l();p();d();f();l();p();d();f();l();p();d();var Ep=_("breadcrumb/deselectAll"),Ip=_("breadcrumb/deselectAllNonBreadcrumbs");f();l();p();d();var kp=_("facet/updateFacetAutoSelection",e=>G(e,{allow:new fe({required:!0})}));f();l();p();d();f();l();p();d();var Hi=class extends dt{constructor(r){super(r);this.getState=r}get activeInstantResultQuery(){let r=this.getState().instantResults;for(let n in r)for(let i in r[n].cache)if(r[n].cache[i].isActive)return r[n].q;return null}get activeInstantResultCache(){let r=this.getState().instantResults;for(let n in r)for(let i in r[n].cache)if(r[n].cache[i].isActive)return r[n].cache[i];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??Qe().q}get responseTime(){return this.activeInstantResultCache?.duration??ze().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??ze().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var Pp=()=>be("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new Hi(e)),Fp=()=>({actionCause:"searchboxAsYouType"});f();l();p();d();var Ea={id:Y},xA={...Ea,q:Ve},uV=_("instantResults/register",e=>G(e,Ea)),Gi=_("instantResults/updateQuery",e=>G(e,xA)),lV=_("instantResults/clearExpired",e=>G(e,Ea));f();l();p();d();var zi=new we({required:!0,min:0}),vV=_("pagination/registerNumberOfResults",e=>G(e,zi)),AV=_("pagination/updateNumberOfResults",e=>G(e,zi)),wV=_("pagination/registerPage",e=>G(e,zi)),Op=_("pagination/updatePage",e=>G(e,zi)),CV=_("pagination/nextPage"),bV=_("pagination/previousPage");f();l();p();d();var xr=_("query/updateQuery",e=>G(e,{q:new W,enableQuerySyntax:new fe}));f();l();p();d();f();l();p();d();f();l();p();d();var Rr=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var Ia=()=>be("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),mt=e=>be("search/queryError",(t,r)=>t.makeQueryError({query:r.query?.q||Qe().q,aq:r.advancedSearchQueries?.aq||Rr().aq,cq:r.advancedSearchQueries?.cq||Rr().cq,dq:r.advancedSearchQueries?.dq||Rr().dq,errorType:e.type,errorMessage:e.message}));f();l();p();d();f();l();p();d();f();l();p();d();var Wi=e=>e.success!==void 0,ke=e=>e.error!==void 0;f();l();p();d();var AQ=_("didYouMean/enable"),wQ=_("didYouMean/disable"),CQ=_("didYouMean/automaticCorrections/disable"),bQ=_("didYouMean/automaticCorrections/enable"),Yi=_("didYouMean/correction",e=>G(e,Y)),xQ=_("didYouMean/automaticCorrections/mode",e=>G(e,new W({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0})));f();l();p();d();var ka=()=>be("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic());var Tp=()=>({actionCause:"didYouMeanAutomatic"});f();l();p();d();f();l();p();d();function Dp(){return{contextValues:{}}}f();l();p();d();function qp(){return{contextValues:{}}}f();l();p();d();function jp(){return{freezeFacetOrder:!1,facets:{}}}f();l();p();d();function Mp(){return[]}f();l();p();d();function Np(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}f();l();p();d();function _p(){return{}}f();l();p();d();function Up(){return{}}f();l();p();d();function Lp(){return{}}function Ye(e){return{context:e.context||Dp(),dictionaryFieldContext:e.dictionaryFieldContext||qp(),facetSet:e.facetSet||ji(),numericFacetSet:e.numericFacetSet||qi(),dateFacetSet:e.dateFacetSet||Di(),categoryFacetSet:e.categoryFacetSet||Ti(),automaticFacetSet:e.automaticFacetSet??Oi(),pagination:e.pagination||Np(),query:e.query||Qe(),tabSet:e.tabSet||Lp(),advancedSearchQueries:e.advancedSearchQueries||Rr(),staticFilterSet:e.staticFilterSet||Up(),querySet:e.querySet||_p(),sortCriteria:e.sortCriteria||Mi(),pipeline:e.pipeline||_i(),searchHub:e.searchHub||or(),facetOptions:e.facetOptions||jp(),facetOrder:e.facetOrder??Mp(),debug:e.debug??Xn()}}f();l();p();d();var K1=new ae({values:{undoneQuery:Ve},options:{required:!0}}),Vp=()=>be("analytics/trigger/query",(e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null);f();l();p();d();var Ki=_("trigger/query/ignore",e=>G(e,new W({emptyAllowed:!0,required:!0}))),Ji=_("trigger/query/modification",e=>G(e,new ae({values:{originalQuery:me,modification:me}})));f();l();p();d();var yt=async(e,t)=>{let r=IA(e),n=Qi(e),i=RA(e),o=await wr(e,t),s=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return pt({...o,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:s(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:i}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function RA(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(EA).filter(r=>r.currentValues.length>0):void 0}function EA(e){let{field:t,label:r,values:n}=e,i=n.filter(o=>o.state==="selected");return{field:t,label:r,currentValues:i}}function IA(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(o=>o.isActive)?.expression.trim()||"",i=kA(e);return[t,n,...i].filter(o=>!!o).join(" AND ")}function kA(e){return Object.values(e.staticFilterSet||{}).map(r=>{let n=r.values.filter(o=>o.state==="selected"&&!!o.expression.trim()),i=n.map(o=>o.expression).join(" OR ");return n.length>1?`(${i})`:i})}var ht=class{constructor(t,r=n=>{this.dispatch(xr({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let i=Date.now(),o=Vi(await this.extra.apiClient.search(r,n),t),s=Date.now()-i,g=this.getState().query?.q||"";return{response:o,duration:s,queryExecuted:g,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return ke(t.response)?(this.dispatch(mt(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:i,automaticallyCorrectQuery:o}=r.didYouMean,{results:s,queryCorrections:g,queryCorrection:u}=n;if(!i||!o)return null;let a=s.length===0&&g&&g.length!==0,m=!K(u)&&!K(u.correctedQuery);if(!a&&!m)return null;let S=a?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(He(Ye(this.getState()))),S}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:i}=n.queryCorrections[0],o=await this.automaticallyRetryQueryWithCorrection(i);return ke(o.response)?(this.dispatch(mt(o.response.error)),this.rejectWithValue(o.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(t),this.dispatch(He(Ye(this.getState()))),{...o,response:{...o.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r,analyticsAction:ka()})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:i}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:i,analyticsAction:ka()}}logOriginalAnalyticsQueryBeforeAutoCorrection(t){let r=this.getState(),n=this.getSuccessResponse(t);this.analyticsAction?.()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,n),this.extra)}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(g=>g.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(Ki("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let o=this.getCurrentQuery(),s=await this.automaticallyRetryQueryWithTriggerModification(n);return ke(s.response)?(this.dispatch(mt(s.response.error)),this.rejectWithValue(s.response.error)):(this.dispatch(He(Ye(this.getState()))),{...s,response:{...s.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:Vp()})}getStateAfterResponse(t,r,n,i){return{...n,query:{q:t,enableQuerySyntax:n.query?.enableQuerySyntax??Qe().enableQuerySyntax},search:{...ze(),duration:r,response:i,results:i.results}}}processSuccessResponse(t){return this.dispatch(He(Ye(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return Wi(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await yt(this.getState()),{origin:"mainSearch"});return this.dispatch(Yi(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(Ji({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await yt(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var YB=ie("search/executeSearch",async(e,t)=>{let r=t.getState();return await Xi(r,t,e)}),KB=ie("search/fetchPage",async(e,t)=>{let r=t.getState();return await Fa(r,t,e)}),JB=ie("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await Oa(t,r)}),XB=ie("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await TA(t,e,r)}),ZB=ie("search/fetchInstantResults",async(e,t)=>Pa(e,t)),PA=async(e,t)=>{let r=await yt(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},FA=async(e,t,r)=>{let n=await wr(e);return pt({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},OA=async(e,t)=>{let r=await yt(e,t);return r.request.numberOfResults=0,r},Qp=e=>{e.configuration.analytics.enabled&&We.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})};async function Pa(e,t){G(e,{id:Y,q:Y,maxResultsPerQuery:new we({required:!0,min:1}),cacheTimeout:new we});let{q:r,maxResultsPerQuery:n}=e,i=t.getState(),o=new ht({...t,analyticsAction:Pp()},a=>{t.dispatch(Gi({q:a,id:e.id}))}),s=await FA(i,r,n),g=await o.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),u=await o.process(g);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}async function Fa(e,t,r){Qp(e);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:o}=t.extra,{description:s}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:o}),g=new ht({...t,analyticsAction:r}),u=await yt(e,s),a=await g.fetchFromAPI(u,{origin:"mainSearch"});return await g.process(a)}async function Oa(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:i}=e.extra,{description:o}=await Ia().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:i}),s=new ht({...e,analyticsAction:Ia()}),g=await PA(t,o),u=await s.fetchFromAPI(g,{origin:"mainSearch"});return await s.process(u)}async function TA(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:i,logger:o}=e.extra,{description:s}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:o}),g=new ht({...e,analyticsAction:t}),u=await OA(r,s),a=await g.fetchFromAPI(u,{origin:"facetValues"});return await g.process(a)}async function Xi(e,t,r){Qp(e);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:o}=t.extra,{description:s}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:o}),g=await yt(e,s),u=new ht({...t,analyticsAction:r}),a=await u.fetchFromAPI(g,{origin:"mainSearch"});return await u.process(a)}f();l();p();d();var St=class{constructor(t,r=n=>{this.dispatch(xr({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let i=Date.now(),o=Vi(await this.extra.apiClient.search(r,n),t),s=Date.now()-i,g=this.getState().query?.q||"";return{response:o,duration:s,queryExecuted:g,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return ke(t.response)?(this.dispatch(mt(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:i,automaticallyCorrectQuery:o}=r.didYouMean,{results:s,queryCorrections:g,queryCorrection:u}=n;if(!i||!o)return null;let a=s.length===0&&g&&g.length!==0,m=!K(u)&&!K(u.correctedQuery);if(!a&&!m)return null;let S=a?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(He(Ye(this.getState()))),S}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:i}=n.queryCorrections[0],o=await this.automaticallyRetryQueryWithCorrection(i);return ke(o.response)?(this.dispatch(mt(o.response.error)),this.rejectWithValue(o.response.error)):(this.dispatch(He(Ye(this.getState()))),{...o,response:{...o.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:i}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:i}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(g=>g.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(Ki("")),null;let o=this.getCurrentQuery(),s=await this.automaticallyRetryQueryWithTriggerModification(n);return ke(s.response)?(this.dispatch(mt(s.response.error)),this.rejectWithValue(s.response.error)):(this.dispatch(He(Ye(this.getState()))),{...s,response:{...s.response.success},automaticallyCorrected:!1,originalQuery:o})}processSuccessResponse(t){return this.dispatch(He(Ye(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(t){return Wi(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=this.getState(),{actionCause:n}=Tp(),i=await this.fetchFromAPI(await gt(r,this.extra.navigatorContext,{actionCause:n}),{origin:"mainSearch"});return this.dispatch(Yi(t)),i}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(Ji({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await gt(this.getState(),this.extra.navigatorContext),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};var _$=ie("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;G(e,{q:new W,enableQuerySyntax:new fe,clearFilters:new fe}),e.clearFilters&&(r(Ep()),r(Ip())),r(kp({allow:!0})),r(xr({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(Op(1))}),U$=_("search/updateSearchAction"),Zi=ie("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Xi(r,t,e.legacy);Hp(r);let n=e.next?Gp(e.next):void 0,i=await gt(r,t.extra.navigatorContext,n),o=new St({...t,analyticsAction:n??{}}),s=await o.fetchFromAPI(i,{origin:"mainSearch"});return await o.process(s)}),Bp=ie("search/fetchPage",async(e,t)=>{let r=t.getState();if(Hp(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Fa(r,t,e.legacy);let n=new St({...t,analyticsAction:e.next}),i=await gt(r,t.extra.navigatorContext,e.next),o=await n.fetchFromAPI(i,{origin:"mainSearch"});return await n.process(o)}),$p=ie("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Oa(t,r);let n=Pd("browseResults",t.getState),i=new St({...t,analyticsAction:n}),o=await DA(r,t.extra.navigatorContext,n),s=await i.fetchFromAPI(o,{origin:"mainSearch"});return await i.process(s)}),L$=ie("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Xi(r,t,e.legacy);let n=new St({...t,analyticsAction:{}}),i=await jA(r,t.extra.navigatorContext),o=await n.fetchFromAPI(i,{origin:"facetValues"});return await n.process(o)}),V$=ie("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Pa(e,t);G(e,{id:Y,q:Y,maxResultsPerQuery:new we({required:!0,min:1}),cacheTimeout:new we});let{q:n,maxResultsPerQuery:i}=e,o=Gp(Fp()),s=await qA(r,t.extra.navigatorContext,n,i,o),g=new St({...t,analyticsAction:o},m=>{t.dispatch(Gi({q:m,id:e.id}))}),u=await g.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),a=await g.process(u);return"response"in a?{results:a.response.results,searchUid:a.response.searchUid,totalCountFiltered:a.response.totalCountFiltered,duration:a.duration}:a}),DA=async(e,t,r)=>{let n=await gt(e,t,r);return n.request={...n.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},n},qA=async(e,t,r,n,i)=>{let o=Bi(e,t,i);return pt({...o,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:n,q:r})},jA=async(e,t,r)=>{let n=await gt(e,t,r);return n.request.numberOfResults=0,n},Hp=e=>{e.configuration.analytics.enabled&&We.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},Gp=e=>({actionCause:e.actionCause,type:e.actionCause});var Ta=wu();Ta.startListening({actionCreator:Zi.pending,effect:async(e,t)=>{let r=t.getState(),n=Tt(r)?.q,i=!n||n.trim()==="";Qs(r)&&(t.dispatch(vn()),t.dispatch(Bl()),!i&&t.dispatch(fp()))}});f();l();p();d();var zp=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let i=n.error;if(n.payload?.ignored||e.error({error:i,action:r},`Action dispatch error ${n.type}`),n.error.name!=="SchemaValidationError")return t(r)},Wp=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));f();l();p();d();var Da=(e,t)=>{let{referrer:r,userAgent:n,location:i,clientId:o}=e.getMeta("");return{...t?t():{},referrer:r,userAgent:n,location:i,clientId:o}};f();l();p();d();function Yp(e,t){let r={...e},n,i=o=>(s,g)=>{let u=o(s,g);return n?n(u,g):u};return{get combinedReducer(){let o=vc(Object.entries(t).filter(([s])=>!(s in r)).map(([s,g])=>[s,()=>g]));return i(Wt({...o,...r}))},containsAll(o){return Object.keys(o).every(g=>g in r)},add(o){Object.keys(o).filter(s=>!(s in r)).forEach(s=>{r[s]=o[s]})},addCrossReducer(o){n=o}}}f();l();p();d();f();l();p();d();var Er=_("app/setError");f();l();p();d();function MA(e){if(!e||!NA(e))return null;try{let r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=atob(r),i=decodeURIComponent(n.split("").map(o=>`%${`00${o.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));return JSON.parse(i)}catch{return null}}function Kp(e,t=60){if(!e)return!1;let r=MA(e);if(!r||typeof r.exp!="number")return!1;let n=Math.floor(Date.now()/1e3);return r.exp<=n+t}function NA(e){return e?/^[A-Za-z0-9_-]{2,}(?:\.[A-Za-z0-9_-]{2,}){2}$/.test(e):!1}function Xp(e,t){let r=0,n=null,i=Rn(()=>{r=0},500),o=async(u,a=!1)=>{let m=!n;m&&t&&(n=(async()=>(a&&UA(t),await t()))().finally(()=>{n=null}));let h=await n;return m&&h&&u.dispatch(ir({accessToken:h})),h},s=async u=>{let a=u.getState(),m=LA(a);if(!(!m||!Kp(m))){e.debug("Access token is expired or about to expire, attempting renewal.");try{await o(u)?e.debug("Access token was renewed."):e.warn("Access token renewal returned an empty token. Please check the #renewAccessToken function.")}catch(h){e.warn(h,"Access token renewal failed. A retry will occur if necessary.")}}},g=async(u,a,m)=>{if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),Jp(u,a.error),a;r++,i(),await o(u,!0),u.dispatch(m)};return u=>a=>async m=>{let h=typeof m=="function",S=typeof t=="function";if(!h)return a(m);S&&await s(u);let y=await a(m);return _A(y)?S?await g(u,y,m):(e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),Jp(u,y.error),y):y}}function _A(e){return typeof e=="object"&&e!==null&&"error"in e&&e.error?.name===new $t().name}function Jp(e,t){e.dispatch(Er({status:401,statusCode:401,message:t.message,type:t.name}))}async function UA(e){try{return await e()}catch{return""}}function LA(e){return e.configuration.accessToken}f();l();p();d();function Zp({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:i}){return au({reducer:e,preloadedState:t,devTools:{stateSanitizer:o=>o.history?{...o,history:"<<OMIT>>"}:o,name:i,shouldHotReload:!1},middleware:o=>o({thunk:{extraArgument:n}}).prepend(...r).concat(Wp(n.logger))})}function VA(e,t){let{analytics:r}=e,{analyticsClientMiddleware:n,...i}=r??{},o={...i,...r?.proxyBaseUrl&&{apiBaseUrl:r.proxyBaseUrl,nexApiBaseUrl:r.proxyBaseUrl}};return o.analyticsMode!=="next"&&Sc()?(t.info("Analytics disabled since doNotTrack is active."),{...o,enabled:!1}):o}function ef(e,t){let r={...e.reducers,configuration:Te,version:mp},n=QA({...e,reducers:r},t,Te),{accessToken:i,environment:o,organizationId:s}=e.configuration;n.dispatch(ir({accessToken:i,environment:o,organizationId:s}));let g=VA(e.configuration,n.logger);return g&&n.dispatch(ti(g)),n}function QA(e,t,r){let{reducers:n,navigatorContextProvider:i}=e,o=Yp({...n,configurationReducer:r},e.preloadedState??{});e.crossReducer&&o.addCrossReducer(e.crossReducer);let s=t.logger,g={...t,get relay(){return Xr(a.state,i)},get navigatorContext(){return Da(this.relay,i)}},u=BA(e,g,o),a={addReducers(m){o.containsAll(m)||(o.add(m),u.replaceReducer(o.combinedReducer))},dispatch:u.dispatch,subscribe:u.subscribe,enableAnalytics(){u.dispatch(ni())},disableAnalytics(){u.dispatch(ri())},get state(){return u.getState()},get relay(){return Xr(this.state,i)},get navigatorContext(){return Da(this.relay,i)},logger:s,store:u};return a}function BA(e,t,r){let{preloadedState:n,configuration:i}=e,o=i.name||"coveo-headless",s=$A(e,t.logger);return Zp({preloadedState:n,reducer:r.combinedReducer,middlewares:s,thunkExtraArguments:t,name:o})}function $A(e,t){let{renewAccessToken:r}=e.configuration,n=Xp(t,r);return[Rp,n,zp(t),hp].concat(Aa.middleware,ur.middleware,Ta.middleware,e.middlewares||[])}var HA=`[Warning] A component from the Coveo Headless library has been instantiated with the Analytics Mode: "Next".
However, this mode is not available for Coveo for Service features, and this configuration may not work as expected.
Please switch back to the "legacy" analytics mode to ensure proper functionality.
For more information, refer to the documentation: https://docs.coveo.com/en/o3r90189/build-a-search-ui/event-protocol`;function tf(e){e==="next"&&console.warn(HA)}f();l();p();d();var df=_e(lf(),1);function pf(e){return(0,df.pino)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}f();l();p();d();function ff(e,t){let r=uw(e),n=es,i=lw(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:i,logger:t}}function uw(e){let{analytics:t}=e,r=(n,i)=>i;return t?.analyticsClientMiddleware||r}function lw(e){return e.preprocessRequest||In}f();l();p();d();f();l();p();d();var gf={organizationId:Y,accessToken:Y,name:new W({required:!1,emptyAllowed:!1}),analytics:new ae({options:{required:!1},values:{enabled:new fe({required:!1}),originContext:new W({required:!1}),originLevel2:new W({required:!1}),originLevel3:new W({required:!1}),analyticsMode:new W({constrainTo:["legacy","next"],required:!1,default:"next"}),proxyBaseUrl:new W({required:!1,url:!0}),trackingId:new W({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/})}}),environment:new W({required:!1,default:"prod",constrainTo:["prod","hipaa","stg","dev"]})};var mf=new Ue({...gf,caseAssistId:Y,locale:me});var dw={debug:Fu,caseAssistConfiguration:ut,searchHub:Mu};function yf(e){let t=pf(e.loggerOptions);pw(e.configuration,t);let r=fw(e.configuration,t),n={...ff(e.configuration,t),apiClient:r},i={...e,reducers:dw},o=ef(i,n);tf(o.state.configuration.analytics.analyticsMode);let{caseAssistId:s,locale:g,searchHub:u,proxyBaseUrl:a}=e.configuration;return o.dispatch(Kn({caseAssistId:s,locale:g,proxyBaseUrl:a})),K(u)||o.dispatch(Zn(u)),{...o,get state(){return o.state}}}function pw(e,t){try{mf.validate(e)}catch(r){throw t.error(r,"Case Assist engine configuration error"),r}}function fw(e,t){return new Tn({logger:t,preprocessRequest:e.preprocessRequest||In})}f();l();p();d();f();l();p();d();f();l();p();d();var hf=(o=>(o.id="id",o.subject="subject",o.description="description",o.category="category",o.productId="productId",o))(hf||{}),Sf=e=>!Object.values(hf).includes(e),Pe=e=>{let t=r=>gw(e,r)??yw(e,r);return{id:t("id"),subject:t("subject"),description:t("description"),category:t("category"),productId:t("productId"),custom:{...mw(e),...hw(e)}}},gw=(e,t)=>e?.caseInput?.[t]?.value,mw=e=>Object.keys(e?.caseInput??[]).reduce((t,r)=>{if(Sf(r)){let n=e?.caseInput?.[r]?.value;if(n)return{...t,[r]:n}}return t},{}),yw=(e,t)=>e?.caseField?.fields[t]?.value,hw=e=>Object.keys(e?.caseField?.fields??[]).reduce((t,r)=>{if(Sf(r)){let n=e?.caseField?.fields?.[r]?.value;if(n)return{...t,[r]:n}}return t},{}),Ua=(e,t,r=!1)=>{let n=Object.keys(e?.caseField?.fields??{}).find(g=>e?.caseField?.fields[g].suggestions.some(u=>u.id===t));if(!n)throw new Error(`Classification with ID '${t}' could not be found.`);let o=e?.caseField?.fields[n]?.suggestions.find(g=>g.id===t),s={classificationId:o?.id??"",responseId:e.caseField?.status.lastResponseId??"",fieldName:n,classification:{value:o?.value??"",confidence:o?.confidence??0}};return r?{...s,autoSelection:r}:s},st=(e,t,r=!1,n=!1)=>{let i,o=e.documentSuggestion?.documents.find((g,u)=>{let a=g.uniqueId===t;return a&&(i=u+1),a});if(!o)throw new Error(`Document Suggestion with ID '${t}' could not be found.`);let s={suggestionId:o.uniqueId,permanentId:o.fields.permanentid,responseId:e.documentSuggestion?.status.lastResponseId??"",suggestion:{documentUri:o.fields.uri,documentUriHash:o.fields.urihash,documentTitle:o.title,documentUrl:o.clickUri,documentPosition:i??0,sourceName:o.fields.source}};return r?{...s,fromQuickview:r}:n?{...s,openDocument:n}:s};var vf=()=>Oe({prefix:"analytics/caseAssist/case/start",__legacy__getBuilder:(e,t)=>e.logEnterInterface({ticket:Pe(t)}),analyticsType:"CaseAssist.Start",analyticsPayloadBuilder:()=>({})}),Af=e=>Oe("analytics/caseAssist/case/nextStage",(t,r)=>t.logMoveToNextCaseStep({ticket:Pe(r),stage:e?.stageName})),wf=()=>Oe({prefix:"analytics/caseAssist/case/create",__legacy__getBuilder:(e,t)=>e.logCaseCreated({ticket:Pe(t)}),analyticsType:"CaseAssist.CreateTicket",analyticsPayloadBuilder:e=>{let{id:t,category:r,subject:n,description:i,productId:o}=Pe(e);return{ticket:{id:t,category:r,subject:n,description:i,system:o}}}}),Cf=()=>Oe({prefix:"analytics/caseAssist/case/solve",__legacy__getBuilder:(e,t)=>e.logCaseSolved({ticket:Pe(t)}),analyticsType:"CaseAssist.Cancel",analyticsPayloadBuilder:()=>({reason:"solved"})}),bf=()=>Oe({prefix:"analytics/caseAssist/case/abandon",__legacy__getBuilder:(e,t)=>e.logCaseCancelled({ticket:Pe(t)}),analyticsType:"CaseAssist.Cancel",analyticsPayloadBuilder:()=>({reason:"quit"})}),kr=e=>Oe({prefix:"analytics/caseAssist/case/field/update",__legacy__getBuilder:(t,r)=>t.logUpdateCaseField({fieldName:e,ticket:Pe(r)}),analyticsType:"CaseAssist.UpdateField",analyticsPayloadBuilder:t=>{let r=t.caseField?.fields?.[e]?.value||t.caseInput?.[e]?.value||"";return{fieldName:e,fieldValue:r}}}),xf=e=>Oe({prefix:"analytics/caseAssist/classification/click",__legacy__getBuilder:(t,r)=>t.logSelectFieldSuggestion({suggestion:Ua(r,e,!0),ticket:Pe(r)}),analyticsType:"CaseAssist.SelectFieldClassification",analyticsPayloadBuilder:t=>{let r=t.caseField?.status?.lastResponseId;if(r)return{autoselected:!0,classificationId:e,responseId:r}}}),ro=e=>Oe({prefix:"analytics/caseAssist/classification/click",__legacy__getBuilder:(t,r)=>t.logSelectFieldSuggestion({suggestion:Ua(r,e),ticket:Pe(r)}),analyticsType:"CaseAssist.SelectFieldClassification",analyticsPayloadBuilder:t=>{let r=t.caseField?.status?.lastResponseId;if(r)return{autoselected:!1,classificationId:e,responseId:r}}}),Rf=e=>Oe({prefix:"analytics/caseAssist/documentSuggestion/click",__legacy__getBuilder:(t,r)=>t.logSelectDocumentSuggestion({suggestion:st(r,e),ticket:Pe(r)}),analyticsType:"CaseAssist.DocumentSuggestionClick",analyticsPayloadBuilder:t=>{let r=t.documentSuggestion?.status?.lastResponseId,n=st(t,e);if(r)return{responseId:r,position:n.suggestion.documentPosition,itemMetadata:{uniqueFieldName:"uniqueId",uniqueFieldValue:n.suggestionId,url:n.suggestion.documentUri,title:n.suggestion.documentTitle}}}}),no=e=>Oe({prefix:"analytics/caseAssist/documentSuggestion/click",__legacy__getBuilder:(t,r)=>t.logQuickviewDocumentSuggestion({suggestion:st(r,e),ticket:Pe(r)}),analyticsType:"CaseAssist.DocumentSuggestionClick",analyticsPayloadBuilder:t=>{let r=t.documentSuggestion?.status?.lastResponseId,n=st(t,e);if(r)return{responseId:r,position:n.suggestion.documentPosition,itemMetadata:{uniqueFieldName:"uniqueId",uniqueFieldValue:n.suggestionId,url:n.suggestion.documentUri,title:n.suggestion.documentTitle}}}}),Ef=e=>Oe({prefix:"analytics/caseAssist/documentSuggestion/click",__legacy__getBuilder:(t,r)=>t.logSelectDocumentSuggestion({suggestion:st(r,e,!1,!0),ticket:Pe(r)}),analyticsType:"CaseAssist.DocumentSuggestionClick",analyticsPayloadBuilder:t=>{let r=t.documentSuggestion?.status?.lastResponseId,n=st(t,e);if(r)return{responseId:r,position:n.suggestion.documentPosition,itemMetadata:{uniqueFieldName:"uniqueId",uniqueFieldValue:n.suggestionId,url:n.suggestion.documentUri,title:n.suggestion.documentTitle}}}}),If=(e,t)=>Oe({prefix:"analytics/caseAssist/documentSuggestion/rate",__legacy__getBuilder:(r,n)=>r.logRateDocumentSuggestion({rating:t,suggestion:st(n,e),ticket:Pe(n)}),analyticsType:"CaseAssist.DocumentSuggestionFeedback",analyticsPayloadBuilder:r=>{let n=r.documentSuggestion?.status?.lastResponseId,i=st(r,e);if(n)return{responseId:n,itemMetadata:{uniqueFieldName:"uniqueId",uniqueFieldValue:i.suggestionId,url:i.suggestion.documentUri,title:i.suggestion.documentTitle},liked:!!t}}});f();l();p();d();var Pr=_("caseAssist/caseField/register",e=>G(e,{fieldName:Y,fieldValue:Ve})),Fr=_("caseAssist/caseField/update",e=>G(e,{fieldName:Y,fieldValue:Ve})),Ke=ie("caseAssist/classifications/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let i=t(),o=await n.getCaseClassifications(await Sw(i));return ke(o)?r(o.error):{response:o.success}}),Sw=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.caseAssistConfiguration.apiBaseUrl??ue(e.configuration.organizationId,e.configuration.environment),caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{clientId:await mr(e.configuration.analytics)},fields:e.caseInput,context:e.caseField?On(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug});f();l();p();d();f();l();p();d();var kf=()=>({status:{loading:!1,error:null,lastResponseId:""},fields:{}});var At=ge(kf(),e=>{e.addCase(Pr,(t,r)=>{let{fieldName:n,fieldValue:i}=r.payload;t.fields[n]={value:i,suggestions:[]}}).addCase(Fr,(t,r)=>{let{fieldName:n,fieldValue:i}=r.payload;t.fields[n].value=i}).addCase(Ke.rejected,(t,r)=>{t.status.error=r.payload??null,t.status.loading=!1}).addCase(Ke.fulfilled,(t,r)=>{let n={value:"",suggestions:[]};Object.entries(r.payload.response.fields).forEach(([i,o])=>{t.fields[i]||(t.fields[i]={...n}),t.fields[i].suggestions=o.predictions}),t.status.lastResponseId=r.payload.response.responseId,t.status.error=null,t.status.loading=!1}).addCase(Ke.pending,t=>{t.status.loading=!0}).addCase(Er,(t,r)=>{t.status.error=r.payload,t.status.loading=!1})});f();l();p();d();f();l();p();d();var Ut=_("caseAssist/caseInput/update",e=>G(e,{fieldName:Y,fieldValue:Ve}));f();l();p();d();var Pf=()=>({});var wt=ge(Pf(),e=>{e.addCase(Ut,(t,r)=>{t[r.payload.fieldName]={value:r.payload.fieldValue}})});f();l();p();d();var Ne=ie("caseAssist/documentSuggestions/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:i}})=>{let o=t(),s=await n.getDocumentSuggestions(await vw(o,i));return ke(s)?r(s.error):{response:s.success}}),vw=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.caseAssistConfiguration.apiBaseUrl??ue(e.configuration.organizationId,e.configuration.environment),caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{clientId:await mr(e.configuration.analytics)},...e.configuration.analytics.enabled&&Nt(e.configuration.analytics,t,{actionCause:"documentSuggestion"}),fields:e.caseInput,context:e.caseField?On(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug});f();l();p();d();f();l();p();d();var Ff=()=>({status:{loading:!1,error:null,lastResponseId:""},documents:[]});var Je=ge(Ff(),e=>{e.addCase(Ne.rejected,(t,r)=>{t.status.error=r.payload??null,t.status.loading=!1}).addCase(Ne.fulfilled,(t,r)=>{t.documents=r.payload.response.documents,t.status.lastResponseId=r.payload.response.responseId,t.status.error=null,t.status.loading=!1}).addCase(Ne.pending,t=>{t.status.loading=!0}).addCase(Er,(t,r)=>{t.status.error=r.payload,t.status.loading=!1})});f();l();p();d();function Xe(e){let t,r=new Map,n=()=>r.size===0,i=o=>{try{let s=JSON.stringify(o),g=t!==s;return t=s,g}catch(s){return console.warn('Could not detect if state has changed, check the controller "get state method"',s),!0}};return{subscribe(o){o();let s=Symbol(),g;return n()&&(t=JSON.stringify(this.state),g=e.subscribe(()=>{i(this.state)&&r.forEach(u=>u())})),r.set(s,o),()=>{r.delete(s),n()&&g?.()}},get state(){return{}}}}var Aw=new Ue({field:Y});function Of(e,t={}){if(!ww(e))throw qe;let r=Xe(e),{dispatch:n}=e,i=Yn(e,Aw,t.options,"buildCaseField"),o=()=>e.state;return o().caseField?.fields?.[i.field]||n(Pr({fieldName:i.field,fieldValue:""})),{...r,get state(){let g=o().caseField?.status?.loading??!1,u=o().caseField?.status?.error??null,a=o().caseField?.fields?.[i.field],m=a?.value??"",h=a?.suggestions??[];return{loading:g,error:u,value:m,suggestions:h}},update(g,u,a){let m=o().caseField?.fields?.[i.field]?.suggestions?.find(h=>h.value===g)?.id;m&&n(a?xf(m):ro(m)),n(Fr({fieldName:i.field,fieldValue:g})),!a&&n(kr(i.field)),u?.caseClassifications&&n(Ke()),u?.documentSuggestions&&n(Ne())}}}function ww(e){return e.addReducers({configuration:Te,caseAssistConfiguration:ut,caseInput:wt,caseField:At,documentSuggestion:Je}),!0}f();l();p();d();function Cw(e,t){let r=new Ue({field:Y});Yn(e,r,t,"buildCaseInput")}function Tf(e,t){if(!bw(e))throw qe;let r=Xe(e),{dispatch:n}=e,i=()=>e.state;Cw(e,t.options);let o=t.options.field;return i().caseInput?.[o]||n(Ut({fieldName:o,fieldValue:""})),{...r,update(g,u){n(Ut({fieldName:o,fieldValue:g})),n(kr(o)),u?.caseClassifications&&n(Ke()),u?.documentSuggestions&&n(Ne())},get state(){return i().caseInput[o]}}}function bw(e){return e.addReducers({configuration:Te,caseAssistConfiguration:ut,caseInput:wt,caseField:At,documentSuggestion:Je}),!0}f();l();p();d();f();l();p();d();function Df(e,t,r){if(!xw(e))throw qe;let n=1e3,i={selectionDelay:n,debounceWait:n,...t.options},o;return{select:Rn(r,i.debounceWait,{isImmediate:!0}),beginDelayedSelect(){o=setTimeout(r,i.selectionDelay)},cancelPendingSelect(){o&&clearTimeout(o)}}}function xw(e){return e.addReducers({configuration:Te}),!0}function qf(e,t){let r=!1;return Df(e,t,()=>{r||(r=!0,e.dispatch(Ef(t.options.result.uniqueId)))})}f();l();p();d();function La(e){if(!Rw(e))throw qe;let t=Xe(e),{dispatch:r}=e,n=()=>e.state;return{...t,fetch(){r(Ne())},get state(){let i=n().documentSuggestion;return{loading:i.status.loading,error:i.status.error,documents:i.documents}}}}function Rw(e){return e.addReducers({configuration:Te,caseAssistConfiguration:ut,caseInput:wt,caseField:At,documentSuggestion:Je}),!0}f();l();p();d();f();l();p();d();f();l();p();d();async function io(e,t){let{search:r,accessToken:n,organizationId:i}=e.configuration,o=e.query?.q||"";return{url:r.apiBaseUrl??Ht(e.configuration.organizationId,e.configuration.environment),accessToken:n,organizationId:i,enableNavigation:!1,q:o,...t,requestedOutputSize:t.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var wn=ie("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let i=r(),o=await io(i,e),s=await t.apiClient.html(o);return ke(s)?n(s.error):{content:s.success,uniqueId:e.uniqueId}}),oo=_("resultPreview/next"),so=_("resultPreview/previous"),ao=_("resultPreview/prepare",e=>G(e,{results:new Le({required:!0})})),jf=2048,co=ie("resultPreview/updateContentURL",async(e,{getState:t,extra:r})=>{let n=t(),i=Fc(await e.buildResultPreviewRequest(n,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return i?.length>jf&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${jf} characters.`),{contentURL:i}});f();l();p();d();f();l();p();d();f();l();p();d();function Va(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var Qa=e=>{let{content:t,isLoading:r,uniqueId:n,contentURL:i}=Va();e.content=t,e.isLoading=r,e.uniqueId=n,e.contentURL=i},Ba=e=>e.filter(t=>t.hasHtmlVersion).map(t=>t.uniqueId),Mf=ge(Va(),e=>{e.addCase(wn.pending,t=>{t.isLoading=!0}).addCase(wn.fulfilled,(t,r)=>{let{content:n,uniqueId:i}=r.payload;t.position=t.resultsWithPreview.indexOf(i),t.content=n,t.uniqueId=i,t.isLoading=!1}).addCase(Zi.fulfilled,(t,r)=>{Qa(t),t.resultsWithPreview=Ba(r.payload.response.results)}).addCase($p.fulfilled,(t,r)=>{Qa(t),t.resultsWithPreview=t.resultsWithPreview.concat(Ba(r.payload.response.results))}).addCase(Bp.fulfilled,Qa).addCase(ao,(t,r)=>{t.resultsWithPreview=Ba(r.payload.results)}).addCase(oo,t=>{if(t.isLoading)return;let r=t.position+1;r>t.resultsWithPreview.length-1&&(r=0),t.position=r}).addCase(so,t=>{if(t.isLoading)return;let r=t.position-1;r<0&&(r=t.resultsWithPreview.length-1),t.position=r}).addCase(co.fulfilled,(t,r)=>{t.contentURL=r.payload.contentURL})});function Nf(e,t,r,n,i){if(!Ew(e))throw qe;let{dispatch:o}=e,s=()=>e.state,g=Xe(e),{result:u,maximumPreviewSize:a}=t.options,m=()=>{let{resultsWithPreview:S,position:y}=s().resultPreview;return S[y]},h=S=>{o(co({uniqueId:S,requestedOutputSize:a,buildResultPreviewRequest:r,path:n})),t.options.onlyContentURL||o(wn({uniqueId:S,requestedOutputSize:a})),i&&i()};return{...g,fetchResultContent(){h(u.uniqueId)},next(){o(oo()),h(m())},previous(){o(so()),h(m())},get state(){let S=s(),y=u.hasHtmlVersion,v=S.resultPreview,R=u.uniqueId===v.uniqueId?v.content:"",I=v.isLoading,b=v.contentURL,P=m();return{content:R,resultHasPreview:y,isLoading:I,contentURL:b,currentResultUniqueId:P}}}}function Ew(e){return e.addReducers({configuration:Te,resultPreview:Mf}),!0}function _f(e,t){if(!Iw(e))throw qe;let{dispatch:r}=e,n=()=>e.state,i=()=>n().documentSuggestion.documents,g=Nf(e,t,io,"/html",()=>{e.dispatch(no(t.options.result.uniqueId))});return r(ao({results:i()})),{...g,get state(){return{...g.state,currentDocument:i().findIndex(u=>u.uniqueId===g.state.currentResultUniqueId)+1,totalDocuments:i().length}}}}function Iw(e){return e.addReducers({documentSuggestion:Je}),!0}f();l();p();d();f();l();p();d();var $a=e=>G(e,{evt:Y,type:me}),Uf=e=>be("analytics/generic/search",t=>{$a(e);let{evt:r,meta:n}=e;return t.makeSearchEvent(r,n)}),Lf=e=>be("analytics/generic/click",(t,r)=>(Zs(e.result),$a(e),t.makeClickEvent(e.evt,Js(e.result,r),Xs(e.result),e.meta))),Vf=e=>be("analytics/generic/custom",t=>($a(e),t.makeCustomEventWithType(e.evt,e.type,e.meta)));function kw(e){return e.addReducers({}),{logSearchEvent:Uf,logClickEvent:Lf,logCustomEvent:Vf}}f();l();p();d();function Pw(e){return e.addReducers({}),{logCaseStart:vf,logCaseNextStage:Af,logCreateCase:wf,logSolveCase:Cf,logAbandonCase:bf,logUpdateCaseField:kr,logClassificationClick:ro,logDocumentSuggestionClick:Rf,logDocumentSuggestionRating:If,logQuickviewDocumentSuggestionClick:no}}f();l();p();d();function Fw(e){return e.addReducers({caseField:At}),{registerCaseField:Pr,updateCaseField:Fr,fetchCaseClassifications:Ke}}f();l();p();d();function Ow(e){return e.addReducers({caseInput:wt}),{updateCaseInput:Ut}}f();l();p();d();function Tw(e){return e.addReducers({documentSuggestion:Je}),{fetchDocumentSuggestions:Ne}}
/**
 * @license
 *
 * Copyright 2026 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

if(__exports != exports)module.exports = exports;return module.exports}));
//# sourceMappingURL=headless.js.map
