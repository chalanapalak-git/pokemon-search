/**
 * @license
 *
 * Copyright 2026 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(g,f){if(typeof exports=="object"&&typeof module<"u"){module.exports=f(require)}else if("function"==typeof define && define.amd){define("CoveoHeadlessInsight",["crypto"],function(_d_0){var d={"crypto": _d_0},r=function(m){if(m in d) return d[m];if(typeof require=="function") return require(m);throw new Error("Cannot find module '"+m+"'")};return f(r)})}else {var gN={"crypto":"crypto"},gReq=function(r){var mod = r in gN ? g[gN[r]] : g[r]; return mod };g["CoveoHeadlessInsight"]=f(gReq)}}(typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : this,function(require){var exports={};var __exports=exports;var module={exports};
"use strict";var xF=Object.create;var ni=Object.defineProperty;var bF=Object.getOwnPropertyDescriptor;var FF=Object.getOwnPropertyNames;var wF=Object.getPrototypeOf,IF=Object.prototype.hasOwnProperty;var PF=(e,t,r)=>t in e?ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var oi=(e,t)=>()=>(e&&(t=e(e=0)),t);var We=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),mf=(e,t)=>{for(var r in t)ni(e,r,{get:t[r],enumerable:!0})},gf=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of FF(t))!IF.call(e,o)&&o!==r&&ni(e,o,{get:()=>t[o],enumerable:!(n=bF(t,o))||n.enumerable});return e};var jt=(e,t,r)=>(r=e!=null?xF(wF(e)):{},gf(t||!e||!e.__esModule?ni(r,"default",{value:e,enumerable:!0}):r,e)),EF=e=>gf(ni({},"__esModule",{value:!0}),e);var Re=(e,t,r)=>PF(e,typeof t!="symbol"?t+"":t,r);var y,s=oi(()=>{"use strict";y=typeof globalThis<"u"?globalThis:window});function Rs(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rs=function(t){return typeof t}:Rs=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rs(e)}function kF(){"navigator"in this||(this.navigator={}),typeof this.navigator.sendBeacon!="function"&&(this.navigator.sendBeacon=OF.bind(this))}function OF(e,t){var r=this.event&&this.event.type,n=r==="unload"||r==="beforeunload",o="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("POST",e,!n),o.withCredentials=!0,o.setRequestHeader("Accept","*/*"),qF(t)?(o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.responseType="text"):TF(t)&&t.type&&o.setRequestHeader("Content-Type",t.type);try{o.send(t)}catch{return!1}return!0}var qF,TF,c=oi(()=>{"use strict";qF=function(t){return typeof t=="string"},TF=function(t){return t instanceof Blob};kF.call((typeof window>"u"?"undefined":Rs(window))==="object"?window:{})});var zd=We(ai=>{"use strict";l();s();u();c();Object.defineProperty(ai,"__esModule",{value:!0});function ff(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function DF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jF(e,t,r){return t=po(t),NF(e,Cf()?Reflect.construct(t,r||[],po(e).constructor):t.apply(e,r))}function Gd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_F(n.key),n)}}function $d(e,t,r){return t&&yf(e.prototype,t),r&&yf(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hf(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=UF(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(m){throw m},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,d=!0,p=!1;return{s:function(){r=r.call(e)},n:function(){var m=r.next();return d=m.done,m},e:function(m){p=!0,a=m},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw a}}}}function Ud(){return Ud=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=MF(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ud.apply(null,arguments)}function po(e){return po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},po(e)}function VF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bd(e,t)}function Cf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cf=function(){return!!e})()}function NF(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DF(e)}function Bd(e,t){return Bd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Bd(e,t)}function MF(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=po(e))!==null;);return e}function QF(e,t,r,n){var o=Ud(po(1&n?e.prototype:e),t,r);return 2&n&&typeof o=="function"?function(a){return o.apply(r,a)}:o}function LF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _F(e){var t=LF(e,"string");return typeof t=="symbol"?t:t+""}function UF(e,t){if(e){if(typeof e=="string")return ff(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ff(e,t):void 0}}(function(e){return{NativeAbortSignal:e.AbortSignal,NativeAbortController:e.AbortController}})(typeof self<"u"?self:global);function BF(e){var t;try{t=new Event("abort")}catch{typeof document<"u"?document.createEvent?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):(t=document.createEventObject(),t.type="abort"):t={type:"abort",bubbles:!1,cancelable:!1}}return t.reason=e,t}function GF(e){if(e===void 0)if(typeof document>"u")e=new Error("This operation was aborted"),e.name="AbortError";else try{e=new DOMException("signal is aborted without reason"),Object.defineProperty(e,"name",{value:"AbortError"})}catch{e=new Error("This operation was aborted"),e.name="AbortError"}return e}var Sf=function(){function e(){Gd(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return $d(e,[{key:"addEventListener",value:function(r,n,o){r in this.listeners||(this.listeners[r]=[]),this.listeners[r].push({callback:n,options:o})}},{key:"removeEventListener",value:function(r,n){if(r in this.listeners){for(var o=this.listeners[r],a=0,d=o.length;a<d;a++)if(o[a].callback===n){o.splice(a,1);return}}}},{key:"dispatchEvent",value:function(r){var n=this;if(r.type in this.listeners){for(var o=this.listeners[r.type],a=o.slice(),d=function(){var f=a[p];try{f.callback.call(n,r)}catch(A){Promise.resolve().then(function(){throw A})}f.options&&f.options.once&&n.removeEventListener(r.type,f.callback)},p=0,m=a.length;p<m;p++)d();return!r.defaultPrevented}}}])}(),Hd=function(e){function t(){var r;return Gd(this,t),r=jF(this,t),r.listeners||Sf.call(r),Object.defineProperty(r,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(r,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(r,"reason",{value:void 0,writable:!0,configurable:!0}),r}return VF(t,e),$d(t,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(n){n.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,n)),QF(t,"dispatchEvent",this,3)([n])}},{key:"throwIfAborted",value:function(){var n=this.aborted,o=this.reason,a=o===void 0?"Aborted":o;if(n)throw a}}],[{key:"timeout",value:function(n){var o=new vs;return setTimeout(function(){return o.abort(new DOMException("This signal is timeout in ".concat(n,"ms"),"TimeoutError"))},n),o.signal}},{key:"any",value:function(n){var o=new vs;function a(){o.abort(this.reason),d()}function d(){var f=hf(n),A;try{for(f.s();!(A=f.n()).done;){var R=A.value;R.removeEventListener("abort",a)}}catch(C){f.e(C)}finally{f.f()}}var p=hf(n),m;try{for(p.s();!(m=p.n()).done;){var g=m.value;if(g.aborted){o.abort(g.reason);break}else g.addEventListener("abort",a)}}catch(f){p.e(f)}finally{p.f()}return o.signal}}])}(Sf),vs=function(){function e(){Gd(this,e),Object.defineProperty(this,"signal",{value:new Hd,writable:!0,configurable:!0})}return $d(e,[{key:"abort",value:function(r){var n=GF(r),o=BF(n);this.signal.reason=n,this.signal.dispatchEvent(o)}},{key:"toString",value:function(){return"[object AbortController]"}}])}();typeof Symbol<"u"&&Symbol.toStringTag&&(vs.prototype[Symbol.toStringTag]="AbortController",Hd.prototype[Symbol.toStringTag]="AbortSignal");function $F(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof e.Request=="function"&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}function HF(e){typeof e=="function"&&(e={fetch:e});var t=e,r=t.fetch,n=t.Request,o=n===void 0?r.Request:n,a=t.AbortController,d=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,p=d===void 0?!1:d;if(!$F({fetch:r,Request:o,AbortController:a,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:p}))return{fetch:r,Request:m};var m=o;(m&&!m.prototype.hasOwnProperty("signal")||p)&&(m=function(R,C){var v;C&&C.signal&&(v=C.signal,delete C.signal);var b=new o(R,C);return v&&Object.defineProperty(b,"signal",{writable:!1,enumerable:!1,configurable:!0,value:v}),b},m.prototype=o.prototype);var g=r,f=function(R,C){var v=m&&m.prototype.isPrototypeOf(R)?R.signal:C?C.signal:void 0;if(v){var b;try{b=new DOMException("Aborted","AbortError")}catch{b=new Error("Aborted"),b.name="AbortError"}if(v.aborted)return Promise.reject(b);var x=new Promise(function(F,E){v.addEventListener("abort",function(){return E(b)},{once:!0})});return C&&C.signal&&delete C.signal,Promise.race([x,g(R,C)])}return g(R,C)};return{fetch:f,Request:m}}ai.AbortController=vs;ai.AbortSignal=Hd;ai.abortableFetch=HF});var Af,i,h,u=oi(()=>{"use strict";Af=jt(zd(),1),i=jt(zd(),1),{fetch:h}=(0,Af.abortableFetch)({fetch})});function ii(e){if(rw.test(e)||e.trim()==="")throw new TypeError("Invalid character in header field name");return e.trim().toLowerCase()}function Wd(e){return e.replace(nw,"")}function si(e){if(typeof e!="string"||e.length===0)return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r>127||!ow(r))return!1}return!0}function ow(e){return![127,32,"(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"].includes(e)}function vf(e){if(typeof e!="string"||e.trim()!==e)return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r===0||r===10||r===13)return!1}return!0}var zF,If,WF,Pf,YF,KF,JF,XF,ZF,ew,tw,rw,Rf,nw,mo,Yd,xf,bf,Ff,wf,S,qf=oi(()=>{"use strict";l();s();u();c();zF=Object.create,If=Object.defineProperty,WF=Object.getOwnPropertyDescriptor,Pf=Object.getOwnPropertyNames,YF=Object.getPrototypeOf,KF=Object.prototype.hasOwnProperty,JF=(e,t)=>function(){return t||(0,e[Pf(e)[0]])((t={exports:{}}).exports,t),t.exports},XF=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Pf(t))!KF.call(e,o)&&o!==r&&If(e,o,{get:()=>t[o],enumerable:!(n=WF(t,o))||n.enumerable});return e},ZF=(e,t,r)=>(r=e!=null?zF(YF(e)):{},XF(t||!e||!e.__esModule?If(r,"default",{value:e,enumerable:!0}):r,e)),ew=JF({"node_modules/set-cookie-parser/lib/set-cookie.js"(e,t){"use strict";var r={decodeValues:!0,map:!1,silent:!1};function n(m){return typeof m=="string"&&!!m.trim()}function o(m,g){var f=m.split(";").filter(n),A=f.shift(),R=a(A),C=R.name,v=R.value;g=g?Object.assign({},r,g):r;try{v=g.decodeValues?decodeURIComponent(v):v}catch(x){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+v+"'. Set options.decodeValues to false to disable this feature.",x)}var b={name:C,value:v};return f.forEach(function(x){var F=x.split("="),E=F.shift().trimLeft().toLowerCase(),I=F.join("=");E==="expires"?b.expires=new Date(I):E==="max-age"?b.maxAge=parseInt(I,10):E==="secure"?b.secure=!0:E==="httponly"?b.httpOnly=!0:E==="samesite"?b.sameSite=I:b[E]=I}),b}function a(m){var g="",f="",A=m.split("=");return A.length>1?(g=A.shift(),f=A.join("=")):f=m,{name:g,value:f}}function d(m,g){if(g=g?Object.assign({},r,g):r,!m)return g.map?{}:[];if(m.headers)if(typeof m.headers.getSetCookie=="function")m=m.headers.getSetCookie();else if(m.headers["set-cookie"])m=m.headers["set-cookie"];else{var f=m.headers[Object.keys(m.headers).find(function(R){return R.toLowerCase()==="set-cookie"})];!f&&m.headers.cookie&&!g.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),m=f}if(Array.isArray(m)||(m=[m]),g=g?Object.assign({},r,g):r,g.map){var A={};return m.filter(n).reduce(function(R,C){var v=o(C,g);return R[v.name]=v,R},A)}else return m.filter(n).map(function(R){return o(R,g)})}function p(m){if(Array.isArray(m))return m;if(typeof m!="string")return[];var g=[],f=0,A,R,C,v,b;function x(){for(;f<m.length&&/\s/.test(m.charAt(f));)f+=1;return f<m.length}function F(){return R=m.charAt(f),R!=="="&&R!==";"&&R!==","}for(;f<m.length;){for(A=f,b=!1;x();)if(R=m.charAt(f),R===","){for(C=f,f+=1,x(),v=f;f<m.length&&F();)f+=1;f<m.length&&m.charAt(f)==="="?(b=!0,f=v,g.push(m.substring(A,C)),A=f):f=C+1}else f+=1;(!b||f>=m.length)&&g.push(m.substring(A,m.length))}return g}t.exports=d,t.exports.parse=d,t.exports.parseString=o,t.exports.splitCookiesString=p}}),tw=ZF(ew()),rw=/[^a-z0-9\-#$%&'*+.^_`|~]/i;Rf=[`
`,"\r","	"," "],nw=new RegExp(`(^[${Rf.join("")}]|$[${Rf.join("")}])`,"g");mo=Symbol("normalizedHeaders"),Yd=Symbol("rawHeaderNames"),xf=", ",S=class Ef{constructor(t){this[bf]={},this[Ff]=new Map,this[wf]="Headers",["Headers","HeadersPolyfill"].includes(t?.constructor.name)||t instanceof Ef||typeof y.Headers<"u"&&t instanceof y.Headers?t.forEach((n,o)=>{this.append(o,n)},this):Array.isArray(t)?t.forEach(([r,n])=>{this.append(r,Array.isArray(n)?n.join(xf):n)}):t&&Object.getOwnPropertyNames(t).forEach(r=>{let n=t[r];this.append(r,Array.isArray(n)?n.join(xf):n)})}[(bf=mo,Ff=Yd,wf=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}*keys(){for(let[t]of this.entries())yield t}*values(){for(let[,t]of this.entries())yield t}*entries(){let t=Object.keys(this[mo]).sort((r,n)=>r.localeCompare(n));for(let r of t)if(r==="set-cookie")for(let n of this.getSetCookie())yield[r,n];else yield[r,this.get(r)]}has(t){if(!si(t))throw new TypeError(`Invalid header name "${t}"`);return this[mo].hasOwnProperty(ii(t))}get(t){if(!si(t))throw TypeError(`Invalid header name "${t}"`);return this[mo][ii(t)]??null}set(t,r){if(!si(t)||!vf(r))return;let n=ii(t),o=Wd(r);this[mo][n]=Wd(o),this[Yd].set(n,t)}append(t,r){if(!si(t)||!vf(r))return;let n=ii(t),o=Wd(r),a=this.has(n)?`${this.get(n)}, ${o}`:o;this.set(t,a)}delete(t){if(!si(t)||!this.has(t))return;let r=ii(t);delete this[mo][r],this[Yd].delete(r)}forEach(t,r){for(let[n,o]of this.entries())t.call(r,o,n,this)}getSetCookie(){let t=this.get("set-cookie");return t===null?[]:t===""?[""]:(0,tw.splitCookiesString)(t)}}});var l=oi(()=>{"use strict";qf()});var Gf=We(li=>{"use strict";l();s();u();c();var Ts=li&&li.__assign||function(){return Ts=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ts.apply(this,arguments)};Object.defineProperty(li,"__esModule",{value:!0});var Aw={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function Rw(e){var t=Ts(Ts({},Aw),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}li.getSanitizedOptions=Rw});var $f=We(np=>{"use strict";l();s();u();c();Object.defineProperty(np,"__esModule",{value:!0});function vw(e){var t=Math.random()*e;return Math.round(t)}np.fullJitter=vw});var Hf=We(op=>{"use strict";l();s();u();c();Object.defineProperty(op,"__esModule",{value:!0});function xw(e){return e}op.noJitter=xw});var zf=We(ap=>{"use strict";l();s();u();c();Object.defineProperty(ap,"__esModule",{value:!0});var bw=$f(),Fw=Hf();function ww(e){switch(e.jitter){case"full":return bw.fullJitter;case"none":default:return Fw.noJitter}}ap.JitterFactory=ww});var sp=We(ip=>{"use strict";l();s();u();c();Object.defineProperty(ip,"__esModule",{value:!0});var Iw=zf(),Pw=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=Iw.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,n=this.numOfDelayedAttempts,o=t*Math.pow(r,n);return Math.min(o,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();ip.Delay=Pw});var Wf=We(Ar=>{"use strict";l();s();u();c();var Ew=Ar&&Ar.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qw=Ar&&Ar.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(d){d(a)})}return new(r||(r=Promise))(function(a,d){function p(f){try{g(n.next(f))}catch(A){d(A)}}function m(f){try{g(n.throw(f))}catch(A){d(A)}}function g(f){f.done?a(f.value):o(f.value).then(p,m)}g((n=n.apply(e,t||[])).next())})},Tw=Ar&&Ar.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,d;return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(g){return function(f){return m([g,f])}}function m(g){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=g[0]&2?o.return:g[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,g[1])).done)return a;switch(o=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,o=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){r.label=g[1];break}if(g[0]===6&&r.label<a[1]){r.label=a[1],a=g;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(g);break}a[2]&&r.ops.pop(),r.trys.pop();continue}g=t.call(e,r)}catch(f){g=[6,f],o=0}finally{n=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}};Object.defineProperty(Ar,"__esModule",{value:!0});var kw=sp(),Ow=function(e){Ew(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return qw(this,void 0,void 0,function(){return Tw(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(kw.Delay);Ar.SkipFirstDelay=Ow});var Yf=We(di=>{"use strict";l();s();u();c();var Dw=di&&di.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(di,"__esModule",{value:!0});var jw=sp(),Vw=function(e){Dw(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(jw.Delay);di.AlwaysDelay=Vw});var Kf=We(cp=>{"use strict";l();s();u();c();Object.defineProperty(cp,"__esModule",{value:!0});var Nw=Wf(),Mw=Yf();function Qw(e,t){var r=Lw(e);return r.setAttemptNumber(t),r}cp.DelayFactory=Qw;function Lw(e){return e.delayFirstAttempt?new Mw.AlwaysDelay(e):new Nw.SkipFirstDelay(e)}});var Jf=We(En=>{"use strict";l();s();u();c();var up=En&&En.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(d){d(a)})}return new(r||(r=Promise))(function(a,d){function p(f){try{g(n.next(f))}catch(A){d(A)}}function m(f){try{g(n.throw(f))}catch(A){d(A)}}function g(f){f.done?a(f.value):o(f.value).then(p,m)}g((n=n.apply(e,t||[])).next())})},lp=En&&En.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,d;return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(g){return function(f){return m([g,f])}}function m(g){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=g[0]&2?o.return:g[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,g[1])).done)return a;switch(o=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,o=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){r.label=g[1];break}if(g[0]===6&&r.label<a[1]){r.label=a[1],a=g;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(g);break}a[2]&&r.ops.pop(),r.trys.pop();continue}g=t.call(e,r)}catch(f){g=[6,f],o=0}finally{n=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}};Object.defineProperty(En,"__esModule",{value:!0});var _w=Gf(),Uw=Kf();function Bw(e,t){return t===void 0&&(t={}),up(this,void 0,void 0,function(){var r,n;return lp(this,function(o){switch(o.label){case 0:return r=_w.getSanitizedOptions(t),n=new Gw(e,r),[4,n.execute()];case 1:return[2,o.sent()]}})})}En.backOff=Bw;var Gw=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return up(this,void 0,void 0,function(){var t,r;return lp(this,function(n){switch(n.label){case 0:if(this.attemptLimitReached)return[3,7];n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return n.sent(),[4,this.request()];case 3:return[2,n.sent()];case 4:return t=n.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=n.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return up(this,void 0,void 0,function(){var t;return lp(this,function(r){switch(r.label){case 0:return t=Uw.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var Pc=We((Fm,wm)=>{"use strict";l();s();u();c();(function(e,t){typeof Fm=="object"&&typeof wm<"u"?wm.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof y<"u"?y:e||self).dayjs=t()})(Fm,function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",o="second",a="minute",d="hour",p="day",m="week",g="month",f="quarter",A="year",R="date",C="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var B=["th","st","nd","rd"],U=$%100;return"["+$+(B[(U-20)%10]||B[U]||B[0])+"]"}},F=function($,B,U){var H=String($);return!H||H.length>=B?$:""+Array(B+1-H.length).join(U)+$},E={s:F,z:function($){var B=-$.utcOffset(),U=Math.abs(B),H=Math.floor(U/60),G=U%60;return(B<=0?"+":"-")+F(H,2,"0")+":"+F(G,2,"0")},m:function $(B,U){if(B.date()<U.date())return-$(U,B);var H=12*(U.year()-B.year())+(U.month()-B.month()),G=B.clone().add(H,g),J=U-G<0,Z=B.clone().add(H+(J?-1:1),g);return+(-(H+(U-G)/(J?G-Z:Z-G))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:g,y:A,w:m,d:p,D:R,h:d,m:a,s:o,ms:n,Q:f}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},I="en",q={};q[I]=x;var M="$isDayjsObject",D=function($){return $ instanceof L||!(!$||!$[M])},k=function $(B,U,H){var G;if(!B)return I;if(typeof B=="string"){var J=B.toLowerCase();q[J]&&(G=J),U&&(q[J]=U,G=J);var Z=B.split("-");if(!G&&Z.length>1)return $(Z[0])}else{var ie=B.name;q[ie]=B,G=ie}return!H&&G&&(I=G),G||!H&&I},O=function($,B){if(D($))return $.clone();var U=typeof B=="object"?B:{};return U.date=$,U.args=arguments,new L(U)},j=E;j.l=k,j.i=D,j.w=function($,B){return O($,{locale:B.$L,utc:B.$u,x:B.$x,$offset:B.$offset})};var L=function(){function $(U){this.$L=k(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[M]=!0}var B=$.prototype;return B.parse=function(U){this.$d=function(H){var G=H.date,J=H.utc;if(G===null)return new Date(NaN);if(j.u(G))return new Date;if(G instanceof Date)return new Date(G);if(typeof G=="string"&&!/Z$/i.test(G)){var Z=G.match(v);if(Z){var ie=Z[2]-1||0,fe=(Z[7]||"0").substring(0,3);return J?new Date(Date.UTC(Z[1],ie,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,fe)):new Date(Z[1],ie,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,fe)}}return new Date(G)}(U),this.init()},B.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},B.$utils=function(){return j},B.isValid=function(){return this.$d.toString()!==C},B.isSame=function(U,H){var G=O(U);return this.startOf(H)<=G&&G<=this.endOf(H)},B.isAfter=function(U,H){return O(U)<this.startOf(H)},B.isBefore=function(U,H){return this.endOf(H)<O(U)},B.$g=function(U,H,G){return j.u(U)?this[H]:this.set(G,U)},B.unix=function(){return Math.floor(this.valueOf()/1e3)},B.valueOf=function(){return this.$d.getTime()},B.startOf=function(U,H){var G=this,J=!!j.u(H)||H,Z=j.p(U),ie=function(xe,Ne){var Ue=j.w(G.$u?Date.UTC(G.$y,Ne,xe):new Date(G.$y,Ne,xe),G);return J?Ue:Ue.endOf(p)},fe=function(xe,Ne){return j.w(G.toDate()[xe].apply(G.toDate("s"),(J?[0,0,0,0]:[23,59,59,999]).slice(Ne)),G)},Ae=this.$W,pe=this.$M,ye=this.$D,de="set"+(this.$u?"UTC":"");switch(Z){case A:return J?ie(1,0):ie(31,11);case g:return J?ie(1,pe):ie(0,pe+1);case m:var Se=this.$locale().weekStart||0,Qe=(Ae<Se?Ae+7:Ae)-Se;return ie(J?ye-Qe:ye+(6-Qe),pe);case p:case R:return fe(de+"Hours",0);case d:return fe(de+"Minutes",1);case a:return fe(de+"Seconds",2);case o:return fe(de+"Milliseconds",3);default:return this.clone()}},B.endOf=function(U){return this.startOf(U,!1)},B.$set=function(U,H){var G,J=j.p(U),Z="set"+(this.$u?"UTC":""),ie=(G={},G[p]=Z+"Date",G[R]=Z+"Date",G[g]=Z+"Month",G[A]=Z+"FullYear",G[d]=Z+"Hours",G[a]=Z+"Minutes",G[o]=Z+"Seconds",G[n]=Z+"Milliseconds",G)[J],fe=J===p?this.$D+(H-this.$W):H;if(J===g||J===A){var Ae=this.clone().set(R,1);Ae.$d[ie](fe),Ae.init(),this.$d=Ae.set(R,Math.min(this.$D,Ae.daysInMonth())).$d}else ie&&this.$d[ie](fe);return this.init(),this},B.set=function(U,H){return this.clone().$set(U,H)},B.get=function(U){return this[j.p(U)]()},B.add=function(U,H){var G,J=this;U=Number(U);var Z=j.p(H),ie=function(pe){var ye=O(J);return j.w(ye.date(ye.date()+Math.round(pe*U)),J)};if(Z===g)return this.set(g,this.$M+U);if(Z===A)return this.set(A,this.$y+U);if(Z===p)return ie(1);if(Z===m)return ie(7);var fe=(G={},G[a]=t,G[d]=r,G[o]=e,G)[Z]||1,Ae=this.$d.getTime()+U*fe;return j.w(Ae,this)},B.subtract=function(U,H){return this.add(-1*U,H)},B.format=function(U){var H=this,G=this.$locale();if(!this.isValid())return G.invalidDate||C;var J=U||"YYYY-MM-DDTHH:mm:ssZ",Z=j.z(this),ie=this.$H,fe=this.$m,Ae=this.$M,pe=G.weekdays,ye=G.months,de=G.meridiem,Se=function(Ne,Ue,dt,Ft){return Ne&&(Ne[Ue]||Ne(H,J))||dt[Ue].slice(0,Ft)},Qe=function(Ne){return j.s(ie%12||12,Ne,"0")},xe=de||function(Ne,Ue,dt){var Ft=Ne<12?"AM":"PM";return dt?Ft.toLowerCase():Ft};return J.replace(b,function(Ne,Ue){return Ue||function(dt){switch(dt){case"YY":return String(H.$y).slice(-2);case"YYYY":return j.s(H.$y,4,"0");case"M":return Ae+1;case"MM":return j.s(Ae+1,2,"0");case"MMM":return Se(G.monthsShort,Ae,ye,3);case"MMMM":return Se(ye,Ae);case"D":return H.$D;case"DD":return j.s(H.$D,2,"0");case"d":return String(H.$W);case"dd":return Se(G.weekdaysMin,H.$W,pe,2);case"ddd":return Se(G.weekdaysShort,H.$W,pe,3);case"dddd":return pe[H.$W];case"H":return String(ie);case"HH":return j.s(ie,2,"0");case"h":return Qe(1);case"hh":return Qe(2);case"a":return xe(ie,fe,!0);case"A":return xe(ie,fe,!1);case"m":return String(fe);case"mm":return j.s(fe,2,"0");case"s":return String(H.$s);case"ss":return j.s(H.$s,2,"0");case"SSS":return j.s(H.$ms,3,"0");case"Z":return Z}return null}(Ne)||Z.replace(":","")})},B.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},B.diff=function(U,H,G){var J,Z=this,ie=j.p(H),fe=O(U),Ae=(fe.utcOffset()-this.utcOffset())*t,pe=this-fe,ye=function(){return j.m(Z,fe)};switch(ie){case A:J=ye()/12;break;case g:J=ye();break;case f:J=ye()/3;break;case m:J=(pe-Ae)/6048e5;break;case p:J=(pe-Ae)/864e5;break;case d:J=pe/r;break;case a:J=pe/t;break;case o:J=pe/e;break;default:J=pe}return G?J:j.a(J)},B.daysInMonth=function(){return this.endOf(g).$D},B.$locale=function(){return q[this.$L]},B.locale=function(U,H){if(!U)return this.$L;var G=this.clone(),J=k(U,H,!0);return J&&(G.$L=J),G},B.clone=function(){return j.w(this.$d,this)},B.toDate=function(){return new Date(this.valueOf())},B.toJSON=function(){return this.isValid()?this.toISOString():null},B.toISOString=function(){return this.$d.toISOString()},B.toString=function(){return this.$d.toUTCString()},$}(),z=L.prototype;return O.prototype=z,[["$ms",n],["$s",o],["$m",a],["$H",d],["$W",p],["$M",g],["$y",A],["$D",R]].forEach(function($){z[$[1]]=function(B){return this.$g(B,$[0],$[1])}}),O.extend=function($,B){return $.$i||($(B,L,O),$.$i=!0),O},O.locale=k,O.isDayjs=D,O.unix=function($){return O(1e3*$)},O.en=q[I],O.Ls=q,O.p={},O})});var FS=We((Im,Pm)=>{"use strict";l();s();u();c();(function(e,t){typeof Im=="object"&&typeof Pm<"u"?Pm.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof y<"u"?y:e||self).dayjs_plugin_quarterOfYear=t()})(Im,function(){"use strict";var e="month",t="quarter";return function(r,n){var o=n.prototype;o.quarter=function(p){return this.$utils().u(p)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(p-1))};var a=o.add;o.add=function(p,m){return p=Number(p),this.$utils().p(m)===t?this.add(3*p,e):a.bind(this)(p,m)};var d=o.startOf;o.startOf=function(p,m){var g=this.$utils(),f=!!g.u(m)||m;if(g.p(p)===t){var A=this.quarter()-1;return f?this.month(3*A).startOf(e).startOf("day"):this.month(3*A+2).endOf(e).endOf("day")}return d.bind(this)(p,m)}}})});var wS=We((Em,qm)=>{"use strict";l();s();u();c();(function(e,t){typeof Em=="object"&&typeof qm<"u"?qm.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof y<"u"?y:e||self).dayjs_plugin_customParseFormat=t()})(Em,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,n=/\d\d/,o=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,d={},p=function(v){return(v=+v)+(v>68?1900:2e3)},m=function(v){return function(b){this[v]=+b}},g=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(b){if(!b||b==="Z")return 0;var x=b.match(/([+-]|\d\d)/g),F=60*x[1]+(+x[2]||0);return F===0?0:x[0]==="+"?-F:F}(v)}],f=function(v){var b=d[v];return b&&(b.indexOf?b:b.s.concat(b.f))},A=function(v,b){var x,F=d.meridiem;if(F){for(var E=1;E<=24;E+=1)if(v.indexOf(F(E,0,b))>-1){x=E>12;break}}else x=v===(b?"pm":"PM");return x},R={A:[a,function(v){this.afternoon=A(v,!1)}],a:[a,function(v){this.afternoon=A(v,!0)}],Q:[r,function(v){this.month=3*(v-1)+1}],S:[r,function(v){this.milliseconds=100*+v}],SS:[n,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[o,m("seconds")],ss:[o,m("seconds")],m:[o,m("minutes")],mm:[o,m("minutes")],H:[o,m("hours")],h:[o,m("hours")],HH:[o,m("hours")],hh:[o,m("hours")],D:[o,m("day")],DD:[n,m("day")],Do:[a,function(v){var b=d.ordinal,x=v.match(/\d+/);if(this.day=x[0],b)for(var F=1;F<=31;F+=1)b(F).replace(/\[|\]/g,"")===v&&(this.day=F)}],w:[o,m("week")],ww:[n,m("week")],M:[o,m("month")],MM:[n,m("month")],MMM:[a,function(v){var b=f("months"),x=(f("monthsShort")||b.map(function(F){return F.slice(0,3)})).indexOf(v)+1;if(x<1)throw new Error;this.month=x%12||x}],MMMM:[a,function(v){var b=f("months").indexOf(v)+1;if(b<1)throw new Error;this.month=b%12||b}],Y:[/[+-]?\d+/,m("year")],YY:[n,function(v){this.year=p(v)}],YYYY:[/\d{4}/,m("year")],Z:g,ZZ:g};function C(v){var b,x;b=v,x=d&&d.formats;for(var F=(v=b.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(O,j,L){var z=L&&L.toUpperCase();return j||x[L]||e[L]||x[z].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function($,B,U){return B||U.slice(1)})})).match(t),E=F.length,I=0;I<E;I+=1){var q=F[I],M=R[q],D=M&&M[0],k=M&&M[1];F[I]=k?{regex:D,parser:k}:q.replace(/^\[|\]$/g,"")}return function(O){for(var j={},L=0,z=0;L<E;L+=1){var $=F[L];if(typeof $=="string")z+=$.length;else{var B=$.regex,U=$.parser,H=O.slice(z),G=B.exec(H)[0];U.call(j,G),O=O.replace(G,"")}}return function(J){var Z=J.afternoon;if(Z!==void 0){var ie=J.hours;Z?ie<12&&(J.hours+=12):ie===12&&(J.hours=0),delete J.afternoon}}(j),j}}return function(v,b,x){x.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(p=v.parseTwoDigitYear);var F=b.prototype,E=F.parse;F.parse=function(I){var q=I.date,M=I.utc,D=I.args;this.$u=M;var k=D[1];if(typeof k=="string"){var O=D[2]===!0,j=D[3]===!0,L=O||j,z=D[2];j&&(z=D[2]),d=this.$locale(),!O&&z&&(d=x.Ls[z]),this.$d=function(H,G,J,Z){try{if(["x","X"].indexOf(G)>-1)return new Date((G==="X"?1e3:1)*H);var ie=C(G)(H),fe=ie.year,Ae=ie.month,pe=ie.day,ye=ie.hours,de=ie.minutes,Se=ie.seconds,Qe=ie.milliseconds,xe=ie.zone,Ne=ie.week,Ue=new Date,dt=pe||(fe||Ae?1:Ue.getDate()),Ft=fe||Ue.getFullYear(),Or=0;fe&&!Ae||(Or=Ae>0?Ae-1:Ue.getMonth());var uo,lo=ye||0,ri=de||0,Ld=Se||0,_d=Qe||0;return xe?new Date(Date.UTC(Ft,Or,dt,lo,ri,Ld,_d+60*xe.offset*1e3)):J?new Date(Date.UTC(Ft,Or,dt,lo,ri,Ld,_d)):(uo=new Date(Ft,Or,dt,lo,ri,Ld,_d),Ne&&(uo=Z(uo).week(Ne).toDate()),uo)}catch{return new Date("")}}(q,k,M,x),this.init(),z&&z!==!0&&(this.$L=this.locale(z).$L),L&&q!=this.format(k)&&(this.$d=new Date("")),d={}}else if(k instanceof Array)for(var $=k.length,B=1;B<=$;B+=1){D[1]=k[B-1];var U=x.apply(this,D);if(U.isValid()){this.$d=U.$d,this.$L=U.$L,this.init();break}B===$&&(this.$d=new Date(""))}else E.call(this,I)}}})});var kA=We((hg,Sg)=>{"use strict";l();s();u();c();(function(e,t){typeof hg=="object"&&typeof Sg<"u"?Sg.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof y<"u"?y:e||self).dayjs_plugin_timezone=t()})(hg,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,o){var a,d=function(f,A,R){R===void 0&&(R={});var C=new Date(f),v=function(b,x){x===void 0&&(x={});var F=x.timeZoneName||"short",E=b+"|"+F,I=t[E];return I||(I=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:b,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:F}),t[E]=I),I}(A,R);return v.formatToParts(C)},p=function(f,A){for(var R=d(f,A),C=[],v=0;v<R.length;v+=1){var b=R[v],x=b.type,F=b.value,E=e[x];E>=0&&(C[E]=parseInt(F,10))}var I=C[3],q=I===24?0:I,M=C[0]+"-"+C[1]+"-"+C[2]+" "+q+":"+C[4]+":"+C[5]+":000",D=+f;return(o.utc(M).valueOf()-(D-=D%1e3))/6e4},m=n.prototype;m.tz=function(f,A){f===void 0&&(f=a);var R,C=this.utcOffset(),v=this.toDate(),b=v.toLocaleString("en-US",{timeZone:f}),x=Math.round((v-new Date(b))/1e3/60),F=15*-Math.round(v.getTimezoneOffset()/15)-x;if(!Number(F))R=this.utcOffset(0,A);else if(R=o(b,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(F,!0),A){var E=R.utcOffset();R=R.add(C-E,"minute")}return R.$x.$timezone=f,R},m.offsetName=function(f){var A=this.$x.$timezone||o.tz.guess(),R=d(this.valueOf(),A,{timeZoneName:f}).find(function(C){return C.type.toLowerCase()==="timezonename"});return R&&R.value};var g=m.startOf;m.startOf=function(f,A){if(!this.$x||!this.$x.$timezone)return g.call(this,f,A);var R=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return g.call(R,f,A).tz(this.$x.$timezone,!0)},o.tz=function(f,A,R){var C=R&&A,v=R||A||a,b=p(+o(),v);if(typeof f!="string")return o(f).tz(v);var x=function(q,M,D){var k=q-60*M*1e3,O=p(k,D);if(M===O)return[k,M];var j=p(k-=60*(O-M)*1e3,D);return O===j?[k,O]:[q-60*Math.min(O,j)*1e3,Math.max(O,j)]}(o.utc(f,C).valueOf(),b,v),F=x[0],E=x[1],I=o(F).utcOffset(E);return I.$x.$timezone=v,I},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(f){a=f}}})});var OA=We((Cg,Ag)=>{"use strict";l();s();u();c();(function(e,t){typeof Cg=="object"&&typeof Ag<"u"?Ag.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof y<"u"?y:e||self).dayjs_plugin_utc=t()})(Cg,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,o,a){var d=o.prototype;a.utc=function(C){var v={date:C,utc:!0,args:arguments};return new o(v)},d.utc=function(C){var v=a(this.toDate(),{locale:this.$L,utc:!0});return C?v.add(this.utcOffset(),e):v},d.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var p=d.parse;d.parse=function(C){C.utc&&(this.$u=!0),this.$utils().u(C.$offset)||(this.$offset=C.$offset),p.call(this,C)};var m=d.init;d.init=function(){if(this.$u){var C=this.$d;this.$y=C.getUTCFullYear(),this.$M=C.getUTCMonth(),this.$D=C.getUTCDate(),this.$W=C.getUTCDay(),this.$H=C.getUTCHours(),this.$m=C.getUTCMinutes(),this.$s=C.getUTCSeconds(),this.$ms=C.getUTCMilliseconds()}else m.call(this)};var g=d.utcOffset;d.utcOffset=function(C,v){var b=this.$utils().u;if(b(C))return this.$u?0:b(this.$offset)?g.call(this):this.$offset;if(typeof C=="string"&&(C=function(I){I===void 0&&(I="");var q=I.match(t);if(!q)return null;var M=(""+q[0]).match(r)||["-",0,0],D=M[0],k=60*+M[1]+ +M[2];return k===0?0:D==="+"?k:-k}(C),C===null))return this;var x=Math.abs(C)<=16?60*C:C,F=this;if(v)return F.$offset=x,F.$u=C===0,F;if(C!==0){var E=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(F=this.local().add(x+E,e)).$offset=x,F.$x.$localOffset=E}else F=this.utc();return F};var f=d.format;d.format=function(C){var v=C||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,v)},d.valueOf=function(){var C=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*C},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var A=d.toDate;d.toDate=function(C){return C==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():A.call(this)};var R=d.diff;d.diff=function(C,v,b){if(C&&this.$u===C.$u)return R.call(this,C,v,b);var x=this.local(),F=a(C).local();return R.call(x,F,v,b)}}})});var HA=We((Dre,$A)=>{"use strict";l();s();u();c();function Fk(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}$A.exports=wk;function wk(e,t,r){var n=r&&r.stringify||Fk,o=1;if(typeof e=="object"&&e!==null){var a=t.length+o;if(a===1)return e;var d=new Array(a);d[0]=n(e);for(var p=1;p<a;p++)d[p]=n(t[p]);return d.join(" ")}if(typeof e!="string")return e;var m=t.length;if(m===0)return e;for(var g="",f=1-o,A=-1,R=e&&e.length||0,C=0;C<R;){if(e.charCodeAt(C)===37&&C+1<R){switch(A=A>-1?A:0,e.charCodeAt(C+1)){case 100:case 102:if(f>=m||t[f]==null)break;A<C&&(g+=e.slice(A,C)),g+=Number(t[f]),A=C+2,C++;break;case 105:if(f>=m||t[f]==null)break;A<C&&(g+=e.slice(A,C)),g+=Math.floor(Number(t[f])),A=C+2,C++;break;case 79:case 111:case 106:if(f>=m||t[f]===void 0)break;A<C&&(g+=e.slice(A,C));var v=typeof t[f];if(v==="string"){g+="'"+t[f]+"'",A=C+2,C++;break}if(v==="function"){g+=t[f].name||"<anonymous>",A=C+2,C++;break}g+=n(t[f]),A=C+2,C++;break;case 115:if(f>=m)break;A<C&&(g+=e.slice(A,C)),g+=String(t[f]),A=C+2,C++;break;case 37:A<C&&(g+=e.slice(A,C)),g+="%",A=C+2,C++,f--;break}++f}++C}return A===-1?e:(A<R&&(g+=e.slice(A)),g)}});var XA=We((Qre,Lu)=>{"use strict";l();s();u();c();var zA=HA();Lu.exports=Ir;var Yi=_k().console||{},Ik={mapHttpRequest:Qu,mapHttpResponse:Qu,wrapRequestSerializer:bg,wrapResponseSerializer:bg,wrapErrorSerializer:bg,req:Qu,res:Qu,err:YA,errWithCause:YA};function rn(e,t){return e==="silent"?1/0:t.levels.values[e]}var Ig=Symbol("pino.logFuncs"),Fg=Symbol("pino.hierarchy"),Pk={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function WA(e,t){let r={logger:t,parent:e[Fg]};t[Fg]=r}function Ek(e,t,r){let n={};t.forEach(o=>{n[o]=r[o]?r[o]:Yi[o]||Yi[Pk[o]||"log"]||ya}),e[Ig]=n}function qk(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Ir(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||Yi;e.browser.write&&(e.browser.asObject=!0);let n=e.serializers||{},o=qk(e.browser.serialize,n),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);let d=Object.keys(e.customLevels||{}),p=["error","fatal","warn","info","debug","trace"].concat(d);typeof r=="function"&&p.forEach(function(b){r[b]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let m=e.level||"info",g=Object.create(r);g.log||(g.log=ya),Ek(g,p,r),WA({},g),Object.defineProperty(g,"levelVal",{get:A}),Object.defineProperty(g,"level",{get:R,set:C});let f={transmit:t,serialize:o,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:p,timestamp:Mk(e),messageKey:e.messageKey||"msg",onChild:e.onChild||ya};g.levels=Tk(e),g.level=m,g.isLevelEnabled=function(b){return this.levels.values[b]?this.levels.values[b]>=this.levels.values[this.level]:!1},g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=ya,g.serializers=n,g._serialize=o,g._stdErrSerialize=a,g.child=function(...b){return v.call(this,f,...b)},t&&(g._logEvent=wg());function A(){return rn(this.level,this)}function R(){return this._level}function C(b){if(b!=="silent"&&!this.levels.values[b])throw Error("unknown level "+b);this._level=b,Zn(this,f,g,"error"),Zn(this,f,g,"fatal"),Zn(this,f,g,"warn"),Zn(this,f,g,"info"),Zn(this,f,g,"debug"),Zn(this,f,g,"trace"),d.forEach(x=>{Zn(this,f,g,x)})}function v(b,x,F){if(!x)throw new Error("missing bindings for child Pino");F=F||{},o&&x.serializers&&(F.serializers=x.serializers);let E=F.serializers;if(o&&E){var I=Object.assign({},n,E),q=e.browser.serialize===!0?Object.keys(I):o;delete x.serializers,Pg([x],q,I,this._stdErrSerialize)}function M(k){this._childLevel=(k._childLevel|0)+1,this.bindings=x,I&&(this.serializers=I,this._serialize=q),t&&(this._logEvent=wg([].concat(k._logEvent.bindings,x)))}M.prototype=this;let D=new M(this);return WA(this,D),D.child=function(...k){return v.call(this,b,...k)},D.level=F.level||this.level,b.onChild(D),D}return g}function Tk(e){let t=e.customLevels||{},r=Object.assign({},Ir.levels.values,t),n=Object.assign({},Ir.levels.labels,kk(t));return{values:r,labels:n}}function kk(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}Ir.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ir.stdSerializers=Ik;Ir.stdTimeFunctions=Object.assign({},{nullTime:KA,epochTime:JA,unixTime:Qk,isoTime:Lk});function Ok(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[Fg];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function Zn(e,t,r,n){if(Object.defineProperty(e,n,{value:rn(e.level,r)>rn(n,r)?ya:r[Ig][n],writable:!0,enumerable:!0,configurable:!0}),e[n]===ya){if(!t.transmit)return;let a=t.transmit.level||e.level,d=rn(a,r);if(rn(n,r)<d)return}e[n]=jk(e,t,r,n);let o=Ok(e);o.length!==0&&(e[n]=Dk(o,e[n]))}function Dk(e,t){return function(){return t.apply(this,[...e,...arguments])}}function jk(e,t,r,n){return function(o){return function(){let d=t.timestamp(),p=new Array(arguments.length),m=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Yi?Yi:this;for(var g=0;g<p.length;g++)p[g]=arguments[g];var f=!1;if(t.serialize&&(Pg(p,this._serialize,this.serializers,this._stdErrSerialize),f=!0),t.asObject||t.formatters?o.call(m,...Vk(this,n,p,d,t)):o.apply(m,p),t.transmit){let A=t.transmit.level||e._level,R=rn(A,r),C=rn(n,r);if(C<R)return;Nk(this,{ts:d,methodLevel:n,methodValue:C,transmitLevel:A,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:rn(e._level,r)},p,f)}}}(e[Ig][n])}function Vk(e,t,r,n,o){let{level:a,log:d=A=>A}=o.formatters||{},p=r.slice(),m=p[0],g={},f=(e._childLevel|0)+1;if(f<1&&(f=1),n&&(g.time=n),a){let A=a(t,e.levels.values[t]);Object.assign(g,A)}else g.level=e.levels.values[t];if(o.asObjectBindingsOnly){if(m!==null&&typeof m=="object")for(;f--&&typeof p[0]=="object";)Object.assign(g,p.shift());return[d(g),...p]}else{if(m!==null&&typeof m=="object"){for(;f--&&typeof p[0]=="object";)Object.assign(g,p.shift());m=p.length?zA(p.shift(),p):void 0}else typeof m=="string"&&(m=zA(p.shift(),p));return m!==void 0&&(g[o.messageKey]=m),[d(g)]}}function Pg(e,t,r,n){for(let o in e)if(n&&e[o]instanceof Error)e[o]=Ir.stdSerializers.err(e[o]);else if(typeof e[o]=="object"&&!Array.isArray(e[o])&&t)for(let a in e[o])t.indexOf(a)>-1&&a in r&&(e[o][a]=r[a](e[o][a]))}function Nk(e,t,r,n=!1){let o=t.send,a=t.ts,d=t.methodLevel,p=t.methodValue,m=t.val,g=e._logEvent.bindings;n||Pg(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=a,e._logEvent.messages=r.filter(function(f){return g.indexOf(f)===-1}),e._logEvent.level.label=d,e._logEvent.level.value=p,o(d,e._logEvent,m),e._logEvent=wg(g)}function wg(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function YA(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function Mk(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?KA:JA}function Qu(){return{}}function bg(e){return e}function ya(){}function KA(){return!1}function JA(){return Date.now()}function Qk(){return Math.round(Date.now()/1e3)}function Lk(){return new Date(Date.now()).toISOString()}function _k(){function e(t){return typeof t<"u"&&t}try{return typeof y<"u"?y:(Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),y)}catch{return e(self)||e(window)||e(this)||{}}}Lu.exports.default=Ir;Lu.exports.pino=Ir});var xN={};mf(xN,{HighlightUtils:()=>Xd,ResultTemplatesHelpers:()=>CC,SortOrder:()=>gc,VERSION:()=>Nr,buildAttachToCase:()=>uR,buildAttachedResults:()=>lR,buildBreadcrumbManager:()=>QR,buildCategoryFacet:()=>kv,buildController:()=>se,buildCriterionExpression:()=>Yt,buildDateFacet:()=>ex,buildDateFilter:()=>rx,buildDateRange:()=>qa,buildDateSortCriterion:()=>rS,buildDidYouMean:()=>zR,buildFacet:()=>Wv,buildFacetConditionsManager:()=>JR,buildFacetManager:()=>ZR,buildFoldedResultList:()=>Sx,buildGeneratedAnswer:()=>vx,buildInsightEngine:()=>aR,buildInsightInterface:()=>pF,buildInteractiveCitation:()=>bx,buildInteractiveResult:()=>$x,buildNotifyTrigger:()=>nF,buildNumericFacet:()=>ix,buildNumericFilter:()=>cx,buildNumericRange:()=>Zl,buildPager:()=>Ex,buildQueryError:()=>Tx,buildQuerySummary:()=>Ox,buildQuickview:()=>Nx,buildRecentQueriesList:()=>Bx,buildRelevanceSortCriterion:()=>yc,buildResultList:()=>Hx,buildResultTemplatesManager:()=>vF,buildResultsPerPage:()=>Wx,buildSearchBox:()=>pb,buildSearchParameterManager:()=>Tb,buildSearchStatus:()=>Hb,buildSmartSnippet:()=>Nb,buildSmartSnippetQuestionsList:()=>Lb,buildSort:()=>$b,buildTab:()=>Wb,buildUserActions:()=>dF,deserializeRelativeDate:()=>NS,getAnalyticsNextApiBaseUrl:()=>ks,getOrganizationEndpoint:()=>be,getSampleInsightEngineConfiguration:()=>Eg,loadAttachedResultsActions:()=>nN,loadAttachedResultsAnalyticsActions:()=>oN,loadCaseContextActions:()=>aN,loadContextActions:()=>sN,loadDateFacetSetActions:()=>cN,loadFieldActions:()=>lN,loadFoldingActions:()=>dN,loadGeneratedAnswerActions:()=>pN,loadGenericAnalyticsActions:()=>tN,loadInsightAnalyticsActions:()=>rN,loadInsightInterfaceActions:()=>mN,loadInsightSearchActions:()=>fN,loadInsightSearchAnalyticsActions:()=>yN,loadInsightUserActionsActions:()=>hN,loadNumericFacetSetActions:()=>uN,loadQuerySetActions:()=>gN,loadQuerySuggestActions:()=>SN,loadQuestionAnsweringActions:()=>CN,loadRecentResultsActions:()=>AN});module.exports=EF(xN);l();s();u();c();var Xd={};mf(Xd,{escapeHtml:()=>So,getHighlightedSuggestion:()=>Jd,highlightString:()=>pw});l();s();u();c();l();s();u();c();function aw(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Pn(r)}var Pn=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},ge=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let o in this.definition){let a=this.definition[o].validate(r[o]);a&&n.push(`${o}: ${a}`)}if(n.length)throw aw(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},Pe=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&W(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function go(e){return e===void 0}function iw(e){return e===null}function W(e){return go(e)||iw(e)}var oe=class{constructor(e={}){Re(this,"value");this.value=new Pe(e)}validate(e){let t=this.value.validate(e);return t||(sw(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function sw(e){return go(e)||xs(e)}function xs(e){return typeof e=="boolean"}var Y=class{constructor(e={}){Re(this,"value");this.config=e,this.value=new Pe(e)}validate(e){let t=this.value.validate(e);return t||(cw(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function cw(e){return go(e)||Tf(e)}function Tf(e){return typeof e=="number"&&!Number.isNaN(e)}var uw=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,V=class{constructor(e={}){Re(this,"value");Re(this,"config");this.config={emptyAllowed:!0,url:!1,...e},this.value=new Pe(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:o,ISODate:a}=this.config,d=this.value.validate(e);if(d)return d;if(go(e))return null;if(!fo(e))return"value is not a string.";if(!t&&!e.length)return"value is an empty string.";if(r)try{new URL(e)}catch{return"value is not a valid URL."}return n&&!n.test(e)?`value did not match provided regex ${n}`:o&&!o.includes(e)?`value should be one of: ${o.join(", ")}.`:a&&!(uw.test(e)&&new Date(e).toString()!=="Invalid Date")?"value is not a valid ISO8601 date string":null}get default(){return this.value.default}get required(){return this.value.required}};function fo(e){return Object.prototype.toString.call(e)==="[object String]"}var _=class{constructor(e={}){Re(this,"config");this.config={options:{required:!1},values:{},...e}}validate(e){if(go(e))return this.config.options.required?"value is required and is currently undefined":null;if(!kf(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&W(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let o=e[r],a=n.validate(o);a!==null&&(t+=` ${a}`)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function kf(e){return e!==void 0&&typeof e=="object"}var ee=class{constructor(e={}){Re(this,"value");this.config=e,this.value=new Pe(this.config)}validate(e){if(!W(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(W(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&W(n)&&(r=`value is null or undefined: ${e.join(",")}`);let o=this.validatePrimitiveValue(n,this.config.each);o!==null&&(r+=` ${o}`)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return xs(e)||fo(e)||Tf(e)||kf(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function yo(e){return Array.isArray(e)}var Dr=class{constructor(e){Re(this,"value");this.config=e,this.value=new Pe(e)}validate(e){let t=this.value.validate(e);return t!==null?t:go(e)||Object.values(this.config.enum).find(n=>n===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};l();s();u();c();var bs=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function Fs(e){return Array.isArray(e)}function ws(e){return e.trim()===""}function Of(e,t){return[...e.reduce((r,n)=>{let o=t(n);return r.has(o)||r.set(o,n),r},new Map).values()]}function lw(e){return btoa(encodeURI(e))}function Is(e,t){let{[e]:r,...n}=t;return n}function ho(e){return lw(JSON.stringify(e))}var dw=new Set(["1",1,"yes",!0]);function Df(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>dw.has(r))}function jf(e){let t={};for(let[r,n]of e)t[r]=n;return t}function Vf(e,t,r){return clearTimeout(t),setTimeout(e,r)}function ci(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function Ps(e,t,r={}){let n;return(...o)=>{let a=r.isImmediate&&!n;if(clearTimeout(n),n=setTimeout(()=>{n=void 0,r.isImmediate||e.apply(void 0,o)},t),a)return e.apply(void 0,o)}}function pw(e){if(ws(e.openingDelimiter)||ws(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(W(e.content)||ws(e.content))return e.content;if(e.highlights.length===0)return So(e.content);let t=e.content.length,r="",n=0;for(let o=0;o<e.highlights.length;o++){let a=e.highlights[o],d=a.offset,p=d+a.length;if(p>t)break;r+=So(e.content.slice(n,d)),r+=e.openingDelimiter,r+=So(e.content.slice(d,p)),r+=e.closingDelimiter,n=p}return n!==t&&(r+=So(e.content.slice(n))),r}function Jd(e,t){return e=So(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,n,o,a)=>n?Kd(n,t.notMatchDelimiters):o?Kd(o,t.exactMatchDelimiters):a?Kd(a,t.correctionDelimiters):r)}function Kd(e,t){return t?t.open+e+t.close:e}function So(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=`(?:${Object.keys(t).join("|")})`,n=RegExp(r),o=RegExp(r,"g");return n.test(e)?e.replace(o,a=>t[a]):e}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();async function Mf(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value)}function Qf(e){let t,r,n,o=!1;return function(d){t===void 0?(t=d,r=0,n=-1):t=gw(t,d);let p=t.length,m=0;for(;r<p;){o&&(t[r]===10&&(m=++r),o=!1);let g=-1;for(;r<p&&g===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-m);break;case 13:o=!0,g=r;break;case 10:g=r;break}if(g===-1)break;e(t.subarray(m,g),n),m=r,n=-1}m===p?t=void 0:m!==0&&(t=t.subarray(m),r-=m)}}function Lf(e,t,r){let n=Nf(),o=new TextDecoder;return function(d,p){if(d.length===0)r?.(n),n=Nf();else if(p>0){let m=o.decode(d.subarray(0,p)),g=p+(d[p+1]===32?2:1),f=o.decode(d.subarray(g));switch(m){case"data":n.data=n.data?`${n.data}
${f}`:f;break;case"event":n.event=f;break;case"id":e(n.id=f);break;case"retry":mw(f,n,t);break}}}}function mw(e,t,r){let n=parseInt(e,10);Number.isNaN(n)||r(t.retry=n)}function gw(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function Nf(){return{data:"",event:"",id:"",retry:void 0}}var Zd="text/event-stream",fw=1e3,_f="last-event-id";function Uf(){return typeof window<"u"}function Co(e,{signal:t,headers:r,onopen:n,onmessage:o,onclose:a,onerror:d,openWhenHidden:p,fetch:m,...g}){return new Promise((f,A)=>{let R={...r};R.accept||(R.accept=Zd);let C;function v(){C?.abort(),document.hidden||q()}!p&&Uf()&&document.addEventListener("visibilitychange",v);let b=fw,x;function F(){Uf()&&document.removeEventListener("visibilitychange",v),clearTimeout(x),C?.abort()}t?.addEventListener("abort",()=>{F(),f()});let E=m??h,I=n??yw;async function q(){C=i.AbortController?new i.AbortController:null;try{let M=await E(e,{...g,headers:R,signal:C?.signal});await I(M),await Mf(M.body,Qf(Lf(D=>{D?R[_f]=D:delete R[_f]},D=>{b=D},o))),a?.(),F(),f()}catch(M){if(!C?.signal?.aborted)try{let D=d?.(M)??b;clearTimeout(x),x=setTimeout(q,D)}catch(D){F(),A(D)}}}q()})}function yw(e){let t=e.headers.get("content-type");if(!t?.startsWith(Zd))throw new Error(`Expected content-type to be ${Zd}, Actual: ${t}`)}l();s();u();c();var jr=class{constructor(t){Re(this,"_basePath");Re(this,"_params",{});this._basePath=t}addParam(t,r){this._params={...this.params,[t]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([t,r])=>`${t}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}};var hw=(e,t,r)=>new jr(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href,Bf=3,Sw=5e3,Cw="text/event-stream",rp=1,ep=class extends Error{},ui=class extends Error{constructor(r){super(r.message);this.payload=r}},tp=class{constructor(){Re(this,"timeouts",new Set)}add(t){this.timeouts.add(t)}remove(t){clearTimeout(t),this.timeouts.delete(t)}isActive(t){return this.timeouts.has(t)}},Es=class{constructor(t){Re(this,"logger");this.logger=t.logger}streamGeneratedAnswer(t,r){let{url:n,organizationId:o,streamId:a,accessToken:d}=t,{write:p,abort:m,close:g,resetAnswer:f}=r,A=new tp;if(!a){this.logger.error("No stream ID found");return}let R=0,C,v=()=>{C&&!A.isActive(C)&&(x?.abort(),f(),F())},b=()=>{A.remove(C),C=Vf(v,C,Sw),A.add(C)},x=new i.AbortController,F=()=>Co(hw(n,o,a),{method:"GET",fetch:h,headers:{Authorization:`Bearer ${d}`,accept:"*/*"},openWhenHidden:!0,signal:x?.signal,async onopen(E){if(E.ok&&E.headers.get("content-type")===Cw)return;throw E.status>=400&&E.status<500&&E.status!==429?new ui({message:"Error opening stream",code:E.status}):new ep},onmessage:E=>{if(x?.signal.aborted)return;let I=JSON.parse(E.data);if(I.finishReason==="ERROR"){A.remove(C),x?.abort(),m({message:I.errorMessage,code:I.statusCode});return}p(I),R=0,I.finishReason==="COMPLETED"?(A.remove(C),g()):b()},onerror:E=>{if(!x?.signal.aborted){if(A.remove(C),E instanceof ui)throw x?.abort(),m(E),E;if(++R>Bf){this.logger.info("Maximum retry exceeded.");let I={message:"Failed to complete stream.",code:rp};throw x?.abort(),m(I),new ui(I)}this.logger.info(`Retrying...(${R}/${Bf})`),f()}}});return F(),x}};l();s();u();c();var qs=e=>e;l();s();u();c();l();s();u();c();var ty=jt(Jf(),1);l();s();u();c();var te=new Error("Failed to load reducers."),Ao=class extends Error{constructor(){super(),this.name="UnauthorizedTokenError",this.message="The token being used to perform the request is unauthorized. It may be expired or invalid."}},qn=class extends Error{constructor(r,n){super();Re(this,"statusCode");this.name="Disconnected",this.message=`Client could not connect to the following URL: ${r}`,this.statusCode=n??0}};l();s();u();c();function Xf(e){let t=[];for(let r in e){let n=encodeURIComponent(r),o=encodeURIComponent(e[r]);t.push(`${n}=${o}`)}return t.join("&")}function Zf(e){return typeof e!="object"||!e?!1:Object.values(e).every($w)}function $w(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function ey(e){return e===429}var Vt=class e{static async call(t){let r=Hw(t),{logger:n}=t,o=await e.preprocessRequest(r,t);n.info(o,"Platform request");let{url:a,...d}=o,p=async()=>{let m=await h(a,d);if(ey(m.status))throw m;return m};try{let m=await(0,ty.backOff)(p,{startingDelay:100,timeMultiple:2,maxDelay:800,numOfAttempts:4,jitter:"full",retry:async g=>{let f=g&&ey(g.status);return f&&(n.info("Platform retrying request"),await new Promise(A=>setTimeout(A,1e3))),f}});switch(m.status){case 419:case 401:throw n.info("Platform renewing token"),new Ao;case 404:throw new qn(a,m.status);default:return n.info({response:m,requestInfo:o},"Platform response"),m}}catch(m){return m.message==="Failed to fetch"?new qn(a):m}}static async preprocessRequest(t,r){let{origin:n,preprocessRequest:o,logger:a,requestMetadata:d}=r,{signal:p,...m}=t,g=ci(m);try{let f=await o(t,n,d);return{...t,...f}}catch(f){a.error(f,"Platform request preprocessing failed. Returning default request options.")}return g}};function be(e,t="prod",r="platform"){let n=t==="prod"?"":t,o=r==="platform"?"":`.${r}`;return`https://${e}${o}.org${n}.coveo.com`}function pt(e,t="prod"){return`${be(e,t)}/rest/search/v2`}function ks(e,t="prod"){return`${be(e,t,"analytics")}/rest/organizations/${e}/events/v1`}function Hw(e){let{url:t,method:r,requestParams:n,contentType:o,accessToken:a,signal:d}=e,p=e.method==="POST"||e.method==="PUT",m=zw(n,o);return{url:t,method:r,headers:{"Content-Type":o,Authorization:`Bearer ${a}`,...e.headers},...p&&{body:m},signal:d}}function zw(e,t){return t==="application/x-www-form-urlencoded"?Zf(e)?Xf(e):"":JSON.stringify(e)}l();s();u();c();l();s();u();c();function pi(e){let{url:t,accessToken:r,organizationId:n,authentication:o,...a}=e;return a}var dp=e=>{let{response:t}=e;return t.body?Ww(e):Yw(t)},Ww=e=>Jw(e)?Xw(e):Kw(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},Yw=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function Kw(e){return e.body.statusCode!==void 0}function Jw(e){return e.body.exception!==void 0}var Xw=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});l();s();u();c();function ry(e){return((e.headers.get("content-type")||"").split(";").find(n=>n.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}l();s();u();c();var pp=(e,t,r,n)=>{let o=new jr(`${e.url}${n}`);return o.addParam("organizationId",e.organizationId),e.authentication&&o.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:o.href,origin:"searchApiFetch"}};var ny=(e,t)=>{let r=new jr(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),e.authentication&&r.addParam("authentication",e.authentication),e.q!==void 0&&r.addParam("q",e.q),e.enableNavigation!==void 0&&r.addParam("enableNavigation",`${e.enableNavigation}`),e.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),r.href},mp=async(e,t)=>{let r=await Vt.call({...pp(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:pi(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=ry(r),o=await r.arrayBuffer(),d=new TextDecoder(n).decode(o);return Zw(d)?{success:d}:{error:dp({response:r,body:d})}};function Zw(e){return typeof e=="string"}l();s();u();c();l();s();u();c();function Ro(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function $e(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:Ro(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:Ro(),extendedResults:{},searchAction:void 0}}l();s();u();c();l();s();u();c();function eI(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function tI(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function Tn(e,t){if(t&&e.name==="AbortError")return{error:tI(e)};if(e instanceof qn)return{error:eI(e)};throw e}var Vr=e=>e.success!==void 0,Ee=e=>e.error!==void 0;function oy(e){return e.results!==void 0}function ay(e){let t=Ro();return W(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}l();s();u();c();l();s();u();c();var gp=(e,t)=>`${e.url}/rest/organizations/${e.organizationId}/insight/v1/configs/${e.insightId}${t??""}`,rI=e=>`${e.url}/rest/organizations/${e.organizationId}/machinelearning/user/actions`,mi=(e,t,r,n)=>{nI(e);let o=gp(e,n);return{accessToken:e.accessToken,method:t,contentType:r,url:o,origin:"insightApiFetch"}},iy=(e,t,r)=>{oI(e);let n=rI(e);return{accessToken:e.accessToken,method:t,contentType:r,url:n,origin:"insightApiFetch"}},fp=e=>{let{insightId:t,...r}=pi(e);return r},sy=e=>{if(!e.url)throw new Error("The 'url' attribute must contain a valid platform URL.");if(!e.organizationId)throw new Error("The 'organizationId' attribute must contain a valid organization ID.");if(!e.accessToken)throw new Error("The 'accessToken' attribute must contain a valid platform access token.")},nI=e=>{if(sy(e),!e.insightId)throw new Error("The 'insightId' attribute must contain a valid Insight Panel configuration ID.")},oI=e=>{if(sy(e),!e.userId)throw new Error("The 'userId' attribute must contain a valid user ID.")};var cy=e=>({...mi(e,"GET","application/json","/interface"),requestParams:{}});l();s();u();c();var uy=e=>({...mi(e,"POST","application/json","/search"),requestParams:fp(e)}),ly=e=>({...mi(e,"POST","application/json","/querysuggest"),requestParams:fp(e)});l();s();u();c();var dy=e=>({...iy(e,"POST","application/json"),requestParams:{objectId:e.userId}});var Os=class{constructor(t){this.options=t}async getInterface(t){let r=await Vt.call({...cy(t),...this.options});if(r instanceof Error)return Tn(r);let n=await r.json();return r.ok?{success:n}:{error:n}}async query(t,r){let n=await Vt.call({...uy(t),requestMetadata:{method:"search",origin:r?.origin},...this.options});if(n instanceof Error)return Tn(n);let o=await n.json();return oy(o)&&(o=ay(o)),n.ok?{success:o}:{error:o}}async querySuggest(t){let r=await Vt.call({...ly(t),...this.options});if(r instanceof Error)return Tn(r);let n=await r.json();return n.completions?{success:n}:{error:n}}async userActions(t){let r=await Vt.call({...dy(t),...this.options});if(r instanceof Error)return Tn(r);let n=await r.json();return r.ok?{success:n}:{error:n}}async html(t){return mp(t,{...this.options})}};l();s();u();c();l();s();u();c();var Q=new V({required:!0,emptyAllowed:!1}),Fe=new V({required:!1,emptyAllowed:!1}),qe=new V({required:!0,emptyAllowed:!0}),py=new V({required:!1,emptyAllowed:!0}),Ds=new ee({each:Q,required:!0}),my=new V({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),gy=new V({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),L0=new V({required:!0,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),Nt=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),wt=(e,t)=>{if("required"in t)return{payload:new ge({value:t}).validate({value:e}).value};let o=new _({options:{required:!0},values:t}).validate(e);if(o)throw new Pn(o);return{payload:e}},P=(e,t)=>{try{return wt(e,t)}catch(r){return{payload:e,error:Nt(r)}}},It=(e,t,r,n)=>{let o=`Check the initialState of ${n}`;return fy(e,t,r,o,"Controller initialization error")},Be=(e,t,r,n)=>{let o=`Check the options of ${n}`;return fy(e,t,r,o,"Controller initialization error")},fy=(e,t,r,n,o)=>{try{return t.validate(r,n)}catch(a){throw e.logger.error(a,o),a}};l();s();u();c();l();s();u();c();l();s();u();c();function Ye(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var aI=typeof Symbol=="function"&&Symbol.observable||"@@observable",yy=aI,yp=()=>Math.random().toString(36).substring(7).split("").join("."),iI={INIT:`@@redux/INIT${yp()}`,REPLACE:`@@redux/REPLACE${yp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${yp()}`},js=iI;function $t(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function hp(e,t,r){if(typeof e!="function")throw new Error(Ye(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ye(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ye(1));return r(hp)(e,t)}let n=e,o=t,a=new Map,d=a,p=0,m=!1;function g(){d===a&&(d=new Map,a.forEach((x,F)=>{d.set(F,x)}))}function f(){if(m)throw new Error(Ye(3));return o}function A(x){if(typeof x!="function")throw new Error(Ye(4));if(m)throw new Error(Ye(5));let F=!0;g();let E=p++;return d.set(E,x),function(){if(F){if(m)throw new Error(Ye(6));F=!1,g(),d.delete(E),a=null}}}function R(x){if(!$t(x))throw new Error(Ye(7));if(typeof x.type>"u")throw new Error(Ye(8));if(typeof x.type!="string")throw new Error(Ye(17));if(m)throw new Error(Ye(9));try{m=!0,o=n(o,x)}finally{m=!1}return(a=d).forEach(E=>{E()}),x}function C(x){if(typeof x!="function")throw new Error(Ye(10));n=x,R({type:js.REPLACE})}function v(){let x=A;return{subscribe(F){if(typeof F!="object"||F===null)throw new Error(Ye(11));function E(){let q=F;q.next&&q.next(f())}return E(),{unsubscribe:x(E)}},[yy](){return this}}}return R({type:js.INIT}),{dispatch:R,subscribe:A,getState:f,replaceReducer:C,[yy]:v}}function sI(e){Object.keys(e).forEach(t=>{let r=e[t];if(typeof r(void 0,{type:js.INIT})>"u")throw new Error(Ye(12));if(typeof r(void 0,{type:js.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ye(13))})}function vo(e){let t=Object.keys(e),r={};for(let d=0;d<t.length;d++){let p=t[d];typeof e[p]=="function"&&(r[p]=e[p])}let n=Object.keys(r),o,a;try{sI(r)}catch(d){a=d}return function(p={},m){if(a)throw a;let g=!1,f={};for(let A=0;A<n.length;A++){let R=n[A],C=r[R],v=p[R],b=C(v,m);if(typeof b>"u"){let x=m&&m.type;throw new Error(Ye(14))}f[R]=b,g=g||b!==v}return g=g||n.length!==Object.keys(p).length,g?f:p}}function xo(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function hy(...e){return t=>(r,n)=>{let o=t(r,n),a=()=>{throw new Error(Ye(15))},d={getState:o.getState,dispatch:(m,...g)=>a(m,...g)},p=e.map(m=>m(d));return a=xo(...p)(o.dispatch),{...o,dispatch:a}}}function bo(e){return $t(e)&&"type"in e&&typeof e.type=="string"}l();s();u();c();var Ip=Symbol.for("immer-nothing"),gi=Symbol.for("immer-draftable"),mt=Symbol.for("immer-state");function Ke(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Fo=Object.getPrototypeOf;function Rt(e){return!!e&&!!e[mt]}function gt(e){return e?xy(e)||Array.isArray(e)||!!e[gi]||!!e.constructor?.[gi]||wo(e)||Ai(e):!1}var cI=Object.prototype.constructor.toString(),Sy=new WeakMap;function xy(e){if(!e||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=Sy.get(r);return n===void 0&&(n=Function.toString.call(r),Sy.set(r,n)),n===cI}function Pp(e){return Rt(e)||Ke(15,e),e[mt].base_}function fi(e,t,r=!0){On(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(o=>{t(o,e[o],e)}):e.forEach((n,o)=>t(o,n,e))}function On(e){let t=e[mt];return t?t.type_:Array.isArray(e)?1:wo(e)?2:Ai(e)?3:0}function yi(e,t){return On(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Sp(e,t){return On(e)===2?e.get(t):e[t]}function by(e,t,r){let n=On(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function uI(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function wo(e){return e instanceof Map}function Ai(e){return e instanceof Set}function kn(e){return e.copy_||e.base_}function Rp(e,t){if(wo(e))return new Map(e);if(Ai(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=xy(e);if(t===!0||t==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(e);delete n[mt];let o=Reflect.ownKeys(n);for(let a=0;a<o.length;a++){let d=o[a],p=n[d];p.writable===!1&&(p.writable=!0,p.configurable=!0),(p.get||p.set)&&(n[d]={configurable:!0,writable:!0,enumerable:p.enumerable,value:e[d]})}return Object.create(Fo(e),n)}else{let n=Fo(e);if(n!==null&&r)return{...e};let o=Object.create(n);return Object.assign(o,e)}}function Qs(e,t=!1){return Ls(e)||Rt(e)||!gt(e)||(On(e)>1&&Object.defineProperties(e,{set:Vs,add:Vs,clear:Vs,delete:Vs}),Object.freeze(e),t&&Object.values(e).forEach(r=>Qs(r,!0))),e}function lI(){Ke(2)}var Vs={value:lI};function Ls(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var vp={};function Dn(e){let t=vp[e];return t||Ke(0,e),t}function dI(e,t){vp[e]||(vp[e]=t)}var hi;function Fy(){return hi}function pI(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Cy(e,t){t&&(Dn("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function xp(e){bp(e),e.drafts_.forEach(mI),e.drafts_=null}function bp(e){e===hi&&(hi=e.parent_)}function Ay(e){return hi=pI(hi,e)}function mI(e){let t=e[mt];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Ry(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[mt].modified_&&(xp(t),Ke(4)),gt(e)&&(e=Ns(t,e),t.parent_||Ms(t,e)),t.patches_&&Dn("Patches").generateReplacementPatches_(r[mt].base_,e,t.patches_,t.inversePatches_)):e=Ns(t,r,[]),xp(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ip?e:void 0}function Ns(e,t,r){if(Ls(t))return t;let n=e.immer_.shouldUseStrictIteration(),o=t[mt];if(!o)return fi(t,(a,d)=>vy(e,o,t,a,d,r),n),t;if(o.scope_!==e)return t;if(!o.modified_)return Ms(e,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;let a=o.copy_,d=a,p=!1;o.type_===3&&(d=new Set(a),a.clear(),p=!0),fi(d,(m,g)=>vy(e,o,a,m,g,r,p),n),Ms(e,a,!1),r&&e.patches_&&Dn("Patches").generatePatches_(o,r,e.patches_,e.inversePatches_)}return o.copy_}function vy(e,t,r,n,o,a,d){if(o==null||typeof o!="object"&&!d)return;let p=Ls(o);if(!(p&&!d)){if(Rt(o)){let m=a&&t&&t.type_!==3&&!yi(t.assigned_,n)?a.concat(n):void 0,g=Ns(e,o,m);if(by(r,n,g),Rt(g))e.canAutoFreeze_=!1;else return}else d&&r.add(o);if(gt(o)&&!p){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===o&&p)return;Ns(e,o),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(wo(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Ms(e,o)}}}function Ms(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Qs(t,r)}function gI(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Fy(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},o=n,a=Ep;r&&(o=[n],a=Si);let{revoke:d,proxy:p}=Proxy.revocable(o,a);return n.draft_=p,n.revoke_=d,p}var Ep={get(e,t){if(t===mt)return e;let r=kn(e);if(!yi(r,t))return fI(e,r,t);let n=r[t];return e.finalized_||!gt(n)?n:n===Cp(e.base_,t)?(Ap(e),e.copy_[t]=wp(n,e)):n},has(e,t){return t in kn(e)},ownKeys(e){return Reflect.ownKeys(kn(e))},set(e,t,r){let n=wy(kn(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let o=Cp(kn(e),t),a=o?.[mt];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(uI(r,o)&&(r!==void 0||yi(e.base_,t)))return!0;Ap(e),Fp(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Cp(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ap(e),Fp(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=kn(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Ke(11)},getPrototypeOf(e){return Fo(e.base_)},setPrototypeOf(){Ke(12)}},Si={};fi(Ep,(e,t)=>{Si[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Si.deleteProperty=function(e,t){return Si.set.call(this,e,t,void 0)};Si.set=function(e,t,r){return Ep.set.call(this,e[0],t,r,e[0])};function Cp(e,t){let r=e[mt];return(r?kn(r):e)[t]}function fI(e,t,r){let n=wy(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function wy(e,t){if(!(t in e))return;let r=Fo(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Fo(r)}}function Fp(e){e.modified_||(e.modified_=!0,e.parent_&&Fp(e.parent_))}function Ap(e){e.copy_||(e.copy_=Rp(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var yI=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let a=r;r=t;let d=this;return function(m=a,...g){return d.produce(m,f=>r.call(this,f,...g))}}typeof r!="function"&&Ke(6),n!==void 0&&typeof n!="function"&&Ke(7);let o;if(gt(t)){let a=Ay(this),d=wp(t,void 0),p=!0;try{o=r(d),p=!1}finally{p?xp(a):bp(a)}return Cy(a,n),Ry(o,a)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===Ip&&(o=void 0),this.autoFreeze_&&Qs(o,!0),n){let a=[],d=[];Dn("Patches").generateReplacementPatches_(t,o,a,d),n(a,d)}return o}else Ke(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(d,...p)=>this.produceWithPatches(d,m=>t(m,...p));let n,o;return[this.produce(t,r,(d,p)=>{n=d,o=p}),n,o]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){gt(e)||Ke(8),Rt(e)&&(e=Iy(e));let t=Ay(this),r=wp(e,void 0);return r[mt].isManual_=!0,bp(t),r}finishDraft(e,t){let r=e&&e[mt];(!r||!r.isManual_)&&Ke(9);let{scope_:n}=r;return Cy(n,t),Ry(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));let n=Dn("Patches").applyPatches_;return Rt(e)?n(e,t):this.produce(e,o=>n(o,t))}};function wp(e,t){let r=wo(e)?Dn("MapSet").proxyMap_(e,t):Ai(e)?Dn("MapSet").proxySet_(e,t):gI(e,t);return(t?t.scope_:Fy()).drafts_.push(r),r}function Iy(e){return Rt(e)||Ke(10,e),Py(e)}function Py(e){if(!gt(e)||Ls(e))return e;let t=e[mt],r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Rp(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Rp(e,!0);return fi(r,(o,a)=>{by(r,o,Py(a))},n),t&&(t.finalized_=!1),r}function Ey(){let t="replace",r="add",n="remove";function o(R,C,v,b){switch(R.type_){case 0:case 2:return d(R,C,v,b);case 1:return a(R,C,v,b);case 3:return p(R,C,v,b)}}function a(R,C,v,b){let{base_:x,assigned_:F}=R,E=R.copy_;E.length<x.length&&([x,E]=[E,x],[v,b]=[b,v]);for(let I=0;I<x.length;I++)if(F[I]&&E[I]!==x[I]){let q=C.concat([I]);v.push({op:t,path:q,value:A(E[I])}),b.push({op:t,path:q,value:A(x[I])})}for(let I=x.length;I<E.length;I++){let q=C.concat([I]);v.push({op:r,path:q,value:A(E[I])})}for(let I=E.length-1;x.length<=I;--I){let q=C.concat([I]);b.push({op:n,path:q})}}function d(R,C,v,b){let{base_:x,copy_:F}=R;fi(R.assigned_,(E,I)=>{let q=Sp(x,E),M=Sp(F,E),D=I?yi(x,E)?t:r:n;if(q===M&&D===t)return;let k=C.concat(E);v.push(D===n?{op:D,path:k}:{op:D,path:k,value:M}),b.push(D===r?{op:n,path:k}:D===n?{op:r,path:k,value:A(q)}:{op:t,path:k,value:A(q)})})}function p(R,C,v,b){let{base_:x,copy_:F}=R,E=0;x.forEach(I=>{if(!F.has(I)){let q=C.concat([E]);v.push({op:n,path:q,value:I}),b.unshift({op:r,path:q,value:I})}E++}),E=0,F.forEach(I=>{if(!x.has(I)){let q=C.concat([E]);v.push({op:r,path:q,value:I}),b.unshift({op:n,path:q,value:I})}E++})}function m(R,C,v,b){v.push({op:t,path:[],value:C===Ip?void 0:C}),b.push({op:t,path:[],value:R})}function g(R,C){return C.forEach(v=>{let{path:b,op:x}=v,F=R;for(let M=0;M<b.length-1;M++){let D=On(F),k=b[M];typeof k!="string"&&typeof k!="number"&&(k=""+k),(D===0||D===1)&&(k==="__proto__"||k==="constructor")&&Ke(19),typeof F=="function"&&k==="prototype"&&Ke(19),F=Sp(F,k),typeof F!="object"&&Ke(18,b.join("/"))}let E=On(F),I=f(v.value),q=b[b.length-1];switch(x){case t:switch(E){case 2:return F.set(q,I);case 3:Ke(16);default:return F[q]=I}case r:switch(E){case 1:return q==="-"?F.push(I):F.splice(q,0,I);case 2:return F.set(q,I);case 3:return F.add(I);default:return F[q]=I}case n:switch(E){case 1:return F.splice(q,1);case 2:return F.delete(q);case 3:return F.delete(v.value);default:return delete F[q]}default:Ke(17,x)}}),R}function f(R){if(!gt(R))return R;if(Array.isArray(R))return R.map(f);if(wo(R))return new Map(Array.from(R.entries()).map(([v,b])=>[v,f(b)]));if(Ai(R))return new Set(Array.from(R).map(f));let C=Object.create(Fo(R));for(let v in R)C[v]=f(R[v]);return yi(R,gi)&&(C[gi]=R[gi]),C}function A(R){return Rt(R)?f(R):R}dI("Patches",{applyPatches_:g,generatePatches_:o,generateReplacementPatches_:m})}var Ci=new yI,Rr=Ci.produce,_s=Ci.produceWithPatches.bind(Ci);var qp=Ci.applyPatches.bind(Ci);l();s();u();c();function hI(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function SI(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function CI(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var qy=e=>Array.isArray(e)?e:[e];function AI(e){let t=Array.isArray(e[0])?e[0]:e;return CI(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function RI(e,t){let r=[],{length:n}=e;for(let o=0;o<n;o++)r.push(e[o].apply(null,t));return r}var n_=Symbol();var o_=Object.getPrototypeOf({});var vI=class{constructor(e){this.value=e}deref(){return this.value}},xI=typeof WeakRef<"u"?WeakRef:vI,bI=0,Ty=1;function Us(){return{s:bI,v:void 0,o:null,p:null}}function Io(e,t={}){let r=Us(),{resultEqualityCheck:n}=t,o,a=0;function d(){let p=r,{length:m}=arguments;for(let A=0,R=m;A<R;A++){let C=arguments[A];if(typeof C=="function"||typeof C=="object"&&C!==null){let v=p.o;v===null&&(p.o=v=new WeakMap);let b=v.get(C);b===void 0?(p=Us(),v.set(C,p)):p=b}else{let v=p.p;v===null&&(p.p=v=new Map);let b=v.get(C);b===void 0?(p=Us(),v.set(C,p)):p=b}}let g=p,f;if(p.s===Ty)f=p.v;else if(f=e.apply(null,arguments),a++,n){let A=o?.deref?.()??o;A!=null&&n(A,f)&&(f=A,a!==0&&a--),o=typeof f=="object"&&f!==null||typeof f=="function"?new xI(f):f}return g.s=Ty,g.v=f,f}return d.clearCache=()=>{r=Us(),d.resetResultsCount()},d.resultsCount=()=>a,d.resetResultsCount=()=>{a=0},d}function ky(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...o)=>{let a=0,d=0,p,m={},g=o.pop();typeof g=="object"&&(m=g,g=o.pop()),hI(g,`createSelector expects an output function after the inputs, but received: [${typeof g}]`);let f={...r,...m},{memoize:A,memoizeOptions:R=[],argsMemoize:C=Io,argsMemoizeOptions:v=[],devModeChecks:b={}}=f,x=qy(R),F=qy(v),E=AI(o),I=A(function(){return a++,g.apply(null,arguments)},...x),q=!0,M=C(function(){d++;let k=RI(E,arguments);return p=I.apply(null,k),p},...F);return Object.assign(M,{resultFunc:g,memoizedResultFunc:I,dependencies:E,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>p,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:A,argsMemoize:C})};return Object.assign(n,{withTypes:()=>n}),n}var ke=ky(Io),FI=Object.assign((e,t=ke)=>{SI(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((d,p,m)=>(d[r[m]]=p,d),{}))},{withTypes:()=>FI});l();s();u();c();function Oy(e){return({dispatch:r,getState:n})=>o=>a=>typeof a=="function"?a(r,n,e):o(a)}var Dy=Oy(),jy=Oy;var wI=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?xo:xo.apply(null,arguments)},v_=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}},II=e=>e&&typeof e.match=="function";function w(e,t){function r(...n){if(t){let o=t(...n);if(!o)throw new Error(st(0));return{type:e,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>bo(n)&&n.type===e,r}var By=class Ri extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ri.prototype)}static get[Symbol.species](){return Ri}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Ri(...t[0].concat(this)):new Ri(...t.concat(this))}};function Vy(e){return gt(e)?Rr(e,()=>{}):e}function Ny(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function PI(e){return typeof e=="boolean"}var EI=()=>function(t){let{thunk:r=!0,immutableCheck:n=!0,serializableCheck:o=!0,actionCreatorCheck:a=!0}=t??{},d=new By;return r&&(PI(r)?d.push(Dy):d.push(jy(r.extraArgument))),d},vi="RTK_autoBatch",qo=()=>e=>({payload:e,meta:{[vi]:!0}}),My=e=>t=>{setTimeout(t,e)},qI=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),o=!0,a=!1,d=!1,p=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:My(10):e.type==="callback"?e.queueNotification:My(e.timeout),g=()=>{d=!1,a&&(a=!1,p.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){let A=()=>o&&f(),R=n.subscribe(A);return p.add(f),()=>{R(),p.delete(f)}},dispatch(f){try{return o=!f?.meta?.[vi],a=!o,a&&(d||(d=!0,m(g))),n.dispatch(f)}finally{o=!0}}})},TI=e=>function(r){let{autoBatch:n=!0}=r??{},o=new By(e);return n&&o.push(qI(typeof n=="object"?n:void 0)),o};function Gy(e){let t=EI(),{reducer:r=void 0,middleware:n,devTools:o=!0,preloadedState:a=void 0,enhancers:d=void 0}=e||{},p;if(typeof r=="function")p=r;else if($t(r))p=vo(r);else throw new Error(st(1));let m;typeof n=="function"?m=n(t):m=t();let g=xo;o&&(g=wI({trace:!1,...typeof o=="object"&&o}));let f=hy(...m),A=TI(f),R=typeof d=="function"?d(A):A(),C=g(...R);return hp(p,a,C)}function $y(e){let t={},r=[],n,o={addCase(a,d){let p=typeof a=="string"?a:a.type;if(!p)throw new Error(st(28));if(p in t)throw new Error(st(29));return t[p]=d,o},addMatcher(a,d){return r.push({matcher:a,reducer:d}),o},addDefaultCase(a){return n=a,o}};return e(o),[t,r,n]}function kI(e){return typeof e=="function"}function ae(e,t){let[r,n,o]=$y(t),a;if(kI(e))a=()=>Vy(e());else{let p=Vy(e);a=()=>p}function d(p=a(),m){let g=[r[m.type],...n.filter(({matcher:f})=>f(m)).map(({reducer:f})=>f)];return g.filter(f=>!!f).length===0&&(g=[o]),g.reduce((f,A)=>{if(A)if(Rt(f)){let C=A(f,m);return C===void 0?f:C}else{if(gt(f))return Rr(f,R=>A(R,m));{let R=A(f,m);if(R===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return R}}return f},p)}return d.getInitialState=a,d}var Hy=(e,t)=>II(e)?e.match(t):e(t);function Ht(...e){return t=>e.some(r=>Hy(r,t))}function Eo(...e){return t=>e.every(r=>Hy(r,t))}function Hs(e,t){if(!e||!e.meta)return!1;let r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function xi(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function zs(...e){return e.length===0?t=>Hs(t,["pending"]):xi(e)?Ht(...e.map(t=>t.pending)):zs()(e[0])}function Nn(...e){return e.length===0?t=>Hs(t,["rejected"]):xi(e)?Ht(...e.map(t=>t.rejected)):Nn()(e[0])}function bi(...e){let t=r=>r&&r.meta&&r.meta.rejectedWithValue;return e.length===0?Eo(Nn(...e),t):xi(e)?Eo(Nn(...e),t):bi()(e[0])}function vr(...e){return e.length===0?t=>Hs(t,["fulfilled"]):xi(e)?Ht(...e.map(t=>t.fulfilled)):vr()(e[0])}function Ws(...e){return e.length===0?t=>Hs(t,["pending","fulfilled","rejected"]):xi(e)?Ht(...e.flatMap(t=>[t.pending,t.rejected,t.fulfilled])):Ws()(e[0])}var OI="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Fi=(e=21)=>{let t="",r=e;for(;r--;)t+=OI[Math.random()*64|0];return t},DI=["name","message","stack","code"],Tp=class{constructor(e,t){Re(this,"_type");this.payload=e,this.meta=t}},Qy=class{constructor(e,t){Re(this,"_type");this.payload=e,this.meta=t}},jI=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of DI)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},re=(()=>{function e(t,r,n){let o=w(t+"/fulfilled",(m,g,f,A)=>({payload:m,meta:{...A||{},arg:f,requestId:g,requestStatus:"fulfilled"}})),a=w(t+"/pending",(m,g,f)=>({payload:void 0,meta:{...f||{},arg:g,requestId:m,requestStatus:"pending"}})),d=w(t+"/rejected",(m,g,f,A,R)=>({payload:A,error:(n&&n.serializeError||jI)(m||"Rejected"),meta:{...R||{},arg:f,requestId:g,rejectedWithValue:!!A,requestStatus:"rejected",aborted:m?.name==="AbortError",condition:m?.name==="ConditionError"}}));function p(m){return(g,f,A)=>{let R=n?.idGenerator?n.idGenerator(m):Fi(),C=new i.AbortController,v,b;function x(E){b=E,C.abort()}let F=async function(){let E;try{let q=n?.condition?.(m,{getState:f,extra:A});if(NI(q)&&(q=await q),q===!1||C.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let M=new Promise((D,k)=>{v=()=>{k({name:"AbortError",message:b||"Aborted"})},C.signal.addEventListener("abort",v)});g(a(R,m,n?.getPendingMeta?.({requestId:R,arg:m},{getState:f,extra:A}))),E=await Promise.race([M,Promise.resolve(r(m,{dispatch:g,getState:f,extra:A,requestId:R,signal:C.signal,abort:x,rejectWithValue:(D,k)=>new Tp(D,k),fulfillWithValue:(D,k)=>new Qy(D,k)})).then(D=>{if(D instanceof Tp)throw D;return D instanceof Qy?o(D.payload,R,m,D.meta):o(D,R,m)})])}catch(q){E=q instanceof Tp?d(null,R,m,q.payload,q.meta):d(q,R,m)}finally{v&&C.signal.removeEventListener("abort",v)}return n&&!n.dispatchConditionRejection&&d.match(E)&&E.meta.condition||g(E),E}();return Object.assign(F,{abort:x,requestId:R,arg:m,unwrap(){return F.then(VI)}})}}return Object.assign(p,{pending:a,rejected:d,fulfilled:o,settled:Ht(d,o),typePrefix:t})}return e.withTypes=()=>e,e})();function VI(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function NI(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var zy=Symbol.for("rtk-slice-createasyncthunk"),I_={[zy]:re};function MI(e,t){return`${e}/${t}`}function QI({creators:e}={}){let t=e?.asyncThunk?.[zy];return function(n){let{name:o,reducerPath:a=o}=n;if(!o)throw new Error(st(11));typeof process<"u";let d=(typeof n.reducers=="function"?n.reducers(_I()):n.reducers)||{},p=Object.keys(d),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},g={addCase(E,I){let q=typeof E=="string"?E:E.type;if(!q)throw new Error(st(12));if(q in m.sliceCaseReducersByType)throw new Error(st(13));return m.sliceCaseReducersByType[q]=I,g},addMatcher(E,I){return m.sliceMatchers.push({matcher:E,reducer:I}),g},exposeAction(E,I){return m.actionCreators[E]=I,g},exposeCaseReducer(E,I){return m.sliceCaseReducersByName[E]=I,g}};p.forEach(E=>{let I=d[E],q={reducerName:E,type:MI(o,E),createNotation:typeof n.reducers=="function"};BI(I)?$I(q,I,g,t):UI(q,I,g)});function f(){let[E={},I=[],q=void 0]=typeof n.extraReducers=="function"?$y(n.extraReducers):[n.extraReducers],M={...E,...m.sliceCaseReducersByType};return ae(n.initialState,D=>{for(let k in M)D.addCase(k,M[k]);for(let k of m.sliceMatchers)D.addMatcher(k.matcher,k.reducer);for(let k of I)D.addMatcher(k.matcher,k.reducer);q&&D.addDefaultCase(q)})}let A=E=>E,R=new Map,C;function v(E,I){return C||(C=f()),C(E,I)}function b(){return C||(C=f()),C.getInitialState()}function x(E,I=!1){function q(D){let k=D[E];return typeof k>"u"&&I&&(k=b()),k}function M(D=A){let k=Ny(R,I,()=>new WeakMap);return Ny(k,D,()=>{let O={};for(let[j,L]of Object.entries(n.selectors??{}))O[j]=LI(L,D,b,I);return O})}return{reducerPath:E,getSelectors:M,get selectors(){return M(q)},selectSlice:q}}let F={name:o,reducer:v,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:b,...x(a),injectInto(E,{reducerPath:I,...q}={}){let M=I??a;return E.inject({reducerPath:M,reducer:v},q),{...F,...x(M,!0)}}};return F}}function LI(e,t,r,n){function o(a,...d){let p=t(a);return typeof p>"u"&&n&&(p=r()),e(p,...d)}return o.unwrapped=e,o}var Mn=QI();function _I(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function UI({type:e,reducerName:t,createNotation:r},n,o){let a,d;if("reducer"in n){if(r&&!GI(n))throw new Error(st(17));a=n.reducer,d=n.prepare}else a=n;o.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,d?w(e,d):w(e))}function BI(e){return e._reducerDefinitionType==="asyncThunk"}function GI(e){return e._reducerDefinitionType==="reducerWithPrepare"}function $I({type:e,reducerName:t},r,n,o){if(!o)throw new Error(st(18));let{payloadCreator:a,fulfilled:d,pending:p,rejected:m,settled:g,options:f}=r,A=o(e,a,f);n.exposeAction(t,A),d&&n.addCase(A.fulfilled,d),p&&n.addCase(A.pending,p),m&&n.addCase(A.rejected,m),g&&n.addMatcher(A.settled,g),n.exposeCaseReducer(t,{fulfilled:d||Bs,pending:p||Bs,rejected:m||Bs,settled:g||Bs})}function Bs(){}var HI="task",Wy="listener",Yy="completed",Dp="cancelled",zI=`task-${Dp}`,WI=`task-${Yy}`,kp=`${Wy}-${Dp}`,YI=`${Wy}-${Yy}`,Ys=class{constructor(e){Re(this,"name","TaskAbortError");Re(this,"message");this.code=e,this.message=`${HI} ${Dp} (reason: ${e})`}},jp=(e,t)=>{if(typeof e!="function")throw new TypeError(st(32))},Gs=()=>{},Ky=(e,t=Gs)=>(e.catch(t),e),Jy=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),jn=(e,t)=>{let r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Vn=e=>{if(e.aborted){let{reason:t}=e;throw new Ys(t)}};function Xy(e,t){let r=Gs;return new Promise((n,o)=>{let a=()=>o(new Ys(e.reason));if(e.aborted){a();return}r=Jy(e,a),t.finally(()=>r()).then(n,o)}).finally(()=>{r=Gs})}var KI=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Ys?"cancelled":"rejected",error:r}}finally{t?.()}},$s=e=>t=>Ky(Xy(e,t).then(r=>(Vn(e),r))),Zy=e=>{let t=$s(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Po}=Object,Ly={},Ks="listenerMiddleware",JI=(e,t)=>{let r=n=>Jy(e,()=>jn(n,e.reason));return(n,o)=>{jp(n,"taskExecutor");let a=new i.AbortController;r(a);let d=KI(async()=>{Vn(e),Vn(a.signal);let p=await n({pause:$s(a.signal),delay:Zy(a.signal),signal:a.signal});return Vn(a.signal),p},()=>jn(a,WI));return o?.autoJoin&&t.push(d.catch(Gs)),{result:$s(e)(d),cancel(){jn(a,zI)}}}},XI=(e,t)=>{let r=async(n,o)=>{Vn(t);let a=()=>{},p=[new Promise((m,g)=>{let f=e({predicate:n,effect:(A,R)=>{R.unsubscribe(),m([A,R.getState(),R.getOriginalState()])}});a=()=>{f(),g()}})];o!=null&&p.push(new Promise(m=>setTimeout(m,o,null)));try{let m=await Xy(t,Promise.race(p));return Vn(t),m}finally{a()}};return(n,o)=>Ky(r(n,o))},eh=e=>{let{type:t,actionCreator:r,matcher:n,predicate:o,effect:a}=e;if(t)o=w(t).match;else if(r)t=r.type,o=r.match;else if(n)o=n;else if(!o)throw new Error(st(21));return jp(a,"options.listener"),{predicate:o,type:t,effect:a}},th=Po(e=>{let{type:t,predicate:r,effect:n}=eh(e);return{id:Fi(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(st(22))}}},{withTypes:()=>th}),_y=(e,t)=>{let{type:r,effect:n,predicate:o}=eh(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===o)&&a.effect===n)},Op=e=>{e.pending.forEach(t=>{jn(t,kp)})},ZI=e=>()=>{e.forEach(Op),e.clear()},Uy=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},rh=Po(w(`${Ks}/add`),{withTypes:()=>rh}),eP=w(`${Ks}/removeAll`),nh=Po(w(`${Ks}/remove`),{withTypes:()=>nh}),tP=(...e)=>{console.error(`${Ks}/error`,...e)},oh=(e={})=>{let t=new Map,{extra:r,onError:n=tP}=e;jp(n,"onError");let o=f=>(f.unsubscribe=()=>t.delete(f.id),t.set(f.id,f),A=>{f.unsubscribe(),A?.cancelActive&&Op(f)}),a=f=>{let A=_y(t,f)??th(f);return o(A)};Po(a,{withTypes:()=>a});let d=f=>{let A=_y(t,f);return A&&(A.unsubscribe(),f.cancelActive&&Op(A)),!!A};Po(d,{withTypes:()=>d});let p=async(f,A,R,C)=>{let v=new i.AbortController,b=XI(a,v.signal),x=[];try{f.pending.add(v),await Promise.resolve(f.effect(A,Po({},R,{getOriginalState:C,condition:(F,E)=>b(F,E).then(Boolean),take:b,delay:Zy(v.signal),pause:$s(v.signal),extra:r,signal:v.signal,fork:JI(v.signal,x),unsubscribe:f.unsubscribe,subscribe:()=>{t.set(f.id,f)},cancelActiveListeners:()=>{f.pending.forEach((F,E,I)=>{F!==v&&(jn(F,kp),I.delete(F))})},cancel:()=>{jn(v,kp),f.pending.delete(v)},throwIfCancelled:()=>{Vn(v.signal)}})))}catch(F){F instanceof Ys||Uy(n,F,{raisedBy:"effect"})}finally{await Promise.all(x),jn(v,YI),f.pending.delete(v)}},m=ZI(t);return{middleware:f=>A=>R=>{if(!bo(R))return A(R);if(rh.match(R))return a(R.payload);if(eP.match(R)){m();return}if(nh.match(R))return d(R.payload);let C=f.getState(),v=()=>{if(C===Ly)throw new Error(st(23));return C},b;try{if(b=A(R),t.size>0){let x=f.getState(),F=Array.from(t.values());for(let E of F){let I=!1;try{I=E.predicate(R,x,C)}catch(q){I=!1,Uy(n,q,{raisedBy:"predicate"})}I&&p(E,R,f,v)}}}finally{C=Ly}return b},startListening:a,stopListening:d,clearListeners:m}};var E_=Symbol.for("rtk-state-proxy-original");function st(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var ah=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function rP(e){return typeof e=="string"&&ah.test(e)}var Vp=rP;l();s();u();c();var Je=[];for(let e=0;e<256;++e)Je.push((e+256).toString(16).slice(1));function ih(e,t=0){return(Je[e[t+0]]+Je[e[t+1]]+Je[e[t+2]]+Je[e[t+3]]+"-"+Je[e[t+4]]+Je[e[t+5]]+"-"+Je[e[t+6]]+Je[e[t+7]]+"-"+Je[e[t+8]]+Je[e[t+9]]+"-"+Je[e[t+10]]+Je[e[t+11]]+Je[e[t+12]]+Je[e[t+13]]+Je[e[t+14]]+Je[e[t+15]]).toLowerCase()}l();s();u();c();var Np,nP=new Uint8Array(16);function Mp(){if(!Np){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Np=crypto.getRandomValues.bind(crypto)}return Np(nP)}l();s();u();c();l();s();u();c();var oP=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qp={randomUUID:oP};function aP(e,t,r){e=e||{};let n=e.random??e.rng?.()??Mp();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)t[r+o]=n[o];return t}return ih(n)}function iP(e,t,r){return Qp.randomUUID&&!t&&!e?Qp.randomUUID():aP(e,t,r)}var Lp=iP;l();s();u();c();function sh(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}function sP({config:e,environment:t,event:r,listenerManager:n}){let{url:o,token:a,mode:d}=e;d!=="disabled"&&(n.call(r),t.send(o,a,r))}var ch="visitorId";function cP(e){return{getClientId:()=>{let t=e.get(),r=t.storage,n=r.getItem(ch),o=n&&Vp(n)?n:t.generateUUID();return r.setItem(ch,o),o}}}var mh="1.2.15",_p=128,gh=192,uh=224,lh=240,uP=248;function lP(e){return(e&uP)===lh?4:(e&lh)===uh?3:(e&uh)===gh?2:1}function dP(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let n=Number.parseInt(e.substring(r-2,r),16);if((n&_p)!=_p)break;if(r-=3,(n&gh)!=_p){t-r>=lP(n)*3&&(r=t);break}}return e.substring(0,r)}function pP(e){let{trackingId:t}=e;return{trackingId:t}}function mP(e){return(e.source||[]).concat([`relay@${mh}`])}function fh(e,t,r,n){let{getReferrer:o,getLocation:a,getUserAgent:d}=r,p=pP(t),m=n.getClientId();return Object.freeze({type:e,config:p,ts:Date.now(),source:mP(t),clientId:m,userAgent:d(),referrer:dh(o()),location:dh(a())})}function dh(e){return e!==null?dP(e,1024):null}function gP(e,t,r,n,o){return{...t,meta:fh(e,r,n,o)}}var fP="*";function yP(){let e=[];function t({type:m,callback:g}){return e.findIndex(f=>f.type===m&&f.callback===g)}function r(m,g){return m.type==="*"||g===m.type}function n(m){return t(m)<0&&e.push(m),()=>p(m.type,m.callback)}function o(m){e.forEach(g=>{if(r(g,m.meta.type))try{g.callback(m)}catch(f){console.error(f)}})}function a(m){if(m===fP)e.length=0;else for(let g=e.length-1;g>=0;g--)e[g].type===m&&e.splice(g,1)}function d(m){let g=t(m);g>=0&&e.splice(g,1)}function p(m,g){g?d({type:m,callback:g}):a(m)}return{add:n,call:o,remove:p}}function ph({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source},...!!n.environment&&{environment:n.environment}})}function hP(e){let t=ph(e);return{get:()=>t,update:r=>{t=ph({...t,...r})}}}var Up=SP();function SP(){let e="coveo_",t=r=>{let n=r.split(".").slice(-2);return n.length==2?n.join("."):""};return{getItem(r){let n=`${e}${r}=`,o=document.cookie.split(";");for(let a of o){let d=a.replace(/^\s+/,"");if(d.lastIndexOf(n,0)===0)return d.substring(n.length,d.length)}return null},setItem(r,n,o){let a=t(window.location.hostname),d=`;expires=${new Date(new Date().getTime()+o).toUTCString()}`,p=a?`;domain=${a}`:"";document.cookie=`${e}${r}=${n}${d}${p};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function CP(){return{getItem(e){return Up.getItem(e)||localStorage.getItem(e)},removeItem(e){Up.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),Up.setItem(e,t,31556952e3)}}}function AP(){let e=document.referrer;return e===""?null:e}function Bp(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(sh().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>AP(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>Lp(),storage:CP()}}function RP(){try{let e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return e instanceof DOMException&&e.name==="QuotaExceededError"&&localStorage&&localStorage.length!==0}}function vP(){return{getItem(){return null},removeItem(){},setItem(){}}}function xP(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:vP()}}function bP(e){let t=e.get().mode!=="disabled",r=e.get().environment,n=xP();return t&&r?{storage:n.storage,...r,runtime:"custom"}:t&&FP()&&RP()?Bp():n}function FP(){try{return typeof window=="object"}catch{return!1}}function wP(e){return{get:()=>Object.freeze(bP(e))}}function yh(e){let t=hP(e),r=yP(),n=wP(t),o=cP(n);return{emit:(a,d)=>{let p=t.get(),m=n.get(),g=gP(a,d,p,m,o);return sP({config:p,environment:m,event:g,listenerManager:r})},getMeta:a=>fh(a,t.get(),n.get(),o),on:(a,d)=>r.add({type:a,callback:d}),off:(a,d)=>r.remove(a,d),updateConfig:a=>t.update(a),version:mh}}l();s();u();c();function hh(){return typeof window<"u"&&typeof document<"u"}l();s();u();c();l();s();u();c();var Nr="3.45.0",Sh=["@coveo/atomic","@coveo/quantic"];var Mr=ke(e=>e.source,e=>Object.entries(e).map(([t,r])=>`${t}@${r}`).concat(`@coveo/headless@${Nr}`));var wi=ke(e=>e.configuration.organizationId,e=>e.configuration.environment,e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>Mr(e.configuration.analytics),(e,t)=>t,(e,t,r,{trackingId:n,apiBaseUrl:o,enabled:a},d,p)=>{let m=PP(p);return yh({mode:a?"emit":"disabled",url:o??ks(e,t),token:r,trackingId:n??null,source:d,environment:m})}),IP={generateUUID:()=>"",getLocation:()=>null,getReferrer:()=>null,getUserAgent:()=>null,send:()=>{},storage:{getItem:()=>null,setItem:()=>{},removeItem:()=>{}}},PP=e=>{if(!e)return;let t=e();return{...hh()?Bp():IP,generateUUID:()=>t.clientId,getLocation:()=>t.location,getReferrer:()=>t.referrer,getUserAgent:()=>t.userAgent}};l();s();u();c();l();s();u();c();function zt(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function N(e,t,r,n){function o(a){return a instanceof r?a:new r(function(d){d(a)})}return new(r||(r=Promise))(function(a,d){function p(f){try{g(n.next(f))}catch(A){d(A)}}function m(f){try{g(n.throw(f))}catch(A){d(A)}}function g(f){f.done?a(f.value):o(f.value).then(p,m)}g((n=n.apply(e,t||[])).next())})}var Ce;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(Ce||(Ce={}));function Hp(){return typeof window<"u"}function im(){return typeof navigator<"u"}function To(){return typeof document<"u"}function zp(){try{return typeof localStorage<"u"}catch{return!1}}function EP(){try{return typeof sessionStorage<"u"}catch{return!1}}function Th(){return im()&&navigator.cookieEnabled}var qP=[Ce.click,Ce.custom,Ce.search,Ce.view],TP=(e,t)=>qP.indexOf(e)!==-1?Object.assign({language:To()?document.documentElement.lang:"unknown",userAgent:im()?navigator.userAgent:"unknown"},t):t,Pi=class e{static set(t,r,n){var o,a,d,p;n&&(a=new Date,a.setTime(a.getTime()+n)),p=window.location.hostname,p.indexOf(".")===-1?Ch(t,r,a):(d=p.split("."),o=d[d.length-2]+"."+d[d.length-1],Ch(t,r,a,o))}static get(t){for(var r=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var a=n[o];if(a=a.replace(/^\s+/,""),a.lastIndexOf(r,0)===0)return a.substring(r.length,a.length)}return null}static erase(t){e.set(t,"",-1)}};function Ch(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function kP(){return zp()?localStorage:Th()?new Ei:EP()?sessionStorage:new Oo}var Ei=class e{getItem(t){return Pi.get(`${e.prefix}${t}`)}removeItem(t){Pi.erase(`${e.prefix}${t}`)}setItem(t,r,n){Pi.set(`${e.prefix}${t}`,r,n)}};Ei.prefix="coveo_";var Wp=class{constructor(){this.cookieStorage=new Ei}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3)}},Oo=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},Js="__coveo.analytics.history",OP=20,DP=1e3*60,jP=75,ec=class{constructor(t){this.store=t||kP()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return N(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return N(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(Js);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return N(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(Js);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(Js,JSON.stringify(t.slice(0,OP)))}catch{}}clear(){try{this.store.removeItem(Js)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,o)=>(o.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,jP)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>DP:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:o,value:a}=r;return{name:n,time:o,value:a}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:o}=t;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};var VP=(e,t)=>N(void 0,void 0,void 0,function*(){return e===Ce.view?(yield NP(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),NP=e=>N(void 0,void 0,void 0,function*(){let t=new ec,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),Xs,MP=new Uint8Array(16);function QP(){if(!Xs&&(Xs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xs(MP)}var LP=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function tc(e){return typeof e=="string"&&LP.test(e)}var Xe=[];for(let e=0;e<256;++e)Xe.push((e+256).toString(16).slice(1));function kh(e,t=0){return Xe[e[t+0]]+Xe[e[t+1]]+Xe[e[t+2]]+Xe[e[t+3]]+"-"+Xe[e[t+4]]+Xe[e[t+5]]+"-"+Xe[e[t+6]]+Xe[e[t+7]]+"-"+Xe[e[t+8]]+Xe[e[t+9]]+"-"+Xe[e[t+10]]+Xe[e[t+11]]+Xe[e[t+12]]+Xe[e[t+13]]+Xe[e[t+14]]+Xe[e[t+15]]}function _P(e){if(!tc(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function UP(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var BP="6ba7b810-9dad-11d1-80b4-00c04fd430c8",GP="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function $P(e,t,r){function n(o,a,d,p){var m;if(typeof o=="string"&&(o=UP(o)),typeof a=="string"&&(a=_P(a)),((m=a)===null||m===void 0?void 0:m.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let g=new Uint8Array(16+o.length);if(g.set(a),g.set(o,a.length),g=r(g),g[6]=g[6]&15|t,g[8]=g[8]&63|128,d){p=p||0;for(let f=0;f<16;++f)d[p+f]=g[f];return d}return kh(g)}try{n.name=e}catch{}return n.DNS=BP,n.URL=GP,n}var HP=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ah={randomUUID:HP};function Qn(e,t,r){if(Ah.randomUUID&&!t&&!e)return Ah.randomUUID();e=e||{};let n=e.random||(e.rng||QP)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return kh(n)}function zP(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function Gp(e,t){return e<<t|e>>>32-t}function WP(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let d=unescape(encodeURIComponent(e));e=[];for(let p=0;p<d.length;++p)e.push(d.charCodeAt(p))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,o=Math.ceil(n/16),a=new Array(o);for(let d=0;d<o;++d){let p=new Uint32Array(16);for(let m=0;m<16;++m)p[m]=e[d*64+m*4]<<24|e[d*64+m*4+1]<<16|e[d*64+m*4+2]<<8|e[d*64+m*4+3];a[d]=p}a[o-1][14]=(e.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(e.length-1)*8&4294967295;for(let d=0;d<o;++d){let p=new Uint32Array(80);for(let C=0;C<16;++C)p[C]=a[d][C];for(let C=16;C<80;++C)p[C]=Gp(p[C-3]^p[C-8]^p[C-14]^p[C-16],1);let m=r[0],g=r[1],f=r[2],A=r[3],R=r[4];for(let C=0;C<80;++C){let v=Math.floor(C/20),b=Gp(m,5)+zP(v,g,f,A)+R+t[v]+p[C]>>>0;R=A,A=f,f=Gp(g,30)>>>0,g=m,m=b}r[0]=r[0]+m>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+f>>>0,r[3]=r[3]+A>>>0,r[4]=r[4]+R>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var YP=$P("v5",80,WP),Rh=YP,Oh="2.30.52",vh=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,Ii={pageview:"pageview",event:"event"},rc=class{constructor({client:t,uuidGenerator:r=Qn}){this.client=t,this.uuidGenerator=r}},Yp=class extends rc{constructor({client:t,uuidGenerator:r=Qn}){super({client:t,uuidGenerator:r}),this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=vh(window.location),this.lastReferrer=To()?document.referrer:"",this.addHooks()}getApi(t){switch(t){case"setAction":return this.setAction;default:return null}}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:To()?document.title:"",encoding:To()?document.characterSet:"UTF-8"},n={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},o={language:navigator.language,userAgent:navigator.userAgent},a={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},a),n),o),r)}updateLocationForNextPageView(t,r){let{pageViewId:n,referrer:o,location:a}=this.getNextValues(t,r);this.lastReferrer=o,this.pageViewId=n,this.currentLocation=a,t===Ii.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===Ii.pageview?this.nextPageViewId:this.pageViewId,referrer:t===Ii.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===Ii.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=o=>o.replace(/^\/?(.*)$/,"/$1");return`${(o=>o.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return vh(window.location)}},Qr=class e{constructor(t,r){if(!tc(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let n=new URL(t);return r.some(o=>new RegExp(o.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(n.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,o]=r;if(n.length!==32||isNaN(parseInt(o)))return null;let a=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return tc(a)?new e(a,Number.parseInt(o)*1e3):null}};Qr.cvo_cid="cvo_cid";Qr.expirationTime=120;var Kp=class extends rc{constructor({client:t,uuidGenerator:r=Qn}){super({client:t,uuidGenerator:r})}getApi(t){switch(t){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(t){return N(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(t),n=yield this.client.getCurrentVisitorId();return r.searchParams.set(Qr.cvo_cid,new Qr(n,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(t){this.client.setAcceptedLinkReferrers(t)}};Kp.Id="link";var Et=Object.keys;function Zs(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var $p=128,Dh=192,xh=224,bh=240;function KP(e){return(e&248)===bh?4:(e&bh)===xh?3:(e&xh)===Dh?2:1}function JP(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let n=Number.parseInt(e.substring(r-2,r),16);if((n&$p)!=$p)break;if(r-=3,(n&Dh)!=$p){t-r>=KP(n)*3&&(r=t);break}}return e.substring(0,r)}var Jp={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},XP=Et(Jp).map(e=>Jp[e]),ZP=[...XP].join("|"),eE=new RegExp(`^(${ZP}$)`),tE={svcAction:"svc_action",svcActionData:"svc_action_data"},rE=e=>Et(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let n=Jp[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})},{}),nE=e=>eE.test(e),oE=[nE],Fh={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},wh={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},tt={action:"pa",list:"pal",listSource:"pls"},nc={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},aE=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Xp={id:"quoteId",affiliation:"quoteAffiliation"},Zp={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},iE={add:tt,bookmark_add:tt,bookmark_remove:tt,click:tt,checkout:tt,checkout_option:tt,detail:tt,impression:tt,remove:tt,refund:Object.assign(Object.assign({},tt),nc),purchase:Object.assign(Object.assign({},tt),nc),quickview:tt,quote:Object.assign(Object.assign({},tt),Xp),review:Object.assign(Object.assign({},tt),Zp)},sE=Et(Fh).map(e=>Fh[e]),cE=Et(wh).map(e=>wh[e]),uE=Et(tt).map(e=>tt[e]),lE=Et(nc).map(e=>nc[e]),dE=Et(Zp).map(e=>Zp[e]),pE=Et(Xp).map(e=>Xp[e]),mE=[...sE,"custom"].join("|"),gE=[...cE,"custom"].join("|"),jh="(pr[0-9]+)",Vh="(il[0-9]+pi[0-9]+)",fE=new RegExp(`^${jh}(${mE})$`),yE=new RegExp(`^(${Vh}(${gE}))|(il[0-9]+nm)$`),hE=new RegExp(`^(${uE.join("|")})$`),SE=new RegExp(`^(${lE.join("|")})$`),CE=new RegExp(`^${jh}custom$`),AE=new RegExp(`^${Vh}custom$`),RE=new RegExp(`^(${[...aE,...dE,...pE].join("|")})$`),vE=e=>fE.test(e),xE=e=>yE.test(e),bE=e=>hE.test(e),FE=e=>SE.test(e),wE=e=>RE.test(e),IE=[xE,vE,bE,FE,wE],PE=[CE,AE],EE={anonymizeIp:"aip"},qE={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},TE={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},kE=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],OE=Object.assign(Object.assign(Object.assign(Object.assign({},EE),qE),TE),kE.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),em=Object.assign(Object.assign({},OE),tE),DE=e=>{let t=!!e.action&&iE[e.action]||{};return Et(e).reduce((r,n)=>{let o=t[n]||em[n]||n;return Object.assign(Object.assign({},r),{[o]:e[n]})},{})},jE=Et(em).map(e=>em[e]),VE=e=>jE.indexOf(e)!==-1,NE=e=>e==="custom",ME=e=>[...IE,...oE,VE,NE].some(t=>t(e)),QE=e=>Et(e).reduce((t,r)=>{let n=LE(r);return n?Object.assign(Object.assign({},t),_E(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),LE=e=>{let t;return[...PE].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t}),t},_E=(e,t)=>Et(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),tm=class{constructor(t){this.opts=t}sendEvent(t,r){return N(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:n,preprocessRequest:o}=this.opts,a=yield this.getQueryParamsForEventType(t),{url:d,payload:p}=yield this.preProcessRequestAsPotentialJSONString(`${n}/analytics/${t}?${a}`,r,o),m=this.encodeForEventType(t,p),g=new Blob([m],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(d,g)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,n){return N(this,void 0,void 0,function*(){let o=t,a=r;if(n){let d=yield n({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:p,body:m}=d;o=p||t;try{a=JSON.parse(m)}catch(g){console.error("Unable to process the request body as a JSON string",g)}}return{payload:a,url:o}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeEventToJson(t,r):this.encodeEventToJson(t,r,this.opts.token)}getQueryParamsForEventType(t){return N(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:n}=this.opts,o=yield n.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",o?`visitorId=${o}`:"","discardVisitInfo=true"].filter(a=>!!a).join("&")})}isEventTypeLegacy(t){return[Ce.click,Ce.custom,Ce.search,Ce.view].indexOf(t)!==-1}encodeEventToJson(t,r,n){let o=`${t}Event=${encodeURIComponent(JSON.stringify(r))}`;return n&&(o=`access_token=${encodeURIComponent(n)}&${o}`),o}},rm=class{sendEvent(t,r){return N(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return N(this,void 0,void 0,function*(){return Promise.resolve()})}},Ih=y.fetch,oc=class{constructor(t){this.opts=t}sendEvent(t,r){return N(this,void 0,void 0,function*(){let{baseUrl:n,visitorIdProvider:o,preprocessRequest:a}=this.opts,d=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",p={url:`${n}/analytics/${t}${d}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},m=Object.assign(Object.assign({},p),a?yield a(p,"analyticsFetch"):{}),{url:g}=m,f=zt(m,["url"]),A;try{A=yield Ih(g,f)}catch(R){console.error("An error has occured when sending the event.",R);return}if(A.ok){let R=yield A.json();return R.visitorId&&o.setCurrentVisitorId(R.visitorId),R}else{try{A.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,A,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return N(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield Ih(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(t){return[Ce.click,Ce.custom,Ce.search,Ce.view].indexOf(t)!==-1}getVisitorIdParam(){return N(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},nm=class{constructor(t,r){zp()&&Th()?this.storage=new Wp:zp()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Oo),this.client=new oc(t),this.beaconClient=new tm(t),window.addEventListener("beforeunload",()=>{let n=r();for(let{eventType:o,payload:a}of n)this.beaconClient.sendEvent(o,a)})}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},om=class{constructor(t,r){this.storage=r||new Oo,this.client=new oc(t)}getClientDependingOnEventType(t){return this.client}},ac=class{constructor(){this.storage=new Oo,this.client=new rm}getClientDependingOnEventType(t){return this.client}},UE="xx",BE=e=>e?.startsWith(UE)||!1,GE=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function $E(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var HE=["1",1,"yes",!0];function qi(){let e=[];return Hp()&&e.push(window.doNotTrack),im()&&e.push(navigator.doNotTrack,navigator.msDoNotTrack,navigator.globalPrivacyControl),e.some(t=>HE.indexOf(t)!==-1)}var Nh="v15",Mh={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function zE(e=Mh.default,t=Nh,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var WE="38824e1f-37f5-42d3-8372-a4b8fa9df946",vt=class{get defaultOptions(){return{endpoint:Mh.default,isCustomEndpoint:!1,token:"",version:Nh,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Oh}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[VP,TP].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};qi()?this.runtime=new ac:this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),this.addEventTypeMapping(Ce.view,{newEventType:Ce.view,addClientIdParameter:!0}),this.addEventTypeMapping(Ce.click,{newEventType:Ce.click,addClientIdParameter:!0}),this.addEventTypeMapping(Ce.custom,{newEventType:Ce.custom,addClientIdParameter:!0}),this.addEventTypeMapping(Ce.search,{newEventType:Ce.search,addClientIdParameter:!0})}initRuntime(t){return Hp()&&To()?new nm(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):($E()&&console.warn(GE),new om(t))}get storage(){return this.runtime.storage}determineVisitorId(){return N(this,void 0,void 0,function*(){try{return Hp()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||Qn()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),Qn()}})}getCurrentVisitorId(){return N(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return N(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}setClientId(t,r){return N(this,void 0,void 0,function*(){if(tc(t))this.setCurrentVisitorId(t.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Rh(t,Rh(r,WE)))}})}getParameters(t,...r){return N(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return N(this,void 0,void 0,function*(){let n=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,n)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(Qn()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}extractClientIdFromLink(t){if(qi())return null;try{let r=new URL(t).searchParams.get(Qr.cvo_cid);if(r==null)return null;let n=Qr.fromString(r);return!n||!To()||!n.validate(document.referrer,this.acceptedLinkReferrers)?null:n.clientId}catch{}return null}resolveParameters(t,...r){return N(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:n=[],addVisitorIdParameter:o=!1,usesMeasurementProtocol:a=!1,addClientIdParameter:d=!1}=this.eventTypeMapping[t]||{};return yield[C=>n.length>0?this.parseVariableArgumentsPayload(n,C):C[0],C=>N(this,void 0,void 0,function*(){return Object.assign(Object.assign({},C),{visitorId:o?yield this.getCurrentVisitorId():""})}),C=>N(this,void 0,void 0,function*(){return d?Object.assign(Object.assign({},C),{clientId:yield this.getCurrentVisitorId()}):C}),C=>a?this.ensureAnonymousUserWhenUsingApiKey(C):C,C=>this.beforeSendHooks.reduce((v,b)=>N(this,void 0,void 0,function*(){let x=yield v;return yield b(t,x)}),C)].reduce((C,v)=>N(this,void 0,void 0,function*(){let b=yield C;return yield v(b)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return N(this,void 0,void 0,function*(){let{usesMeasurementProtocol:n=!1}=this.eventTypeMapping[t]||{};return yield[A=>this.setTrackingIdIfTrackingIdNotPresent(A),A=>this.removeEmptyPayloadValues(A,t),A=>this.validateParams(A,t),A=>n?DE(A):A,A=>n?this.removeUnknownParameters(A):A,A=>n?this.processCustomParameters(A):this.mapCustomParametersToCustomData(A)].reduce((A,R)=>N(this,void 0,void 0,function*(){let C=yield A;return yield R(C)}),Promise.resolve(r))})}makeEvent(t,...r){return N(this,void 0,void 0,function*(){let{newEventType:n=t}=this.eventTypeMapping[t]||{},o=yield this.resolveParameters(t,...r),a=yield this.resolvePayloadForParameters(t,o);return{eventType:n,payload:a,log:d=>N(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:n,payload:Object.assign(Object.assign({},a),d)}),yield Promise.all(this.afterSendHooks.map(p=>p(t,Object.assign(Object.assign({},o),d)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return N(this,void 0,void 0,function*(){return(yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return N(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:n}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,n)}})}clear(){this.storage.removeItem("visitorId"),new ec().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(t){return N(this,void 0,void 0,function*(){return this.makeEvent(Ce.search,t)})}sendSearchEvent(t){return N(this,void 0,void 0,function*(){var{searchQueryUid:r}=t,n=zt(t,["searchQueryUid"]);return(yield this.makeSearchEvent(n)).log({searchQueryUid:r})})}makeClickEvent(t){return N(this,void 0,void 0,function*(){return this.makeEvent(Ce.click,t)})}sendClickEvent(t){return N(this,void 0,void 0,function*(){var{searchQueryUid:r}=t,n=zt(t,["searchQueryUid"]);return(yield this.makeClickEvent(n)).log({searchQueryUid:r})})}makeCustomEvent(t){return N(this,void 0,void 0,function*(){return this.makeEvent(Ce.custom,t)})}sendCustomEvent(t){return N(this,void 0,void 0,function*(){var{lastSearchQueryUid:r}=t,n=zt(t,["lastSearchQueryUid"]);return(yield this.makeCustomEvent(n)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return N(this,void 0,void 0,function*(){return this.makeEvent(Ce.view,t)})}sendViewEvent(t){return N(this,void 0,void 0,function*(){return(yield this.makeViewEvent(t)).log({})})}getVisit(){return N(this,void 0,void 0,function*(){let r=yield(yield h(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return N(this,void 0,void 0,function*(){return yield(yield h(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let n={};for(let o=0,a=r.length;o<a;o++){let d=r[o];if(typeof d=="string")n[t[o]]=d;else if(typeof d=="object")return Object.assign(Object.assign({},n),d)}return n}isKeyAllowedEmpty(t,r){return({[Ce.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let n=o=>typeof o<"u"&&o!==null&&o!=="";return Object.keys(t).filter(o=>this.isKeyAllowedEmpty(r,o)||n(t[o])).reduce((o,a)=>Object.assign(Object.assign({},o),{[a]:t[a]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(n=>{if(ME(n))return!0;console.log(n,"is not processed by coveoua")}).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:t[o]}),{})}processCustomParameters(t){let{custom:r}=t,n=zt(t,["custom"]),o={};r&&Zs(r)&&(o=this.lowercaseKeys(r));let a=QE(n);return Object.assign(Object.assign({},o),a)}mapCustomParametersToCustomData(t){let{custom:r}=t,n=zt(t,["custom"]);if(r&&Zs(r)){let o=this.lowercaseKeys(r);return Object.assign(Object.assign({},n),{customData:Object.assign(Object.assign({},o),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),n={};return r.forEach(o=>{n[o.toLowerCase()]=t[o]}),n}validateParams(t,r){let{anonymizeIp:n}=t,o=zt(t,["anonymizeIp"]);return n!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${n}`.toLowerCase())==-1&&(o.anonymizeIp=1),(r==Ce.view||r==Ce.click||r==Ce.search||r==Ce.custom)&&(o.originLevel3=this.limit(o.originLevel3,1024)),r==Ce.view&&(o.location=this.limit(o.location,1024)),(r=="pageview"||r=="event")&&(o.referrer=this.limit(o.referrer,2048),o.location=this.limit(o.location,2048),o.page=this.limit(o.page,2048)),o}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,n=zt(t,["userId"]);return BE(this.options.token)&&!r?(n.userId="anonymous",n):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,n=zt(t,["trackingId"]);return r?t:(n.hasOwnProperty("custom")&&Zs(n.custom)&&(n.custom.hasOwnProperty("context_website")||n.custom.hasOwnProperty("siteName"))&&(n.trackingId=n.custom.context_website||n.custom.siteName),n.hasOwnProperty("customData")&&Zs(n.customData)&&(n.customData.hasOwnProperty("context_website")||n.customData.hasOwnProperty("siteName"))&&(n.trackingId=n.customData.context_website||n.customData.siteName),n)}limit(t,r){return typeof t=="string"?JP(t,r):t}get baseUrl(){return zE(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Ze;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(Ze||(Ze={}));var T;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2",e.generatedAnswerCitationClick="generatedAnswerCitationClick",e.generatedAnswerCitationDocumentAttach="generatedAnswerCitationDocumentAttach"})(T||(T={}));var am={[T.triggerNotify]:"queryPipelineTriggers",[T.triggerExecute]:"queryPipelineTriggers",[T.triggerQuery]:"queryPipelineTriggers",[T.triggerRedirect]:"queryPipelineTriggers",[T.queryErrorBack]:"errors",[T.queryErrorClear]:"errors",[T.queryErrorRetry]:"errors",[T.pagerNext]:"getMoreResults",[T.pagerPrevious]:"getMoreResults",[T.pagerNumber]:"getMoreResults",[T.pagerResize]:"getMoreResults",[T.pagerScrolling]:"getMoreResults",[T.facetSearch]:"facet",[T.facetShowLess]:"facet",[T.facetShowMore]:"facet",[T.recommendation]:"recommendation",[T.likeSmartSnippet]:"smartSnippet",[T.dislikeSmartSnippet]:"smartSnippet",[T.expandSmartSnippet]:"smartSnippet",[T.collapseSmartSnippet]:"smartSnippet",[T.openSmartSnippetFeedbackModal]:"smartSnippet",[T.closeSmartSnippetFeedbackModal]:"smartSnippet",[T.sendSmartSnippetReason]:"smartSnippet",[T.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[T.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[T.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[T.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[T.clearRecentQueries]:"recentQueries",[T.recentResultClick]:"recentlyClickedDocuments",[T.clearRecentResults]:"recentlyClickedDocuments",[T.showLessFoldedResults]:"folding",[T.caseDetach]:"case",[T.likeGeneratedAnswer]:"generatedAnswer",[T.dislikeGeneratedAnswer]:"generatedAnswer",[T.openGeneratedAnswerSource]:"generatedAnswer",[T.generatedAnswerStreamEnd]:"generatedAnswer",[T.generatedAnswerSourceHover]:"generatedAnswer",[T.generatedAnswerCopyToClipboard]:"generatedAnswer",[T.generatedAnswerHideAnswers]:"generatedAnswer",[T.generatedAnswerShowAnswers]:"generatedAnswer",[T.generatedAnswerExpand]:"generatedAnswer",[T.generatedAnswerCollapse]:"generatedAnswer",[T.generatedAnswerFeedbackSubmit]:"generatedAnswer",[T.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[Ze.expandToFullUI]:"interface",[Ze.openUserActions]:"User Actions",[Ze.showPrecedingSessions]:"User Actions",[Ze.showFollowingSessions]:"User Actions",[Ze.clickViewedDocument]:"User Actions",[Ze.clickPageView]:"User Actions",[Ze.createArticle]:"createArticle"},Lr=class{constructor(){this.runtime=new ac,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(Ce.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(Ce.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(Ce.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(Ce.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Oh}};function YE(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function KE(e){return e.map(t=>t.replace(/;/g,""))}function Qh(e){let r=e.join(";");return r.length<=256?r:Qh(e.slice(1))}var Ph=e=>{let t=KE(e),r=YE(t);return Qh(r)};function Eh(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Ph(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Ph(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var ic=class{constructor(t,r){this.opts=t,this.provider=r;let n=t.enableAnalytics===!1||qi();this.coveoAnalyticsClient=n?new Lr:new vt(t)}disable(){this.coveoAnalyticsClient=new Lr}enable(){this.coveoAnalyticsClient=new vt(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(T.interfaceLoad)}logInterfaceLoad(){return N(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(T.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return N(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(T.recommendation)}logRecommendation(){return N(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(T.recommendationOpen,t,r)}logRecommendationOpen(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(T.staticFilterClearAll,t)}logStaticFilterClearAll(t){return N(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(T.staticFilterSelect,t)}logStaticFilterSelect(t){return N(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(T.staticFilterDeselect,t)}logStaticFilterDeselect(t){return N(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(T.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return N(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(T.interfaceChange,t)}logInterfaceChange(t){return N(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(T.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return N(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(T.didyoumeanClick)}logDidYouMeanClick(){return N(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(T.resultsSort,t)}logResultsSort(t){return N(this,void 0,void 0,function*(){return(yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(T.searchboxSubmit)}logSearchboxSubmit(){return N(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(T.searchboxClear)}logSearchboxClear(){return N(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(T.searchboxAsYouType)}logSearchboxAsYouType(){return N(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(T.breadcrumbFacet,t)}logBreadcrumbFacet(t){return N(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(T.breadcrumbResetAll)}logBreadcrumbResetAll(){return N(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(T.documentQuickview,t,r)}logDocumentQuickview(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(T.documentOpen,t,r)}logDocumentOpen(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(T.omniboxAnalytics,Eh(t))}logOmniboxAnalytics(t){return N(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(T.omniboxFromLink,Eh(t))}logOmniboxFromLink(t){return N(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(T.searchFromLink)}logSearchFromLink(){return N(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(T.triggerNotify,t)}logTriggerNotify(t){return N(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(T.triggerExecute,t)}logTriggerExecute(t){return N(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(T.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return N(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(T.undoTriggerQuery,t)}logUndoTriggerQuery(t){return N(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(T.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return N(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(T.pagerResize,t)}logPagerResize(t){return N(this,void 0,void 0,function*(){return(yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(T.pagerNumber,t)}logPagerNumber(t){return N(this,void 0,void 0,function*(){return(yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(T.pagerNext,t)}logPagerNext(t){return N(this,void 0,void 0,function*(){return(yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(T.pagerPrevious,t)}logPagerPrevious(t){return N(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(T.pagerScrolling)}logPagerScrolling(){return N(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(T.facetClearAll,t)}logFacetClearAll(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(T.facetSearch,t)}logFacetSearch(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(T.facetSelect,t)}logFacetSelect(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(T.facetDeselect,t)}logFacetDeselect(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(T.facetExclude,t)}logFacetExclude(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(T.facetUnexclude,t)}logFacetUnexclude(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(T.facetSelectAll,t)}logFacetSelectAll(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(T.facetUpdateSort,t)}logFacetUpdateSort(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(T.facetShowMore,t)}logFacetShowMore(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(T.facetShowLess,t)}logFacetShowLess(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(T.queryError,t)}logQueryError(t){return N(this,void 0,void 0,function*(){return(yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return N(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(T.queryErrorBack);return{description:t.description,log:()=>N(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(T.queryErrorBack)})}})}logQueryErrorBack(){return N(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return N(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(T.queryErrorRetry);return{description:t.description,log:()=>N(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(T.queryErrorRetry)})}})}logQueryErrorRetry(){return N(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return N(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(T.queryErrorClear);return{description:t.description,log:()=>N(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(T.queryErrorClear)})}})}logQueryErrorClear(){return N(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(T.likeSmartSnippet)}logLikeSmartSnippet(){return N(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(T.dislikeSmartSnippet)}logDislikeSmartSnippet(){return N(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(T.expandSmartSnippet)}logExpandSmartSnippet(){return N(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(T.collapseSmartSnippet)}logCollapseSmartSnippet(){return N(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(T.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return N(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(T.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return N(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(T.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(T.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return N(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(T.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return N(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(T.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return N(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(T.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return N(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(T.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(T.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(T.copyToClipboard,t,r)}logCopyToClipboard(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(T.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(T.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(T.recentQueryClick)}logRecentQueryClick(){return N(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(T.clearRecentQueries)}logClearRecentQueries(){return N(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(T.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(T.clearRecentResults)}logClearRecentResults(){return N(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(T.noResultsBack)}logNoResultsBack(){return N(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(T.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(T.showLessFoldedResults)}logShowLessFoldedResults(){return N(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var n;return{actionCause:r,customData:(n=t.payload)===null||n===void 0?void 0:n.customData}}makeCustomEvent(t,r){return N(this,arguments,void 0,function*(n,o,a=am[n]){this.coveoAnalyticsClient.getParameters;let d=Object.assign(Object.assign({},this.provider.getBaseMetadata()),o),p=Object.assign(Object.assign({},yield this.getBaseEventRequest(d)),{eventType:a,eventValue:n}),m=yield this.coveoAnalyticsClient.makeCustomEvent(p);return{description:this.makeEventDescription(m,n),log:({searchUID:g})=>m.log({lastSearchQueryUid:g})}})}logCustomEvent(t,r){return N(this,arguments,void 0,function*(n,o,a=am[n]){return(yield this.makeCustomEvent(n,o,a)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,n){return N(this,void 0,void 0,function*(){let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),n),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(o)),{eventType:r,eventValue:t}),d=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(d,t),log:({searchUID:p})=>d.log({lastSearchQueryUid:p})}})}logCustomEventWithType(t,r,n){return N(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(t,r,n)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return N(this,void 0,void 0,function*(){let n=yield this.getBaseSearchEventRequest(t,r),o=yield this.coveoAnalyticsClient.makeSearchEvent(n);return{description:this.makeEventDescription(o,t),log:({searchUID:a})=>o.log({searchQueryUid:a})}})}makeClickEvent(t,r,n,o){return N(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),d=yield this.coveoAnalyticsClient.makeClickEvent(a);return{description:this.makeEventDescription(d,t),log:({searchUID:p})=>d.log({searchQueryUid:p})}})}logClickEvent(t,r,n,o){return N(this,void 0,void 0,function*(){return(yield this.makeClickEvent(t,r,n,o)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){return N(this,void 0,void 0,function*(){var n,o;return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(o=(n=this.provider).getGeneratedAnswerMetadata)===null||o===void 0?void 0:o.call(n)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return N(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof vt?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(T.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return N(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(T.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return N(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(T.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return N(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCitationClick(t,r){return this.makeClickEvent(T.generatedAnswerCitationClick,Object.assign(Object.assign({},t),{documentPosition:1}),{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logGeneratedAnswerCitationClick(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCitationClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(T.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(T.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(T.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(T.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(t){return this.makeCustomEvent(T.generatedAnswerExpand,t)}logGeneratedAnswerExpand(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerExpand(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(t){return this.makeCustomEvent(T.generatedAnswerCollapse,t)}logGeneratedAnswerCollapse(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCollapse(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(T.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmitV2(t){return this.makeCustomEvent(T.generatedAnswerFeedbackSubmitV2,t)}logGeneratedAnswerFeedbackSubmitV2(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(T.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return N(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(T.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return N(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(T.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},sc=Object.assign({},Ii),qh=Object.keys(sc).map(e=>sc[e]),ko=class extends Yp{constructor({client:t,uuidGenerator:r=Qn}){super({client:t,uuidGenerator:r}),this.ticket={}}getApi(t){let r=super.getApi(t);if(r!==null)return r;switch(t){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>qh.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(qh.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(sc.pageview,{newEventType:Ce.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(sc.event,{newEventType:Ce.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var n;let o=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((n=this.actionData)!==null&&n!==void 0?n:{}).length>0?{svcActionData:this.actionData}:{}),a=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},a),o),r)}getTicketPayload(){return rE(this.ticket)}};ko.Id="svc";var cc;(function(e){e.click="click",e.flowStart="flowStart"})(cc||(cc={}));var Pt;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.documentSuggestionClick="documentSuggestionClick",e.documentSuggestionQuickview="documentSuggestionQuickview",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(Pt||(Pt={}));var uc;(function(e){e.quit="Quit",e.solved="Solved"})(uc||(uc={}));var lc=class{constructor(t,r){var n;this.options=t,this.provider=r;let o=((n=t.enableAnalytics)!==null&&n!==void 0?n:!0)&&!qi();this.coveoAnalyticsClient=o?new vt(t):new Lr,this.svc=new ko({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient=new Lr,this.svc=new ko({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new vt(this.options),this.svc=new ko({client:this.coveoAnalyticsClient})}logEnterInterface(t){return this.svc.setAction(Pt.enterInterface),this.svc.setTicket(t.ticket),this.sendFlowStartEvent()}logUpdateCaseField(t){return this.svc.setAction(Pt.fieldUpdate,{fieldName:t.fieldName}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectFieldSuggestion(t){return this.svc.setAction(Pt.fieldSuggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(t){return this.logClickEvent(Pt.documentSuggestionClick,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logQuickviewDocumentSuggestion(t){return this.logClickEvent(Pt.documentSuggestionQuickview,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logRateDocumentSuggestion(t){return this.svc.setAction(Pt.suggestionRate,Object.assign({rate:t.rating},t.suggestion)),this.svc.setTicket(t.ticket),this.sendClickEvent()}logMoveToNextCaseStep(t){return this.svc.setAction(Pt.nextCaseStep,{stage:t?.stage}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCancelled(t){return this.svc.setAction(Pt.caseCancelled,{reason:uc.quit}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseSolved(t){return this.svc.setAction(Pt.caseSolved,{reason:uc.solved}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCreated(t){return this.svc.setAction(Pt.caseCreated),this.svc.setTicket(t.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",cc.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",cc.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}getBaseEventRequest(t){return N(this,void 0,void 0,function*(){var r,n;let o=Object.assign({},t);return Object.assign(Object.assign({},this.getOrigins()),{customData:o,language:(r=this.provider)===null||r===void 0?void 0:r.getLanguage(),anonymous:(n=this.provider)===null||n===void 0?void 0:n.getIsAnonymous(),clientId:yield this.getClientId()})})}getClientId(){return this.coveoAnalyticsClient instanceof vt?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getOrigins(){var t,r,n,o,a;return{originContext:(r=(t=this.provider)===null||t===void 0?void 0:t.getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:(n=this.provider)===null||n===void 0?void 0:n.getOriginLevel1(),originLevel2:(o=this.provider)===null||o===void 0?void 0:o.getOriginLevel2(),originLevel3:(a=this.provider)===null||a===void 0?void 0:a.getOriginLevel3()}}logClickEvent(t,r,n,o){return N(this,void 0,void 0,function*(){var a,d;let p=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{searchQueryUid:(d=(a=this.provider)===null||a===void 0?void 0:a.getSearchUID())!==null&&d!==void 0?d:"",actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(p)})}},JE=e=>{let t={};return e.caseContext&&Object.keys(e.caseContext).forEach(r=>{var n;let o=(n=e.caseContext)===null||n===void 0?void 0:n[r];if(o){let a=`context_${r}`;t[a]=o}}),t},ne=(e,t=!0)=>{let{caseContext:r,caseId:n,caseNumber:o}=e,a=zt(e,["caseContext","caseId","caseNumber"]),d=JE(e);return Object.assign(Object.assign(Object.assign({CaseId:n,CaseNumber:o},a),!!d.context_Case_Subject&&{CaseSubject:d.context_Case_Subject}),t&&d)},dc=class{constructor(t,r){this.opts=t,this.provider=r;let n=t.enableAnalytics===!1||qi();this.coveoAnalyticsClient=n?new Lr:new vt(t)}disable(){this.coveoAnalyticsClient=new Lr}enable(){this.coveoAnalyticsClient=new vt(this.opts)}logInterfaceLoad(t){if(t){let r=ne(t);return this.logSearchEvent(T.interfaceLoad,r)}return this.logSearchEvent(T.interfaceLoad)}logRecentQueryClick(t){if(t){let r=ne(t);return this.logSearchEvent(T.recentQueryClick,r)}return this.logSearchEvent(T.recentQueryClick)}logClearRecentQueries(t){if(t){let r=ne(t);return this.logCustomEvent(T.clearRecentQueries,r)}return this.logCustomEvent(T.clearRecentQueries)}logInterfaceChange(t){let r=ne(t);return this.logSearchEvent(T.interfaceChange,r)}logStaticFilterDeselect(t){let r=ne(t);return this.logSearchEvent(T.staticFilterDeselect,r)}logFetchMoreResults(t){if(t){let r=ne(t);return this.logCustomEvent(T.pagerScrolling,Object.assign(Object.assign({},r),{type:"getMoreResults"}))}return this.logCustomEvent(T.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(t){let r=ne(t);return this.logSearchEvent(T.breadcrumbFacet,r)}logBreadcrumbResetAll(t){if(t){let r=ne(t);return this.logSearchEvent(T.breadcrumbResetAll,r)}return this.logSearchEvent(T.breadcrumbResetAll)}logFacetSelect(t){let r=ne(t);return this.logSearchEvent(T.facetSelect,r)}logFacetExclude(t){let r=ne(t);return this.logSearchEvent(T.facetExclude,r)}logFacetDeselect(t){let r=ne(t);return this.logSearchEvent(T.facetDeselect,r)}logFacetUpdateSort(t){let r=ne(t);return this.logSearchEvent(T.facetUpdateSort,r)}logFacetClearAll(t){let r=ne(t);return this.logSearchEvent(T.facetClearAll,r)}logFacetShowMore(t){let r=ne(t,!1);return this.logCustomEvent(T.facetShowMore,r)}logFacetShowLess(t){let r=ne(t,!1);return this.logCustomEvent(T.facetShowLess,r)}logQueryError(t){let r=ne(t,!1);return this.logCustomEvent(T.queryError,r)}logPagerNumber(t){let r=ne(t,!1);return this.logCustomEvent(T.pagerNumber,r)}logPagerNext(t){let r=ne(t,!1);return this.logCustomEvent(T.pagerNext,r)}logPagerPrevious(t){let r=ne(t,!1);return this.logCustomEvent(T.pagerPrevious,r)}logDidYouMeanAutomatic(t){if(t){let r=ne(t);return this.logSearchEvent(T.didyoumeanAutomatic,r)}return this.logSearchEvent(T.didyoumeanAutomatic)}logDidYouMeanClick(t){if(t){let r=ne(t);return this.logSearchEvent(T.didyoumeanClick,r)}return this.logSearchEvent(T.didyoumeanClick)}logResultsSort(t){let r=ne(t);return this.logSearchEvent(T.resultsSort,r)}logSearchboxSubmit(t){if(t){let r=ne(t);return this.logSearchEvent(T.searchboxSubmit,r)}return this.logSearchEvent(T.searchboxSubmit)}logContextChanged(t){let r=ne(t);return this.logSearchEvent(Ze.contextChanged,r)}logExpandToFullUI(t){let r=ne(t);return this.logCustomEvent(Ze.expandToFullUI,r)}logOpenUserActions(t){let r=ne(t,!1);return this.logCustomEvent(Ze.openUserActions,r)}logShowPrecedingSessions(t){let r=ne(t,!1);return this.logCustomEvent(Ze.showPrecedingSessions,r)}logShowFollowingSessions(t){let r=ne(t,!1);return this.logCustomEvent(Ze.showFollowingSessions,r)}logViewedDocumentClick(t,r){return this.logCustomEvent(Ze.clickViewedDocument,Object.assign(Object.assign({},ne(r,!1)),{document:t}))}logPageViewClick(t,r){return this.logCustomEvent(Ze.clickPageView,Object.assign(Object.assign({},ne(r,!1)),{pageView:t}))}logCreateArticle(t,r){return this.logCustomEvent(Ze.createArticle,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logDocumentOpen(t,r,n){return this.logClickEvent(T.documentOpen,t,r,n?ne(n,!1):void 0)}logCopyToClipboard(t,r,n){return this.logClickEvent(T.copyToClipboard,t,r,n?ne(n,!1):void 0)}logCaseSendEmail(t,r,n){return this.logClickEvent(T.caseSendEmail,t,r,n?ne(n,!1):void 0)}logFeedItemTextPost(t,r,n){return this.logClickEvent(T.feedItemTextPost,t,r,n?ne(n,!1):void 0)}logDocumentQuickview(t,r,n){let o={documentTitle:t.documentTitle,documentURL:t.documentUrl};return this.logClickEvent(T.documentQuickview,t,r,n?Object.assign(Object.assign({},ne(n,!1)),o):o)}logCaseAttach(t,r,n){let o={documentTitle:t.documentTitle,documentURL:t.documentUrl,resultUriHash:t.documentUriHash};return this.logClickEvent(T.caseAttach,t,r,n?Object.assign(Object.assign({},ne(n,!1)),o):o)}logCaseDetach(t,r,n){let o=Object.assign(Object.assign(Object.assign({},r&&ne(r,!1)),n&&{permanentId:n}),{resultUriHash:t});return this.logCustomEvent(T.caseDetach,o)}logLikeSmartSnippet(t){return this.logCustomEvent(T.likeSmartSnippet,t?ne(t,!1):void 0)}logDislikeSmartSnippet(t){return this.logCustomEvent(T.dislikeSmartSnippet,t?ne(t,!1):void 0)}logExpandSmartSnippet(t){return this.logCustomEvent(T.expandSmartSnippet,t?ne(t,!1):void 0)}logCollapseSmartSnippet(t){return this.logCustomEvent(T.collapseSmartSnippet,t?ne(t,!1):void 0)}logOpenSmartSnippetFeedbackModal(t){return this.logCustomEvent(T.openSmartSnippetFeedbackModal,t?ne(t,!1):void 0)}logCloseSmartSnippetFeedbackModal(t){return this.logCustomEvent(T.closeSmartSnippetFeedbackModal,t?ne(t,!1):void 0)}logSmartSnippetFeedbackReason(t,r,n){return this.logCustomEvent(T.sendSmartSnippetReason,n?Object.assign(Object.assign({},ne(n,!1)),{reason:t,details:r}):{reason:t,details:r})}logExpandSmartSnippetSuggestion(t,r){let n="documentId"in t?t:{documentId:t};return this.logCustomEvent(T.expandSmartSnippetSuggestion,r?Object.assign(Object.assign({},ne(r,!1)),n):n)}logCollapseSmartSnippetSuggestion(t,r){let n="documentId"in t?t:{documentId:t};return this.logCustomEvent(T.collapseSmartSnippetSuggestion,r?Object.assign(Object.assign({},ne(r,!1)),n):n)}logOpenSmartSnippetSource(t,r,n){return this.logClickEvent(T.openSmartSnippetSource,t,r,n?ne(n,!1):void 0)}logOpenSmartSnippetSuggestionSource(t,r,n){return this.logClickEvent(T.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},n?Object.assign(Object.assign({},ne(n,!1)),r):r)}logOpenSmartSnippetInlineLink(t,r,n){return this.logClickEvent(T.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},n?Object.assign(Object.assign({},ne(n,!1)),r):r)}logOpenSmartSnippetSuggestionInlineLink(t,r,n){return this.logClickEvent(T.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},n?Object.assign(Object.assign({},ne(n,!1)),r):r)}logLikeGeneratedAnswer(t,r){return this.logCustomEvent(T.likeGeneratedAnswer,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logDislikeGeneratedAnswer(t,r){return this.logCustomEvent(T.dislikeGeneratedAnswer,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logOpenGeneratedAnswerSource(t,r){return this.logCustomEvent(T.openGeneratedAnswerSource,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logGeneratedAnswerCitationClick(t,r,n){return this.logClickEvent(T.generatedAnswerCitationClick,Object.assign(Object.assign({},t),{documentPosition:1}),{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},n?Object.assign(Object.assign({},ne(n,!1)),r):r)}logGeneratedAnswerSourceHover(t,r){return this.logCustomEvent(T.generatedAnswerSourceHover,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logGeneratedAnswerCopyToClipboard(t,r){return this.logCustomEvent(T.generatedAnswerCopyToClipboard,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logGeneratedAnswerHideAnswers(t,r){return this.logCustomEvent(T.generatedAnswerHideAnswers,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logGeneratedAnswerShowAnswers(t,r){return this.logCustomEvent(T.generatedAnswerShowAnswers,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logGeneratedAnswerExpand(t,r){return this.logCustomEvent(T.generatedAnswerExpand,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logGeneratedAnswerCollapse(t,r){return this.logCustomEvent(T.generatedAnswerCollapse,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logGeneratedAnswerFeedbackSubmit(t,r){return this.logCustomEvent(T.generatedAnswerFeedbackSubmit,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logGeneratedAnswerFeedbackSubmitV2(t,r){return this.logCustomEvent(T.generatedAnswerFeedbackSubmitV2,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logRephraseGeneratedAnswer(t,r){return this.logSearchEvent(T.rephraseGeneratedAnswer,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logRetryGeneratedAnswer(t){return this.logSearchEvent(T.retryGeneratedAnswer,t?Object.assign({},ne(t,!1)):{})}logGeneratedAnswerStreamEnd(t,r){return this.logCustomEvent(T.generatedAnswerStreamEnd,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}logGeneratedAnswerCitationDocumentAttach(t,r,n){return this.logClickEvent(T.generatedAnswerCitationDocumentAttach,Object.assign(Object.assign({},t),{documentPosition:1}),{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},n?Object.assign(Object.assign({},ne(n,!1)),r):r)}logCustomEvent(t,r){return N(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),o=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(n)),{eventType:am[t],eventValue:t});return this.coveoAnalyticsClient.sendCustomEvent(o)})}logSearchEvent(t,r){return N(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(t,r))})}logClickEvent(t,r,n,o){return N(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(a)})}logShowMoreFoldedResults(t,r,n){return N(this,void 0,void 0,function*(){return this.logClickEvent(T.showMoreFoldedResults,t,r,n?ne(n,!1):void 0)})}logShowLessFoldedResults(t){return N(this,void 0,void 0,function*(){return this.logCustomEvent(T.showLessFoldedResults,t?ne(t,!1):void 0)})}logTriggerNotify(t,r){return this.logCustomEvent(T.triggerNotify,r?Object.assign(Object.assign({},ne(r,!1)),t):t)}getBaseCustomEventRequest(t){return N(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(t)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){return N(this,void 0,void 0,function*(){var n,o;return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(o=(n=this.provider).getGeneratedAnswerMetadata)===null||o===void 0?void 0:o.call(n)))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return N(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign({},this.getOrigins()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof vt?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}};l();s();u();c();l();s();u();c();var Do=()=>"default";var XE=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},_r=class{constructor(t){this.getState=t;Re(this,"state");this.state=t()}getLanguage(){return XE(this.state)}getBaseMetadata(){let{context:t,configuration:r}=this.state,n=t?.contextValues||{},o={};for(let[a,d]of Object.entries(n)){let p=`context_${a}`;o[p]=d}return r.analytics.analyticsMode==="legacy"&&(o.coveoHeadlessVersion=Nr),o}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Do()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};l();s();u();c();var Lh=e=>new vt(e).getCurrentVisitorId(),jo=(e,t)=>typeof t=="function"?(...r)=>{let n=ci(r[0]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,Vo=(e,t)=>(...r)=>{let n=ci(r[1]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics hook. Returning original request."),n}};var Ti=class extends _r{getSearchUID(){return this.state.documentSuggestion?.status.lastResponseId??""}},_h=({logger:e,getState:t,analyticsClientMiddleware:r=(a,d)=>d,preprocessRequest:n,provider:o=new Ti(t)})=>{let a=t(),d=a.configuration.accessToken,p=a.configuration.analytics.apiBaseUrl??be(a.configuration.organizationId,a.configuration.environment,"analytics"),m=a.configuration.analytics.runtimeEnvironment,g=a.configuration.analytics.enabled,f=new lc({enableAnalytics:g,token:d,endpoint:p,runtimeEnvironment:m,preprocessRequest:jo(e,n),beforeSendHooks:[Vo(e,r),(A,R)=>(e.info({...R,type:A,endpoint:p,token:d},"Analytics request"),R)]},o);return g||f.disable(),f};l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();function pc(){return{desiredCount:5,numberOfValues:8,set:{}}}l();s();u();c();l();s();u();c();function ZE(e,t){return!!t&&t.facetId in e.facetSet}var xr=(e,t)=>e.search?.response.facets.find(r=>r.facetId===t),Uh=(e,t)=>e.facetSet[t]?.request,um=(e,t)=>{let r=xr(e,t);return ZE(e,r)?r:void 0};var Bh=(e,t)=>um(e,t)?.values.filter(r=>r.state!=="idle")||[],Wt=e=>e.search.isLoading;l();s();u();c();function Gh(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find(o=>o.state==="selected");return n&&(t=[...t,n],r=[]),{parents:t,values:r}}function Mt(e){let{activeValue:t,ancestryMap:r}=eq(e);return t?tq(t,r):[]}function eq(e){let t=[...e],r=new Map;for(;t.length>0;){let n=t.shift();if(n.state==="selected")return{activeValue:n,ancestryMap:r};if(r)for(let o of n.children)r.set(o,n);t.unshift(...n.children)}return{}}function tq(e,t){let r=[];if(!e)return[];let n=e;do r.unshift(n),n=t.get(n);while(n);return r}function rq(e,t){return!!t&&t.facetId in e.categoryFacetSet}var lm=(e,t)=>{let r=xr(e,t);if(rq(e,r))return r},dm=(e,t)=>e.categoryFacetSet[t]?.request,$h=(e,t)=>{let r=lm(e,t);return Mt(r?.values??[])},pm=(e,t)=>{let r=dm(e,t);return Mt(r?.currentValues??[])};l();s();u();c();function No(){return{}}l();s();u();c();function Hh(e){return{request:e}}function Mo(){return{}}l();s();u();c();function zh(e){return{request:e}}function Qo(){return{}}l();s();u();c();function Wh(e){return{request:e,hasBreadcrumbs:!0}}function Lo(){return{}}var Ln=(e,t)=>{let r=Xh(t,e),n=r?r.field:"",o=mm(n,e);return{facetId:e,facetField:n,facetTitle:o}};function _o(e,t){let{facetId:r,facetValue:n}=e,o=Ln(r,t),a=Zh(t,r);return{...o,facetValue:a==="hierarchical"?Jh(t,r):n}}function ft(e){return{facetSet:e.facetSet??Lo(),categoryFacetSet:e.categoryFacetSet??No(),dateFacetSet:e.dateFacetSet??Mo(),numericFacetSet:e.numericFacetSet??Qo(),automaticFacetSet:e.automaticFacetSet??pc()}}var mc=e=>{let t=[];return aq(e).forEach((r,n)=>{let o=Zh(e,r.facetId),a=lq(r,n+1);if(oq(r)){if(!!!pm(e,r.facetId).length)return;t.push({...a,...cq(e,r.facetId),facetType:o,state:"selected"});return}r.currentValues.forEach((d,p)=>{if(d.state==="idle")return;let m=Yh(d,p+1,o),g=nq(r)?Kh(d):sq(d);t.push({...a,...m,...g})})}),iq(e).forEach((r,n)=>{let o=uq(r,n+1);r.values.forEach((a,d)=>{if(a.state==="idle")return;let p=Yh(a,d+1,"specific"),m=Kh(a);t.push({...o,...p,...m})})}),t},nq=e=>e.type==="specific",oq=e=>e.type==="hierarchical",aq=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),iq=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),Yh=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),sq=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Kh=e=>({displayValue:e.value,value:e.value}),Jh=(e,t)=>pm(e,t).map(n=>n.value).join(";"),cq=(e,t)=>{let n=Jh(e,t);return{value:n,valuePosition:1,displayValue:n}},uq=(e,t)=>({title:mm(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),lq=(e,t)=>({title:mm(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),mm=(e,t)=>`${e}_${t}`,Xh=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,Zh=(e,t)=>{let r=Xh(e,t);return r?r.type:"specific"};l();s();u();c();l();s();u();c();var gm=e=>e.configuration.search.locale,eS=e=>e.configuration.search.timezone,Uo=e=>e.configuration?.knowledge?.agentId;var we=e=>{if(dq(e)||fm(e))return e.generatedAnswer?.answerId;if(pq(e))return e.search?.response?.extendedResults?.generativeQuestionAnsweringId},dq=e=>"answer"in e&&"generatedAnswer"in e&&!W(e.generatedAnswer?.answerConfigurationId),fm=e=>{let t=Uo(e);return"answerGenerationApi"in e&&"generatedAnswer"in e&&typeof t=="string"&&t.trim().length>0},pq=e=>"search"in e&&e.search!==void 0&&typeof e.search=="object",ym=e=>e.generatedAnswer?.fieldsToIncludeInCitations,Bo=ke(e=>e.generatedAnswer?.citations,(e,t)=>t,(e,t)=>e?.find(r=>r.id===t));l();s();u();c();var Me=()=>({q:"",enableQuerySyntax:!1});var ki=class extends _r{getSearchUID(){let t=this.getState();return t.search?.searchResponseId||t.search?.response.searchUid||$e().response.searchUid}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return mc(ft(this.state))}getBaseMetadata(){let t=this.getState(),r=super.getBaseMetadata(),n=we(t);return n&&(r.generativeQuestionAnsweringId=n),r}getGeneratedAnswerMetadata(){let t=this.getState();return{...t.generatedAnswer?.isVisible!==void 0&&{showGeneratedAnswer:t.generatedAnswer.isVisible}}}get queryText(){return this.state.query?.q||Me().q}get responseTime(){return this.state.search?.duration||$e().duration}mapResultsToAnalyticsDocument(){return this.state.search?.response.results.map(t=>({documentUri:t.uri,documentUriHash:t.raw.urihash}))}get numberOfResults(){return this.state.search?.response.results.length||$e().response.results.length}},tS=({logger:e,getState:t,analyticsClientMiddleware:r=(a,d)=>d,preprocessRequest:n,provider:o=new ki(t)})=>{let a=t(),d=a.configuration.accessToken,p=a.configuration.analytics.apiBaseUrl??be(a.configuration.organizationId,a.configuration.environment,"analytics"),m=a.configuration.analytics.runtimeEnvironment,g=a.configuration.analytics.enabled,f=new dc({enableAnalytics:g,token:d,endpoint:p,runtimeEnvironment:m,preprocessRequest:jo(e,n),beforeSendHooks:[Vo(e,r),(A,R)=>(e.info({...R,type:A,endpoint:p,token:d},"Analytics request"),R)]},o);return g||f.disable(),f};l();s();u();c();l();s();u();c();l();s();u();c();var gc=(r=>(r.Ascending="ascending",r.Descending="descending",r))(gc||{}),fc=(a=>(a.Relevancy="relevancy",a.QRE="qre",a.Date="date",a.Field="field",a.NoSort="nosort",a))(fc||{}),Yt=e=>{if(yo(e))return e.map(t=>Yt(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},yc=()=>({by:"relevancy"}),rS=e=>({by:"date",order:e});var nS=new _({values:{by:new Dr({enum:fc,required:!0}),order:new Dr({enum:gc}),field:new V}});function xt(){return Yt(yc())}l();s();u();c();l();s();u();c();l();s();u();c();var Go=class e{static set(t,r,n){let o,a,d;n&&(a=new Date,a.setTime(a.getTime()+n));let p=window.location.hostname,m=/^(\d{1,3}\.){3}\d{1,3}$/,g=/^([0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}$/;m.test(p)||g.test(p)||p.indexOf(".")===-1?hm(t,r,a):(d=p.split("."),o=d[d.length-2]+"."+d[d.length-1],hm(t,r,a,o))}static get(t){let r=t+"=",n=document.cookie.split(";");for(let o=0;o<n.length;o++){let a=n[o];if(a=a.replace(/^\s+/,""),a.lastIndexOf(r,0)===0)return a.substring(r.length,a.length)}return null}static erase(t){e.set(t,"",-1)}};function hm(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}l();s();u();c();function mq(){return typeof navigator<"u"}function oS(){try{return typeof localStorage<"u"}catch{return!1}}function aS(){try{return typeof sessionStorage<"u"}catch{return!1}}function iS(){return!!(mq()&&navigator.cookieEnabled)}var sS=null;function cS(){return sS||(oS()?localStorage:iS()?new Sm:aS()?sessionStorage:new Cm)}var $o=class $o{getItem(t){return Go.get(`${$o.prefix}${t}`)}removeItem(t){Go.erase(`${$o.prefix}${t}`)}setItem(t,r,n){Go.set(`${$o.prefix}${t}`,r,n)}};Re($o,"prefix","coveo_");var Sm=$o;var Cm=class{getItem(t){return null}removeItem(t){}setItem(t,r){}};var hc="__coveo.analytics.history",gq=20,fq=1e3*60,yq=75,_n=class _n{constructor(t){Re(this,"store");this.store=t||cS()}static getInstance(t){return _n.instance||(_n.instance=new _n(t)),_n.instance}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}async addElementAsync(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=await this.getHistoryWithInternalTimeAsync();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}async getHistoryAsync(){let t=await this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryWithInternalTime(){try{let t=this.store.getItem(hc);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}async getHistoryWithInternalTimeAsync(){try{let t=await this.store.getItem(hc);return t?JSON.parse(t):[]}catch{return[]}}setHistory(t){try{this.store.setItem(hc,JSON.stringify(t.slice(0,gq)))}catch{}}clear(){try{this.store.removeItem(hc)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,o)=>(o.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,yq)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value===t.value?(t.internalTime||0)-(r.internalTime||0)>fq:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:o,value:a}=r;return{name:n,time:o,value:a}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:o}=t;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};Re(_n,"instance",null);var Am=_n,rt=Am;var Oi=class Oi extends _r{constructor(){super(...arguments);Re(this,"getFacetRequest",r=>this.state.facetSet?.[r]?.request||this.state.categoryFacetSet?.[r]?.request||this.state.dateFacetSet?.[r]?.request||this.state.numericFacetSet?.[r]?.request||this.state.automaticFacetSet?.set[r]?.response)}getFacetState(){return mc(ft(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||Oi.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let r=this.getState();return r.search?.searchResponseId||r.search?.response.searchUid||$e().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let r=!!this.getSplitTestRunName(),n=this.state.search?.response.pipeline||this.state.pipeline||Oi.fallbackPipelineName;return r?n:void 0}getBaseMetadata(){let r=this.getState(),n=super.getBaseMetadata(),o=we(r);return o&&(n.generativeQuestionAnsweringId=o),n}getFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,facetValue:n,facetTitle:`${a}_${r}`}}getFacetClearAllMetadata(r){let o=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:o,facetTitle:`${o}_${r}`}}getFacetUpdateSortMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,criteria:n,facetTitle:`${a}_${r}`}}getRangeBreadcrumbFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,facetRangeEnd:n.end,facetRangeEndInclusive:n.endInclusive,facetRangeStart:n.start,facetTitle:`${a}_${r}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??xt()}}getStaticFilterToggleMetadata(r,n){return{...this.getBaseMetadata(),staticFilterId:r,staticFilterValue:n}}getStaticFilterClearAllMetadata(r){return{...this.getBaseMetadata(),staticFilterId:r}}getUndoTriggerQueryMetadata(r){return{...this.getBaseMetadata(),undoneQuery:r}}getCategoryBreadcrumbFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:r,categoryFacetField:a,categoryFacetPath:n,categoryFacetTitle:`${a}_${r}`}}getOmniboxAnalyticsMetadata(r,n){let o=this.state.querySuggest?.[r],a=o.completions.map(g=>g.expression),d=o.partialQueries.length-1,p=o.partialQueries[d]||"",m=o.responseId;return{...this.getBaseMetadata(),suggestionRanking:a.indexOf(n),partialQuery:p,partialQueries:o.partialQueries.length>0?o.partialQueries:"",suggestions:a.length>0?a:"",querySuggestResponseId:m}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(r){return{...this.getBaseMetadata(),...r}}getGeneratedAnswerMetadata(){let r=this.getState(),n={};return r.generatedAnswer?.isVisible!==void 0&&(n.showGeneratedAnswer=r.generatedAnswer.isVisible),n}get resultURIs(){return this.results?.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||Me().q}get responseTime(){return this.state.search?.duration||$e().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||$e().response.totalCountFiltered}};Re(Oi,"fallbackPipelineName","default");var Ur=Oi,uS=({logger:e,getState:t,analyticsClientMiddleware:r=(a,d)=>d,preprocessRequest:n,provider:o})=>{let a=t(),d=a.configuration.accessToken,p=a.configuration.analytics.apiBaseUrl??be(a.configuration.organizationId,a.configuration.environment,"analytics"),m=a.configuration.analytics.runtimeEnvironment,g=a.configuration.analytics.enabled,f=new ic({token:d,endpoint:p,runtimeEnvironment:m,preprocessRequest:jo(e,n),beforeSendHooks:[Vo(e,r),(A,R)=>(e.info({...R,type:A,endpoint:p,token:d},"Analytics request"),R)]},o);return g||f.disable(),f},Rm=()=>{let t=rt.getInstance().getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};l();s();u();c();function Sc(e){let t=lS(e),r=[e,...t].filter(o=>o.parentResult).map(o=>o.parentResult);return Of([e,...t,...r],o=>o.uniqueId)}function lS(e){return e.childResults?e.childResults.flatMap(t=>[t,...lS(t)]):[]}l();s();u();c();var Di=()=>"";function dS(e,t){return{...new Ur(t).getBaseMetadata(),actionCause:e,type:e}}function hq(e){return Object.assign(e,{instantlyCallable:!0})}function Sq(e,t){let r=a=>hq(re(e,a)),n=r(async(a,{getState:d,extra:p})=>{let{analyticsClientMiddleware:m,preprocessRequest:g,logger:f}=p;return await(await t({getState:d,analyticsClientMiddleware:m,preprocessRequest:g,logger:f})).log({state:d(),extra:p})});return Object.assign(n,{prepare:async({getState:a,analyticsClientMiddleware:d,preprocessRequest:p,logger:m})=>{let{description:g,log:f}=await t({getState:a,analyticsClientMiddleware:d,preprocessRequest:p,logger:m});return{description:g,action:r(async(A,{getState:R,extra:C})=>await f({state:R(),extra:C}))}}}),n}var vm=(e,t,r)=>{function n(...o){let a=o.length===1?{...o[0],__legacy__getBuilder:t(o[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:o[0],__legacy__getBuilder:t(o[1]),__legacy__provider:o[2],analyticsConfigurator:e,providerClass:r};return Rq(a)}return n},Cq=e=>e.configuration.analytics.analyticsMode==="legacy",Aq=e=>e.configuration.analytics.analyticsMode==="next",Rq=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:o,analyticsConfigurator:a,providerClass:d})=>(r??(r=p=>new d(p)),Sq(e,async({getState:p,analyticsClientMiddleware:m,preprocessRequest:g,logger:f})=>{let A=[],R={log:async({state:F})=>{for(let E of A)await E(F)}},C=p(),v=a({getState:p,logger:f,analyticsClientMiddleware:m,preprocessRequest:g,provider:r(p)}),b=await t(v,p());R.description=b?.description,A.push(async F=>{Cq(F)&&await vq(b,r,F,f,v.coveoAnalyticsClient)});let{emit:x}=wi(C);return A.push(async F=>{if(Aq(F)&&o&&n){let E=n(F);await qq(x,o,E)}}),R}));async function vq(e,t,r,n,o){t(()=>r);let a=await e?.log({searchUID:t(()=>r).getSearchUID()});n.info({client:o,response:a},"Analytics response")}var pS=e=>r=>(n,o)=>Promise.resolve({description:{actionCause:e},log:async a=>{r(n,o)}}),Te=vm(e=>uS({...e,provider:e.provider||new Ur(e.getState)}),e=>e,Ur),z$=vm(_h,pS("caseAssist"),Ti),X=e=>vm(tS,pS(e),ki),Oe=(e,t)=>{let r=a=>a+(t.pagination?.firstResult??0),n=-1,o=t.search?.results;return n=gS(e,o),n<0&&(n=Eq(e,o)),n<0&&(n=0),bq(e,r(n),t)};var Cc=(e,t)=>({sourceName:xq(e),documentPosition:1,documentTitle:e.title,documentUri:e.uri,documentUrl:e.clickUri,queryPipeline:t.pipeline||Di()});function xq(e){let t=e.source;return W(t)?"unknown":t}var Ac=e=>({contentIdKey:"permanentid",contentIdValue:e.permanentid||""});function bq(e,t,r){let n=e.raw.collection;return{collectionName:typeof n=="string"?n:"default",documentAuthor:Iq(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:Pq(e),queryPipeline:r.pipeline||Di()}}var De=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),mS={urihash:new V,sourcetype:new V,permanentid:new V},Rc={uniqueId:Q,raw:new _({values:mS}),title:Q,uri:Q,clickUri:Q,rankingModifier:new V({required:!1,emptyAllowed:!0})};function Fq(e){return Object.assign({},...Object.keys(mS).map(t=>({[t]:e[t]})))}function wq(e){return Object.assign({},...Object.keys(Rc).map(t=>({[t]:e[t]})),{raw:Fq(e.raw)})}function Iq(e){let t=e.raw.author;return W(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function Pq(e){let t=e.raw.source;return W(t)?"unknown":t}var et=e=>new ge(Rc).validate(wq(e));function Eq(e,t){for(let[r,n]of t.entries()){let o=Sc(n);if(gS(e,o)!==-1)return r}return-1}function gS(e,t=[]){return t.findIndex(({uniqueId:r})=>r===e.uniqueId)}async function qq(e,t,r){await e(t,r)}var Qt=(e,t)=>{let r=De(e),n=Oe(e,t);return{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:n.documentTitle,author:n.documentAuthor,url:n.documentUri}};l();s();u();c();var xm=e=>P(e,{evt:Q,type:Fe}),fS=e=>Te("analytics/generic/search",t=>{xm(e);let{evt:r,meta:n}=e;return t.makeSearchEvent(r,n)}),yS=e=>Te("analytics/generic/click",(t,r)=>(et(e.result),xm(e),t.makeClickEvent(e.evt,Oe(e.result,r),De(e.result),e.meta))),hS=e=>Te("analytics/generic/custom",t=>(xm(e),t.makeCustomEventWithType(e.evt,e.type,e.meta)));var SS=()=>({actionCause:"interfaceLoad"}),Ho=()=>({actionCause:"interfaceChange"});l();s();u();c();var bm=()=>Fe,CS=()=>Q,zo=w("configuration/updateBasicConfiguration",e=>P(e,{accessToken:Fe,environment:new V({required:!1,constrainTo:["prod","hipaa","stg","dev"]}),organizationId:Fe})),Wo=w("configuration/updateSearchConfiguration",e=>P(e,{proxyBaseUrl:new V({required:!1,url:!0}),pipeline:new V({required:!1,emptyAllowed:!0}),searchHub:Fe,timezone:Fe,locale:Fe,authenticationProviders:new ee({required:!1,each:Q})})),Tq={enabled:new oe({default:!0}),originContext:bm(),originLevel2:bm(),originLevel3:bm(),proxyBaseUrl:new V({required:!1,url:!0}),runtimeEnvironment:new Pe,anonymous:new oe({default:!1}),deviceId:Fe,userDisplayName:Fe,documentLocation:Fe,trackingId:gy,analyticsMode:new V({constrainTo:["legacy","next"],required:!1,default:"next"}),source:new _({options:{required:!1},values:Sh.reduce((e,t)=>(e[t]=my,e),{})})},vc=w("configuration/updateAnalyticsConfiguration",e=>P(e,Tq)),xc=w("configuration/analytics/disable"),bc=w("configuration/analytics/enable"),AS=w("configuration/analytics/originlevel2",e=>P(e,{originLevel2:CS()})),RS=w("configuration/analytics/originlevel3",e=>P(e,{originLevel3:CS()})),vS=w("knowledge/setAgentId",e=>P(e,new V({required:!0})));l();s();u();c();var Fc=w("insightConfiguration/set",e=>P(e,{insightId:Q}));l();s();u();c();l();s();u();c();var xS=()=>({insightId:""});var wc=ae(xS(),e=>{e.addCase(Fc,(t,r)=>{t.insightId=r.payload.insightId})});l();s();u();c();l();s();u();c();var Ic=w("searchHub/set",e=>P(e,new V({required:!0,emptyAllowed:!0})));var Kt=re("insight/interface/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:o}})=>{let a=t(),d=await o.getInterface(kq(a));return Ee(d)?n(d.error):(r(Ic(d.success.searchHub)),{response:d.success})}),kq=e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:be(e.configuration.organizationId,e.configuration.environment),insightId:e.insightConfiguration.insightId});l();s();u();c();l();s();u();c();var bS=()=>({loading:!1,config:void 0});var Br=ae(bS(),e=>{e.addCase(Kt.pending,t=>{t.loading=!0,t.error=void 0}).addCase(Kt.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(Kt.fulfilled,(t,r)=>{t.loading=!1,t.error=void 0;let{searchHub:n,...o}=r.payload.response;t.config=o})});l();s();u();c();l();s();u();c();l();s();u();c();var ji=jt(Pc(),1),qS=jt(FS(),1);l();s();u();c();var Ec=jt(Pc(),1),IS=jt(wS(),1);Ec.default.extend(IS.default);var PS="YYYY/MM/DD@HH:mm:ss",Oq="1401-01-01";function Yo(e,t){let r=(0,Ec.default)(e,t);return!r.isValid()&&!t?(0,Ec.default)(e,PS):r}function qc(e){return e.format(PS)}function ES(e,t){let r=Yo(e,t);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",o=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?o:n}`)}Tm(r)}function Tm(e){if(e.isBefore(Oq))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}ji.default.extend(qS.default);var TS=["past","now","next"],kS=["minute","hour","day","week","month","quarter","year"],Dq=e=>{let t=e==="now";return{amount:new Y({required:!t,min:1}),unit:new V({required:!t,constrainTo:kS}),period:new V({required:!0,constrainTo:TS})}};function Tc(e){if(typeof e=="string"&&!Gr(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?km(e):e;new ge(Dq(t.period)).validate(t);let r=DS(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);Tm(r)}function OS(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function DS(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,ji.default)().subtract(r,n);case"next":return(0,ji.default)().add(r,n);case"now":return(0,ji.default)()}}function Vi(e){return qc(DS(km(e)))}function jS(e){return e.toLocaleLowerCase().split("-")}function Gr(e){let[t,r,n]=jS(e);if(t==="now")return!0;if(!TS.includes(t)||!kS.includes(n))return!1;let o=parseInt(r);return!(Number.isNaN(o)||o<=0)}function VS(e){return!!e&&typeof e=="object"&&"period"in e}function km(e){let[t,r,n]=jS(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function NS(e){return Tc(e),km(e)}l();s();u();c();function MS(e){return e.type==="dateRange"}function QS(e){return`start${e}`}function LS(e){return`end${e}`}var Om=()=>({dateFacetValueMap:{}});function jq(e,t,r){let n=e.start,o=e.end;return Gr(n)&&(n=Vi(n),r.dateFacetValueMap[t][QS(n)]=e.start),Gr(o)&&(o=Vi(o),r.dateFacetValueMap[t][LS(o)]=e.end),{...e,start:n,end:o}}function Dm(e,t){if(MS(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(o=>jq(o,r,t))}}return e}function Jt(e){let t=Om();return{request:{...e,facets:e.facets?.map(n=>Dm(n,t))},mappings:t}}function Vq(e,t,r){return{...e,start:r.dateFacetValueMap[t][QS(e.start)]||e.start,end:r.dateFacetValueMap[t][LS(e.end)]||e.end}}function Nq(e,t){return e.facetId in t.dateFacetValueMap}function Mq(e,t){return Nq(e,t)?{...e,values:e.values.map(r=>Vq(r,e.facetId,t))}:e}function Lt(e,t){return"success"in e?{success:{...e.success,facets:e.success.facets?.map(n=>Mq(n,t))}}:e}l();s();u();c();l();s();u();c();var $r=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await Lh(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...Rm()&&{pageId:Rm()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:Mr(e)}}}};var _S=async(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:be(t.configuration.organizationId,t.configuration.environment),count:t.querySuggest[e].count,insightId:t.insightConfiguration.insightId,q:t.querySet?.[e],timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?rt.getInstance().getHistory():[],...t.insightCaseContext?.caseContext&&{context:t.insightCaseContext.caseContext},...t.configuration.analytics.enabled&&{...t.configuration.analytics.enabled&&await $r(t.configuration.analytics)}});l();s();u();c();l();s();u();c();var kc=w("didYouMean/enable"),US=w("didYouMean/disable"),Oc=w("didYouMean/automaticCorrections/disable"),BS=w("didYouMean/automaticCorrections/enable"),yt=w("didYouMean/correction",e=>P(e,Q)),Ni=w("didYouMean/automaticCorrections/mode",e=>P(e,new V({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0})));l();s();u();c();var Qq=w("history/undo"),Lq=w("history/redo"),He=w("history/snapshot"),bW=re("history/back",async(e,{dispatch:t})=>{t(Qq()),await t(je())}),FW=re("history/forward",async(e,{dispatch:t})=>{t(Lq()),await t(je())}),je=re("history/change",async(e,{getState:t})=>t().history.present);l();s();u();c();l();s();u();c();var br=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});l();s();u();c();function Dc(){return{contextValues:{}}}l();s();u();c();var jc=()=>!1;l();s();u();c();function GS(){return{contextValues:{}}}l();s();u();c();function jm(){return{enabled:!0,tabs:{}}}function Vc(){return{freezeFacetOrder:!1,facets:{}}}l();s();u();c();function $S(){return[]}l();s();u();c();function Xt(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}l();s();u();c();function Nc(){return{}}l();s();u();c();function HS(){return{}}l();s();u();c();function Mc(){return{}}function ze(e){return{context:e.context||Dc(),dictionaryFieldContext:e.dictionaryFieldContext||GS(),facetSet:e.facetSet||Lo(),numericFacetSet:e.numericFacetSet||Qo(),dateFacetSet:e.dateFacetSet||Mo(),categoryFacetSet:e.categoryFacetSet||No(),automaticFacetSet:e.automaticFacetSet??pc(),pagination:e.pagination||Xt(),query:e.query||Me(),tabSet:e.tabSet||Mc(),advancedSearchQueries:e.advancedSearchQueries||br(),staticFilterSet:e.staticFilterSet||HS(),querySet:e.querySet||Nc(),sortCriteria:e.sortCriteria||xt(),pipeline:e.pipeline||Di(),searchHub:e.searchHub||Do(),facetOptions:e.facetOptions||Vc(),facetOrder:e.facetOrder??$S(),debug:e.debug??jc()}}l();s();u();c();var ct=w("query/updateQuery",e=>P(e,{q:new V,enableQuerySyntax:new oe}));l();s();u();c();l();s();u();c();var zS=()=>({caseContext:{},caseId:"",caseNumber:""}),K=e=>({caseContext:e?.caseContext||{},caseId:e?.caseId,caseNumber:e?.caseNumber});var Vm=()=>X("browseResults")("search/logFetchMoreResults",(e,t)=>e.logFetchMoreResults(K(t.insightCaseContext))),Ko=e=>X("query")("search/queryError",(t,r)=>t.logQueryError({...K(r.insightCaseContext),query:r.query?.q||Me().q,aq:"",cq:"",dq:"",errorType:e.type,errorMessage:e.message})),WS=(e,t)=>X("contextChanged")("analytics/contextChanged",(r,n)=>{let o={caseId:e,caseNumber:t,caseContext:n.insightCaseContext?.caseContext||{}};r.logContextChanged(o)}),Qc=()=>X("interfaceLoad")("analytics/interface/load",(e,t)=>e.logInterfaceLoad(K(t.insightCaseContext))),Hr=()=>X("interfaceChange")("analytics/interface/change",(e,t)=>{e.logInterfaceChange({...K(t.insightCaseContext),interfaceChangeTo:t.configuration.analytics.originLevel2})});l();s();u();c();l();s();u();c();function Zt(e){return Object.values(e).map(t=>t.request)}l();s();u();c();var YS=async(e,t)=>{let r=Uq(e),n=_q(e);return Jt({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??be(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,insightId:e.insightConfiguration.insightId,...e.configuration.analytics.enabled&&await $r(e.configuration.analytics,t),q:e.query?.q,...n.length&&{facets:n},caseContext:e.insightCaseContext?.caseContext,...r&&{cq:r},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...e.sortCriteria&&{sortCriteria:e.sortCriteria},tab:e.configuration.analytics.originLevel2,...e.folding&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.context&&{context:e.context.contextValues},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})},qt=async(e,t)=>{let r=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0,n=await YS(e,t);return{...n,request:{...n.request,...e.pagination&&{firstResult:e.pagination.firstResult,numberOfResults:r()}}}},KS=async(e,t)=>{let r=await YS(e);return{...r,request:{...r.request,filterFieldRange:100,cq:`@${e?.folding?.fields.collection}="${t}"`}}},Lc=async(e,t)=>{let r=await qt(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.pagination?.numberOfResults??0)},r},_c=async(e,t)=>{let r=await qt(e,t);return r.request={...r.request,numberOfResults:0},r};function _q(e){return Zt({...e.facetSet,...e.numericFacetSet,...e.dateFacetSet,...e.categoryFacetSet})}function Uq(e){return Object.values(e.tabSet||{}).find(n=>n.isActive)?.expression.trim()||""}var Un=class{constructor(t,r=n=>{this.dispatch(ct({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({request:t,mappings:r},n){let o=Date.now(),a=Lt(await this.extra.apiClient.query(t,n),r),d=Date.now()-o,p=this.getState().query?.q||"";return{response:a,duration:d,queryExecuted:p,requestExecuted:t}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Ee(t.response)?(this.dispatch(Ko(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:a}=r.didYouMean,{results:d,queryCorrections:p,queryCorrection:m}=n;if(!o||!a)return null;let g=d.length===0&&p&&p.length!==0,f=!W(m)&&!W(m.correctedQuery);if(!g&&!f)return null;let R=g?await this.processLegacyDidYouMeanAutoCorrection(t):this.processNextDidYouMeanAutoCorrection(t);return this.dispatch(He(ze(this.getState()))),R}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(o);return Ee(a.response)?(this.dispatch(Ko(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(He(ze(this.getState()))),{...a,response:{...a.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r})}processNextDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o}}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=this.getState(),n=await this.fetchFromAPI(await qt(r));return this.dispatch(yt(t)),n}processSuccessResponse(t){return this.dispatch(He(ze(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(t){return Vr(t.response)?t.response.success:null}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}};l();s();u();c();l();s();u();c();l();s();u();c();var JS=()=>X("didYouMeanClick")("analytics/didyoumean/click",(e,t)=>e.logDidYouMeanClick(K(t.insightCaseContext))),Nm=()=>X("didYouMeanAutomatic")("analytics/didyoumean/automatic",(e,t)=>e.logDidYouMeanAutomatic(K(t.insightCaseContext)));var Bn=class{constructor(t,r=n=>{this.dispatch(ct({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({request:t,mappings:r},n){let o=Date.now(),a=Lt(await this.extra.apiClient.query(t,n),r),d=Date.now()-o,p=this.getState().query?.q||"";return{response:a,duration:d,queryExecuted:p,requestExecuted:t}}async process(t,r){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t,r)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Ee(t.response)?(this.dispatch(Ko(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t,r){let n=this.getState(),o=this.getSuccessResponse(t);if(!o||!n.didYouMean)return null;let{enableDidYouMean:a,automaticallyCorrectQuery:d}=n.didYouMean,{results:p,queryCorrections:m,queryCorrection:g}=o;if(!a||!d)return null;let f=p.length===0&&m&&m.length!==0,A=!W(g)&&!W(g.correctedQuery);if(!f&&!A)return null;let C=f?await this.processLegacyDidYouMeanAutoCorrection(t):this.processNextDidYouMeanAutoCorrection(t);return this.logOriginalAnalyticsQueryBeforeAutoCorrection(t,r),this.dispatch(He(ze(this.getState()))),C}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(o);return Ee(a.response)?(this.dispatch(Ko(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(He(ze(this.getState()))),{...a,response:{...a.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r,analyticsAction:Nm()})}processNextDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o,analyticsAction:Nm()}}async automaticallyRetryQueryWithCorrection(t){this.dispatch(ct({q:t}));let r=this.getState(),n=await this.fetchFromAPI(await qt(r));return this.dispatch(yt(t)),n}processSuccessResponse(t){return this.dispatch(He(ze(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return Vr(t.response)?t.response.success:null}getStateAfterResponse(t,r,n,o){return{...n,query:{q:t,enableQuerySyntax:n.query?.enableQuerySyntax??Me().enableQuerySyntax},search:{...$e(),duration:r,response:o,results:o.results}}}logOriginalAnalyticsQueryBeforeAutoCorrection(t,r){let n=this.getState(),o=Lt(t.response,r.mappings).success;this.analyticsAction?.()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,n,o),this.extra)}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get analyticsAction(){return this.config.analyticsAction}};async function Mm(e,t,r){Mi(e);let n=new Bn({...t,analyticsAction:r}),{analyticsClientMiddleware:o,preprocessRequest:a,logger:d}=t.extra,{description:p}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:o,preprocessRequest:a,logger:d}),m=await qt(e,p),g=await n.fetchFromAPI(m);return await n.process(g,m)}async function Qm(e,t,r){Mi(e);let n=new Bn({...t,analyticsAction:r}),{analyticsClientMiddleware:o,preprocessRequest:a,logger:d}=t.extra,{description:p}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:o,preprocessRequest:a,logger:d}),m=await qt(e,p),g=await n.fetchFromAPI(m);return await n.process(g,m)}async function Lm(e,t){let r=new Bn({...t,analyticsAction:Vm}),{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=t.extra,{description:d}=await Vm().prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),p=await Lc(e,d),m=await r.fetchFromAPI(p);return await r.process(m,p)}async function _m(e,t,r){let n=new Bn({...t,analyticsAction:r}),{analyticsClientMiddleware:o,preprocessRequest:a,logger:d}=t.extra,{description:p}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:o,preprocessRequest:a,logger:d}),m=await _c(e,p),g=await n.fetchFromAPI(m);return await n.process(g,m)}var XS=re("search/executeSearch",async(e,t)=>{let r=t.getState();return await Mm(r,t,e)}),ZS=re("search/fetchPage",async(e,t)=>{let r=t.getState();return await Qm(r,t,e)}),eC=re("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await Lm(r,t)}),tC=re("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await _m(r,t,e)});var rC=async(e,t,{request:r,mappings:n},o)=>{let a=Date.now(),d=Lt(await e.query(r,o),n),p=Date.now()-a,m=t.query?.q||"";return{response:d,duration:p,queryExecuted:m,requestExecuted:r}},ue=re("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Mm(r,t,e.legacy);Mi(r);let n=new Un({...t}),o=e.next?Um(e.next):void 0,a=await qt(r,o),d=await n.fetchFromAPI(a);return await n.process(d)}),Uc=re("search/fetchPage",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Qm(r,t,e.legacy);Mi(r);let n=new Un({...t}),o=e.next?Um(e.next):void 0,a=await qt(r,o),d=await n.fetchFromAPI(a);return await n.process(d)}),Bc=re("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Lm(r,t);let n=new Un({...t}),o=Um({actionCause:"browseResults"}),a=await Lc(r,o),d=await n.fetchFromAPI(a);return await n.process(d)}),Jo=re("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return _m(r,t,e.legacy);let n=new Un({...t}),o=await _c(r),a=await n.fetchFromAPI(o);return await n.process(a)}),Gc=re("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:o}})=>{o(e,{id:Q});let a=e.id,d=await _S(a,t()),p=await n.querySuggest(d);return Ee(p)?r(p.error):{id:a,q:d.q,...p.success}}),Mi=e=>{e.configuration.analytics.enabled&&rt.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},Um=e=>({actionCause:e.actionCause,type:e.actionCause});l();s();u();c();l();s();u();c();l();s();u();c();var ht=w("breadcrumb/deselectAll"),$c=w("breadcrumb/deselectAllNonBreadcrumbs");l();s();u();c();var Xo=w("facet/updateFacetAutoSelection",e=>P(e,{allow:new oe({required:!0})}));l();s();u();c();l();s();u();c();var Hc=class extends Ur{constructor(r){super(r);this.getState=r}get activeInstantResultQuery(){let r=this.getState().instantResults;for(let n in r)for(let o in r[n].cache)if(r[n].cache[o].isActive)return r[n].q;return null}get activeInstantResultCache(){let r=this.getState().instantResults;for(let n in r)for(let o in r[n].cache)if(r[n].cache[o].isActive)return r[n].cache[o];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??Me().q}get responseTime(){return this.activeInstantResultCache?.duration??$e().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??$e().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var nC=()=>Te("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new Hc(e)),oC=()=>({actionCause:"searchboxAsYouType"});l();s();u();c();var Bm={id:Q},Bq={...Bm,q:qe},I3=w("instantResults/register",e=>P(e,Bm)),zc=w("instantResults/updateQuery",e=>P(e,Bq)),P3=w("instantResults/clearExpired",e=>P(e,Bm));l();s();u();c();var Wc=new Y({required:!0,min:0}),Yc=w("pagination/registerNumberOfResults",e=>P(e,Wc)),Kc=w("pagination/updateNumberOfResults",e=>P(e,Wc)),Jc=w("pagination/registerPage",e=>P(e,Wc)),zr=w("pagination/updatePage",e=>P(e,Wc)),Xc=w("pagination/nextPage"),Zc=w("pagination/previousPage");l();s();u();c();l();s();u();c();var Gn=(e,t,r)=>({analytics:{clientId:t.clientId,clientTimestamp:new Date().toISOString(),documentReferrer:t.referrer,documentLocation:t.location,originContext:e.originContext,...r&&{actionCause:r.actionCause},...r&&{customData:r.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.deviceId&&{deviceId:e.deviceId},...e.trackingId&&{trackingId:e.trackingId},capture:t.capture??t.clientId!=="",source:Mr(e)}});var Zo=(e,t,r)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??pt(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:t.referrer,timezone:e.configuration.search.timezone,...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&Gn(e.configuration.analytics,t,r),...e.excerptLength&&!W(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});l();s();u();c();l();s();u();c();var Wr=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??pt(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{actionsHistory:rt.getInstance().getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await $r(e.configuration.analytics,t),...e.excerptLength&&!W(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});l();s();u();c();var Gm=()=>Te("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),Yr=e=>Te("search/queryError",(t,r)=>t.makeQueryError({query:r.query?.q||Me().q,aq:r.advancedSearchQueries?.aq||br().aq,cq:r.advancedSearchQueries?.cq||br().cq,dq:r.advancedSearchQueries?.dq||br().dq,errorType:e.type,errorMessage:e.message}));l();s();u();c();l();s();u();c();var $m=()=>Te("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic()),aC=()=>({actionCause:"didYouMeanClick"}),iC=()=>({actionCause:"didYouMeanAutomatic"});l();s();u();c();var E4=new _({values:{undoneQuery:qe},options:{required:!0}}),sC=()=>Te("analytics/trigger/query",(e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null);l();s();u();c();var ea=w("trigger/query/ignore",e=>P(e,new V({emptyAllowed:!0,required:!0}))),ta=w("trigger/query/modification",e=>P(e,new _({values:{originalQuery:Fe,modification:Fe}})));l();s();u();c();l();s();u();c();function Qi(e,t){let r={};e.forEach(a=>{r[a.facetId]=a});let n=[];t.forEach(a=>{a in r&&(n.push(r[a]),delete r[a])});let o=Object.values(r);return[...n,...o]}function cC(e){return Zt(e).map(t=>{let n=t.currentValues.some(({state:o})=>o!=="idle");return t.generateAutomaticRanges&&!n?{...t,currentValues:[]}:t})}var Hm={alphanumericDescending:{type:"alphanumeric",order:"descending"},alphanumericNaturalDescending:{type:"alphanumericNatural",order:"descending"}};function Gq(e){return Zt(e).map(t=>{let r=Hm[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function $q(e){return[...Gq(e.facetSet??{}),...cC(e.numericFacetSet??{}),...cC(e.dateFacetSet??{}),...Zt(e.categoryFacetSet??{})]}function Hq(e){return $q(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function eu(e){return Qi(Hq(e),e.facetOrder??[])}var Kr=async(e,t)=>{let r=Yq(e),n=eu(e),o=zq(e),a=await Wr(e,t),d=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Jt({...a,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:d(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:o}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function zq(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(Wq).filter(r=>r.currentValues.length>0):void 0}function Wq(e){let{field:t,label:r,values:n}=e,o=n.filter(a=>a.state==="selected");return{field:t,label:r,currentValues:o}}function Yq(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(a=>a.isActive)?.expression.trim()||"",o=Kq(e);return[t,n,...o].filter(a=>!!a).join(" AND ")}function Kq(e){return Object.values(e.staticFilterSet||{}).map(r=>{let n=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),o=n.map(a=>a.expression).join(" OR ");return n.length>1?`(${o})`:o})}var Jr=class{constructor(t,r=n=>{this.dispatch(ct({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let o=Date.now(),a=Lt(await this.extra.apiClient.search(r,n),t),d=Date.now()-o,p=this.getState().query?.q||"";return{response:a,duration:d,queryExecuted:p,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Ee(t.response)?(this.dispatch(Yr(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:a}=r.didYouMean,{results:d,queryCorrections:p,queryCorrection:m}=n;if(!o||!a)return null;let g=d.length===0&&p&&p.length!==0,f=!W(m)&&!W(m.correctedQuery);if(!g&&!f)return null;let R=g?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(He(ze(this.getState()))),R}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(o);return Ee(a.response)?(this.dispatch(Yr(a.response.error)),this.rejectWithValue(a.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(t),this.dispatch(He(ze(this.getState()))),{...a,response:{...a.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r,analyticsAction:$m()})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o,analyticsAction:$m()}}logOriginalAnalyticsQueryBeforeAutoCorrection(t){let r=this.getState(),n=this.getSuccessResponse(t);this.analyticsAction?.()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,n),this.extra)}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(p=>p.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(ea("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let a=this.getCurrentQuery(),d=await this.automaticallyRetryQueryWithTriggerModification(n);return Ee(d.response)?(this.dispatch(Yr(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(He(ze(this.getState()))),{...d,response:{...d.response.success},automaticallyCorrected:!1,originalQuery:a,analyticsAction:sC()})}getStateAfterResponse(t,r,n,o){return{...n,query:{q:t,enableQuerySyntax:n.query?.enableQuerySyntax??Me().enableQuerySyntax},search:{...$e(),duration:r,response:o,results:o.results}}}processSuccessResponse(t){return this.dispatch(He(ze(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return Vr(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await Kr(this.getState()),{origin:"mainSearch"});return this.dispatch(yt(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(ta({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Kr(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var D6=re("search/executeSearch",async(e,t)=>{let r=t.getState();return await tu(r,t,e)}),j6=re("search/fetchPage",async(e,t)=>{let r=t.getState();return await Wm(r,t,e)}),V6=re("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await Ym(t,r)}),N6=re("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await eT(t,e,r)}),M6=re("search/fetchInstantResults",async(e,t)=>zm(e,t)),Jq=async(e,t)=>{let r=await Kr(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},Xq=async(e,t,r)=>{let n=await Wr(e);return Jt({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},Zq=async(e,t)=>{let r=await Kr(e,t);return r.request.numberOfResults=0,r},uC=e=>{e.configuration.analytics.enabled&&rt.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})};async function zm(e,t){P(e,{id:Q,q:Q,maxResultsPerQuery:new Y({required:!0,min:1}),cacheTimeout:new Y});let{q:r,maxResultsPerQuery:n}=e,o=t.getState(),a=new Jr({...t,analyticsAction:nC()},g=>{t.dispatch(zc({q:g,id:e.id}))}),d=await Xq(o,r,n),p=await a.fetchFromAPI(d,{origin:"instantResults",disableAbortWarning:!0}),m=await a.process(p);return"response"in m?{results:m.response.results,searchUid:m.response.searchUid,analyticsAction:m.analyticsAction,totalCountFiltered:m.response.totalCountFiltered,duration:m.duration}:m}async function Wm(e,t,r){uC(e);let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=t.extra,{description:d}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),p=new Jr({...t,analyticsAction:r}),m=await Kr(e,d),g=await p.fetchFromAPI(m,{origin:"mainSearch"});return await p.process(g)}async function Ym(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:o}=e.extra,{description:a}=await Gm().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:o}),d=new Jr({...e,analyticsAction:Gm()}),p=await Jq(t,a),m=await d.fetchFromAPI(p,{origin:"mainSearch"});return await d.process(m)}async function eT(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=e.extra,{description:d}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),p=new Jr({...e,analyticsAction:t}),m=await Zq(r,d),g=await p.fetchFromAPI(m,{origin:"facetValues"});return await p.process(g)}async function tu(e,t,r){uC(e);let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=t.extra,{description:d}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),p=await Kr(e,d),m=new Jr({...t,analyticsAction:r}),g=await m.fetchFromAPI(p,{origin:"mainSearch"});return await m.process(g)}l();s();u();c();l();s();u();c();l();s();u();c();var lC=ke(e=>e.staticFilterSet,e=>Object.values(e||{}).map(r=>{let n=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),o=n.map(a=>a.expression).join(" OR ");return n.length>1?`(${o})`:o}));var Tt=async(e,t,r)=>{let n=Jm(e),o=tT(e),a=rT(e),d=e.configuration.analytics.analyticsMode==="legacy"?await Wr(e,r):Zo(e,t,r);return Jt({...d,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...n&&{cq:n},...o.length&&{facets:o},...e.pagination&&{numberOfResults:Km(e),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:a}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function Km(e){return e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0}function tT(e){return Qi(oT(e),e.facetOrder??[])}function rT(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(nT).filter(r=>r.currentValues.length>0):void 0}function nT(e){let{field:t,label:r,values:n}=e,o=n.filter(a=>a.state==="selected");return{field:t,label:r,currentValues:o}}function oT(e){return aT(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function aT(e){return[...iT(e.facetSet??{}),...dC(e.numericFacetSet??{}),...dC(e.dateFacetSet??{}),...Zt(e.categoryFacetSet??{})]}function iT(e){return Zt(e).map(t=>{let r=Hm[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function dC(e){return Zt(e).map(t=>{let r=t.currentValues,n=r.some(({state:a})=>a!=="idle"),o=r.some(a=>a.previousState);return t.generateAutomaticRanges&&!n&&!o?{...t,currentValues:[]}:t})}function Jm(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(a=>a.isActive)?.expression.trim()||"",o=lC(e);return[t,n,...o].filter(a=>!!a).join(" AND ")}var Xr=class{constructor(t,r=n=>{this.dispatch(ct({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let o=Date.now(),a=Lt(await this.extra.apiClient.search(r,n),t),d=Date.now()-o,p=this.getState().query?.q||"";return{response:a,duration:d,queryExecuted:p,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Ee(t.response)?(this.dispatch(Yr(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:a}=r.didYouMean,{results:d,queryCorrections:p,queryCorrection:m}=n;if(!o||!a)return null;let g=d.length===0&&p&&p.length!==0,f=!W(m)&&!W(m.correctedQuery);if(!g&&!f)return null;let R=g?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(He(ze(this.getState()))),R}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(o);return Ee(a.response)?(this.dispatch(Yr(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(He(ze(this.getState()))),{...a,response:{...a.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(p=>p.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(ea("")),null;let a=this.getCurrentQuery(),d=await this.automaticallyRetryQueryWithTriggerModification(n);return Ee(d.response)?(this.dispatch(Yr(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(He(ze(this.getState()))),{...d,response:{...d.response.success},automaticallyCorrected:!1,originalQuery:a})}processSuccessResponse(t){return this.dispatch(He(ze(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(t){return Vr(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=this.getState(),{actionCause:n}=iC(),o=await this.fetchFromAPI(await Tt(r,this.extra.navigatorContext,{actionCause:n}),{origin:"mainSearch"});return this.dispatch(yt(t)),o}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(ta({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Tt(this.getState(),this.extra.navigatorContext),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};var ra=re("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;P(e,{q:new V,enableQuerySyntax:new oe,clearFilters:new oe}),e.clearFilters&&(r(ht()),r($c())),r(Xo({allow:!0})),r(ct({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(zr(1))}),pC=w("search/updateSearchAction"),he=re("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return tu(r,t,e.legacy);mC(r);let n=e.next?gC(e.next):void 0,o=await Tt(r,t.extra.navigatorContext,n),a=new Xr({...t,analyticsAction:n??{}}),d=await a.fetchFromAPI(o,{origin:"mainSearch"});return await a.process(d)}),tr=re("search/fetchPage",async(e,t)=>{let r=t.getState();if(mC(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Wm(r,t,e.legacy);let n=new Xr({...t,analyticsAction:e.next}),o=await Tt(r,t.extra.navigatorContext,e.next),a=await n.fetchFromAPI(o,{origin:"mainSearch"});return await n.process(a)}),Zr=re("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Ym(t,r);let n=dS("browseResults",t.getState),o=new Xr({...t,analyticsAction:n}),a=await sT(r,t.extra.navigatorContext,n),d=await o.fetchFromAPI(a,{origin:"mainSearch"});return await o.process(d)}),na=re("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return tu(r,t,e.legacy);let n=new Xr({...t,analyticsAction:{}}),o=await uT(r,t.extra.navigatorContext),a=await n.fetchFromAPI(o,{origin:"facetValues"});return await n.process(a)}),_8=re("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return zm(e,t);P(e,{id:Q,q:Q,maxResultsPerQuery:new Y({required:!0,min:1}),cacheTimeout:new Y});let{q:n,maxResultsPerQuery:o}=e,a=gC(oC()),d=await cT(r,t.extra.navigatorContext,n,o,a),p=new Xr({...t,analyticsAction:a},f=>{t.dispatch(zc({q:f,id:e.id}))}),m=await p.fetchFromAPI(d,{origin:"instantResults",disableAbortWarning:!0}),g=await p.process(m);return"response"in g?{results:g.response.results,searchUid:g.response.searchUid,totalCountFiltered:g.response.totalCountFiltered,duration:g.duration}:g}),sT=async(e,t,r)=>{let n=await Tt(e,t,r);return n.request={...n.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},n},cT=async(e,t,r,n,o)=>{let a=Zo(e,t,o);return Jt({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:n,q:r})},uT=async(e,t,r)=>{let n=await Tt(e,t,r);return n.request.numberOfResults=0,n},mC=e=>{e.configuration.analytics.enabled&&rt.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},gC=e=>({actionCause:e.actionCause,type:e.actionCause});l();s();u();c();l();s();u();c();async function fC(e,t){let{search:r,accessToken:n,organizationId:o}=e.configuration,a=e.query?.q||"";return{url:r.apiBaseUrl??pt(e.configuration.organizationId,e.configuration.environment),accessToken:n,organizationId:o,enableNavigation:!1,q:a,...t,requestedOutputSize:t.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var Li=re("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let o=r(),a=await fC(o,e),d=await t.apiClient.html(a);return Ee(d)?n(d.error):{content:d.success,uniqueId:e.uniqueId}}),ru=w("resultPreview/next"),nu=w("resultPreview/previous"),hC=w("resultPreview/prepare",e=>P(e,{results:new ee({required:!0})})),yC=2048,ou=re("resultPreview/updateContentURL",async(e,{getState:t,extra:r})=>{let n=t(),o=ny(await e.buildResultPreviewRequest(n,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return o?.length>yC&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${yC} characters.`),{contentURL:o}});l();s();u();c();function Xm(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var Zm=e=>{let{content:t,isLoading:r,uniqueId:n,contentURL:o}=Xm();e.content=t,e.isLoading=r,e.uniqueId=n,e.contentURL=o},eg=e=>e.filter(t=>t.hasHtmlVersion).map(t=>t.uniqueId),oa=ae(Xm(),e=>{e.addCase(Li.pending,t=>{t.isLoading=!0}).addCase(Li.fulfilled,(t,r)=>{let{content:n,uniqueId:o}=r.payload;t.position=t.resultsWithPreview.indexOf(o),t.content=n,t.uniqueId=o,t.isLoading=!1}).addCase(he.fulfilled,(t,r)=>{Zm(t),t.resultsWithPreview=eg(r.payload.response.results)}).addCase(Zr.fulfilled,(t,r)=>{Zm(t),t.resultsWithPreview=t.resultsWithPreview.concat(eg(r.payload.response.results))}).addCase(tr.fulfilled,Zm).addCase(hC,(t,r)=>{t.resultsWithPreview=eg(r.payload.results)}).addCase(ru,t=>{if(t.isLoading)return;let r=t.position+1;r>t.resultsWithPreview.length-1&&(r=0),t.position=r}).addCase(nu,t=>{if(t.isLoading)return;let r=t.position-1;r<0&&(r=t.resultsWithPreview.length-1),t.position=r}).addCase(ou.fulfilled,(t,r)=>{t.contentURL=r.payload.contentURL})});l();s();u();c();l();s();u();c();var en=(e,t)=>{let r=e;return W(r[t])?W(e.raw[t])?null:e.raw[t]:r[t]},lT=e=>t=>e.every(r=>!W(en(t,r))),dT=e=>t=>e.every(r=>W(en(t,r))),pT=(e,t)=>r=>{let n=SC(e,r);return t.some(o=>n.some(a=>`${a}`.toLowerCase()===o.toLowerCase()))},mT=(e,t)=>r=>{let n=SC(e,r);return t.every(o=>n.every(a=>`${a}`.toLowerCase()!==o.toLowerCase()))},SC=(e,t)=>{let r=en(t,e);return Fs(r)?r:[r]},CC={getResultProperty:en,fieldsMustBeDefined:lT,fieldsMustNotBeDefined:dT,fieldMustMatch:pT,fieldMustNotMatch:mT};function au(e){return e.search.response.searchUid!==""}function AC(e,t,r){return e.search.results.find(n=>en(n,t)===r)}var tg=ke(e=>e.search,e=>e?.searchAction?.actionCause||"");l();s();u();c();l();s();u();c();var aa=w("app/setError");function rg(e,t){let r=t.payload??null;r&&(e.response=$e().response,e.results=[],e.questionAnswer=Ro()),e.error=r,e.isLoading=!1}function ng(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function gT(e,t){ng(e,t),e.results=t.payload.response.results.map(r=>({...r,searchUid:t.payload.response.searchUid})),e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function RC(e,t){e.isLoading=!0,e.searchAction=t.meta.arg.next,e.requestId=t.meta.requestId}function fT(e,t){e.isLoading=!0,e.searchAction={actionCause:"browseResults"},e.requestId=t.meta.requestId}var me=ae($e(),e=>{e.addCase(he.rejected,(t,r)=>rg(t,r)),e.addCase(Zr.rejected,(t,r)=>rg(t,r)),e.addCase(tr.rejected,(t,r)=>rg(t,r)),e.addCase(he.fulfilled,(t,r)=>{gT(t,r)}),e.addCase(Zr.fulfilled,(t,r)=>{ng(t,r),t.results=[...t.results,...r.payload.response.results.map(n=>({...n,searchUid:r.payload.response.searchUid}))]}),e.addCase(tr.fulfilled,(t,r)=>{ng(t,r),t.results=[...r.payload.response.results.map(n=>({...n,searchUid:r.payload.response.searchUid}))]}),e.addCase(na.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(he.pending,RC),e.addCase(Zr.pending,fT),e.addCase(tr.pending,RC),e.addCase(pC,(t,r)=>{t.searchAction=r.payload}),e.addCase(aa,(t,r)=>{t.error=r.payload,t.isLoading=!1})});l();s();u();c();var iu=ae(Do(),e=>{e.addCase(Ic,(t,r)=>r.payload).addCase(je.fulfilled,(t,r)=>r.payload?.searchHub??t).addCase(Wo,(t,r)=>r.payload.searchHub||t)});l();s();u();c();l();s();u();c();l();s();u();c();function vC(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}var xC=$t;function jC(e,t){if(e===t||!(xC(e)&&xC(t)||Array.isArray(e)&&Array.isArray(t)))return t;let r=Object.keys(t),n=Object.keys(e),o=r.length===n.length,a=Array.isArray(t)?[]:{};for(let d of r)a[d]=jC(e[d],t[d]),o&&(o=e[d]===a[d]);return o?e:a}function ia(e){let t=0;for(let r in e)t++;return t}var bC=e=>[].concat(...e);function yT(e){return new RegExp("(^|:)//").test(e)}function hT(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function uu(e){return e!=null}function ST(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var CT=e=>e.replace(/\/$/,""),AT=e=>e.replace(/^\//,"");function RT(e,t){if(!e)return t;if(!t)return e;if(yT(t))return t;let r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=CT(e),t=AT(t),`${e}${r}${t}`}function vT(e,t,r){return e.has(t)?e.get(t):e.set(t,r).get(t)}var FC=(...e)=>h(...e),xT=e=>e.status>=200&&e.status<=299,bT=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function wC(e){if(!$t(e))return e;let t={...e};for(let[r,n]of Object.entries(t))n===void 0&&delete t[r];return t}function VC({baseUrl:e,prepareHeaders:t=A=>A,fetchFn:r=FC,paramsSerializer:n,isJsonContentType:o=bT,jsonContentType:a="application/json",jsonReplacer:d,timeout:p,responseHandler:m,validateStatus:g,...f}={}){return typeof h>"u"&&r===FC&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(R,C,v)=>{let{getState:b,extra:x,endpoint:F,forced:E,type:I}=C,q,{url:M,headers:D=new S(f.headers),params:k=void 0,responseHandler:O=m??"json",validateStatus:j=g??xT,timeout:L=p,...z}=typeof R=="string"?{url:R}:R,$,B=C.signal;L&&($=new i.AbortController,C.signal.addEventListener("abort",$.abort),B=$.signal);let U={...f,signal:B,...z};D=new S(wC(D)),U.headers=await t(D,{getState:b,arg:R,extra:x,endpoint:F,forced:E,type:I,extraOptions:v})||D;let H=de=>typeof de=="object"&&($t(de)||Array.isArray(de)||typeof de.toJSON=="function");if(!U.headers.has("content-type")&&H(U.body)&&U.headers.set("content-type",a),H(U.body)&&o(U.headers)&&(U.body=JSON.stringify(U.body,d)),k){let de=~M.indexOf("?")?"&":"?",Se=n?n(k):new URLSearchParams(wC(k));M+=de+Se}M=RT(e,M);let G=new Request(M,U);q={request:new Request(M,U)};let Z,ie=!1,fe=$&&setTimeout(()=>{ie=!0,$.abort()},L);try{Z=await r(G)}catch(de){return{error:{status:ie?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(de)},meta:q}}finally{fe&&clearTimeout(fe),$?.signal.removeEventListener("abort",$.abort)}let Ae=Z.clone();q.response=Ae;let pe,ye="";try{let de;if(await Promise.all([A(Z,O).then(Se=>pe=Se,Se=>de=Se),Ae.text().then(Se=>ye=Se,()=>{})]),de)throw de}catch(de){return{error:{status:"PARSING_ERROR",originalStatus:Z.status,data:ye,error:String(de)},meta:q}}return j(Z,pe)?{data:pe,meta:q}:{error:{status:Z.status,data:pe},meta:q}};async function A(R,C){if(typeof C=="function")return C(R);if(C==="content-type"&&(C=o(R.headers)?"json":"text"),C==="json"){let v=await R.text();return v.length?JSON.parse(v):null}return R.text()}}var sa=class{constructor(e,t=void 0){this.value=e,this.meta=t}};async function FT(e=0,t=5){let r=Math.min(e,t),n=~~((Math.random()+.4)*(300<<r));await new Promise(o=>setTimeout(a=>o(a),n))}function wT(e,t){throw Object.assign(new sa({error:e,meta:t}),{throwImmediately:!0})}var IC={},IT=(e,t)=>async(r,n,o)=>{let a=[5,(t||IC).maxRetries,(o||IC).maxRetries].filter(f=>f!==void 0),[d]=a.slice(-1),m={maxRetries:d,backoff:FT,retryCondition:(f,A,{attempt:R})=>R<=d,...t,...o},g=0;for(;;)try{let f=await e(r,n,o);if(f.error)throw new sa(f);return f}catch(f){if(g++,f.throwImmediately){if(f instanceof sa)return f.value;throw f}if(f instanceof sa&&!m.retryCondition(f.value.error,r,{attempt:g,baseQueryApi:n,extraOptions:o}))return f.value;await m.backoff(g,m.maxRetries)}},lu=Object.assign(IT,{fail:wT}),sg=w("__rtkq/focused"),NC=w("__rtkq/unfocused"),cg=w("__rtkq/online"),MC=w("__rtkq/offline");function ug(e){return e.type==="query"}function PT(e){return e.type==="mutation"}function lg(e){return e.type==="infinitequery"}function dg(e,t,r,n,o,a){return ET(e)?e(t,r,n,o).filter(uu).map(og).map(a):Array.isArray(e)?e.map(og).map(a):[]}function ET(e){return typeof e=="function"}function og(e){return typeof e=="string"?{type:e}:e}function qT(e,t){return e.catch(t)}var Ui=Symbol("forceQueryFn"),ag=e=>typeof e[Ui]=="function";function TT({serializeQueryArgs:e,queryThunk:t,infiniteQueryThunk:r,mutationThunk:n,api:o,context:a}){let d=new Map,p=new Map,{unsubscribeQueryResult:m,removeMutationResult:g,updateSubscriptionOptions:f}=o.internalActions;return{buildInitiateQuery:F,buildInitiateInfiniteQuery:E,buildInitiateMutation:I,getRunningQueryThunk:A,getRunningMutationThunk:R,getRunningQueriesThunk:C,getRunningMutationsThunk:v};function A(q,M){return D=>{let k=a.endpointDefinitions[q],O=e({queryArgs:M,endpointDefinition:k,endpointName:q});return d.get(D)?.[O]}}function R(q,M){return D=>p.get(D)?.[M]}function C(){return q=>Object.values(d.get(q)||{}).filter(uu)}function v(){return q=>Object.values(p.get(q)||{}).filter(uu)}function b(q){}function x(q,M){let D=(k,{subscribe:O=!0,forceRefetch:j,subscriptionOptions:L,[Ui]:z,...$}={})=>(B,U)=>{let H=e({queryArgs:k,endpointDefinition:M,endpointName:q}),G,J={...$,type:"query",subscribe:O,forceRefetch:j,subscriptionOptions:L,endpointName:q,originalArgs:k,queryCacheKey:H,[Ui]:z};if(ug(M))G=t(J);else{let{direction:xe,initialPageParam:Ne}=$;G=r({...J,direction:xe,initialPageParam:Ne})}let Z=o.endpoints[q].select(k),ie=B(G),fe=Z(U());let{requestId:Ae,abort:pe}=ie,ye=fe.requestId!==Ae,de=d.get(B)?.[H],Se=()=>Z(U()),Qe=Object.assign(z?ie.then(Se):ye&&!de?Promise.resolve(fe):Promise.all([de,ie]).then(Se),{arg:k,requestId:Ae,subscriptionOptions:L,queryCacheKey:H,abort:pe,async unwrap(){let xe=await Qe;if(xe.isError)throw xe.error;return xe.data},refetch:()=>B(D(k,{subscribe:!1,forceRefetch:!0})),unsubscribe(){O&&B(m({queryCacheKey:H,requestId:Ae}))},updateSubscriptionOptions(xe){Qe.subscriptionOptions=xe,B(f({endpointName:q,requestId:Ae,queryCacheKey:H,options:xe}))}});if(!de&&!ye&&!z){let xe=vT(d,B,{});xe[H]=Qe,Qe.then(()=>{delete xe[H],ia(xe)||d.delete(B)})}return Qe};return D}function F(q,M){return x(q,M)}function E(q,M){return x(q,M)}function I(q){return(M,{track:D=!0,fixedCacheKey:k}={})=>(O,j)=>{let L=n({type:"mutation",endpointName:q,originalArgs:M,track:D,fixedCacheKey:k}),z=O(L);let{requestId:$,abort:B,unwrap:U}=z,H=qT(z.unwrap().then(ie=>({data:ie})),ie=>({error:ie})),G=()=>{O(g({requestId:$,fixedCacheKey:k}))},J=Object.assign(H,{arg:z.arg,requestId:$,abort:B,unwrap:U,reset:G}),Z=p.get(O)||{};return p.set(O,Z),Z[$]=J,J.then(()=>{delete Z[$],ia(Z)||p.delete(O)}),k&&(Z[k]=J,J.then(()=>{Z[k]===J&&(delete Z[k],ia(Z)||p.delete(O))})),J}}}function kT(e){return e}var su=(e={})=>({...e,[vi]:!0});function OT({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:n,api:o,assertTagType:a,selectors:d}){let p=(O,j,L,z)=>($,B)=>{let U=r[O],H=n({queryArgs:j,endpointDefinition:U,endpointName:O});if($(o.internalActions.queryResultPatched({queryCacheKey:H,patches:L})),!z)return;let G=o.endpoints[O].select(j)(B()),J=dg(U.providesTags,G.data,void 0,j,{},a);$(o.internalActions.updateProvidedBy({queryCacheKey:H,providedTags:J}))};function m(O,j,L=0){let z=[j,...O];return L&&z.length>L?z.slice(0,-1):z}function g(O,j,L=0){let z=[...O,j];return L&&z.length>L?z.slice(1):z}let f=(O,j,L,z=!0)=>($,B)=>{let H=o.endpoints[O].select(j)(B()),G={patches:[],inversePatches:[],undo:()=>$(o.util.patchQueryData(O,j,G.inversePatches,z))};if(H.status==="uninitialized")return G;let J;if("data"in H)if(gt(H.data)){let[Z,ie,fe]=_s(H.data,L);G.patches.push(...ie),G.inversePatches.push(...fe),J=Z}else J=L(H.data),G.patches.push({op:"replace",path:[],value:J}),G.inversePatches.push({op:"replace",path:[],value:H.data});return G.patches.length===0||$(o.util.patchQueryData(O,j,G.patches,z)),G},A=(O,j,L)=>z=>z(o.endpoints[O].initiate(j,{subscribe:!1,forceRefetch:!0,[Ui]:()=>({data:L})})),R=(O,j)=>O.query&&O[j]?O[j]:kT,C=async(O,{signal:j,abort:L,rejectWithValue:z,fulfillWithValue:$,dispatch:B,getState:U,extra:H})=>{let G=r[O.endpointName];try{let J=R(G,"transformResponse"),Z={signal:j,abort:L,dispatch:B,getState:U,extra:H,endpoint:O.endpointName,type:O.type,forced:O.type==="query"?v(O,U()):void 0,queryCacheKey:O.type==="query"?O.queryCacheKey:void 0},ie=O.type==="query"?O[Ui]:void 0,fe,Ae=async(ye,de,Se,Qe)=>{if(de==null&&ye.pages.length)return Promise.resolve({data:ye});let xe={queryArg:O.originalArgs,pageParam:de},Ne=await pe(xe),Ue=Qe?m:g;return{data:{pages:Ue(ye.pages,Ne.data,Se),pageParams:Ue(ye.pageParams,de,Se)}}};async function pe(ye){let de,{extraOptions:Se}=G;if(ie?de=ie():G.query?de=await t(G.query(ye),Z,Se):de=await G.queryFn(ye,Z,Se,xe=>t(xe,Z,Se)),typeof process<"u",de.error)throw new sa(de.error,de.meta);let Qe=await J(de.data,de.meta,ye);return{...de,data:Qe}}if(O.type==="query"&&"infiniteQueryOptions"in G){let{infiniteQueryOptions:ye}=G,{maxPages:de=1/0}=ye,Se,Qe={pages:[],pageParams:[]},xe=d.selectQueryEntry(U(),O.queryCacheKey)?.data,Ue=v(O,U())&&!O.direction||!xe?Qe:xe;if("direction"in O&&O.direction&&Ue.pages.length){let dt=O.direction==="backward",Or=(dt?QC:ig)(ye,Ue);Se=await Ae(Ue,Or,de,dt)}else{let{initialPageParam:dt=ye.initialPageParam}=O,Ft=xe?.pageParams??[],Or=Ft[0]??dt,uo=Ft.length;Se=await Ae(Ue,Or,de),ie&&(Se={data:Se.data.pages[0]});for(let lo=1;lo<uo;lo++){let ri=ig(ye,Se.data);Se=await Ae(Se.data,ri,de)}}fe=Se}else fe=await pe(O.originalArgs);return $(fe.data,su({fulfilledTimeStamp:Date.now(),baseQueryMeta:fe.meta}))}catch(J){let Z=J;if(Z instanceof sa){let ie=R(G,"transformErrorResponse");try{return z(await ie(Z.value,Z.meta,O.originalArgs),su({baseQueryMeta:Z.meta}))}catch(fe){Z=fe}}throw typeof process<"u",console.error(Z),Z}};function v(O,j){let L=d.selectQueryEntry(j,O.queryCacheKey),z=d.selectConfig(j).refetchOnMountOrArgChange,$=L?.fulfilledTimeStamp,B=O.forceRefetch??(O.subscribe&&z);return B?B===!0||(Number(new Date)-Number($))/1e3>=B:!1}let b=()=>re(`${e}/executeQuery`,C,{getPendingMeta({arg:j}){let L=r[j.endpointName];return su({startedTimeStamp:Date.now(),...lg(L)?{direction:j.direction}:{}})},condition(j,{getState:L}){let z=L(),$=d.selectQueryEntry(z,j.queryCacheKey),B=$?.fulfilledTimeStamp,U=j.originalArgs,H=$?.originalArgs,G=r[j.endpointName],J=j.direction;return ag(j)?!0:$?.status==="pending"?!1:v(j,z)||ug(G)&&G?.forceRefetch?.({currentArg:U,previousArg:H,endpointState:$,state:z})?!0:!(B&&!J)},dispatchConditionRejection:!0}),x=b(),F=b(),E=re(`${e}/executeMutation`,C,{getPendingMeta(){return su({startedTimeStamp:Date.now()})}}),I=O=>"force"in O,q=O=>"ifOlderThan"in O,M=(O,j,L)=>(z,$)=>{let B=I(L)&&L.force,U=q(L)&&L.ifOlderThan,H=(J=!0)=>{let Z={forceRefetch:J,isPrefetch:!0};return o.endpoints[O].initiate(j,Z)},G=o.endpoints[O].select(j)($());if(B)z(H());else if(U){let J=G?.fulfilledTimeStamp;if(!J){z(H());return}(Number(new Date)-Number(new Date(J)))/1e3>=U&&z(H())}else z(H(!1))};function D(O){return j=>j?.meta?.arg?.endpointName===O}function k(O,j){return{matchPending:Eo(zs(O),D(j)),matchFulfilled:Eo(vr(O),D(j)),matchRejected:Eo(Nn(O),D(j))}}return{queryThunk:x,mutationThunk:E,infiniteQueryThunk:F,prefetch:M,updateQueryData:f,upsertQueryData:A,patchQueryData:p,buildMatchThunkActions:k}}function ig(e,{pages:t,pageParams:r}){let n=t.length-1;return e.getNextPageParam(t[n],t,r[n],r)}function QC(e,{pages:t,pageParams:r}){return e.getPreviousPageParam?.(t[0],t,r[0],r)}function LC(e,t,r,n){return dg(r[e.meta.arg.endpointName][t],vr(e)?e.payload:void 0,bi(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function cu(e,t,r){let n=e[t];n&&r(n)}function Bi(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function PC(e,t,r){let n=e[Bi(t)];n&&r(n)}var _i={};function DT({reducerPath:e,queryThunk:t,mutationThunk:r,serializeQueryArgs:n,context:{endpointDefinitions:o,apiUid:a,extractRehydrationInfo:d,hasRehydrationInfo:p},assertTagType:m,config:g}){let f=w(`${e}/resetApiState`);function A(D,k,O,j){var L;D[L=k.queryCacheKey]??(D[L]={status:"uninitialized",endpointName:k.endpointName}),cu(D,k.queryCacheKey,z=>{z.status="pending",z.requestId=O&&z.requestId?z.requestId:j.requestId,k.originalArgs!==void 0&&(z.originalArgs=k.originalArgs),z.startedTimeStamp=j.startedTimeStamp;let $=o[j.arg.endpointName];lg($)&&"direction"in k&&(z.direction=k.direction)})}function R(D,k,O,j){cu(D,k.arg.queryCacheKey,L=>{if(L.requestId!==k.requestId&&!j)return;let{merge:z}=o[k.arg.endpointName];if(L.status="fulfilled",z)if(L.data!==void 0){let{fulfilledTimeStamp:$,arg:B,baseQueryMeta:U,requestId:H}=k,G=Rr(L.data,J=>z(J,O,{arg:B.originalArgs,baseQueryMeta:U,fulfilledTimeStamp:$,requestId:H}));L.data=G}else L.data=O;else L.data=o[k.arg.endpointName].structuralSharing??!0?jC(Rt(L.data)?Pp(L.data):L.data,O):O;delete L.error,L.fulfilledTimeStamp=k.fulfilledTimeStamp})}let C=Mn({name:`${e}/queries`,initialState:_i,reducers:{removeQueryResult:{reducer(D,{payload:{queryCacheKey:k}}){delete D[k]},prepare:qo()},cacheEntriesUpserted:{reducer(D,k){for(let O of k.payload){let{queryDescription:j,value:L}=O;A(D,j,!0,{arg:j,requestId:k.meta.requestId,startedTimeStamp:k.meta.timestamp}),R(D,{arg:j,requestId:k.meta.requestId,fulfilledTimeStamp:k.meta.timestamp,baseQueryMeta:{}},L,!0)}},prepare:D=>({payload:D.map(j=>{let{endpointName:L,arg:z,value:$}=j,B=o[L];return{queryDescription:{type:"query",endpointName:L,originalArgs:j.arg,queryCacheKey:n({queryArgs:z,endpointDefinition:B,endpointName:L})},value:$}}),meta:{[vi]:!0,requestId:Fi(),timestamp:Date.now()}})},queryResultPatched:{reducer(D,{payload:{queryCacheKey:k,patches:O}}){cu(D,k,j=>{j.data=qp(j.data,O.concat())})},prepare:qo()}},extraReducers(D){D.addCase(t.pending,(k,{meta:O,meta:{arg:j}})=>{let L=ag(j);A(k,j,L,O)}).addCase(t.fulfilled,(k,{meta:O,payload:j})=>{let L=ag(O.arg);R(k,O,j,L)}).addCase(t.rejected,(k,{meta:{condition:O,arg:j,requestId:L},error:z,payload:$})=>{cu(k,j.queryCacheKey,B=>{if(!O){if(B.requestId!==L)return;B.status="rejected",B.error=$??z}})}).addMatcher(p,(k,O)=>{let{queries:j}=d(O);for(let[L,z]of Object.entries(j))(z?.status==="fulfilled"||z?.status==="rejected")&&(k[L]=z)})}}),v=Mn({name:`${e}/mutations`,initialState:_i,reducers:{removeMutationResult:{reducer(D,{payload:k}){let O=Bi(k);O in D&&delete D[O]},prepare:qo()}},extraReducers(D){D.addCase(r.pending,(k,{meta:O,meta:{requestId:j,arg:L,startedTimeStamp:z}})=>{L.track&&(k[Bi(O)]={requestId:j,status:"pending",endpointName:L.endpointName,startedTimeStamp:z})}).addCase(r.fulfilled,(k,{payload:O,meta:j})=>{j.arg.track&&PC(k,j,L=>{L.requestId===j.requestId&&(L.status="fulfilled",L.data=O,L.fulfilledTimeStamp=j.fulfilledTimeStamp)})}).addCase(r.rejected,(k,{payload:O,error:j,meta:L})=>{L.arg.track&&PC(k,L,z=>{z.requestId===L.requestId&&(z.status="rejected",z.error=O??j)})}).addMatcher(p,(k,O)=>{let{mutations:j}=d(O);for(let[L,z]of Object.entries(j))(z?.status==="fulfilled"||z?.status==="rejected")&&L!==z?.requestId&&(k[L]=z)})}}),b=Mn({name:`${e}/invalidation`,initialState:_i,reducers:{updateProvidedBy:{reducer(D,k){var L,z;let{queryCacheKey:O,providedTags:j}=k.payload;for(let $ of Object.values(D))for(let B of Object.values($)){let U=B.indexOf(O);U!==-1&&B.splice(U,1)}for(let{type:$,id:B}of j){let U=(L=D[$]??(D[$]={}))[z=B||"__internal_without_id"]??(L[z]=[]);U.includes(O)||U.push(O)}},prepare:qo()}},extraReducers(D){D.addCase(C.actions.removeQueryResult,(k,{payload:{queryCacheKey:O}})=>{for(let j of Object.values(k))for(let L of Object.values(j)){let z=L.indexOf(O);z!==-1&&L.splice(z,1)}}).addMatcher(p,(k,O)=>{var L,z;let{provided:j}=d(O);for(let[$,B]of Object.entries(j))for(let[U,H]of Object.entries(B)){let G=(L=k[$]??(k[$]={}))[z=U||"__internal_without_id"]??(L[z]=[]);for(let J of H)G.includes(J)||G.push(J)}}).addMatcher(Ht(vr(t),bi(t)),(k,O)=>{let j=LC(O,"providesTags",o,m),{queryCacheKey:L}=O.meta.arg;b.caseReducers.updateProvidedBy(k,b.actions.updateProvidedBy({queryCacheKey:L,providedTags:j}))})}}),x=Mn({name:`${e}/subscriptions`,initialState:_i,reducers:{updateSubscriptionOptions(D,k){},unsubscribeQueryResult(D,k){},internal_getRTKQSubscriptions(){}}}),F=Mn({name:`${e}/internalSubscriptions`,initialState:_i,reducers:{subscriptionsUpdated:{reducer(D,k){return qp(D,k.payload)},prepare:qo()}}}),E=Mn({name:`${e}/config`,initialState:{online:ST(),focused:hT(),middlewareRegistered:!1,...g},reducers:{middlewareRegistered(D,{payload:k}){D.middlewareRegistered=D.middlewareRegistered==="conflict"||a!==k?"conflict":!0}},extraReducers:D=>{D.addCase(cg,k=>{k.online=!0}).addCase(MC,k=>{k.online=!1}).addCase(sg,k=>{k.focused=!0}).addCase(NC,k=>{k.focused=!1}).addMatcher(p,k=>({...k}))}}),I=vo({queries:C.reducer,mutations:v.reducer,provided:b.reducer,subscriptions:F.reducer,config:E.reducer}),q=(D,k)=>I(f.match(k)?void 0:D,k),M={...E.actions,...C.actions,...x.actions,...F.actions,...v.actions,...b.actions,resetApiState:f};return{reducer:q,actions:M}}var $n=Symbol.for("RTKQ/skipToken"),_C={status:"uninitialized"},EC=Rr(_C,()=>{}),qC=Rr(_C,()=>{});function jT({serializeQueryArgs:e,reducerPath:t,createSelector:r}){let n=I=>EC,o=I=>qC;return{buildQuerySelector:R,buildInfiniteQuerySelector:C,buildMutationSelector:v,selectInvalidatedBy:b,selectCachedArgsForQuery:x,selectApiState:d,selectQueries:p,selectMutations:g,selectQueryEntry:m,selectConfig:f};function a(I){return{...I,...vC(I.status)}}function d(I){return I[t]}function p(I){return d(I)?.queries}function m(I,q){return p(I)?.[q]}function g(I){return d(I)?.mutations}function f(I){return d(I)?.config}function A(I,q,M){return D=>{if(D===$n)return r(n,M);let k=e({queryArgs:D,endpointDefinition:q,endpointName:I});return r(j=>m(j,k)??EC,M)}}function R(I,q){return A(I,q,a)}function C(I,q){let{infiniteQueryOptions:M}=q;function D(k){let O={...k,...vC(k.status)},{isLoading:j,isError:L,direction:z}=O,$=z==="forward",B=z==="backward";return{...O,hasNextPage:F(M,O.data),hasPreviousPage:E(M,O.data),isFetchingNextPage:j&&$,isFetchingPreviousPage:j&&B,isFetchNextPageError:L&&$,isFetchPreviousPageError:L&&B}}return A(I,q,D)}function v(){return I=>{let q;return typeof I=="object"?q=Bi(I)??$n:q=I,r(q===$n?o:k=>d(k)?.mutations?.[q]??qC,a)}}function b(I,q){let M=I[t],D=new Set;for(let k of q.filter(uu).map(og)){let O=M.provided[k.type];if(!O)continue;let j=(k.id!==void 0?O[k.id]:bC(Object.values(O)))??[];for(let L of j)D.add(L)}return bC(Array.from(D.values()).map(k=>{let O=M.queries[k];return O?[{queryCacheKey:k,endpointName:O.endpointName,originalArgs:O.originalArgs}]:[]}))}function x(I,q){return Object.values(p(I)).filter(M=>M?.endpointName===q&&M.status!=="uninitialized").map(M=>M.originalArgs)}function F(I,q){return q?ig(I,q)!=null:!1}function E(I,q){return!q||!I.getPreviousPageParam?!1:QC(I,q)!=null}}var TC=WeakMap?new WeakMap:void 0,kC=({endpointName:e,queryArgs:t})=>{let r="",n=TC?.get(t);if(typeof n=="string")r=n;else{let o=JSON.stringify(t,(a,d)=>(d=typeof d=="bigint"?{$bigint:d.toString()}:d,d=$t(d)?Object.keys(d).sort().reduce((p,m)=>(p[m]=d[m],p),{}):d,d));$t(t)&&TC?.set(t,o),r=o}return`${e}(${r})`};function VT(...e){return function(r){let n=Io(g=>r.extractRehydrationInfo?.(g,{reducerPath:r.reducerPath??"api"})),o={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...r,extractRehydrationInfo:n,serializeQueryArgs(g){let f=kC;if("serializeQueryArgs"in g.endpointDefinition){let A=g.endpointDefinition.serializeQueryArgs;f=R=>{let C=A(R);return typeof C=="string"?C:kC({...R,queryArgs:C})}}else r.serializeQueryArgs&&(f=r.serializeQueryArgs);return f(g)},tagTypes:[...r.tagTypes||[]]},a={endpointDefinitions:{},batch(g){g()},apiUid:Fi(),extractRehydrationInfo:n,hasRehydrationInfo:Io(g=>n(g)!=null)},d={injectEndpoints:m,enhanceEndpoints({addTagTypes:g,endpoints:f}){if(g)for(let A of g)o.tagTypes.includes(A)||o.tagTypes.push(A);if(f)for(let[A,R]of Object.entries(f))typeof R=="function"?R(a.endpointDefinitions[A]):Object.assign(a.endpointDefinitions[A]||{},R);return d}},p=e.map(g=>g.init(d,o,a));function m(g){let f=g.endpoints({query:A=>({...A,type:"query"}),mutation:A=>({...A,type:"mutation"}),infiniteQuery:A=>({...A,type:"infinitequery"})});for(let[A,R]of Object.entries(f)){if(g.overrideExisting!==!0&&A in a.endpointDefinitions){if(g.overrideExisting==="throw")throw new Error(st(39));typeof process<"u";continue}typeof process<"u",a.endpointDefinitions[A]=R;for(let C of p)C.injectEndpoint(A,R)}return d}return d.injectEndpoints({endpoints:r.endpoints})}}function Fr(e,...t){return Object.assign(e,...t)}var NT=({api:e,queryThunk:t,internalState:r})=>{let n=`${e.reducerPath}/subscriptions`,o=null,a=null,{updateSubscriptionOptions:d,unsubscribeQueryResult:p}=e.internalActions,m=(C,v)=>{var x,F;if(d.match(v)){let{queryCacheKey:E,requestId:I,options:q}=v.payload;return C?.[E]?.[I]&&(C[E][I]=q),!0}if(p.match(v)){let{queryCacheKey:E,requestId:I}=v.payload;return C[E]&&delete C[E][I],!0}if(e.internalActions.removeQueryResult.match(v))return delete C[v.payload.queryCacheKey],!0;if(t.pending.match(v)){let{meta:{arg:E,requestId:I}}=v,q=C[x=E.queryCacheKey]??(C[x]={});return q[`${I}_running`]={},E.subscribe&&(q[I]=E.subscriptionOptions??q[I]??{}),!0}let b=!1;if(t.fulfilled.match(v)||t.rejected.match(v)){let E=C[v.meta.arg.queryCacheKey]||{},I=`${v.meta.requestId}_running`;b||(b=!!E[I]),delete E[I]}if(t.rejected.match(v)){let{meta:{condition:E,arg:I,requestId:q}}=v;if(E&&I.subscribe){let M=C[F=I.queryCacheKey]??(C[F]={});M[q]=I.subscriptionOptions??M[q]??{},b=!0}}return b},g=()=>r.currentSubscriptions,R={getSubscriptions:g,getSubscriptionCount:C=>{let b=g()[C]??{};return ia(b)},isRequestSubscribed:(C,v)=>!!g()?.[C]?.[v]};return(C,v)=>{if(o||(o=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(C))return o=r.currentSubscriptions={},a=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(C))return[!1,R];let b=m(r.currentSubscriptions,C),x=!0;if(b){a||(a=setTimeout(()=>{let I=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,q]=_s(o,()=>I);v.next(e.internalActions.subscriptionsUpdated(q)),o=I,a=null},500));let F=typeof C.type=="string"&&!!C.type.startsWith(n),E=t.rejected.match(C)&&C.meta.condition&&!!C.meta.arg.subscribe;x=!F&&!E}return[x,!1]}};function MT(e){for(let t in e)return!1;return!0}var QT=2147483647/1e3-1,LT=({reducerPath:e,api:t,queryThunk:r,context:n,internalState:o,selectors:{selectQueryEntry:a,selectConfig:d}})=>{let{removeQueryResult:p,unsubscribeQueryResult:m,cacheEntriesUpserted:g}=t.internalActions,f=Ht(m.match,r.fulfilled,r.rejected,g.match);function A(x){let F=o.currentSubscriptions[x];return!!F&&!MT(F)}let R={},C=(x,F,E)=>{let I=F.getState(),q=d(I);if(f(x)){let M;if(g.match(x))M=x.payload.map(D=>D.queryDescription.queryCacheKey);else{let{queryCacheKey:D}=m.match(x)?x.payload:x.meta.arg;M=[D]}v(M,F,q)}if(t.util.resetApiState.match(x))for(let[M,D]of Object.entries(R))D&&clearTimeout(D),delete R[M];if(n.hasRehydrationInfo(x)){let{queries:M}=n.extractRehydrationInfo(x);v(Object.keys(M),F,q)}};function v(x,F,E){let I=F.getState();for(let q of x){let M=a(I,q);b(q,M?.endpointName,F,E)}}function b(x,F,E,I){let M=n.endpointDefinitions[F]?.keepUnusedDataFor??I.keepUnusedDataFor;if(M===1/0)return;let D=Math.max(0,Math.min(M,QT));if(!A(x)){let k=R[x];k&&clearTimeout(k),R[x]=setTimeout(()=>{A(x)||E.dispatch(p({queryCacheKey:x})),delete R[x]},D*1e3)}}return C},OC=new Error("Promise never resolved before cacheEntryRemoved."),_T=({api:e,reducerPath:t,context:r,queryThunk:n,mutationThunk:o,internalState:a,selectors:{selectQueryEntry:d,selectApiState:p}})=>{let m=Ws(n),g=Ws(o),f=vr(n,o),A={};function R(F,E,I){let q=A[F];q?.valueResolved&&(q.valueResolved({data:E,meta:I}),delete q.valueResolved)}function C(F){let E=A[F];E&&(delete A[F],E.cacheEntryRemoved())}let v=(F,E,I)=>{let q=b(F);function M(D,k,O,j){let L=d(I,k),z=d(E.getState(),k);!L&&z&&x(D,j,k,E,O)}if(n.pending.match(F))M(F.meta.arg.endpointName,q,F.meta.requestId,F.meta.arg.originalArgs);else if(e.internalActions.cacheEntriesUpserted.match(F))for(let{queryDescription:D,value:k}of F.payload){let{endpointName:O,originalArgs:j,queryCacheKey:L}=D;M(O,L,F.meta.requestId,j),R(L,k,{})}else if(o.pending.match(F))E.getState()[t].mutations[q]&&x(F.meta.arg.endpointName,F.meta.arg.originalArgs,q,E,F.meta.requestId);else if(f(F))R(q,F.payload,F.meta.baseQueryMeta);else if(e.internalActions.removeQueryResult.match(F)||e.internalActions.removeMutationResult.match(F))C(q);else if(e.util.resetApiState.match(F))for(let D of Object.keys(A))C(D)};function b(F){return m(F)?F.meta.arg.queryCacheKey:g(F)?F.meta.arg.fixedCacheKey??F.meta.requestId:e.internalActions.removeQueryResult.match(F)?F.payload.queryCacheKey:e.internalActions.removeMutationResult.match(F)?Bi(F.payload):""}function x(F,E,I,q,M){let D=r.endpointDefinitions[F],k=D?.onCacheEntryAdded;if(!k)return;let O={},j=new Promise(H=>{O.cacheEntryRemoved=H}),L=Promise.race([new Promise(H=>{O.valueResolved=H}),j.then(()=>{throw OC})]);L.catch(()=>{}),A[I]=O;let z=e.endpoints[F].select(D.type==="query"?E:I),$=q.dispatch((H,G,J)=>J),B={...q,getCacheEntry:()=>z(q.getState()),requestId:M,extra:$,updateCachedData:D.type==="query"?H=>q.dispatch(e.util.updateQueryData(F,E,H)):void 0,cacheDataLoaded:L,cacheEntryRemoved:j},U=k(E,B);Promise.resolve(U).catch(H=>{if(H!==OC)throw H})}return v},UT=({api:e,context:{apiUid:t},reducerPath:r})=>(n,o)=>{e.util.resetApiState.match(n)&&o.dispatch(e.internalActions.middlewareRegistered(t)),typeof process<"u"},BT=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:n,queryThunk:o,api:a,assertTagType:d,refetchQuery:p,internalState:m})=>{let{removeQueryResult:g}=a.internalActions,f=Ht(vr(n),bi(n)),A=Ht(vr(n,o),Nn(n,o)),R=[],C=(x,F)=>{f(x)?b(LC(x,"invalidatesTags",r,d),F):A(x)?b([],F):a.util.invalidateTags.match(x)&&b(dg(x.payload,void 0,void 0,void 0,void 0,d),F)};function v(x){let{queries:F,mutations:E}=x;for(let I of[F,E])for(let q in I)if(I[q]?.status==="pending")return!0;return!1}function b(x,F){let E=F.getState(),I=E[e];if(R.push(...x),I.config.invalidationBehavior==="delayed"&&v(I))return;let q=R;if(R=[],q.length===0)return;let M=a.util.selectInvalidatedBy(E,q);t.batch(()=>{let D=Array.from(M.values());for(let{queryCacheKey:k}of D){let O=I.queries[k],j=m.currentSubscriptions[k]??{};O&&(ia(j)===0?F.dispatch(g({queryCacheKey:k})):O.status!=="uninitialized"&&F.dispatch(p(O)))}})}return C},GT=({reducerPath:e,queryThunk:t,api:r,refetchQuery:n,internalState:o})=>{let a={},d=(C,v)=>{(r.internalActions.updateSubscriptionOptions.match(C)||r.internalActions.unsubscribeQueryResult.match(C))&&g(C.payload,v),(t.pending.match(C)||t.rejected.match(C)&&C.meta.condition)&&g(C.meta.arg,v),(t.fulfilled.match(C)||t.rejected.match(C)&&!C.meta.condition)&&m(C.meta.arg,v),r.util.resetApiState.match(C)&&A()};function p(C,v){let x=v.getState()[e].queries[C],F=o.currentSubscriptions[C];if(!(!x||x.status==="uninitialized"))return F}function m({queryCacheKey:C},v){let b=v.getState()[e],x=b.queries[C],F=o.currentSubscriptions[C];if(!x||x.status==="uninitialized")return;let{lowestPollingInterval:E,skipPollingIfUnfocused:I}=R(F);if(!Number.isFinite(E))return;let q=a[C];q?.timeout&&(clearTimeout(q.timeout),q.timeout=void 0);let M=Date.now()+E;a[C]={nextPollTimestamp:M,pollingInterval:E,timeout:setTimeout(()=>{(b.config.focused||!I)&&v.dispatch(n(x)),m({queryCacheKey:C},v)},E)}}function g({queryCacheKey:C},v){let x=v.getState()[e].queries[C],F=o.currentSubscriptions[C];if(!x||x.status==="uninitialized")return;let{lowestPollingInterval:E}=R(F);if(!Number.isFinite(E)){f(C);return}let I=a[C],q=Date.now()+E;(!I||q<I.nextPollTimestamp)&&m({queryCacheKey:C},v)}function f(C){let v=a[C];v?.timeout&&clearTimeout(v.timeout),delete a[C]}function A(){for(let C of Object.keys(a))f(C)}function R(C={}){let v=!1,b=Number.POSITIVE_INFINITY;for(let x in C)C[x].pollingInterval&&(b=Math.min(C[x].pollingInterval,b),v=C[x].skipPollingIfUnfocused||v);return{lowestPollingInterval:b,skipPollingIfUnfocused:v}}return d},$T=({api:e,context:t,queryThunk:r,mutationThunk:n})=>{let o=zs(r,n),a=Nn(r,n),d=vr(r,n),p={};return(g,f)=>{if(o(g)){let{requestId:A,arg:{endpointName:R,originalArgs:C}}=g.meta,v=t.endpointDefinitions[R],b=v?.onQueryStarted;if(b){let x={},F=new Promise((M,D)=>{x.resolve=M,x.reject=D});F.catch(()=>{}),p[A]=x;let E=e.endpoints[R].select(v.type==="query"?C:A),I=f.dispatch((M,D,k)=>k),q={...f,getCacheEntry:()=>E(f.getState()),requestId:A,extra:I,updateCachedData:v.type==="query"?M=>f.dispatch(e.util.updateQueryData(R,C,M)):void 0,queryFulfilled:F};b(C,q)}}else if(d(g)){let{requestId:A,baseQueryMeta:R}=g.meta;p[A]?.resolve({data:g.payload,meta:R}),delete p[A]}else if(a(g)){let{requestId:A,rejectedWithValue:R,baseQueryMeta:C}=g.meta;p[A]?.reject({error:g.payload??g.error,isUnhandledError:!R,meta:C}),delete p[A]}}},HT=({reducerPath:e,context:t,api:r,refetchQuery:n,internalState:o})=>{let{removeQueryResult:a}=r.internalActions,d=(m,g)=>{sg.match(m)&&p(g,"refetchOnFocus"),cg.match(m)&&p(g,"refetchOnReconnect")};function p(m,g){let f=m.getState()[e],A=f.queries,R=o.currentSubscriptions;t.batch(()=>{for(let C of Object.keys(R)){let v=A[C],b=R[C];if(!b||!v)continue;(Object.values(b).some(F=>F[g]===!0)||Object.values(b).every(F=>F[g]===void 0)&&f.config[g])&&(ia(b)===0?m.dispatch(a({queryCacheKey:C})):v.status!=="uninitialized"&&m.dispatch(n(v)))}})}return d};function zT(e){let{reducerPath:t,queryThunk:r,api:n,context:o}=e,{apiUid:a}=o,d={invalidateTags:w(`${t}/invalidateTags`)},p=A=>A.type.startsWith(`${t}/`),m=[UT,LT,BT,GT,_T,$T];return{middleware:A=>{let R=!1,v={...e,internalState:{currentSubscriptions:{}},refetchQuery:f,isThisApiSliceAction:p},b=m.map(E=>E(v)),x=NT(v),F=HT(v);return E=>I=>{if(!bo(I))return E(I);R||(R=!0,A.dispatch(n.internalActions.middlewareRegistered(a)));let q={...A,next:E},M=A.getState(),[D,k]=x(I,q,M),O;if(D?O=E(I):O=k,A.getState()[t]&&(F(I,q,M),p(I)||o.hasRehydrationInfo(I)))for(let j of b)j(I,q,M);return O}},actions:d};function f(A){return e.api.endpoints[A.endpointName].initiate(A.originalArgs,{subscribe:!1,forceRefetch:!0})}}var DC=Symbol(),WT=({createSelector:e=ke}={})=>({name:DC,init(t,{baseQuery:r,tagTypes:n,reducerPath:o,serializeQueryArgs:a,keepUnusedDataFor:d,refetchOnMountOrArgChange:p,refetchOnFocus:m,refetchOnReconnect:g,invalidationBehavior:f},A){Ey();let R=pe=>(typeof process<"u",pe);Object.assign(t,{reducerPath:o,endpoints:{},internalActions:{onOnline:cg,onOffline:MC,onFocus:sg,onFocusLost:NC},util:{}});let C=jT({serializeQueryArgs:a,reducerPath:o,createSelector:e}),{selectInvalidatedBy:v,selectCachedArgsForQuery:b,buildQuerySelector:x,buildInfiniteQuerySelector:F,buildMutationSelector:E}=C;Fr(t.util,{selectInvalidatedBy:v,selectCachedArgsForQuery:b});let{queryThunk:I,infiniteQueryThunk:q,mutationThunk:M,patchQueryData:D,updateQueryData:k,upsertQueryData:O,prefetch:j,buildMatchThunkActions:L}=OT({baseQuery:r,reducerPath:o,context:A,api:t,serializeQueryArgs:a,assertTagType:R,selectors:C}),{reducer:z,actions:$}=DT({context:A,queryThunk:I,infiniteQueryThunk:q,mutationThunk:M,serializeQueryArgs:a,reducerPath:o,assertTagType:R,config:{refetchOnFocus:m,refetchOnReconnect:g,refetchOnMountOrArgChange:p,keepUnusedDataFor:d,reducerPath:o,invalidationBehavior:f}});Fr(t.util,{patchQueryData:D,updateQueryData:k,upsertQueryData:O,prefetch:j,resetApiState:$.resetApiState,upsertQueryEntries:$.cacheEntriesUpserted}),Fr(t.internalActions,$);let{middleware:B,actions:U}=zT({reducerPath:o,context:A,queryThunk:I,mutationThunk:M,infiniteQueryThunk:q,api:t,assertTagType:R,selectors:C});Fr(t.util,U),Fr(t,{reducer:z,middleware:B});let{buildInitiateQuery:H,buildInitiateInfiniteQuery:G,buildInitiateMutation:J,getRunningMutationThunk:Z,getRunningMutationsThunk:ie,getRunningQueriesThunk:fe,getRunningQueryThunk:Ae}=TT({queryThunk:I,mutationThunk:M,infiniteQueryThunk:q,api:t,serializeQueryArgs:a,context:A});return Fr(t.util,{getRunningMutationThunk:Z,getRunningMutationsThunk:ie,getRunningQueryThunk:Ae,getRunningQueriesThunk:fe}),{name:DC,injectEndpoint(pe,ye){var Qe;let Se=(Qe=t.endpoints)[pe]??(Qe[pe]={});ug(ye)&&Fr(Se,{name:pe,select:x(pe,ye),initiate:H(pe,ye)},L(I,pe)),PT(ye)&&Fr(Se,{name:pe,select:E(),initiate:J(pe)},L(M,pe)),lg(ye)&&Fr(Se,{name:pe,select:F(pe,ye),initiate:G(pe,ye)},L(I,pe))}}}}),du=VT(WT());l();s();u();c();var pg=async(e,t,r)=>{let n=t.getState(),{accessToken:o,environment:a,organizationId:d}=n.configuration,p=n.generatedAnswer.answerConfigurationId,m={...e,headers:{...e?.headers||{},Authorization:`Bearer ${o}`}};try{let g=be(d,a);return{data:VC({baseUrl:`${g}/rest/organizations/${d}/answer/v1/configs/${p}`,fetchFn:async A=>{if(A instanceof String)throw new Error("The provided 'request' must be a Request object.");let R=A.url,C={};return["method","headers","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal"].forEach(v=>{C[v]=A[v]}),C.duplex="half",C.body=await A.text(),h(R,C)}})(m,{...t,signal:null},r)}}catch(g){return{error:g}}},pu=du({reducerPath:"answer",baseQuery:lu(pg,{maxRetries:3}),endpoints:()=>({})});var ca=du({reducerPath:"answerGenerationApi",refetchOnMountOrArgChange:!0,baseQuery:lu(pg,{maxRetries:3}),endpoints:()=>({})});l();s();u();c();l();s();u();c();l();s();u();c();var Hn=e=>e.query,UC=e=>e.query?.enableQuerySyntax;var BC=ke(e=>Hn(e)?.q,e=>e.search.requestId,e=>e.generatedAnswer.cannotAnswer,e=>e.configuration.analytics.analyticsMode,e=>e.search.searchAction?.actionCause,(e,t,r,n,o)=>({q:e,requestId:t,cannotAnswer:r,analyticsMode:n,actionCause:o})),mu=ke(e=>e.generatedAnswer?.answerApiQueryParams,e=>e);l();s();u();c();l();s();u();c();l();s();u();c();var gu=()=>({contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!1,isLoading:!0});l();s();u();c();l();s();u();c();l();s();u();c();var GC=(e,t)=>{t&&(e.answerId=t)},$C=(e,t)=>{let{contentFormat:r}=t;e.contentFormat=r,e.isStreaming=!0,e.isLoading=!1},HC=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},zC=(e,t)=>{e.citations=t.citations},WC=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},YC=(e,t)=>{let r=t.errorMessage||"Unknown error occurred";e.error={message:r,code:t.code??500},e.isStreaming=!1,e.isLoading=!1,console.error(`Generated answer error: ${r} (code: ${t.code})`)};var fu={handleOpen:(e,t)=>{let r=e.headers.get("x-answer-id");r&&t(n=>{GC(n,r)})},handleMessage:{"agentInteraction.answerHeader":(e,t)=>{t(r=>{$C(r,{contentFormat:"text/markdown"})})},"generativeengines.messageType":(e,t)=>{e?.payload?.textDelta&&t(r=>{HC(r,e.payload)})},"agentInteraction.citations":(e,t)=>{e?.payload?.citations!==void 0&&t(r=>{zC(r,e.payload)})},"generativeengines.endOfStreamType":(e,t)=>{t(r=>{WC(r,e.payload)})},error:(e,t)=>{e.finishReason==="ERROR"&&t(r=>{YC(r,e)})}}};var yu=(e,t,r,n)=>{let{dispatch:o,updateCachedData:a,getState:d}=r,{configuration:{accessToken:p}}=d();return Co(e,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${p}`,Accept:"text/event-stream","Content-Type":"application/json","Accept-Encoding":"*"},fetch:h,onopen:async m=>{fu.handleOpen(m,a),n.handleOpen(m,o)},onclose:()=>{n.handleClose?.(o)},onerror:m=>{n.handleError(m)},onmessage:m=>{let g=YT(m.data);if(!g)return;fu.handleMessage.error?.(g,a),n.handleMessage.error?.(g,o);let f=g.payloadType;fu.handleMessage[f]?.(g,a),n.handleMessage[f]?.(g,o)}})};function YT(e){if(!e?.length)return null;try{return JSON.parse(e)}catch(t){return console.warn("Failed to parse message",{payload:e,error:t}),null}}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var KC=e=>{let{configuration:t}=e,{organizationId:r,environment:n,knowledge:{agentId:o}}=t,a=be(r,n),d=o?.trim();if(!a||!r||!d)throw new Error("Missing required parameters for follow up endpoint");let p=`/api/preview/organizations/${r}/agents`;return`${a}${p}/${d}/follow-up`};var KT=ca.injectEndpoints({overrideExisting:!0,endpoints:e=>({generateFollowUpAnswer:e.query({queryFn:()=>({data:gu()}),async onQueryStarted(t,{getState:r,updateCachedData:n,dispatch:o}){let{strategyKey:a,...d}=t,p=KC(r());await yu(p,d,{getState:r,updateCachedData:n,dispatch:o},hu[a]?.())}})})}),JC=e=>KT.endpoints.generateFollowUpAnswer.initiate(e);l();s();u();c();var XC=(e,t)=>({conversationId:t.followUpAnswers?.conversationId??"",q:e});var JT=new V({required:!0}),ZC=w("followUpAnswers/setIsEnabled",e=>P(e,new oe({required:!0}))),eA=w("followUpAnswers/setFollowUpAnswersConversationId",e=>P(e,Q)),XT=w("followUpAnswers/createFollowUpAnswer",e=>P(e,{question:Q})),tA=w("followUpAnswers/setActiveFollowUpAnswerId",e=>P(e,Q)),rA=w("followUpAnswers/setFollowUpAnswerContentFormat",e=>P(e,{contentFormat:Su,answerId:Q})),nA=w("followUpAnswers/setFollowUpIsLoading",e=>P(e,{isLoading:new oe({required:!0}),answerId:Q})),oA=w("followUpAnswers/followUpMessageChunkReceived",e=>P(e,{textDelta:JT,answerId:Q})),aA=w("followUpAnswers/followUpCitationsReceived",e=>P(e,{citations:new ee({required:!0,each:new _({values:mg})}),answerId:Q})),iA=w("followUpAnswers/followUpCompleted",e=>P(e,{answerId:Q,cannotAnswer:new oe({required:!1})})),sA=w("followUpAnswers/followUpFailed",e=>P(e,{message:new V,code:new Y({min:0}),answerId:Q})),Y9=w("followUpAnswers/likeFollowUp",e=>P(e,{answerId:Q})),K9=w("followUpAnswers/dislikeFollowUp",e=>P(e,{answerId:Q})),J9=w("followUpAnswers/submitFollowUpFeedback",e=>P(e,{answerId:Q})),cA=w("followUpAnswers/resetFollowUpAnswers"),X9=re("generatedAnswerWithFollowUps/generateFollowUpAnswer",async(e,{getState:t,dispatch:r,extra:{logger:n}})=>{let o=t(),a=Uo(o)?.trim(),d=XC(e,o);if(!a){n.warn("Missing agentId in engine configuration. The generateFollowUpAnswer action requires an agent ID.");return}if(!d.conversationId){n.warn("Missing conversationId when generating a follow-up answer. The generateFollowUpAnswer action requires an existing conversation.");return}r(XT({question:e})),await r(JC({strategyKey:"follow-up-answer",...d}))});var uA=()=>{let e=null;return{handleOpen:(t,r)=>{e=t.headers.get("x-answer-id"),e&&(r(tA(e)),r(nA({answerId:e,isLoading:!0})),r(rA({contentFormat:"text/markdown",answerId:e})))},handleError:t=>{throw t},handleMessage:{"generativeengines.messageType":(t,r)=>{t?.payload?.textDelta&&r(oA({textDelta:t.payload.textDelta,answerId:e}))},"agentInteraction.citations":(t,r)=>{t?.payload?.citations!==void 0&&r(aA({citations:t.payload.citations,answerId:e}))},"generativeengines.endOfStreamType":(t,r)=>{let n=t?.payload?.answerGenerated??!1;r(iA({cannotAnswer:!n,answerId:e}))},error:(t,r)=>{t.finishReason==="ERROR"&&r(sA({answerId:e,message:t.errorMessage,code:t.code}))}}}};l();s();u();c();l();s();u();c();var Gi=e=>{if(e==="yes")return!0;if(e==="no")return!1};var ua=e=>Te({prefix:"analytics/generatedAnswer/streamEnd",__legacy__getBuilder:(t,r)=>{let n=we(r),o=e?!r.generatedAnswer?.answer||!r.generatedAnswer?.answer.length:void 0;return n?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:n,answerGenerated:e,answerTextIsEmpty:o}):null},analyticsType:"Rga.AnswerReceived",analyticsPayloadBuilder:t=>({answerId:we(t)??"",answerGenerated:e??!1})}),la=()=>Te({prefix:"analytics/generatedAnswer/responseLinked",__legacy__getBuilder:()=>null,analyticsType:"Rga.ResponseLinked",analyticsPayloadBuilder:e=>({answerId:we(e)??"",responseId:e.search?.searchResponseId||e.search?.response.searchUid||""})});var lA=()=>({actionCause:"retryGeneratedAnswer"});var dA=()=>({handleOpen:(e,t)=>{let r=e.headers.get("x-answer-id");r&&t(da(r))},handleError:e=>{throw e},handleMessage:{"agentInteraction.answerHeader":(e,t)=>{e?.payload?.conversationId&&t(eA(e.payload.conversationId)),e.payload.followUpEnabled&&t(ZC(e.payload.followUpEnabled)),t(Kn("text/markdown")),t(zn(!0)),t(tn(!1))},"generativeengines.messageType":(e,t)=>{e?.payload?.textDelta&&t(Wn({textDelta:e.payload.textDelta}))},"agentInteraction.citations":(e,t)=>{e?.payload?.citations!==void 0&&t(Yn({citations:e.payload.citations}))},"generativeengines.endOfStreamType":(e,t)=>{let r=e?.payload?.answerGenerated??!1;t(Hi(r)),t(Jn(!r)),t(zn(!1)),t(tn(!1)),t(ua(r)),t(la())},error:(e,t)=>{e.finishReason==="ERROR"&&t($i(e))}}});var hu={"head-answer":dA,"follow-up-answer":uA};l();s();u();c();var pA=e=>{let{configuration:t}=e,{organizationId:r,environment:n,knowledge:{agentId:o}}=t,a=be(r,n),d=o?.trim();if(!a||!r||!d)throw new Error("Missing required parameters for answer endpoint");let p=`/api/preview/organizations/${r}/agents`;return`${a}${p}/${d}/answer`};var ZT=ca.injectEndpoints({overrideExisting:!0,endpoints:e=>({generateAnswer:e.query({queryFn:()=>({data:gu()}),async onQueryStarted(t,{getState:r,updateCachedData:n,dispatch:o}){let{strategyKey:a,...d}=t,p=pA(r());await yu(p,d,{getState:r,updateCachedData:n,dispatch:o},hu[a]?.())}})})}),mA=e=>ZT.endpoints.generateAnswer.initiate(e);l();s();u();c();l();s();u();c();var gA=ke(e=>e.advancedSearchQueries,e=>{if(!e)return{};let{aq:t,cq:r,dq:n,lq:o}=e;return{...t&&{aq:t},...r&&{cq:r},...n&&{dq:n},...o&&{lq:o}}});l();s();u();c();var fA=e=>e.context;l();s();u();c();var gg=e=>e.pipeline;l();s();u();c();var fg=e=>e.searchHub;l();s();u();c();var ut=ke(e=>e,e=>{if(!e)return"";for(let t in e)if(e[t].isActive)return e[t].id;return""}),hX=ke(e=>e,e=>{let t=ut(e);return t&&e?e[t].expression:""});l();s();u();c();var yA=e=>{if(!(!e.dictionaryFieldContext||!Object.keys(e.dictionaryFieldContext.contextValues).length))return e.dictionaryFieldContext.contextValues};l();s();u();c();var hA=e=>e.excerptLength?.length;l();s();u();c();var rr=(e,t)=>e.facetOptions.facets[t]?.enabled??!0,SA=e=>{let{freezeFacetOrder:t}=e.facetOptions??{};return t!==void 0?{freezeFacetOrder:t}:void 0};l();s();u();c();var CA=e=>{if(e.folding)return{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}};l();s();u();c();var AA=e=>e.sortCriteria;var RA=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:be(e.configuration.organizationId,e.configuration.environment),streamId:e.search.extendedResults?.generativeQuestionAnsweringId}),vA=(e,t)=>{let r=Hn(e)?.q,{aq:n,cq:o,dq:a,lq:d}=tk(e),p=fA(e),m=Gn(e.configuration.analytics,t,{actionCause:tg(e)}),g=fg(e),f=gg(e),A=ym(e)??[],R=bA(e),C=ut(e.tabSet)||"default",v=gm(e),b=eS(e),x=t.referrer||"",F=SA(e),E=AA(e),I=ek(e),q=hA(e),M=CA(e),D=yA(e);return{q:r,...n&&{aq:n},...o&&{cq:o},...a&&{dq:a},...d&&{lq:d},...e.query&&{enableQuerySyntax:UC(e)},...p?.contextValues&&{context:p.contextValues},pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:A}},...g?.length&&{searchHub:g},...f?.length&&{pipeline:f},...R.length&&{facets:R},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...e.pagination&&{numberOfResults:Km(e),firstResult:e.pagination.firstResult},tab:C,locale:v,timezone:b,...e.debug!==void 0&&{debug:e.debug},referrer:x,...I,...M??{},...q&&{excerptLength:q},...D&&{dictionaryFieldContext:D},sortCriteria:E,...F&&{facetOptions:F},...m,...e.insightCaseContext?.caseContext&&{caseContext:e.insightCaseContext?.caseContext}}},xA=(e,t)=>{let r=Hn(e)?.q,n=bA(e),o=Gn(e.configuration.analytics,t,{actionCause:tg(e)}),a=gm(e),d=fg(e),p=gg(e),m=ym(e)??[];return{q:r||"",...n.length&&{facets:n},pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:m}},...d?.length&&{searchHub:d},...p?.length&&{pipeline:p},...o,locale:a}},bA=e=>eu(e)?.map(t=>Dm(t,Om())).sort((t,r)=>t.facetId>r.facetId?1:r.facetId>t.facetId?-1:0),ek=e=>({actionsHistory:e.configuration.analytics.enabled?rt.getInstance().getHistory():[]}),tk=e=>{let t=gA(e),r=Jm(e);return{...t,...r&&{cq:r}}};l();s();u();c();var FA=["text/plain","text/markdown"];var pa=new V({required:!0}),wA=new V,ma=new oe({required:!0}),mg={id:pa,title:pa,uri:pa,permanentid:pa,clickUri:wA},Su=new V({required:!0,constrainTo:FA}),ga=w("generatedAnswer/setIsVisible",e=>P(e,ma)),da=w("generatedAnswer/setAnswerId",e=>P(e,Q)),Cu=w("generatedAnswer/setAnswerGenerationMode",e=>P(e,new V({constrainTo:["automatic","manual"],required:!1,default:"automatic"}))),zi=w("generatedAnswer/setIsEnabled",e=>P(e,ma)),Wn=w("generatedAnswer/updateMessage",e=>P(e,{textDelta:pa})),Yn=w("generatedAnswer/updateCitations",e=>P(e,{citations:new ee({required:!0,each:new _({values:mg})})})),$i=w("generatedAnswer/updateError",e=>P(e,{message:wA,code:new Y({min:0})})),St=w("generatedAnswer/resetAnswer"),Au=w("generatedAnswer/like"),Ru=w("generatedAnswer/dislike"),vu=w("generatedAnswer/feedbackModal/open"),Wi=w("generatedAnswer/expand"),xu=w("generatedAnswer/collapse"),bu=w("generatedAnswer/setId",e=>P(e,{id:new V({required:!0})})),Fu=w("generatedAnswer/feedbackModal/close"),fa=w("generatedAnswer/sendFeedback"),tn=w("generatedAnswer/setIsLoading",e=>P(e,ma)),zn=w("generatedAnswer/setIsStreaming",e=>P(e,ma)),Kn=w("generatedAnswer/setAnswerContentFormat",e=>P(e,Su)),wu=w("generatedAnswer/updateResponseFormat",e=>P(e,{contentFormat:new ee({each:Su,default:["text/plain"]})})),Iu=w("knowledge/updateAnswerConfigurationId",e=>P(e,pa)),Pu=w("generatedAnswer/registerFieldsToIncludeInCitations",e=>P(e,Ds)),Hi=w("generatedAnswer/setIsAnswerGenerated",e=>P(e,ma)),Jn=w("generatedAnswer/setCannotAnswer",e=>P(e,ma)),Eu=w("generatedAnswer/setAnswerApiQueryParams",e=>P(e,new _({}))),IA=re("generatedAnswer/streamAnswer",async(e,t)=>{let r=t.getState(),{dispatch:n,extra:o,getState:a}=t,{search:d}=a(),{queryExecuted:p}=d,{setAbortControllerRef:m}=e,g=await RA(r),f=(C,v)=>{switch(C){case"genqa.headerMessageType":{let b=JSON.parse(v);n(Kn(b.contentFormat));break}case"genqa.messageType":n(Wn(JSON.parse(v)));break;case"genqa.citationsType":n(Yn(JSON.parse(v)));break;case"genqa.endOfStreamType":{let b=JSON.parse(v).answerGenerated,x=p.length!==0&&!b;n(Jn(x)),n(zn(!1)),n(Hi(b)),n(ua(b)),n(la());break}default:r.debug&&o.logger.warn(`Unknown payloadType: "${C}"`)}};n(tn(!0));let A=C=>C.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,R=o.streamingClient?.streamGeneratedAnswer(g,{write:C=>{A(g)&&(n(tn(!1)),C.payload&&C.payloadType&&f(C.payloadType,C.payload))},abort:C=>{A(g)&&n($i(C))},close:()=>{A(g)&&n(zn(!1))},resetAnswer:()=>{A(g)&&n(St())}});R?m(R):n(tn(!1))}),qu=re("generatedAnswer/generateAnswer",async(e,{getState:t,dispatch:r,extra:{navigatorContext:n,logger:o}})=>{r(St());let a=t();if(a.generatedAnswer.answerConfigurationId){let d=vA(a,n);r(Eu(d)),await r(Tu(d))}else o.warn("[WARNING] Missing answerConfigurationId in engine configuration. The generateAnswer action requires an answer configuration ID to use CRGA with the Answer API.")}),PA=re("generatedAnswerWithFollowUps/generateHeadAnswer",async(e,{getState:t,dispatch:r,extra:{navigatorContext:n,logger:o}})=>{let a=t();if(!Uo(a)){o.warn("Missing agentId in engine configuration. The generateHeadAnswer action requires an agent ID.");return}r(St());let p=xA(a,n),m={...p,strategyKey:"head-answer"};r(Eu(p)),await r(mA(m))});var rk=(e,t)=>{let{contentFormat:r}=t;e.contentFormat=r,e.isStreaming=!0,e.isLoading=!1},nk=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},ok=(e,t)=>{e.citations=t.citations},ak=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},ik=(e,t)=>{let r=t.errorMessage||"Unknown error occurred";e.error={message:r,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error(`Generated answer error: ${r} (code: ${t.code})`)},sk=(e,t,r)=>{let n=JSON.parse(e.data);n.finishReason==="ERROR"&&n.errorMessage&&ik(t,n);let o=n.payload.length?JSON.parse(n.payload):{};switch(n.payloadType){case"genqa.headerMessageType":o.contentFormat&&(rk(t,o),r(Kn(o.contentFormat)));break;case"genqa.messageType":o.textDelta&&(nk(t,o),r(Wn({textDelta:o.textDelta})));break;case"genqa.citationsType":o.citations&&(ok(t,o),r(Yn({citations:o.citations})));break;case"genqa.endOfStreamType":ak(t,o),r(ua(o.answerGenerated??!1)),r(la());break}},ck=(e,t,r,n)=>{if(!e||!t||!r)throw new Error("Missing required parameters for answer endpoint");let o=`/rest/organizations/${t}`,a=n?`insight/v1/configs/${n}/answer`:"answer/v1/configs";return`${e}${o}/${a}/${r}/generate`},Xn=pu.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),serializeQueryArgs:({endpointName:t,queryArgs:r})=>{let{analytics:n,...o}=r;return`${t}(${JSON.stringify(o)})`},async onCacheEntryAdded(t,{getState:r,cacheDataLoaded:n,updateCachedData:o,dispatch:a}){await n;let{configuration:d,generatedAnswer:p,insightConfiguration:m}=r(),{organizationId:g,environment:f,accessToken:A}=d,R=be(g,f),C=ck(R,g,p.answerConfigurationId,m?.insightId);await Co(C,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${A}`,Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch:h,onopen:async v=>{let b=v.headers.get("x-answer-id");b&&o(x=>{x.answerId=b,a(da(b))})},onmessage:v=>{o(b=>{sk(v,b,a)})},onerror:v=>{throw v},onclose:()=>{o(v=>{a(Jn(!v.generated))})}})}})})}),Tu=e=>Xn.endpoints.getAnswer.initiate(e),yg=e=>{let t=mu(e);return Xn.endpoints.getAnswer.select(t??$n)(e)};l();s();u();c();var EA=ae(Nr,e=>e);l();s();u();c();function uk(e){let t=e.payload?.analyticsAction;return qA(e)&&!W(t)}function qA(e){return"type"in e}var TA=e=>t=>r=>{let n;uk(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let o=t(r);return qA(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),o};l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var ku={q:new V,enableQuerySyntax:new oe,aq:new V,cq:new V,firstResult:new Y({min:0}),numberOfResults:new Y({min:0}),sortCriteria:new V,f:new _,fExcluded:new _,cf:new _,nf:new _,mnf:new _,df:new _,debug:new oe,sf:new _,tab:new V,af:new _};var Ve=w("searchParameters/restore",e=>P(e,ku)),Ou=w("searchParameters/restoreTab",e=>P(e,Q));l();s();u();c();var Du=w("tab/register",e=>{let t=new _({values:{id:Q,expression:qe}});return P(e,t)}),wr=w("tab/updateActiveTab",e=>P(e,Q));l();s();u();c();var ju=jt(Pc(),1),DA=jt(kA(),1),jA=jt(OA(),1);ju.default.extend(jA.default);ju.default.extend(DA.default);var Vu=()=>({organizationId:"",accessToken:"",search:{locale:"en-US",timezone:ju.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",analyticsMode:"next",source:{}},knowledge:{answerConfigurationId:"",agentId:void 0},environment:"prod"});l();s();u();c();var lk=/(^|; )Coveo-Pendragon=([^;]*)/;function Rg(){return typeof window>"u"?!1:lk.exec(document.cookie)?.pop()||null}var Nu=ae(Vu(),e=>e.addCase(zo,(t,r)=>{dk(t,r.payload)}).addCase(Wo,(t,r)=>{pk(t,r.payload)}).addCase(vc,(t,r)=>{mk(t,r.payload)}).addCase(xc,t=>{t.analytics.enabled=!1}).addCase(bc,t=>{t.analytics.enabled=!0}).addCase(AS,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(RS,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(wr,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(Ou,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(Ve,(t,r)=>{W(r.payload.tab)||(t.analytics.originLevel2=r.payload.tab)}).addCase(vS,(t,{payload:r})=>{t.knowledge.agentId=r}));function dk(e,t){W(t.accessToken)||(e.accessToken=t.accessToken),e.environment=t.environment??"prod",W(t.organizationId)||(e.organizationId=t.organizationId)}function pk(e,t){W(t.proxyBaseUrl)||(e.search.apiBaseUrl=t.proxyBaseUrl),W(t.locale)||(e.search.locale=t.locale),W(t.timezone)||(e.search.timezone=t.timezone),W(t.authenticationProviders)||(e.search.authenticationProviders=t.authenticationProviders)}function mk(e,t){W(t.enabled)||(e.analytics.enabled=t.enabled),W(t.originContext)||(e.analytics.originContext=t.originContext),W(t.originLevel2)||(e.analytics.originLevel2=t.originLevel2),W(t.originLevel3)||(e.analytics.originLevel3=t.originLevel3),W(t.proxyBaseUrl)||(e.analytics.apiBaseUrl=t.proxyBaseUrl),W(t.trackingId)||(e.analytics.trackingId=t.trackingId),W(t.analyticsMode)||(e.analytics.analyticsMode=t.analyticsMode),W(t.source)||(e.analytics.source=t.source);try{let r=Rg();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r)}catch{}W(t.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.runtimeEnvironment),W(t.anonymous)||(e.analytics.anonymous=t.anonymous),W(t.deviceId)||(e.analytics.deviceId=t.deviceId),W(t.userDisplayName)||(e.analytics.userDisplayName=t.userDisplayName),W(t.documentLocation)||(e.analytics.documentLocation=t.documentLocation)}var le=Nu;l();s();u();c();function gk(e){return e.instantlyCallable}var VA=()=>e=>t=>e(gk(t)?t():t);l();s();u();c();var vg=oh();vg.startListening({actionCreator:he.pending,effect:async(e,t)=>{let r=t.getState(),n=Hn(r)?.q,o=!n||n.trim()==="";fm(r)&&(t.dispatch(St()),t.dispatch(cA()),!o&&t.dispatch(PA()))}});l();s();u();c();var NA=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let o=n.error;if(n.payload?.ignored||e.error({error:o,action:r},`Action dispatch error ${n.type}`),n.error.name!=="SchemaValidationError")return t(r)},MA=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));l();s();u();c();var xg=(e,t)=>{let{referrer:r,userAgent:n,location:o,clientId:a}=e.getMeta("");return{...t?t():{},referrer:r,userAgent:n,location:o,clientId:a}};l();s();u();c();function QA(e,t){let r={...e},n,o=a=>(d,p)=>{let m=a(d,p);return n?n(m,p):m};return{get combinedReducer(){let a=jf(Object.entries(t).filter(([d])=>!(d in r)).map(([d,p])=>[d,()=>p]));return o(vo({...a,...r}))},containsAll(a){return Object.keys(a).every(p=>p in r)},add(a){Object.keys(a).filter(d=>!(d in r)).forEach(d=>{r[d]=a[d]})},addCrossReducer(a){n=a}}}l();s();u();c();l();s();u();c();function fk(e){if(!e||!yk(e))return null;try{let r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=atob(r),o=decodeURIComponent(n.split("").map(a=>`%${`00${a.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));return JSON.parse(o)}catch{return null}}function LA(e,t=60){if(!e)return!1;let r=fk(e);if(!r||typeof r.exp!="number")return!1;let n=Math.floor(Date.now()/1e3);return r.exp<=n+t}function yk(e){return e?/^[A-Za-z0-9_-]{2,}(?:\.[A-Za-z0-9_-]{2,}){2}$/.test(e):!1}function UA(e,t){let r=0,n=null,o=Ps(()=>{r=0},500),a=async(m,g=!1)=>{let f=!n;f&&t&&(n=(async()=>(g&&Sk(t),await t()))().finally(()=>{n=null}));let A=await n;return f&&A&&m.dispatch(zo({accessToken:A})),A},d=async m=>{let g=m.getState(),f=Ck(g);if(!(!f||!LA(f))){e.debug("Access token is expired or about to expire, attempting renewal.");try{await a(m)?e.debug("Access token was renewed."):e.warn("Access token renewal returned an empty token. Please check the #renewAccessToken function.")}catch(A){e.warn(A,"Access token renewal failed. A retry will occur if necessary.")}}},p=async(m,g,f)=>{if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),_A(m,g.error),g;r++,o(),await a(m,!0),m.dispatch(f)};return m=>g=>async f=>{let A=typeof f=="function",R=typeof t=="function";if(!A)return g(f);R&&await d(m);let C=await g(f);return hk(C)?R?await p(m,C,f):(e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),_A(m,C.error),C):C}}function hk(e){return typeof e=="object"&&e!==null&&"error"in e&&e.error?.name===new Ao().name}function _A(e,t){e.dispatch(aa({status:401,statusCode:401,message:t.message,type:t.name}))}async function Sk(e){try{return await e()}catch{return""}}function Ck(e){return e.configuration.accessToken}l();s();u();c();function BA({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:o}){return Gy({reducer:e,preloadedState:t,devTools:{stateSanitizer:a=>a.history?{...a,history:"<<OMIT>>"}:a,name:o,shouldHotReload:!1},middleware:a=>a({thunk:{extraArgument:n}}).prepend(...r).concat(MA(n.logger))})}function Ak(e,t){let{analytics:r}=e,{analyticsClientMiddleware:n,...o}=r??{},a={...o,...r?.proxyBaseUrl&&{apiBaseUrl:r.proxyBaseUrl,nexApiBaseUrl:r.proxyBaseUrl}};return a.analyticsMode!=="next"&&Df()?(t.info("Analytics disabled since doNotTrack is active."),{...a,enabled:!1}):a}function GA(e,t){let r={...e.reducers,configuration:le,version:EA},n=Rk({...e,reducers:r},t,le),{accessToken:o,environment:a,organizationId:d}=e.configuration;n.dispatch(zo({accessToken:o,environment:a,organizationId:d}));let p=Ak(e.configuration,n.logger);return p&&n.dispatch(vc(p)),n}function Rk(e,t,r){let{reducers:n,navigatorContextProvider:o}=e,a=QA({...n,configurationReducer:r},e.preloadedState??{});e.crossReducer&&a.addCrossReducer(e.crossReducer);let d=t.logger,p={...t,get relay(){return wi(g.state,o)},get navigatorContext(){return xg(this.relay,o)}},m=vk(e,p,a),g={addReducers(f){a.containsAll(f)||(a.add(f),m.replaceReducer(a.combinedReducer))},dispatch:m.dispatch,subscribe:m.subscribe,enableAnalytics(){m.dispatch(bc())},disableAnalytics(){m.dispatch(xc())},get state(){return m.getState()},get relay(){return wi(this.state,o)},get navigatorContext(){return xg(this.relay,o)},logger:d,store:m};return g}function vk(e,t,r){let{preloadedState:n,configuration:o}=e,a=o.name||"coveo-headless",d=xk(e,t.logger);return BA({preloadedState:n,reducer:r.combinedReducer,middlewares:d,thunkExtraArguments:t,name:a})}function xk(e,t){let{renewAccessToken:r}=e.configuration,n=UA(t,r);return[VA,n,NA(t),TA].concat(Xn.middleware,ca.middleware,vg.middleware,e.middlewares||[])}var bk=`[Warning] A component from the Coveo Headless library has been instantiated with the Analytics Mode: "Next".
However, this mode is not available for Coveo for Service features, and this configuration may not work as expected.
Please switch back to the "legacy" analytics mode to ensure proper functionality.
For more information, refer to the documentation: https://docs.coveo.com/en/o3r90189/build-a-search-ui/event-protocol`;function Mu(e){e==="next"&&console.warn(bk)}l();s();u();c();var ZA=jt(XA(),1);function eR(e){return(0,ZA.pino)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}l();s();u();c();function tR(e,t){let r=Uk(e),n=wt,o=Bk(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:o,logger:t}}function Uk(e){let{analytics:t}=e,r=(n,o)=>o;return t?.analyticsClientMiddleware||r}function Bk(e){return e.preprocessRequest||qs}l();s();u();c();l();s();u();c();var rR={organizationId:Q,accessToken:Q,name:new V({required:!1,emptyAllowed:!1}),analytics:new _({options:{required:!1},values:{enabled:new oe({required:!1}),originContext:new V({required:!1}),originLevel2:new V({required:!1}),originLevel3:new V({required:!1}),analyticsMode:new V({constrainTo:["legacy","next"],required:!1,default:"next"}),proxyBaseUrl:new V({required:!1,url:!0}),trackingId:new V({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/})}}),environment:new V({required:!1,default:"prod",constrainTo:["prod","hipaa","stg","dev"]})};function nR(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457"}}var oR=new ge({...rR,insightId:Q,search:new _({options:{required:!1},values:{locale:Fe}})}),Gk="2729db39-d7fd-4504-a06e-668c64968c95";function Eg(){return{...nR(),insightId:Gk}}var $k={insightConfiguration:wc,search:me,insightInterface:Br,searchHub:iu,resultPreview:oa};function aR(e){let t=eR(e.loggerOptions);Hk(e.configuration,t);let r=zk(e.configuration,t),n=Wk(t),o={...tR(e.configuration,t),apiClient:r,streamingClient:n},a={...e,reducers:$k},d=GA(a,o);Mu(d.state.configuration.analytics.analyticsMode);let{insightId:p,search:m}=e.configuration;return d.dispatch(Fc({insightId:p})),d.dispatch(Kt()),m&&d.dispatch(Wo(m)),{...d,get state(){return d.state},executeFirstSearch(g=Qc()){au(d.state)||d.dispatch(ue({legacy:g,next:SS()}))}}}function Hk(e,t){try{oR.validate(e)}catch(r){throw t.error(r,"Insight engine configuration error"),r}}function zk(e,t){return new Os({logger:t,preprocessRequest:e.preprocessRequest||qs})}function Wk(e){return new Es({logger:e})}l();s();u();c();function se(e){let t,r=new Map,n=()=>r.size===0,o=a=>{try{let d=JSON.stringify(a),p=t!==d;return t=d,p}catch(d){return console.warn('Could not detect if state has changed, check the controller "get state method"',d),!0}};return{subscribe(a){a();let d=Symbol(),p;return n()&&(t=JSON.stringify(this.state),p=e.subscribe(()=>{o(this.state)&&r.forEach(m=>m())})),r.set(d,a),()=>{r.delete(d),n()&&p?.()}},get state(){return{}}}}l();s();u();c();l();s();u();c();var iR={articleLanguage:Fe,articlePublishStatus:Fe,articleVersionNumber:Fe,caseId:Q,knowledgeArticleId:Fe,name:Fe,permanentId:Fe,resultUrl:Fe,source:Fe,title:Q,uriHash:Fe,isAttachedFromCitation:new oe({required:!1,default:!1})},Yk=new _({options:{required:!0},values:iR}),_u=w("insight/attachToCase/setAttachedResults",e=>P(e,{results:new ee({each:Yk}),loading:new oe({required:!1,default:!1})})),nn=w("insight/attachToCase/attach",e=>sR(e)),on=w("insight/attachToCase/detach",e=>sR(e)),sR=e=>W(e.permanentId)&&W(e.uriHash)?{payload:e,error:Nt(new Pn("Either permanentId or uriHash is required"))}:P(e,iR);l();s();u();c();l();s();u();c();var _t=e=>{let t=K(e.insightCaseContext);return{targetId:t.caseId||"",targetType:"Case",caseNumber:t.caseNumber}};var ha=e=>X("caseAttach")({prefix:"insight/caseAttach",__legacy__getBuilder:(t,r)=>{et(e);let n=K(r.insightCaseContext);return t.logCaseAttach(Oe(e,r),De(e),n)},analyticsType:"InsightPanel.ItemAction",analyticsPayloadBuilder:t=>{let r=Oe(e,t);return{itemMetadata:Qt(e,t),position:r.documentPosition,responseId:t.search?.response.searchUid||"",action:"attach",context:_t(t)}}}),Sa=e=>X("caseDetach")({prefix:"insight/caseDetach",__legacy__getBuilder:(t,r)=>t.logCaseDetach(e.raw.urihash,K(r.insightCaseContext)),analyticsType:"InsightPanel.DetachItem",analyticsPayloadBuilder:t=>({itemMetadata:Qt(e,t),context:_t(t)})});l();s();u();c();l();s();u();c();function cR(){return{results:[],loading:!1}}var an=ae(cR(),e=>{e.addCase(_u,(t,r)=>{let{results:n,loading:o}=r.payload;"results"in t&&t.results?.length>0||(t.results=n,o&&(t.loading=o))}).addCase(nn,(t,r)=>{(!W(r.payload.permanentId)||!W(r.payload.uriHash))&&(t.results=[...t.results,r.payload])}).addCase(on,(t,r)=>{t.results=t.results.filter(n=>Kk(n,r.payload))})}),Kk=(e,t)=>{let r=!W(e.permanentId)&&e?.permanentId===t?.permanentId,n=!W(e.uriHash)&&e?.uriHash===t?.uriHash;return!(e.caseId===t.caseId)||!r&&!n};l();s();u();c();var Uu=(e,t)=>fo(e.raw[t])?String(e.raw[t]):void 0,Ca=(e,t)=>({articleLanguage:Uu(e,"sflanguage"),articleVersionNumber:Uu(e,"sflanguage"),articlePublishStatus:Uu(e,"articlePublishStatus"),caseId:t,knowledgeArticleId:Uu(e,"knowledgeArticleId"),permanentId:e.raw?.permanentid,uriHash:e.raw?.urihash,resultUrl:e.clickUri,source:e.raw.source,title:e.title});function uR(e,t){if(!Jk(e))throw te;let{dispatch:r}=e,n=()=>e.state.attachedResults,o=se(e),{result:a,caseId:d}=t.options,p=()=>W(d)||W(a.raw.permanentid)&&W(a.raw.urihash)?!1:e.state.attachedResults.results.some(m=>{let g=d===m.caseId,f=!W(m.permanentId)&&m.permanentId===a.raw.permanentid,A=!W(m.uriHash)&&m.uriHash===a.raw.urihash;return g&&(f||A)});return{...o,get state(){return n()},isAttached(){return p()},attach(){r(nn(Ca(a,d))),r(ha(a))},detach(){r(on(Ca(a,d))),r(Sa(a))}}}function Jk(e){return e.addReducers({configuration:le,attachedResults:an}),!0}l();s();u();c();function lR(e,t){if(!Xk(e))throw te;let{dispatch:r}=e,n=se(e),{caseId:o}=t.options,a=p=>W(o)||W(p.raw.permanentid)&&W(p.raw.urihash)?!1:e.state.attachedResults.results.some(m=>{let g=o===m.caseId,f=!W(m.permanentId)&&m.permanentId===p.raw.permanentid,A=!W(m.uriHash)&&m.uriHash===p.raw.urihash;return g&&(f||A)}),d=()=>e.state.attachedResults.results.filter(p=>p.caseId===o);return{...n,get state(){return{results:d(),loading:e.state.attachedResults.loading}},isAttached(p){return a(p)},attach(p){r(nn(Ca(p,o))),r(ha(p))},detach(p){r(on(Ca(p,o))),r(Sa(p))}}}function Xk(e){return e.addReducers({configuration:le,attachedResults:an}),!0}l();s();u();c();l();s();u();c();l();s();u();c();var ce=Q;l();s();u();c();var Zk={state:new Pe({required:!0}),numberOfResults:new Y({required:!0,min:0}),value:new V({required:!0,emptyAllowed:!0}),path:new ee({required:!0,each:Q}),moreValuesAvailable:new oe({required:!1})};function qg(e){e.children.forEach(t=>{qg(t)}),wt({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},Zk)}var Aa={facetId:ce,field:Q,tabs:new _({options:{required:!1},values:{included:new ee({each:new V}),excluded:new ee({each:new V})}}),activeTab:new V({required:!1}),delimitingCharacter:new V({required:!1,emptyAllowed:!0}),filterFacetCount:new oe({required:!1}),injectionDepth:new Y({required:!1,min:0}),numberOfValues:new Y({required:!1,min:1}),sortCriteria:new Pe({required:!1}),basePath:new ee({required:!1,each:Q}),filterByBasePath:new oe({required:!1})};var Ra=w("categoryFacet/register",e=>P(e,Aa)),va=w("categoryFacet/toggleSelectValue",e=>{try{return wt(e.facetId,Q),qg(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Nt(t)}}}),sn=w("categoryFacet/deselectAll",e=>P(e,Aa.facetId)),Ki=w("categoryFacet/updateNumberOfValues",e=>P(e,{facetId:Aa.facetId,numberOfValues:Aa.numberOfValues})),Bu=w("categoryFacet/updateSortCriterion",e=>P(e,{facetId:Aa.facetId,criterion:new Pe})),dR=w("categoryFacet/updateBasePath",e=>P(e,{facetId:Aa.facetId,basePath:new ee({each:Q})}));l();s();u();c();var Nae={categoryFacetId:ce,categoryFacetPath:new ee({required:!0,each:Q})};var pR=()=>({actionCause:"breadcrumbFacet"});l();s();u();c();var eO={categoryFacetId:ce,categoryFacetPath:new ee({required:!0,each:Q})},tO=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let o=e.categoryFacetSet[t]?.request.field,a=`${o}_${t}`;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:o,categoryFacetTitle:a}},Gu=e=>X("breadcrumbFacet")("analytics/categoryFacet/breadcrumb",(t,r)=>{P(e,eO);let n={...tO(r,e),...K(r.insightCaseContext)};return t.logBreadcrumbFacet(n)});l();s();u();c();l();s();u();c();var Ie=w("facetOptions/update",(e={freezeFacetOrder:!0})=>P(e,{freezeFacetOrder:new oe({required:!1})})),Ct=w("facetOptions/facet/enable",e=>P(e,ce)),Le=w("facetOptions/facet/disable",e=>P(e,ce));l();s();u();c();l();s();u();c();var Ji={facetId:ce,captions:new _({options:{required:!1}}),numberOfValues:new Y({required:!1,min:1}),query:new V({required:!1,emptyAllowed:!0})};var rO={path:new ee({required:!0,each:Q}),displayValue:qe,rawValue:qe,count:new Y({required:!0,min:0})},$u=w("categoryFacet/selectSearchResult",e=>P(e,{facetId:ce,value:new _({values:rO})})),mR=w("categoryFacetSearch/register",e=>P(e,Ji));l();s();u();c();function xa(e,t){let{facetId:r,criterion:n}=t,o=e[r]?.request;o&&(o.sortCriteria=n)}function Xi(e){e&&(e.currentValues=e.currentValues.map(t=>({...t,previousState:t.state!=="idle"?t.state:void 0,state:"idle"})),e.preventAutoSelect=!0)}function Hu(e,t){e&&(e.numberOfValues=t)}l();s();u();c();function zu(e,t){let r=e[t];r&&(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function Tg(e,t,r){e.currentValues=nO(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function nO(e,t){if(!e.length)return[];let r=gR(e[0],t),n=r;for(let o of e.splice(1)){let a=gR(o,t);n.children.push(a),n=a}return n.state="selected",n.retrieveChildren=!0,[r]}function gR(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var Wu=ae(No(),e=>{e.addCase(Ra,(t,r)=>{let n=r.payload,{facetId:o}=n;if(o in t)return;let a=aO(n),d=a.numberOfValues;t[o]={request:a,initialNumberOfValues:d}}).addCase(je.fulfilled,(t,r)=>r.payload?.categoryFacetSet??t).addCase(Ve,(t,r)=>{let n=r.payload.cf||{};Object.keys(t).forEach(o=>{let a=t[o].request,d=n[o]||[];(d.length||a.currentValues.length)&&Tg(a,d,t[o].initialNumberOfValues)})}).addCase(Bu,(t,r)=>{let{facetId:n,criterion:o}=r.payload,a=t[n]?.request;a&&(a.sortCriteria=o)}).addCase(dR,(t,r)=>{let{facetId:n,basePath:o}=r.payload,a=t[n]?.request;a&&(a.basePath=[...o])}).addCase(va,(t,r)=>{let{facetId:n,selection:o,retrieveCount:a}=r.payload,d=t[n]?.request;if(!d)return;let{path:p}=o,m=p.slice(0,p.length-1),g=oO(d,m,a);if(g.length){let A=g[0];A.retrieveChildren=!0,A.state="selected",A.previousState="idle",A.children=[];return}let f=yR(o.value,a);f.state="selected",f.previousState="idle",g.push(f),d.numberOfValues=1}).addCase(sn,(t,r)=>{let n=r.payload;zu(t,n)}).addCase(ht,t=>{Object.keys(t).forEach(r=>zu(t,r))}).addCase(Xo,(t,r)=>Object.keys(t).forEach(n=>{t[n].request.preventAutoSelect=!r.payload.allow})).addCase(Ki,(t,r)=>{let{facetId:n,numberOfValues:o}=r.payload,a=t[n]?.request;if(a){if(!a.currentValues.length)return Hu(a,o);iO(t,r.payload)}}).addCase($u,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n];if(!a)return;let d=[...o.path,o.rawValue];Tg(a.request,d,a.initialNumberOfValues)}).addCase(na.fulfilled,(t,r)=>{fR(t,r.payload.response.facets)}).addCase(he.fulfilled,(t,r)=>{fR(t,r.payload.response.facets)}).addCase(Le,(t,r)=>{zu(t,r.payload)})}),kg={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function oO(e,t,r){let n=e.currentValues;for(let o of t){let a=n[0];(!a||o!==a.value)&&(a=yR(o,r),n.length=0,n.push(a)),a.retrieveChildren=!1,a.previousState=void 0,a.state="idle",n=a.children}return n}function aO(e){return{...kg,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function yR(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function fR(e,t){t.forEach(r=>{if(!sO(e,r))return;let n=r.facetId,o=e[n]?.request;if(!o)return;let a=cO(o,r);o.currentValues=a?[]:o.currentValues,o.preventAutoSelect=!1})}function iO(e,t){let{facetId:r,numberOfValues:n}=t,o=e[r]?.request.currentValues[0];if(o){for(;o.children.length&&o?.state!=="selected";)o=o.children[0];o.retrieveCount=n}}function sO(e,t){return t.facetId in e}function cO(e,t){let r=Mt(e.currentValues),n=Mt(t.values);return r.length!==n.length}l();s();u();c();l();s();u();c();var nr=new V({regex:/^[a-zA-Z0-9-_]+$/}),or=new V({required:!0}),hR=new ee({each:new V}),SR=new V,CR=new oe,ar=new oe,ir=new Y({min:0}),Ut=new Y({min:1}),Yu=new oe({required:!0}),uO=new _,lO=new V,dO={captions:uO,numberOfValues:Ut,query:lO},ba=new _({values:dO}),Ku=new _({options:{required:!1},values:{type:new V({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new ee({required:!0,max:25,each:new V({emptyAllowed:!1,required:!0})})}}),tse=new oe,Ju=new ee({min:1,max:25,required:!1,each:new V({emptyAllowed:!1,required:!0})});l();s();u();c();var eo={value:Q,numberOfResults:new Y({min:0}),state:Q};var pO={facetId:ce,field:new V({required:!0,emptyAllowed:!0}),tabs:new _({options:{required:!1},values:{included:new ee({each:new V}),excluded:new ee({each:new V})}}),activeTab:new V({required:!1}),filterFacetCount:new oe({required:!1}),injectionDepth:new Y({required:!1,min:0}),numberOfValues:new Y({required:!1,min:1}),sortCriteria:new Pe({required:!1}),resultsMustMatch:new Pe({required:!1}),allowedValues:Ku,customSort:Ju},Fa=w("facet/register",e=>P(e,pO)),cn=w("facet/toggleSelectValue",e=>P(e,{facetId:ce,selection:new _({values:eo})})),un=w("facet/toggleExcludeValue",e=>P(e,{facetId:ce,selection:new _({values:eo})})),Ge=w("facet/deselectAll",e=>P(e,ce)),Xu=w("facet/updateSortCriterion",e=>P(e,{facetId:ce,criterion:new Pe({required:!0})})),Zi=w("facet/updateNumberOfValues",e=>P(e,{facetId:ce,numberOfValues:new Y({required:!0,min:1})})),es=w("facet/updateIsFieldExpanded",e=>P(e,{facetId:ce,isFieldExpanded:new oe({required:!0})})),to=w("facet/updateFreezeCurrentValues",e=>P(e,{facetId:ce,freezeCurrentValues:new oe({required:!0})}));l();s();u();c();var wa=e=>Te("analytics/facet/unexclude",(t,r)=>{P(e,{facetId:ce,facetValue:Q});let n=ft(r),o=_o(e,n);return t.makeFacetUnexclude(o)});var At=()=>({actionCause:"facetClearAll"}),bt=()=>({actionCause:"facetSelect"}),Zu=()=>({actionCause:"facetExclude"}),Pr=()=>({actionCause:"facetDeselect"});var Og=()=>({actionCause:"breadcrumbFacet"});l();s();u();c();var Ia=e=>X("showMoreFacetResults")("analytics/facet/showMore",(t,r)=>{P(e,ce);let n={...Ln(e,ft(r)),...K(r.insightCaseContext)};return t.logFacetShowMore(n)}),Pa=e=>X("showLessFacetResults")("analytics/facet/showLess",(t,r)=>{P(e,ce);let n={...Ln(e,ft(r)),...K(r.insightCaseContext)};return t.logFacetShowLess(n)}),sr=e=>X("facetUpdateSort")("analytics/facet/sortChange",(t,r)=>{P(e,{facetId:ce,sortCriterion:new Pe({required:!0})});let{facetId:n,sortCriterion:o}=e,a=ft(r),p={...Ln(n,a),criteria:o,...K(r.insightCaseContext)};return t.logFacetUpdateSort(p)}),nt=e=>X("facetClearAll")("analytics/facet/reset",(t,r)=>{P(e,ce);let n=ft(r),o={...Ln(e,n),...K(r.insightCaseContext)};return t.logFacetClearAll(o)}),lt=e=>X("facetSelect")("analytics/facet/select",(t,r)=>{P(e,{facetId:ce,facetValue:Q});let n=ft(r),o={..._o(e,n),...K(r.insightCaseContext)};return t.logFacetSelect(o)}),Bt=e=>X("facetDeselect")("analytics/facet/deselect",(t,r)=>{P(e,{facetId:ce,facetValue:Q});let n=ft(r),o={..._o(e,n),...K(r.insightCaseContext)};return t.logFacetDeselect(o)}),ts=e=>X("breadcrumbFacet")("analytics/facet/breadcrumb",(t,r)=>{P(e,{facetId:ce,facetValue:Q});let n={..._o(e,ft(r)),...K(r.insightCaseContext)};return t.logBreadcrumbFacet(n)});l();s();u();c();l();s();u();c();var AR={facetId:ce,value:new _({values:{displayValue:qe,rawValue:qe,count:new Y({required:!0,min:0})}})},RR=w("facetSearch/register",e=>P(e,Ji)),el=w("facetSearch/update",e=>P(e,Ji)),tl=w("facetSearch/toggleSelectValue",e=>P(e,AR)),rl=w("facetSearch/toggleExcludeValue",e=>P(e,AR));var Ea=ae(Lo(),e=>{e.addCase(Fa,(t,r)=>{let{facetId:n}=r.payload;n in t||(t[n]=Wh(mO(r.payload)))}).addCase(je.fulfilled,(t,r)=>{if(r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(Ve,(t,r)=>{let n=r.payload.f||{},o=r.payload.fExcluded||{};Object.keys(t).forEach(d=>{let{request:p}=t[d],m=n[d]||[],g=o[d]||[],f=m.length+g.length,A=p.currentValues.filter(R=>!m.includes(R.value)&&!g.includes(R.value));p.currentValues=[...m.map(xR),...g.map(bR),...A.map(fO)],p.preventAutoSelect=f>0,p.numberOfValues=Math.max(f,p.numberOfValues)})}).addCase(cn,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a)return;a.preventAutoSelect=!0;let d=a.currentValues.find(m=>m.value===o.value);if(!d){nl(a,o);return}let p=d.state==="selected";d.previousState=d.state,d.state=p?"idle":"selected",a.freezeCurrentValues=!0}).addCase(un,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a)return;a.preventAutoSelect=!0;let d=a.currentValues.find(m=>m.value===o.value);if(!d){nl(a,o);return}let p=d.state==="excluded";d.previousState=d.state,d.state=p?"idle":"excluded",a.freezeCurrentValues=!0}).addCase(to,(t,r)=>{let{facetId:n,freezeCurrentValues:o}=r.payload,a=t[n]?.request;a&&(a.freezeCurrentValues=o)}).addCase(Ge,(t,r)=>{Xi(t[r.payload]?.request)}).addCase(ht,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Xi(r))}).addCase($c,t=>{Object.values(t).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Xi(r))}).addCase(Xo,(t,r)=>Object.values(t).forEach(n=>{n.request.preventAutoSelect=!r.payload.allow})).addCase(Xu,(t,r)=>{xa(t,r.payload)}).addCase(Zi,(t,r)=>{let{facetId:n,numberOfValues:o}=r.payload;Hu(t[n]?.request,o)}).addCase(es,(t,r)=>{let{facetId:n,isFieldExpanded:o}=r.payload,a=t[n]?.request;a&&(a.isFieldExpanded=o)}).addCase(he.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>vR(t[o.facetId]?.request,o))}).addCase(na.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>vR(t[o.facetId]?.request,o))}).addCase(tl,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n]?.request;if(!a)return;let{rawValue:d}=o,{currentValues:p}=a,m=p.find(f=>f.value===d);if(m){m.state="selected";return}let g=xR(d);nl(a,g),a.freezeCurrentValues=!0,a.preventAutoSelect=!0}).addCase(rl,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n]?.request;if(!a)return;let{rawValue:d}=o,{currentValues:p}=a,m=p.find(f=>f.value===d);if(m){m.state="excluded";return}let g=bR(d);nl(a,g),a.freezeCurrentValues=!0,a.preventAutoSelect=!0}).addCase(Le,(t,r)=>{if(!(r.payload in t))return;let{request:n}=t[r.payload];Xi(n)})});function nl(e,t){let{currentValues:r}=e,n=r.findIndex(a=>a.state==="idle"),o=n===-1?r.length:n;e.currentValues.splice(o,0,t),n>-1&&e.currentValues.pop(),e.numberOfValues=e.currentValues.length}function vR(e,t){e&&(e.currentValues=t.values.map(gO),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var Dg={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function mO(e){return{...Dg,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function gO(e){let{value:t,state:r}=e;return{value:t,state:r}}function xR(e){return{value:e,state:"selected"}}function bR(e){return{value:e,state:"excluded"}}function fO(e){return{...e,state:"idle"}}l();s();u();c();var ol=()=>X("breadcrumbResetAll")("analytics/facet/deselectAllBreadcrumbs",(e,t)=>e.logBreadcrumbResetAll(K(t.insightCaseContext)));l();s();u();c();l();s();u();c();function qa(e){let t=FR(e.start,e),r=FR(e.end,e),n=e.endInclusive??!1,o=e.state??"idle";return{start:t,end:r,endInclusive:n,state:o}}function FR(e,t){let{dateFormat:r}=t;return VS(e)?(Tc(e),OS(e)):typeof e=="string"&&Gr(e)?(Tc(e),e):(ES(e,r),qc(Yo(e,r)))}l();s();u();c();var Ta=w("rangeFacet/updateSortCriterion",e=>P(e,{facetId:ce,criterion:new Pe({required:!0})}));l();s();u();c();var ro={state:Q,start:new Y({required:!0}),end:new Y({required:!0}),endInclusive:new oe({required:!0}),numberOfResults:new Y({required:!0,min:0})},no={start:Q,end:Q,endInclusive:new oe({required:!0}),state:Q,numberOfResults:new Y({required:!0,min:0})},Er=e=>({facetId:ce,selection:typeof e.start=="string"?new _({values:no}):new _({values:ro})});var yO={start:Q,end:Q,endInclusive:new oe({required:!0}),state:Q},hO={facetId:ce,field:Q,tabs:new _({options:{required:!1},values:{included:new ee({each:new V}),excluded:new ee({each:new V})}}),activeTab:new V({required:!1}),currentValues:new ee({required:!1,each:new _({values:yO})}),generateAutomaticRanges:new oe({required:!0}),filterFacetCount:new oe({required:!1}),injectionDepth:new Y({required:!1,min:0}),numberOfValues:new Y({required:!1,min:1}),sortCriteria:new Pe({required:!1}),rangeAlgorithm:new Pe({required:!1})};function wR(e){return Gr(e)?Vi(e):e}function al(e){e.currentValues&&e.currentValues.forEach(t=>{let{start:r,end:n}=qa(t);if(Yo(wR(r)).isAfter(Yo(wR(n))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var cr=w("dateFacet/register",e=>{try{return wt(e,hO),al(e),{payload:e,error:null}}catch(t){return{payload:e,error:Nt(t)}}}),ur=w("dateFacet/toggleSelectValue",e=>P(e,{facetId:ce,selection:new _({values:no})})),lr=w("dateFacet/toggleExcludeValue",e=>P(e,{facetId:ce,selection:new _({values:no})})),qr=w("dateFacet/updateFacetValues",e=>{try{return wt(e,{facetId:ce,values:new ee({each:new _({values:no})})}),al({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Nt(t)}}}),il=Ta,sl=Ge;l();s();u();c();l();s();u();c();var cl=(e,{facetId:t,selection:r})=>{let o=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field,a=`${o}_${t}`;return{facetId:t,facetField:o,facetTitle:a,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}},ul=()=>({actionCause:"breadcrumbFacet"});var jg=ul;l();s();u();c();var rs=e=>X("breadcrumbFacet")("analytics/dateFacet/breadcrumb",(t,r)=>{P(e,Er(e.selection));let n={...cl(r,e),...K(r.insightCaseContext)};return t.logBreadcrumbFacet(n)});l();s();u();c();function SO(e,t){return!!t&&t.facetId in e.dateFacetSet}var IR=(e,t)=>{let r=xr(e,t);if(SO(e,r))return r},PR=(e,t)=>(IR(e,t)||{values:[]}).values.filter(n=>n.state==="selected"),ER=(e,t)=>(IR(e,t)||{values:[]}).values.filter(n=>n.state!=="idle");l();s();u();c();l();s();u();c();var dl={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function pl(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let o=qR(r);r.numberOfValues=o,e[n]=t}function ml(e,t,r){let n=e[t]?.request;n&&(n.currentValues=r,n.numberOfValues=qR(n))}function gl(e,t,r){let n=e[t]?.request;if(!n)return;let o=ll(n.currentValues,r);if(!o)return;let a=o.state==="selected";o.previousState=o.state,o.state=a?"idle":"selected",n.preventAutoSelect=!0}function fl(e,t,r){let n=e[t]?.request;if(!n)return;let o=ll(n.currentValues,r);if(!o)return;let a=o.state==="excluded";o.previousState=o.state,o.state=a?"idle":"excluded",n.preventAutoSelect=!0}function ln(e,t){let r=e[t]?.request;r&&r.currentValues.forEach(n=>{n.state!=="idle"&&(n.previousState=n.state),n.state="idle"})}function yl(e,t){Object.entries(e).forEach(([r,{request:n}])=>{let o=t[r]||[];n.currentValues.forEach(p=>(!!ll(o,p)&&(p.state="selected"),p));let a=o.filter(p=>!ll(n.currentValues,p)),d=n.currentValues;d.push(...a),n.numberOfValues=Math.max(n.numberOfValues,d.length)})}function hl(e,t,r){t.forEach(n=>{let o=n.facetId,a=e[o]?.request;if(!a)return;let d=r(n.values);a.currentValues=d,a.preventAutoSelect=!1})}function ll(e,t){let{start:r,end:n}=t;return e.find(o=>o.start===r&&o.end===n)}function qR(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}var dr=ae(Mo(),e=>{e.addCase(cr,(t,r)=>{let{payload:n}=r,o=CO(n);pl(t,Hh(o))}).addCase(je.fulfilled,(t,r)=>r.payload?.dateFacetSet??t).addCase(Ve,(t,r)=>{let n=r.payload.df||{};yl(t,n)}).addCase(ur,(t,r)=>{let{facetId:n,selection:o}=r.payload;gl(t,n,o)}).addCase(lr,(t,r)=>{let{facetId:n,selection:o}=r.payload;fl(t,n,o)}).addCase(qr,(t,r)=>{let{facetId:n,values:o}=r.payload;ml(t,n,o)}).addCase(sl,(t,r)=>{ln(t,r.payload)}).addCase(ht,t=>{Object.keys(t).forEach(r=>{ln(t,r)})}).addCase(il,(t,r)=>{xa(t,r.payload)}).addCase(he.fulfilled,(t,r)=>{let n=r.payload.response.facets;hl(t,n,AO)}).addCase(Le,(t,r)=>{ln(t,r.payload)})});function CO(e){return{...dl,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function AO(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}l();s();u();c();var RO={state:Q,start:new Y({required:!0}),end:new Y({required:!0}),endInclusive:new oe({required:!0})},vO={facetId:ce,field:Q,tabs:new _({options:{required:!1},values:{included:new ee({each:new V}),excluded:new ee({each:new V})}}),activeTab:new V({required:!1}),currentValues:new ee({required:!1,each:new _({values:RO})}),generateAutomaticRanges:new oe({required:!0}),filterFacetCount:new oe({required:!1}),injectionDepth:new Y({required:!1,min:0}),numberOfValues:new Y({required:!1,min:1}),sortCriteria:new Pe({required:!1}),rangeAlgorithm:new Pe({required:!1})};function Sl(e){e.currentValues&&e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var pr=w("numericFacet/register",e=>{try{return P(e,vO),Sl(e),{payload:e,error:null}}catch(t){return{payload:e,error:Nt(t)}}}),mr=w("numericFacet/toggleSelectValue",e=>P(e,{facetId:ce,selection:new _({values:ro})})),gr=w("numericFacet/toggleExcludeValue",e=>P(e,{facetId:ce,selection:new _({values:ro})})),Tr=w("numericFacet/updateFacetValues",e=>{try{return wt(e,{facetId:ce,values:new ee({each:new _({values:ro})})}),Sl({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Nt(t)}}}),Cl=Ta,Al=Ge;l();s();u();c();var Vg=ul;l();s();u();c();l();s();u();c();var TR=(e,{facetId:t,selection:r})=>{let o=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field,a=`${o}_${t}`;return{facetId:t,facetField:o,facetTitle:a,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}};var ns=e=>X("breadcrumbFacet")("analytics/numericFacet/breadcrumb",(t,r)=>{P(e,Er(e.selection));let n={...TR(r,e),...K(r.insightCaseContext)};return t.logBreadcrumbFacet(n)});l();s();u();c();function xO(e,t){return!!t&&t.facetId in e.numericFacetSet}var kR=(e,t)=>{let r=xr(e,t);if(xO(e,r))return r},OR=(e,t)=>(kR(e,t)||{values:[]}).values.filter(n=>n.state!=="idle"),DR=(e,t)=>(kR(e,t)||{values:[]}).values.filter(n=>n.state==="selected");l();s();u();c();var dn=ae(Qo(),e=>{e.addCase(pr,(t,r)=>{let{payload:n}=r,o=bO(n);pl(t,zh(o))}).addCase(je.fulfilled,(t,r)=>r.payload?.numericFacetSet??t).addCase(Ve,(t,r)=>{let n=r.payload.nf||{};yl(t,n)}).addCase(mr,(t,r)=>{let{facetId:n,selection:o}=r.payload;gl(t,n,o)}).addCase(gr,(t,r)=>{let{facetId:n,selection:o}=r.payload;fl(t,n,o)}).addCase(Tr,(t,r)=>{let{facetId:n,values:o}=r.payload;ml(t,n,o)}).addCase(Al,(t,r)=>{ln(t,r.payload)}).addCase(ht,t=>{Object.keys(t).forEach(r=>{ln(t,r)})}).addCase(Cl,(t,r)=>{xa(t,r.payload)}).addCase(he.fulfilled,(t,r)=>{let n=r.payload.response.facets;hl(t,n,FO)}).addCase(Le,(t,r)=>{ln(t,r.payload)})});function bO(e){return{...dl,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function FO(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}l();s();u();c();l();s();u();c();var os=Q,Rl=new _({options:{required:!0},values:{caption:qe,expression:qe,state:new V({constrainTo:["idle","selected","excluded"]})}}),jR=new ee({required:!0,each:Rl});var wde=w("staticFilter/register",e=>P(e,{id:os,values:jR})),VR=w("staticFilter/toggleSelect",e=>P(e,{id:os,value:Rl})),NR=w("staticFilter/toggleExclude",e=>P(e,{id:os,value:Rl})),Ide=w("staticFilter/deselectAllFilterValues",e=>P(e,os));l();s();u();c();var vl=e=>X("staticFilterDeselect")("analytics/staticFilter/deselect",(t,r)=>t.logStaticFilterDeselect({...e,...K(r.insightCaseContext)}));l();s();u();c();var xl=e=>Object.keys(e.facetSet).map(t=>{let r=e.facetValuesSelector(e.engine.state,t).map(n=>({value:n,deselect:()=>{n.state==="selected"?e.executeToggleSelect({facetId:t,selection:n}):n.state==="excluded"&&e.executeToggleExclude({facetId:t,selection:n})}}));return{facetId:t,field:e.facetSet[t].request.field,values:r}}).filter(t=>t.values.length);function MR(e){let t=se(e),{dispatch:r}=e;return{...t,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(ht())},deselectBreadcrumb(n){n.deselect()}}}function QR(e){if(!wO(e))throw te;let t=MR(e),{dispatch:r}=e,n=()=>e.state,o=()=>{let C={engine:e,facetSet:n().facetSet,executeToggleSelect:({facetId:v,selection:b})=>{let x=ts({facetId:v,facetValue:b.value});r(cn({facetId:v,selection:b})),r(to({facetId:v,freezeCurrentValues:!1})),r(ue({legacy:x,next:Og()}))},executeToggleExclude:({facetId:v,selection:b})=>{let x=ts({facetId:v,facetValue:b.value});r(un({facetId:v,selection:b})),r(to({facetId:v,freezeCurrentValues:!1})),r(ue({legacy:x,next:Og()}))},facetValuesSelector:Bh};return xl(C)},a=()=>{let C={engine:e,facetSet:n().numericFacetSet,executeToggleSelect:v=>{r(mr(v)),r(ue({legacy:ns(v),next:Vg()}))},executeToggleExclude:v=>{r(gr(v)),r(ue({legacy:ns(v),next:Vg()}))},facetValuesSelector:OR};return xl(C)},d=()=>{let C={engine:e,facetSet:n().dateFacetSet,executeToggleSelect:v=>{r(ur(v)),r(ue({legacy:rs(v),next:jg()}))},executeToggleExclude:v=>{r(lr(v)),r(ue({legacy:rs(v),next:jg()}))},facetValuesSelector:ER};return xl(C)},p=C=>{let v=$h(n(),C);return{facetId:C,field:n().categoryFacetSet[C].request.field,path:v,deselect:()=>{r(sn(C)),r(ue({legacy:Gu({categoryFacetPath:v.map(b=>b.value),categoryFacetId:C}),next:pR()}))}}},m=()=>Object.keys(n().categoryFacetSet).map(p).filter(C=>C.path.length),g=()=>{let C=n().staticFilterSet||{};return Object.values(C).map(f)},f=C=>{let{id:v,values:b}=C,x=b.filter(F=>F.state!=="idle").map(F=>A(v,F));return{id:v,values:x}},A=(C,v)=>({value:v,deselect:()=>{let{caption:b,expression:x}=v,F=vl({staticFilterId:C,staticFilterValue:{caption:b,expression:x}});v.state==="selected"?r(VR({id:C,value:v})):v.state==="excluded"&&r(NR({id:C,value:v})),r(ue({legacy:F}))}});function R(){return!![...o(),...a(),...d(),...m(),...g()].length}return{...t,get state(){return{facetBreadcrumbs:o(),categoryFacetBreadcrumbs:m(),numericFacetBreadcrumbs:a(),dateFacetBreadcrumbs:d(),staticFilterBreadcrumbs:g(),hasBreadcrumbs:R()}},deselectAll:()=>{t.deselectAll(),r(ue({legacy:ol(),next:{actionCause:"breadcrumbResetAll"}}))}}}function wO(e){return e.addReducers({configuration:le,search:me,facetSet:Ea,numericFacetSet:dn,dateFacetSet:dr,categoryFacetSet:Wu}),!0}l();s();u();c();l();s();u();c();l();s();u();c();var LR=e=>e.queryCorrection.correctedQuery!==""||e.wasCorrectedTo!=="";l();s();u();c();l();s();u();c();l();s();u();c();var bl=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""}),_R=()=>({correctedQuery:"",corrections:[],originalQuery:""});function UR(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:bl(),originalQuery:"",automaticallyCorrectQuery:!0,queryCorrectionMode:"legacy"}}var BR=(e,t)=>{let r={..._R(),...t,correctedQuery:t?.correctedQuery||t?.corrections[0]?.correctedQuery||""};e.queryCorrection=r,e.wasCorrectedTo=r.correctedQuery};var GR=ae(UR(),e=>{e.addCase(kc,t=>{t.enableDidYouMean=!0}).addCase(US,t=>{t.enableDidYouMean=!1}).addCase(BS,t=>{t.automaticallyCorrectQuery=!0}).addCase(Oc,t=>{t.automaticallyCorrectQuery=!1}).addCase(he.pending,t=>{t.queryCorrection=bl(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(he.fulfilled,(t,r)=>{let{queryCorrection:n,queryCorrections:o}=r.payload.response;if(t.queryCorrectionMode==="legacy"){let a=o?.[0]?o[0]:bl();t.queryCorrection=a}t.queryCorrectionMode==="next"&&BR(t,n),t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected,t.originalQuery=r.payload.originalQuery}).addCase(yt,(t,r)=>{t.wasCorrectedTo=r.payload}).addCase(Ni,(t,r)=>{t.queryCorrectionMode=r.payload})});function $R(e,t={}){if(!IO(e))throw te;let r=se(e),{dispatch:n}=e;n(kc()),t.options?.automaticallyCorrectQuery===!1&&n(Oc()),n(Ni(t.options?.queryCorrectionMode||"next"));let o=()=>e.state,a=()=>LR(o().didYouMean);return{...r,get state(){let d=o();return{originalQuery:d.didYouMean.originalQuery,wasCorrectedTo:d.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:d.didYouMean.wasAutomaticallyCorrected,queryCorrection:d.didYouMean.queryCorrection,hasQueryCorrection:a()}},applyCorrection(){n(yt(this.state.queryCorrection.correctedQuery))},updateQueryCorrectionMode(d){n(Ni(d))}}}function IO(e){return e.addReducers({configuration:le,didYouMean:GR}),!0}var HR={automaticallyCorrectQuery:!0,queryCorrectionMode:"legacy"};function zR(e,t={options:HR}){let r={...HR,...t.options},n=$R(e,{options:r}),{dispatch:o}=e;return{...n,get state(){return n.state},applyCorrection(){n.applyCorrection(),o(ue({legacy:JS(),next:aC()}))}}}l();s();u();c();l();s();u();c();l();s();u();c();var ot=ae(Vc(),e=>{e.addCase(Ie,(t,r)=>({...t,...r.payload})).addCase(he.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(he.rejected,t=>{t.freezeFacetOrder=!1}).addCase(je.fulfilled,(t,r)=>r.payload?.facetOptions??t).addCase(Ra,(t,r)=>{let{facetId:n,tabs:o}=r.payload;Fl(o,t,n)}).addCase(Fa,(t,r)=>{let{facetId:n,tabs:o}=r.payload;Fl(o,t,n)}).addCase(cr,(t,r)=>{let{facetId:n,tabs:o}=r.payload;Fl(o,t,n)}).addCase(pr,(t,r)=>{let{facetId:n,tabs:o}=r.payload;Fl(o,t,n)}).addCase(Ct,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(Le,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(Ve,(t,r)=>{[...Object.keys(r.payload.f??{}),...Object.keys(r.payload.fExcluded??{}),...Object.keys(r.payload.cf??{}),...Object.keys(r.payload.nf??{}),...Object.keys(r.payload.df??{})].forEach(n=>{n in t||(t.facets[n]=jm()),t.facets[n].enabled=!0})})});function Fl(e,t,r){let n={...jm(),tabs:e??{}};t.facets[r]=n}l();s();u();c();var Ng=(e,t)=>typeof e=="object"&&Object.keys({...e}).length===0||!t||!e?!0:e.excluded?.includes(t)?!1:!!(e.included&&(e.included.length===0||e.included.includes(t)));l();s();u();c();l();s();u();c();var wl=ae(Mc(),e=>{e.addCase(Du,(t,r)=>{let n=r.payload,{id:o}=n;o in t||(t[o]={...n,isActive:!1})}).addCase(wr,(t,r)=>{let n=r.payload;WR(t,n)}).addCase(Ou,(t,r)=>{let n=r.payload;WR(t,n)}).addCase(je.fulfilled,(t,r)=>r.payload?.tabSet??t).addCase(Ve,(t,r)=>{let n=r.payload.tab;W(n)||Object.keys(t).forEach(o=>{t[o].isActive=o===n})})});function WR(e,t){t in e&&Object.keys(e).forEach(n=>{e[n].isActive=n===t})}function YR(e){if(!PO(e))throw te;let t=se(e),r=ke(n=>n.tabSet,n=>Object.values(n).find(a=>a.isActive)?.id??"");return{...t,get state(){return{activeTab:r(e.state)}}}}function PO(e){return e.addReducers({tabSet:wl}),!0}function KR(e,t){if(!EO(e))throw te;let r=YR(e),n=v=>e.state.facetOptions.facets[v]?.enabled??!1,o=v=>e.state.facetSet?.[v]?.request?.currentValues??e.state.categoryFacetSet?.[v]?.request?.currentValues??e.state.numericFacetSet?.[v]?.request?.currentValues??e.state.dateFacetSet?.[v]?.request?.currentValues??null,a=v=>v in e.state.facetOptions.facets,d=v=>e.state.facetOptions.facets[v]?.tabs,p=()=>ho({isFacetRegistered:a(t.facetId),parentFacets:t.conditions.map(({parentFacetId:v})=>a(v)?{enabled:n(v),values:o(v)}:null),isTabEnabled:Ng(d(t.facetId),r.state.activeTab)}),m=()=>{let v=p();return v===R?!1:(R=v,!0)},g=()=>t.conditions.length>0?t.conditions.some(v=>{if(!n(v.parentFacetId))return!1;let b=o(v.parentFacetId);return b===null?!1:v.condition(b)}):!0,f=()=>{e.state.facetSet&&Object.entries(e.state.facetSet).forEach(([v,b])=>b.request.freezeCurrentValues&&e.dispatch(to({facetId:v,freezeCurrentValues:!1})))},A=()=>{if(!a(t.facetId))return;let v=n(t.facetId),b=g(),x=Ng(d(t.facetId),r.state.activeTab),F=b&&x;v!==F&&(e.dispatch(F?Ct(t.facetId):Le(t.facetId)),f())},R=p(),C=e.subscribe(()=>{m()&&A()});return A(),{stopWatching(){C()}}}function EO(e){return e.addReducers({facetOptions:ot}),!0}function JR(e,t){return KR(e,t)}l();s();u();c();l();s();u();c();function XR(e){if(!qO(e))throw te;let t=se(e),r=()=>e.state;return{...t,sort(n){return Qi(n,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map(a=>a.facetId)}}}}function qO(e){return e.addReducers({search:me,facetOptions:ot}),!0}function ZR(e){return XR(e)}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Il=(r=>(r.Relevance="relevance",r.Fields="fields",r))(Il||{}),Mg=(r=>(r.Ascending="asc",r.Descending="desc",r))(Mg||{});var zge=new _({options:{required:!1},values:{by:new Dr({enum:Il,required:!0}),fields:new ee({each:new _({values:{field:new V({required:!0}),direction:new Dr({enum:Mg}),displayName:new V}})})}});l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Gt=e=>e.error!==void 0;function ev(e,t="prod"){return`${be(e,t)}/rest/organizations/${e}/commerce/v2`}l();s();u();c();var tv=e=>kO(e.cartItems,e.cart);function kO(e,t){let r=e.reduce((n,o)=>{let{productId:a,quantity:d}=t[o];return a in n||(n[a]={productId:a,quantity:0}),n[a].quantity+=d,n},{});return[...Object.values(r)]}var ka=(e,t)=>{let{view:r,location:n,custom:o,...a}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.commerce.apiBaseUrl??ev(e.configuration.organizationId,e.configuration.environment),organizationId:e.configuration.organizationId,trackingId:e.configuration.analytics.trackingId,...a,...e.configuration.analytics.enabled?{clientId:t.clientId}:{},context:{user:{...n,...t.userAgent?{userAgent:t.userAgent}:{}},view:{...r,...t.referrer?{referrer:t.referrer}:{}},capture:t.capture??(e.configuration.analytics.enabled&&t.clientId!==""),cart:tv(e.cart),source:Mr(e.configuration.analytics),...o?{custom:o}:{}}}};var rv=(e,t,r)=>({...ka(e,t),...OO(e,r)}),OO=(e,t)=>{let r=t?e.commercePagination?.recommendations[t]:e.commercePagination?.principal;return r&&{page:r.page,...r.perPage&&{perPage:r.perPage}}};var kt=(e,t)=>({...rv(e,t),facets:[...DO(e)],...e.commerceSort&&{sort:jO(e.commerceSort.appliedSort)}});function DO(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.filter(t=>e.commerceFacetSet?.[t]).map(t=>e.manualNumericFacetSet?.[t]?.manualRange?{facetId:t,field:t,numberOfValues:1,isFieldExpanded:!1,preventAutoSelect:!0,type:"numericalRange",values:[e.manualNumericFacetSet[t].manualRange],initialNumberOfValues:1}:e.commerceFacetSet[t].request).filter(t=>t&&t.values.length>0)}function jO(e){return e.by==="relevance"?{sortCriteria:"relevance"}:{sortCriteria:"fields",fields:e.fields.map(({name:t,direction:r})=>({field:t,direction:r}))}}var nv=(e,t,r,n)=>{let o=t.categoryFacetSearchSet[e].options.query,a=`*${o}*`,d=t.commerceFacetSet[as(e)]?.request,p=d&&VO(d)?d&&NO(d):[],m=p.length?[p]:[],g=r?o:t.commerceQuery?.query,f=t.categoryFacetSearchSet[e].options.numberOfValues,{url:A,accessToken:R,organizationId:C,trackingId:v,language:b,country:x,currency:F,clientId:E,context:I,...q}=kt(t,n);return{url:A,accessToken:R,organizationId:C,facetId:as(e),facetQuery:r?"*":a,numberOfValues:f,ignorePaths:m,trackingId:v,language:b,country:x,currency:F,clientId:E,context:I,query:g,...!r&&{...q}}};function VO(e){return e.type==="hierarchical"}var NO=e=>{let t=[],r=e.values[0];for(;r;)t.push(r.value),r=r.children[0];return t};l();s();u();c();var ov=(e,t,r,n)=>{let o=t.facetSearchSet[e].options.query,a=t.facetSearchSet[e].options.numberOfValues,d=`*${o}*`,p=r?o:t.commerceQuery?.query,{url:m,accessToken:g,organizationId:f,trackingId:A,language:R,country:C,currency:v,clientId:b,context:x,...F}=kt(t,n);return{url:m,accessToken:g,organizationId:f,facetId:as(e),facetQuery:r?"*":d,numberOfValues:a,trackingId:A,language:R,country:C,currency:v,clientId:b,context:x,query:p,...!r&&{...F}}};var av=e=>async({facetId:t,facetSearchType:r},{getState:n,extra:{validatePayload:o,navigatorContext:a,apiClient:d}})=>{let p=n();o(t,Q);let m=MO(p,t)||QO(p,t)?ov(t,p,e,a):nv(t,p,e,a),g=await d.facetSearch(m,r);return{facetId:t,response:g}},pn=re("commerce/facetSearch/executeSearch",av(!1)),mn=re("commerce/facetSearch/facetFieldSuggest",av(!0)),MO=(e,t)=>"facetSearchSet"in e&&e.facetSearchSet[t]!==void 0&&e.commerceFacetSet[t]!==void 0,QO=(e,t)=>"fieldSuggestionsOrder"in e?e.fieldSuggestionsOrder.some(r=>r.facetId===t&&r.type==="regular"):!1,Pl="field_suggestion:";function as(e){return e.startsWith(Pl)?e.slice(Pl.length):e}function gn(e){return e.startsWith(Pl)?e:`${Pl}${e}`}l();s();u();c();l();s();u();c();var El=e=>e.commercePagination?.principal.perPage||0;var ql=e=>e.commercePagination?.principal.totalEntries||0;l();s();u();c();l();s();u();c();var LO="coveo-headless-internal-state",iv=Symbol.for(LO);var Lg=e=>e.productListing?.results.length||e.productListing?.products.length||0,sv=ke(e=>({total:ql(e),current:Lg(e)}),({current:e,total:t})=>e<t);var Tl=re("commerce/productListing/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let a=t(),d=kt(a,o),p=await n.getProductListing({...d,enableResults:!!e?.enableResults});return Gt(p)?r(p.error):{response:p.success}}),Che=re("commerce/productListing/fetchMoreProducts",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let a=t();if(!sv(a))return null;let p=El(a),g=Lg(a)/p,f=await n.getProductListing({...kt(a,o),enableResults:!!e?.enableResults,page:g});return Gt(f)?r(f.error):{response:f.success}}),_O={child:new _({options:{required:!0},values:{permanentid:new V({required:!0})}})},Ahe=w("commerce/productListing/promoteChildToParent",e=>P(e,_O));l();s();u();c();l();s();u();c();var cv=(e,t,r)=>({...ka(t,r),query:t.querySet[e]});var uv=w("commerce/querySuggest/clear",e=>P(e,{id:Q})),fn=re("commerce/querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:o,navigatorContext:a}})=>{o(e,{id:Q});let d=t(),p=cv(e.id,d,a),m=await n.querySuggest(p);return Gt(m)?r(m.error):{id:e.id,query:p.query,...m.success}}),lv=w("commerce/querySuggest/register",e=>P(e,{id:Q,count:new Y({min:0})})),dv=w("commerce/querySuggest/selectSuggestion",e=>P(e,{id:Q,expression:qe}));l();s();u();c();l();s();u();c();var $he=w("commerce/facets/core/updateNumberOfValues",e=>P(e,{facetId:Q,numberOfValues:new Y({required:!0,min:1})})),Hhe=w("commerce/facets/core/updateIsFieldExpanded",e=>P(e,{facetId:Q,isFieldExpanded:new oe({required:!0})})),zhe=w("commerce/facets/core/clearAll"),pv=w("commerce/facets/core/deleteAll"),Whe=w("commerce/facets/core/deselectAllValues",e=>P(e,{facetId:Q})),Yhe=w("commerce/facets/core/updateFreezeCurrentValues",e=>P(e,{facetId:Q,freezeCurrentValues:new oe({required:!0})})),mv=w("commerce/facets/core/updateAutoSelectionForAll",e=>P(e,{allow:new oe({required:!0})}));l();s();u();c();var kl={slotId:py},UO={...kl,pageSize:new Y({required:!0,min:0})},oSe=w("commerce/pagination/setPageSize",e=>P(e,UO)),BO={...kl,page:new Y({required:!0,min:0})},gv=w("commerce/pagination/selectPage",e=>P(e,BO)),aSe=w("commerce/pagination/nextPage",e=>P(e,kl)),iSe=w("commerce/pagination/previousPage",e=>P(e,kl)),sSe=w("commerce/pagination/registerRecommendationsSlot",e=>P(e,{slotId:Q}));l();s();u();c();var Ol=w("commerce/query/update",e=>P(e,{query:new V}));l();s();u();c();l();s();u();c();var fv=w("commerce/triggers/query/updateIgnore",e=>P(e,{q:new V({emptyAllowed:!0,required:!0})})),yv=w("commerce/triggers/query/applyModification",e=>P(e,new _({values:{originalQuery:Fe,modification:Fe}})));l();s();u();c();l();s();u();c();function _g(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{q:n}:{}}function Ug(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{sortCriteria:n}:{}}function oo(e,t,r,n){if(e===void 0)return{};let o=Object.entries(e).filter(([a])=>t(a)).map(([a,{request:d}])=>{let p=r(d);return p.length?{[a]:p}:{}}).reduce((a,d)=>({...a,...d}),{});return Object.keys(o).length?{[n]:o}:{}}function hv(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{tab:n}:{}}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Bg=e=>e.commerceSearch?.products.length||0,Sv=ke(e=>({total:ql(e),current:Bg(e)}),({current:e,total:t})=>e<t);var Dl=e=>e.commerceQuery?.query??"";var Cv=(e,t)=>W(t.queryCorrection?.correctedQuery)?Dl(e):t.queryCorrection.correctedQuery;var is=class{constructor(t){this.config=t}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}async fetchFromAPI(t){let r=Date.now(),n=await this.extra.apiClient.search(t),o=Date.now()-r,a=this.getState().commerceQuery.query||"";return{response:n,duration:o,queryExecuted:a,requestExecuted:t,enableResults:!!("enableResults"in t&&t.enableResults)}}processSuccessResponse(t){return{...t,response:this.getSuccessResponse(t),originalQuery:this.getCurrentQuery()}}processQueryErrorOrContinue(t){return Gt(t.response)?this.rejectWithValue(t.response.error):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{queryCorrection:o}=n;if(!(!W(o)&&!W(o.correctedQuery)))return null;let{correctedQuery:d,originalQuery:p}=n.queryCorrection;return this.onUpdateQueryForCorrection(d??""),{...t,response:{...n},queryExecuted:Cv(r,n),originalQuery:p??""}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(p=>p.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(fv({q:""})),null;let a=this.getCurrentQuery(),d=await this.automaticallyRetryQueryWithTriggerModification(n,t.enableResults);return Gt(d.response)?this.rejectWithValue(d.response.error):{...d,response:{...d.response.success},originalQuery:a}}async automaticallyRetryQueryWithTriggerModification(t,r){return this.dispatch(yv({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI({...kt(this.getState(),this.navigatorContext),query:t,enableResults:!!r})}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getState(){return this.config.getState()}get navigatorContext(){return this.config.extra.navigatorContext}getCurrentQuery(){let t=this.getState();return t.commerceQuery.query!==void 0?t.commerceQuery.query:""}getSuccessResponse(t){return Gt(t.response)?null:t.response.success}get extra(){return this.config.extra}onUpdateQueryForCorrection(t){this.dispatch(Ol({query:t}))}};var Oa=re("commerce/search/executeSearch",async(e={},t)=>{let{getState:r}=t,n=r(),{navigatorContext:o}=t.extra,a=kt(n,o),d=Dl(n),p=new is(t),m=await p.fetchFromAPI({...a,query:d,enableResults:!!e?.enableResults});return p.process(m)}),GCe=re("commerce/search/fetchMoreProducts",async(e={},t)=>{let{getState:r}=t,n=r(),{navigatorContext:o}=t.extra;if(!Sv(n))return null;let d=El(n),m=Bg(n)/d,g=Dl(n),f=kt(n,o),A=new is(t),R=await A.fetchFromAPI({...f,query:g,page:m,enableResults:!!e?.enableResults});return A.process(R)}),$Ce=re("commerce/search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;P(e,{query:new V,clearFilters:new oe}),e.clearFilters&&r(pv()),r(mv({allow:!0})),r(Ol({query:e.query})),r(gv({page:0}))}),HCe=re("commerce/search/fetchInstantProducts",async(e,{getState:t,rejectWithValue:r,extra:n})=>{let o=t(),{apiClient:a,navigatorContext:d}=n,{q:p}=e,m=await a.productSuggestions({...ka(o,d),query:p});return Gt(m)?r(m.error):{response:{...m.success,products:m.success.products}}}),GO={child:new _({options:{required:!0},values:{permanentid:new V({required:!0})}})},zCe=w("commerce/search/promoteChildToParent",e=>P(e,GO));l();s();u();c();function ss(e,t,r){let{facetId:n}=t;if(e[n])return;let o=!1,a={...fr,...t},d=r();e[n]={options:a,isLoading:o,response:d,initialNumberOfValues:a.numberOfValues,requestId:""}}function jl(e,t){let{facetId:r,...n}=t,o=e[r];o&&(o.options={...o.options,...n})}function yn(e,t,r){let n=e[t];n&&(n.requestId=r,n.isLoading=!0)}function hn(e,t){let r=e[t];r&&(r.isLoading=!1)}function Vl(e,t,r){let{facetId:n,response:o}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,a.response=o)}function Nl(e,t,r){let{facetId:n,response:o}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,"success"in o&&(a.response=o.success))}function Ml(e,t,r,n){let{facetId:o,response:a}=t,d=gn(o),p=e[d];if(!p)ss(e,{facetId:d},n),p=e[d];else if(p.requestId!==r)return;p.isLoading=!1,"success"in a&&(p.response=a.success)}function Av(e,t,r,n){if(t.fieldSuggestionsFacets)for(let o of t.fieldSuggestionsFacets)o.facetId in e||o.type!=="regular"||(e[o.facetId]={options:{...fr,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:fr.numberOfValues,requestId:r})}function Rv(e,t,r,n){if(t.fieldSuggestionsFacets)for(let o of t.fieldSuggestionsFacets){let a=gn(o.facetId);a in e||o.type!=="hierarchical"||(e[a]={options:{...fr,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:fr.numberOfValues,requestId:r})}}function cs(e,t,r){let{facetId:n}=t,o=e[n];o&&(o.requestId="",o.isLoading=!1,o.response=r(),o.options.numberOfValues=o.initialNumberOfValues,o.options.query=fr.query)}function kr(e,t){Object.keys(e).forEach(r=>cs(e,{facetId:r},t))}var fr={captions:{},numberOfValues:10,query:""};l();s();u();c();l();s();u();c();var vv=async(e,t,r,n)=>{let o=t.categoryFacetSearchSet[e].options,a=t.categoryFacetSet[e].request,{captions:d,query:p,numberOfValues:m}=o,{field:g,delimitingCharacter:f,basePath:A,filterFacetCount:R}=a,C=$O(a),v=C.length?[C]:[],b=`*${p}*`;return{url:t.configuration.search.apiBaseUrl??pt(t.configuration.organizationId,t.configuration.environment),accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:A,captions:d,numberOfValues:m,query:b,field:g,delimitingCharacter:f,ignorePaths:v,filterFacetCount:R,type:"hierarchical",...n?{}:{searchContext:(await Tt(t,r)).request}}},$O=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};l();s();u();c();var xv=async(e,t,r,n)=>{let{captions:o,query:a,numberOfValues:d}=t.facetSearchSet[e].options,{field:p,currentValues:m,filterFacetCount:g}=t.facetSet[e].request,f=m.filter(R=>R.state!=="idle").map(R=>R.value),A=`*${a}*`;return{url:t.configuration.search.apiBaseUrl??pt(t.configuration.organizationId,t.configuration.environment),accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:o,numberOfValues:d,query:A,field:p,ignoreValues:f,filterFacetCount:g,type:"specific",...n?{}:{searchContext:(await Tt(t,r)).request}}};var bv=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:o,navigatorContext:a}})=>{let d=r(),p;o(t,Q),HO(d,t)?p=await xv(t,d,a,e):p=await vv(t,d,a,e);let m=await n.facetSearch(p);return{facetId:t,response:m}},Sn=re("facetSearch/executeSearch",bv(!1)),bAe=re("facetSearch/executeSearch",bv(!0)),Ql=w("facetSearch/clearResults",e=>P(e,{facetId:ce})),HO=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;l();s();u();c();function Fv(){return{}}var wv=ae(Fv(),e=>{e.addCase(mR,(t,r)=>{let n=r.payload;ss(t,n,ao)}).addCase(el,(t,r)=>{jl(t,r.payload)}).addCase(pn.pending,(t,r)=>{let{facetId:n}=r.meta.arg;yn(t,n,r.meta.requestId)}).addCase(mn.pending,(t,r)=>{let{facetId:n}=r.meta.arg;yn(t,n,r.meta.requestId)}).addCase(Sn.pending,(t,r)=>{let n=r.meta.arg;yn(t,n,r.meta.requestId)}).addCase(pn.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;hn(t,n)}).addCase(mn.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;hn(t,gn(n))}).addCase(Sn.rejected,(t,r)=>{let n=r.meta.arg;hn(t,n)}).addCase(pn.fulfilled,(t,r)=>{Nl(t,r.payload,r.meta.requestId)}).addCase(mn.fulfilled,(t,r)=>{Ml(t,r.payload,r.meta.requestId,ao)}).addCase(fn.fulfilled,(t,r)=>{Rv(t,r.payload,r.meta.requestId,ao)}).addCase(Sn.fulfilled,(t,r)=>{Vl(t,r.payload,r.meta.requestId)}).addCase(Ql,(t,{payload:{facetId:r}})=>{cs(t,{facetId:r},ao)}).addCase(Tl.fulfilled,t=>kr(t,ao)).addCase(Oa.fulfilled,t=>kr(t,ao)).addCase(he.fulfilled,t=>{kr(t,ao)})});function ao(){return{moreValuesAvailable:!1,values:[]}}l();s();u();c();l();s();u();c();function Iv(e,t){let{field:r,state:n}=e;if(!zO(e))return r;let o=`${r}_`,a=WO(o,n);return KO(r,t),`${o}${a}`}function zO(e){let{field:t,state:r}=e;return Pv(r).some(o=>o&&t in o)}function WO(e,t){let n=Pv(t).map(o=>Object.keys(o||{})).reduce((o,a)=>o.concat(a),[]);return YO(n,e)+1}function Pv(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:o}=e;return[t,r,n,o]}function YO(e,t){return e.map(a=>{let d=a.split(t)[1],p=parseInt(d,10);return Number.isNaN(p)?0:p}).sort().pop()??0}function KO(e,t){let r=`A facet with field "${e}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}function Ot(e,t){let{state:r,logger:n}=e,{field:o,facetId:a}=t;return a||Iv({field:o,state:r},n)}l();s();u();c();l();s();u();c();var Ev=["alphanumeric","occurrences"];var qv=new ge({field:or,tabs:new _({options:{required:!1},values:{included:new ee({each:new V}),excluded:new ee({each:new V})}}),basePath:hR,delimitingCharacter:SR,facetId:nr,facetSearch:ba,filterByBasePath:CR,filterFacetCount:ar,injectionDepth:ir,numberOfValues:Ut,sortCriteria:new V({constrainTo:Ev})});function Tv(e,t){if(!JO(e))throw te;let r=se(e),{dispatch:n}=e,o=Ot(e,t.options),a=t.options.tabs??{},d=ut(e.state.tabSet),p={...kg,...Is("facetSearch",t.options),field:t.options.field,facetId:o,tabs:a,activeTab:d},m={facetSearch:{...fr,...t.options.facetSearch},...p};Be(e,qv,m,"buildCategoryFacet");let g=()=>dm(e.state,o),f=()=>lm(e.state,o),A=()=>Wt(e.state),R=()=>rr(e.state,o);return n(Ra(p)),{...r,toggleSelect(C){let v=m.numberOfValues;n(va({facetId:o,selection:C,retrieveCount:v})),n(Ie())},deselectAll(){n(sn(o)),n(Ie())},sortBy(C){n(Bu({facetId:o,criterion:C})),n(Ie())},isSortedBy(C){return g().sortCriteria===C},showMoreValues(){let{numberOfValues:C}=m,{activeValue:v,valuesAsTrees:b}=this.state,x=(v?.children.length??b.length)+C;n(Ki({facetId:o,numberOfValues:x})),n(Ie())},showLessValues(){let{numberOfValues:C}=m;n(Ki({facetId:o,numberOfValues:C})),n(Ie())},enable(){n(Ct(o))},disable(){n(Le(o))},get state(){let C=g(),v=f(),b=A(),x=R(),F=v?.values??[],E=F.some(L=>L.children.length>0)??!1,{parents:I,values:q}=Gh(v?.values),M=Mt(F),D=M.length?M[M.length-1]:void 0,k=!!D,O=D?.moreValuesAvailable??v?.moreValuesAvailable??!1,j=D?D.children.length>m.numberOfValues:F.length>m.numberOfValues;return{facetId:o,parents:I,selectedValueAncestry:M,values:q,isHierarchical:E,valuesAsTrees:F,activeValue:D,isLoading:b,hasActiveValues:k,canShowMoreValues:O,canShowLessValues:j,sortCriteria:C.sortCriteria,enabled:x}}}}function JO(e){return e.addReducers({categoryFacetSet:Wu,categoryFacetSearchSet:wv,facetOptions:ot,configuration:le,search:me}),!0}function kv(e,t){let r=Tv(e,t),{dispatch:n}=e,o=()=>r.state.facetId,d={updateText(){},showMoreResults(){},search(){},clear(){},updateCaptions(){},select(){},singleSelect(){},get state(){return{values:[],isLoading:!1,moreValuesAvailable:!1,query:""}}},{state:p,...m}=d;return{...r,facetSearch:m,toggleSelect(g){r.toggleSelect(g);let f=XO(o(),g);n(ue({legacy:f,next:ZO(g)}))},deselectAll(){r.deselectAll(),n(ue({legacy:nt(o()),next:At()}))},sortBy(g){r.sortBy(g),n(ue({legacy:sr({facetId:o(),sortCriterion:g})}))},isSortedBy(g){return r.isSortedBy(g)},showMoreValues(){r.showMoreValues(),n(Jo({legacy:Ia(o())}))},showLessValues(){r.showLessValues(),n(Jo({legacy:Pa(o())}))},get state(){return{...r.state,facetSearch:d.state}}}}function XO(e,t){let r={facetId:e,facetValue:t.value};return t.state==="selected"?Bt(r):lt(r)}function ZO(e){return e.state==="selected"?Pr():bt()}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var eD=Intl.supportedValuesOf("currency"),tD=new V({required:!0,emptyAllowed:!1,constrainTo:eD}),Gg={url:Q},$g={latitude:new Y({min:-90,max:90,required:!0}),longitude:new Y({min:-180,max:180,required:!0})},Ov={custom:new _({options:{required:!1}})},Hg={language:Q,country:Q,currency:tD,view:new _({options:{required:!0},values:Gg}),location:new _({options:{required:!1},values:$g}),custom:new _({options:{required:!1}})},rve=new ge(Hg);var dve=w("commerce/context/set",e=>P(e,Hg)),Dv=w("commerce/context/setView",e=>P(e,Gg)),pve=w("commerce/context/setLocation",e=>P(e,$g)),mve=w("commerce/context/setCustom",e=>P({custom:e},Ov));l();s();u();c();function jv(){return{}}var Ll=ae(jv(),e=>{e.addCase(RR,(t,r)=>{let n=r.payload;ss(t,n,Cn)}).addCase(el,(t,r)=>{jl(t,r.payload)}).addCase(pn.pending,(t,r)=>{let{facetId:n}=r.meta.arg;yn(t,n,r.meta.requestId)}).addCase(mn.pending,(t,r)=>{let{facetId:n}=r.meta.arg;yn(t,gn(n),r.meta.requestId)}).addCase(Sn.pending,(t,r)=>{let n=r.meta.arg;yn(t,n,r.meta.requestId)}).addCase(pn.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;hn(t,n)}).addCase(mn.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;hn(t,gn(n))}).addCase(Sn.rejected,(t,r)=>{let n=r.meta.arg;hn(t,n)}).addCase(pn.fulfilled,(t,r)=>{Nl(t,r.payload,r.meta.requestId)}).addCase(mn.fulfilled,(t,r)=>{Ml(t,r.payload,r.meta.requestId,Cn)}).addCase(fn.fulfilled,(t,r)=>{Av(t,r.payload,r.meta.requestId,Cn)}).addCase(Sn.fulfilled,(t,r)=>{Vl(t,r.payload,r.meta.requestId)}).addCase(Ql,(t,{payload:r})=>{cs(t,r,Cn)}).addCase(he.fulfilled,t=>{kr(t,Cn)}).addCase(Tl.fulfilled,t=>kr(t,Cn)).addCase(Oa.fulfilled,t=>kr(t,Cn)).addCase(Dv,t=>kr(t,Cn))});function Cn(){return{moreValuesAvailable:!1,values:[]}}l();s();u();c();var rD=e=>e.state==="selected",Vv=(e,t)=>{let r={facetId:e,facetValue:t.value};return rD(t)?Bt(r):lt(r)};l();s();u();c();var zg=e=>e.state==="selected",Lv=e=>e.state==="excluded";var _v=e=>zg(e)?Pr():bt();l();s();u();c();l();s();u();c();var Uv={facetId:ce,selection:new _({values:eo})},Bv=re("facet/executeToggleSelect",({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:o}}=r;o({facetId:e,selection:t},Uv),n(cn({facetId:e,selection:t})),n(Ie())}),Gv=re("facet/executeToggleExclude",({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:o}}=r;o({facetId:e,selection:t},Uv),n(un({facetId:e,selection:t})),n(Ie())});l();s();u();c();l();s();u();c();var Da=["allValues","atLeastOneValue"];l();s();u();c();var _l=["score","alphanumeric","alphanumericDescending","occurrences","automatic","alphanumericNatural","alphanumericNaturalDescending"];var $v=new ge({facetId:nr,tabs:new _({options:{required:!1},values:{included:new ee({each:new V}),excluded:new ee({each:new V})}}),field:or,filterFacetCount:ar,injectionDepth:ir,numberOfValues:Ut,sortCriteria:new V({constrainTo:_l}),resultsMustMatch:new V({constrainTo:Da}),facetSearch:ba});function Hv(e,t,r=$v){if(!nD(e))throw te;let{dispatch:n}=e,o=se(e),a=Ot(e,t.options),d=t.options.tabs??{},p=ut(e.state.tabSet),m={...Dg,...Is("facetSearch",t.options),field:t.options.field,facetId:a,tabs:d,activeTab:p},g={facetSearch:{...fr,...t.options.facetSearch},...m};Be(e,r,g,"buildFacet");let f=()=>Uh(e.state,a),A=()=>um(e.state,a),R=()=>Wt(e.state),C=()=>rr(e.state,a),v=()=>{let{currentValues:x}=f();return x.filter(F=>F.state!=="idle").length},b=()=>{let{currentValues:x}=f(),F=g.numberOfValues,E=!!x.find(I=>I.state==="idle");return F<x.length&&E};return n(Fa(m)),{...o,toggleSelect:x=>n(Bv({facetId:g.facetId,selection:x})),toggleExclude:x=>n(Gv({facetId:g.facetId,selection:x})),toggleSingleSelect:function(x){x.state==="idle"&&n(Ge(a)),this.toggleSelect(x)},toggleSingleExclude:function(x){x.state==="idle"&&n(Ge(a)),this.toggleExclude(x)},isValueSelected:zg,isValueExcluded:Lv,deselectAll(){n(Ge(a)),n(Ie())},sortBy(x){n(Xu({facetId:a,criterion:x})),n(Ie())},isSortedBy(x){return this.state.sortCriterion===x},showMoreValues(){let x=f().numberOfValues,F=g.numberOfValues,E=F-x%F,I=x+E;n(Zi({facetId:a,numberOfValues:I})),n(es({facetId:a,isFieldExpanded:!0})),n(Ie())},showLessValues(){let x=g.numberOfValues,F=Math.max(x,v());n(Zi({facetId:a,numberOfValues:F})),n(es({facetId:a,isFieldExpanded:!1})),n(Ie())},enable(){n(Ct(a))},disable(){n(Le(a))},get state(){let x=f(),F=A(),E=R(),I=C(),q;typeof x.sortCriteria=="object"?q=x.sortCriteria.order==="descending"?"alphanumericDescending":"alphanumeric":q=x.sortCriteria;let M=F?F.values:[],D=M.some(j=>j.state!=="idle"),k=F?F.moreValuesAvailable:!1,O=x.resultsMustMatch;return{label:F?.label,facetId:a,tabs:d,values:M,sortCriterion:q,resultsMustMatch:O,isLoading:E,hasActiveValues:D,canShowMoreValues:k,canShowLessValues:b(),enabled:I}}}}function nD(e){return e.addReducers({facetSet:Ea,facetOptions:ot,configuration:le,facetSearchSet:Ll}),!0}l();s();u();c();var zv=new ge({facetId:nr,field:or,tabs:new _({options:{required:!1},values:{included:new ee({each:new V}),excluded:new ee({each:new V})}}),filterFacetCount:ar,injectionDepth:ir,numberOfValues:Ut,sortCriteria:new V({constrainTo:_l}),resultsMustMatch:new V({constrainTo:Da}),facetSearch:ba,allowedValues:Ku,customSort:Ju});function Wv(e,t){if(!oD(e))throw te;let{dispatch:r}=e,n=Hv(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},zv),o=()=>n.state.facetId,d={updateText(){},showMoreResults(){},search(){},clear(){},updateCaptions(){},select(){},exclude(){},singleSelect(){},singleExclude(){},get state(){return{values:[],isLoading:!1,moreValuesAvailable:!1,query:""}}},{state:p,...m}=d;return{...n,facetSearch:m,toggleSelect(g){n.toggleSelect(g),r(ue({legacy:Vv(o(),g),next:_v(g)}))},deselectAll(){n.deselectAll(),r(ue({legacy:nt(o()),next:At()}))},sortBy(g){n.sortBy(g),r(ue({legacy:sr({facetId:o(),sortCriterion:g})}))},isSortedBy(g){return this.state.sortCriterion===g},showMoreValues(){n.showMoreValues(),r(Jo({legacy:Ia(o())}))},showLessValues(){n.showLessValues(),r(Jo({legacy:Pa(o())}))},get state(){return{...n.state,facetSearch:d.state}}}}function oD(e){return e.addReducers({facetSet:Ea,configuration:le,facetSearchSet:Ll,search:me}),!0}l();s();u();c();l();s();u();c();l();s();u();c();var us=e=>e.state==="selected",Yv=e=>e.state==="excluded";var Ul=e=>us(e)?Pr():bt();var Bl=(e,t)=>{let r=`${t.start}..${t.end}`,n={facetId:e,facetValue:r};return us(t)?Bt(n):lt(n)};l();s();u();c();l();s();u();c();l();s();u();c();var Gl=w("rangeFacet/executeToggleSelect",e=>P(e,Er(e.selection))),$l=w("rangeFacet/executeToggleExclude",e=>P(e,Er(e.selection)));var Kv={facetId:ce,selection:new _({values:no})},Jv=re("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Kv),t(ur(e)),t(Gl(e)),t(Ie())}),Xv=re("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Kv),t(lr(e)),t($l(e)),t(Ie())});l();s();u();c();function Hl(e,t){if(!e.generateAutomaticRanges&&e.currentValues===void 0){let r=`currentValues should be specified for ${t} when generateAutomaticRanges is false.`;throw new Error(r)}}l();s();u();c();function zl(e,t){let{facetId:r,getRequest:n}=t,o=se(e),a=e.dispatch,d=()=>rr(e.state,r);return{...o,isValueSelected:us,isValueExcluded:Yv,deselectAll(){a(Ge(r)),a(Ie())},sortBy(p){a(Ta({facetId:r,criterion:p})),a(Ie())},isSortedBy(p){return this.state.sortCriterion===p},enable(){a(Ct(r))},disable(){a(Le(r))},get state(){let p=n(),m=xr(e.state,r),g=p.sortCriteria,f=p.resultsMustMatch,A=m?m.values:[],R=Wt(e.state),C=d(),v=A.some(x=>x.state!=="idle"),b=m?.domain;return{facetId:r,values:A,sortCriterion:g,resultsMustMatch:f,hasActiveValues:v,isLoading:R,enabled:C,domain:b}}}}l();s();u();c();l();s();u();c();var Wl=["idle","selected","excluded"];l();s();u();c();var Yl=["ascending","descending"],Kl=["even","equiprobable"];var aD={start:new V,end:new V,endInclusive:new oe,state:new V({constrainTo:Wl})},iD=new ge({facetId:nr,field:or,tabs:new _({options:{required:!1},values:{included:new ee({each:new V}),excluded:new ee({each:new V})}}),generateAutomaticRanges:Yu,filterFacetCount:ar,injectionDepth:ir,numberOfValues:Ut,currentValues:new ee({each:new _({values:aD})}),sortCriteria:new V({constrainTo:Yl}),rangeAlgorithm:new V({constrainTo:Kl})});function Jl(e,t){Be(e,iD,t,"buildDateFacet"),al(t)}function Zv(e,t){if(!sD(e))throw te;Hl(t.options,"buildDateFacet");let r=e.dispatch,n=Ot(e,t.options),o=t.options.tabs??{},a=ut(e.state.tabSet),d={currentValues:[],...t.options,facetId:n,tabs:o,activeTab:a};Jl(e,d),r(cr(d));let p=zl(e,{facetId:n,getRequest:()=>e.state.dateFacetSet[n].request});return{...p,toggleSelect:m=>r(Jv({facetId:n,selection:m})),toggleSingleSelect:function(m){m.state==="idle"&&r(Ge(n)),this.toggleSelect(m)},toggleExclude:m=>r(Xv({facetId:n,selection:m})),toggleSingleExclude:function(m){m.state==="idle"&&r(Ge(n)),this.toggleExclude(m)},get state(){return p.state}}}function sD(e){return e.addReducers({configuration:le,search:me,dateFacetSet:dr,facetOptions:ot}),!0}function ex(e,t){let r=Zv(e,t),n=e.dispatch,o=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(ue({legacy:nt(o()),next:At()}))},sortBy(a){r.sortBy(a),n(ue({legacy:sr({facetId:o(),sortCriterion:a})}))},toggleSelect:a=>{r.toggleSelect(a),n(ue({legacy:Bl(o(),a),next:Ul(a)}))},get state(){return r.state}}}l();s();u();c();l();s();u();c();function tx(e,t){if(!cD(e))throw te;let r=se(e),{dispatch:n}=e,o=()=>e.state,a=Ot(e,t.options),d=t.options.tabs??{},p=ut(e.state.tabSet),m={...t.options,currentValues:t.initialState?.range?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:a,tabs:d,activeTab:p};Jl(e,m),n(cr(m));let g=()=>rr(e.state,a);return{...r,clear:()=>{n(qr({facetId:a,values:[]})),n(Ie())},setRange:f=>{let A={...f,state:"selected",numberOfResults:0,endInclusive:!0},R=qr({facetId:a,values:[A]});return R.error?!1:(n(R),n(Ie()),!0)},enable(){n(Ct(a))},disable(){n(Le(a))},get state(){let f=Wt(o()),A=g(),R=PR(o(),a),C=R.length?R[0]:void 0;return{facetId:a,isLoading:f,range:C,enabled:A}}}}function cD(e){return e.addReducers({dateFacetSet:dr,facetOptions:ot,configuration:le,search:me}),!0}function rx(e,t){if(!uD(e))throw te;let r=tx(e,t),{dispatch:n}=e,o=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(ue({legacy:nt(o()),next:At()}))},setRange:a=>{let d=r.setRange(a);return d&&n(ue({legacy:lt({facetId:o(),facetValue:`${a.start}..${a.end}`}),next:bt()})),d},get state(){return{...r.state}}}}function uD(e){return e.addReducers({dateFacetSet:dr,configuration:le,search:me}),!0}l();s();u();c();l();s();u();c();l();s();u();c();var nx={facetId:ce,selection:new _({values:ro})},ox=re("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,nx),t(mr(e)),t(Gl(e)),t(Ie())}),rIe=re("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,nx),t(gr(e)),t($l(e)),t(Ie())});l();s();u();c();var lD={start:new Y,end:new Y,endInclusive:new oe,state:new V({constrainTo:Wl})},dD=new ge({facetId:nr,tabs:new _({options:{required:!1},values:{included:new ee({each:new V}),excluded:new ee({each:new V})}}),field:or,generateAutomaticRanges:Yu,filterFacetCount:ar,injectionDepth:ir,numberOfValues:Ut,currentValues:new ee({each:new _({values:lD})}),sortCriteria:new V({constrainTo:Yl}),resultsMustMatch:new V({constrainTo:Da}),rangeAlgorithm:new V({constrainTo:Kl})});function Xl(e,t){Be(e,dD,t,"buildNumericFacet"),Sl(t)}l();s();u();c();function Zl(e){return{endInclusive:!1,state:"idle",...e}}function ax(e,t){if(!pD(e))throw te;Hl(t.options,"buildNumericFacet");let r=e.dispatch,n=Ot(e,t.options),o=t.options.tabs??{},a=ut(e.state.tabSet),d={currentValues:[],...t.options,facetId:n,tabs:o,activeTab:a};Xl(e,d),r(pr(d));let p=zl(e,{facetId:n,getRequest:()=>e.state.numericFacetSet[n].request});return{...p,toggleSelect:m=>r(ox({facetId:n,selection:m})),toggleSingleSelect(m){m.state==="idle"&&r(Ge(n)),this.toggleSelect(m)},get state(){return p.state}}}function pD(e){return e.addReducers({numericFacetSet:dn,facetOptions:ot,configuration:le,search:me}),!0}function ix(e,t){let r=ax(e,t),n=e.dispatch,o=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(ue({legacy:nt(o()),next:At()}))},sortBy(a){r.sortBy(a),n(ue({legacy:sr({facetId:o(),sortCriterion:a})}))},toggleSelect:a=>{r.toggleSelect(a),n(ue({legacy:Bl(o(),a),next:Ul(a)}))},get state(){return{...r.state}}}}l();s();u();c();l();s();u();c();function sx(e,t){if(!mD(e))throw te;let r=se(e),{dispatch:n}=e,o=()=>e.state,a=Ot(e,t.options),d=t.options.tabs??{},p=ut(e.state.tabSet),m={...t.options,currentValues:t.initialState?.range?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:a,tabs:d,activeTab:p};Xl(e,m),n(pr(m));let g=()=>rr(e.state,a);return{...r,clear:()=>{n(Tr({facetId:a,values:[]})),n(Ie())},setRange:f=>{let A={...f,state:"selected",numberOfResults:0,endInclusive:!0},R=Tr({facetId:a,values:[A]});return R.error?!1:(n(R),n(Ie()),!0)},enable(){n(Ct(a))},disable(){n(Le(a))},get state(){let f=Wt(o()),A=g(),R=DR(o(),a),C=R.length?R[0]:void 0;return{facetId:a,isLoading:f,range:C,enabled:A}}}}function mD(e){return e.addReducers({numericFacetSet:dn,facetOptions:ot,configuration:le,search:me}),!0}function cx(e,t){let r=sx(e,t),{dispatch:n}=e,o=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(ue({legacy:nt(o()),next:At()}))},setRange:a=>{let d=r.setRange(a);return d&&n(ue({legacy:lt({facetId:o(),facetValue:`${a.start}..${a.end}`}),next:bt()})),d},get state(){return{...r.state}}}}l();s();u();c();l();s();u();c();var gD=e=>X("showMoreFoldedResults")("analytics/folding/showMore",(t,r)=>(et(e),t.logShowMoreFoldedResults(Oe(e,r),De(e),K(r.insightCaseContext)))),fD=()=>X("showLessFoldedResults")("analytics/folding/showLess",(e,t)=>e.logShowLessFoldedResults(K(t.insightCaseContext))),ux={logShowMoreFoldedResults:gD,logShowLessFoldedResults:fD};l();s();u();c();l();s();u();c();var ls={collectionField:new V({emptyAllowed:!1,required:!1}),parentField:new V({emptyAllowed:!1,required:!1}),childField:new V({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new Y({min:0,required:!1})},ja=w("folding/register",e=>P(e,ls)),ed=re("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let a=t(),d=a.configuration.analytics.analyticsMode==="legacy"?await Wr(a):Zo(a,o),p=await n.search({...d,q:yD(a),enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}="${e}"`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return Ee(p)?r(p.error):{collectionId:e,results:p.success.results,searchUid:p.success.searchUid,rootResult:a.folding.collections[e].result}});function yD(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var lx=w("folding/register",e=>P(e,ls)),td=re("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let o=t(),a=await KS(o,e),p=(await rC(n,o,a,{origin:"foldingCollection"})).response;return Ee(p)?r(p.error):{collectionId:e,results:p.success.results,searchUid:p.success.searchUid,rootResult:o.folding.collections[e].result}});l();s();u();c();l();s();u();c();l();s();u();c();var rd=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});function hD(e,t){return e.raw[t.collection]}function Wg(e,t){return e.raw[t.parent]}function ds(e,t){let r=e.raw[t.child];return Fs(r)?r[0]:r}function SD(e,t){return(e||t)!==void 0&&e===t}function px(e,t,r,n=[]){let o=ds(e,r);return o?n.indexOf(o)!==-1?[]:t.filter(a=>{let d=ds(a,r)===ds(e,r);return Wg(a,r)===o&&!d}).map(a=>{let d={...a,searchUid:e.searchUid};return{result:d,children:px(d,t,r,[...n,o])}}):[]}function CD(e,t){return e.find(r=>{let n=Wg(r,t)===void 0,o=SD(Wg(r,t),ds(r,t));return n||o})}function mx(e){return e.parentResult?mx(e.parentResult):e}function AD(e,t,r,n){let o=Sc(e),d={...n??CD(o,t)??mx(e),searchUid:r};return{result:d,children:px(d,o,t),moreResultsAvailable:e.totalNumberOfChildResults>1,isLoadingMoreResults:!1}}function nd(e,t,r,n){let o={};return e.forEach(a=>{let d=hD(a,t);d&&(!ds(a,t)&&!a.parentResult||(o[d]=AD(a,t,r,n)))}),o}function dx(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var od=ae(rd(),e=>e.addCase(he.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?nd(r.response.results,t.fields,r.response.searchUid):{}}).addCase(tr.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?nd(r.response.results,t.fields,r.response.searchUid):{}}).addCase(Zr.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...nd(r.response.results,t.fields,r.response.searchUid)}:{}}).addCase(ja,(t,{payload:r})=>t.enabled?t:{enabled:!0,collections:{},fields:{collection:r.collectionField??t.fields.collection,parent:r.parentField??t.fields.parent,child:r.childField??t.fields.child},filterFieldRange:r.numberOfFoldedResults??t.filterFieldRange}).addCase(ed.pending,(t,{meta:r})=>{let n=r.arg;dx(t,n).isLoadingMoreResults=!0}).addCase(ed.rejected,(t,{meta:r})=>{let n=r.arg;dx(t,n).isLoadingMoreResults=!1}).addCase(ed.fulfilled,(t,{payload:{collectionId:r,results:n,rootResult:o,searchUid:a}})=>{let d=nd(n,t.fields,a,o);if(!d||!d[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(n)}. Folding most probably in an invalid state... `);t.collections[r]=d[r],t.collections[r].moreResultsAvailable=!1}));l();s();u();c();l();s();u();c();var ps={id:Q},An=w("querySuggest/register",e=>P(e,{...ps,count:new Y({min:0})})),gx=w("querySuggest/unregister",e=>P(e,ps)),Rn=w("querySuggest/selectSuggestion",e=>P(e,{...ps,expression:qe})),vn=w("querySuggest/clear",e=>P(e,ps)),Va=re("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:o,navigatorContext:a}})=>{o(e,ps);let d=e.id,p=await RD(d,t(),a),m=await n.querySuggest(p);return Ee(m)?r(m.error):{id:d,q:p.q,...m.success}}),RD=async(e,t,r)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl??pt(t.configuration.organizationId,t.configuration.environment),count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?rt.getInstance().getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},tab:t.configuration.analytics.originLevel2,...t.configuration.analytics.enabled&&{...t.configuration.analytics.enabled&&t.configuration.analytics.analyticsMode==="legacy"?await $r(t.configuration.analytics):Gn(t.configuration.analytics,r)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var xn=ae(Me(),e=>e.addCase(ct,(t,r)=>({...t,...r.payload})).addCase(yt,(t,r)=>{t.q=r.payload}).addCase(Rn,(t,r)=>{t.q=r.payload.expression}).addCase(je.fulfilled,(t,r)=>r.payload?.query??t).addCase(Ve,(t,r)=>{t.q=r.payload.q??t.q,t.enableQuerySyntax=r.payload.enableQuerySyntax??t.enableQuerySyntax}));l();s();u();c();l();s();u();c();var bn=w("fields/registerFieldsToInclude",e=>P(e,Ds)),ad=w("fields/fetchall/enable"),id=w("fields/fetchall/disable"),sd=re("fields/fetchDescription",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let o=r(),{accessToken:a,environment:d,organizationId:p}=o.configuration,{apiBaseUrl:m}=o.configuration.search,g=await t.apiClient.fieldDescriptions({accessToken:a,organizationId:p,url:m??pt(p,d)});return Ee(g)?n(g.error):g.success.fields});l();s();u();c();l();s();u();c();var fx=["author","language","urihash","objecttype","collection","source","permanentid"],vD=[...fx,"date","filetype","parents"],tqe=[...vD,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],yx=()=>({fieldsToInclude:fx,fetchAllFields:!1,fieldsDescription:[]});var Na=ae(yx(),e=>e.addCase(bn,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(ad,t=>{t.fetchAllFields=!0}).addCase(id,t=>{t.fetchAllFields=!1}).addCase(sd.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(ja,(t,{payload:r})=>{let n=rd().fields;t.fieldsToInclude.push(r.collectionField??n.collection,r.parentField??n.parent,r.childField??n.child)}));l();s();u();c();function Ma(e){if(!xD(e))throw te;let t=se(e),r=()=>e.state;return{...t,get state(){let n=r();return{hasError:n.search.error!==null,isLoading:n.search.isLoading,hasResults:!!n.search.results.length,firstSearchExecuted:au(n)}}}}function xD(e){return e.addReducers({search:me}),!0}var bD=new ge({fieldsToInclude:new ee({required:!1,each:new V({required:!0,emptyAllowed:!1})})});function cd(e,t){if(!FD(e))throw te;let r=se(e),n=Ma(e),{dispatch:o}=e,a=()=>e.state,d=Be(e,bD,t?.options,"buildCoreResultList");d.fieldsToInclude&&o(bn(d.fieldsToInclude));let p=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,m=0,g=0,f=5,A=200,R=!1;return{...r,get state(){let v=a();return{...n.state,results:v.search.results,moreResultsAvailable:p(),searchResponseId:v.search.searchResponseId}},fetchMoreResults:async()=>{if(e.state.search.isLoading)return;if(!p()){e.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-m<A){if(g++,g>=f){m=Date.now(),!R&&e.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${f} times, with little delay. Please verify the conditions under which the function is called.`),R=!0;return}}else g=0;R=!1,t?.fetchMoreResultsActionCreator&&(await o(t?.fetchMoreResultsActionCreator()),m=Date.now())}}}function FD(e){return e.addReducers({search:me,configuration:le,fields:Na}),!0}var wD=new ge(ls);function hx(e,t,r){if(!ID(e))throw te;let n=cd(e,t),{dispatch:o}=e,a=()=>e.state,d=t.options?.folding?Be(e,wD,t.options.folding,"buildFoldedResultList"):{};return o(ja({...d})),{...n,loadCollection:p=>{o(t.loadCollectionActionCreator(p.result.raw[e.state.folding.fields.collection])),o(r.logShowMoreFoldedResults(p.result))},logShowMoreFoldedResults:p=>{o(r.logShowMoreFoldedResults(p))},logShowLessFoldedResults:()=>{o(r.logShowLessFoldedResults())},findResultById(p){return Yg(this.state.results,m=>m.result.uniqueId===p.result.uniqueId)},findResultByCollection(p){return Yg(this.state.results,m=>m.result.raw.foldingcollection===p.result.raw.foldingcollection)},get state(){let p=a();return{...n.state,results:n.state.results.map(m=>{let g=m.raw[p.folding.fields.collection];return!g||!p.folding.collections[g]?{result:m,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:p.folding.collections[g]})}}}}function ID(e){return e.addReducers({search:me,configuration:Nu,folding:od,query:xn}),!0}function Yg(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(t(n))return n;if(n.children.length){let o=Yg(n.children,t);if(o)return o}}return null}function Sx(e,t={}){let r=hx(e,{...t,loadCollectionActionCreator:td,fetchMoreResultsActionCreator:Bc},ux);return{...r,get state(){return r.state}}}l();s();u();c();l();s();u();c();var PD=()=>X("retryGeneratedAnswer")("analytics/generatedAnswer/retry",(e,t)=>e.logRetryGeneratedAnswer(K(t.insightCaseContext))),Kg=e=>X("openGeneratedAnswerSource")({prefix:"analytics/generatedAnswer/openAnswerSource",__legacy__getBuilder:(t,r)=>{let n=we(r),o=Bo(r,e);return!n||!o?null:t.logGeneratedAnswerCitationClick(Cc(o,r),{generativeQuestionAnsweringId:n,citationId:o.id,documentId:Ac(o)},K(r.insightCaseContext))},analyticsType:"Rga.CitationClick",analyticsPayloadBuilder:t=>{let r=Bo(t,e);return{answerId:we(t)??"",citationId:e,itemMetadata:{uniqueFieldName:"permanentid",uniqueFieldValue:r?.permanentid??"",title:r?.title,url:r?.clickUri}}}}),ED=(e,t)=>X("generatedAnswerSourceHover")({prefix:"analytics/generatedAnswer/hoverCitation",__legacy__getBuilder:(r,n)=>{let o=we(n),a=Bo(n,e);return!o||!a?null:r.logGeneratedAnswerSourceHover({generativeQuestionAnsweringId:o,permanentId:a.permanentid,citationId:a.id,citationHoverTimeMs:t},K(n.insightCaseContext))},analyticsType:"Rga.CitationHover",analyticsPayloadBuilder:r=>{let n=Bo(r,e);return{answerId:we(r)??"",citationId:e,itemMetadata:{uniqueFieldName:"permanentid",uniqueFieldValue:n?.permanentid??"",title:n?.title,url:n?.clickUri},citationHoverTimeInMs:t}}}),qD=()=>X("likeGeneratedAnswer")({prefix:"analytics/generatedAnswer/like",__legacy__getBuilder:(e,t)=>{let r=we(t);return r?e.logLikeGeneratedAnswer({generativeQuestionAnsweringId:r},K(t.insightCaseContext)):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:we(e)??"",action:"like"})}),TD=()=>X("dislikeGeneratedAnswer")({prefix:"analytics/generatedAnswer/dislike",__legacy__getBuilder:(e,t)=>{let r=we(t);return r?e.logDislikeGeneratedAnswer({generativeQuestionAnsweringId:r},K(t.insightCaseContext)):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:we(e)??"",action:"dislike"})}),kD=e=>X("generatedAnswerFeedbackSubmit")({prefix:"analytics/generatedAnswer/sendFeedback",__legacy__getBuilder:(t,r)=>{let n=we(r);return n?t.logGeneratedAnswerFeedbackSubmitV2({generativeQuestionAnsweringId:n,...e},K(r.insightCaseContext)):null},analyticsType:"Rga.SubmitFeedback",analyticsPayloadBuilder:t=>{let r=we(t),{helpful:n,readable:o,documented:a,hallucinationFree:d,correctTopic:p,documentUrl:m,details:g}=e;return{answerId:r??"",helpful:n,details:{readable:Gi(o),documented:Gi(a),correctTopic:Gi(p),hallucinationFree:Gi(d)},additionalNotes:g,correctAnswerUrl:m}}}),OD=e=>X("generatedAnswerStreamEnd")({prefix:"analytics/generatedAnswer/streamEnd",__legacy__getBuilder:(t,r)=>{let n=we(r),o=e?!r.generatedAnswer?.answer||!r.generatedAnswer?.answer.length:void 0;return n?t.logGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:n,answerGenerated:e,answerTextIsEmpty:o},K(r.insightCaseContext)):null},analyticsType:"Rga.AnswerReceived",analyticsPayloadBuilder:t=>({answerId:we(t)??"",answerGenerated:e})});var DD=()=>X("generatedAnswerShowAnswers")({prefix:"analytics/generatedAnswer/show",__legacy__getBuilder:(e,t)=>{let r=we(t);return r?e.logGeneratedAnswerShowAnswers({generativeQuestionAnsweringId:r},K(t.insightCaseContext)):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:we(e)??"",action:"show"})}),jD=()=>X("generatedAnswerHideAnswers")({prefix:"analytics/generatedAnswer/hide",__legacy__getBuilder:(e,t)=>{let r=we(t);return r?e.logGeneratedAnswerHideAnswers({generativeQuestionAnsweringId:r},K(t.insightCaseContext)):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:we(e)??"",action:"hide"})}),VD=()=>X("generatedAnswerExpand")({prefix:"analytics/generatedAnswer/expand",__legacy__getBuilder:(e,t)=>{let r=we(t);return r?e.logGeneratedAnswerExpand({generativeQuestionAnsweringId:r},K(t.insightCaseContext)):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:we(e)??"",action:"expand"})}),ND=()=>X("generatedAnswerCollapse")({prefix:"analytics/generatedAnswer/collapse",__legacy__getBuilder:(e,t)=>{let r=we(t);return r?e.logGeneratedAnswerCollapse({generativeQuestionAnsweringId:r},K(t.insightCaseContext)):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:we(e)??"",action:"collapse"})}),MD=()=>X("generatedAnswerCopyToClipboard")({prefix:"analytics/generatedAnswer/copy",__legacy__getBuilder:(e,t)=>{let r=we(t);return r?e.logGeneratedAnswerCopyToClipboard({generativeQuestionAnsweringId:r},K(t.insightCaseContext)):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:we(e)??"",action:"copyToClipboard"})}),ud={logCopyGeneratedAnswer:MD,logGeneratedAnswerHideAnswers:jD,logGeneratedAnswerShowAnswers:DD,logGeneratedAnswerStreamEnd:OD,logGeneratedAnswerFeedback:kD,logDislikeGeneratedAnswer:TD,logLikeGeneratedAnswer:qD,logHoverCitation:ED,logOpenGeneratedAnswerSource:Kg,logRetryGeneratedAnswer:PD,logGeneratedAnswerExpand:VD,logGeneratedAnswerCollapse:ND};l();s();u();c();l();s();u();c();l();s();u();c();function Jg(){return{id:"",isVisible:!0,isEnabled:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{contentFormat:["text/plain"]},feedbackModalOpen:!1,feedbackSubmitted:!1,fieldsToIncludeInCitations:[],isAnswerGenerated:!1,expanded:!1,cannotAnswer:!1,answerApiQueryParams:void 0,answerId:void 0,answerGenerationMode:"automatic"}}l();s();u();c();function ld(e){let t=new Set;return e.filter(r=>{let n=!t.has(r.uri);return n&&t.add(r.uri),n})}var Qa=ae(Jg(),e=>e.addCase(ga,(t,{payload:r})=>{t.isVisible=r}).addCase(zi,(t,{payload:r})=>{t.isEnabled=r}).addCase(bu,(t,{payload:r})=>{t.id=r.id}).addCase(Wn,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.answer||(t.answer=""),t.answer+=r.textDelta,delete t.error}).addCase(Yn,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.citations=ld([...t.citations,...r.citations]),delete t.error}).addCase($i,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!1,t.error={...r,isRetryable:r.code===rp},t.citations=[],delete t.answer}).addCase(Au,t=>{t.liked=!0,t.disliked=!1}).addCase(Ru,t=>{t.liked=!1,t.disliked=!0}).addCase(vu,t=>{t.feedbackModalOpen=!0}).addCase(Fu,t=>{t.feedbackModalOpen=!1}).addCase(fa,t=>{t.feedbackSubmitted=!0}).addCase(St,t=>({...Jg(),...t.answerConfigurationId?{answerConfigurationId:t.answerConfigurationId}:{},responseFormat:t.responseFormat,fieldsToIncludeInCitations:t.fieldsToIncludeInCitations,isVisible:t.isVisible,id:t.id})).addCase(tn,(t,{payload:r})=>{t.isLoading=r}).addCase(zn,(t,{payload:r})=>{t.isStreaming=r}).addCase(Kn,(t,{payload:r})=>{t.answerContentFormat=r}).addCase(wu,(t,{payload:r})=>{t.responseFormat=r}).addCase(Pu,(t,r)=>{t.fieldsToIncludeInCitations=[...new Set(t.fieldsToIncludeInCitations.concat(r.payload))]}).addCase(Hi,(t,{payload:r})=>{t.isAnswerGenerated=r}).addCase(Wi,t=>{t.expanded=!0}).addCase(xu,t=>{t.expanded=!1}).addCase(Iu,(t,{payload:r})=>{t.answerConfigurationId=r}).addCase(Jn,(t,{payload:r})=>{t.cannotAnswer=r}).addCase(Eu,(t,{payload:r})=>{t.answerApiQueryParams=r}).addCase(da,(t,{payload:r})=>{t.answerId=r}).addCase(Cu,(t,{payload:r})=>{t.answerGenerationMode=r}));l();s();u();c();function dd(e,t,r={}){if(!QD(e))throw te;let{dispatch:n}=e,o=se(e),a=()=>e.state,d=r.initialState?.isVisible;d!==void 0&&n(ga(d));let p=r.initialState?.responseFormat;p&&n(wu(p));let m=r.fieldsToIncludeInCitations;return m&&n(Pu(m)),r.initialState?.expanded&&n(Wi()),{...o,get state(){return a().generatedAnswer},like(){this.state.liked||(n(Au()),n(t.logLikeGeneratedAnswer()))},dislike(){this.state.disliked||(n(Ru()),n(t.logDislikeGeneratedAnswer()))},openFeedbackModal(){n(vu())},closeFeedbackModal(){n(Fu())},sendFeedback(f){n(t.logGeneratedAnswerFeedback(f)),n(fa())},logCitationClick(f){n(t.logOpenGeneratedAnswerSource(f))},logCitationHover(f,A){n(t.logHoverCitation(f,A))},show(){this.state.isVisible||(n(ga(!0)),n(t.logGeneratedAnswerShowAnswers()))},hide(){this.state.isVisible&&(n(ga(!1)),n(t.logGeneratedAnswerHideAnswers()))},expand(){this.state.expanded||(n(Wi()),n(t.logGeneratedAnswerExpand()))},collapse(){this.state.expanded&&(n(xu()),n(t.logGeneratedAnswerCollapse()))},enable(){this.state.isEnabled||n(zi(!0))},disable(){this.state.isEnabled&&n(zi(!1))},logCopyToClipboard(){n(t.logCopyGeneratedAnswer())},retry(){}}}function QD(e){return e.addReducers({generatedAnswer:Qa}),!0}var at={engines:{},setAbortControllerRef:(e,t)=>{at.engines[t].abortController=e},getIsStreamInProgress:e=>!at.engines[e].abortController||at.engines[e].abortController?.signal.aborted?(at.engines[e].abortController=void 0,!1):!0,subscribeToSearchRequests:e=>{let t=()=>{let r=e.state,n=r.search.requestId,o=r.search.extendedResults.generativeQuestionAnsweringId,a=r.generatedAnswer.id;if(at.engines[a].lastRequestId!==n){if(at.engines[a].lastRequestId=n,at.engines[a].abortController?.abort(),r.generatedAnswer.isEnabled===!1)return;e.dispatch(St())}if(!at.getIsStreamInProgress(a)&&o&&o!==at.engines[a].lastStreamId){if(at.engines[a].lastStreamId=o,r.generatedAnswer.isEnabled===!1)return;e.dispatch(IA({setAbortControllerRef:p=>at.setAbortControllerRef(p,a)}))}};return e.subscribe(t)}};function Cx(e,t,r={}){if(!LD(e))throw te;let n=dd(e,t,r),o=()=>e.state;if(e.state.generatedAnswer.id&&!at.engines[e.state.generatedAnswer.id]&&(at.engines[e.state.generatedAnswer.id]={abortController:void 0,lastRequestId:e.state.search.requestId,lastStreamId:e.state.search.extendedResults.generativeQuestionAnsweringId??""}),!e.state.generatedAnswer.id){let d=bs("genQA-",12);e.dispatch(bu({id:d}))}at.engines[e.state.generatedAnswer.id]||(at.engines[e.state.generatedAnswer.id]={abortController:void 0,lastRequestId:"",lastStreamId:""}),at.subscribeToSearchRequests(e);let a=d=>"executeFirstSearchAfterStandaloneSearchBoxRedirect"in d;return{...n,get state(){return o().generatedAnswer},retry(){a(e)&&e.dispatch(he({legacy:t.logRetryGeneratedAnswer()}))}}}function LD(e){return e.addReducers({generatedAnswer:Qa}),!0}l();s();u();c();l();s();u();c();var Ax=pu.injectEndpoints({endpoints:e=>({post:e.query({query:t=>({url:"/evaluations",method:"POST",body:t})})})});var pd=e=>e==="yes"?!0:e==="no"?!1:null,_D=({answerApiState:e,feedback:t,query:r})=>({additionalNotes:t.details??null,answer:{text:e.answer,responseId:e.answerId,format:e.contentFormat??"text/plain"},correctAnswerUrl:t.documentUrl??null,details:{correctTopic:pd(t.correctTopic),documented:pd(t.documented),hallucinationFree:pd(t.hallucinationFree),readable:pd(t.readable)},helpful:t.helpful,question:r}),UD=e=>{let t="",r=()=>{let n=e.state,o=BC(n),a=o.requestId;a!==t&&(t=a,e.dispatch(St()),o.q?.length>0&&e.dispatch(qu()))};e.subscribe(r)};function Rx(e,t,r={}){if(!BD(e))throw te;Mu(e.state.configuration.analytics.analyticsMode);let{...n}=dd(e,t,r),o=()=>e.state;return e.dispatch(Iu(r.answerConfigurationId)),UD(e),{...n,get state(){let a=yg(e.state).data,d=o().generatedAnswer;return{...d,answer:a?.answer,citations:ld(a?.citations??[]),error:{message:a?.error?.message,statusCode:a?.error?.code},isLoading:a?.isLoading??!1,isStreaming:a?.isStreaming??!1,answerContentFormat:a?.contentFormat??"text/plain",isAnswerGenerated:a?.generated??!1,cannotAnswer:d.cannotAnswer||a?.generated===!1&&!a?.isLoading&&!a?.isStreaming}},retry(){let a=mu(o());e.dispatch(Tu(a??$n))},reset(){e.dispatch(St())},async sendFeedback(a){e.dispatch(t.logGeneratedAnswerFeedback(a));let d=_D({query:o().query.q,feedback:a,answerApiState:yg(e.state).data});e.dispatch(Ax.endpoints.post.initiate(d)),e.dispatch(fa())}}}function BD(e){return e.addReducers({[Xn.reducerPath]:Xn.reducer,query:xn}),!0}function vx(e,t={}){let{dispatch:r}=e,n=t.answerConfigurationId?Rx(e,ud,t):Cx(e,ud,t);return{...n,get state(){return n.state},retry(){r(ue({legacy:ud.logRetryGeneratedAnswer(),next:lA()}))}}}l();s();u();c();l();s();u();c();l();s();u();c();function yr(e,t,r){if(!GD(e))throw te;let n=1e3,o={selectionDelay:n,debounceWait:n,...t.options},a;return{select:Ps(r,o.debounceWait,{isImmediate:!0}),beginDelayedSelect(){a=setTimeout(r,o.selectionDelay)},cancelPendingSelect(){a&&clearTimeout(a)}}}function GD(e){return e.addReducers({configuration:le}),!0}function xx(e,t,r){let n=!1,o=()=>{n||(n=!0,e.dispatch(t.logOpenGeneratedAnswerSource(r.options.citation.id)))};return yr(e,r,()=>{o()})}function bx(e,t){return xx(e,{logOpenGeneratedAnswerSource:Kg},t)}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var WD=new Y({min:1,default:8,required:!1}),YD=new Y({min:1,max:20,default:5,required:!1}),KD={desiredCount:YD,numberOfValues:WD},uOe=w("automaticFacet/setOptions",e=>P(e,KD)),lOe=w("automaticFacet/deselectAll",e=>P(e,ce)),JD=Q,Fx=w("automaticFacet/toggleSelectValue",e=>P(e,{field:JD,selection:new _({values:eo})}));var _a=ae(Xt(),e=>{e.addCase(Yc,(t,r)=>{let n=Xg(t),o=r.payload;t.defaultNumberOfResults=t.numberOfResults=o,t.firstResult=ms(n,o)}).addCase(Kc,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(wr,t=>{t.firstResult=0}).addCase(Jc,(t,r)=>{let n=r.payload;t.firstResult=ms(n,t.numberOfResults)}).addCase(zr,(t,r)=>{let n=r.payload;t.firstResult=ms(n,t.numberOfResults)}).addCase(Zc,t=>{let r=Xg(t),n=Math.max(r-1,1);t.firstResult=ms(n,t.numberOfResults)}).addCase(Xc,t=>{let r=Xg(t),n=XD(t),o=Math.min(r+1,n);t.firstResult=ms(o,t.numberOfResults)}).addCase(je.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(Ve,(t,r)=>{t.firstResult=r.payload.firstResult??t.firstResult,t.numberOfResults=r.payload.numberOfResults??t.defaultNumberOfResults}).addCase(he.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase(tr.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase(Ge,t=>{it(t)}).addCase(lr,t=>{it(t)}).addCase(un,t=>{it(t)}).addCase(gr,t=>{it(t)}).addCase(rl,t=>{it(t)}).addCase(cn,t=>{it(t)}).addCase(sn,t=>{it(t)}).addCase(va,t=>{it(t)}).addCase($u,t=>{it(t)}).addCase(ur,t=>{it(t)}).addCase(mr,t=>{it(t)}).addCase(ht,t=>{it(t)}).addCase(qr,t=>{it(t)}).addCase(Tr,t=>{it(t)}).addCase(tl,t=>{it(t)}).addCase(Fx,t=>{it(t)})});function it(e){e.firstResult=Xt().firstResult}function Xg(e){let{firstResult:t,numberOfResults:r}=e;return Zg(t,r)}function XD(e){let{totalCountFiltered:t,numberOfResults:r}=e;return ef(t,r)}function ms(e,t){return(e-1)*t}function Zg(e,t){return Math.round(e/t)+1}function ef(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}function ZD(e){return e.pagination.firstResult}function wx(e){return e.pagination.numberOfResults}function ej(e){return e.pagination.totalCountFiltered}var Fn=e=>{let t=ZD(e),r=wx(e);return Zg(t,r)},tf=e=>{let t=ej(e),r=wx(e);return ef(t,r)},Ix=(e,t)=>{let r=Fn(e),n=tf(e),o=tj(r,t);return o=rj(o),o=nj(o,n),oj(o)};function tj(e,t){let r=t%2===0,n=Math.floor(t/2),o=r?n-1:n,a=e-n,d=e+o;return{start:a,end:d}}function rj(e){let t=Math.max(1-e.start,0),r=e.start+t,n=e.end+t;return{start:r,end:n}}function nj(e,t){let r=Math.max(e.end-t,0),n=Math.max(e.start-r,1),o=e.end-r;return{start:n,end:o}}function oj(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var rf=()=>Te("analytics/pager/resize",(e,t)=>e.makePagerResize({currentResultsPerPage:t.pagination?.numberOfResults||Xt().numberOfResults}));var Ua=()=>({actionCause:"browseResults"});l();s();u();c();l();s();u();c();var md=()=>X("pagerNumber")("analytics/pager/number",(e,t)=>e.logPagerNumber({pagerNumber:Fn(t),...K(t.insightCaseContext)})),gd=()=>X("pagerNext")("analytics/pager/next",(e,t)=>e.logPagerNext({pagerNumber:Fn(t),...K(t.insightCaseContext)})),fd=()=>X("pagerPrevious")("analytics/pager/previous",(e,t)=>e.logPagerPrevious({pagerNumber:Fn(t),...K(t.insightCaseContext)}));l();s();u();c();var aj=new ge({numberOfPages:new Y({default:5,min:0})}),ij=new ge({page:new Y({min:1})});function Px(e,t={}){if(!sj(e))throw te;let r=se(e),{dispatch:n}=e,o=Be(e,aj,t.options,"buildPager"),d=It(e,ij,t.initialState,"buildPager").page;d&&n(Jc(d));let p=()=>Fn(e.state),m=()=>{let{numberOfPages:f}=o;return Ix(e.state,f)},g=()=>tf(e.state);return{...r,get state(){let f=p(),A=g(),R=f>1&&A>0,C=f<A;return{currentPage:f,currentPages:m(),maxPage:A,hasPreviousPage:R,hasNextPage:C}},selectPage(f){n(zr(f))},nextPage(){n(Xc())},previousPage(){n(Zc())},isCurrentPage(f){return f===this.state.currentPage}}}function sj(e){return e.addReducers({configuration:le,pagination:_a}),!0}function Ex(e,t={}){let{dispatch:r}=e,n=Px(e,t);return{...n,get state(){return n.state},selectPage(o){n.selectPage(o),r(Uc({legacy:md(),next:Ua()}))},nextPage(){n.nextPage(),r(Uc({legacy:gd(),next:Ua()}))},previousPage(){n.previousPage(),r(Uc({legacy:fd(),next:Ua()}))}}}l();s();u();c();l();s();u();c();function qx(e){if(!cj(e))throw te;let t=se(e),r=()=>e.state;return{...t,get state(){return{hasError:r().search.error!==null,error:r().search.error}}}}function cj(e){return e.addReducers({search:me}),!0}function Tx(e){return qx(e)}l();s();u();c();l();s();u();c();function kx(e){if(!uj(e))throw te;let t=se(e),r=Ma(e),n=()=>e.state,o=()=>{let a=n().search.duration/1e3;return Math.round((a+Number.EPSILON)*100)/100};return{...t,get state(){return{...r.state,durationInMilliseconds:n().search.duration,durationInSeconds:o(),firstResult:n().pagination.firstResult+1,hasDuration:n().search.duration!==0,hasQuery:n().search.queryExecuted!=="",lastResult:n().pagination.firstResult+n().search.results.length,query:n().search.queryExecuted,total:n().pagination.totalCountFiltered}}}}function uj(e){return e.addReducers({search:me,pagination:_a}),!0}function Ox(e){return kx(e)}l();s();u();c();l();s();u();c();async function Dx(e,t){let{accessToken:r,organizationId:n,environment:o}=e.configuration,{insightId:a}=e.insightConfiguration,d=e.query?.q||"";return{url:gp({url:be(n,o),accessToken:r,organizationId:n,insightId:a}),accessToken:r,organizationId:n,enableNavigation:!1,q:d,...t,requestedOutputSize:t.requestedOutputSize||0}}l();s();u();c();var jx=e=>X("")({prefix:"analytics/resultPreview/open",__legacy__getBuilder:(t,r)=>{et(e);let n=Oe(e,r),o=De(e);t.logDocumentQuickview(n,o)},analyticsType:"InsightPanel.ItemAction",analyticsPayloadBuilder:t=>{let r=Oe(e,t);return{action:"preview",itemMetadata:Qt(e,t),position:r.documentPosition,responseId:e.searchUid||"",context:_t(t)}}});l();s();u();c();function Vx(e,t,r,n,o){if(!lj(e))throw te;let{dispatch:a}=e,d=()=>e.state,p=se(e),{result:m,maximumPreviewSize:g}=t.options,f=()=>{let{resultsWithPreview:R,position:C}=d().resultPreview;return R[C]},A=R=>{a(ou({uniqueId:R,requestedOutputSize:g,buildResultPreviewRequest:r,path:n})),t.options.onlyContentURL||a(Li({uniqueId:R,requestedOutputSize:g})),o&&o()};return{...p,fetchResultContent(){A(m.uniqueId)},next(){a(ru()),A(f())},previous(){a(nu()),A(f())},get state(){let R=d(),C=m.hasHtmlVersion,v=R.resultPreview,b=m.uniqueId===v.uniqueId?v.content:"",x=v.isLoading,F=v.contentURL,E=f();return{content:b,resultHasPreview:C,isLoading:x,contentURL:F,currentResultUniqueId:E}}}}function lj(e){return e.addReducers({configuration:le,resultPreview:oa}),!0}function Nx(e,t){if(!dj(e))throw te;let r=()=>{e.dispatch(jx(t.options.result))},n="/quickview",o={options:{...t.options,onlyContentURL:!0}};return Vx(e,o,(a,d)=>Dx(a,d),n,r)}function dj(e){return e.addReducers({configuration:le,resultPreview:oa,insightInterface:Br}),!0}l();s();u();c();l();s();u();c();var Mx=()=>X("clearRecentQueries")("analytics/recentQueries/clear",(e,t)=>e.logClearRecentQueries(K(t.insightCaseContext))),Qx=()=>X("recentQueriesClick")("analytics/recentQueries/click",(e,t)=>e.logRecentQueryClick(K(t.insightCaseContext)));l();s();u();c();l();s();u();c();var pj={queries:new ee({required:!0,each:new V({emptyAllowed:!1})}),maxLength:new Y({required:!0,min:1,default:10})},gs=w("recentQueries/registerRecentQueries",e=>P(e,pj)),yd=w("recentQueries/clearRecentQueries");l();s();u();c();l();s();u();c();function Lx(){return{queries:[],maxLength:10}}var _x=ae(Lx(),e=>{e.addCase(gs,mj).addCase(yd,gj).addCase(he.fulfilled,(t,r)=>{let n=r.payload.queryExecuted,o=r.payload.response.results;!n.length||!o.length||fj(n,t)})});function mj(e,t){e.queries=Array.from(new Set(t.payload.queries.map(r=>r.trim().toLowerCase()))).slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}function gj(e){e.queries=[]}function fj(e,t){let r=e.trim().toLowerCase();if(r==="")return;let n=Array.from(new Set(t.queries.filter(o=>o.trim().toLowerCase()!==r))).slice(0,t.maxLength-1);t.queries=[r,...n]}var yj={queries:[]},hj={maxLength:10,clearFilters:!0},Sj=new ge({queries:new ee({required:!0})}),Cj=new ge({maxLength:new Y({required:!0,min:1}),clearFilters:new oe});function Aj(e,t){Be(e,Cj,t?.options,"buildRecentQueriesList"),It(e,Sj,t?.initialState,"buildRecentQueriesList")}function Ux(e,t){if(!Rj(e))throw te;let r=se(e),{dispatch:n}=e,o=()=>e.state,a={...hj,...t?.options},d={...yj,...t?.initialState};Aj(e,{options:a,initialState:d});let p={queries:d.queries,maxLength:a.maxLength};return n(gs(p)),{...r,get state(){let m=o();return{...m.recentQueries,analyticsEnabled:m.configuration.analytics.enabled}},clear(){n(yd())},updateRecentQueries(m){let g=new ee({required:!0,each:new V({required:!0}),min:1}).validate(m);if(g)throw new Error(g);n(gs({queries:m,maxLength:a.maxLength}))},executeRecentQuery(m){let g=new Y({required:!0,min:0,max:this.state.queries.length}).validate(m);if(g)throw new Error(g);let f={q:this.state.queries[m],clearFilters:a.clearFilters};xs(e.state.query?.enableQuerySyntax)&&(f.enableQuerySyntax=e.state.query.enableQuerySyntax),n(ra(f))}}}function Rj(e){return e.addReducers({search:me,recentQueries:_x,query:xn}),!0}function Bx(e,t){let r=Ux(e,t),{dispatch:n}=e;return{...r,get state(){return r.state},clear(){n(Mx()),r.clear()},executeRecentQuery(o){r.executeRecentQuery(o),n(ue({legacy:Qx(),next:{actionCause:"recentQueriesClick"}}))}}}l();s();u();c();l();s();u();c();var vj={results:new ee({required:!0,each:new _({values:Rc})}),maxLength:new Y({required:!0,min:1,default:10})},hd=w("recentResults/registerRecentResults",e=>P(e,vj)),hr=w("recentResults/pushRecentResult",e=>(et(e),{payload:e})),Sd=w("recentResults/clearRecentResults");l();s();u();c();var Gx=e=>X("documentOpen")({prefix:"analytics/insight/result/open",__legacy__getBuilder:(t,r)=>{et(e);let n=K(r.insightCaseContext);return t.logDocumentOpen(Oe(e,r),De(e),n)},analyticsType:"InsightPanel.ItemAction",analyticsPayloadBuilder:t=>{let r=Oe(e,t);return{itemMetadata:Qt(e,t),position:r.documentPosition,responseId:e.searchUid||"",action:"open",context:_t(t)}}});function $x(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(Gx(t.options.result)))};return yr(e,t,()=>{n(),e.dispatch(hr(t.options.result))})}l();s();u();c();function Hx(e,t){return cd(e,{...t,fetchMoreResultsActionCreator:Bc})}l();s();u();c();l();s();u();c();var xj=new ge({numberOfResults:new Y({min:0})});function zx(e,t={}){if(!bj(e))throw te;let r=se(e),{dispatch:n}=e,o=()=>e.state,d=It(e,xj,t.initialState,"buildResultsPerPage").numberOfResults;return d!==void 0&&n(Yc(d)),{...r,get state(){return{numberOfResults:o().pagination.numberOfResults}},set(p){n(Kc(p))},isSetTo(p){return p===this.state.numberOfResults}}}function bj(e){return e.addReducers({pagination:_a,configuration:le}),!0}function Wx(e,t={}){let r=zx(e,t),{dispatch:n}=e;return{...r,get state(){return{...r.state}},set(o){r.set(o),n(ue({legacy:rf(),next:Ua()}))}}}l();s();u();c();l();s();u();c();var nf=()=>Te("analytics/searchbox/submit",e=>e.makeSearchboxSubmit()),Cd=()=>({actionCause:"searchboxSubmit"});l();s();u();c();var Ad=()=>X("searchboxSubmit")("analytics/searchbox/submit",(e,t)=>e.logSearchboxSubmit(K(t.insightCaseContext)));l();s();u();c();l();s();u();c();var fs={id:Q,query:qe},Ba=w("querySet/register",e=>P(e,fs)),io=w("querySet/update",e=>P(e,fs));l();s();u();c();l();s();u();c();var Yx=w("commerce/querySet/register",e=>P(e,fs)),Kx=w("commerce/querySet/update",e=>P(e,fs));l();s();u();c();l();s();u();c();l();s();u();c();var Jx={f:new _,fExcluded:new _,lf:new _,cf:new _,nf:new _,nfExcluded:new _,mnf:new _,mnfExcluded:new _,df:new _,dfExcluded:new _,sortCriteria:new _,page:new Y({min:0}),perPage:new Y({min:1})};var Xx={q:new V,...Jx};var Zx=w("commerce/searchParameters/restore",e=>P(e,Xx));var Ga=ae(Nc(),e=>{e.addCase(Ba,(t,r)=>tb(t,r.payload)).addCase(Yx,(t,r)=>tb(t,r.payload)).addCase(io,(t,r)=>{let{id:n,query:o}=r.payload;ys(t,n,o)}).addCase(Kx,(t,r)=>{let{id:n,query:o}=r.payload;ys(t,n,o)}).addCase(Rn,(t,r)=>{let{id:n,expression:o}=r.payload;ys(t,n,o)}).addCase(dv,(t,r)=>{let{id:n,expression:o}=r.payload;ys(t,n,o)}).addCase(Oa.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;of(t,n)}).addCase(he.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;of(t,n)}).addCase(Ve,eb).addCase(Zx,eb).addCase(je.fulfilled,(t,r)=>{if(r.payload)for(let[n,o]of Object.entries(r.payload.querySet))ys(t,n,o)})});function eb(e,t){W(t.payload.q)||of(e,t.payload.q)}function of(e,t){Object.keys(e).forEach(r=>{e[r]=t})}var ys=(e,t,r)=>{t in e&&(e[t]=r)},tb=(e,t)=>{let{id:r,query:n}=t;r in e||(e[r]=n)};l();s();u();c();var rb=e=>Te("analytics/querySuggest",(t,r)=>{let n=Fj(r,e);return t.makeOmniboxAnalytics(n)}),nb=()=>({actionCause:"omniboxAnalytics"});function Fj(e,t){let{id:r,suggestion:n}=t,o=e.querySuggest?.[r];if(!o)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let a=o.completions.map(g=>g.expression),d=o.partialQueries.length-1,p=o.partialQueries[d]||"",m=o.responseId;return{suggestionRanking:a.indexOf(n),partialQuery:p,partialQueries:o.partialQueries,suggestions:a,querySuggestResponseId:m}}l();s();u();c();l();s();u();c();var ob=()=>({});var Rd=ae(ob(),e=>e.addCase(An,(t,r)=>{ab(t,r.payload)}).addCase(lv,(t,r)=>{ab(t,r.payload)}).addCase(gx,(t,r)=>{delete t[r.payload.id]}).addCase(Va.pending,ib).addCase(Va.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{q:o}=r.payload;o&&n.partialQueries.push(o.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions,n.isLoading=!1,n.error=null}).addCase(Va.rejected,sb).addCase(fn.pending,ib).addCase(fn.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{query:o}=r.payload;o&&n.partialQueries.push(o.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions.map(a=>({expression:a.expression,highlighted:a.highlighted,score:0,executableConfidence:0})),n.isLoading=!1,n.error=null}).addCase(fn.rejected,sb).addCase(vn,(t,r)=>{cb(t,r.payload)}).addCase(uv,(t,r)=>{cb(t,r.payload)}).addCase(aa,(t,r)=>{Object.keys(t).forEach(n=>{let o=t[n];o&&(o.error=r.payload,o.isLoading=!1)})}));function ab(e,t){let r=t.id;r in e||(e[r]=wj(t))}function wj(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}function ib(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function sb(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1)}function cb(e,t){let r=e[t.id];r&&(r.responseId="",r.completions=[],r.partialQueries=[])}l();s();u();c();var ub={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},af={open:new V,close:new V},Ij={id:Q,numberOfSuggestions:new Y({min:0}),enableQuerySyntax:new oe,highlightOptions:new _({values:{notMatchDelimiters:new _({values:af}),exactMatchDelimiters:new _({values:af}),correctionDelimiters:new _({values:af})}}),clearFilters:new oe},lb=new ge(Ij);function db(e,t){if(!Ej(e))throw te;let r=se(e),{dispatch:n}=e,o=()=>e.state,a=t.options?.id||bs("search_box"),d={id:a,highlightOptions:{...t.options?.highlightOptions},...ub,...t.options};Be(e,lb,d,"buildSearchBox"),n(Ba({id:a,query:e.state.query.q})),d.numberOfSuggestions&&n(An({id:a,count:d.numberOfSuggestions})),d.enableQuerySyntax&&n(ct({enableQuerySyntax:d.enableQuerySyntax}));let p=()=>e.state.querySet[d.id],m=async g=>{let{enableQuerySyntax:f,clearFilters:A}=d;n(ra({q:p(),enableQuerySyntax:f,clearFilters:A})),t.isNextAnalyticsReady?n(t.executeSearchActionCreator(g)):n(t.executeSearchActionCreator(g.legacy))};return{...r,updateText(g){n(io({id:a,query:g})),this.showSuggestions()},clear(){n(io({id:a,query:""})),n(vn({id:a}))},showSuggestions(){d.numberOfSuggestions&&n(t.fetchQuerySuggestionsActionCreator({id:a}))},selectSuggestion(g){n(Rn({id:a,expression:g})),m({legacy:rb({id:a,suggestion:g}),next:nb()}).then(()=>{n(vn({id:a}))})},submit(g=nf(),f){m({legacy:g,next:f}),n(vn({id:a}))},get state(){let g=o(),f=g.querySuggest[d.id],A=Pj(f,d.highlightOptions),R=f?f.isLoading:!1;return{searchBoxId:a,value:p(),suggestions:A,isLoading:g.search.isLoading,isLoadingSuggestions:R}}}}function Pj(e,t){return e?e.completions.map(r=>({highlightedValue:Jd(r.highlighted,t),rawValue:r.expression})):[]}function Ej(e){return e.addReducers({query:xn,querySuggest:Rd,configuration:le,querySet:Ga,search:me}),!0}function pb(e,t={}){let r=db(e,{...t,executeSearchActionCreator:ue,fetchQuerySuggestionsActionCreator:Gc,isNextAnalyticsReady:!0});return{...r,submit(){r.submit(Ad(),Cd())},get state(){return r.state}}}l();s();u();c();l();s();u();c();l();s();u();c();var vd=()=>({actionCause:"resultsSort"});function mb(e,t){return e.q!==t.q?Cd():e.sortCriteria!==t.sortCriteria?vd():$a(e.f,t.f)?Ha(e.f,t.f):$a(e.fExcluded,t.fExcluded)?Ha(e.fExcluded,t.fExcluded,!0):$a(e.cf,t.cf)?Ha(e.cf,t.cf):$a(e.af,t.af)?Ha(e.af,t.af):$a(e.nf,t.nf)?Ha(xd(e.nf),xd(t.nf)):$a(e.df,t.df)?Ha(xd(e.df),xd(t.df)):Ho()}function $a(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function Ha(e={},t={},r=!1){let n=Object.keys(e),o=Object.keys(t),a=n.filter(R=>!o.includes(R));if(a.length){let R=a[0];return e[R].length>1?At():Pr()}if(o.filter(R=>!n.includes(R)).length)return r?Zu():bt();let p=o.find(R=>t[R].filter(C=>e[R].includes(C)));if(!p)return Ho();let m=e[p],g=t[p];return g.filter(R=>!m.includes(R)).length?r?Zu():bt():m.filter(R=>!g.includes(R)).length?Pr():Ho()}function xd(e={}){let t={};return Object.keys(e).forEach(r=>{t[r]=e[r].map(n=>`${n.start}..${n.end}`)}),t}l();s();u();c();l();s();u();c();var za=()=>X("resultsSort")("analytics/sort/results",(e,t)=>e.logResultsSort({resultsSortBy:t.sortCriteria||xt(),...K(t.insightCaseContext)}));function yb(e,t){return e.q!==t.q?Ad():e.sortCriteria!==t.sortCriteria?za():hs(e.f,t.f)?hs(e.cf,t.cf)?hs(e.nf,t.nf)?hs(e.df,t.df)?hs(e.fExcluded,t.fExcluded)?Hr():qj(e.fExcluded,t.fExcluded):fb(e.df,t.df):fb(e.nf,t.nf):bd(e.cf,t.cf):bd(e.f,t.f)}function hs(e={},t={}){return JSON.stringify(e)===JSON.stringify(t)}function gb(e){let t={};return Object.keys(e).forEach(r=>{t[r]=e[r].map(n=>`${n.start}..${n.end}`)}),t}function bd(e={},t={},r=!1){let n=Object.keys(e),o=Object.keys(t),a=n.filter(R=>!o.includes(R));if(a.length){let R=a[0];return e[R].length>1?nt(R):(r?wa:Bt)({facetId:R,facetValue:e[R][0]})}let d=o.filter(R=>!n.includes(R));if(d.length){let R=d[0];return lt({facetId:R,facetValue:t[R][0]})}let p=o.find(R=>t[R].filter(C=>e[R].includes(C)));if(!p)return Hr();let m=e[p],g=t[p],f=g.filter(R=>!m.includes(R));if(f.length)return lt({facetId:p,facetValue:f[0]});let A=m.filter(R=>!g.includes(R));return A.length?(r?wa:Bt)({facetId:p,facetValue:A[0]}):Hr()}function fb(e={},t={}){return bd(gb(e),gb(t))}function qj(e={},t={}){return bd(e,t,!0)}l();s();u();c();l();s();u();c();var Tj=Object.getOwnPropertyNames,kj=Object.getOwnPropertySymbols,Oj=Object.prototype.hasOwnProperty;function hb(e,t){return function(n,o,a){return e(n,o,a)&&t(n,o,a)}}function Fd(e){return function(r,n,o){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,o);var a=o.cache,d=a.get(r),p=a.get(n);if(d&&p)return d===n&&p===r;a.set(r,n),a.set(n,r);var m=e(r,n,o);return a.delete(r),a.delete(n),m}}function Sb(e){return Tj(e).concat(kj(e))}var Dj=Object.hasOwn||function(e,t){return Oj.call(e,t)};function so(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var jj="__v",Vj="__o",Nj="_owner",Cb=Object.getOwnPropertyDescriptor,Ab=Object.keys;function Mj(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Qj(e,t){return so(e.getTime(),t.getTime())}function Lj(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function _j(e,t){return e===t}function Rb(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var o=new Array(n),a=e.entries(),d,p,m=0;(d=a.next())&&!d.done;){for(var g=t.entries(),f=!1,A=0;(p=g.next())&&!p.done;){if(o[A]){A++;continue}var R=d.value,C=p.value;if(r.equals(R[0],C[0],m,A,e,t,r)&&r.equals(R[1],C[1],R[0],C[0],e,t,r)){f=o[A]=!0;break}A++}if(!f)return!1;m++}return!0}var Uj=so;function Bj(e,t,r){var n=Ab(e),o=n.length;if(Ab(t).length!==o)return!1;for(;o-- >0;)if(!Fb(e,t,r,n[o]))return!1;return!0}function Ss(e,t,r){var n=Sb(e),o=n.length;if(Sb(t).length!==o)return!1;for(var a,d,p;o-- >0;)if(a=n[o],!Fb(e,t,r,a)||(d=Cb(e,a),p=Cb(t,a),(d||p)&&(!d||!p||d.configurable!==p.configurable||d.enumerable!==p.enumerable||d.writable!==p.writable)))return!1;return!0}function Gj(e,t){return so(e.valueOf(),t.valueOf())}function $j(e,t){return e.source===t.source&&e.flags===t.flags}function vb(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var o=new Array(n),a=e.values(),d,p;(d=a.next())&&!d.done;){for(var m=t.values(),g=!1,f=0;(p=m.next())&&!p.done;){if(!o[f]&&r.equals(d.value,p.value,d.value,p.value,e,t,r)){g=o[f]=!0;break}f++}if(!g)return!1}return!0}function Hj(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function zj(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Fb(e,t,r,n){return(n===Nj||n===Vj||n===jj)&&(e.$$typeof||t.$$typeof)?!0:Dj(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var Wj="[object Arguments]",Yj="[object Boolean]",Kj="[object Date]",Jj="[object Error]",Xj="[object Map]",Zj="[object Number]",eV="[object Object]",tV="[object RegExp]",rV="[object Set]",nV="[object String]",oV="[object URL]",aV=Array.isArray,xb=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,bb=Object.assign,iV=Object.prototype.toString.call.bind(Object.prototype.toString);function sV(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,o=e.areFunctionsEqual,a=e.areMapsEqual,d=e.areNumbersEqual,p=e.areObjectsEqual,m=e.arePrimitiveWrappersEqual,g=e.areRegExpsEqual,f=e.areSetsEqual,A=e.areTypedArraysEqual,R=e.areUrlsEqual;return function(v,b,x){if(v===b)return!0;if(v==null||b==null)return!1;var F=typeof v;if(F!==typeof b)return!1;if(F!=="object")return F==="number"?d(v,b,x):F==="function"?o(v,b,x):!1;var E=v.constructor;if(E!==b.constructor)return!1;if(E===Object)return p(v,b,x);if(aV(v))return t(v,b,x);if(xb!=null&&xb(v))return A(v,b,x);if(E===Date)return r(v,b,x);if(E===RegExp)return g(v,b,x);if(E===Map)return a(v,b,x);if(E===Set)return f(v,b,x);var I=iV(v);return I===Kj?r(v,b,x):I===tV?g(v,b,x):I===Xj?a(v,b,x):I===rV?f(v,b,x):I===eV?typeof v.then!="function"&&typeof b.then!="function"&&p(v,b,x):I===oV?R(v,b,x):I===Jj?n(v,b,x):I===Wj?p(v,b,x):I===Yj||I===Zj||I===nV?m(v,b,x):!1}}function cV(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,o={areArraysEqual:n?Ss:Mj,areDatesEqual:Qj,areErrorsEqual:Lj,areFunctionsEqual:_j,areMapsEqual:n?hb(Rb,Ss):Rb,areNumbersEqual:Uj,areObjectsEqual:n?Ss:Bj,arePrimitiveWrappersEqual:Gj,areRegExpsEqual:$j,areSetsEqual:n?hb(vb,Ss):vb,areTypedArraysEqual:n?Ss:Hj,areUrlsEqual:zj};if(r&&(o=bb({},o,r(o))),t){var a=Fd(o.areArraysEqual),d=Fd(o.areMapsEqual),p=Fd(o.areObjectsEqual),m=Fd(o.areSetsEqual);o=bb({},o,{areArraysEqual:a,areMapsEqual:d,areObjectsEqual:p,areSetsEqual:m})}return o}function uV(e){return function(t,r,n,o,a,d,p){return e(t,r,p)}}function lV(e){var t=e.circular,r=e.comparator,n=e.createState,o=e.equals,a=e.strict;if(n)return function(m,g){var f=n(),A=f.cache,R=A===void 0?t?new WeakMap:void 0:A,C=f.meta;return r(m,g,{cache:R,equals:o,meta:C,strict:a})};if(t)return function(m,g){return r(m,g,{cache:new WeakMap,equals:o,meta:void 0,strict:a})};var d={cache:void 0,equals:o,meta:void 0,strict:a};return function(m,g){return r(m,g,d)}}var e0e=Sr(),t0e=Sr({strict:!0}),r0e=Sr({circular:!0}),n0e=Sr({circular:!0,strict:!0}),o0e=Sr({createInternalComparator:function(){return so}}),a0e=Sr({strict:!0,createInternalComparator:function(){return so}}),i0e=Sr({circular:!0,createInternalComparator:function(){return so}}),s0e=Sr({circular:!0,createInternalComparator:function(){return so},strict:!0});function Sr(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,o=e.createState,a=e.strict,d=a===void 0?!1:a,p=cV(e),m=sV(p),g=n?n(m):uV(m);return lV({circular:r,comparator:m,createState:o,equals:g,strict:d})}function wb(e,t,r=(n,o)=>n===o){return e.length===t.length&&e.findIndex((n,o)=>!r(t[o],n))===-1}function dV(e,t){return e.length!==t.length?!1:e.every(r=>t.findIndex(n=>sf(r,n))!==-1)}var sf=Sr({createCustomConfig:e=>({...e,areArraysEqual:dV})});l();s();u();c();l();s();u();c();function Ib(e){return{q:Me().q,enableQuerySyntax:Me().enableQuerySyntax,aq:e.advancedSearchQueries?.defaultFilters.aq??br().defaultFilters.aq,cq:e.advancedSearchQueries?.defaultFilters.cq??br().defaultFilters.cq,firstResult:Xt().firstResult,numberOfResults:e.pagination?.defaultNumberOfResults??Xt().defaultNumberOfResults,sortCriteria:xt(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:jc(),sf:{},tab:"",af:{},mnf:{}}}var pV=new ge({parameters:new _({options:{required:!0},values:ku})});function Eb(e,t){let{dispatch:r}=e,n=se(e);It(e,pV,t.initialState,"buildSearchParameterManager");let o=Pb(e.state.tabSet,t.initialState.parameters);return r(Ve(o)),{...n,synchronize(a){let d=Pb(e.state.tabSet,wd(e,a));r(Ve(d))},get state(){return{parameters:cf(e)}}}}function wd(e,t){return{...Ib(e.state),...t}}function Pb(e,t){if(t.tab&&e){let r=Object.values(e).some(o=>o.id===t.tab),n=Object.values(e).find(o=>o.isActive);if(!r&&n)return{...t,tab:n.id};if(!r)return{...t,tab:""}}return t}function cf(e){let t=e.state;return{..._g(t.query,r=>r.q,Me().q),...hv(t.tabSet,r=>{let n=Object.values(r??{}).find(o=>o.isActive);return n?n.id:Object.keys(r??{})[0]},t.tabSet?Object.keys(t.tabSet)[0]:""),...Ug(t.sortCriteria,r=>r,xt()),...oo(t.facetSet,Cs(t),mV,"f"),...oo(t.facetSet,Cs(t),gV,"fExcluded"),...fV(t),...yV(t),...hV(t),...SV(t)}}function Cs(e){return t=>e.facetOptions?.facets[t]?.enabled??!0}function mV(e){return e.currentValues.filter(t=>t.state==="selected").map(t=>t.value)}function qb(e){return e.currentValues.filter(t=>t.state==="selected")}function gV(e){return e.currentValues.filter(t=>t.state==="excluded").map(t=>t.value)}function fV(e){return oo(e.categoryFacetSet,Cs(e),t=>Mt(t.currentValues).map(r=>r.value),"cf")}function yV(e){return oo(e.numericFacetSet,Cs(e),qb,"nf")}function hV(e){return oo(e.dateFacetSet,Cs(e),qb,"df")}function SV(e){let t=e.automaticFacetSet?.set;if(t===void 0)return{};let r=Object.entries(t).map(([n,{response:o}])=>{let a=CV(o);return a.length?{[n]:a}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(r).length?{af:r}:{}}function CV(e){return e.values.filter(t=>t.state==="selected").map(t=>t.value)}function Tb(e,t){let{dispatch:r}=e,n=Eb(e,t);return{...n,synchronize(o){let a=cf(e),d=wd(e,a),p=wd(e,o);sf(d,p)||(n.synchronize(o),r(ue({legacy:yb(d,p),next:mb(d,p)})))},get state(){return n.state}}}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var As=()=>new _({values:{questionAnswerId:Q},options:{required:!0}}),Id=()=>new _({values:{linkText:qe,linkURL:qe},options:{required:!0}});function co(e){return P(e,As())}l();s();u();c();function _e(e,t){let r=t??e.search?.questionAnswer?.documentId;return r&&e.search&&AC(e,r.contentIdKey,r.contentIdValue)}function Dt(e,t){let r=e.questionAnswering?.relatedQuestions.findIndex(o=>o.questionAnswerId===t)??-1;return r===-1?null:e.search?.questionAnswer?.relatedQuestions?.[r]??null}var kb={does_not_answer:"doesNotAnswer",partially_answers:"partiallyAnswers",was_not_a_question:"wasNotAQuestion"};var AV=()=>X("expandSmartSnippet")({prefix:"analytics/smartSnippet/expand",__legacy__getBuilder:(e,t)=>e.logExpandSmartSnippet(K(t.insightCaseContext)),analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:e=>{let t=_e(e),r=De(t),n=e.search?.response.searchUid;if(n)return{action:"expand",snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),RV=()=>X("collapseSmartSnippet")({prefix:"analytics/smartSnippet/collapse",__legacy__getBuilder:(e,t)=>e.logCollapseSmartSnippet(K(t.insightCaseContext)),analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:e=>{let t=_e(e),r=De(t),n=e.search?.response.searchUid;if(n)return{action:"collapse",snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),vV=()=>X("likeSmartSnippet")({prefix:"analytics/smartSnippet/like",__legacy__getBuilder:(e,t)=>e.logLikeSmartSnippet(K(t.insightCaseContext)),analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:e=>{let t=_e(e),r=De(t),n=e.search?.response.searchUid;if(n)return{action:"like",snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),xV=()=>X("dislikeSmartSnippet")({prefix:"analytics/smartSnippet/dislike",__legacy__getBuilder:(e,t)=>e.logDislikeSmartSnippet(K(t.insightCaseContext)),analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:e=>{let t=_e(e),r=De(t),n=e.search?.response.searchUid;if(n)return{action:"dislike",snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),bV=()=>X("openSmartSnippetSource")({prefix:"analytics/smartSnippet/source/open",__legacy__getBuilder:(e,t)=>{let r=_e(t);return e.logOpenSmartSnippetSource(Oe(r,t),De(r),K(t.insightCaseContext))},analyticsType:"SmartSnippets.SourceClick",analyticsPayloadBuilder:e=>{let t=_e(e),r=De(t),n=e.search?.response.searchUid;if(n)return{snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),uf=e=>X("openSmartSnippetSource")({prefix:"analytics/smartSnippet/source/open",__legacy__getBuilder:(t,r)=>{P(e,Id());let n=_e(r);return t.logOpenSmartSnippetInlineLink(Oe(n,r),{...De(n),...e},K(r.insightCaseContext))},analyticsType:"SmartSnippets.SourceClick",analyticsPayloadBuilder:t=>{let r=_e(t),n=De(r),o=t.search?.response.searchUid;if(o)return{snippetType:"SmartSnippet",responseId:o,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.title,url:r.clickUri}}}}),FV=()=>X("openSmartSnippetFeedbackModal")("analytics/smartSnippet/feedbackModal/open",(e,t)=>e.logOpenSmartSnippetFeedbackModal(K(t.insightCaseContext))),wV=()=>X("closeSmartSnippetFeedbackModal")("analytics/smartSnippet/feedbackModal/close",(e,t)=>e.logCloseSmartSnippetFeedbackModal(K(t.insightCaseContext))),IV=e=>X("sendSmartSnippetReason")({prefix:"analytics/smartSnippet/sendFeedback",__legacy__getBuilder:(t,r)=>t.logSmartSnippetFeedbackReason(e,void 0,K(r.insightCaseContext)),analyticsType:"SmartSnippets.SubmitFeedback",analyticsPayloadBuilder:t=>{let r=_e(t),n=De(r),o=t.search?.response.searchUid;if(o)return{responseId:o,snippetType:"SmartSnippet",itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.title,url:r.clickUri},reason:kb[e]}}}),PV=e=>X("sendSmartSnippetReason")({prefix:"analytics/smartSnippet/sendFeedback",__legacy__getBuilder:(t,r)=>t.logSmartSnippetFeedbackReason("other",e,K(r.insightCaseContext)),analyticsType:"SmartSnippets.SubmitFeedback",analyticsPayloadBuilder:t=>{let r=_e(t),n=De(r),o=t.search?.response.searchUid;if(o)return{responseId:o,snippetType:"SmartSnippet",itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.title,url:r.clickUri},reason:"other",additionalNotes:e}}}),EV=e=>X("expandSmartSnippetSuggestion")({prefix:"analytics/smartSnippetSuggestion/expand",__legacy__getBuilder:(t,r)=>{co(e);let n=Dt(r,e.questionAnswerId);return n?t.logExpandSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId},K(r.insightCaseContext)):null},analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:t=>{let r=Dt(t,e.questionAnswerId),n=t.search?.response.searchUid;if(n&&r){let o=_e(t,r.documentId);return{action:"expand",responseId:n,snippetType:"SmartSnippetSuggestion",itemMetadata:{uniqueFieldName:r.documentId.contentIdKey,uniqueFieldValue:r.documentId.contentIdValue,title:o?.title,url:o?.clickUri}}}}}),qV=e=>X("collapseSmartSnippetSuggestion")({prefix:"analytics/smartSnippetSuggestion/collapse",__legacy__getBuilder:(t,r)=>{co(e);let n=Dt(r,e.questionAnswerId);return n?t.logCollapseSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId},K(r.insightCaseContext)):null},analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:t=>{let r=Dt(t,e.questionAnswerId),n=t.search?.response.searchUid;if(n&&r){let o=_e(t,r.documentId);return{action:"collapse",responseId:n,snippetType:"SmartSnippetSuggestion",itemMetadata:{uniqueFieldName:r.documentId.contentIdKey,uniqueFieldValue:r.documentId.contentIdValue,title:o?.title,url:o?.clickUri}}}}}),lf=e=>X("openSmartSnippetSuggestionSource")({prefix:"analytics/smartSnippetSuggestion/source/open",__legacy__getBuilder:(t,r)=>{P(e,As());let n=Dt(r,e.questionAnswerId);if(!n)return null;let o=_e(r,n.documentId);return o?t.logOpenSmartSnippetSuggestionSource(Oe(o,r),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId},K(r.insightCaseContext)):null},analyticsType:"SmartSnippets.SourceClick",analyticsPayloadBuilder:t=>{let r=Dt(t,e.questionAnswerId),n=t.search?.response.searchUid;if(n&&r){let o=_e(t,r.documentId);return{responseId:n,snippetType:"SmartSnippetSuggestion",itemMetadata:{uniqueFieldName:r.documentId.contentIdKey,uniqueFieldValue:r.documentId.contentIdValue,title:o?.title,url:o?.clickUri}}}}}),Ob=(e,t)=>X("openSmartSnippetSuggestionSource")({prefix:"analytics/smartSnippetSuggestion/source/open",__legacy__getBuilder:(r,n)=>{P(e,As()),P(t,Id());let o=Dt(n,e.questionAnswerId);if(!o)return null;let a=_e(n,o.documentId);return a?r.logOpenSmartSnippetSuggestionInlineLink(Oe(a,n),{question:o.question,answerSnippet:o.answerSnippet,documentId:o.documentId,linkText:t.linkText,linkURL:t.linkURL},K(n.insightCaseContext)):null},analyticsType:"SmartSnippets.SourceClick",analyticsPayloadBuilder:r=>{let n=Dt(r,e.questionAnswerId),o=r.search?.response.searchUid;if(o&&n){let a=_e(r,n.documentId);return{responseId:o,snippetType:"SmartSnippetSuggestion",itemMetadata:{uniqueFieldName:n.documentId.contentIdKey,uniqueFieldValue:n.documentId.contentIdValue,title:a?.title,url:a?.clickUri}}}}}),Pd={logExpandSmartSnippet:AV,logCollapseSmartSnippet:RV,logLikeSmartSnippet:vV,logDislikeSmartSnippet:xV,logOpenSmartSnippetSource:bV,logOpenSmartSnippetInlineLink:uf,logOpenSmartSnippetFeedbackModal:FV,logCloseSmartSnippetFeedbackModal:wV,logSmartSnippetFeedback:IV,logSmartSnippetDetailedFeedback:PV,logExpandSmartSnippetSuggestion:EV,logCollapseSmartSnippetSuggestion:qV,logOpenSmartSnippetSuggestionSource:lf};l();s();u();c();l();s();u();c();var Wa=w("smartSnippet/expand"),Ya=w("smartSnippet/collapse"),Ka=w("smartSnippet/like"),Ja=w("smartSnippet/dislike"),Xa=w("smartSnippet/feedbackModal/open"),wn=w("smartSnippet/feedbackModal/close"),Za=w("smartSnippet/related/expand",e=>co(e)),ei=w("smartSnippet/related/collapse",e=>co(e));l();s();u();c();l();s();u();c();var df=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var Db=(e,t)=>e.findIndex(r=>r.questionAnswerId===t.questionAnswerId);function jb({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){return ho({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n})}function TV(e,t){let r=jb(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var Cr=ae(df(),e=>e.addCase(Wa,t=>{t.expanded=!0}).addCase(Ya,t=>{t.expanded=!1}).addCase(Ka,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(Ja,t=>{t.liked=!1,t.disliked=!0}).addCase(Xa,t=>{t.feedbackModalOpen=!0}).addCase(wn,t=>{t.feedbackModalOpen=!1}).addCase(he.fulfilled,(t,r)=>{let n=r.payload.response.questionAnswer.relatedQuestions.map((a,d)=>TV(a,t.relatedQuestions[d])),o=jb(r.payload.response.questionAnswer);return t.questionAnswerId===o?{...t,relatedQuestions:n}:{...df(),relatedQuestions:n,questionAnswerId:o}}).addCase(Za,(t,r)=>{let n=Db(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!0)}).addCase(ei,(t,r)=>{let n=Db(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!1)}));function Vb(e,t,r){if(!kV(e))throw te;let n=se(e),o=()=>e.state,a=()=>_e(o()),d=null,p=yr(e,{options:{selectionDelay:r?.options?.selectionDelay}},()=>{let m=a();if(!m){d=null;return}let{searchResponseId:g}=o().search;d!==g&&(d=g,e.dispatch(t.logOpenSmartSnippetSource()),e.dispatch(hr(m)))});return{...n,get state(){let m=o();return{question:m.search.questionAnswer.question,answer:m.search.questionAnswer.answerSnippet,documentId:m.search.questionAnswer.documentId,expanded:m.questionAnswering.expanded,answerFound:m.search.questionAnswer.answerSnippet!=="",liked:m.questionAnswering.liked,disliked:m.questionAnswering.disliked,feedbackModalOpen:m.questionAnswering.feedbackModalOpen,source:a()}},expand(){e.dispatch(t.logExpandSmartSnippet()),e.dispatch(Wa())},collapse(){e.dispatch(t.logCollapseSmartSnippet()),e.dispatch(Ya())},like(){e.dispatch(t.logLikeSmartSnippet()),e.dispatch(Ka())},dislike(){e.dispatch(t.logDislikeSmartSnippet()),e.dispatch(Ja())},openFeedbackModal(){e.dispatch(t.logOpenSmartSnippetFeedbackModal()),e.dispatch(Xa())},closeFeedbackModal(){e.dispatch(t.logCloseSmartSnippetFeedbackModal()),e.dispatch(wn())},sendFeedback(m){e.dispatch(t.logSmartSnippetFeedback(m)),e.dispatch(wn())},sendDetailedFeedback(m){e.dispatch(t.logSmartSnippetDetailedFeedback(m)),e.dispatch(wn())},selectSource(){p.select()},beginDelayedSelectSource(){p.beginDelayedSelect()},cancelPendingSelectSource(){p.cancelPendingSelect()}}}function kV(e){return e.addReducers({search:me,questionAnswering:Cr}),!0}l();s();u();c();function Ed(e,t){if(!OV(e))throw te;let r=()=>e.state,n=new Set,o=f=>n.has(f)?!0:(n.add(f),!1),a=null,d=f=>{a!==f&&(a=f,m={},n.clear())},p=(f,A,R)=>yr(e,{options:{selectionDelay:t?.options?.selectionDelay}},()=>{o(A)||e.dispatch(R?Ob({questionAnswerId:R},f):uf(f))}),m={},g=(f,A)=>{let{searchResponseId:R}=r().search;d(R);let C=ho({...f,questionAnswerId:A});return C in m||(m[C]=p(f,C,A)),m[C]};return{selectInlineLink(f,A){g(f,A)?.select()},beginDelayedSelectInlineLink(f,A){g(f,A)?.beginDelayedSelect()},cancelPendingSelectInlineLink(f,A){g(f,A)?.cancelPendingSelect()}}}function OV(e){return e.addReducers({search:me,questionAnswering:Cr}),!0}function Nb(e,t){let r=Vb(e,Pd,t),n=Ed(e,{options:{selectionDelay:t?.options?.selectionDelay}});return{...r,get state(){return r.state},selectInlineLink(o){n.selectInlineLink(o)},beginDelayedSelectInlineLink(o){n.beginDelayedSelectInlineLink(o)},cancelPendingSelectInlineLink(o){n.cancelPendingSelectInlineLink(o)}}}l();s();u();c();l();s();u();c();function Mb(e,t){if(!DV(e))throw te;let r=se(e),n=()=>e.state,o=a=>{let{contentIdKey:d,contentIdValue:p}=a;return e.state.search.results.find(m=>en(m,d)===p)};return{...r,get state(){let a=n();return{questions:a.search.questionAnswer.relatedQuestions.map((d,p)=>({question:d.question,answer:d.answerSnippet,documentId:d.documentId,questionAnswerId:a.questionAnswering.relatedQuestions[p].questionAnswerId,expanded:a.questionAnswering.relatedQuestions[p].expanded,source:o(d.documentId)}))}},expand(a){let d={questionAnswerId:a};e.dispatch(t.logExpandSmartSnippetSuggestion(d)),e.dispatch(Za(d))},collapse(a){let d={questionAnswerId:a};e.dispatch(t.logCollapseSmartSnippetSuggestion(d)),e.dispatch(ei(d))}}}function DV(e){return e.addReducers({search:me,questionAnswering:Cr}),!0}l();s();u();c();function Qb(e,t){if(!jV(e))throw te;let r=()=>e.state,n=A=>{let R=r(),C=Dt(R,A);return C?_e(R,C.documentId):null},o=new Set,a=A=>o.has(A)?!0:(o.add(A),!1),d=null,p=A=>{d!==A&&(d=A,g={},o.clear())},m=(A,R)=>yr(e,{options:{selectionDelay:t?.options?.selectionDelay}},()=>{a(R)||(e.dispatch(lf({questionAnswerId:R})),e.dispatch(hr(A)))}),g={},f=A=>{let{searchResponseId:R}=r().search;p(R);let C=n(A);return C?(A in g||(g[A]=m(C,A)),g[A]):null};return{selectSource(A){f(A)?.select()},beginDelayedSelectSource(A){f(A)?.beginDelayedSelect()},cancelPendingSelectSource(A){f(A)?.cancelPendingSelect()}}}function jV(e){return e.addReducers({search:me,questionAnswering:Cr}),!0}function Lb(e,t){let r=Mb(e,Pd),n=Ed(e,{options:{selectionDelay:t?.options?.selectionDelay}}),o=Qb(e,{options:{selectionDelay:t?.options?.selectionDelay}});return{...r,get state(){return r.state},selectSource(a){o.selectSource(a)},beginDelayedSelectSource(a){o.beginDelayedSelectSource(a)},cancelPendingSelectSource(a){o.cancelPendingSelectSource(a)},selectInlineLink(a,d){n.selectInlineLink(d,a)},beginDelayedSelectInlineLink(a,d){n.beginDelayedSelectInlineLink(d,a)},cancelPendingSelectInlineLink(a,d){n.cancelPendingSelectInlineLink(d,a)}}}l();s();u();c();l();s();u();c();l();s();u();c();var _b={by:new Dr({enum:fc,required:!0})},qd=w("sortCriteria/register",e=>Ub(e)),Td=w("sortCriteria/update",e=>Ub(e)),Ub=e=>yo(e)?(e.forEach(t=>P(t,_b)),{payload:e}):P(e,_b);l();s();u();c();var Bb=ae(xt(),e=>{e.addCase(qd,(t,r)=>Yt(r.payload)).addCase(Td,(t,r)=>Yt(r.payload)).addCase(je.fulfilled,(t,r)=>r.payload?.sortCriteria??t).addCase(Ve,(t,r)=>r.payload.sortCriteria??t)});function VV(e,t){if(!t)return;let r=new ge({criterion:new ee({each:nS})}),n=NV(t),o={...t,criterion:n};It(e,r,o,"buildSort")}function NV(e){return e.criterion?yo(e.criterion)?e.criterion:[e.criterion]:[]}function Gb(e,t){if(!MV(e))throw te;let r=se(e),{dispatch:n}=e,o=()=>e.state;VV(e,t.initialState);let a=t.initialState?.criterion;return a&&n(qd(a)),{...r,sortBy(d){n(Td(d)),n(zr(1))},isSortedBy(d){return this.state.sortCriteria===Yt(d)},get state(){return{sortCriteria:o().sortCriteria}}}}function MV(e){return e.addReducers({configuration:le,sortCriteria:Bb}),!0}function $b(e,t={}){let{dispatch:r}=e,n=Gb(e,t),o=()=>r(ue({legacy:za(),next:vd()}));return{...n,get state(){return n.state},sortBy(a){n.sortBy(a),o()}}}l();s();u();c();function Hb(e){return Ma(e)}l();s();u();c();l();s();u();c();var QV=new ge({expression:qe,id:Q,clearFiltersOnTabChange:new oe}),LV=new ge({isActive:new oe});function zb(e,t){if(UV(t.options.id),!_V(e))throw te;let r=se(e),{dispatch:n}=e;Be(e,QV,t.options,"buildTab");let o=It(e,LV,t.initialState,"buildTab"),{id:a,expression:d}=t.options;return n(Du({id:a,expression:d})),Object.keys(e.state.tabSet).length===1&&(o.isActive=!0),o.isActive&&n(wr(a)),{...r,select(){t.options.clearFiltersOnTabChange&&n(ra({q:"",clearFilters:!0})),n(wr(a))},get state(){return{isActive:e.state.tabSet[a]?.isActive}}}}function _V(e){return e.addReducers({configuration:le,tabSet:wl}),!0}function UV(e){let t=Vu().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function Wb(e,t){let{dispatch:r}=e,n=zb(e,t),o=()=>r(ue({legacy:Hr(),next:Ho()}));return{...n,get state(){return n.state},select(){n.select(),o()}}}l();s();u();c();l();s();u();c();var Yb=()=>X("query")("analytics/trigger/notify",(e,t)=>t.triggers?.notifications.length?e.logTriggerNotify({notifications:t.triggers.notifications},K(t.insightCaseContext)):null);l();s();u();c();l();s();u();c();l();s();u();c();function Kb(e){return e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore},e}function Jb(e,t){let r=[],n=[],o=[],a=[];return t.forEach(d=>{switch(d.type){case"redirect":r.push(d.content);break;case"query":n.push(d.content);break;case"execute":o.push({functionName:d.content.name,params:d.content.params});break;case"notify":a.push(d.content);break}}),e.redirectTo=r[0]??"",e.query=e.queryModification.newQuery,e.executions=o,e.notifications=a,e}function Xb(e,t){return e.queryModification={...t,queryToIgnore:""},e}function Zb(e,t){return e.queryModification.queryToIgnore=t,e}l();s();u();c();var eF=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});var tF=ae(eF(),e=>e.addCase(he.pending,Kb).addCase(he.fulfilled,(t,r)=>Jb(t,r.payload.response.triggers)).addCase(ta,(t,r)=>Xb(t,r.payload)).addCase(ea,(t,r)=>Zb(t,r.payload)));function rF(e,t){let r=t.options.logNotifyTriggerActionCreator;if(!BV(e))throw te;let n=se(e),{dispatch:o}=e,a=()=>e.state,d=a().triggers.notifications;return{...n,subscribe(p){let m=()=>{let g=!wb(d,this.state.notifications);d=this.state.notifications,g&&(p(),o(r()))};return m(),e.subscribe(m)},get state(){return{notifications:a().triggers.notifications}}}}function BV(e){return e.addReducers({triggers:tF}),!0}function nF(e){return rF(e,{options:{logNotifyTriggerActionCreator:Yb}})}l();s();u();c();l();s();u();c();var oF=(e,t)=>X("expandToFullUI")({prefix:"analytics/expandToFullUI",__legacy__getBuilder:(r,n)=>{let o=K(n.insightCaseContext),a={caseId:o.caseId,caseNumber:o.caseNumber,fullSearchComponentName:e,triggeredBy:t,caseContext:o.caseContext};return r.logExpandToFullUI(a)},analyticsType:"InsightPanel.ExpandToFullUI",analyticsPayloadBuilder:r=>{let n=K(r.insightCaseContext);return{context:{targetId:n.caseId,targetType:"Case",caseNumber:n.caseNumber}}}}),aF=e=>X("createArticle")({prefix:"analytics/insight/createArticle",__legacy__getBuilder:(t,r)=>(P(e,{articleType:Q}),t.logCreateArticle(e,K(r.insightCaseContext))),analyticsType:"InsightPanel.CreateArticle",analyticsPayloadBuilder:t=>{let r=K(t.insightCaseContext);return{articleType:e.articleType,context:{targetId:r.caseId,targetType:"Case",caseNumber:r.caseNumber}}}}),kd=()=>X("openUserActions")({prefix:"analytics/insight/openUserActions",__legacy__getBuilder:(e,t)=>e.logOpenUserActions(K(t.insightCaseContext))});l();s();u();c();l();s();u();c();var iF=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:be(e.configuration.organizationId,e.configuration.environment),userId:t});var GV={ticketCreationDate:new V({emptyAllowed:!1,ISODate:!0}),excludedCustomActions:new ee({required:!1,each:Fe})},ti=w("insight/userActions/registerUserActions",e=>P(e,GV)),In=re("insight/userActions/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let o=t(),a=await n.userActions(await iF(o,e));return Ee(a)?r(a.error):{response:a.success}});l();s();u();c();l();s();u();c();l();s();u();c();function sF(){return{timeline:void 0,excludedCustomActions:[],loading:!1}}var $V=1e3,HV=$V*60,pf=30*HV,zV=2,WV=2,lF=(e,t)=>{if(!e.ticketCreationDate||!t?.length)return{precedingSessions:[],session:void 0,followingSessions:[]};let n=new Date(e.ticketCreationDate).getTime(),o=e.excludedCustomActions,a=KV(t);return XV(a,n,o)},YV=e=>{let t=JSON.parse(e.value);return{actionType:e.name,timestamp:Number(e.time),eventData:{type:t.event_type,value:t.event_value},cause:t.cause,searchHub:t.origin_level_1,document:{title:t.title,uriHash:t.uri_hash,contentIdKey:t.content_id_key||t.c_contentidkey,contentIdValue:t.content_id_value||t.c_contentidvalue},query:t.query_expression}},KV=e=>{let t=!1,r=e.reduce((n,o)=>{try{let a=YV(o);n.push(a)}catch{t=!0}return n},[]).sort((n,o)=>o.timestamp-n.timestamp);return t&&console.warn("Some user actions could not be parsed. Please check the raw user actions data."),r},JV=(e,t)=>Math.abs(e.timestamp-t)<pf,cF=(e,t,r)=>{if(e.actions?.length)if(t>=e.start-pf&&t<=e.end+pf){let n={actionType:"TICKET_CREATION",timestamp:t,eventData:{}},o=e.actions.findIndex(a=>a.timestamp<=n.timestamp);o===-1?(o=e.actions.length,e.start=t):o===0&&(e.end=t),e.actions.splice(o,0,n),r.session=e}else t<e.start?r.followingSessions.push(e):r.precedingSessions.push(e)},uF=(e,t)=>{if(e.actionType==="SEARCH"&&!e.query)return!0;if(e.actionType==="CUSTOM"){let r=e.eventData?.type||"",n=e.eventData?.value||"";return t.includes(r)||t.includes(n)}return!1},XV=(e,t,r)=>{let n={precedingSessions:[],session:void 0,followingSessions:[]},o={start:e[0].timestamp,end:e[0].timestamp,actions:[]};return e.forEach(a=>{if(JV(a,o.start)){o.actions.push(a),o.start=a.timestamp;return}o.actions=o.actions.filter(d=>!uF(d,r)),cF(o,t,n),o={start:a.timestamp,end:a.timestamp,actions:[a]}}),o.actions=o.actions.filter(a=>!uF(a,r)),cF(o,t,n),n.session===void 0&&(n.session={start:t,end:t,actions:[{actionType:"TICKET_CREATION",timestamp:t,eventData:{}}]}),{precedingSessions:n.precedingSessions.slice(0,zV),session:n.session,followingSessions:n.followingSessions.slice(n.followingSessions.length-WV)}};var Od=ae(sF(),e=>{e.addCase(ti,(t,r)=>{t.ticketCreationDate=r.payload.ticketCreationDate,r.payload.excludedCustomActions&&(t.excludedCustomActions=r.payload.excludedCustomActions)}).addCase(In.pending,t=>{t.loading=!0,t.error=void 0}).addCase(In.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(In.fulfilled,(t,r)=>{t.loading=!1,t.error=void 0,t.timeline=lF(t,r.payload.response.value)})});function dF(e,t){if(!ZV(e))throw te;let{dispatch:r}=e,n=()=>e.state.insightUserActions,o=se(e),{ticketCreationDate:a,excludedCustomActions:d}=t.options;return r(ti({ticketCreationDate:a,excludedCustomActions:d})),{...o,get state(){return n()},fetchUserActions(p){r(In(p))},logOpenUserActions(){r(kd())}}}function ZV(e){return e.addReducers({configuration:le,insightUserActions:Od}),!0}l();s();u();c();function pF(e){if(!eN(e))throw te;let t=se(e),{dispatch:r}=e,n=()=>e.state;return{...t,get state(){return n().insightInterface},fetch(){r(Kt())}}}function eN(e){return e.addReducers({configuration:le,insightConfiguration:wc,insightInterface:Br,searchHub:iu}),!0}l();s();u();c();function tN(e){return e.addReducers({}),{logSearchEvent:fS,logClickEvent:yS,logCustomEvent:hS}}l();s();u();c();l();s();u();c();var mF=e=>X("copyToClipboard")({prefix:"analytics/resultAction/insight/copyToClipboard",__legacy__getBuilder:(t,r)=>{et(e);let n=K(r.insightCaseContext);return t.logCopyToClipboard(Oe(e,r),De(e),n)},analyticsType:"InsightPanel.ItemAction",analyticsPayloadBuilder:t=>{let r=Oe(e,t);return{itemMetadata:Qt(e,t),position:r.documentPosition,responseId:e.searchUid||"",action:"copyToClipboard",context:_t(t)}}}),gF=e=>X("Case.SendEmail")({prefix:"analytics/resultAction/insight/caseSendEmail",__legacy__getBuilder:(t,r)=>{et(e);let n=K(r.insightCaseContext);return t.logCaseSendEmail(Oe(e,r),De(e),n)},analyticsType:"InsightPanel.ItemAction",analyticsPayloadBuilder:t=>{let r=Oe(e,t);return{itemMetadata:Qt(e,t),position:r.documentPosition,responseId:e.searchUid||"",action:"sendEmail",context:_t(t)}}}),fF=e=>X("FeedItem.TextPost")({prefix:"analytics/resultAction/insight/feedItemTextPost",__legacy__getBuilder:(t,r)=>{et(e);let n=K(r.insightCaseContext);return t.logFeedItemTextPost(Oe(e,r),De(e),n)},analyticsType:"InsightPanel.ItemAction",analyticsPayloadBuilder:t=>{let r=Oe(e,t);return{itemMetadata:Qt(e,t),position:r.documentPosition,responseId:e.searchUid||"",action:"postToFeed",context:_t(t)}}});function rN(e){return e.addReducers({}),{logClearBreadcrumbs:ol,logInterfaceLoad:Qc,logInterfaceChange:Hr,logCreateArticle:aF,logCategoryFacetBreadcrumb:Gu,logFacetBreadcrumb:ts,logFacetClearAll:nt,logFacetDeselect:Bt,logFacetSelect:lt,logFacetShowLess:Pa,logFacetShowMore:Ia,logFacetUpdateSort:sr,logDateFacetBreadcrumb:rs,logNumericFacetBreadcrumb:ns,logPageNext:gd,logPageNumber:md,logPagePrevious:fd,logResultsSort:za,logStaticFilterDeselect:vl,logCopyToClipboard:mF,logCaseSendEmail:gF,logFeedItemTextPost:fF,logOpenUserActions:kd}}l();s();u();c();function nN(e){return e.addReducers({attachedResults:an}),{setAttachedResults:_u,detachResult:on,attachResult:nn}}l();s();u();c();function oN(e){return e.addReducers({attachedResults:an}),{logCaseDetach:Sa,logCaseAttach:ha}}l();s();u();c();l();s();u();c();l();s();u();c();var Dd=w("insight/caseContext/set",e=>{let t=new _({options:{required:!0}}),r=P(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),o=new ee({each:qe}),a=P(n,o).error;return a?{payload:e,error:a}:{payload:e}}),jd=w("insight/caseId/set",e=>{let r=P(e,qe).error;return r?{payload:e,error:r}:{payload:e}}),Vd=w("insight/caseNumber/set",e=>{let r=P(e,qe).error;return r?{payload:e,error:r}:{payload:e}});var yF=ae(zS(),e=>{e.addCase(Dd,(t,r)=>{t.caseContext=r.payload}).addCase(jd,(t,r)=>{t.caseId=r.payload}).addCase(Vd,(t,r)=>{t.caseNumber=r.payload})});function aN(e){return e.addReducers({insightCaseContext:yF}),{setCaseContext:Dd,setCaseId:jd,setCaseNumber:Vd}}l();s();u();c();l();s();u();c();l();s();u();c();var iN=new ee({each:Q,required:!0}),hF=(e,t)=>(P(e,Q),fo(t)?P(t,Q):P(t,iN),{payload:{contextKey:e,contextValue:t}}),Nd=w("context/set",e=>{for(let[t,r]of Object.entries(e))hF(t,r);return{payload:e}}),Md=w("context/add",e=>hF(e.contextKey,e.contextValue)),Qd=w("context/remove",e=>P(e,Q));var SF=ae(Dc(),e=>{e.addCase(Nd,(t,r)=>{t.contextValues=r.payload}).addCase(Md,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(Qd,(t,r)=>{delete t.contextValues[r.payload]}).addCase(je.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.context.contextValues)})});function sN(e){return e.addReducers({context:SF}),{addContext:Md,removeContext:Qd,setContext:Nd}}l();s();u();c();function cN(e){return e.addReducers({dateFacetSet:dr}),{deselectAllDateFacetValues:sl,registerDateFacet:cr,toggleSelectDateFacetValue:ur,toggleExcludeDateFacetValue:lr,updateDateFacetSortCriterion:il,updateDateFacetValues:qr}}l();s();u();c();function uN(e){return e.addReducers({numericFacetSet:dn}),{deselectAllNumericFacetValues:Al,registerNumericFacet:pr,toggleSelectNumericFacetValue:mr,toggleExcludeNumericFacetValue:gr,updateNumericFacetSortCriterion:Cl,updateNumericFacetValues:Tr}}l();s();u();c();function lN(e){return e.addReducers({fields:Na}),{registerFieldsToInclude:bn,enableFetchAllFields:ad,disableFetchAllFields:id,fetchFieldsDescription:sd}}l();s();u();c();function dN(e){return e.addReducers({folding:od}),{registerFolding:lx,loadCollection:td}}l();s();u();c();function pN(e){return e.addReducers({generatedAnswer:Qa}),{generateAnswer:qu,resetAnswer:St,setAnswerGenerationMode:Cu}}l();s();u();c();function mN(e){return e.addReducers({insightInterface:Br}),{fetch:Kt}}l();s();u();c();function gN(e){return e.addReducers({querySet:Ga}),{registerQuerySetQuery:Ba,updateQuerySetQuery:io}}l();s();u();c();function fN(e){return e.addReducers({search:me}),{executeSearch:XS,fetchFacetValues:tC,fetchMoreResults:eC,fetchPage:ZS,fetchQuerySuggestions:Gc,registerQuerySuggest:An}}l();s();u();c();function yN(e){return e.addReducers({}),{logContextChanged:WS,logExpandToFullUI:oF}}l();s();u();c();function hN(e){return e.addReducers({insightUserActions:Od}),{registerUserActions:ti,fetchUserActions:In}}l();s();u();c();function SN(e){return e.addReducers({querySuggest:Rd,querySet:Ga}),{clearQuerySuggest:vn,fetchQuerySuggestions:Va,registerQuerySuggest:An,selectQuerySuggestion:Rn}}l();s();u();c();function CN(e){return e.addReducers({questionAnswering:Cr}),{collapseSmartSnippet:Ya,expandSmartSnippet:Wa,dislikeSmartSnippet:Ja,likeSmartSnippet:Ka,openFeedbackModal:Xa,closeFeedbackModal:wn,expandSmartSnippetRelatedQuestion:Za,collapseSmartSnippetRelatedQuestion:ei}}l();s();u();c();l();s();u();c();l();s();u();c();function CF(){return{results:[],maxLength:10}}var AF=ae(CF(),e=>{e.addCase(hd,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(Sd,t=>{t.results=[]}).addCase(hr,(t,r)=>{let n=r.payload;t.results=t.results.filter(a=>a.uniqueId!==n.uniqueId);let o=t.results.slice(0,t.maxLength-1);t.results=[n,...o]})});function AN(e){return e.addReducers({recentResults:AF}),{registerRecentResults:hd,clearRecentResults:Sd,pushRecentResult:hr}}l();s();u();c();l();s();u();c();var RN=new ge({content:new Pe({required:!0}),conditions:new Pe({required:!0}),priority:new Y({required:!1,default:0,min:0}),fields:new ee({required:!1,each:Q})});function RF(){let e=[],t=r=>{let n=RN.validate(r);if(!r.conditions.every(a=>a instanceof Function))throw new Pn("Each template condition should be a function that takes a Result or Product as an argument and returns a boolean");return n};return{registerTemplates(...r){r.forEach(n=>{let o={...t(n),fields:n.fields||[]};e.push(o)}),e.sort((n,o)=>o.priority-n.priority)},selectTemplate(r){let n=e.find(o=>o.conditions.every(a=>a(r)));return n?n.content:null},selectLinkTemplate(r){let n=e.find(o=>o.conditions.every(a=>a(r)));return n?n.linkContent:null}}}function vF(e){if(!vN(e))throw te;let{registerTemplates:t,selectTemplate:r,selectLinkTemplate:n}=RF();return{registerTemplates:(...o)=>{t(...o);let a=[];o.forEach(d=>{d.fields&&a.push(...d.fields)}),e.dispatch(bn(a))},selectTemplate:r,selectLinkTemplate:n}}function vN(e){return e.addReducers({fields:Na}),!0}
/**
 * @license
 *
 * Copyright 2026 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

if(__exports != exports)module.exports = exports;return module.exports}));
//# sourceMappingURL=headless.js.map
