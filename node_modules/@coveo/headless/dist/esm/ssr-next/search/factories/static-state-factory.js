import { createStaticState } from '../controller-utils.js';
import { buildFactory } from './build-factory.js';
export function fetchStaticStateFactory(controllerDefinitions, options) {
    return async (params) => {
        const { engine, controllers } = await buildFactory(controllerDefinitions, options)(params);
        engine.executeFirstSearch();
        const searchActions = [await engine.waitForSearchCompletedAction()];
        const staticState = createStaticState({
            searchActions,
            controllers,
        });
        return {
            ...params,
            ...staticState,
        };
    };
}
