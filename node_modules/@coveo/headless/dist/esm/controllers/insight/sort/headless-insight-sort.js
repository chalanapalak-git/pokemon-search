import { executeSearch } from '../../../features/insight-search/insight-search-actions.js';
import { resultsSort } from '../../../features/sort-criteria/sort-criteria-analytics-actions.js';
import { logResultsSort } from '../../../features/sort-criteria/sort-criteria-insight-analytics-actions.js';
import { buildCoreSort, } from '../../core/sort/headless-core-sort.js';
/**
 * Creates an insight `Sort` controller instance.
 *
 * @param engine - The insight engine.
 * @param props - The configurable `Sort` controller properties.
 * @returns A `Sort` controller instance.
 *
 * @group Controllers
 * @category Sort
 */
export function buildSort(engine, props = {}) {
    const { dispatch } = engine;
    const sort = buildCoreSort(engine, props);
    const search = () => dispatch(executeSearch({ legacy: logResultsSort(), next: resultsSort() }));
    return {
        ...sort,
        get state() {
            return sort.state;
        },
        sortBy(criterion) {
            sort.sortBy(criterion);
            search();
        },
    };
}
