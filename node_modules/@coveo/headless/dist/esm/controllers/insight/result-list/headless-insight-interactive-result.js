import { pushRecentResult } from '../../../features/recent-results/recent-results-actions.js';
import { logDocumentOpen } from '../../../features/result/result-insight-analytics-actions.js';
import { buildInteractiveResultCore, } from '../../core/interactive-result/headless-core-interactive-result.js';
/**
 * Creates an insight `InteractiveResult` controller instance.
 *
 * @param engine - The insight engine.
 * @param props - The configurable `InteractiveResult` properties.
 * @returns An `InteractiveResult` controller instance.
 *
 * @group Controllers
 * @category InteractiveResult
 */
export function buildInteractiveResult(engine, props) {
    let wasOpened = false;
    const logAnalyticsIfNeverOpened = () => {
        if (wasOpened) {
            return;
        }
        wasOpened = true;
        engine.dispatch(logDocumentOpen(props.options.result));
    };
    const action = () => {
        logAnalyticsIfNeverOpened();
        engine.dispatch(pushRecentResult(props.options.result));
    };
    return buildInteractiveResultCore(engine, props, action);
}
