import { configuration } from '../../app/common-reducers.js';
import { insightConfigurationReducer as insightConfiguration } from '../../features/insight-configuration/insight-configuration-slice.js';
import { fetchInterface } from '../../features/insight-interface/insight-interface-actions.js';
import { insightInterfaceReducer as insightInterface } from '../../features/insight-interface/insight-interface-slice.js';
import { searchHubReducer as searchHub } from '../../features/search-hub/search-hub-slice.js';
import { loadReducerError } from '../../utils/errors.js';
import { buildController, } from '../controller/headless-controller.js';
/**
 * Creates an `InsightInterface` controller instance.
 * @param engine  - The insight engine.
 * @returns An `InsightInterface controller instance.
 *
 * @group Controllers
 * @category InsightInterface
 */
export function buildInsightInterface(engine) {
    if (!loadInsightInterfaceReducers(engine)) {
        throw loadReducerError;
    }
    const controller = buildController(engine);
    const { dispatch } = engine;
    const getState = () => {
        return engine.state;
    };
    return {
        ...controller,
        get state() {
            return getState().insightInterface;
        },
        fetch() {
            dispatch(fetchInterface());
        },
    };
}
function loadInsightInterfaceReducers(engine) {
    engine.addReducers({
        configuration,
        insightConfiguration,
        insightInterface,
        searchHub,
    });
    return true;
}
