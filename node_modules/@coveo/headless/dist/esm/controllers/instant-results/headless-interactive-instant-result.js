import { logInstantResultOpen } from '../../features/instant-results/instant-result-analytics-actions.js';
import { pushRecentResult } from '../../features/recent-results/recent-results-actions.js';
import { buildInteractiveResultCore, } from '../core/interactive-result/headless-core-interactive-result.js';
/**
 * Creates an `InteractiveInstantResult` controller instance.
 *
 * @param engine - The headless engine.
 * @param props - The configurable `InteractiveInstantResult` properties.
 * @returns An `InteractiveInstantResult` controller instance.
 *
 * @group Controllers
 * @category InteractiveInstantResult
 */
export function buildInteractiveInstantResult(engine, props) {
    let wasOpened = false;
    const logAnalyticsIfNeverOpened = () => {
        if (wasOpened) {
            return;
        }
        wasOpened = true;
        engine.dispatch(logInstantResultOpen(props.options.result));
    };
    const action = () => {
        logAnalyticsIfNeverOpened();
        engine.dispatch(pushRecentResult(props.options.result));
    };
    return buildInteractiveResultCore(engine, props, action);
}
