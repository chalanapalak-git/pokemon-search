import { didYouMeanClick, logDidYouMeanClick, } from '../../features/did-you-mean/did-you-mean-analytics-actions.js';
import { executeSearch } from '../../features/search/search-actions.js';
import { buildCoreDidYouMean, } from '../core/did-you-mean/headless-core-did-you-mean.js';
/**
 * The DidYouMean controller is responsible for handling query corrections.
 * When a query returns no result but finds a possible query correction, the controller either suggests the correction or
 * automatically triggers a new query with the suggested term.
 *
 * @param engine - The headless engine.
 * @param props - The configurable `DidYouMean` properties.
 *
 * @group Controllers
 * @category DidYouMean
 */
export function buildDidYouMean(engine, props = {}) {
    const controller = buildCoreDidYouMean(engine, props);
    const { dispatch } = engine;
    return {
        ...controller,
        get state() {
            return controller.state;
        },
        applyCorrection() {
            controller.applyCorrection();
            dispatch(executeSearch({
                legacy: logDidYouMeanClick(),
                next: didYouMeanClick(),
            }));
        },
    };
}
