{"version":3,"file":"coveoua.browser.js","sources":["../src/events.ts","../src/detector.ts","../src/hook/addDefaultValues.ts","../src/cookieutils.ts","../src/storage.ts","../src/history.ts","../src/hook/enhanceViewEvent.ts","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/regex.js","../node_modules/uuid/dist/esm-browser/validate.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/native.js","../node_modules/uuid/dist/esm-browser/v4.js","../node_modules/uuid/dist/esm-browser/sha1.js","../node_modules/uuid/dist/esm-browser/v5.js","../node_modules/uuid/dist/esm-browser/v35.js","../node_modules/uuid/dist/esm-browser/parse.js","../src/version.ts","../src/client/location.ts","../src/plugins/BasePlugin.ts","../src/plugins/link.ts","../src/client/utils.ts","../src/client/measurementProtocolMapping/serviceMeasurementProtocolMapper.ts","../src/client/measurementProtocolMapping/commerceMeasurementProtocolMapper.ts","../src/client/measurementProtocolMapping/baseMeasurementProtocolMapper.ts","../src/client/measurementProtocolMapper.ts","../src/client/analyticsBeaconClient.ts","../src/client/analyticsRequestClient.ts","../bundle/browser-fetch.ts","../src/client/analyticsFetchClient.ts","../src/client/runtimeEnvironment.ts","../src/donottrack.ts","../src/client/analytics.ts","../src/insight/insightEvents.ts","../src/searchPage/searchPageEvents.ts","../src/react-native/react-native-utils.ts","../src/client/token.ts","../src/plugins/ec.ts","../src/plugins/svc.ts","../src/coveoua/plugins.ts","../src/coveoua/simpleanalytics.ts","../src/client/noopAnalytics.ts","../src/formatting/format-array-for-coveo-custom-data.ts","../src/formatting/format-omnibox-metadata.ts","../src/searchPage/searchPageClient.ts","../src/caseAssist/caseAssistActions.ts","../src/caseAssist/caseAssistClient.ts","../src/insight/insightClient.ts","../src/coveoua/browser.ts"],"sourcesContent":["export type IRequestPayload = Record<string, any>;\n\nexport enum EventType {\n    search = 'search',\n    click = 'click',\n    custom = 'custom',\n    view = 'view',\n    collect = 'collect',\n}\n\nexport interface SearchDocument {\n    documentUri: string;\n    documentUriHash: string;\n}\n\nexport type SendEventArguments = [EventType, ...any[]];\n\nexport type VariableArgumentsPayload =\n    | []\n    | [any]\n    | [string, any]\n    | [string, string, any]\n    | [string, string, string, any]\n    | [string, string, string, string, any];\n\nexport interface EventBaseRequest {\n    language?: string;\n    userAgent?: string;\n    customData?: Record<string, any>;\n    anonymous?: boolean;\n    username?: string;\n    userDisplayName?: any;\n    splitTestRunName?: string;\n    splitTestRunVersion?: string;\n    clientId?: string;\n    originContext?: string;\n    originLevel1?: string;\n    originLevel2?: string;\n    originLevel3?: string;\n}\n\nexport interface FacetStateRequest {\n    field: string;\n    id: string;\n    value: string;\n    valuePosition: number;\n    displayValue: string;\n    facetType: 'specific' | 'dateRange' | 'numericalRange' | 'hierarchical';\n    state: 'selected' | 'idle' | 'excluded';\n    facetPosition: number;\n    title: string;\n    start?: string;\n    end?: string;\n    endInclusive?: boolean;\n}\n\nexport interface SearchEventRequest extends EventBaseRequest {\n    searchQueryUid: string;\n    queryText: string;\n    actionCause: string;\n    responseTime: number;\n    advancedQuery?: string;\n    numberOfResults?: number;\n    contextual?: boolean;\n    results?: SearchDocument[];\n    queryPipeline?: string;\n    userGroups?: string[];\n    facetState?: FacetStateRequest[];\n}\n\nexport interface PreparedSearchEventRequest extends Omit<SearchEventRequest, 'searchQueryUid'> {}\n\nexport interface DocumentInformation {\n    documentUri?: string;\n    documentUriHash?: string;\n    collectionName?: string;\n    sourceName: string;\n    documentPosition: number;\n    actionCause: string;\n\n    searchQueryUid: string;\n    documentTitle?: string;\n    documentUrl?: string;\n    documentAuthor?: string;\n    queryPipeline?: string;\n    rankingModifier?: string;\n}\n\nexport interface ClickEventRequest extends EventBaseRequest, DocumentInformation {}\n\nexport interface PreparedClickEventRequest extends Omit<ClickEventRequest, 'searchQueryUid'> {}\n\nexport interface CustomEventRequest extends EventBaseRequest {\n    eventType: string;\n    eventValue: string;\n    lastSearchQueryUid?: string;\n}\n\nexport interface PreparedCustomEventRequest extends Omit<CustomEventRequest, 'lastSearchQueryUid'> {}\n\nexport interface ViewEventRequest extends EventBaseRequest {\n    location?: string;\n    referrer?: string;\n    title?: string;\n    contentIdKey: string;\n    contentIdValue: string;\n    contentType?: string;\n}\n\nexport interface PreparedViewEventRequest extends ViewEventRequest {}\n\nexport interface DefaultEventResponse {\n    visitId: string;\n    visitorId: string;\n}\n\nexport interface SearchEventResponse extends DefaultEventResponse {}\nexport interface ClickEventResponse extends DefaultEventResponse {}\nexport interface CustomEventResponse extends DefaultEventResponse {}\nexport interface ViewEventResponse extends DefaultEventResponse {}\n\nexport type AnyEventResponse = SearchEventResponse | ClickEventResponse | CustomEventResponse | ViewEventResponse;\n\nexport interface VisitResponse {\n    id: string;\n    visitorId: string;\n}\nexport interface HealthResponse {\n    status: string;\n}\n","export function hasWindow(): boolean {\n    return typeof window !== 'undefined';\n}\n\nexport function hasNavigator(): boolean {\n    return typeof navigator !== 'undefined';\n}\n\nexport function hasDocument(): boolean {\n    return typeof document !== 'undefined';\n}\n\nexport function hasLocalStorage(): boolean {\n    try {\n        return typeof localStorage !== 'undefined';\n    } catch (error) {\n        return false;\n    }\n}\n\nexport function hasSessionStorage(): boolean {\n    try {\n        return typeof sessionStorage !== 'undefined';\n    } catch (error) {\n        return false;\n    }\n}\n\nexport function hasCookieStorage(): boolean {\n    return hasNavigator() && navigator.cookieEnabled;\n}\n\nexport function hasCrypto(): boolean {\n    return typeof crypto !== 'undefined';\n}\n\nexport function hasCryptoRandomValues(): boolean {\n    return hasCrypto() && typeof crypto.getRandomValues !== 'undefined';\n}\n\nexport function hasLocation(): boolean {\n    return typeof location !== 'undefined';\n}\n","import {AnalyticsClientSendEventHook} from '../client/analytics';\nimport {hasDocument, hasNavigator} from '../detector';\nimport {EventType} from '../events';\n\nconst eventTypesForDefaultValues: string[] = [EventType.click, EventType.custom, EventType.search, EventType.view];\n\nexport const addDefaultValues: AnalyticsClientSendEventHook = (eventType, payload) => {\n    return eventTypesForDefaultValues.indexOf(eventType) !== -1\n        ? {\n              language: hasDocument() ? document.documentElement.lang : 'unknown',\n              userAgent: hasNavigator() ? navigator.userAgent : 'unknown',\n              ...payload,\n          }\n        : payload;\n};\n","interface CookieDetails {\n    name: string;\n    value: string;\n    expirationDate?: Date;\n    domain?: string;\n}\n\n// Code originally modified from : https://developers.livechatinc.com/blog/setting-cookies-to-subdomains-in-javascript/\nexport class Cookie {\n    static set(name: string, value: string, expire?: number) {\n        var domain: string, expirationDate: Date | undefined, domainParts: string[], host: string;\n        if (expire) {\n            expirationDate = new Date();\n            expirationDate.setTime(expirationDate.getTime() + expire);\n        }\n        host = window.location.hostname;\n        if (host.indexOf('.') === -1) {\n            // no \".\" in a domain - single domain name, it's localhost or something similar\n            writeCookie(name, value, expirationDate);\n        } else {\n            domainParts = host.split('.');\n            // we always have at least 2 domain parts\n            domain = domainParts[domainParts.length - 2] + '.' + domainParts[domainParts.length - 1];\n            writeCookie(name, value, expirationDate, domain);\n        }\n    }\n\n    static get(name: string) {\n        var cookiePrefix = name + '=';\n        var cookieArray = document.cookie.split(';');\n        for (var i = 0; i < cookieArray.length; i++) {\n            var cookie = cookieArray[i];\n            cookie = cookie.replace(/^\\s+/, ''); //strip whitespace from front of cookie only\n            if (cookie.lastIndexOf(cookiePrefix, 0) === 0) {\n                return cookie.substring(cookiePrefix.length, cookie.length);\n            }\n        }\n        return null;\n    }\n\n    static erase(name: string) {\n        Cookie.set(name, '', -1);\n    }\n}\n\nfunction writeCookie(name: string, value: string, expirationDate?: Date, domain?: string) {\n    document.cookie =\n        `${name}=${value}` +\n        (expirationDate ? `;expires=${expirationDate.toUTCString()}` : '') +\n        (domain ? `;domain=${domain}` : '') +\n        ';path=/;SameSite=Lax';\n}\n","import * as detector from './detector';\nimport {Cookie} from './cookieutils';\n\nexport let preferredStorage: WebStorage | null = null;\n\nexport interface WebStorage {\n    getItem(key: string): string | null | Promise<string | null>;\n    removeItem(key: string): void;\n    setItem(key: string, data: string): void | Promise<void>;\n}\n\nexport function getAvailableStorage(): WebStorage {\n    if (preferredStorage) {\n        return preferredStorage;\n    }\n    if (detector.hasLocalStorage()) {\n        return localStorage;\n    }\n    if (detector.hasCookieStorage()) {\n        return new CookieStorage();\n    }\n    if (detector.hasSessionStorage()) {\n        return sessionStorage;\n    }\n    return new NullStorage();\n}\n\nexport class CookieStorage implements WebStorage {\n    static prefix = 'coveo_';\n    getItem(key: string): string | null {\n        return Cookie.get(`${CookieStorage.prefix}${key}`);\n    }\n    removeItem(key: string) {\n        Cookie.erase(`${CookieStorage.prefix}${key}`);\n    }\n    setItem(key: string, data: string, expire?: number): void {\n        Cookie.set(`${CookieStorage.prefix}${key}`, data, expire);\n    }\n}\n\nexport class CookieAndLocalStorage implements WebStorage {\n    private cookieStorage = new CookieStorage();\n\n    getItem(key: string): string | null {\n        return localStorage.getItem(key) || this.cookieStorage.getItem(key);\n    }\n\n    removeItem(key: string): void {\n        this.cookieStorage.removeItem(key);\n        localStorage.removeItem(key);\n    }\n\n    setItem(key: string, data: string): void {\n        localStorage.setItem(key, data);\n        this.cookieStorage.setItem(key, data, 31556926000); // 1 year first party cookie\n    }\n}\n\nexport class NullStorage implements WebStorage {\n    getItem(key: string): string | null {\n        return null;\n    }\n    removeItem(key: string) {\n        /**/\n    }\n    setItem(key: string, data: string): void {\n        /**/\n    }\n}\n","import {getAvailableStorage, WebStorage} from './storage';\n\nexport const STORE_KEY: string = '__coveo.analytics.history';\nexport const MAX_NUMBER_OF_HISTORY_ELEMENTS: number = 20;\nexport const MIN_THRESHOLD_FOR_DUPLICATE_VALUE: number = 1000 * 60;\nexport const MAX_VALUE_SIZE = 75;\n\nexport class HistoryStore {\n    private store: WebStorage;\n    constructor(store?: WebStorage) {\n        this.store = store || getAvailableStorage();\n    }\n\n    /**\n     * @deprecated Synchronous method is deprecated, use addElementAsync instead. This method will NOT work with react-native.\n     */\n    addElement(elem: HistoryElement) {\n        elem.internalTime = new Date().getTime();\n        elem = this.cropQueryElement(this.stripEmptyQuery(elem));\n        let currentHistory = this.getHistoryWithInternalTime();\n        if (currentHistory != null) {\n            if (this.isValidEntry(elem)) {\n                this.setHistory([elem].concat(currentHistory));\n            }\n        } else {\n            this.setHistory([elem]);\n        }\n    }\n\n    async addElementAsync(elem: HistoryElement) {\n        elem.internalTime = new Date().getTime();\n        elem = this.cropQueryElement(this.stripEmptyQuery(elem));\n        let currentHistory = await this.getHistoryWithInternalTimeAsync();\n        if (currentHistory != null) {\n            if (this.isValidEntry(elem)) {\n                this.setHistory([elem].concat(currentHistory));\n            }\n        } else {\n            this.setHistory([elem]);\n        }\n    }\n\n    /**\n     * @deprecated Synchronous method is deprecated, use getHistoryAsync instead. This method will NOT work with react-native.\n     */\n    getHistory(): HistoryElement[] {\n        const history = this.getHistoryWithInternalTime();\n        return this.stripEmptyQueries(this.stripInternalTime(history));\n    }\n\n    async getHistoryAsync(): Promise<HistoryElement[]> {\n        const history = await this.getHistoryWithInternalTimeAsync();\n        return this.stripEmptyQueries(this.stripInternalTime(history));\n    }\n\n    private getHistoryWithInternalTime(): HistoryElement[] {\n        try {\n            const elements = this.store.getItem(STORE_KEY);\n            if (elements && typeof elements === 'string') {\n                return JSON.parse(elements) as HistoryElement[];\n            } else {\n                return [];\n            }\n        } catch (e) {\n            // When using the Storage APIs (localStorage/sessionStorage)\n            // Safari says that those APIs are available but throws when making\n            // a call to them.\n            return [];\n        }\n    }\n\n    private async getHistoryWithInternalTimeAsync(): Promise<HistoryElement[]> {\n        try {\n            const elements = await this.store.getItem(STORE_KEY);\n            if (elements) {\n                return JSON.parse(elements) as HistoryElement[];\n            } else {\n                return [];\n            }\n        } catch (e) {\n            // When using the Storage APIs (localStorage/sessionStorage)\n            // Safari says that those APIs are available but throws when making\n            // a call to them.\n            return [];\n        }\n    }\n\n    setHistory(history: HistoryElement[]) {\n        try {\n            this.store.setItem(STORE_KEY, JSON.stringify(history.slice(0, MAX_NUMBER_OF_HISTORY_ELEMENTS)));\n        } catch (e) {\n            /* refer to this.getHistory() */\n        }\n    }\n\n    clear() {\n        try {\n            this.store.removeItem(STORE_KEY);\n        } catch (e) {\n            /* refer to this.getHistory() */\n        }\n    }\n\n    getMostRecentElement(): HistoryElement | null {\n        let currentHistory = this.getHistoryWithInternalTime();\n        if (Array.isArray(currentHistory)) {\n            const sorted = currentHistory.sort((first: HistoryElement, second: HistoryElement) => {\n                // Internal time might not be set for all history element (on upgrade).\n                // Ensure to return the most recent element for which we have a value for internalTime.\n                return (second.internalTime || 0) - (first.internalTime || 0);\n            });\n            return sorted[0];\n        }\n        return null;\n    }\n\n    private cropQueryElement(part: HistoryElement) {\n        if (part.name && part.value && part.name.toLowerCase() === 'query') {\n            part.value = part.value.slice(0, MAX_VALUE_SIZE);\n        }\n\n        return part;\n    }\n\n    private isValidEntry(elem: HistoryElement): boolean {\n        let lastEntry = this.getMostRecentElement();\n\n        if (lastEntry && lastEntry.value == elem.value) {\n            return (elem.internalTime || 0) - (lastEntry.internalTime || 0) > MIN_THRESHOLD_FOR_DUPLICATE_VALUE;\n        }\n        return true;\n    }\n\n    private stripInternalTime(history: HistoryElement[]): HistoryElement[] {\n        if (Array.isArray(history)) {\n            return history.map((part) => {\n                const {name, time, value} = part;\n                return {name, time, value};\n            });\n        }\n        return [];\n    }\n\n    private stripEmptyQuery(part: HistoryElement) {\n        const {name, time, value} = part;\n        if (name && typeof value === 'string' && name.toLowerCase() === 'query' && value.trim() === '') {\n            return {name, time};\n        }\n\n        return part;\n    }\n\n    private stripEmptyQueries(history: HistoryElement[]): HistoryElement[] {\n        return history.map((part) => this.stripEmptyQuery(part));\n    }\n}\n\nexport interface HistoryElement {\n    name: string;\n    value?: string;\n    time: string;\n    internalTime?: number;\n}\n\nexport interface HistoryViewElement extends HistoryElement {\n    title?: string;\n}\n\nexport default HistoryStore;\n","import {AnalyticsClientSendEventHook} from '../client/analytics';\nimport {ViewEventRequest, EventType} from '../events';\nimport {HistoryStore, STORE_KEY} from '../history';\n\nexport const enhanceViewEvent: AnalyticsClientSendEventHook = async (eventType, payload) => {\n    if (eventType === EventType.view) {\n        await addPageViewToHistory(payload.contentIdValue);\n        return {\n            location: window.location.toString(),\n            referrer: document.referrer,\n            title: document.title,\n            ...payload,\n        } as ViewEventRequest;\n    }\n\n    return payload;\n};\n\nconst addPageViewToHistory = async (pageViewValue: string) => {\n    const store = new HistoryStore();\n    const historyElement = {\n        name: 'PageView',\n        value: pageViewValue,\n        time: new Date().toISOString(),\n    };\n    await store.addElementAsync(historyElement);\n};\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  const K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  const H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    const msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (let i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  const l = bytes.length / 4 + 2;\n  const N = Math.ceil(l / 16);\n  const M = new Array(N);\n\n  for (let i = 0; i < N; ++i) {\n    const arr = new Uint32Array(16);\n\n    for (let j = 0; j < 16; ++j) {\n      arr[j] = bytes[i * 64 + j * 4] << 24 | bytes[i * 64 + j * 4 + 1] << 16 | bytes[i * 64 + j * 4 + 2] << 8 | bytes[i * 64 + j * 4 + 3];\n    }\n\n    M[i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (let i = 0; i < N; ++i) {\n    const W = new Uint32Array(80);\n\n    for (let t = 0; t < 16; ++t) {\n      W[t] = M[i][t];\n    }\n\n    for (let t = 16; t < 80; ++t) {\n      W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);\n    }\n\n    let a = H[0];\n    let b = H[1];\n    let c = H[2];\n    let d = H[3];\n    let e = H[4];\n\n    for (let t = 0; t < 80; ++t) {\n      const s = Math.floor(t / 20);\n      const T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nconst v5 = v35('v5', 0x50, sha1);\nexport default v5;","import { unsafeStringify } from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function v35(name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    var _namespace;\n\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return unsafeStringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  let v;\n  const arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","export const libVersion = 'local'; // processed by @rollup/plugin-replace\n","export const getFormattedLocation = (location: Location) =>\n    `${location.protocol}//${location.hostname}${\n        location.pathname.indexOf('/') === 0 ? location.pathname : `/${location.pathname}`\n    }${location.search}`;\n","import {AnalyticsClient} from '../client/analytics';\nimport {v4 as uuidv4} from 'uuid';\nimport {getFormattedLocation} from '../client/location';\nimport {hasDocument} from '../detector';\n\ntype PluginWithId = {\n    readonly Id: string;\n};\n\nexport type PluginClass = typeof Plugin & PluginWithId;\nexport const BasePluginEventTypes = {\n    pageview: 'pageview',\n    event: 'event',\n};\n\nexport type PluginOptions = {client: AnalyticsClient; uuidGenerator?: typeof uuidv4};\n\nexport abstract class Plugin {\n    protected client: AnalyticsClient;\n    protected uuidGenerator: typeof uuidv4;\n    constructor({client, uuidGenerator = uuidv4}: PluginOptions) {\n        this.client = client;\n        this.uuidGenerator = uuidGenerator;\n    }\n    public abstract getApi(name: string): any;\n}\n\nexport abstract class BasePlugin extends Plugin {\n    protected action?: string;\n    protected actionData: {[name: string]: string} = {};\n    private pageViewId: string;\n    private nextPageViewId: string;\n    private hasSentFirstPageView?: boolean;\n    private currentLocation: string;\n    private lastReferrer: string;\n\n    constructor({client, uuidGenerator = uuidv4}: PluginOptions) {\n        super({client, uuidGenerator});\n        this.pageViewId = uuidGenerator();\n        this.nextPageViewId = this.pageViewId;\n        this.currentLocation = getFormattedLocation(window.location);\n        this.lastReferrer = hasDocument() ? document.referrer : '';\n\n        this.addHooks();\n    }\n    protected abstract addHooks(): void;\n    protected abstract clearPluginData(): void;\n\n    public getApi(name: string): Function | null {\n        switch (name) {\n            case 'setAction':\n                return this.setAction;\n            default:\n                return null;\n        }\n    }\n\n    public setAction(action: string, options?: any) {\n        this.action = action;\n        this.actionData = options;\n    }\n\n    public clearData() {\n        this.clearPluginData();\n        this.action = undefined;\n        this.actionData = {};\n    }\n\n    public getLocationInformation(eventType: string, payload: any) {\n        return {\n            hitType: eventType,\n            ...this.getNextValues(eventType, payload),\n        };\n    }\n\n    protected updateLocationInformation(eventType: string, payload: any) {\n        this.updateLocationForNextPageView(eventType, payload);\n    }\n\n    public getDefaultContextInformation(eventType: string) {\n        const documentContext = {\n            title: hasDocument() ? document.title : '',\n            encoding: hasDocument() ? document.characterSet : 'UTF-8',\n        };\n        const screenContext = {\n            screenResolution: `${screen.width}x${screen.height}`,\n            screenColor: `${screen.colorDepth}-bit`,\n        };\n        const navigatorContext = {\n            language: navigator.language,\n            userAgent: navigator.userAgent,\n        };\n        const eventContext = {\n            time: Date.now(),\n            eventId: this.uuidGenerator(),\n        };\n        return {\n            ...eventContext,\n            ...screenContext,\n            ...navigatorContext,\n            ...documentContext,\n        };\n    }\n\n    private updateLocationForNextPageView(eventType: string, payload: any) {\n        const {pageViewId, referrer, location} = this.getNextValues(eventType, payload);\n\n        this.lastReferrer = referrer;\n        this.pageViewId = pageViewId;\n        this.currentLocation = location;\n\n        if (eventType === BasePluginEventTypes.pageview) {\n            this.nextPageViewId = this.uuidGenerator();\n            this.hasSentFirstPageView = true;\n        }\n    }\n\n    /*\n        When calling getPayload or getParameters, we need to return what would be sent by the API without updating our internal reference.\n        For instance, if you getPayload(\"pageview\"), we want to return the same payload as if you did coveoua(\"send\", \"pageview\").\n    */\n    private getNextValues(eventType: string, payload: any) {\n        /*\n            When sending a pageview, we need to generate a new pageview ID.\n            For instance, with the following sequence: 1. pageview, 2. event, 3. pageview, 4. event, 1 and 2 will have the pageviewid, whereas 3 and 4 will have a different pageviewid.\n            We pre-generate the \"nextPageViewId\" in case you send the following sequence: 1. pageview, 2. event, 3. getPayload, 4. pageview. This ensures that 3 and 4 have the same pageviewid.\n            We applied the same logic to the referrer and the location.\n        */\n        return {\n            pageViewId: eventType === BasePluginEventTypes.pageview ? this.nextPageViewId : this.pageViewId,\n            referrer:\n                eventType === BasePluginEventTypes.pageview && this.hasSentFirstPageView\n                    ? this.currentLocation\n                    : this.lastReferrer,\n            location:\n                eventType === BasePluginEventTypes.pageview\n                    ? this.getCurrentLocationFromPayload(payload)\n                    : this.currentLocation,\n        };\n    }\n\n    private getCurrentLocationFromPayload(payload: any) {\n        if (!!payload.page) {\n            const removeStartingSlash = (page: string) => page.replace(/^\\/?(.*)$/, '/$1');\n            const extractHostnamePart = (location: string) => location.split('/').slice(0, 3).join('/');\n            return `${extractHostnamePart(this.currentLocation)}${removeStartingSlash(payload.page)}`;\n        } else {\n            return getFormattedLocation(window.location);\n        }\n    }\n}\n","import {validate as uuidvalidate, v4 as uuidv4} from 'uuid';\nimport {Plugin, PluginOptions, PluginClass} from './BasePlugin';\n\nexport class CoveoLinkParam {\n    public static readonly cvo_cid: string = 'cvo_cid'; // name of the url parameter\n    private static readonly expirationTime: number = 120; // expirationTime in secs\n    public readonly clientId: string; //uuid\n    public readonly creationDate: number; //seconds since epoch to save space in serialized param\n\n    constructor(clientId: string, timestamp: number) {\n        if (!uuidvalidate(clientId)) throw Error('Not a valid uuid');\n        this.clientId = clientId;\n        this.creationDate = Math.floor(timestamp / 1000);\n    }\n\n    public toString(): string {\n        // strips the dashes and uses second granularity to save on url length.\n        return this.clientId.replace(/-/g, '') + '.' + this.creationDate.toString();\n    }\n\n    public get expired(): boolean {\n        const age = Math.floor(Date.now() / 1000) - this.creationDate;\n        return age < 0 || age > CoveoLinkParam.expirationTime;\n    }\n\n    public validate(referrerString: string, referrerList: string[]): boolean {\n        return !this.expired && this.matchReferrer(referrerString, referrerList);\n    }\n\n    private matchReferrer(referrerString: string, referrerList: string[]): boolean {\n        try {\n            const url: URL = new URL(referrerString);\n            return referrerList.some((value: string) => {\n                const hostRegExp: RegExp = new RegExp(\n                    value.replace(/\\\\/g, '\\\\\\\\').replace(/\\./g, '\\\\.').replace(/\\*/g, '.*') + '$',\n                );\n                return hostRegExp.test(url.host);\n            });\n        } catch (error) {\n            return false;\n        }\n    }\n\n    public static fromString(input: string): CoveoLinkParam | null {\n        const parts = input.split('.');\n        if (parts.length !== 2) {\n            return null;\n        }\n        const [clientIdPart, creationDate] = parts;\n        if (clientIdPart.length !== 32 || isNaN(parseInt(creationDate))) {\n            return null;\n        }\n        const clientId =\n            clientIdPart.substring(0, 8) +\n            '-' +\n            clientIdPart.substring(8, 12) +\n            '-' +\n            clientIdPart.substring(12, 16) +\n            '-' +\n            clientIdPart.substring(16, 20) +\n            '-' +\n            clientIdPart.substring(20, 32);\n        if (uuidvalidate(clientId)) {\n            return new CoveoLinkParam(clientId, Number.parseInt(creationDate) * 1000);\n        } else {\n            return null;\n        }\n    }\n}\n\nexport class LinkPlugin extends Plugin {\n    public static readonly Id = 'link';\n\n    constructor({client, uuidGenerator = uuidv4}: PluginOptions) {\n        super({client, uuidGenerator});\n    }\n\n    public getApi(name: string): Function | null {\n        switch (name) {\n            case 'decorate':\n                return this.decorate;\n            case 'acceptFrom':\n                return this.acceptFrom;\n            default:\n                return null;\n        }\n    }\n\n    public async decorate(urlString: string): Promise<string> {\n        // Note: clientId retrieval function is marked as optional\n        if (!this.client.getCurrentVisitorId) {\n            throw new Error('Could not retrieve current clientId');\n        }\n        try {\n            const url = new URL(urlString);\n            const clientId: string = await this.client.getCurrentVisitorId!();\n            url.searchParams.set(CoveoLinkParam.cvo_cid, new CoveoLinkParam(clientId, Date.now()).toString());\n            return url.toString();\n        } catch (error) {\n            throw new Error('Invalid URL provided');\n        }\n    }\n\n    public acceptFrom(acceptedReferrers: string[]) {\n        this.client.setAcceptedLinkReferrers!(acceptedReferrers);\n    }\n}\n\nexport const Link: PluginClass = LinkPlugin;\n","// Object.keys returns `string[]` this adds types\n// see https://github.com/microsoft/TypeScript/pull/12253#issuecomment-393954723\nexport const keysOf = Object.keys as <T>(o: T) => Extract<keyof T, string>[];\nexport function isObject(o: any): boolean {\n    return o !== null && typeof o === 'object' && !Array.isArray(o);\n}\n\n/**\n * Attempt to coerce strings to number values.\n * Any non-number characters will fail parsing, in which case the input string is returned.\n *\n * @param input The input to possibly coerce to a number, if it is a string and parses to a number.\n * @returns The input, possibly coerced to a number.\n */\nexport function coerceToNumber(input: any): any {\n    return typeof input === 'string' && input != '' && !Number.isNaN(+input) ? +input : input;\n}\n\n/**\n * Can be used to both check if the first bit is set (for any utf-8 multibyte part),\n * and to detect \"following bytes\" (which start with `10xx_xxxx`)\n */\nconst UTF8_HIGH_BIT = 0b1000_0000;\n/** Header for a 2-byte code point: `110x_xxxx`. Can also be used as bit-mask to check for \"following bytes\". */\nconst UTF8_HEADER_2 = 0b1100_0000;\n/** Header for a 3-byte code point: `1110_xxxx`. Can also be used as bit-mask to check for \"header 2\". */\nconst UTF8_HEADER_3 = 0b1110_0000;\n/** Header for a 4-byte code point: `1111_0xxx`. Can also be used as bit-mask to check for \"header 3\". */\nconst UTF8_HEADER_4 = 0b1111_0000;\n\nfunction utf8ByteCountFromFirstByte(firstByte: number): number {\n    if ((firstByte & 0b1111_1000) === UTF8_HEADER_4) {\n        return 4;\n    }\n    if ((firstByte & UTF8_HEADER_4) === UTF8_HEADER_3) {\n        return 3;\n    }\n    if ((firstByte & UTF8_HEADER_3) === UTF8_HEADER_2) {\n        return 2;\n    }\n    return 1;\n}\n\n/**\n * Truncate a URL to an arbitrary length, taking care to not break inside a percent escape or UTF-8 multibyte sequence.\n *\n * @param input The input to truncate to the specified limit.\n * @param limit The limit to apply; if negative, no truncation is applied.\n * @returns The URL, possibly truncated to a length near limit (at most 11 characters less than limit).\n */\nexport function truncateUrl(input: string, limit: number): string {\n    if (limit < 0 || input.length <= limit) {\n        return input;\n    }\n    // A valid escape sequence is a percent followed by 2 hexadecimal characters; check if we split one up.\n    let end = input.indexOf('%', limit - 2);\n    if (end < 0 || end > limit) {\n        end = limit;\n    } else {\n        limit = end;\n    }\n    // Check that truncating at end won't break up an UTF-8 multibyte sequence half-way,\n    // by peeking backwards to find the first byte of an UTF-8 sequence (if present).\n    while (end > 2 && input.charAt(end - 3) == '%') {\n        const peekByte = Number.parseInt(input.substring(end - 2, end), 16);\n        // Note: if parsing fails, NaN gets coerced to 0 by the bitwise and.\n        if ((peekByte & UTF8_HIGH_BIT) != UTF8_HIGH_BIT) {\n            break;\n        }\n        end -= 3;\n        // Check if we reached the first byte by checking it is not a \"follow byte\": 10xx_xxxx.\n        if ((peekByte & UTF8_HEADER_2) != UTF8_HIGH_BIT) {\n            // If the full code point is there, keep it.\n            if (limit - end >= utf8ByteCountFromFirstByte(peekByte) * 3) {\n                end = limit;\n            }\n            // Otherwise, end is already set at the correct point to truncate at (the start of the multibyte sequence).\n            break;\n        }\n    }\n    return input.substring(0, end);\n}\n","import {Ticket} from '../../plugins/svc';\nimport {keysOf} from '../utils';\n\nconst ticketKeysMapping: {[key in keyof Ticket]: string} = {\n    id: 'svc_ticket_id',\n    subject: 'svc_ticket_subject',\n    description: 'svc_ticket_description',\n    category: 'svc_ticket_category',\n    productId: 'svc_ticket_product_id',\n    custom: 'svc_ticket_custom',\n};\nconst ticketKeysMappingValues = keysOf(ticketKeysMapping).map((key) => ticketKeysMapping[key]);\nconst ticketSubKeysMatchGroup = [...ticketKeysMappingValues].join('|');\nconst ticketKeyRegex = new RegExp(`^(${ticketSubKeysMatchGroup}$)`);\n\nexport const serviceActionsKeysMapping: {[name: string]: string} = {\n    svcAction: 'svc_action',\n    svcActionData: 'svc_action_data',\n};\n\nexport const convertTicketToMeasurementProtocol = (ticket: Ticket) => {\n    return keysOf(ticket)\n        .filter((key) => ticket[key] !== undefined)\n        .reduce((mappedTicket, key) => {\n            const newKey = ticketKeysMapping[key] || key;\n            return {\n                ...mappedTicket,\n                [newKey]: ticket[key],\n            };\n        }, {});\n};\n\nconst isTicketKey = (key: string) => ticketKeyRegex.test(key);\n\nexport const isServiceKey = [isTicketKey];\n","import {Product, ImpressionList, BaseImpression} from '../../plugins/ec';\nimport {keysOf} from '../utils';\n\n// Based off: https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#enhanced-ecomm\nconst productKeysMapping: {[key in keyof Product]: string} = {\n    id: 'id',\n    name: 'nm',\n    brand: 'br',\n    category: 'ca',\n    variant: 'va',\n    price: 'pr',\n    quantity: 'qt',\n    coupon: 'cc',\n    position: 'ps',\n    // Below are keys that were extended for Coveo\n    group: 'group',\n};\n\nconst impressionKeysMapping: {[key in keyof BaseImpression]: string} = {\n    id: 'id',\n    name: 'nm',\n    brand: 'br',\n    category: 'ca',\n    variant: 'va',\n    position: 'ps',\n    price: 'pr',\n    // Below are keys that were extended for Coveo\n    group: 'group',\n};\n\nconst productActionsKeysMapping: {[name: string]: string} = {\n    action: 'pa',\n    list: 'pal',\n    listSource: 'pls',\n};\n\nconst transactionActionsKeysMapping: {[name: string]: string} = {\n    id: 'ti',\n    revenue: 'tr',\n    tax: 'tt',\n    shipping: 'ts',\n    coupon: 'tcc',\n    affiliation: 'ta',\n    step: 'cos',\n    option: 'col',\n};\n\n// These extension keys do not have direct mappings, we are sending them as-is, thus only requiring an array.\nconst coveoCommerceExtensionKeys: string[] = [\n    'loyaltyCardId',\n    'loyaltyTier',\n    'thirdPartyPersona',\n    'companyName',\n    'favoriteStore',\n    'storeName',\n    'userIndustry',\n    'userRole',\n    'userDepartment',\n    'businessUnit',\n];\n\nconst quoteActionsKeysMapping: {[name: string]: string} = {\n    id: 'quoteId',\n    affiliation: 'quoteAffiliation',\n};\n\nconst reviewActionsKeysMapping: {[name: string]: string} = {\n    id: 'reviewId',\n    rating: 'reviewRating',\n    comment: 'reviewComment',\n};\n\nexport const commerceActionKeysMappingPerAction: Record<string, {[name: string]: string}> = {\n    add: productActionsKeysMapping,\n    bookmark_add: productActionsKeysMapping,\n    bookmark_remove: productActionsKeysMapping,\n    click: productActionsKeysMapping,\n    checkout: productActionsKeysMapping,\n    checkout_option: productActionsKeysMapping,\n    detail: productActionsKeysMapping,\n    impression: productActionsKeysMapping,\n    remove: productActionsKeysMapping,\n    refund: {\n        ...productActionsKeysMapping,\n        ...transactionActionsKeysMapping,\n    },\n    purchase: {\n        ...productActionsKeysMapping,\n        ...transactionActionsKeysMapping,\n    },\n    quickview: productActionsKeysMapping,\n    quote: {\n        ...productActionsKeysMapping,\n        ...quoteActionsKeysMapping,\n    },\n    review: {\n        ...productActionsKeysMapping,\n        ...reviewActionsKeysMapping,\n    },\n};\n\nexport const convertProductToMeasurementProtocol = (product: Product, index: number) => {\n    return keysOf(product).reduce((mappedProduct, key) => {\n        const newKey = `pr${index + 1}${productKeysMapping[key] || key}`;\n        return {\n            ...mappedProduct,\n            [newKey]: product[key],\n        };\n    }, {});\n};\n\nexport const convertImpressionListToMeasurementProtocol = (\n    impressionList: ImpressionList,\n    listIndex: number,\n    prefix: string,\n) => {\n    const payload: {[name: string]: any} = impressionList.impressions.reduce(\n        (mappedImpressions, impression, productIndex) => {\n            return {\n                ...mappedImpressions,\n                ...convertImpressionToMeasurementProtocol(impression, listIndex, productIndex, prefix),\n            };\n        },\n        {},\n    );\n\n    if (impressionList.listName) {\n        const listNameKey = `il${listIndex + 1}nm`;\n        payload[listNameKey] = impressionList.listName;\n    }\n    return payload;\n};\n\nconst convertImpressionToMeasurementProtocol = (\n    impression: BaseImpression,\n    listIndex: number,\n    productIndex: number,\n    prefix: string,\n) => {\n    return keysOf(impression).reduce((mappedImpression, key) => {\n        const newKey = `il${listIndex + 1}${prefix}${productIndex + 1}${impressionKeysMapping[key] || key}`;\n        return {\n            ...mappedImpression,\n            [newKey]: impression[key],\n        };\n    }, {});\n};\n\nconst productKeysMappingValues = keysOf(productKeysMapping).map((key) => productKeysMapping[key]);\nconst impressionKeysMappingValues = keysOf(impressionKeysMapping).map((key) => impressionKeysMapping[key]);\nconst productActionsKeysMappingValues = keysOf(productActionsKeysMapping).map((key) => productActionsKeysMapping[key]);\nconst transactionActionsKeysMappingValues = keysOf(transactionActionsKeysMapping).map(\n    (key) => transactionActionsKeysMapping[key],\n);\nconst reviewKeysMappingValues = keysOf(reviewActionsKeysMapping).map((key) => reviewActionsKeysMapping[key]);\nconst quoteKeysMappingValues = keysOf(quoteActionsKeysMapping).map((key) => quoteActionsKeysMapping[key]);\n\nconst productSubKeysMatchGroup = [...productKeysMappingValues, 'custom'].join('|');\nconst impressionSubKeysMatchGroup = [...impressionKeysMappingValues, 'custom'].join('|');\nconst productPrefixMatchGroup = '(pr[0-9]+)';\nconst impressionPrefixMatchGroup = '(il[0-9]+pi[0-9]+)';\nconst productKeyRegex = new RegExp(`^${productPrefixMatchGroup}(${productSubKeysMatchGroup})$`);\nconst impressionKeyRegex = new RegExp(`^(${impressionPrefixMatchGroup}(${impressionSubKeysMatchGroup}))|(il[0-9]+nm)$`);\nconst productActionsKeyRegex = new RegExp(`^(${productActionsKeysMappingValues.join('|')})$`);\nconst transactionActionsKeyRegex = new RegExp(`^(${transactionActionsKeysMappingValues.join('|')})$`);\nconst customProductKeyRegex = new RegExp(`^${productPrefixMatchGroup}custom$`);\nconst customImpressionKeyRegex = new RegExp(`^${impressionPrefixMatchGroup}custom$`);\nconst coveoCommerceExtensionKeysRegex = new RegExp(\n    `^(${[...coveoCommerceExtensionKeys, ...reviewKeysMappingValues, ...quoteKeysMappingValues].join('|')})$`,\n);\n\nconst isProductKey = (key: string) => productKeyRegex.test(key);\nconst isImpressionKey = (key: string) => impressionKeyRegex.test(key);\nconst isProductActionsKey = (key: string) => productActionsKeyRegex.test(key);\nconst isTransactionActionsKeyRegex = (key: string) => transactionActionsKeyRegex.test(key);\nconst isCoveoCommerceExtensionKey = (key: string) => coveoCommerceExtensionKeysRegex.test(key);\n\nexport const isCommerceKey = [\n    isImpressionKey,\n    isProductKey,\n    isProductActionsKey,\n    isTransactionActionsKeyRegex,\n    isCoveoCommerceExtensionKey,\n];\nexport const isCustomCommerceKey = [customProductKeyRegex, customImpressionKeyRegex];\n","import {BasePlugin} from '../../plugins/BasePlugin';\n\ntype DefaultContextInformation = ReturnType<typeof BasePlugin.prototype.getDefaultContextInformation> &\n    ReturnType<typeof BasePlugin.prototype.getLocationInformation>;\n\nconst globalParamKeysMapping: {[name: string]: string} = {\n    anonymizeIp: 'aip',\n};\n\nconst eventKeysMapping: {[name: string]: string} = {\n    eventCategory: 'ec',\n    eventAction: 'ea',\n    eventLabel: 'el',\n    eventValue: 'ev',\n    page: 'dp',\n    visitorId: 'cid',\n    clientId: 'cid',\n    userId: 'uid',\n    currencyCode: 'cu',\n};\n\nconst contextInformationMapping: {[key in keyof DefaultContextInformation]: string} = {\n    hitType: 't',\n    pageViewId: 'pid',\n    encoding: 'de',\n    location: 'dl',\n    referrer: 'dr',\n    screenColor: 'sd',\n    screenResolution: 'sr',\n    title: 'dt',\n    userAgent: 'ua',\n    language: 'ul',\n    eventId: 'z',\n    time: 'tm',\n};\n\n/* Those are extension keys that are supported by the Coveo collect protocol (but not Google's protocol). They will be forwarded as-is. */\nconst coveoExtensionsKeys = [\n    'contentId',\n    'contentIdKey',\n    'contentType',\n    'searchHub',\n    'tab',\n    'searchUid',\n    'permanentId',\n    'contentLocale',\n    'trackingId',\n];\n\nexport const baseMeasurementProtocolKeysMapping: {[name: string]: string} = {\n    ...globalParamKeysMapping,\n    ...eventKeysMapping,\n    ...contextInformationMapping,\n    ...coveoExtensionsKeys.reduce(\n        (all, key) => ({\n            ...all,\n            [key]: key,\n        }),\n        {},\n    ),\n};\n","import {isServiceKey, serviceActionsKeysMapping} from './measurementProtocolMapping/serviceMeasurementProtocolMapper';\nimport {\n    commerceActionKeysMappingPerAction,\n    isCommerceKey,\n    isCustomCommerceKey,\n} from './measurementProtocolMapping/commerceMeasurementProtocolMapper';\nimport {keysOf} from './utils';\nimport {baseMeasurementProtocolKeysMapping} from './measurementProtocolMapping/baseMeasurementProtocolMapper';\n\nconst measurementProtocolKeysMapping: {[name: string]: string} = {\n    ...baseMeasurementProtocolKeysMapping,\n    ...serviceActionsKeysMapping,\n};\n\nexport const convertKeysToMeasurementProtocol = (params: any) => {\n    const keysMappingForAction = (!!params.action && commerceActionKeysMappingPerAction[params.action]) || {};\n    return keysOf(params).reduce((mappedKeys, key) => {\n        const newKey = keysMappingForAction[key] || measurementProtocolKeysMapping[key] || key;\n        return {\n            ...mappedKeys,\n            [newKey]: params[key],\n        };\n    }, {});\n};\n\nconst measurementProtocolKeysMappingValues = keysOf(measurementProtocolKeysMapping).map(\n    (key) => measurementProtocolKeysMapping[key],\n);\n\nconst isKnownMeasurementProtocolKey = (key: string) => measurementProtocolKeysMappingValues.indexOf(key) !== -1;\nconst isCustomKey = (key: string) => key === 'custom';\n\nexport const isMeasurementProtocolKey = (key: string): boolean => {\n    return [...isCommerceKey, ...isServiceKey, isKnownMeasurementProtocolKey, isCustomKey].some((test) => test(key));\n};\n\nexport const convertCustomMeasurementProtocolKeys = (data: {[name: string]: string | {[name: string]: string}}) => {\n    return keysOf(data).reduce((all, current) => {\n        const match = getFirstCustomMeasurementProtocolKeyMatch(current);\n        if (match) {\n            return {\n                ...all,\n                ...convertCustomObject(match, data[current] as {[name: string]: string}),\n            };\n        } else {\n            return {\n                ...all,\n                [current]: data[current],\n            };\n        }\n    }, {});\n};\n\nconst getFirstCustomMeasurementProtocolKeyMatch = (key: string): string | undefined => {\n    let matchedKey: string | undefined = undefined;\n    [...isCustomCommerceKey].every((regex) => {\n        matchedKey = regex.exec(key)?.[1];\n        return !Boolean(matchedKey);\n    });\n    return matchedKey;\n};\n\nconst convertCustomObject = (prefix: string, customData: {[name: string]: string}) => {\n    return keysOf(customData).reduce(\n        (allCustom, currentCustomKey) => ({\n            ...allCustom,\n            [`${prefix}${currentCustomKey}`]: customData[currentCustomKey],\n        }),\n        {},\n    );\n};\n","import {AnalyticsRequestClient, IAnalyticsClientOptions, PreprocessAnalyticsRequest} from './analyticsRequestClient';\nimport {EventType, IRequestPayload} from '../events';\n\nexport class AnalyticsBeaconClient implements AnalyticsRequestClient {\n    constructor(private opts: IAnalyticsClientOptions) {}\n\n    public async sendEvent(eventType: EventType, originalPayload: IRequestPayload): Promise<void> {\n        if (!this.isAvailable()) {\n            throw new Error(\n                `navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like \"sendbeacon-polyfill\".`,\n            );\n        }\n\n        const {baseUrl, preprocessRequest} = this.opts;\n\n        const paramsFragments = await this.getQueryParamsForEventType(eventType);\n\n        const {url, payload} = await this.preProcessRequestAsPotentialJSONString(\n            `${baseUrl}/analytics/${eventType}?${paramsFragments}`,\n            originalPayload,\n            preprocessRequest,\n        );\n\n        const parsedRequestData = this.encodeForEventType(eventType, payload);\n        const body = new Blob([parsedRequestData], {\n            type: 'application/x-www-form-urlencoded',\n        });\n\n        navigator.sendBeacon(url, body as any); // https://github.com/microsoft/TypeScript/issues/38715\n        return;\n    }\n\n    public isAvailable() {\n        return 'sendBeacon' in navigator;\n    }\n\n    public deleteHttpCookieVisitorId() {\n        return Promise.resolve();\n    }\n\n    private async preProcessRequestAsPotentialJSONString(\n        originalURL: string,\n        originalPayload: IRequestPayload,\n        preprocessRequest?: PreprocessAnalyticsRequest,\n    ): Promise<{url: string; payload: IRequestPayload}> {\n        let returnedUrl = originalURL;\n        let returnedPayload = originalPayload;\n\n        if (preprocessRequest) {\n            const processedRequest = await preprocessRequest(\n                {url: originalURL, body: JSON.stringify(originalPayload)},\n                'analyticsBeacon',\n            );\n            const {url: processedURL, body: processedBody} = processedRequest;\n            returnedUrl = processedURL || originalURL;\n            try {\n                returnedPayload = JSON.parse(processedBody as string);\n            } catch (e) {\n                console.error('Unable to process the request body as a JSON string', e);\n            }\n        }\n\n        return {\n            payload: returnedPayload,\n            url: returnedUrl,\n        };\n    }\n\n    private encodeForEventType(eventType: EventType, payload: IRequestPayload): string {\n        return this.isEventTypeLegacy(eventType)\n            ? this.encodeEventToJson(eventType, payload)\n            : this.encodeEventToJson(eventType, payload, this.opts.token);\n    }\n\n    private async getQueryParamsForEventType(eventType: EventType): Promise<string> {\n        const {token, visitorIdProvider} = this.opts;\n        const visitorId = await visitorIdProvider.getCurrentVisitorId();\n        return [\n            token && this.isEventTypeLegacy(eventType) ? `access_token=${token}` : '',\n            visitorId ? `visitorId=${visitorId}` : '',\n            'discardVisitInfo=true',\n        ]\n            .filter((p) => !!p)\n            .join('&');\n    }\n\n    private isEventTypeLegacy(eventType: EventType) {\n        return [EventType.click, EventType.custom, EventType.search, EventType.view].indexOf(eventType) !== -1;\n    }\n\n    private encodeEventToJson(eventType: EventType, payload: IRequestPayload, access_token?: string): string {\n        let encoded = `${eventType}Event=${encodeURIComponent(JSON.stringify(payload))}`;\n        if (access_token) {\n            encoded = `access_token=${encodeURIComponent(access_token)}&${encoded}`;\n        }\n        return encoded;\n    }\n}\n","import {AnyEventResponse, EventType, IRequestPayload} from '../events';\n\nexport interface VisitorIdProvider {\n    getCurrentVisitorId: () => Promise<string>;\n    setCurrentVisitorId: (visitorId: string) => void;\n}\n\nexport interface AnalyticsRequestClient {\n    sendEvent(eventType: string, payload: IRequestPayload): Promise<AnyEventResponse | void>;\n    deleteHttpCookieVisitorId: () => Promise<void>;\n}\n\nexport interface IAnalyticsClientOptions {\n    baseUrl: string;\n    token?: string;\n    visitorIdProvider: VisitorIdProvider;\n    preprocessRequest?: PreprocessAnalyticsRequest;\n}\n\nexport type AnalyticsClientOrigin = 'analyticsFetch' | 'analyticsBeacon';\n\nexport type PreprocessAnalyticsRequest = (\n    request: IAnalyticsRequestOptions,\n    clientOrigin: AnalyticsClientOrigin,\n) => IAnalyticsRequestOptions | Promise<IAnalyticsRequestOptions>;\n\nexport interface IAnalyticsRequestOptions extends RequestInit {\n    url: string;\n}\n\nexport class NoopAnalyticsClient implements AnalyticsRequestClient {\n    public async sendEvent(_: EventType, __: IRequestPayload): Promise<void> {\n        return Promise.resolve();\n    }\n\n    public async deleteHttpCookieVisitorId() {\n        return Promise.resolve();\n    }\n}\n","// This file is to prevent including a fetch polyfill from the \"cross-fetch\" dependency when building for a browser target.\n// Major browsers today provide fetch on the window object, so including a polyfill would needlessly increase the size of the bundle.\nexport const fetch = globalThis.fetch;\n","import {AnalyticsRequestClient, IAnalyticsRequestOptions, IAnalyticsClientOptions} from './analyticsRequestClient';\nimport {AnyEventResponse, EventType, IRequestPayload} from '../events';\nimport {fetch} from 'cross-fetch';\n\nexport class AnalyticsFetchClient implements AnalyticsRequestClient {\n    constructor(private opts: IAnalyticsClientOptions) {}\n\n    public async sendEvent(eventType: EventType, payload: IRequestPayload): Promise<AnyEventResponse | void> {\n        const {baseUrl, visitorIdProvider, preprocessRequest} = this.opts;\n\n        const visitorIdParam = this.shouldAppendVisitorId(eventType) ? await this.getVisitorIdParam() : '';\n        const defaultOptions: IAnalyticsRequestOptions = {\n            url: `${baseUrl}/analytics/${eventType}${visitorIdParam}`,\n            credentials: 'include',\n            mode: 'cors',\n            headers: this.getHeaders(),\n            method: 'POST',\n            body: JSON.stringify(payload),\n        };\n        const {url, ...fetchData}: IAnalyticsRequestOptions = {\n            ...defaultOptions,\n            ...(preprocessRequest ? await preprocessRequest(defaultOptions, 'analyticsFetch') : {}),\n        };\n\n        let response: Response;\n\n        try {\n            response = await fetch(url, fetchData);\n        } catch (error) {\n            console.error('An error has occured when sending the event.', error);\n            return;\n        }\n\n        if (response.ok) {\n            const visit = (await response.json()) as AnyEventResponse;\n\n            if (visit.visitorId) {\n                visitorIdProvider.setCurrentVisitorId(visit.visitorId);\n            }\n\n            return visit;\n        } else {\n            try {\n                response.json();\n            } catch {\n                /* If you don't parse the response, it won't appear in the network tab. */\n            }\n            console.error(`An error has occured when sending the \"${eventType}\" event.`, response, payload);\n            throw new Error(\n                `An error has occurred when sending the \"${eventType}\" event. Check the console logs for more details.`,\n            );\n        }\n    }\n\n    public async deleteHttpCookieVisitorId() {\n        const {baseUrl} = this.opts;\n        const url = `${baseUrl}/analytics/visit`;\n        await fetch(url, {headers: this.getHeaders(), method: 'DELETE'});\n    }\n\n    private shouldAppendVisitorId(eventType: EventType) {\n        return [EventType.click, EventType.custom, EventType.search, EventType.view].indexOf(eventType) !== -1;\n    }\n\n    private async getVisitorIdParam() {\n        const {visitorIdProvider} = this.opts;\n        const visitorId = await visitorIdProvider.getCurrentVisitorId();\n        return visitorId ? `?visitor=${visitorId}` : '';\n    }\n\n    private getHeaders(): Record<string, string> {\n        const {token} = this.opts;\n        return {\n            ...(token ? {Authorization: `Bearer ${token}`} : {}),\n            'Content-Type': `application/json`,\n        };\n    }\n}\n","import {WebStorage, NullStorage, CookieAndLocalStorage} from '../storage';\nimport {AnalyticsBeaconClient} from './analyticsBeaconClient';\nimport {hasLocalStorage, hasCookieStorage} from '../detector';\nimport {AnalyticsRequestClient, IAnalyticsClientOptions, NoopAnalyticsClient} from './analyticsRequestClient';\nimport {AnalyticsFetchClient} from './analyticsFetchClient';\nimport {BufferedRequest} from './analytics';\nimport {EventType} from '../events';\n\nexport interface IRuntimeEnvironment {\n    storage: WebStorage;\n    client: AnalyticsRequestClient;\n    getClientDependingOnEventType(eventType: EventType): AnalyticsRequestClient;\n}\n\nexport class BrowserRuntime implements IRuntimeEnvironment {\n    public storage: WebStorage;\n    public client: AnalyticsFetchClient;\n    private beaconClient: AnalyticsBeaconClient;\n\n    constructor(clientOptions: IAnalyticsClientOptions, getUnprocessedRequests: () => Array<BufferedRequest>) {\n        if (hasLocalStorage() && hasCookieStorage()) {\n            this.storage = new CookieAndLocalStorage();\n        } else if (hasLocalStorage()) {\n            this.storage = localStorage;\n        } else {\n            console.warn('BrowserRuntime detected no valid storage available.', this);\n            this.storage = new NullStorage();\n        }\n        this.client = new AnalyticsFetchClient(clientOptions);\n        this.beaconClient = new AnalyticsBeaconClient(clientOptions);\n        window.addEventListener('beforeunload', () => {\n            const requests = getUnprocessedRequests();\n            for (let {eventType, payload} of requests) {\n                this.beaconClient.sendEvent(eventType, payload);\n            }\n        });\n    }\n\n    public getClientDependingOnEventType(eventType: EventType) {\n        return eventType === 'click' && this.beaconClient.isAvailable() ? this.beaconClient : this.client;\n    }\n}\n\nexport class NodeJSRuntime implements IRuntimeEnvironment {\n    public storage: WebStorage;\n    public client: AnalyticsFetchClient;\n\n    constructor(clientOptions: IAnalyticsClientOptions, storage?: WebStorage) {\n        this.storage = storage || new NullStorage();\n        this.client = new AnalyticsFetchClient(clientOptions);\n    }\n\n    getClientDependingOnEventType(eventType: EventType): AnalyticsRequestClient {\n        return this.client;\n    }\n}\n\nexport class NoopRuntime implements IRuntimeEnvironment {\n    public storage = new NullStorage();\n    public client = new NoopAnalyticsClient();\n\n    getClientDependingOnEventType(eventType: EventType): AnalyticsRequestClient {\n        return this.client;\n    }\n}\n","// Read the Mozilla Do Not Track Field Guide\n// (https://developer.mozilla.org/en-US/docs/Web/Security/Do_not_track_field_guide),\n// for information on how to use the donottrack\n// gathering data of actions of a user as long as it is not associated to the\n// identity of that user, doNotTrack is not enabled here.\n\nimport {hasNavigator, hasWindow} from './detector';\n\nconst doNotTrackValues = ['1', 1, 'yes', true];\n\nexport function doNotTrack(): boolean {\n    const checks: any[] = [];\n    if (hasWindow()) {\n        checks.push((<any>window).doNotTrack);\n    }\n    if (hasNavigator()) {\n        checks.push((<any>navigator).doNotTrack, (<any>navigator).msDoNotTrack, (<any>navigator).globalPrivacyControl);\n    }\n    return checks.some((value) => doNotTrackValues.indexOf(value) !== -1);\n}\n\nexport default doNotTrack;\n","import {\n    AnyEventResponse,\n    ClickEventRequest,\n    ClickEventResponse,\n    CustomEventRequest,\n    CustomEventResponse,\n    EventType,\n    HealthResponse,\n    SearchEventRequest,\n    SearchEventResponse,\n    ViewEventRequest,\n    ViewEventResponse,\n    VisitResponse,\n    IRequestPayload,\n    VariableArgumentsPayload,\n    PreparedClickEventRequest,\n    PreparedCustomEventRequest,\n    PreparedViewEventRequest,\n    PreparedSearchEventRequest,\n} from '../events';\nimport {IAnalyticsClientOptions, PreprocessAnalyticsRequest, VisitorIdProvider} from './analyticsRequestClient';\nimport {hasWindow, hasDocument} from '../detector';\nimport {addDefaultValues} from '../hook/addDefaultValues';\nimport {enhanceViewEvent} from '../hook/enhanceViewEvent';\nimport {v4 as uuidv4, v5 as uuidv5, validate as uuidValidate} from 'uuid';\nimport {libVersion} from '../version';\nimport {CoveoLinkParam} from '../plugins/link';\nimport {\n    convertKeysToMeasurementProtocol,\n    isMeasurementProtocolKey,\n    convertCustomMeasurementProtocolKeys,\n} from './measurementProtocolMapper';\nimport {IRuntimeEnvironment, BrowserRuntime, NodeJSRuntime, NoopRuntime} from './runtimeEnvironment';\nimport HistoryStore from '../history';\nimport {isApiKey} from './token';\nimport {isReactNative, ReactNativeRuntimeWarning} from '../react-native/react-native-utils';\nimport {doNotTrack} from '../donottrack';\nimport {isObject, truncateUrl} from './utils';\n\nexport const Version = 'v15';\n\nexport const Endpoints = {\n    default: 'https://analytics.cloud.coveo.com/rest/ua',\n    production: 'https://analytics.cloud.coveo.com/rest/ua',\n    hipaa: 'https://analyticshipaa.cloud.coveo.com/rest/ua',\n};\n\nexport interface ClientOptions {\n    token?: string;\n    endpoint: string;\n    isCustomEndpoint?: boolean;\n    version: string;\n    runtimeEnvironment?: IRuntimeEnvironment;\n    beforeSendHooks: AnalyticsClientSendEventHook[];\n    afterSendHooks: AnalyticsClientSendEventHook[];\n    preprocessRequest?: PreprocessAnalyticsRequest;\n}\n\nexport type AnalyticsClientSendEventHook = <TResult>(eventType: string, payload: any) => TResult | Promise<TResult>;\nexport type EventTypeConfig = {\n    newEventType: EventType;\n    variableLengthArgumentsNames?: string[];\n    addVisitorIdParameter?: boolean;\n    addClientIdParameter?: boolean;\n    usesMeasurementProtocol?: boolean;\n};\n\nexport interface PreparedEvent<TPreparedRequest, TCompleteRequest, TResponse extends AnyEventResponse>\n    extends BufferedRequest {\n    log(remainingPayload: Omit<TCompleteRequest, keyof TPreparedRequest>): Promise<TResponse | void>;\n}\n\nexport interface AnalyticsClient {\n    getPayload(eventType: string, ...payload: VariableArgumentsPayload): Promise<any>;\n    getParameters(eventType: string, ...payload: VariableArgumentsPayload): Promise<any>;\n    makeEvent<TPreparedRequest, TCompleteRequest, TResponse extends AnyEventResponse>(\n        eventType: string,\n        ...payload: VariableArgumentsPayload\n    ): Promise<PreparedEvent<TPreparedRequest, TCompleteRequest, TResponse>>;\n    sendEvent(eventType: string, ...payload: VariableArgumentsPayload): Promise<AnyEventResponse | void>;\n    makeSearchEvent(\n        request: PreparedSearchEventRequest,\n    ): Promise<PreparedEvent<PreparedSearchEventRequest, SearchEventRequest, SearchEventResponse>>;\n    sendSearchEvent(request: SearchEventRequest): Promise<SearchEventResponse | void>;\n    makeClickEvent(\n        request: PreparedClickEventRequest,\n    ): Promise<PreparedEvent<PreparedClickEventRequest, ClickEventRequest, ClickEventResponse>>;\n    sendClickEvent(request: ClickEventRequest): Promise<ClickEventResponse | void>;\n    makeCustomEvent(\n        request: PreparedCustomEventRequest,\n    ): Promise<PreparedEvent<PreparedCustomEventRequest, CustomEventRequest, CustomEventResponse>>;\n    sendCustomEvent(request: CustomEventRequest): Promise<CustomEventResponse | void>;\n    makeViewEvent(\n        request: PreparedViewEventRequest,\n    ): Promise<PreparedEvent<PreparedViewEventRequest, ViewEventRequest, ViewEventResponse>>;\n    sendViewEvent(request: ViewEventRequest): Promise<ViewEventResponse | void>;\n    getVisit(): Promise<VisitResponse>;\n    getHealth(): Promise<HealthResponse>;\n    registerBeforeSendEventHook(hook: AnalyticsClientSendEventHook): void;\n    registerAfterSendEventHook(hook: AnalyticsClientSendEventHook): void;\n    addEventTypeMapping(eventType: string, eventConfig: EventTypeConfig): void;\n    runtime: IRuntimeEnvironment;\n    version: string;\n    /**\n     * @deprecated\n     */\n    readonly currentVisitorId: string;\n    getCurrentVisitorId?(): Promise<string>; // TODO: v3 make required\n    setAcceptedLinkReferrers?(hosts: string[]): void;\n}\n\nexport interface BufferedRequest {\n    eventType: EventType;\n    payload: any;\n}\n\ntype ProcessPayloadStep = (currentPayload: any) => any;\ntype AsyncProcessPayloadStep = (currentPayload: any) => Promise<any>;\n\nexport function buildBaseUrl(endpoint = Endpoints.default, apiVersion = Version, isCustomEndpoint = false) {\n    endpoint = endpoint.replace(/\\/$/, ''); // Remove trailing slash in endpoint.\n\n    if (isCustomEndpoint) {\n        return `${endpoint}/${apiVersion}`;\n    }\n\n    const hasUARestEndpoint = endpoint.endsWith('/rest') || endpoint.endsWith('/rest/ua');\n\n    return `${endpoint}${hasUARestEndpoint ? '' : '/rest'}/${apiVersion}`;\n}\n\n// Note: Changing this value will destroy the mapping from tracking string to clientId for all customers\n// using the setClientId() api. It will have the same effect as every visitor for those customers clearing\n// their cookie store at the same time, with corresponding downstream effects.\nconst COVEO_NAMESPACE = '38824e1f-37f5-42d3-8372-a4b8fa9df946';\n\nexport class CoveoAnalyticsClient implements AnalyticsClient, VisitorIdProvider {\n    private get defaultOptions(): ClientOptions {\n        return {\n            endpoint: Endpoints.default,\n            isCustomEndpoint: false,\n            token: '',\n            version: Version,\n            beforeSendHooks: [],\n            afterSendHooks: [],\n        };\n    }\n\n    public runtime: IRuntimeEnvironment;\n    public get version(): string {\n        return libVersion;\n    }\n    private visitorId: string;\n    private bufferedRequests: BufferedRequest[];\n    private beforeSendHooks: AnalyticsClientSendEventHook[];\n    private afterSendHooks: AnalyticsClientSendEventHook[];\n    private eventTypeMapping: {[name: string]: EventTypeConfig};\n    private options: ClientOptions;\n    private acceptedLinkReferrers: string[] = [];\n\n    constructor(opts: Partial<ClientOptions>) {\n        if (!opts) {\n            throw new Error('You have to pass options to this constructor');\n        }\n\n        this.options = {\n            ...this.defaultOptions,\n            ...opts,\n        };\n\n        this.visitorId = '';\n        this.bufferedRequests = [];\n        this.beforeSendHooks = [enhanceViewEvent, addDefaultValues].concat(this.options.beforeSendHooks);\n        this.afterSendHooks = this.options.afterSendHooks;\n        this.eventTypeMapping = {};\n\n        const clientsOptions: IAnalyticsClientOptions = {\n            baseUrl: this.baseUrl,\n            token: this.options.token,\n            visitorIdProvider: this,\n            preprocessRequest: this.options.preprocessRequest,\n        };\n\n        if (doNotTrack()) {\n            this.runtime = new NoopRuntime();\n        } else {\n            this.runtime = this.options.runtimeEnvironment || this.initRuntime(clientsOptions);\n        }\n\n        this.addEventTypeMapping(EventType.view, {newEventType: EventType.view, addClientIdParameter: true});\n        this.addEventTypeMapping(EventType.click, {newEventType: EventType.click, addClientIdParameter: true});\n        this.addEventTypeMapping(EventType.custom, {newEventType: EventType.custom, addClientIdParameter: true});\n        this.addEventTypeMapping(EventType.search, {newEventType: EventType.search, addClientIdParameter: true});\n    }\n\n    private initRuntime(clientsOptions: IAnalyticsClientOptions) {\n        if (hasWindow() && hasDocument()) {\n            return new BrowserRuntime(clientsOptions, () => {\n                const copy = [...this.bufferedRequests];\n                this.bufferedRequests = [];\n                return copy;\n            });\n        } else if (isReactNative()) {\n            console.warn(ReactNativeRuntimeWarning);\n        }\n        return new NodeJSRuntime(clientsOptions);\n    }\n\n    private get storage() {\n        return this.runtime.storage;\n    }\n\n    private async determineVisitorId() {\n        try {\n            return (\n                (hasWindow() && this.extractClientIdFromLink(window.location.href)) ||\n                (await this.storage.getItem('visitorId')) ||\n                uuidv4()\n            );\n        } catch (err) {\n            console.log(\n                'Could not get visitor ID from the current runtime environment storage. Using a random ID instead.',\n                err,\n            );\n            return uuidv4();\n        }\n    }\n\n    async getCurrentVisitorId() {\n        if (!this.visitorId) {\n            const id = await this.determineVisitorId();\n            await this.setCurrentVisitorId(id);\n        }\n        return this.visitorId;\n    }\n\n    async setCurrentVisitorId(visitorId: string) {\n        this.visitorId = visitorId;\n        await this.storage.setItem('visitorId', visitorId);\n    }\n\n    async setClientId(value: string, namespace?: string) {\n        if (uuidValidate(value)) {\n            this.setCurrentVisitorId(value.toLowerCase());\n        } else {\n            if (!namespace) {\n                throw Error('Cannot generate uuid client id without a specific namespace string.');\n            }\n            this.setCurrentVisitorId(uuidv5(value, uuidv5(namespace, COVEO_NAMESPACE)));\n        }\n    }\n\n    async getParameters(eventType: EventType | string, ...payload: VariableArgumentsPayload) {\n        return await this.resolveParameters(eventType, ...payload);\n    }\n\n    async getPayload(eventType: EventType | string, ...payload: VariableArgumentsPayload) {\n        const parametersToSend = await this.resolveParameters(eventType, ...payload);\n        return await this.resolvePayloadForParameters(eventType, parametersToSend);\n    }\n\n    /**\n     * @deprecated Synchronous method is deprecated, use getCurrentVisitorId instead. This method will NOT work with react-native.\n     */\n    get currentVisitorId() {\n        const visitorId = this.visitorId || this.storage.getItem('visitorId');\n        if (typeof visitorId !== 'string') {\n            this.setCurrentVisitorId(uuidv4());\n        }\n        return this.visitorId;\n    }\n\n    /**\n     * @deprecated Synchronous method is deprecated, use setCurrentVisitorId instead. This method will NOT work with react-native.\n     */\n    set currentVisitorId(visitorId: string) {\n        this.visitorId = visitorId;\n        this.storage.setItem('visitorId', visitorId);\n    }\n\n    private extractClientIdFromLink(urlString: string): string | null {\n        if (doNotTrack()) {\n            return null;\n        }\n        try {\n            const linkParam: string | null = new URL(urlString).searchParams.get(CoveoLinkParam.cvo_cid);\n            if (linkParam == null) {\n                return null;\n            }\n            const linker: CoveoLinkParam | null = CoveoLinkParam.fromString(linkParam);\n            if (!linker || !hasDocument() || !linker.validate(document.referrer, this.acceptedLinkReferrers)) {\n                return null;\n            }\n            return linker.clientId;\n        } catch (error) {\n            // Ignore any parsing errors\n        }\n        return null;\n    }\n\n    async resolveParameters(eventType: EventType | string, ...payload: VariableArgumentsPayload) {\n        const {\n            variableLengthArgumentsNames = [],\n            addVisitorIdParameter = false,\n            usesMeasurementProtocol = false,\n            addClientIdParameter = false,\n        } = this.eventTypeMapping[eventType] || {};\n\n        const processVariableArgumentNamesStep: ProcessPayloadStep = (currentPayload) =>\n            variableLengthArgumentsNames.length > 0\n                ? this.parseVariableArgumentsPayload(variableLengthArgumentsNames, currentPayload)\n                : currentPayload[0];\n        const addVisitorIdStep: AsyncProcessPayloadStep = async (currentPayload) => ({\n            ...currentPayload,\n            visitorId: addVisitorIdParameter ? await this.getCurrentVisitorId() : '',\n        });\n        const addClientIdStep: AsyncProcessPayloadStep = async (currentPayload) => {\n            if (addClientIdParameter) {\n                return {\n                    ...currentPayload,\n                    clientId: await this.getCurrentVisitorId(),\n                };\n            }\n            return currentPayload;\n        };\n        const setAnonymousUserStep: ProcessPayloadStep = (currentPayload) =>\n            usesMeasurementProtocol ? this.ensureAnonymousUserWhenUsingApiKey(currentPayload) : currentPayload;\n        const processBeforeSendHooksStep: AsyncProcessPayloadStep = (currentPayload) =>\n            this.beforeSendHooks.reduce(async (promisePayload, current) => {\n                const payload = await promisePayload;\n                return await current(eventType, payload);\n            }, currentPayload);\n\n        const parametersToSend = await [\n            processVariableArgumentNamesStep,\n            addVisitorIdStep,\n            addClientIdStep,\n            setAnonymousUserStep,\n            processBeforeSendHooksStep,\n        ].reduce(async (payloadPromise, step) => {\n            const payload = await payloadPromise;\n            return await step(payload);\n        }, Promise.resolve(payload));\n\n        return parametersToSend;\n    }\n\n    async resolvePayloadForParameters(eventType: EventType | string, parameters: any) {\n        const {usesMeasurementProtocol = false} = this.eventTypeMapping[eventType] || {};\n\n        const addTrackingIdStep: ProcessPayloadStep = (currentPayload) =>\n            this.setTrackingIdIfTrackingIdNotPresent(currentPayload);\n        const cleanPayloadStep: ProcessPayloadStep = (currentPayload) =>\n            this.removeEmptyPayloadValues(currentPayload, eventType);\n        const validateParams: ProcessPayloadStep = (currentPayload) => this.validateParams(currentPayload, eventType);\n        const processMeasurementProtocolConversionStep: ProcessPayloadStep = (currentPayload) =>\n            usesMeasurementProtocol ? convertKeysToMeasurementProtocol(currentPayload) : currentPayload;\n        const removeUnknownParameters: ProcessPayloadStep = (currentPayload) =>\n            usesMeasurementProtocol ? this.removeUnknownParameters(currentPayload) : currentPayload;\n        const processCustomParameters: ProcessPayloadStep = (currentPayload) =>\n            usesMeasurementProtocol\n                ? this.processCustomParameters(currentPayload)\n                : this.mapCustomParametersToCustomData(currentPayload);\n\n        const payloadToSend = await [\n            addTrackingIdStep,\n            cleanPayloadStep,\n            validateParams,\n            processMeasurementProtocolConversionStep,\n            removeUnknownParameters,\n            processCustomParameters,\n        ].reduce(async (payloadPromise, step) => {\n            const payload = await payloadPromise;\n            return await step(payload);\n        }, Promise.resolve(parameters));\n\n        return payloadToSend;\n    }\n\n    async makeEvent<TPreparedRequest, TCompleteRequest, TResponse extends AnyEventResponse>(\n        eventType: EventType | string,\n        ...payload: VariableArgumentsPayload\n    ): Promise<PreparedEvent<TPreparedRequest, TCompleteRequest, TResponse>> {\n        const {newEventType: eventTypeToSend = eventType as EventType} = this.eventTypeMapping[eventType] || {};\n\n        const parametersToSend = await this.resolveParameters(eventType, ...payload);\n        const payloadToSend = await this.resolvePayloadForParameters(eventType, parametersToSend);\n        return {\n            eventType: eventTypeToSend,\n            payload: payloadToSend,\n            log: async (remainingPayload) => {\n                this.bufferedRequests.push(<BufferedRequest>{\n                    eventType: eventTypeToSend,\n                    payload: {...payloadToSend, ...remainingPayload},\n                });\n                await Promise.all(\n                    this.afterSendHooks.map((hook) => hook(eventType, {...parametersToSend, ...remainingPayload})),\n                );\n                await this.deferExecution();\n                return (await this.sendFromBuffer()) as TResponse | void;\n            },\n        };\n    }\n\n    async sendEvent(eventType: EventType | string, ...payload: VariableArgumentsPayload) {\n        return (await this.makeEvent<any, any, AnyEventResponse>(eventType, ...payload)).log({});\n    }\n\n    private deferExecution(): Promise<void> {\n        return new Promise((resolve) => setTimeout(resolve, 0));\n    }\n\n    private async sendFromBuffer(): Promise<AnyEventResponse | void> {\n        const popped = this.bufferedRequests.shift();\n        if (popped) {\n            const {eventType, payload} = popped;\n            return this.runtime.getClientDependingOnEventType(eventType).sendEvent(eventType, payload);\n        }\n    }\n\n    public clear() {\n        this.storage.removeItem('visitorId');\n        const store = new HistoryStore();\n        store.clear();\n    }\n\n    public deleteHttpOnlyVisitorId() {\n        this.runtime.client.deleteHttpCookieVisitorId();\n    }\n\n    async makeSearchEvent(request: PreparedSearchEventRequest) {\n        return this.makeEvent<PreparedSearchEventRequest, SearchEventRequest, SearchEventResponse>(\n            EventType.search,\n            request,\n        );\n    }\n\n    async sendSearchEvent({searchQueryUid, ...preparedRequest}: SearchEventRequest) {\n        return (await this.makeSearchEvent(preparedRequest)).log({searchQueryUid});\n    }\n\n    async makeClickEvent(request: PreparedClickEventRequest) {\n        return this.makeEvent<PreparedClickEventRequest, ClickEventRequest, ClickEventResponse>(\n            EventType.click,\n            request,\n        );\n    }\n\n    async sendClickEvent({searchQueryUid, ...preparedRequest}: ClickEventRequest) {\n        return (await this.makeClickEvent(preparedRequest)).log({searchQueryUid});\n    }\n\n    async makeCustomEvent(request: PreparedCustomEventRequest) {\n        return this.makeEvent<PreparedCustomEventRequest, CustomEventRequest, CustomEventResponse>(\n            EventType.custom,\n            request,\n        );\n    }\n\n    async sendCustomEvent({lastSearchQueryUid, ...preparedRequest}: CustomEventRequest) {\n        return (await this.makeCustomEvent(preparedRequest)).log({lastSearchQueryUid});\n    }\n\n    async makeViewEvent(request: PreparedViewEventRequest) {\n        return this.makeEvent<PreparedViewEventRequest, ViewEventRequest, ViewEventResponse>(EventType.view, request);\n    }\n\n    async sendViewEvent(request: ViewEventRequest): Promise<ViewEventResponse | void> {\n        return (await this.makeViewEvent(request)).log({});\n    }\n\n    async getVisit(): Promise<VisitResponse> {\n        // deepcode ignore Ssrf: url is supplied by script owner\n        const response = await fetch(`${this.baseUrl}/analytics/visit`);\n        const visit = (await response.json()) as VisitResponse;\n        this.visitorId = visit.visitorId;\n        return visit;\n    }\n\n    async getHealth(): Promise<HealthResponse> {\n        // deepcode ignore Ssrf: url is supplied by script owner\n        const response = await fetch(`${this.baseUrl}/analytics/monitoring/health`);\n        return (await response.json()) as HealthResponse;\n    }\n\n    registerBeforeSendEventHook(hook: AnalyticsClientSendEventHook): void {\n        this.beforeSendHooks.push(hook);\n    }\n\n    registerAfterSendEventHook(hook: AnalyticsClientSendEventHook): void {\n        this.afterSendHooks.push(hook);\n    }\n\n    addEventTypeMapping(eventType: string, eventConfig: EventTypeConfig): void {\n        this.eventTypeMapping[eventType] = eventConfig;\n    }\n\n    setAcceptedLinkReferrers(hosts: string[]): void {\n        if (Array.isArray(hosts) && hosts.every((host) => typeof host == 'string')) this.acceptedLinkReferrers = hosts;\n        else throw Error('Parameter should be an array of domain strings');\n    }\n\n    private parseVariableArgumentsPayload(fieldsOrder: string[], payload: VariableArgumentsPayload) {\n        const parsedArguments: {[name: string]: any} = {};\n        for (let i = 0, length = payload.length; i < length; i++) {\n            const currentArgument = payload[i];\n            if (typeof currentArgument === 'string') {\n                parsedArguments[fieldsOrder[i]] = currentArgument;\n            } else if (typeof currentArgument === 'object') {\n                // If the argument is an object, it is considered the last argument of the chain. Its values should be returned as-is.\n                return {\n                    ...parsedArguments,\n                    ...currentArgument,\n                };\n            }\n        }\n        return parsedArguments;\n    }\n\n    private isKeyAllowedEmpty(evtType: string, key: string) {\n        const keysThatCanBeEmpty: Record<string, string[]> = {\n            [EventType.search]: ['queryText'],\n        };\n\n        const match = keysThatCanBeEmpty[evtType] || [];\n        return match.indexOf(key) !== -1;\n    }\n\n    private removeEmptyPayloadValues(payload: IRequestPayload, eventType: string): IRequestPayload {\n        const isNotEmptyValue = (value: any) => typeof value !== 'undefined' && value !== null && value !== '';\n        return Object.keys(payload)\n            .filter((key) => this.isKeyAllowedEmpty(eventType, key) || isNotEmptyValue(payload[key]))\n            .reduce(\n                (newPayload, key) => ({\n                    ...newPayload,\n                    [key]: payload[key],\n                }),\n                {},\n            );\n    }\n\n    private removeUnknownParameters(payload: IRequestPayload): IRequestPayload {\n        const newPayload = Object.keys(payload)\n            .filter((key) => {\n                if (isMeasurementProtocolKey(key)) {\n                    return true;\n                } else {\n                    console.log(key, 'is not processed by coveoua');\n                }\n            })\n            .reduce(\n                (newPayload, key) => ({\n                    ...newPayload,\n                    [key]: payload[key],\n                }),\n                {},\n            );\n        return newPayload;\n    }\n\n    private processCustomParameters(payload: IRequestPayload): IRequestPayload {\n        const {custom, ...rest} = payload;\n        let lowercasedCustom = {};\n        if (custom && isObject(custom)) {\n            lowercasedCustom = this.lowercaseKeys(custom);\n        }\n\n        const newPayload = convertCustomMeasurementProtocolKeys(rest);\n\n        return {\n            ...lowercasedCustom,\n            ...newPayload,\n        };\n    }\n\n    private mapCustomParametersToCustomData(payload: IRequestPayload): IRequestPayload {\n        const {custom, ...rest} = payload;\n        if (custom && isObject(custom)) {\n            const lowercasedCustom = this.lowercaseKeys(custom);\n            return {...rest, customData: {...lowercasedCustom, ...payload.customData}};\n        } else {\n            return payload;\n        }\n    }\n\n    private lowercaseKeys(custom: Record<string, unknown>) {\n        const keys = Object.keys(custom);\n        let result: Record<string, unknown> = {};\n        keys.forEach((key) => {\n            result[key.toLowerCase() as string] = custom[key];\n        });\n        return result;\n    }\n\n    private validateParams(payload: IRequestPayload, eventType: EventType | string): IRequestPayload {\n        const {anonymizeIp, ...rest} = payload;\n        if (anonymizeIp !== undefined) {\n            if (['0', 'false', 'undefined', 'null', '{}', '[]', ''].indexOf(`${anonymizeIp}`.toLowerCase()) == -1) {\n                rest.anonymizeIp = 1;\n            }\n        }\n\n        if (\n            eventType == EventType.view ||\n            eventType == EventType.click ||\n            eventType == EventType.search ||\n            eventType == EventType.custom\n        ) {\n            rest.originLevel3 = this.limit(rest.originLevel3, 1024);\n        }\n        if (eventType == EventType.view) {\n            rest.location = this.limit(rest.location, 1024);\n        }\n        if (eventType == 'pageview' || eventType == 'event') {\n            rest.referrer = this.limit(rest.referrer, 2048);\n            rest.location = this.limit(rest.location, 2048);\n            rest.page = this.limit(rest.page, 2048);\n        }\n        return rest;\n    }\n\n    private ensureAnonymousUserWhenUsingApiKey(payload: IRequestPayload): IRequestPayload {\n        const {userId, ...rest} = payload;\n        if (isApiKey(this.options.token) && !userId) {\n            rest['userId'] = 'anonymous';\n            return rest;\n        } else {\n            return payload;\n        }\n    }\n\n    private setTrackingIdIfTrackingIdNotPresent(payload: IRequestPayload): IRequestPayload {\n        const {trackingId, ...rest} = payload;\n        if (trackingId) {\n            return payload;\n        }\n\n        if (rest.hasOwnProperty('custom') && isObject(rest.custom)) {\n            if (rest.custom.hasOwnProperty('context_website') || rest.custom.hasOwnProperty('siteName')) {\n                rest['trackingId'] = rest.custom.context_website || rest.custom.siteName;\n            }\n        }\n\n        if (rest.hasOwnProperty('customData') && isObject(rest.customData)) {\n            if (rest.customData.hasOwnProperty('context_website') || rest.customData.hasOwnProperty('siteName')) {\n                rest['trackingId'] = rest.customData.context_website || rest.customData.siteName;\n            }\n        }\n\n        return rest;\n    }\n\n    private limit<T>(input: T, length: number): T {\n        return typeof input === 'string' ? (truncateUrl(input, length) as T) : input;\n    }\n\n    private get baseUrl(): string {\n        return buildBaseUrl(this.options.endpoint, this.options.version, this.options.isCustomEndpoint);\n    }\n}\n\nexport default CoveoAnalyticsClient;\n","import {\n    CategoryFacetMetadata,\n    FacetBaseMeta,\n    FacetMetadata,\n    FacetRangeMetadata,\n    FacetSortMeta,\n    InterfaceChangeMetadata,\n    PagerMetadata,\n    QueryErrorMeta,\n    ResultsSortMetadata,\n    StaticFilterToggleValueMetadata,\n} from '../searchPage/searchPageEvents';\n\nexport enum InsightEvents {\n    /**\n     * Identifies the search event that gets logged when the query context is updated as a result of updating one of the case context fields.\n     */\n    contextChanged = 'contextChanged',\n    /**\n     * Identifies the event that gets logged when the user opens the full search page from the insight panel.\n     */\n    expandToFullUI = 'expandToFullUI',\n    /**\n     * Identifies the event that gets logged when the user opens the user actions section.\n     */\n    openUserActions = 'openUserActions',\n    /**\n     * Identifies the event that gets logged when the user clicks to view user action sessions preceding the ticket creation.\n     */\n    showPrecedingSessions = 'showPrecedingSessions',\n    /**\n     * Identifies the event that gets logged when the user clicks to view user action sessions following the ticket creation.\n     */\n    showFollowingSessions = 'showFollowingSessions',\n    /**\n     * Identifies the event that gets logged when the user clicks a viewed document link on the user actions timeline.\n     */\n    clickViewedDocument = 'clickViewedDocument',\n    /**\n     * Identifies the event that gets logged when the user clicks a viewed page link on the user actions timeline.\n     */\n    clickPageView = 'clickPageView',\n    /**\n     * Identifies the event that gets logged when the user clicks the create article button.\n     */\n    createArticle = 'createArticle',\n}\n\nexport interface CaseMetadata {\n    caseId?: string;\n    caseNumber?: string;\n    caseContext?: Record<string, string>;\n}\n\nexport interface ExpandToFullUIMetadata extends CaseMetadata {\n    fullSearchComponentName: string;\n    triggeredBy: string;\n}\n\nexport interface UserActionsDocumentMetadata {\n    title: string;\n    uri: string;\n    uriHash?: string;\n    permanentId?: string;\n}\n\nexport interface UserActionsPageViewMetadata {\n    title: string;\n    contentIdKey: string;\n    contentIdValue: string;\n}\n\nexport interface CreateArticleMetadata {\n    articleType: string;\n}\n\nexport interface InsightInterfaceChangeMetadata extends InterfaceChangeMetadata, CaseMetadata {}\n\nexport interface InsightFacetMetadata extends FacetMetadata, CaseMetadata {}\n\nexport interface InsightStaticFilterToggleValueMetadata extends StaticFilterToggleValueMetadata, CaseMetadata {}\n\nexport interface InsightFacetRangeMetadata extends FacetRangeMetadata, CaseMetadata {}\n\nexport interface InsightCategoryFacetMetadata extends CategoryFacetMetadata, CaseMetadata {}\n\nexport interface InsightFacetSortMeta extends FacetSortMeta, CaseMetadata {}\n\nexport interface InsightFacetBaseMeta extends FacetBaseMeta, CaseMetadata {}\n\nexport interface InsightQueryErrorMeta extends QueryErrorMeta, CaseMetadata {}\n\nexport interface InsightPagerMetadata extends PagerMetadata, CaseMetadata {}\n\nexport interface InsightResultsSortMetadata extends ResultsSortMetadata, CaseMetadata {}\n","import {DocumentInformation, FacetStateRequest} from '../events';\nimport {InsightEvents} from '../insight/insightEvents';\n\nexport enum SearchPageEvents {\n    /**\n     * Identifies the search event that gets logged when the initial query is performed as a result of loading a search interface.\n     */\n    interfaceLoad = 'interfaceLoad',\n    /**\n     * Identifies the search event that gets logged when a new tab is selected in the search interface.\n     */\n    interfaceChange = 'interfaceChange',\n    /**\n     * Identifies the search event that gets logged when `enableAutoCorrection: true` and the query is automatically corrected.\n     */\n    didyoumeanAutomatic = 'didyoumeanAutomatic',\n    /**\n     * Identifies the search event that gets logged when the query suggestion with the corrected term is selected and successfully updates the query.\n     */\n    didyoumeanClick = 'didyoumeanClick',\n    /**\n     * Identifies the search event that gets logged when a sorting method is selected.\n     */\n    resultsSort = 'resultsSort',\n    /**\n     * Identifies the search event that gets logged when a submit button is selected on a search box.\n     */\n    searchboxSubmit = 'searchboxSubmit',\n    /**\n     * Identifies the search event that gets logged when a clear button is selected on a search box.\n     */\n    searchboxClear = 'searchboxClear',\n    /**\n     * The search-as-you-type event that gets logged when a query is automatically generated, and results are displayed while a user is entering text in the search box before they voluntarily submit the query.\n     */\n    searchboxAsYouType = 'searchboxAsYouType',\n    /**\n     * The event that gets logged when a breadcrumb facet is selected and the query is updated.\n     */\n    breadcrumbFacet = 'breadcrumbFacet',\n    /**\n     * Identifies the search event that gets logged when the event to clear the current breadcrumbs is triggered.\n     */\n    breadcrumbResetAll = 'breadcrumbResetAll',\n    /**\n     * Identifies the click event that gets logged when the Quick View element is selected and a Quick View modal of the document is displayed.\n     */\n    documentQuickview = 'documentQuickview',\n    /**\n     * Identifies the click event that gets logged when a user clicks on a search result to open an item.\n     */\n    documentOpen = 'documentOpen',\n    /**\n     * Identifies the search event that gets logged when a user clicks a query suggestion based on the usage analytics recorded queries.\n     */\n    omniboxAnalytics = 'omniboxAnalytics',\n    /**\n     * Identifies the search event that gets logged when a suggested search query is selected from a standalone searchbox.\n     */\n    omniboxFromLink = 'omniboxFromLink',\n    /**\n     * Identifies the search event that gets logged when the search page loads with a query, such as when a user clicks a link pointing to a search results page with a query or enters a query in a standalone search box that points to a search page.\n     */\n    searchFromLink = 'searchFromLink',\n    /**\n     * Identifies the custom event that gets logged when a user action triggers a notification set in the effective query pipeline on the search page.\n     */\n    triggerNotify = 'notify',\n    /**\n     * Identifies the custom event that gets logged when a user action executes a JavaScript function set in the effective query pipeline on the search page.\n     */\n    triggerExecute = 'execute',\n    /**\n     * Identifies the custom event that gets logged when a user action triggers a new query set in the effective query pipeline on the search page.\n     */\n    triggerQuery = 'query',\n    /**\n     * Identifies the custom event that gets logged when a user undoes a query set in the effective query pipeline on the search page.\n     */\n    undoTriggerQuery = 'undoQuery',\n    /**\n     * Identifies the custom event that gets logged when a user action redirects them to a URL set in the effective query pipeline on the search page.\n     */\n    triggerRedirect = 'redirect',\n    /**\n     * Identifies the custom event that gets logged when the Results per page component is selected.\n     */\n    pagerResize = 'pagerResize',\n    /**\n     * Identifies the custom event that gets logged when a page number is selected and more items are loaded.\n     */\n    pagerNumber = 'pagerNumber',\n    /**\n     * Identifies the custom event that gets logged when the Next Page link is selected and more items are loaded.\n     */\n    pagerNext = 'pagerNext',\n    /**\n     * Identifies the custom event that gets logged when the Previous Page link is selected and more items are loaded.\n     */\n    pagerPrevious = 'pagerPrevious',\n    /**\n     * Identifies the custom event that gets logged when the user scrolls to the bottom of the item page and more results are loaded.\n     */\n    pagerScrolling = 'pagerScrolling',\n    /**\n     * Identifies the search event that gets logged when the clearing all selected values of a static filter.\n     */\n    staticFilterClearAll = 'staticFilterClearAll',\n    /**\n     * Identifies the search event that gets logged when a static filter check box is selected and the query is updated.\n     */\n    staticFilterSelect = 'staticFilterSelect',\n    /**\n     * Identifies the search event that gets logged when a static filter check box is deselected and the query is updated.\n     */\n    staticFilterDeselect = 'staticFilterDeselect',\n    /**\n     * Identifies the search event that gets logged when the Clear Facet button is selected.\n     */\n    facetClearAll = 'facetClearAll',\n    /**\n     * Identifies the custom event that gets logged when a query is being typed into the facet search box.\n     */\n    facetSearch = 'facetSearch',\n    /**\n     * Identifies the search event that gets logged when a facet check box is selected and the query is updated.\n     */\n    facetSelect = 'facetSelect',\n    /**\n     * Identifies the search event that gets logged when all filters on a facet are selected.\n     */\n    facetSelectAll = 'facetSelectAll',\n    /**\n     * Identifies the search event that gets logged when a facet check box is deselected and the query is updated.\n     */\n    facetDeselect = 'facetDeselect',\n    /**\n     * Identifies the search event that gets logged when a user clicks a facet value to filter out results containing the facet value.\n     */\n    facetExclude = 'facetExclude',\n    /**\n     * Identifies the search event that gets logged when a user clicks a facet value to not filter out results containing the facet value.\n     */\n    facetUnexclude = 'facetUnexclude',\n    /**\n     * Identifies the search event that gets logged when the sort criteria on a facet is updated.\n     */\n    facetUpdateSort = 'facetUpdateSort',\n    /**\n     * The custom event that gets logged when an end-user expands a facet to see additional values.\n     */\n    facetShowMore = 'showMoreFacetResults',\n    /**\n     * The custom event that gets logged when an end-user collapses a facet to see less values.\n     */\n    facetShowLess = 'showLessFacetResults',\n    /**\n     * Identifies the custom event that gets logged when a user query encounters an error during execution.\n     */\n    queryError = 'query',\n    /**\n     * Identifies the search and custom event that gets logged when a user clicks the Go Back link after an error page.\n     */\n    queryErrorBack = 'errorBack',\n    /**\n     * Identifies the search and custom event that gets logged when a user clears the query box after an error page.\n     */\n    queryErrorClear = 'errorClearQuery',\n    /**\n     * Identifies the search and custom event that gets logged when a user clicks the Retry link after an error page.\n     */\n    queryErrorRetry = 'errorRetry',\n    /**\n     * Identifies the custom event that gets logged when a user performs a query that returns recommendations in the Recommendations panel.\n     */\n    recommendation = 'recommendation',\n    /**\n     * Identifies the search event that gets logged when a user action (that is not a query) reloads the Recommendations panel with new recommendations.\n     */\n    recommendationInterfaceLoad = 'recommendationInterfaceLoad',\n    /**\n     * Identifies the click event that gets logged when a user clicks a recommendation in the Recommendations panel.\n     */\n    recommendationOpen = 'recommendationOpen',\n    /**\n     * Identifies the custom event that gets logged when a user identifies a smart snippet answer as relevant.\n     */\n    likeSmartSnippet = 'likeSmartSnippet',\n    /**\n     * Identifies the custom event that gets logged when a user identifies a smart snippet answer as irrelevant.\n     */\n    dislikeSmartSnippet = 'dislikeSmartSnippet',\n    /**\n     * Identifies the custom event that gets logged when a user expand a smart snippet answer.\n     */\n    expandSmartSnippet = 'expandSmartSnippet',\n    /**\n     * Identifies the custom event that gets logged when a user collapse a smart snippet answer.\n     */\n    collapseSmartSnippet = 'collapseSmartSnippet',\n    /**\n     * Identifies the custom event that gets logged when a user open a smart snippet explanation modal for feedback.\n     */\n    openSmartSnippetFeedbackModal = 'openSmartSnippetFeedbackModal',\n    /**\n     * Identifies the custom event that gets logged when a user close a smart snippet explanation modal for feedback.\n     */\n    closeSmartSnippetFeedbackModal = 'closeSmartSnippetFeedbackModal',\n    /**\n     * Identifies the custom event that gets logged when a user sends an explanation for a smart snippet irrelevant answer.\n     */\n    sendSmartSnippetReason = 'sendSmartSnippetReason',\n    /**\n     * Identifies the custom event that gets logged when a snippet suggestion for a related question is expanded.\n     */\n    expandSmartSnippetSuggestion = 'expandSmartSnippetSuggestion',\n    /**\n     * Identifies the custom event that gets logged when a snippet suggestion for a related question is collapsed.\n     */\n    collapseSmartSnippetSuggestion = 'collapseSmartSnippetSuggestion',\n    /**\n     * Identifies the custom event that gets logged when the user presses \"show more\" on a snippet suggestion for a related question.\n     *\n     * @deprecated\n     */\n    showMoreSmartSnippetSuggestion = 'showMoreSmartSnippetSuggestion',\n    /**\n     * Identifies the custom event that gets logged when the user presses \"show less\" on a snippet suggestion for a related question.\n     *\n     * @deprecated\n     */\n    showLessSmartSnippetSuggestion = 'showLessSmartSnippetSuggestion',\n    /**\n     * Identifies the custom event that gets logged when a user clicks on the source of an answer in a smart snippet.\n     */\n    openSmartSnippetSource = 'openSmartSnippetSource',\n    /**\n     * Identifies the custom event that gets logged when a user clicks on the source of a snippet suggestion for a related question.\n     */\n    openSmartSnippetSuggestionSource = 'openSmartSnippetSuggestionSource',\n    /**\n     * Identifies the custom event that gets logged when a user clicks on a link in the answer of a smart snippet.\n     */\n    openSmartSnippetInlineLink = 'openSmartSnippetInlineLink',\n    /**\n     * Identifies the custom event that gets logged when a user clicks on a link in the snippet suggestion for a related question.\n     */\n    openSmartSnippetSuggestionInlineLink = 'openSmartSnippetSuggestionInlineLink',\n    /**\n     * Identifies the search event that gets logged when a recent queries list item gets clicked.\n     */\n    recentQueryClick = 'recentQueriesClick',\n    /**\n     * Identifies the custom event that gets logged when a recent queries list gets cleared.\n     */\n    clearRecentQueries = 'clearRecentQueries',\n    /**\n     * Identifies the custom event that gets logged when a recently clicked results list item gets clicked.\n     */\n    recentResultClick = 'recentResultClick',\n    /**\n     * Identifies the custom event that gets logged when a recently clicked results list gets cleared.\n     */\n    clearRecentResults = 'clearRecentResults',\n    /**\n     * Identifies the search event that gets logged when a user clicks the Cancel last action link when no results are returned following their last action.\n     */\n    noResultsBack = 'noResultsBack',\n    /**\n     * Identifies the click event that gets logged when a user clicks the Show More link under a search result that support the folding component.\n     */\n    showMoreFoldedResults = 'showMoreFoldedResults',\n    /**\n     * Identifies the custom event that gets logged when a user clicks the Show Less link under a search result that support the folding component.\n     */\n    showLessFoldedResults = 'showLessFoldedResults',\n    /**\n     * Identifies the click event that gets logged when a user clicks the Copy To Clipboard result action.\n     */\n    copyToClipboard = 'copyToClipboard',\n    /**\n     * Identifies the click event that gets logged when a user clicks the Send As Email result action.\n     */\n    caseSendEmail = 'Case.SendEmail',\n    /**\n     * Identifies the click event that gets logged when a user clicks the Post To Feed result action.\n     */\n    feedItemTextPost = 'FeedItem.TextPost',\n    /**\n     * Identifies the click event that gets logged when a user clicks the Attach To Case result action.\n     */\n    caseAttach = 'caseAttach',\n    /**\n     * Identifies the custom event that gets logged when a user clicks the Detach From Case result action.\n     */\n    caseDetach = 'caseDetach',\n    /**\n     * Identifies the cause of a search request being retried in order to regenerate an answer stream that failed.\n     */\n    retryGeneratedAnswer = 'retryGeneratedAnswer',\n    /**\n     * Identifies the custom event that gets logged when a user identifies a generated answer as relevant.\n     */\n    likeGeneratedAnswer = 'likeGeneratedAnswer',\n    /**\n     * Identifies the custom event that gets logged when a user identifies a generated answer as irrelevant.\n     */\n    dislikeGeneratedAnswer = 'dislikeGeneratedAnswer',\n    /**\n     * Identifies the custom event that gets logged when a user opens a generated answer citation.\n     */\n    openGeneratedAnswerSource = 'openGeneratedAnswerSource',\n    /**\n     * Identified the custom event that gets logged when a generated answer stream is completed.\n     */\n    generatedAnswerStreamEnd = 'generatedAnswerStreamEnd',\n    /**\n     * Identifies the custom event that gets logged when a user hovers over a generated answer citation.\n     */\n    generatedAnswerSourceHover = 'generatedAnswerSourceHover',\n    /**\n     * Identifies the custom event that gets logged when a user clicks the copy to clip board button of a generated answer.\n     */\n    generatedAnswerCopyToClipboard = 'generatedAnswerCopyToClipboard',\n    /**\n     * Identifies the custom event that gets logged when a user deactivates the genQA feature.\n     */\n    generatedAnswerHideAnswers = 'generatedAnswerHideAnswers',\n    /**\n     * Identifies the custom event that gets logged when a user activates the genQA feature.\n     */\n    generatedAnswerShowAnswers = 'generatedAnswerShowAnswers',\n    /**\n     * Identifies the custom event that gets logged when a user expand a generated answer.\n     */\n    generatedAnswerExpand = 'generatedAnswerExpand',\n    /**\n     * Identifies the custom event that gets logged when a user collapse a generated answer.\n     */\n    generatedAnswerCollapse = 'generatedAnswerCollapse',\n    /**\n     * Identifies the custom event that gets logged when a user submits a feedback of a generated answer.\n     */\n    generatedAnswerFeedbackSubmit = 'generatedAnswerFeedbackSubmit',\n    /**\n     * Identifies the search event that gets logged when a user clicks the rephrase button in a generated answer.\n     */\n    rephraseGeneratedAnswer = 'rephraseGeneratedAnswer',\n    /**\n     * Identifies the new version of custom event that gets logged when a user submits a feedback of a generated answer.\n     */\n    generatedAnswerFeedbackSubmitV2 = 'generatedAnswerFeedbackSubmitV2',\n    /**\n     * Identifies the click event that gets logged when the user clicks on a generated answer citation.\n     */\n    generatedAnswerCitationClick = 'generatedAnswerCitationClick',\n    /**\n     * Identifies the click event that gets logged when a user clicks the Attach Citation action.\n     */\n    generatedAnswerCitationDocumentAttach = 'generatedAnswerCitationDocumentAttach',\n}\n\nexport const CustomEventsTypes: Partial<Record<SearchPageEvents | InsightEvents, string>> = {\n    [SearchPageEvents.triggerNotify]: 'queryPipelineTriggers',\n    [SearchPageEvents.triggerExecute]: 'queryPipelineTriggers',\n    [SearchPageEvents.triggerQuery]: 'queryPipelineTriggers',\n    [SearchPageEvents.triggerRedirect]: 'queryPipelineTriggers',\n    // This value is the same as SearchPageEvents.triggerQuery, which is very likely a mistake.\n    //[SearchPageEvents.queryError]: 'errors',\n    [SearchPageEvents.queryErrorBack]: 'errors',\n    [SearchPageEvents.queryErrorClear]: 'errors',\n    [SearchPageEvents.queryErrorRetry]: 'errors',\n    [SearchPageEvents.pagerNext]: 'getMoreResults',\n    [SearchPageEvents.pagerPrevious]: 'getMoreResults',\n    [SearchPageEvents.pagerNumber]: 'getMoreResults',\n    [SearchPageEvents.pagerResize]: 'getMoreResults',\n    [SearchPageEvents.pagerScrolling]: 'getMoreResults',\n    [SearchPageEvents.facetSearch]: 'facet',\n    [SearchPageEvents.facetShowLess]: 'facet',\n    [SearchPageEvents.facetShowMore]: 'facet',\n    [SearchPageEvents.recommendation]: 'recommendation',\n    [SearchPageEvents.likeSmartSnippet]: 'smartSnippet',\n    [SearchPageEvents.dislikeSmartSnippet]: 'smartSnippet',\n    [SearchPageEvents.expandSmartSnippet]: 'smartSnippet',\n    [SearchPageEvents.collapseSmartSnippet]: 'smartSnippet',\n    [SearchPageEvents.openSmartSnippetFeedbackModal]: 'smartSnippet',\n    [SearchPageEvents.closeSmartSnippetFeedbackModal]: 'smartSnippet',\n    [SearchPageEvents.sendSmartSnippetReason]: 'smartSnippet',\n    [SearchPageEvents.expandSmartSnippetSuggestion]: 'smartSnippetSuggestions',\n    [SearchPageEvents.collapseSmartSnippetSuggestion]: 'smartSnippetSuggestions',\n    [SearchPageEvents.showMoreSmartSnippetSuggestion]: 'smartSnippetSuggestions',\n    [SearchPageEvents.showLessSmartSnippetSuggestion]: 'smartSnippetSuggestions',\n    [SearchPageEvents.clearRecentQueries]: 'recentQueries',\n    [SearchPageEvents.recentResultClick]: 'recentlyClickedDocuments',\n    [SearchPageEvents.clearRecentResults]: 'recentlyClickedDocuments',\n    [SearchPageEvents.showLessFoldedResults]: 'folding',\n    [SearchPageEvents.caseDetach]: 'case',\n    [SearchPageEvents.likeGeneratedAnswer]: 'generatedAnswer',\n    [SearchPageEvents.dislikeGeneratedAnswer]: 'generatedAnswer',\n    [SearchPageEvents.openGeneratedAnswerSource]: 'generatedAnswer',\n    [SearchPageEvents.generatedAnswerStreamEnd]: 'generatedAnswer',\n    [SearchPageEvents.generatedAnswerSourceHover]: 'generatedAnswer',\n    [SearchPageEvents.generatedAnswerCopyToClipboard]: 'generatedAnswer',\n    [SearchPageEvents.generatedAnswerHideAnswers]: 'generatedAnswer',\n    [SearchPageEvents.generatedAnswerShowAnswers]: 'generatedAnswer',\n    [SearchPageEvents.generatedAnswerExpand]: 'generatedAnswer',\n    [SearchPageEvents.generatedAnswerCollapse]: 'generatedAnswer',\n    [SearchPageEvents.generatedAnswerFeedbackSubmit]: 'generatedAnswer',\n    [SearchPageEvents.generatedAnswerFeedbackSubmitV2]: 'generatedAnswer',\n    [InsightEvents.expandToFullUI]: 'interface',\n    [InsightEvents.openUserActions]: 'User Actions',\n    [InsightEvents.showPrecedingSessions]: 'User Actions',\n    [InsightEvents.showFollowingSessions]: 'User Actions',\n    [InsightEvents.clickViewedDocument]: 'User Actions',\n    [InsightEvents.clickPageView]: 'User Actions',\n    [InsightEvents.createArticle]: 'createArticle',\n};\n\nexport interface StaticFilterMetadata {\n    staticFilterId: string;\n}\n\nexport interface StaticFilterToggleValueMetadata extends StaticFilterMetadata {\n    staticFilterValue: StaticFilterValueMetadata;\n}\n\ninterface StaticFilterValueMetadata {\n    caption: string;\n    expression: string;\n}\n\nexport interface FacetMetadata {\n    facetId: string;\n    facetField: string;\n    facetValue: string;\n    facetTitle: string;\n}\n\nexport type FacetStateMetadata = FacetStateRequest;\nexport interface FacetRangeMetadata extends Omit<FacetMetadata, 'facetValue'> {\n    facetRangeStart: string;\n    facetRangeEnd: string;\n    facetRangeEndInclusive: boolean;\n}\n\nexport interface CategoryFacetMetadata {\n    categoryFacetId: string;\n    categoryFacetField: string;\n    categoryFacetPath: string[];\n    categoryFacetTitle: string;\n}\n\nexport interface OmniboxSuggestionsMetadata {\n    suggestionRanking: number;\n    partialQueries: string | string[];\n    suggestions: string | string[];\n    partialQuery: string;\n    querySuggestResponseId: string;\n}\n\nexport interface DocumentIdentifier {\n    contentIDKey: string;\n    contentIDValue: string;\n}\n\nexport interface InterfaceChangeMetadata {\n    interfaceChangeTo: string;\n}\n\nexport interface ResultsSortMetadata {\n    resultsSortBy: string;\n}\n\nexport interface TriggerNotifyMetadata {\n    notifications: string[];\n}\n\nexport interface TriggerExecution {\n    functionName: string;\n    params: (string | number | boolean)[];\n}\n\nexport interface TriggerExecuteMetadata {\n    executions: TriggerExecution[];\n}\n\nexport interface UndoTriggerRedirectMetadata {\n    undoneQuery: string;\n}\n\nexport interface TriggerRedirectMetadata {\n    redirectedTo: string;\n}\n\nexport interface PagerResizeMetadata {\n    currentResultsPerPage: number;\n}\n\nexport interface PagerMetadata {\n    pagerNumber: number;\n}\n\nexport interface FacetBaseMeta {\n    facetId: string;\n    facetField: string;\n    facetTitle: string;\n}\n\nexport interface FacetMetadata extends FacetBaseMeta {\n    facetValue: string;\n}\n\nexport interface FacetRangeMetadata extends FacetBaseMeta {\n    facetRangeStart: string;\n    facetRangeEnd: string;\n}\n\nexport interface FacetSortMeta extends FacetBaseMeta {\n    criteria: string;\n}\n\nexport interface QueryErrorMeta {\n    query: string;\n    aq: string;\n    cq: string;\n    dq: string;\n    errorType: string;\n    errorMessage: string;\n}\n\nexport type SmartSnippetFeedbackReason = 'does_not_answer' | 'partially_answers' | 'was_not_a_question' | 'other';\n\nexport interface SmartSnippetSuggestionMeta {\n    question: string;\n    answerSnippet: string;\n    documentId: SmartSnippetDocumentIdentifier;\n}\n\nexport interface SmartSnippetLinkMeta {\n    linkText: string;\n    linkURL: string;\n}\n\nexport interface SmartSnippetDocumentIdentifier {\n    contentIdKey: string;\n    contentIdValue: string;\n}\n\nexport type PartialDocumentInformation = Omit<DocumentInformation, 'actionCause' | 'searchQueryUid'>;\n\ninterface AnswerGeneratedWithAnswerAPI {\n    answerAPIStreamId: string;\n    generativeQuestionAnsweringId?: never;\n}\n\ninterface AnswerGeneratedWithSearchAPI {\n    answerAPIStreamId?: never;\n    generativeQuestionAnsweringId: string;\n}\n\nexport type GeneratedAnswerBaseMeta = AnswerGeneratedWithAnswerAPI | AnswerGeneratedWithSearchAPI;\n\nexport type GeneratedAnswerStreamEndMeta = GeneratedAnswerBaseMeta & {\n    answerGenerated: boolean;\n    answerTextIsEmpty?: boolean;\n};\n\nexport type GeneratedAnswerCitationMeta = GeneratedAnswerBaseMeta & {\n    permanentId: string;\n    citationId: string;\n};\n\nexport type GeneratedAnswerCitationClickMeta = GeneratedAnswerBaseMeta & {\n    citationId: string;\n    documentId: GeneratedAnswerDocumentIdentifier;\n};\n\ntype GeneratedAnswerDocumentIdentifier = {\n    contentIdKey: string;\n    contentIdValue: string;\n};\n\nexport type GeneratedAnswerFeedbackReason = 'irrelevant' | 'notAccurate' | 'outOfDate' | 'harmful' | 'other';\n\nexport type GeneratedAnswerRephraseFormat = 'step' | 'bullet' | 'concise' | 'default';\n\nexport type GeneratedAnswerSourceHoverMeta = GeneratedAnswerCitationMeta & {\n    citationHoverTimeMs: number;\n};\n\nexport type GeneratedAnswerRephraseMeta = GeneratedAnswerBaseMeta & {\n    rephraseFormat: GeneratedAnswerRephraseFormat;\n};\n\nexport type GeneratedAnswerFeedbackMeta = GeneratedAnswerBaseMeta & {\n    reason: GeneratedAnswerFeedbackReason;\n    details?: string;\n};\n\nexport type GeneratedAnswerFeedbackReasonOption = 'yes' | 'unknown' | 'no';\n\nexport type GeneratedAnswerFeedbackMetaV2 = GeneratedAnswerBaseMeta & {\n    helpful: boolean;\n    readable: GeneratedAnswerFeedbackReasonOption;\n    documented: GeneratedAnswerFeedbackReasonOption;\n    correctTopic: GeneratedAnswerFeedbackReasonOption;\n    hallucinationFree: GeneratedAnswerFeedbackReasonOption;\n    details?: string;\n    documentUrl?: string;\n};\n","export const ReactNativeRuntimeWarning = `\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please use the \"coveo.analytics/react-native\" subpackage.\n        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native\n    `;\n\nexport function isReactNative() {\n    return typeof navigator != 'undefined' && navigator.product == 'ReactNative';\n}\n","const API_KEY_PREFIX = 'xx';\n\nexport const isApiKey = (token?: string) => token?.startsWith(API_KEY_PREFIX) || false;\n","import {EventType} from '../events';\nimport {v4 as uuidv4} from 'uuid';\nimport {\n    convertProductToMeasurementProtocol,\n    convertImpressionListToMeasurementProtocol,\n} from '../client/measurementProtocolMapping/commerceMeasurementProtocolMapper';\nimport {BasePlugin, BasePluginEventTypes, PluginClass, PluginOptions} from './BasePlugin';\nimport {coerceToNumber} from '../client/utils';\n\nexport const ECPluginEventTypes = {\n    ...BasePluginEventTypes,\n};\n\nconst allECEventTypes = Object.keys(ECPluginEventTypes).map(\n    (key) => ECPluginEventTypes[key as keyof typeof ECPluginEventTypes],\n);\n\n// From https://stackoverflow.com/a/49725198/497731\ntype RequireAtLeastOne<T, Keys extends keyof T = keyof T> = Pick<T, Exclude<keyof T, Keys>> &\n    {\n        [K in Keys]-?: Required<Pick<T, K>> & Partial<Pick<T, Exclude<Keys, K>>>;\n    }[Keys];\n\nexport type CustomValues = {\n    [key: string]: string | number | boolean;\n};\n\nexport interface CoveoExtensionProperties {\n    group?: string;\n}\n\nexport interface ProductProperties extends CoveoExtensionProperties {\n    id?: string;\n    name?: string;\n    brand?: string;\n    category?: string;\n    variant?: string;\n    price?: number;\n    quantity?: number;\n    coupon?: string;\n    position?: number;\n    custom?: CustomValues;\n}\n\nexport type Product = RequireAtLeastOne<ProductProperties, 'id' | 'name'>;\n\nexport interface ImpressionProperties extends CoveoExtensionProperties {\n    id?: string;\n    name?: string;\n    list?: string;\n    brand?: string;\n    category?: string;\n    variant?: string;\n    position?: number;\n    price?: number;\n    custom?: CustomValues;\n}\n\nexport type Impression = RequireAtLeastOne<ImpressionProperties, 'id' | 'name'>;\nexport type BaseImpression = Omit<Impression, 'list'>;\nexport interface ImpressionList {\n    listName?: string;\n    impressions: BaseImpression[];\n}\n\nexport class ECPlugin extends BasePlugin {\n    public static readonly Id = 'ec';\n    private products: Product[] = [];\n    private impressions: Impression[] = [];\n\n    constructor({client, uuidGenerator = uuidv4}: PluginOptions) {\n        super({client, uuidGenerator});\n    }\n\n    public getApi(name: string): Function | null {\n        const superCall: Function | null = super.getApi(name);\n        if (superCall !== null) return superCall;\n        switch (name) {\n            case 'addProduct':\n                return this.addProduct;\n            case 'addImpression':\n                return this.addImpression;\n            default:\n                return null;\n        }\n    }\n\n    protected addHooks(): void {\n        this.addHooksForPageView();\n        this.addHooksForEvent();\n        this.addHooksForECEvents();\n    }\n\n    addProduct(product: Product) {\n        this.products.push(product);\n    }\n\n    addImpression(impression: Impression) {\n        this.impressions.push(impression);\n    }\n\n    protected clearPluginData() {\n        this.products = [];\n        this.impressions = [];\n    }\n\n    private addHooksForECEvents() {\n        this.client.registerBeforeSendEventHook((eventType, ...[payload]) => {\n            return allECEventTypes.indexOf(eventType) !== -1 ? this.addECDataToPayload(eventType, payload) : payload;\n        });\n        this.client.registerAfterSendEventHook((eventType, ...[payload]) => {\n            if (allECEventTypes.indexOf(eventType) !== -1) {\n                this.updateLocationInformation(eventType, payload);\n            }\n            return payload;\n        });\n    }\n\n    private addHooksForPageView() {\n        this.client.addEventTypeMapping(ECPluginEventTypes.pageview, {\n            newEventType: EventType.collect,\n            variableLengthArgumentsNames: ['page'],\n            addVisitorIdParameter: true,\n            usesMeasurementProtocol: true,\n        });\n    }\n\n    private addHooksForEvent() {\n        this.client.addEventTypeMapping(ECPluginEventTypes.event, {\n            newEventType: EventType.collect,\n            variableLengthArgumentsNames: ['eventCategory', 'eventAction', 'eventLabel', 'eventValue'],\n            addVisitorIdParameter: true,\n            usesMeasurementProtocol: true,\n        });\n    }\n\n    private addECDataToPayload(eventType: string, payload: any) {\n        const ecPayload = {\n            ...this.getLocationInformation(eventType, payload),\n            ...this.getDefaultContextInformation(eventType),\n            ...(this.action ? {action: this.action} : {}),\n            ...(this.actionData || {}),\n        };\n\n        const productPayload = this.getProductPayload();\n        const impressionPayload = this.getImpressionPayload();\n\n        this.clearData();\n\n        return {\n            ...impressionPayload,\n            ...productPayload,\n            ...ecPayload,\n            ...payload,\n        };\n    }\n\n    private getProductPayload() {\n        return this.products\n            .map((product) => this.assureProductValidity(product))\n            .reduce((newPayload, product, index) => {\n                return {\n                    ...newPayload,\n                    ...convertProductToMeasurementProtocol(this.convertNumberTypes(product), index),\n                };\n            }, {});\n    }\n\n    private convertNumberTypes(product: Product): Product {\n        let updatedProduct: Product = {...product};\n        if ('quantity' in updatedProduct) {\n            updatedProduct.quantity = coerceToNumber(updatedProduct.quantity);\n        }\n        if ('position' in updatedProduct) {\n            updatedProduct.position = coerceToNumber(updatedProduct.position);\n        }\n        return updatedProduct;\n    }\n\n    private getImpressionPayload() {\n        const impressionsByList = this.getImpressionsByList();\n        return impressionsByList\n            .map(\n                ({impressions, ...rest}) =>\n                    ({\n                        ...rest,\n                        impressions: impressions.map((baseImpression) =>\n                            this.assureBaseImpressionValidity(baseImpression),\n                        ),\n                    }) as ImpressionList,\n            )\n            .reduce((newPayload, impressionList, index) => {\n                return {\n                    ...newPayload,\n                    ...convertImpressionListToMeasurementProtocol(impressionList, index, 'pi'),\n                };\n            }, {});\n    }\n\n    private assureProductValidity(product: Product) {\n        const {position, ...productRest} = product;\n        if (position !== undefined && position < 1) {\n            console.warn(\n                `The position for product '${product.name || product.id}' must be greater ` + `than 0 when provided.`,\n            );\n\n            return productRest;\n        }\n\n        return product;\n    }\n\n    private assureBaseImpressionValidity(baseImpression: BaseImpression) {\n        const {position, ...baseImpressionRest} = baseImpression;\n        if (position !== undefined && position < 1) {\n            console.warn(\n                `The position for impression '${baseImpression.name || baseImpression.id}'` +\n                    ` must be greater than 0 when provided.`,\n            );\n\n            return baseImpressionRest;\n        }\n\n        return baseImpression;\n    }\n\n    private getImpressionsByList() {\n        return this.impressions.reduce((lists, impression) => {\n            const {list: listName, ...baseImpression} = impression;\n            const list = lists.find((list) => list.listName === listName);\n            if (list) {\n                list.impressions.push(baseImpression);\n            } else {\n                lists.push({listName: listName, impressions: [baseImpression]});\n            }\n            return lists;\n        }, [] as ImpressionList[]);\n    }\n}\n\nexport const EC: PluginClass = ECPlugin;\n","import {EventType} from '../events';\nimport {v4 as uuidv4} from 'uuid';\nimport {convertTicketToMeasurementProtocol} from '../client/measurementProtocolMapping/serviceMeasurementProtocolMapper';\nimport {BasePlugin, BasePluginEventTypes, PluginClass, PluginOptions} from './BasePlugin';\n\nexport const SVCPluginEventTypes = {\n    ...BasePluginEventTypes,\n};\n\nconst allSVCEventTypes = Object.keys(SVCPluginEventTypes).map(\n    (key) => SVCPluginEventTypes[key as keyof typeof SVCPluginEventTypes],\n);\n\nexport type CustomValues = {\n    [key: string]: string | number | boolean;\n};\n\nexport interface TicketProperties {\n    id?: string;\n    subject?: string;\n    description?: string;\n    category?: string;\n    productId?: string;\n    custom?: CustomValues;\n}\n\nexport type Ticket = TicketProperties;\n\nexport class SVCPlugin extends BasePlugin {\n    public static readonly Id = 'svc';\n    private ticket: Ticket = {};\n\n    constructor({client, uuidGenerator = uuidv4}: PluginOptions) {\n        super({client, uuidGenerator});\n    }\n\n    public getApi(name: string): Function | null {\n        const superCall: Function | null = super.getApi(name);\n        if (superCall !== null) return superCall;\n        switch (name) {\n            case 'setTicket':\n                return this.setTicket;\n            default:\n                return null;\n        }\n    }\n\n    protected addHooks(): void {\n        this.addHooksForEvent();\n        this.addHooksForPageView();\n        this.addHooksForSVCEvents();\n    }\n\n    setTicket(ticket: Ticket) {\n        this.ticket = ticket;\n    }\n\n    protected clearPluginData() {\n        this.ticket = {};\n    }\n\n    private addHooksForSVCEvents() {\n        this.client.registerBeforeSendEventHook((eventType, ...[payload]) => {\n            return allSVCEventTypes.indexOf(eventType) !== -1 ? this.addSVCDataToPayload(eventType, payload) : payload;\n        });\n        this.client.registerAfterSendEventHook((eventType, ...[payload]) => {\n            if (allSVCEventTypes.indexOf(eventType) !== -1) {\n                this.updateLocationInformation(eventType, payload);\n            }\n            return payload;\n        });\n    }\n\n    private addHooksForPageView() {\n        this.client.addEventTypeMapping(SVCPluginEventTypes.pageview, {\n            newEventType: EventType.collect,\n            variableLengthArgumentsNames: ['page'],\n            addVisitorIdParameter: true,\n            usesMeasurementProtocol: true,\n        });\n    }\n\n    private addHooksForEvent() {\n        this.client.addEventTypeMapping(SVCPluginEventTypes.event, {\n            newEventType: EventType.collect,\n            variableLengthArgumentsNames: ['eventCategory', 'eventAction', 'eventLabel', 'eventValue'],\n            addVisitorIdParameter: true,\n            usesMeasurementProtocol: true,\n        });\n    }\n\n    private addSVCDataToPayload(eventType: string, payload: any) {\n        const svcPayload = {\n            ...this.getLocationInformation(eventType, payload),\n            ...this.getDefaultContextInformation(eventType),\n            ...(this.action ? {svcAction: this.action} : {}),\n            ...(Object.keys(this.actionData ?? {}).length > 0 ? {svcActionData: this.actionData} : {}),\n        };\n\n        const ticketPayload = this.getTicketPayload();\n        this.clearData();\n\n        return {\n            ...ticketPayload,\n            ...svcPayload,\n            ...payload,\n        };\n    }\n\n    private getTicketPayload() {\n        return convertTicketToMeasurementProtocol(this.ticket);\n    }\n}\n\nexport const SVC: PluginClass = SVCPlugin;\n","import {PluginClass, PluginOptions, BasePlugin, Plugin} from '../plugins/BasePlugin';\nimport {EC} from '../plugins/ec';\nimport {Link} from '../plugins/link';\nimport {SVC} from '../plugins/svc';\n\nexport class Plugins {\n    public static readonly DefaultPlugins: string[] = [EC.Id, SVC.Id, Link.Id];\n    private registeredPluginsMap: Record<string, PluginClass> = {\n        [EC.Id]: EC,\n        [SVC.Id]: SVC,\n        [Link.Id]: Link,\n    };\n    private requiredPlugins: Record<string, BasePlugin> = {};\n\n    require(name: string, options: PluginOptions): void {\n        const pluginClass = this.registeredPluginsMap[name];\n        if (!pluginClass) {\n            throw new Error(\n                `No plugin named \"${name}\" is currently registered. If you use a custom plugin, use 'provide' first.`,\n            );\n        }\n        this.requiredPlugins[name] = new (pluginClass as any)(options);\n    }\n\n    provide(name: string, plugin: PluginClass) {\n        this.registeredPluginsMap[name] = plugin;\n    }\n\n    clearRequired(): void {\n        this.requiredPlugins = {};\n    }\n\n    execute(name: string, fn: string, ...args: any[]): any {\n        const plugin = this.requiredPlugins[name] as Plugin;\n        if (!plugin) {\n            throw new Error(`The plugin \"${name}\" is not required. Check that you required it on initialization.`);\n        }\n        const actionFunction = plugin.getApi(fn);\n        if (!actionFunction) {\n            throw new Error(`The function \"${fn}\" does not exist on the plugin \"${name}\".`);\n        }\n        if (typeof actionFunction !== 'function') {\n            throw new Error(`\"${fn}\" of the plugin \"${name}\" is not a function.`);\n        }\n        return actionFunction.apply(plugin, args);\n    }\n}\n","import {AnyEventResponse, EventType, SendEventArguments, VariableArgumentsPayload} from '../events';\nimport {AnalyticsClient, CoveoAnalyticsClient, Endpoints} from '../client/analytics';\nimport {Plugins} from './plugins';\nimport {PluginOptions} from '../plugins/BasePlugin';\nimport {PluginClass} from '../plugins/BasePlugin';\nimport {libVersion} from '../version';\n\nexport type AvailableActions = keyof CoveoUA;\n\nexport interface CoveoUAOptions {\n    endpoint?: string;\n    isCustomEndpoint?: boolean;\n    plugins?: string[];\n}\n\n// CoveoUA mimics the GoogleAnalytics API.\nexport class CoveoUA {\n    public client?: AnalyticsClient;\n    private plugins: Plugins = new Plugins();\n    private params: {[name: string]: string} = {};\n\n    // init initializes a new SimpleAPI client.\n    // @param token is your coveo access_token / api_key / ...\n    // @param endpoint is the endpoint you want to target defaults to the\n    //        usage analytics production endpoint\n    init(token: string | AnalyticsClient, optionsOrEndpoint: string | CoveoUAOptions): void {\n        if (!token) {\n            throw new Error(`You must pass your token when you call 'init'`);\n        }\n\n        if (typeof token === 'string') {\n            this.client = new CoveoAnalyticsClient({\n                token: token,\n                endpoint: this.getEndpoint(optionsOrEndpoint),\n                isCustomEndpoint: this.getIsCustomEndpoint(optionsOrEndpoint),\n            });\n        } else if (this.isAnalyticsClient(token)) {\n            this.client = token;\n        }\n\n        if (this.client) {\n            const pluginOptions: PluginOptions = {client: this.client};\n            this.plugins.clearRequired();\n            this.getPluginKeys(optionsOrEndpoint).forEach((pluginKey) =>\n                this.plugins.require(pluginKey, pluginOptions),\n            );\n            this.client.registerBeforeSendEventHook((eventType, payload) => ({\n                ...payload,\n                ...this.params,\n            }));\n        } else {\n            throw new Error(`You must pass either your token or a valid object when you call 'init'`);\n        }\n    }\n\n    private isAnalyticsClient(token: AnalyticsClient): token is AnalyticsClient {\n        return typeof token === 'object' && typeof token.sendEvent !== 'undefined';\n    }\n\n    private getPluginKeys(optionsOrEndpoint: string | CoveoUAOptions): string[] {\n        if (typeof optionsOrEndpoint === 'string') {\n            return Plugins.DefaultPlugins;\n        }\n        return Array.isArray(optionsOrEndpoint?.plugins) ? optionsOrEndpoint.plugins : Plugins.DefaultPlugins;\n    }\n\n    private getEndpoint(optionsOrEndpoint: string | CoveoUAOptions) {\n        if (typeof optionsOrEndpoint === 'string') {\n            return optionsOrEndpoint || Endpoints.default;\n        } else if (optionsOrEndpoint?.endpoint) {\n            return optionsOrEndpoint.endpoint;\n        }\n        return Endpoints.default;\n    }\n\n    private getIsCustomEndpoint(optionsOrEndpoint: string | CoveoUAOptions) {\n        if (typeof optionsOrEndpoint === 'string') {\n            return false;\n        } else if (optionsOrEndpoint?.isCustomEndpoint) {\n            return optionsOrEndpoint.isCustomEndpoint;\n        }\n        return false;\n    }\n\n    // init initializes a new client intended to be used with a proxy that injects the access token.\n    // @param endpoint is the endpoint of your proxy.\n    initForProxy(endpoint: string, isCustomEndpoint = false): void {\n        if (!endpoint) {\n            throw new Error(`You must pass your endpoint when you call 'initForProxy'`);\n        }\n\n        if (typeof endpoint !== 'string') {\n            throw new Error(`You must pass a string as the endpoint parameter when you call 'initForProxy'`);\n        }\n\n        this.client = new CoveoAnalyticsClient({\n            endpoint: endpoint,\n            isCustomEndpoint: isCustomEndpoint,\n        });\n    }\n\n    set(keyOrObject: string | any, value: string): void {\n        if (typeof keyOrObject === 'string') {\n            this.params[keyOrObject] = value;\n        } else {\n            Object.keys(keyOrObject).map((key) => {\n                this.params[key] = keyOrObject[key];\n            });\n        }\n    }\n\n    send(...[event, ...payload]: SendEventArguments): Promise<AnyEventResponse | void> {\n        if (typeof this.client == 'undefined') {\n            throw new Error(`You must call init before sending an event`);\n        }\n\n        if (!event) {\n            throw new Error(`You must provide an event type when calling \"send\".`);\n        }\n\n        return this.client.sendEvent(event.toLowerCase(), ...(payload as VariableArgumentsPayload));\n    }\n\n    onLoad(callback: Function) {\n        if (typeof callback == 'undefined') {\n            throw new Error(`You must pass a function when you call 'onLoad'`);\n        }\n\n        callback();\n    }\n\n    provide(name: string, plugin: PluginClass) {\n        this.plugins.provide(name, plugin);\n    }\n\n    require(name: string, options: Omit<PluginOptions, 'client'>) {\n        if (!this.client) {\n            throw new Error(`You must call init before requiring a plugin`);\n        }\n        this.plugins.require(name, {...options, client: this.client});\n    }\n\n    callPlugin(pluginName: string, fn: string, ...args: any): any {\n        if (!this.client) {\n            throw new Error(`You must call init before calling a plugin function`);\n        }\n        return this.plugins.execute(pluginName, fn, ...args);\n    }\n\n    reset() {\n        this.client = undefined;\n        this.plugins = new Plugins();\n        this.params = {};\n    }\n\n    version(): string {\n        return libVersion;\n    }\n}\n\nexport const coveoua = new CoveoUA();\nexport const getCurrentClient = () => coveoua.client;\n\nexport const handleOneAnalyticsEvent = (command: string, ...params: any[]) => {\n    const [, trackerName, pluginName, fn] = /^(?:(\\w+)\\.)?(?:(\\w+):)?(\\w+)$/.exec(command)!;\n\n    const actionFunction = (<any>coveoua)[fn];\n    if (pluginName && fn) {\n        return coveoua.callPlugin(pluginName as string, fn, ...params);\n    } else if (actionFunction) {\n        return actionFunction.apply(coveoua, params);\n    } else {\n        const actions: AvailableActions[] = [\n            'init',\n            'set',\n            'send',\n            'onLoad',\n            'callPlugin',\n            'reset',\n            'require',\n            'provide',\n            'version',\n        ];\n        throw new Error(`The action \"${command}\" does not exist. Available actions: ${actions.join(', ')}.`);\n    }\n};\n\nexport default handleOneAnalyticsEvent;\n","import {AnalyticsClient, PreparedEvent} from './analytics';\nimport {\n    AnyEventResponse,\n    SearchEventResponse,\n    ClickEventResponse,\n    CustomEventResponse,\n    VisitResponse,\n    HealthResponse,\n    ViewEventResponse,\n    EventType,\n    PreparedSearchEventRequest,\n    SearchEventRequest,\n    ClickEventRequest,\n    CustomEventRequest,\n    PreparedClickEventRequest,\n    PreparedCustomEventRequest,\n    PreparedViewEventRequest,\n    ViewEventRequest,\n} from '../events';\nimport {libVersion} from '../version';\nimport {NoopRuntime} from './runtimeEnvironment';\n\nexport class NoopAnalytics implements AnalyticsClient {\n    getPayload(): Promise<any> {\n        return Promise.resolve();\n    }\n    getParameters(): Promise<any> {\n        return Promise.resolve();\n    }\n    makeEvent<TPreparedRequest, TCompleteRequest, TResponse extends AnyEventResponse>(\n        eventType: EventType | string,\n    ): Promise<PreparedEvent<TPreparedRequest, TCompleteRequest, TResponse>> {\n        return Promise.resolve({eventType: eventType as EventType, payload: null, log: () => Promise.resolve()});\n    }\n    sendEvent(): Promise<AnyEventResponse | void> {\n        return Promise.resolve();\n    }\n    makeSearchEvent() {\n        return this.makeEvent<PreparedSearchEventRequest, SearchEventRequest, SearchEventResponse>(EventType.search);\n    }\n    sendSearchEvent(): Promise<SearchEventResponse | void> {\n        return Promise.resolve();\n    }\n    makeClickEvent() {\n        return this.makeEvent<PreparedClickEventRequest, ClickEventRequest, ClickEventResponse>(EventType.click);\n    }\n    sendClickEvent(): Promise<ClickEventResponse | void> {\n        return Promise.resolve();\n    }\n    makeCustomEvent() {\n        return this.makeEvent<PreparedCustomEventRequest, CustomEventRequest, CustomEventResponse>(EventType.custom);\n    }\n    sendCustomEvent(): Promise<CustomEventResponse | void> {\n        return Promise.resolve();\n    }\n    makeViewEvent() {\n        return this.makeEvent<PreparedViewEventRequest, ViewEventRequest, ViewEventResponse>(EventType.view);\n    }\n    sendViewEvent(): Promise<ViewEventResponse | void> {\n        return Promise.resolve();\n    }\n    getVisit(): Promise<VisitResponse> {\n        return Promise.resolve({id: '', visitorId: ''});\n    }\n    getHealth(): Promise<HealthResponse> {\n        return Promise.resolve({status: ''});\n    }\n    registerBeforeSendEventHook(): void {}\n    registerAfterSendEventHook(): void {}\n    addEventTypeMapping(): void {}\n    runtime = new NoopRuntime();\n    public get version(): string {\n        return libVersion;\n    }\n    currentVisitorId = '';\n}\n","function filterConsecutiveRepeatedValues(rawData: string[]) {\n    let prev = '';\n    return rawData.filter((value) => {\n        const isDifferent = value !== prev;\n        prev = value;\n        return isDifferent;\n    });\n}\n\nfunction removeSemicolons(rawData: string[]) {\n    return rawData.map((value) => {\n        return value.replace(/;/g, '');\n    });\n}\n\nfunction getDataString(data: string[]): string {\n    const ANALYTICS_LENGTH_LIMIT = 256;\n\n    const formattedData = data.join(';');\n    if (formattedData.length <= ANALYTICS_LENGTH_LIMIT) {\n        return formattedData;\n    }\n    return getDataString(data.slice(1));\n}\n\nexport const formatArrayForCoveoCustomData = (rawData: string[]): string => {\n    const dataWithoutSemicolons = removeSemicolons(rawData);\n    const dataWithoutRepeatedValues = filterConsecutiveRepeatedValues(dataWithoutSemicolons);\n\n    return getDataString(dataWithoutRepeatedValues);\n};\n","import {OmniboxSuggestionsMetadata} from '../searchPage/searchPageEvents';\nimport {formatArrayForCoveoCustomData} from './format-array-for-coveo-custom-data';\n\nexport function formatOmniboxMetadata(meta: OmniboxSuggestionsMetadata): OmniboxSuggestionsMetadata {\n    const partialQueries =\n        typeof meta.partialQueries === 'string'\n            ? meta.partialQueries\n            : formatArrayForCoveoCustomData(meta.partialQueries);\n    const suggestions =\n        typeof meta.suggestions === 'string' ? meta.suggestions : formatArrayForCoveoCustomData(meta.suggestions);\n\n    return {\n        ...meta,\n        partialQueries,\n        suggestions,\n    };\n}\n","import CoveoAnalyticsClient, {ClientOptions, AnalyticsClient, PreparedEvent} from '../client/analytics';\nimport {\n    SearchEventRequest,\n    CustomEventRequest,\n    SearchEventResponse,\n    AnyEventResponse,\n    ClickEventResponse,\n    CustomEventResponse,\n    PreparedClickEventRequest,\n    PreparedSearchEventRequest,\n} from '../events';\nimport {\n    SearchPageEvents,\n    OmniboxSuggestionsMetadata,\n    FacetMetadata,\n    FacetRangeMetadata,\n    CategoryFacetMetadata,\n    DocumentIdentifier,\n    InterfaceChangeMetadata,\n    ResultsSortMetadata,\n    PartialDocumentInformation,\n    CustomEventsTypes,\n    TriggerNotifyMetadata,\n    TriggerExecuteMetadata,\n    TriggerRedirectMetadata,\n    PagerResizeMetadata,\n    PagerMetadata,\n    FacetBaseMeta,\n    FacetSortMeta,\n    QueryErrorMeta,\n    FacetStateMetadata,\n    SmartSnippetFeedbackReason,\n    SmartSnippetSuggestionMeta,\n    SmartSnippetDocumentIdentifier,\n    StaticFilterMetadata,\n    StaticFilterToggleValueMetadata,\n    UndoTriggerRedirectMetadata,\n    SmartSnippetLinkMeta,\n    GeneratedAnswerFeedbackMeta,\n    GeneratedAnswerCitationMeta,\n    GeneratedAnswerStreamEndMeta,\n    GeneratedAnswerSourceHoverMeta,\n    GeneratedAnswerBaseMeta,\n    GeneratedAnswerRephraseMeta,\n    GeneratedAnswerFeedbackMetaV2,\n    GeneratedAnswerCitationClickMeta,\n} from './searchPageEvents';\nimport {NoopAnalytics} from '../client/noopAnalytics';\nimport {formatOmniboxMetadata} from '../formatting/format-omnibox-metadata';\nimport doNotTrack from '../donottrack';\n\nexport interface SearchPageClientProvider {\n    getBaseMetadata: () => Record<string, any>;\n    getSearchEventRequestPayload: () => Omit<SearchEventRequest, 'actionCause' | 'searchQueryUid'>;\n    getSearchUID: () => string;\n    getPipeline: () => string;\n    getOriginContext?: () => string;\n    getOriginLevel1: () => string;\n    getOriginLevel2: () => string;\n    getOriginLevel3: () => string;\n    getLanguage: () => string;\n    getIsAnonymous: () => boolean;\n    getFacetState?: () => FacetStateMetadata[];\n    getSplitTestRunName?: () => string | undefined;\n    getSplitTestRunVersion?: () => string | undefined;\n    getGeneratedAnswerMetadata?: () => Record<string, any>;\n}\n\nexport interface SearchPageClientOptions extends ClientOptions {\n    enableAnalytics: boolean;\n}\n\nexport type EventDescription = Pick<SearchEventRequest, 'actionCause' | 'customData'>;\n\nexport interface EventBuilder<T extends AnyEventResponse = AnyEventResponse> {\n    description: EventDescription;\n    log(metadata: {searchUID: string}): Promise<T | void>;\n}\n\nexport class CoveoSearchPageClient {\n    public coveoAnalyticsClient: AnalyticsClient;\n\n    constructor(\n        private opts: Partial<SearchPageClientOptions>,\n        private provider: SearchPageClientProvider,\n    ) {\n        const shouldDisableAnalytics = opts.enableAnalytics === false || doNotTrack();\n        this.coveoAnalyticsClient = shouldDisableAnalytics ? new NoopAnalytics() : new CoveoAnalyticsClient(opts);\n    }\n\n    public disable() {\n        this.coveoAnalyticsClient = new NoopAnalytics();\n    }\n\n    public enable() {\n        this.coveoAnalyticsClient = new CoveoAnalyticsClient(this.opts);\n    }\n\n    public makeInterfaceLoad() {\n        return this.makeSearchEvent(SearchPageEvents.interfaceLoad);\n    }\n\n    public async logInterfaceLoad() {\n        return (await this.makeInterfaceLoad()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeRecommendationInterfaceLoad() {\n        return this.makeSearchEvent(SearchPageEvents.recommendationInterfaceLoad);\n    }\n\n    public async logRecommendationInterfaceLoad() {\n        return (await this.makeRecommendationInterfaceLoad()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeRecommendation() {\n        return this.makeCustomEvent(SearchPageEvents.recommendation);\n    }\n\n    public async logRecommendation() {\n        return (await this.makeRecommendation()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeRecommendationOpen(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return this.makeClickEvent(SearchPageEvents.recommendationOpen, info, identifier);\n    }\n\n    public async logRecommendationOpen(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return (await this.makeRecommendationOpen(info, identifier)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeStaticFilterClearAll(meta: StaticFilterMetadata) {\n        return this.makeSearchEvent(SearchPageEvents.staticFilterClearAll, meta);\n    }\n\n    public async logStaticFilterClearAll(meta: StaticFilterMetadata) {\n        return (await this.makeStaticFilterClearAll(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeStaticFilterSelect(meta: StaticFilterToggleValueMetadata) {\n        return this.makeSearchEvent(SearchPageEvents.staticFilterSelect, meta);\n    }\n\n    public async logStaticFilterSelect(meta: StaticFilterToggleValueMetadata) {\n        return (await this.makeStaticFilterSelect(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeStaticFilterDeselect(meta: StaticFilterToggleValueMetadata) {\n        return this.makeSearchEvent(SearchPageEvents.staticFilterDeselect, meta);\n    }\n\n    public async logStaticFilterDeselect(meta: StaticFilterToggleValueMetadata) {\n        return (await this.makeStaticFilterDeselect(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeFetchMoreResults() {\n        return this.makeCustomEvent(SearchPageEvents.pagerScrolling, {type: 'getMoreResults'});\n    }\n\n    public async logFetchMoreResults() {\n        return (await this.makeFetchMoreResults()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeInterfaceChange(metadata: InterfaceChangeMetadata) {\n        return this.makeSearchEvent(SearchPageEvents.interfaceChange, metadata);\n    }\n\n    public async logInterfaceChange(metadata: InterfaceChangeMetadata) {\n        return (await this.makeInterfaceChange(metadata)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeDidYouMeanAutomatic() {\n        return this.makeSearchEvent(SearchPageEvents.didyoumeanAutomatic);\n    }\n\n    public async logDidYouMeanAutomatic() {\n        return (await this.makeDidYouMeanAutomatic()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeDidYouMeanClick() {\n        return this.makeSearchEvent(SearchPageEvents.didyoumeanClick);\n    }\n\n    public async logDidYouMeanClick() {\n        return (await this.makeDidYouMeanClick()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeResultsSort(metadata: ResultsSortMetadata) {\n        return this.makeSearchEvent(SearchPageEvents.resultsSort, metadata);\n    }\n\n    public async logResultsSort(metadata: ResultsSortMetadata) {\n        return (await this.makeResultsSort(metadata)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeSearchboxSubmit() {\n        return this.makeSearchEvent(SearchPageEvents.searchboxSubmit);\n    }\n\n    public async logSearchboxSubmit() {\n        return (await this.makeSearchboxSubmit()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeSearchboxClear() {\n        return this.makeSearchEvent(SearchPageEvents.searchboxClear);\n    }\n\n    public async logSearchboxClear() {\n        return (await this.makeSearchboxClear()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeSearchboxAsYouType() {\n        return this.makeSearchEvent(SearchPageEvents.searchboxAsYouType);\n    }\n\n    public async logSearchboxAsYouType() {\n        return (await this.makeSearchboxAsYouType()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeBreadcrumbFacet(metadata: FacetMetadata | FacetRangeMetadata | CategoryFacetMetadata) {\n        return this.makeSearchEvent(SearchPageEvents.breadcrumbFacet, metadata);\n    }\n\n    public async logBreadcrumbFacet(metadata: FacetMetadata | FacetRangeMetadata | CategoryFacetMetadata) {\n        return (await this.makeBreadcrumbFacet(metadata)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeBreadcrumbResetAll() {\n        return this.makeSearchEvent(SearchPageEvents.breadcrumbResetAll);\n    }\n\n    public async logBreadcrumbResetAll() {\n        return (await this.makeBreadcrumbResetAll()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeDocumentQuickview(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return this.makeClickEvent(SearchPageEvents.documentQuickview, info, identifier);\n    }\n\n    public async logDocumentQuickview(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return (await this.makeDocumentQuickview(info, identifier)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeDocumentOpen(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return this.makeClickEvent(SearchPageEvents.documentOpen, info, identifier);\n    }\n\n    public async logDocumentOpen(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return (await this.makeDocumentOpen(info, identifier)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeOmniboxAnalytics(meta: OmniboxSuggestionsMetadata) {\n        return this.makeSearchEvent(SearchPageEvents.omniboxAnalytics, formatOmniboxMetadata(meta));\n    }\n\n    public async logOmniboxAnalytics(meta: OmniboxSuggestionsMetadata) {\n        return (await this.makeOmniboxAnalytics(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeOmniboxFromLink(meta: OmniboxSuggestionsMetadata) {\n        return this.makeSearchEvent(SearchPageEvents.omniboxFromLink, formatOmniboxMetadata(meta));\n    }\n\n    public async logOmniboxFromLink(meta: OmniboxSuggestionsMetadata) {\n        return (await this.makeOmniboxFromLink(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeSearchFromLink() {\n        return this.makeSearchEvent(SearchPageEvents.searchFromLink);\n    }\n\n    public async logSearchFromLink() {\n        return (await this.makeSearchFromLink()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeTriggerNotify(meta: TriggerNotifyMetadata) {\n        return this.makeCustomEvent(SearchPageEvents.triggerNotify, meta);\n    }\n\n    public async logTriggerNotify(meta: TriggerNotifyMetadata) {\n        return (await this.makeTriggerNotify(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeTriggerExecute(meta: TriggerExecuteMetadata) {\n        return this.makeCustomEvent(SearchPageEvents.triggerExecute, meta);\n    }\n\n    public async logTriggerExecute(meta: TriggerExecuteMetadata) {\n        return (await this.makeTriggerExecute(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeTriggerQuery() {\n        return this.makeCustomEvent(\n            SearchPageEvents.triggerQuery,\n            {query: this.provider.getSearchEventRequestPayload().queryText},\n            'queryPipelineTriggers',\n        );\n    }\n\n    public async logTriggerQuery() {\n        return (await this.makeTriggerQuery()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeUndoTriggerQuery(meta: UndoTriggerRedirectMetadata) {\n        return this.makeSearchEvent(SearchPageEvents.undoTriggerQuery, meta);\n    }\n\n    public async logUndoTriggerQuery(meta: UndoTriggerRedirectMetadata) {\n        return (await this.makeUndoTriggerQuery(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeTriggerRedirect(meta: TriggerRedirectMetadata) {\n        return this.makeCustomEvent(SearchPageEvents.triggerRedirect, {\n            ...meta,\n            query: this.provider.getSearchEventRequestPayload().queryText,\n        });\n    }\n\n    public async logTriggerRedirect(meta: TriggerRedirectMetadata) {\n        return (await this.makeTriggerRedirect(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makePagerResize(meta: PagerResizeMetadata) {\n        return this.makeCustomEvent(SearchPageEvents.pagerResize, meta);\n    }\n\n    public async logPagerResize(meta: PagerResizeMetadata) {\n        return (await this.makePagerResize(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makePagerNumber(meta: PagerMetadata) {\n        return this.makeCustomEvent(SearchPageEvents.pagerNumber, meta);\n    }\n\n    public async logPagerNumber(meta: PagerMetadata) {\n        return (await this.makePagerNumber(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makePagerNext(meta: PagerMetadata) {\n        return this.makeCustomEvent(SearchPageEvents.pagerNext, meta);\n    }\n\n    public async logPagerNext(meta: PagerMetadata) {\n        return (await this.makePagerNext(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makePagerPrevious(meta: PagerMetadata) {\n        return this.makeCustomEvent(SearchPageEvents.pagerPrevious, meta);\n    }\n\n    public async logPagerPrevious(meta: PagerMetadata) {\n        return (await this.makePagerPrevious(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makePagerScrolling() {\n        return this.makeCustomEvent(SearchPageEvents.pagerScrolling);\n    }\n\n    public async logPagerScrolling() {\n        return (await this.makePagerScrolling()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeFacetClearAll(meta: FacetBaseMeta) {\n        return this.makeSearchEvent(SearchPageEvents.facetClearAll, meta);\n    }\n\n    public async logFacetClearAll(meta: FacetBaseMeta) {\n        return (await this.makeFacetClearAll(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeFacetSearch(meta: FacetBaseMeta) {\n        return this.makeSearchEvent(SearchPageEvents.facetSearch, meta);\n    }\n\n    public async logFacetSearch(meta: FacetBaseMeta) {\n        return (await this.makeFacetSearch(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeFacetSelect(meta: FacetMetadata) {\n        return this.makeSearchEvent(SearchPageEvents.facetSelect, meta);\n    }\n\n    public async logFacetSelect(meta: FacetMetadata) {\n        return (await this.makeFacetSelect(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeFacetDeselect(meta: FacetMetadata) {\n        return this.makeSearchEvent(SearchPageEvents.facetDeselect, meta);\n    }\n\n    public async logFacetDeselect(meta: FacetMetadata) {\n        return (await this.makeFacetDeselect(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeFacetExclude(meta: FacetMetadata) {\n        return this.makeSearchEvent(SearchPageEvents.facetExclude, meta);\n    }\n\n    public async logFacetExclude(meta: FacetMetadata) {\n        return (await this.makeFacetExclude(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeFacetUnexclude(meta: FacetMetadata) {\n        return this.makeSearchEvent(SearchPageEvents.facetUnexclude, meta);\n    }\n\n    public async logFacetUnexclude(meta: FacetMetadata) {\n        return (await this.makeFacetUnexclude(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeFacetSelectAll(meta: FacetBaseMeta) {\n        return this.makeSearchEvent(SearchPageEvents.facetSelectAll, meta);\n    }\n\n    public async logFacetSelectAll(meta: FacetBaseMeta) {\n        return (await this.makeFacetSelectAll(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeFacetUpdateSort(meta: FacetSortMeta) {\n        return this.makeSearchEvent(SearchPageEvents.facetUpdateSort, meta);\n    }\n\n    public async logFacetUpdateSort(meta: FacetSortMeta) {\n        return (await this.makeFacetUpdateSort(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeFacetShowMore(meta: FacetBaseMeta) {\n        return this.makeCustomEvent(SearchPageEvents.facetShowMore, meta);\n    }\n\n    public async logFacetShowMore(meta: FacetBaseMeta) {\n        return (await this.makeFacetShowMore(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeFacetShowLess(meta: FacetBaseMeta) {\n        return this.makeCustomEvent(SearchPageEvents.facetShowLess, meta);\n    }\n\n    public async logFacetShowLess(meta: FacetBaseMeta) {\n        return (await this.makeFacetShowLess(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeQueryError(meta: QueryErrorMeta) {\n        return this.makeCustomEvent(SearchPageEvents.queryError, meta);\n    }\n\n    public async logQueryError(meta: QueryErrorMeta) {\n        return (await this.makeQueryError(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public async makeQueryErrorBack(): Promise<EventBuilder<SearchEventResponse>> {\n        const customEventBuilder = await this.makeCustomEvent(SearchPageEvents.queryErrorBack);\n        return {\n            description: customEventBuilder.description,\n            log: async () => {\n                await customEventBuilder.log({searchUID: this.provider.getSearchUID()});\n                return this.logSearchEvent(SearchPageEvents.queryErrorBack);\n            },\n        };\n    }\n\n    public async logQueryErrorBack() {\n        return (await this.makeQueryErrorBack()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public async makeQueryErrorRetry(): Promise<EventBuilder<SearchEventResponse>> {\n        const customEventBuilder = await this.makeCustomEvent(SearchPageEvents.queryErrorRetry);\n        return {\n            description: customEventBuilder.description,\n            log: async () => {\n                await customEventBuilder.log({searchUID: this.provider.getSearchUID()});\n                return this.logSearchEvent(SearchPageEvents.queryErrorRetry);\n            },\n        };\n    }\n\n    public async logQueryErrorRetry() {\n        return (await this.makeQueryErrorRetry()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public async makeQueryErrorClear(): Promise<EventBuilder<SearchEventResponse>> {\n        const customEventBuilder = await this.makeCustomEvent(SearchPageEvents.queryErrorClear);\n        return {\n            description: customEventBuilder.description,\n            log: async () => {\n                await customEventBuilder.log({searchUID: this.provider.getSearchUID()});\n                return this.logSearchEvent(SearchPageEvents.queryErrorClear);\n            },\n        };\n    }\n\n    public async logQueryErrorClear() {\n        return (await this.makeQueryErrorClear()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeLikeSmartSnippet() {\n        return this.makeCustomEvent(SearchPageEvents.likeSmartSnippet);\n    }\n\n    public async logLikeSmartSnippet() {\n        return (await this.makeLikeSmartSnippet()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeDislikeSmartSnippet() {\n        return this.makeCustomEvent(SearchPageEvents.dislikeSmartSnippet);\n    }\n\n    public async logDislikeSmartSnippet() {\n        return (await this.makeDislikeSmartSnippet()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeExpandSmartSnippet() {\n        return this.makeCustomEvent(SearchPageEvents.expandSmartSnippet);\n    }\n\n    public async logExpandSmartSnippet() {\n        return (await this.makeExpandSmartSnippet()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeCollapseSmartSnippet() {\n        return this.makeCustomEvent(SearchPageEvents.collapseSmartSnippet);\n    }\n\n    public async logCollapseSmartSnippet() {\n        return (await this.makeCollapseSmartSnippet()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeOpenSmartSnippetFeedbackModal() {\n        return this.makeCustomEvent(SearchPageEvents.openSmartSnippetFeedbackModal);\n    }\n\n    public async logOpenSmartSnippetFeedbackModal() {\n        return (await this.makeOpenSmartSnippetFeedbackModal()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeCloseSmartSnippetFeedbackModal() {\n        return this.makeCustomEvent(SearchPageEvents.closeSmartSnippetFeedbackModal);\n    }\n\n    public async logCloseSmartSnippetFeedbackModal() {\n        return (await this.makeCloseSmartSnippetFeedbackModal()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeSmartSnippetFeedbackReason(reason: SmartSnippetFeedbackReason, details?: string) {\n        return this.makeCustomEvent(SearchPageEvents.sendSmartSnippetReason, {reason, details});\n    }\n\n    public async logSmartSnippetFeedbackReason(reason: SmartSnippetFeedbackReason, details?: string) {\n        return (await this.makeSmartSnippetFeedbackReason(reason, details)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    public makeExpandSmartSnippetSuggestion(snippet: SmartSnippetSuggestionMeta | SmartSnippetDocumentIdentifier) {\n        return this.makeCustomEvent(\n            SearchPageEvents.expandSmartSnippetSuggestion,\n            'documentId' in snippet ? snippet : {documentId: snippet},\n        );\n    }\n\n    public async logExpandSmartSnippetSuggestion(snippet: SmartSnippetSuggestionMeta | SmartSnippetDocumentIdentifier) {\n        return (await this.makeExpandSmartSnippetSuggestion(snippet)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeCollapseSmartSnippetSuggestion(snippet: SmartSnippetSuggestionMeta | SmartSnippetDocumentIdentifier) {\n        return this.makeCustomEvent(\n            SearchPageEvents.collapseSmartSnippetSuggestion,\n            'documentId' in snippet ? snippet : {documentId: snippet},\n        );\n    }\n\n    public async logCollapseSmartSnippetSuggestion(\n        snippet: SmartSnippetSuggestionMeta | SmartSnippetDocumentIdentifier,\n    ) {\n        return (await this.makeCollapseSmartSnippetSuggestion(snippet)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    /**\n     * @deprecated\n     */\n    private makeShowMoreSmartSnippetSuggestion(snippet: SmartSnippetSuggestionMeta) {\n        return this.makeCustomEvent(SearchPageEvents.showMoreSmartSnippetSuggestion, snippet);\n    }\n\n    /**\n     * @deprecated\n     */\n    public async logShowMoreSmartSnippetSuggestion(snippet: SmartSnippetSuggestionMeta) {\n        return (await this.makeShowMoreSmartSnippetSuggestion(snippet)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    /**\n     * @deprecated\n     */\n    private makeShowLessSmartSnippetSuggestion(snippet: SmartSnippetSuggestionMeta) {\n        return this.makeCustomEvent(SearchPageEvents.showLessSmartSnippetSuggestion, snippet);\n    }\n\n    /**\n     * @deprecated\n     */\n    public async logShowLessSmartSnippetSuggestion(snippet: SmartSnippetSuggestionMeta) {\n        return (await this.makeShowLessSmartSnippetSuggestion(snippet)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeOpenSmartSnippetSource(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return this.makeClickEvent(SearchPageEvents.openSmartSnippetSource, info, identifier);\n    }\n\n    public async logOpenSmartSnippetSource(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return (await this.makeOpenSmartSnippetSource(info, identifier)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeOpenSmartSnippetSuggestionSource(info: PartialDocumentInformation, snippet: SmartSnippetSuggestionMeta) {\n        return this.makeClickEvent(\n            SearchPageEvents.openSmartSnippetSuggestionSource,\n            info,\n            {contentIDKey: snippet.documentId.contentIdKey, contentIDValue: snippet.documentId.contentIdValue},\n            snippet,\n        );\n    }\n\n    public makeCopyToClipboard(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return this.makeClickEvent(SearchPageEvents.copyToClipboard, info, identifier);\n    }\n\n    public async logCopyToClipboard(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return (await this.makeCopyToClipboard(info, identifier)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public async logOpenSmartSnippetSuggestionSource(\n        info: PartialDocumentInformation,\n        snippet: SmartSnippetSuggestionMeta,\n    ) {\n        return (await this.makeOpenSmartSnippetSuggestionSource(info, snippet)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    public makeOpenSmartSnippetInlineLink(\n        info: PartialDocumentInformation,\n        identifierAndLink: DocumentIdentifier & SmartSnippetLinkMeta,\n    ) {\n        return this.makeClickEvent(\n            SearchPageEvents.openSmartSnippetInlineLink,\n            info,\n            {contentIDKey: identifierAndLink.contentIDKey, contentIDValue: identifierAndLink.contentIDValue},\n            identifierAndLink,\n        );\n    }\n\n    public async logOpenSmartSnippetInlineLink(\n        info: PartialDocumentInformation,\n        identifierAndLink: DocumentIdentifier & SmartSnippetLinkMeta,\n    ) {\n        return (await this.makeOpenSmartSnippetInlineLink(info, identifierAndLink)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    public makeOpenSmartSnippetSuggestionInlineLink(\n        info: PartialDocumentInformation,\n        snippetAndLink: SmartSnippetSuggestionMeta & SmartSnippetLinkMeta,\n    ) {\n        return this.makeClickEvent(\n            SearchPageEvents.openSmartSnippetSuggestionInlineLink,\n            info,\n            {\n                contentIDKey: snippetAndLink.documentId.contentIdKey,\n                contentIDValue: snippetAndLink.documentId.contentIdValue,\n            },\n            snippetAndLink,\n        );\n    }\n\n    public async logOpenSmartSnippetSuggestionInlineLink(\n        info: PartialDocumentInformation,\n        snippetAndLink: SmartSnippetSuggestionMeta & SmartSnippetLinkMeta,\n    ) {\n        return (await this.makeOpenSmartSnippetSuggestionInlineLink(info, snippetAndLink)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    public makeRecentQueryClick() {\n        return this.makeSearchEvent(SearchPageEvents.recentQueryClick);\n    }\n\n    public async logRecentQueryClick() {\n        return (await this.makeRecentQueryClick()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeClearRecentQueries() {\n        return this.makeCustomEvent(SearchPageEvents.clearRecentQueries);\n    }\n\n    public async logClearRecentQueries() {\n        return (await this.makeClearRecentQueries()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeRecentResultClick(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return this.makeCustomEvent(SearchPageEvents.recentResultClick, {info, identifier});\n    }\n\n    public async logRecentResultClick(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return (await this.makeRecentResultClick(info, identifier)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeClearRecentResults() {\n        return this.makeCustomEvent(SearchPageEvents.clearRecentResults);\n    }\n\n    public async logClearRecentResults() {\n        return (await this.makeClearRecentResults()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeNoResultsBack() {\n        return this.makeSearchEvent(SearchPageEvents.noResultsBack);\n    }\n\n    public async logNoResultsBack() {\n        return (await this.makeNoResultsBack()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeShowMoreFoldedResults(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return this.makeClickEvent(SearchPageEvents.showMoreFoldedResults, info, identifier);\n    }\n\n    public async logShowMoreFoldedResults(info: PartialDocumentInformation, identifier: DocumentIdentifier) {\n        return (await this.makeShowMoreFoldedResults(info, identifier)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeShowLessFoldedResults() {\n        return this.makeCustomEvent(SearchPageEvents.showLessFoldedResults);\n    }\n\n    public async logShowLessFoldedResults() {\n        return (await this.makeShowLessFoldedResults()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    private makeEventDescription(\n        preparedEvent: PreparedEvent<unknown, unknown, AnyEventResponse>,\n        actionCause: SearchPageEvents,\n    ): EventDescription {\n        return {actionCause, customData: preparedEvent.payload?.customData};\n    }\n\n    public async makeCustomEvent(\n        event: SearchPageEvents,\n        metadata?: Record<string, any>,\n        eventType: string = CustomEventsTypes[event]!,\n    ): Promise<EventBuilder<CustomEventResponse>> {\n        this.coveoAnalyticsClient.getParameters;\n        const customData = {...this.provider.getBaseMetadata(), ...metadata};\n        const request: CustomEventRequest = {\n            ...(await this.getBaseEventRequest(customData)),\n            eventType,\n            eventValue: event,\n        };\n        const preparedEvent = await this.coveoAnalyticsClient.makeCustomEvent(request);\n        return {\n            description: this.makeEventDescription(preparedEvent, event),\n            log: ({searchUID}) => preparedEvent.log({lastSearchQueryUid: searchUID}),\n        };\n    }\n\n    public async logCustomEvent(\n        event: SearchPageEvents,\n        metadata?: Record<string, any>,\n        eventType: string = CustomEventsTypes[event]!,\n    ) {\n        return (await this.makeCustomEvent(event, metadata, eventType)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public async makeCustomEventWithType(\n        eventValue: string,\n        eventType: string,\n        metadata?: Record<string, any>,\n    ): Promise<EventBuilder<CustomEventResponse>> {\n        const customData = {...this.provider.getBaseMetadata(), ...metadata};\n        const payload: CustomEventRequest = {\n            ...(await this.getBaseEventRequest(customData)),\n            eventType,\n            eventValue,\n        };\n        const preparedEvent = await this.coveoAnalyticsClient.makeCustomEvent(payload);\n        return {\n            description: this.makeEventDescription(preparedEvent, eventValue as SearchPageEvents),\n            log: ({searchUID}) => preparedEvent.log({lastSearchQueryUid: searchUID}),\n        };\n    }\n\n    public async logCustomEventWithType(eventValue: string, eventType: string, metadata?: Record<string, any>) {\n        return (await this.makeCustomEventWithType(eventValue, eventType, metadata)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    public async logSearchEvent(event: SearchPageEvents, metadata?: Record<string, any>) {\n        return (await this.makeSearchEvent(event, metadata)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public async makeSearchEvent(\n        event: SearchPageEvents,\n        metadata?: Record<string, any>,\n    ): Promise<EventBuilder<SearchEventResponse>> {\n        const request = await this.getBaseSearchEventRequest(event, metadata);\n        const preparedEvent = await this.coveoAnalyticsClient.makeSearchEvent(request);\n        return {\n            description: this.makeEventDescription(preparedEvent, event),\n            log: ({searchUID}) => preparedEvent.log({searchQueryUid: searchUID}),\n        };\n    }\n\n    public async makeClickEvent(\n        event: SearchPageEvents,\n        info: PartialDocumentInformation,\n        identifier: DocumentIdentifier,\n        metadata?: Record<string, any>,\n    ): Promise<EventBuilder<ClickEventResponse>> {\n        const request: PreparedClickEventRequest = {\n            ...info,\n            ...(await this.getBaseEventRequest({...identifier, ...metadata})),\n            queryPipeline: this.provider.getPipeline(),\n            actionCause: event,\n        };\n        const preparedEvent = await this.coveoAnalyticsClient.makeClickEvent(request);\n        return {\n            description: this.makeEventDescription(preparedEvent, event),\n            log: ({searchUID}) => preparedEvent.log({searchQueryUid: searchUID}),\n        };\n    }\n\n    public async logClickEvent(\n        event: SearchPageEvents,\n        info: PartialDocumentInformation,\n        identifier: DocumentIdentifier,\n        metadata?: Record<string, any>,\n    ) {\n        return (await this.makeClickEvent(event, info, identifier, metadata)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    private async getBaseSearchEventRequest(\n        event: SearchPageEvents,\n        metadata?: Record<string, any>,\n    ): Promise<PreparedSearchEventRequest> {\n        return {\n            ...(await this.getBaseEventRequest({...metadata, ...this.provider.getGeneratedAnswerMetadata?.()})),\n            ...this.provider.getSearchEventRequestPayload(),\n            queryPipeline: this.provider.getPipeline(),\n            actionCause: event,\n        };\n    }\n\n    private async getBaseEventRequest(metadata?: Record<string, any>) {\n        const customData = {...this.provider.getBaseMetadata(), ...metadata};\n        return {\n            ...this.getOrigins(),\n            ...this.getSplitTestRun(),\n            customData,\n            language: this.provider.getLanguage(),\n            facetState: this.provider.getFacetState ? this.provider.getFacetState() : [],\n            anonymous: this.provider.getIsAnonymous(),\n            clientId: await this.getClientId(),\n        };\n    }\n\n    private getOrigins() {\n        return {\n            originContext: this.provider.getOriginContext?.(),\n            originLevel1: this.provider.getOriginLevel1(),\n            originLevel2: this.provider.getOriginLevel2(),\n            originLevel3: this.provider.getOriginLevel3(),\n        };\n    }\n\n    private getClientId() {\n        return this.coveoAnalyticsClient instanceof CoveoAnalyticsClient\n            ? this.coveoAnalyticsClient.getCurrentVisitorId()\n            : undefined;\n    }\n\n    private getSplitTestRun() {\n        const splitTestRunName = this.provider.getSplitTestRunName ? this.provider.getSplitTestRunName() : '';\n        const splitTestRunVersion = this.provider.getSplitTestRunVersion ? this.provider.getSplitTestRunVersion() : '';\n        return {\n            ...(splitTestRunName && {splitTestRunName}),\n            ...(splitTestRunVersion && {splitTestRunVersion}),\n        };\n    }\n\n    public makeLikeGeneratedAnswer(metadata: GeneratedAnswerBaseMeta) {\n        return this.makeCustomEvent(SearchPageEvents.likeGeneratedAnswer, metadata);\n    }\n\n    public async logLikeGeneratedAnswer(metadata: GeneratedAnswerBaseMeta) {\n        return (await this.makeLikeGeneratedAnswer(metadata)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeDislikeGeneratedAnswer(metadata: GeneratedAnswerBaseMeta) {\n        return this.makeCustomEvent(SearchPageEvents.dislikeGeneratedAnswer, metadata);\n    }\n\n    public async logDislikeGeneratedAnswer(metadata: GeneratedAnswerBaseMeta) {\n        return (await this.makeDislikeGeneratedAnswer(metadata)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeOpenGeneratedAnswerSource(metadata: GeneratedAnswerCitationMeta) {\n        return this.makeCustomEvent(SearchPageEvents.openGeneratedAnswerSource, metadata);\n    }\n\n    public async logOpenGeneratedAnswerSource(metadata: GeneratedAnswerCitationMeta) {\n        return (await this.makeOpenGeneratedAnswerSource(metadata)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    public makeGeneratedAnswerCitationClick(\n        info: PartialDocumentInformation,\n        citation: GeneratedAnswerCitationClickMeta,\n    ) {\n        return this.makeClickEvent(\n            SearchPageEvents.generatedAnswerCitationClick,\n            {...info, documentPosition: 1},\n            {contentIDKey: citation.documentId.contentIdKey, contentIDValue: citation.documentId.contentIdValue},\n            citation,\n        );\n    }\n\n    public async logGeneratedAnswerCitationClick(\n        info: PartialDocumentInformation,\n        citation: GeneratedAnswerCitationClickMeta,\n    ) {\n        return (await this.makeGeneratedAnswerCitationClick(info, citation)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    public makeGeneratedAnswerSourceHover(metadata: GeneratedAnswerSourceHoverMeta) {\n        return this.makeCustomEvent(SearchPageEvents.generatedAnswerSourceHover, metadata);\n    }\n\n    public async logGeneratedAnswerSourceHover(metadata: GeneratedAnswerSourceHoverMeta) {\n        return (await this.makeGeneratedAnswerSourceHover(metadata)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    public makeGeneratedAnswerCopyToClipboard(metadata: GeneratedAnswerBaseMeta) {\n        return this.makeCustomEvent(SearchPageEvents.generatedAnswerCopyToClipboard, metadata);\n    }\n\n    public async logGeneratedAnswerCopyToClipboard(metadata: GeneratedAnswerBaseMeta) {\n        return (await this.makeGeneratedAnswerCopyToClipboard(metadata)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    public makeGeneratedAnswerHideAnswers(metadata: GeneratedAnswerBaseMeta) {\n        return this.makeCustomEvent(SearchPageEvents.generatedAnswerHideAnswers, metadata);\n    }\n\n    public async logGeneratedAnswerHideAnswers(metadata: GeneratedAnswerBaseMeta) {\n        return (await this.makeGeneratedAnswerHideAnswers(metadata)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    public makeGeneratedAnswerShowAnswers(metadata: GeneratedAnswerBaseMeta) {\n        return this.makeCustomEvent(SearchPageEvents.generatedAnswerShowAnswers, metadata);\n    }\n\n    public async logGeneratedAnswerShowAnswers(metadata: GeneratedAnswerBaseMeta) {\n        return (await this.makeGeneratedAnswerShowAnswers(metadata)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    public makeGeneratedAnswerExpand(metadata: GeneratedAnswerBaseMeta) {\n        return this.makeCustomEvent(SearchPageEvents.generatedAnswerExpand, metadata);\n    }\n\n    public async logGeneratedAnswerExpand(metadata: GeneratedAnswerBaseMeta) {\n        return (await this.makeGeneratedAnswerExpand(metadata)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeGeneratedAnswerCollapse(metadata: GeneratedAnswerBaseMeta) {\n        return this.makeCustomEvent(SearchPageEvents.generatedAnswerCollapse, metadata);\n    }\n\n    public async logGeneratedAnswerCollapse(metadata: GeneratedAnswerBaseMeta) {\n        return (await this.makeGeneratedAnswerCollapse(metadata)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeGeneratedAnswerFeedbackSubmit(meta: GeneratedAnswerFeedbackMeta) {\n        return this.makeCustomEvent(SearchPageEvents.generatedAnswerFeedbackSubmit, meta);\n    }\n\n    public async logGeneratedAnswerFeedbackSubmit(meta: GeneratedAnswerFeedbackMeta) {\n        return (await this.makeGeneratedAnswerFeedbackSubmit(meta)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    public makeGeneratedAnswerFeedbackSubmitV2(metadata: GeneratedAnswerBaseMeta) {\n        return this.makeCustomEvent(SearchPageEvents.generatedAnswerFeedbackSubmitV2, metadata);\n    }\n    public async logGeneratedAnswerFeedbackSubmitV2(meta: GeneratedAnswerFeedbackMetaV2) {\n        return (await this.makeGeneratedAnswerFeedbackSubmitV2(meta)).log({\n            searchUID: this.provider.getSearchUID(),\n        });\n    }\n\n    public makeRephraseGeneratedAnswer(meta: GeneratedAnswerRephraseMeta) {\n        return this.makeSearchEvent(SearchPageEvents.rephraseGeneratedAnswer, meta);\n    }\n\n    public async logRephraseGeneratedAnswer(meta: GeneratedAnswerRephraseMeta) {\n        return (await this.makeRephraseGeneratedAnswer(meta)).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeRetryGeneratedAnswer() {\n        return this.makeSearchEvent(SearchPageEvents.retryGeneratedAnswer);\n    }\n\n    public async logRetryGeneratedAnswer() {\n        return (await this.makeRetryGeneratedAnswer()).log({searchUID: this.provider.getSearchUID()});\n    }\n\n    public makeGeneratedAnswerStreamEnd(metadata: GeneratedAnswerStreamEndMeta) {\n        return this.makeCustomEvent(SearchPageEvents.generatedAnswerStreamEnd, metadata);\n    }\n\n    public async logGeneratedAnswerStreamEnd(metadata: GeneratedAnswerStreamEndMeta) {\n        return (await this.makeGeneratedAnswerStreamEnd(metadata)).log({searchUID: this.provider.getSearchUID()});\n    }\n}\n","import {TicketProperties} from '../plugins/svc';\n\nexport enum CaseAssistEvents {\n    click = 'click',\n    flowStart = 'flowStart',\n}\n\nexport enum CaseAssistActions {\n    enterInterface = 'ticket_create_start',\n    fieldUpdate = 'ticket_field_update',\n    fieldSuggestionClick = 'ticket_classification_click',\n    documentSuggestionClick = 'documentSuggestionClick',\n    documentSuggestionQuickview = 'documentSuggestionQuickview',\n    suggestionRate = 'suggestion_rate',\n    nextCaseStep = 'ticket_next_stage',\n    caseCancelled = 'ticket_cancel',\n    caseSolved = 'ticket_cancel',\n    caseCreated = 'ticket_create',\n}\n\nexport enum CaseCancelledReasons {\n    quit = 'Quit',\n    solved = 'Solved',\n}\n\nexport interface EnterInterfaceMetadata {\n    ticket: TicketProperties;\n}\n\nexport interface UpdateCaseFieldMetadata {\n    fieldName: string;\n    ticket: TicketProperties;\n}\n\nexport interface SelectFieldSuggestionMetadata {\n    suggestion: FieldSuggestion;\n    ticket: TicketProperties;\n}\n\nexport interface SelectDocumentSuggestionMetadata {\n    suggestion: DocumentSuggestion;\n    ticket: TicketProperties;\n}\n\nexport interface RateDocumentSuggestionMetadata {\n    rating: number;\n    suggestion: DocumentSuggestion;\n    ticket: TicketProperties;\n}\n\nexport interface MoveToNextCaseStepMetadata {\n    ticket: TicketProperties;\n    stage?: string;\n}\n\nexport interface CaseCancelledMetadata {\n    ticket: TicketProperties;\n}\n\nexport interface CaseSolvedMetadata {\n    ticket: TicketProperties;\n}\n\nexport interface CaseCreatedMetadata {\n    ticket: TicketProperties;\n}\n\nexport interface FieldSuggestion {\n    classificationId: string;\n    responseId: string;\n    fieldName: string;\n    classification: {\n        value: string;\n        confidence: number;\n    };\n    autoSelection?: boolean;\n}\n\nexport interface DocumentSuggestion {\n    suggestionId: string;\n    responseId: string;\n    permanentId: string;\n    suggestion: {\n        documentUri: string;\n        documentUriHash: string;\n        documentTitle: string;\n        documentUrl: string;\n        documentPosition: number;\n        sourceName: string;\n    };\n    fromQuickview?: boolean;\n    openDocument?: boolean;\n}\n","import CoveoAnalyticsClient, {AnalyticsClient, ClientOptions} from '../client/analytics';\nimport {NoopAnalytics} from '../client/noopAnalytics';\nimport doNotTrack from '../donottrack';\nimport {ClickEventRequest} from '../events';\nimport {SVCPlugin} from '../plugins/svc';\nimport {DocumentIdentifier, PartialDocumentInformation, SearchPageEvents} from '../searchPage/searchPageEvents';\nimport {\n    CaseAssistActions,\n    CaseAssistEvents,\n    CaseCancelledMetadata,\n    CaseCancelledReasons,\n    CaseCreatedMetadata,\n    CaseSolvedMetadata,\n    EnterInterfaceMetadata,\n    MoveToNextCaseStepMetadata,\n    RateDocumentSuggestionMetadata,\n    SelectDocumentSuggestionMetadata,\n    SelectFieldSuggestionMetadata,\n    UpdateCaseFieldMetadata,\n} from './caseAssistActions';\n\nexport interface CaseAssistClientProvider {\n    getOriginLevel1: () => string;\n    getOriginLevel2: () => string;\n    getOriginLevel3: () => string;\n    getOriginContext: () => string;\n    getIsAnonymous: () => boolean;\n    getSearchUID: () => string;\n    getLanguage: () => string;\n}\n\nexport interface CaseAssistClientOptions extends ClientOptions {\n    enableAnalytics?: boolean;\n}\n\nexport class CaseAssistClient {\n    public coveoAnalyticsClient: AnalyticsClient;\n    private svc: SVCPlugin;\n\n    constructor(\n        private options: Partial<CaseAssistClientOptions>,\n        private provider?: CaseAssistClientProvider,\n    ) {\n        const analyticsEnabled = (options.enableAnalytics ?? true) && !doNotTrack();\n\n        this.coveoAnalyticsClient = analyticsEnabled ? new CoveoAnalyticsClient(options) : new NoopAnalytics();\n        this.svc = new SVCPlugin({client: this.coveoAnalyticsClient});\n    }\n\n    public disable() {\n        this.coveoAnalyticsClient = new NoopAnalytics();\n        this.svc = new SVCPlugin({client: this.coveoAnalyticsClient});\n    }\n\n    public enable() {\n        this.coveoAnalyticsClient = new CoveoAnalyticsClient(this.options);\n        this.svc = new SVCPlugin({client: this.coveoAnalyticsClient});\n    }\n\n    public logEnterInterface(meta: EnterInterfaceMetadata) {\n        this.svc.setAction(CaseAssistActions.enterInterface);\n        this.svc.setTicket(meta.ticket);\n        return this.sendFlowStartEvent();\n    }\n\n    public logUpdateCaseField(meta: UpdateCaseFieldMetadata) {\n        this.svc.setAction(CaseAssistActions.fieldUpdate, {\n            fieldName: meta.fieldName,\n        });\n        this.svc.setTicket(meta.ticket);\n        return this.sendClickEvent();\n    }\n\n    public logSelectFieldSuggestion(meta: SelectFieldSuggestionMetadata) {\n        this.svc.setAction(CaseAssistActions.fieldSuggestionClick, meta.suggestion);\n        this.svc.setTicket(meta.ticket);\n        return this.sendClickEvent();\n    }\n\n    public logSelectDocumentSuggestion(meta: SelectDocumentSuggestionMetadata) {\n        return this.logClickEvent(CaseAssistActions.documentSuggestionClick, meta.suggestion.suggestion, {\n            contentIDKey: 'permanentId',\n            contentIDValue: meta.suggestion.permanentId,\n        });\n    }\n\n    public logQuickviewDocumentSuggestion(meta: SelectDocumentSuggestionMetadata) {\n        return this.logClickEvent(CaseAssistActions.documentSuggestionQuickview, meta.suggestion.suggestion, {\n            contentIDKey: 'permanentId',\n            contentIDValue: meta.suggestion.permanentId,\n        });\n    }\n\n    public logRateDocumentSuggestion(meta: RateDocumentSuggestionMetadata) {\n        this.svc.setAction(CaseAssistActions.suggestionRate, {\n            rate: meta.rating,\n            ...meta.suggestion,\n        });\n        this.svc.setTicket(meta.ticket);\n        return this.sendClickEvent();\n    }\n\n    public logMoveToNextCaseStep(meta: MoveToNextCaseStepMetadata) {\n        this.svc.setAction(CaseAssistActions.nextCaseStep, {\n            stage: meta?.stage,\n        });\n        this.svc.setTicket(meta.ticket);\n        return this.sendClickEvent();\n    }\n\n    public logCaseCancelled(meta: CaseCancelledMetadata) {\n        this.svc.setAction(CaseAssistActions.caseCancelled, {\n            reason: CaseCancelledReasons.quit,\n        });\n        this.svc.setTicket(meta.ticket);\n        return this.sendClickEvent();\n    }\n\n    public logCaseSolved(meta: CaseSolvedMetadata) {\n        this.svc.setAction(CaseAssistActions.caseSolved, {\n            reason: CaseCancelledReasons.solved,\n        });\n        this.svc.setTicket(meta.ticket);\n        return this.sendClickEvent();\n    }\n\n    public logCaseCreated(meta: CaseCreatedMetadata) {\n        this.svc.setAction(CaseAssistActions.caseCreated);\n        this.svc.setTicket(meta.ticket);\n        return this.sendClickEvent();\n    }\n\n    private sendFlowStartEvent() {\n        return this.coveoAnalyticsClient.sendEvent(\n            'event',\n            'svc',\n            CaseAssistEvents.flowStart,\n            this.provider\n                ? {\n                      searchHub: this.provider.getOriginLevel1(),\n                  }\n                : null,\n        );\n    }\n\n    private sendClickEvent() {\n        return this.coveoAnalyticsClient.sendEvent(\n            'event',\n            'svc',\n            CaseAssistEvents.click,\n            this.provider\n                ? {\n                      searchHub: this.provider.getOriginLevel1(),\n                  }\n                : null,\n        );\n    }\n\n    private async getBaseEventRequest(metadata?: Record<string, any>) {\n        const customData = {...metadata};\n        return {\n            ...this.getOrigins(),\n            customData,\n            language: this.provider?.getLanguage(),\n            anonymous: this.provider?.getIsAnonymous(),\n            clientId: await this.getClientId(),\n        };\n    }\n\n    private getClientId() {\n        return this.coveoAnalyticsClient instanceof CoveoAnalyticsClient\n            ? this.coveoAnalyticsClient.getCurrentVisitorId()\n            : undefined;\n    }\n\n    private getOrigins() {\n        return {\n            originContext: this.provider?.getOriginContext?.(),\n            originLevel1: this.provider?.getOriginLevel1(),\n            originLevel2: this.provider?.getOriginLevel2(),\n            originLevel3: this.provider?.getOriginLevel3(),\n        };\n    }\n\n    private async logClickEvent(\n        event: CaseAssistActions,\n        info: PartialDocumentInformation,\n        identifier: DocumentIdentifier,\n        metadata?: Record<string, any>,\n    ) {\n        const payload: ClickEventRequest = {\n            ...info,\n            ...(await this.getBaseEventRequest({...identifier, ...metadata})),\n            searchQueryUid: this.provider?.getSearchUID() ?? '',\n            actionCause: event,\n        };\n\n        return this.coveoAnalyticsClient.sendClickEvent(payload);\n    }\n}\n","import CoveoAnalyticsClient, {AnalyticsClient, ClientOptions} from '../client/analytics';\nimport {NoopAnalytics} from '../client/noopAnalytics';\nimport doNotTrack from '../donottrack';\nimport {ClickEventRequest, CustomEventRequest, SearchEventRequest} from '../events';\nimport {\n    CustomEventsTypes,\n    DocumentIdentifier,\n    FacetStateMetadata,\n    GeneratedAnswerBaseMeta,\n    GeneratedAnswerCitationClickMeta,\n    GeneratedAnswerCitationMeta,\n    GeneratedAnswerFeedbackMeta,\n    GeneratedAnswerFeedbackMetaV2,\n    GeneratedAnswerRephraseMeta,\n    GeneratedAnswerSourceHoverMeta,\n    GeneratedAnswerStreamEndMeta,\n    PartialDocumentInformation,\n    SearchPageEvents,\n    SmartSnippetDocumentIdentifier,\n    SmartSnippetFeedbackReason,\n    SmartSnippetLinkMeta,\n    SmartSnippetSuggestionMeta,\n    TriggerNotifyMetadata,\n} from '../searchPage/searchPageEvents';\nimport {\n    ExpandToFullUIMetadata,\n    InsightEvents,\n    InsightFacetMetadata,\n    InsightInterfaceChangeMetadata,\n    InsightStaticFilterToggleValueMetadata,\n    InsightFacetRangeMetadata,\n    InsightCategoryFacetMetadata,\n    CaseMetadata,\n    InsightFacetSortMeta,\n    InsightFacetBaseMeta,\n    InsightQueryErrorMeta,\n    InsightPagerMetadata,\n    InsightResultsSortMetadata,\n    UserActionsDocumentMetadata,\n    UserActionsPageViewMetadata,\n    CreateArticleMetadata,\n} from './insightEvents';\n\nexport interface InsightClientProvider {\n    getSearchEventRequestPayload: () => Omit<SearchEventRequest, 'actionCause' | 'searchQueryUid'>;\n    getSearchUID: () => string;\n    getBaseMetadata: () => Record<string, any>;\n    getPipeline: () => string;\n    getOriginContext?: () => string;\n    getOriginLevel1: () => string;\n    getOriginLevel2: () => string;\n    getOriginLevel3: () => string;\n    getLanguage: () => string;\n    getIsAnonymous: () => boolean;\n    getFacetState?: () => FacetStateMetadata[];\n    getGeneratedAnswerMetadata?: () => Record<string, any>;\n}\n\nexport interface InsightClientOptions extends ClientOptions {\n    enableAnalytics: boolean;\n}\n\nconst extractContextFromMetadata = (meta: {caseContext?: Record<string, string>}) => {\n    const context: Record<string, string> = {};\n    if (meta.caseContext) {\n        Object.keys(meta.caseContext).forEach((contextKey) => {\n            const value = meta.caseContext?.[contextKey];\n            if (value) {\n                const keyToBeSent = `context_${contextKey}`;\n                context[keyToBeSent] = value;\n            }\n        });\n    }\n    return context;\n};\n\nconst generateMetadataToSend = (metadata: CaseMetadata, includeContext = true) => {\n    const {caseContext, caseId, caseNumber, ...metadataWithoutContext} = metadata;\n    const context = extractContextFromMetadata(metadata);\n\n    return {\n        CaseId: caseId,\n        CaseNumber: caseNumber,\n        ...metadataWithoutContext,\n        ...(!!context.context_Case_Subject && {CaseSubject: context.context_Case_Subject}),\n        ...(includeContext && context),\n    };\n};\n\nexport class CoveoInsightClient {\n    public coveoAnalyticsClient: AnalyticsClient;\n\n    constructor(\n        private opts: Partial<InsightClientOptions>,\n        private provider: InsightClientProvider,\n    ) {\n        const shouldDisableAnalytics = opts.enableAnalytics === false || doNotTrack();\n        this.coveoAnalyticsClient = shouldDisableAnalytics ? new NoopAnalytics() : new CoveoAnalyticsClient(opts);\n    }\n\n    public disable() {\n        this.coveoAnalyticsClient = new NoopAnalytics();\n    }\n\n    public enable() {\n        this.coveoAnalyticsClient = new CoveoAnalyticsClient(this.opts);\n    }\n\n    public logInterfaceLoad(metadata?: CaseMetadata) {\n        if (metadata) {\n            const metadataToSend = generateMetadataToSend(metadata);\n            return this.logSearchEvent(SearchPageEvents.interfaceLoad, metadataToSend);\n        }\n        return this.logSearchEvent(SearchPageEvents.interfaceLoad);\n    }\n\n    public logRecentQueryClick(metadata?: CaseMetadata) {\n        if (metadata) {\n            const metadataToSend = generateMetadataToSend(metadata);\n            return this.logSearchEvent(SearchPageEvents.recentQueryClick, metadataToSend);\n        }\n        return this.logSearchEvent(SearchPageEvents.recentQueryClick);\n    }\n\n    public logClearRecentQueries(metadata?: CaseMetadata) {\n        if (metadata) {\n            const metadataToSend = generateMetadataToSend(metadata);\n            return this.logCustomEvent(SearchPageEvents.clearRecentQueries, metadataToSend);\n        }\n        return this.logCustomEvent(SearchPageEvents.clearRecentQueries);\n    }\n\n    public logInterfaceChange(metadata: InsightInterfaceChangeMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata);\n        return this.logSearchEvent(SearchPageEvents.interfaceChange, metadataToSend);\n    }\n\n    public logStaticFilterDeselect(metadata: InsightStaticFilterToggleValueMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata);\n        return this.logSearchEvent(SearchPageEvents.staticFilterDeselect, metadataToSend);\n    }\n\n    public logFetchMoreResults(metadata?: CaseMetadata) {\n        if (metadata) {\n            const metadataToSend = generateMetadataToSend(metadata);\n            return this.logCustomEvent(SearchPageEvents.pagerScrolling, {...metadataToSend, type: 'getMoreResults'});\n        }\n        return this.logCustomEvent(SearchPageEvents.pagerScrolling, {type: 'getMoreResults'});\n    }\n\n    public logBreadcrumbFacet(\n        metadata: InsightFacetMetadata | InsightFacetRangeMetadata | InsightCategoryFacetMetadata,\n    ) {\n        const metadataToSend = generateMetadataToSend(metadata);\n        return this.logSearchEvent(SearchPageEvents.breadcrumbFacet, metadataToSend);\n    }\n\n    public logBreadcrumbResetAll(metadata?: CaseMetadata) {\n        if (metadata) {\n            const metadataToSend = generateMetadataToSend(metadata);\n            return this.logSearchEvent(SearchPageEvents.breadcrumbResetAll, metadataToSend);\n        }\n        return this.logSearchEvent(SearchPageEvents.breadcrumbResetAll);\n    }\n\n    public logFacetSelect(metadata: InsightFacetMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata);\n        return this.logSearchEvent(SearchPageEvents.facetSelect, metadataToSend);\n    }\n\n    public logFacetExclude(metadata: InsightFacetMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata);\n        return this.logSearchEvent(SearchPageEvents.facetExclude, metadataToSend);\n    }\n\n    public logFacetDeselect(metadata: InsightFacetMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata);\n        return this.logSearchEvent(SearchPageEvents.facetDeselect, metadataToSend);\n    }\n\n    public logFacetUpdateSort(metadata: InsightFacetSortMeta) {\n        const metadataToSend = generateMetadataToSend(metadata);\n        return this.logSearchEvent(SearchPageEvents.facetUpdateSort, metadataToSend);\n    }\n\n    public logFacetClearAll(metadata: InsightFacetBaseMeta) {\n        const metadataToSend = generateMetadataToSend(metadata);\n        return this.logSearchEvent(SearchPageEvents.facetClearAll, metadataToSend);\n    }\n\n    public logFacetShowMore(metadata: InsightFacetBaseMeta) {\n        const metadataToSend = generateMetadataToSend(metadata, false);\n        return this.logCustomEvent(SearchPageEvents.facetShowMore, metadataToSend);\n    }\n\n    public logFacetShowLess(metadata: InsightFacetBaseMeta) {\n        const metadataToSend = generateMetadataToSend(metadata, false);\n        return this.logCustomEvent(SearchPageEvents.facetShowLess, metadataToSend);\n    }\n\n    public logQueryError(metadata: InsightQueryErrorMeta) {\n        const metadataToSend = generateMetadataToSend(metadata, false);\n        return this.logCustomEvent(SearchPageEvents.queryError, metadataToSend);\n    }\n\n    public logPagerNumber(metadata: InsightPagerMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata, false);\n        return this.logCustomEvent(SearchPageEvents.pagerNumber, metadataToSend);\n    }\n\n    public logPagerNext(metadata: InsightPagerMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata, false);\n        return this.logCustomEvent(SearchPageEvents.pagerNext, metadataToSend);\n    }\n\n    public logPagerPrevious(metadata: InsightPagerMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata, false);\n        return this.logCustomEvent(SearchPageEvents.pagerPrevious, metadataToSend);\n    }\n\n    public logDidYouMeanAutomatic(metadata?: CaseMetadata) {\n        if (metadata) {\n            const metadataToSend = generateMetadataToSend(metadata);\n            return this.logSearchEvent(SearchPageEvents.didyoumeanAutomatic, metadataToSend);\n        }\n        return this.logSearchEvent(SearchPageEvents.didyoumeanAutomatic);\n    }\n\n    public logDidYouMeanClick(metadata?: CaseMetadata) {\n        if (metadata) {\n            const metadataToSend = generateMetadataToSend(metadata);\n            return this.logSearchEvent(SearchPageEvents.didyoumeanClick, metadataToSend);\n        }\n        return this.logSearchEvent(SearchPageEvents.didyoumeanClick);\n    }\n\n    public logResultsSort(metadata: InsightResultsSortMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata);\n        return this.logSearchEvent(SearchPageEvents.resultsSort, metadataToSend);\n    }\n\n    public logSearchboxSubmit(metadata?: CaseMetadata) {\n        if (metadata) {\n            const metadataToSend = generateMetadataToSend(metadata);\n            return this.logSearchEvent(SearchPageEvents.searchboxSubmit, metadataToSend);\n        }\n        return this.logSearchEvent(SearchPageEvents.searchboxSubmit);\n    }\n\n    public logContextChanged(metadata: CaseMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata);\n        return this.logSearchEvent(InsightEvents.contextChanged, metadataToSend);\n    }\n\n    public logExpandToFullUI(metadata: ExpandToFullUIMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata);\n        return this.logCustomEvent(InsightEvents.expandToFullUI, metadataToSend);\n    }\n\n    public logOpenUserActions(metadata: CaseMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata, false);\n        return this.logCustomEvent(InsightEvents.openUserActions, metadataToSend);\n    }\n\n    public logShowPrecedingSessions(metadata: CaseMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata, false);\n        return this.logCustomEvent(InsightEvents.showPrecedingSessions, metadataToSend);\n    }\n\n    public logShowFollowingSessions(metadata: CaseMetadata) {\n        const metadataToSend = generateMetadataToSend(metadata, false);\n        return this.logCustomEvent(InsightEvents.showFollowingSessions, metadataToSend);\n    }\n\n    public logViewedDocumentClick(document: UserActionsDocumentMetadata, metadata: CaseMetadata) {\n        return this.logCustomEvent(InsightEvents.clickViewedDocument, {\n            ...generateMetadataToSend(metadata, false),\n            document,\n        });\n    }\n\n    public logPageViewClick(pageView: UserActionsPageViewMetadata, metadata: CaseMetadata) {\n        return this.logCustomEvent(InsightEvents.clickPageView, {\n            ...generateMetadataToSend(metadata, false),\n            pageView,\n        });\n    }\n\n    public logCreateArticle(createArticleMetadata: CreateArticleMetadata, metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            InsightEvents.createArticle,\n            metadata ? {...generateMetadataToSend(metadata, false), ...createArticleMetadata} : createArticleMetadata,\n        );\n    }\n\n    public logDocumentOpen(info: PartialDocumentInformation, identifier: DocumentIdentifier, metadata?: CaseMetadata) {\n        return this.logClickEvent(\n            SearchPageEvents.documentOpen,\n            info,\n            identifier,\n            metadata ? generateMetadataToSend(metadata, false) : undefined,\n        );\n    }\n\n    public logCopyToClipboard(\n        info: PartialDocumentInformation,\n        identifier: DocumentIdentifier,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logClickEvent(\n            SearchPageEvents.copyToClipboard,\n            info,\n            identifier,\n            metadata ? generateMetadataToSend(metadata, false) : undefined,\n        );\n    }\n\n    public logCaseSendEmail(info: PartialDocumentInformation, identifier: DocumentIdentifier, metadata?: CaseMetadata) {\n        return this.logClickEvent(\n            SearchPageEvents.caseSendEmail,\n            info,\n            identifier,\n            metadata ? generateMetadataToSend(metadata, false) : undefined,\n        );\n    }\n\n    public logFeedItemTextPost(\n        info: PartialDocumentInformation,\n        identifier: DocumentIdentifier,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logClickEvent(\n            SearchPageEvents.feedItemTextPost,\n            info,\n            identifier,\n            metadata ? generateMetadataToSend(metadata, false) : undefined,\n        );\n    }\n\n    public logDocumentQuickview(\n        info: PartialDocumentInformation,\n        identifier: DocumentIdentifier,\n        caseMetadata?: CaseMetadata,\n    ) {\n        const metadata = {\n            documentTitle: info.documentTitle,\n            documentURL: info.documentUrl,\n        };\n        return this.logClickEvent(\n            SearchPageEvents.documentQuickview,\n            info,\n            identifier,\n            caseMetadata ? {...generateMetadataToSend(caseMetadata, false), ...metadata} : metadata,\n        );\n    }\n\n    public logCaseAttach(\n        info: PartialDocumentInformation,\n        identifier: DocumentIdentifier,\n        caseMetadata?: CaseMetadata,\n    ) {\n        const metadata = {\n            documentTitle: info.documentTitle,\n            documentURL: info.documentUrl,\n            resultUriHash: info.documentUriHash,\n        };\n\n        return this.logClickEvent(\n            SearchPageEvents.caseAttach,\n            info,\n            identifier,\n            caseMetadata ? {...generateMetadataToSend(caseMetadata, false), ...metadata} : metadata,\n        );\n    }\n\n    public logCaseDetach(resultUriHash: string, metadata?: CaseMetadata, permanentId?: string) {\n        const generatedMetadata = {\n            ...(metadata && generateMetadataToSend(metadata, false)),\n            ...(permanentId && {permanentId}),\n            resultUriHash,\n        };\n        return this.logCustomEvent(SearchPageEvents.caseDetach, generatedMetadata);\n    }\n\n    public logLikeSmartSnippet(metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.likeSmartSnippet,\n            metadata ? generateMetadataToSend(metadata, false) : undefined,\n        );\n    }\n\n    public logDislikeSmartSnippet(metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.dislikeSmartSnippet,\n            metadata ? generateMetadataToSend(metadata, false) : undefined,\n        );\n    }\n\n    public logExpandSmartSnippet(metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.expandSmartSnippet,\n            metadata ? generateMetadataToSend(metadata, false) : undefined,\n        );\n    }\n\n    public logCollapseSmartSnippet(metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.collapseSmartSnippet,\n            metadata ? generateMetadataToSend(metadata, false) : undefined,\n        );\n    }\n\n    public logOpenSmartSnippetFeedbackModal(metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.openSmartSnippetFeedbackModal,\n            metadata ? generateMetadataToSend(metadata, false) : undefined,\n        );\n    }\n\n    public logCloseSmartSnippetFeedbackModal(metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.closeSmartSnippetFeedbackModal,\n            metadata ? generateMetadataToSend(metadata, false) : undefined,\n        );\n    }\n\n    public logSmartSnippetFeedbackReason(\n        reason: SmartSnippetFeedbackReason,\n        details?: string,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logCustomEvent(\n            SearchPageEvents.sendSmartSnippetReason,\n            metadata ? {...generateMetadataToSend(metadata, false), reason, details} : {reason, details},\n        );\n    }\n\n    public logExpandSmartSnippetSuggestion(\n        snippet: SmartSnippetSuggestionMeta | SmartSnippetDocumentIdentifier,\n        metadata?: CaseMetadata,\n    ) {\n        const snippetMetadata = 'documentId' in snippet ? snippet : {documentId: snippet};\n        return this.logCustomEvent(\n            SearchPageEvents.expandSmartSnippetSuggestion,\n            metadata ? {...generateMetadataToSend(metadata, false), ...snippetMetadata} : snippetMetadata,\n        );\n    }\n\n    public logCollapseSmartSnippetSuggestion(\n        snippet: SmartSnippetSuggestionMeta | SmartSnippetDocumentIdentifier,\n        metadata?: CaseMetadata,\n    ) {\n        const snippetMetadata = 'documentId' in snippet ? snippet : {documentId: snippet};\n        return this.logCustomEvent(\n            SearchPageEvents.collapseSmartSnippetSuggestion,\n            metadata ? {...generateMetadataToSend(metadata, false), ...snippetMetadata} : snippetMetadata,\n        );\n    }\n\n    public logOpenSmartSnippetSource(\n        info: PartialDocumentInformation,\n        identifier: DocumentIdentifier,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logClickEvent(\n            SearchPageEvents.openSmartSnippetSource,\n            info,\n            identifier,\n            metadata ? generateMetadataToSend(metadata, false) : undefined,\n        );\n    }\n\n    public logOpenSmartSnippetSuggestionSource(\n        info: PartialDocumentInformation,\n        snippet: SmartSnippetSuggestionMeta,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logClickEvent(\n            SearchPageEvents.openSmartSnippetSuggestionSource,\n            info,\n            {contentIDKey: snippet.documentId.contentIdKey, contentIDValue: snippet.documentId.contentIdValue},\n            metadata ? {...generateMetadataToSend(metadata, false), ...snippet} : snippet,\n        );\n    }\n\n    public logOpenSmartSnippetInlineLink(\n        info: PartialDocumentInformation,\n        identifierAndLink: DocumentIdentifier & SmartSnippetLinkMeta,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logClickEvent(\n            SearchPageEvents.openSmartSnippetInlineLink,\n            info,\n            {contentIDKey: identifierAndLink.contentIDKey, contentIDValue: identifierAndLink.contentIDValue},\n            metadata ? {...generateMetadataToSend(metadata, false), ...identifierAndLink} : identifierAndLink,\n        );\n    }\n\n    public logOpenSmartSnippetSuggestionInlineLink(\n        info: PartialDocumentInformation,\n        snippetAndLink: SmartSnippetSuggestionMeta & SmartSnippetLinkMeta,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logClickEvent(\n            SearchPageEvents.openSmartSnippetSuggestionInlineLink,\n            info,\n            {\n                contentIDKey: snippetAndLink.documentId.contentIdKey,\n                contentIDValue: snippetAndLink.documentId.contentIdValue,\n            },\n            metadata ? {...generateMetadataToSend(metadata, false), ...snippetAndLink} : snippetAndLink,\n        );\n    }\n\n    public logLikeGeneratedAnswer(generatedAnswerMetadata: GeneratedAnswerBaseMeta, metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.likeGeneratedAnswer,\n            metadata\n                ? {...generateMetadataToSend(metadata, false), ...generatedAnswerMetadata}\n                : generatedAnswerMetadata,\n        );\n    }\n\n    public logDislikeGeneratedAnswer(generatedAnswerMetadata: GeneratedAnswerBaseMeta, metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.dislikeGeneratedAnswer,\n            metadata\n                ? {...generateMetadataToSend(metadata, false), ...generatedAnswerMetadata}\n                : generatedAnswerMetadata,\n        );\n    }\n\n    public logOpenGeneratedAnswerSource(\n        generatedAnswerSourceMetadata: GeneratedAnswerCitationMeta,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logCustomEvent(\n            SearchPageEvents.openGeneratedAnswerSource,\n            metadata\n                ? {...generateMetadataToSend(metadata, false), ...generatedAnswerSourceMetadata}\n                : generatedAnswerSourceMetadata,\n        );\n    }\n\n    public logGeneratedAnswerCitationClick(\n        info: PartialDocumentInformation,\n        citation: GeneratedAnswerCitationClickMeta,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logClickEvent(\n            SearchPageEvents.generatedAnswerCitationClick,\n            {...info, documentPosition: 1},\n            {contentIDKey: citation.documentId.contentIdKey, contentIDValue: citation.documentId.contentIdValue},\n            metadata ? {...generateMetadataToSend(metadata, false), ...citation} : citation,\n        );\n    }\n\n    public logGeneratedAnswerSourceHover(\n        generatedAnswerSourceMetadata: GeneratedAnswerSourceHoverMeta,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logCustomEvent(\n            SearchPageEvents.generatedAnswerSourceHover,\n            metadata\n                ? {...generateMetadataToSend(metadata, false), ...generatedAnswerSourceMetadata}\n                : generatedAnswerSourceMetadata,\n        );\n    }\n\n    public logGeneratedAnswerCopyToClipboard(\n        generatedAnswerMetadata: GeneratedAnswerBaseMeta,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logCustomEvent(\n            SearchPageEvents.generatedAnswerCopyToClipboard,\n            metadata\n                ? {...generateMetadataToSend(metadata, false), ...generatedAnswerMetadata}\n                : generatedAnswerMetadata,\n        );\n    }\n\n    public logGeneratedAnswerHideAnswers(generatedAnswerMetadata: GeneratedAnswerBaseMeta, metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.generatedAnswerHideAnswers,\n            metadata\n                ? {...generateMetadataToSend(metadata, false), ...generatedAnswerMetadata}\n                : generatedAnswerMetadata,\n        );\n    }\n\n    public logGeneratedAnswerShowAnswers(generatedAnswerMetadata: GeneratedAnswerBaseMeta, metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.generatedAnswerShowAnswers,\n            metadata\n                ? {...generateMetadataToSend(metadata, false), ...generatedAnswerMetadata}\n                : generatedAnswerMetadata,\n        );\n    }\n\n    public logGeneratedAnswerExpand(generatedAnswerMetadata: GeneratedAnswerBaseMeta, metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.generatedAnswerExpand,\n            metadata\n                ? {...generateMetadataToSend(metadata, false), ...generatedAnswerMetadata}\n                : generatedAnswerMetadata,\n        );\n    }\n\n    public logGeneratedAnswerCollapse(generatedAnswerMetadata: GeneratedAnswerBaseMeta, metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.generatedAnswerCollapse,\n            metadata\n                ? {...generateMetadataToSend(metadata, false), ...generatedAnswerMetadata}\n                : generatedAnswerMetadata,\n        );\n    }\n\n    public logGeneratedAnswerFeedbackSubmit(\n        generatedAnswerFeedbackMetadata: GeneratedAnswerFeedbackMeta,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logCustomEvent(\n            SearchPageEvents.generatedAnswerFeedbackSubmit,\n            metadata\n                ? {...generateMetadataToSend(metadata, false), ...generatedAnswerFeedbackMetadata}\n                : generatedAnswerFeedbackMetadata,\n        );\n    }\n\n    public logGeneratedAnswerFeedbackSubmitV2(\n        generatedAnswerFeedbackMetadata: GeneratedAnswerFeedbackMetaV2,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logCustomEvent(\n            SearchPageEvents.generatedAnswerFeedbackSubmitV2,\n            metadata\n                ? {...generateMetadataToSend(metadata, false), ...generatedAnswerFeedbackMetadata}\n                : generatedAnswerFeedbackMetadata,\n        );\n    }\n\n    public logRephraseGeneratedAnswer(\n        generatedAnswerRephraseMetadata: GeneratedAnswerRephraseMeta,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logSearchEvent(\n            SearchPageEvents.rephraseGeneratedAnswer,\n            metadata\n                ? {...generateMetadataToSend(metadata, false), ...generatedAnswerRephraseMetadata}\n                : generatedAnswerRephraseMetadata,\n        );\n    }\n\n    public logRetryGeneratedAnswer(metadata?: CaseMetadata) {\n        return this.logSearchEvent(\n            SearchPageEvents.retryGeneratedAnswer,\n            metadata ? {...generateMetadataToSend(metadata, false)} : {},\n        );\n    }\n\n    public logGeneratedAnswerStreamEnd(\n        generatedAnswerStreamEndMetadata: GeneratedAnswerStreamEndMeta,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logCustomEvent(\n            SearchPageEvents.generatedAnswerStreamEnd,\n            metadata\n                ? {...generateMetadataToSend(metadata, false), ...generatedAnswerStreamEndMetadata}\n                : generatedAnswerStreamEndMetadata,\n        );\n    }\n\n    public logGeneratedAnswerCitationDocumentAttach(\n        info: PartialDocumentInformation,\n        citation: GeneratedAnswerCitationClickMeta,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logClickEvent(\n            SearchPageEvents.generatedAnswerCitationDocumentAttach,\n            {...info, documentPosition: 1},\n            {contentIDKey: citation.documentId.contentIdKey, contentIDValue: citation.documentId.contentIdValue},\n            metadata ? {...generateMetadataToSend(metadata, false), ...citation} : citation,\n        );\n    }\n\n    public async logCustomEvent(event: SearchPageEvents | InsightEvents, metadata?: Record<string, any>) {\n        const customData = {...this.provider.getBaseMetadata(), ...metadata};\n\n        const payload: CustomEventRequest = {\n            ...(await this.getBaseCustomEventRequest(customData)),\n            eventType: CustomEventsTypes[event]!,\n            eventValue: event,\n        };\n\n        return this.coveoAnalyticsClient.sendCustomEvent(payload);\n    }\n\n    public async logSearchEvent(event: SearchPageEvents | InsightEvents, metadata?: Record<string, any>) {\n        return this.coveoAnalyticsClient.sendSearchEvent(await this.getBaseSearchEventRequest(event, metadata));\n    }\n\n    public async logClickEvent(\n        event: SearchPageEvents,\n        info: PartialDocumentInformation,\n        identifier: DocumentIdentifier,\n        metadata?: Record<string, any>,\n    ) {\n        const payload: ClickEventRequest = {\n            ...info,\n            ...(await this.getBaseEventRequest({...identifier, ...metadata})),\n            searchQueryUid: this.provider.getSearchUID(),\n            queryPipeline: this.provider.getPipeline(),\n            actionCause: event,\n        };\n\n        return this.coveoAnalyticsClient.sendClickEvent(payload);\n    }\n\n    public async logShowMoreFoldedResults(\n        info: PartialDocumentInformation,\n        identifier: DocumentIdentifier,\n        metadata?: CaseMetadata,\n    ) {\n        return this.logClickEvent(\n            SearchPageEvents.showMoreFoldedResults,\n            info,\n            identifier,\n            metadata ? generateMetadataToSend(metadata, false) : undefined,\n        );\n    }\n\n    public async logShowLessFoldedResults(metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.showLessFoldedResults,\n            metadata ? generateMetadataToSend(metadata, false) : undefined,\n        );\n    }\n\n    public logTriggerNotify(triggerNotifyMetadata: TriggerNotifyMetadata, metadata?: CaseMetadata) {\n        return this.logCustomEvent(\n            SearchPageEvents.triggerNotify,\n            metadata ? {...generateMetadataToSend(metadata, false), ...triggerNotifyMetadata} : triggerNotifyMetadata,\n        );\n    }\n\n    private async getBaseCustomEventRequest(metadata?: Record<string, any>) {\n        return {\n            ...(await this.getBaseEventRequest(metadata)),\n            lastSearchQueryUid: this.provider.getSearchUID(),\n        };\n    }\n\n    private async getBaseSearchEventRequest(\n        event: SearchPageEvents | InsightEvents,\n        metadata?: Record<string, any>,\n    ): Promise<SearchEventRequest> {\n        return {\n            ...(await this.getBaseEventRequest({...metadata, ...this.provider.getGeneratedAnswerMetadata?.()})),\n            ...this.provider.getSearchEventRequestPayload(),\n            searchQueryUid: this.provider.getSearchUID(),\n            queryPipeline: this.provider.getPipeline(),\n            actionCause: event,\n        };\n    }\n\n    private async getBaseEventRequest(metadata?: Record<string, any>) {\n        const customData = {...this.provider.getBaseMetadata(), ...metadata};\n        return {\n            ...this.getOrigins(),\n            customData,\n            language: this.provider.getLanguage(),\n            facetState: this.provider.getFacetState ? this.provider.getFacetState() : [],\n            anonymous: this.provider.getIsAnonymous(),\n            clientId: await this.getClientId(),\n        };\n    }\n\n    private getOrigins() {\n        return {\n            originContext: this.provider.getOriginContext?.(),\n            originLevel1: this.provider.getOriginLevel1(),\n            originLevel2: this.provider.getOriginLevel2(),\n            originLevel3: this.provider.getOriginLevel3(),\n        };\n    }\n\n    private getClientId() {\n        return this.coveoAnalyticsClient instanceof CoveoAnalyticsClient\n            ? this.coveoAnalyticsClient.getCurrentVisitorId()\n            : undefined;\n    }\n}\n","import * as analytics from './library';\nimport handleOneAnalyticsEvent from './simpleanalytics';\n\ndeclare const self: any;\n\nconst promise = (window as any)['Promise'];\nif (!(promise instanceof Function) && !global) {\n    console.error(\n        `This script uses window.Promise which is not supported in your browser. Consider adding a polyfill like \"es6-promise\".`,\n    );\n}\nconst fetch = (window as any)['fetch'];\nif (!(fetch instanceof Function) && !global) {\n    console.error(\n        `This script uses window.fetch which is not supported in your browser. Consider adding a polyfill like \"fetch\".`,\n    );\n}\n\n// CoveoUAGlobal is the interface for the global function which also has a\n// queue `q` of unexecuted parameters\nexport interface CoveoUAGlobal {\n    (action: string, ...params: any[]): void;\n    // CoveoAnalytics.q is the queue of last called actions before lib was included\n    q?: [string, any[]][];\n}\n\n// On load of this script we get the global object `coveoua` (which would be)\n// on `window` in a browser\nconst coveoua: CoveoUAGlobal = self.coveoua || handleOneAnalyticsEvent;\n\n// Replace the quick shim with the real thing.\nself.coveoua = handleOneAnalyticsEvent;\n\nself.coveoanalytics = analytics;\n\n// On normal execution this library should be loaded after the snippet execution\n// so we will execute the actions in the `q` array\nif (coveoua.q) {\n    const initEvents = coveoua.q.filter((args: [string, any[]]) => args[0] === 'init');\n    const otherEvents = coveoua.q.filter((args: [string, any[]]) => args[0] !== 'init');\n    [...initEvents, ...otherEvents].forEach((args: [string, any[]]) => handleOneAnalyticsEvent.apply(void 0, args));\n}\n\nexport default self.coveoua;\n"],"names":["EventType","hasWindow","window","hasNavigator","navigator","hasDocument","document","hasLocalStorage","localStorage","error","hasCookieStorage","cookieEnabled","eventTypesForDefaultValues","click","custom","search","view","addDefaultValues","eventType","payload","indexOf","language","documentElement","lang","userAgent","Cookie","set","name","value","expire","expirationDate","domainParts","host","Date","setTime","getTime","location","hostname","writeCookie","split","length","get","cookiePrefix","cookieArray","cookie","i","replace","lastIndexOf","substring","erase","domain","concat","toUTCString","getAvailableStorage","detector.hasLocalStorage","detector.hasCookieStorage","CookieStorage","sessionStorage","detector.hasSessionStorage","NullStorage","prototype","getItem","key","prefix","removeItem","setItem","data","CookieAndLocalStorage","this","cookieStorage","STORE_KEY","HistoryStore","store","addElement","elem","internalTime","cropQueryElement","stripEmptyQuery","currentHistory","getHistoryWithInternalTime","isValidEntry","setHistory","addElementAsync","getHistoryWithInternalTimeAsync","_a","sent","getHistory","history","stripEmptyQueries","stripInternalTime","getHistoryAsync","elements","JSON","parse","e","stringify","slice","clear","getMostRecentElement","Array","isArray","sort","first","second","part","toLowerCase","lastEntry","map","time","trim","_this","enhanceViewEvent","__awaiter","addPageViewToHistory","contentIdValue","__assign","toString","referrer","title","pageViewValue","historyElement","toISOString","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","Error","REGEX","validate","uuid","test","byteToHex","push","unsafeStringify","arr","offset","native","randomUUID","v4","options","buf","rnds","random","f","s","x","y","z","ROTL","n","uuidv5","version","hashfunc","generateUUID","namespace","_namespace","str","unescape","encodeURIComponent","bytes","charCodeAt","stringToBytes","TypeError","v","parseInt","err","DNS","URL","v35","K","H","msg","call","l","N","Math","ceil","M","Uint32Array","j","pow","floor","W","t","a","b","c","d","T","libVersion","getFormattedLocation","protocol","pathname","BasePluginEventTypes","pageview","event","Plugin","client","_b","uuidGenerator","uuidv4","BasePlugin","_super","actionData","pageViewId","nextPageViewId","currentLocation","lastReferrer","addHooks","__extends","getApi","setAction","action","clearData","clearPluginData","undefined","getLocationInformation","hitType","getNextValues","updateLocationInformation","updateLocationForNextPageView","getDefaultContextInformation","documentContext","encoding","characterSet","screenContext","screenResolution","screen","width","height","screenColor","colorDepth","navigatorContext","eventContext","now","eventId","hasSentFirstPageView","getCurrentLocationFromPayload","page","join","CoveoLinkParam","clientId","timestamp","uuidvalidate","creationDate","Object","defineProperty","age","expirationTime","referrerString","referrerList","expired","matchReferrer","url_1","some","RegExp","fromString","input","parts","clientIdPart","isNaN","Number","cvo_cid","LinkPlugin","decorate","acceptFrom","urlString","getCurrentVisitorId","url","searchParams","acceptedReferrers","setAcceptedLinkReferrers","Id","Link","keysOf","keys","isObject","o","coerceToNumber","utf8ByteCountFromFirstByte","firstByte","ticketKeysMapping","id","subject","description","category","productId","ticketSubKeysMatchGroup","__spreadArray","ticketKeyRegex","isServiceKey","productKeysMapping","brand","variant","price","quantity","coupon","position","group","impressionKeysMapping","productActionsKeysMapping","list","listSource","transactionActionsKeysMapping","revenue","tax","shipping","affiliation","step","option","quoteActionsKeysMapping","reviewActionsKeysMapping","rating","comment","commerceActionKeysMappingPerAction","add","bookmark_add","bookmark_remove","checkout","checkout_option","detail","impression","remove","refund","purchase","quickview","quote","review","convertImpressionToMeasurementProtocol","listIndex","productIndex","reduce","mappedImpression","newKey","productKeysMappingValues","impressionKeysMappingValues","productActionsKeysMappingValues","transactionActionsKeysMappingValues","reviewKeysMappingValues","quoteKeysMappingValues","productSubKeysMatchGroup","impressionSubKeysMatchGroup","productPrefixMatchGroup","impressionPrefixMatchGroup","productKeyRegex","impressionKeyRegex","productActionsKeyRegex","transactionActionsKeyRegex","customProductKeyRegex","customImpressionKeyRegex","coveoCommerceExtensionKeysRegex","isCommerceKey","isCustomCommerceKey","baseMeasurementProtocolKeysMapping","anonymizeIp","eventCategory","eventAction","eventLabel","eventValue","visitorId","userId","currencyCode","all","measurementProtocolKeysMapping","svcAction","svcActionData","measurementProtocolKeysMappingValues","isKnownMeasurementProtocolKey","isCustomKey","getFirstCustomMeasurementProtocolKeyMatch","matchedKey","every","regex","exec","Boolean","convertCustomObject","customData","allCustom","currentCustomKey","AnalyticsBeaconClient","opts","sendEvent","originalPayload","isAvailable","baseUrl","preprocessRequest","getQueryParamsForEventType","paramsFragments","_c","preProcessRequestAsPotentialJSONString","parsedRequestData","encodeForEventType","body","Blob","type","sendBeacon","deleteHttpCookieVisitorId","Promise","resolve","originalURL","returnedUrl","returnedPayload","processedRequest","processedURL","processedBody","console","isEventTypeLegacy","encodeEventToJson","token","visitorIdProvider","filter","p","access_token","encoded","NoopAnalyticsClient","_","__","fetch","globalThis","AnalyticsFetchClient","shouldAppendVisitorId","getVisitorIdParam","_f","visitorIdParam","defaultOptions","credentials","mode","headers","getHeaders","method","_e","apply","_d","fetchData","__rest","response","error_1","ok","json","visit","setCurrentVisitorId","_g","Authorization","BrowserRuntime","clientOptions","getUnprocessedRequests","storage","warn","beaconClient","addEventListener","_i","requests_1","getClientDependingOnEventType","NodeJSRuntime","NoopRuntime","doNotTrackValues","doNotTrack","checks","msDoNotTrack","globalPrivacyControl","Version","Endpoints","default","production","hipaa","buildBaseUrl","endpoint","apiVersion","isCustomEndpoint","hasUARestEndpoint","endsWith","InsightEvents","SearchPageEvents","CoveoAnalyticsClient","acceptedLinkReferrers","bufferedRequests","beforeSendHooks","afterSendHooks","eventTypeMapping","clientsOptions","runtime","runtimeEnvironment","initRuntime","addEventTypeMapping","newEventType","addClientIdParameter","copy","product","determineVisitorId","extractClientIdFromLink","href","log","err_1","setClientId","uuidValidate","getParameters","arguments","resolveParameters","getPayload","parametersToSend","resolvePayloadForParameters","linkParam","linker","variableLengthArgumentsNames","addVisitorIdParameter","usesMeasurementProtocol","addVisitorIdStep","currentPayload","addClientIdStep","processBeforeSendHooksStep","promisePayload","current","parseVariableArgumentsPayload","ensureAnonymousUserWhenUsingApiKey","payloadPromise","parameters","processMeasurementProtocolConversionStep","keysMappingForAction","params","mappedKeys","setTrackingIdIfTrackingIdNotPresent","removeEmptyPayloadValues","validateParams","removeUnknownParameters","processCustomParameters","mapCustomParametersToCustomData","makeEvent","eventTypeToSend","payloadToSend","remainingPayload","hook","deferExecution","sendFromBuffer","setTimeout","popped","shift","deleteHttpOnlyVisitorId","makeSearchEvent","request","sendSearchEvent","searchQueryUid","preparedRequest","makeClickEvent","sendClickEvent","makeCustomEvent","sendCustomEvent","lastSearchQueryUid","makeViewEvent","sendViewEvent","getVisit","getHealth","registerBeforeSendEventHook","registerAfterSendEventHook","eventConfig","hosts","fieldsOrder","parsedArguments","length_1","currentArgument","isKeyAllowedEmpty","evtType","newPayload","isMeasurementProtocolKey","rest","lowercasedCustom","lowercaseKeys","match","result","forEach","originLevel3","limit","startsWith","trackingId","hasOwnProperty","context_website","siteName","end","charAt","peekByte","truncateUrl","ECPluginEventTypes","allECEventTypes","ECPlugin","products","impressions","superCall","addProduct","addImpression","addHooksForPageView","addHooksForEvent","addHooksForECEvents","addECDataToPayload","collect","ecPayload","productPayload","getProductPayload","impressionPayload","getImpressionPayload","assureProductValidity","index","mappedProduct","convertProductToMeasurementProtocol","convertNumberTypes","updatedProduct","getImpressionsByList","baseImpression","assureBaseImpressionValidity","impressionList","mappedImpressions","listName","convertImpressionListToMeasurementProtocol","productRest","baseImpressionRest","lists","find","EC","SVCPluginEventTypes","allSVCEventTypes","SVCPlugin","ticket","setTicket","addHooksForSVCEvents","addSVCDataToPayload","svcPayload","ticketPayload","getTicketPayload","mappedTicket","SVC","Plugins","registeredPluginsMap","requiredPlugins","require","pluginClass","provide","plugin","clearRequired","execute","fn","args","actionFunction","DefaultPlugins","CoveoUA","plugins","init","optionsOrEndpoint","getEndpoint","getIsCustomEndpoint","isAnalyticsClient","pluginOptions_1","getPluginKeys","pluginKey","initForProxy","keyOrObject","send","onLoad","callback","callPlugin","pluginName","reset","coveoua","getCurrentClient","handleOneAnalyticsEvent","command","CustomEventsTypes","triggerNotify","triggerExecute","triggerQuery","triggerRedirect","queryErrorBack","queryErrorClear","queryErrorRetry","pagerNext","pagerPrevious","pagerNumber","pagerResize","pagerScrolling","facetSearch","facetShowLess","facetShowMore","recommendation","likeSmartSnippet","dislikeSmartSnippet","expandSmartSnippet","collapseSmartSnippet","openSmartSnippetFeedbackModal","closeSmartSnippetFeedbackModal","sendSmartSnippetReason","expandSmartSnippetSuggestion","collapseSmartSnippetSuggestion","showMoreSmartSnippetSuggestion","showLessSmartSnippetSuggestion","clearRecentQueries","recentResultClick","clearRecentResults","showLessFoldedResults","caseDetach","likeGeneratedAnswer","dislikeGeneratedAnswer","openGeneratedAnswerSource","generatedAnswerStreamEnd","generatedAnswerSourceHover","generatedAnswerCopyToClipboard","generatedAnswerHideAnswers","generatedAnswerShowAnswers","generatedAnswerExpand","generatedAnswerCollapse","generatedAnswerFeedbackSubmit","generatedAnswerFeedbackSubmitV2","expandToFullUI","openUserActions","showPrecedingSessions","showFollowingSessions","clickViewedDocument","clickPageView","createArticle","NoopAnalytics","currentVisitorId","status","getDataString","formattedData","formatArrayForCoveoCustomData","rawData","dataWithoutSemicolons","removeSemicolons","dataWithoutRepeatedValues","prev","isDifferent","filterConsecutiveRepeatedValues","formatOmniboxMetadata","meta","partialQueries","suggestions","CaseAssistEvents","CaseAssistActions","CaseCancelledReasons","CoveoSearchPageClient","provider","shouldDisableAnalytics","enableAnalytics","coveoAnalyticsClient","disable","enable","makeInterfaceLoad","interfaceLoad","logInterfaceLoad","searchUID","getSearchUID","makeRecommendationInterfaceLoad","recommendationInterfaceLoad","logRecommendationInterfaceLoad","makeRecommendation","logRecommendation","makeRecommendationOpen","info","identifier","recommendationOpen","logRecommendationOpen","makeStaticFilterClearAll","staticFilterClearAll","logStaticFilterClearAll","makeStaticFilterSelect","staticFilterSelect","logStaticFilterSelect","makeStaticFilterDeselect","staticFilterDeselect","logStaticFilterDeselect","makeFetchMoreResults","logFetchMoreResults","makeInterfaceChange","metadata","interfaceChange","logInterfaceChange","makeDidYouMeanAutomatic","didyoumeanAutomatic","logDidYouMeanAutomatic","makeDidYouMeanClick","didyoumeanClick","logDidYouMeanClick","makeResultsSort","resultsSort","logResultsSort","makeSearchboxSubmit","searchboxSubmit","logSearchboxSubmit","makeSearchboxClear","searchboxClear","logSearchboxClear","makeSearchboxAsYouType","searchboxAsYouType","logSearchboxAsYouType","makeBreadcrumbFacet","breadcrumbFacet","logBreadcrumbFacet","makeBreadcrumbResetAll","breadcrumbResetAll","logBreadcrumbResetAll","makeDocumentQuickview","documentQuickview","logDocumentQuickview","makeDocumentOpen","documentOpen","logDocumentOpen","makeOmniboxAnalytics","omniboxAnalytics","logOmniboxAnalytics","makeOmniboxFromLink","omniboxFromLink","logOmniboxFromLink","makeSearchFromLink","searchFromLink","logSearchFromLink","makeTriggerNotify","logTriggerNotify","makeTriggerExecute","logTriggerExecute","makeTriggerQuery","query","getSearchEventRequestPayload","queryText","logTriggerQuery","makeUndoTriggerQuery","undoTriggerQuery","logUndoTriggerQuery","makeTriggerRedirect","logTriggerRedirect","makePagerResize","logPagerResize","makePagerNumber","logPagerNumber","makePagerNext","logPagerNext","makePagerPrevious","logPagerPrevious","makePagerScrolling","logPagerScrolling","makeFacetClearAll","facetClearAll","logFacetClearAll","makeFacetSearch","logFacetSearch","makeFacetSelect","facetSelect","logFacetSelect","makeFacetDeselect","facetDeselect","logFacetDeselect","makeFacetExclude","facetExclude","logFacetExclude","makeFacetUnexclude","facetUnexclude","logFacetUnexclude","makeFacetSelectAll","facetSelectAll","logFacetSelectAll","makeFacetUpdateSort","facetUpdateSort","logFacetUpdateSort","makeFacetShowMore","logFacetShowMore","makeFacetShowLess","logFacetShowLess","makeQueryError","queryError","logQueryError","makeQueryErrorBack","customEventBuilder","logSearchEvent","logQueryErrorBack","makeQueryErrorRetry","logQueryErrorRetry","makeQueryErrorClear","logQueryErrorClear","makeLikeSmartSnippet","logLikeSmartSnippet","makeDislikeSmartSnippet","logDislikeSmartSnippet","makeExpandSmartSnippet","logExpandSmartSnippet","makeCollapseSmartSnippet","logCollapseSmartSnippet","makeOpenSmartSnippetFeedbackModal","logOpenSmartSnippetFeedbackModal","makeCloseSmartSnippetFeedbackModal","logCloseSmartSnippetFeedbackModal","makeSmartSnippetFeedbackReason","reason","details","logSmartSnippetFeedbackReason","makeExpandSmartSnippetSuggestion","snippet","documentId","logExpandSmartSnippetSuggestion","makeCollapseSmartSnippetSuggestion","logCollapseSmartSnippetSuggestion","makeShowMoreSmartSnippetSuggestion","logShowMoreSmartSnippetSuggestion","makeShowLessSmartSnippetSuggestion","logShowLessSmartSnippetSuggestion","makeOpenSmartSnippetSource","openSmartSnippetSource","logOpenSmartSnippetSource","makeOpenSmartSnippetSuggestionSource","openSmartSnippetSuggestionSource","contentIDKey","contentIdKey","contentIDValue","makeCopyToClipboard","copyToClipboard","logCopyToClipboard","logOpenSmartSnippetSuggestionSource","makeOpenSmartSnippetInlineLink","identifierAndLink","openSmartSnippetInlineLink","logOpenSmartSnippetInlineLink","makeOpenSmartSnippetSuggestionInlineLink","snippetAndLink","openSmartSnippetSuggestionInlineLink","logOpenSmartSnippetSuggestionInlineLink","makeRecentQueryClick","recentQueryClick","logRecentQueryClick","makeClearRecentQueries","logClearRecentQueries","makeRecentResultClick","logRecentResultClick","makeClearRecentResults","logClearRecentResults","makeNoResultsBack","noResultsBack","logNoResultsBack","makeShowMoreFoldedResults","showMoreFoldedResults","logShowMoreFoldedResults","makeShowLessFoldedResults","logShowLessFoldedResults","makeEventDescription","preparedEvent","actionCause","event_1","metadata_1","getBaseMetadata","getBaseEventRequest","logCustomEvent","makeCustomEventWithType","logCustomEventWithType","getBaseSearchEventRequest","queryPipeline","getPipeline","logClickEvent","getGeneratedAnswerMetadata","getOrigins","getSplitTestRun","getLanguage","facetState","getFacetState","anonymous","getIsAnonymous","getClientId","originContext","getOriginContext","originLevel1","getOriginLevel1","originLevel2","getOriginLevel2","getOriginLevel3","splitTestRunName","getSplitTestRunName","splitTestRunVersion","getSplitTestRunVersion","makeLikeGeneratedAnswer","logLikeGeneratedAnswer","makeDislikeGeneratedAnswer","logDislikeGeneratedAnswer","makeOpenGeneratedAnswerSource","logOpenGeneratedAnswerSource","makeGeneratedAnswerCitationClick","citation","generatedAnswerCitationClick","documentPosition","logGeneratedAnswerCitationClick","makeGeneratedAnswerSourceHover","logGeneratedAnswerSourceHover","makeGeneratedAnswerCopyToClipboard","logGeneratedAnswerCopyToClipboard","makeGeneratedAnswerHideAnswers","logGeneratedAnswerHideAnswers","makeGeneratedAnswerShowAnswers","logGeneratedAnswerShowAnswers","makeGeneratedAnswerExpand","logGeneratedAnswerExpand","makeGeneratedAnswerCollapse","logGeneratedAnswerCollapse","makeGeneratedAnswerFeedbackSubmit","logGeneratedAnswerFeedbackSubmit","makeGeneratedAnswerFeedbackSubmitV2","logGeneratedAnswerFeedbackSubmitV2","makeRephraseGeneratedAnswer","rephraseGeneratedAnswer","logRephraseGeneratedAnswer","makeRetryGeneratedAnswer","retryGeneratedAnswer","logRetryGeneratedAnswer","makeGeneratedAnswerStreamEnd","logGeneratedAnswerStreamEnd","CaseAssistClient","analyticsEnabled","svc","logEnterInterface","enterInterface","sendFlowStartEvent","logUpdateCaseField","fieldUpdate","fieldName","logSelectFieldSuggestion","fieldSuggestionClick","suggestion","logSelectDocumentSuggestion","documentSuggestionClick","permanentId","logQuickviewDocumentSuggestion","documentSuggestionQuickview","logRateDocumentSuggestion","suggestionRate","rate","logMoveToNextCaseStep","nextCaseStep","stage","logCaseCancelled","caseCancelled","quit","logCaseSolved","caseSolved","solved","logCaseCreated","caseCreated","flowStart","searchHub","generateMetadataToSend","includeContext","caseContext","caseId","caseNumber","metadataWithoutContext","context","contextKey","keyToBeSent","extractContextFromMetadata","CaseId","CaseNumber","context_Case_Subject","CaseSubject","CoveoInsightClient","metadataToSend","logContextChanged","contextChanged","logExpandToFullUI","logOpenUserActions","logShowPrecedingSessions","logShowFollowingSessions","logViewedDocumentClick","logPageViewClick","pageView","logCreateArticle","createArticleMetadata","logCaseSendEmail","caseSendEmail","logFeedItemTextPost","feedItemTextPost","caseMetadata","documentTitle","documentURL","documentUrl","logCaseAttach","resultUriHash","documentUriHash","caseAttach","logCaseDetach","generatedMetadata","snippetMetadata","generatedAnswerMetadata","generatedAnswerSourceMetadata","generatedAnswerFeedbackMetadata","generatedAnswerRephraseMetadata","generatedAnswerStreamEndMetadata","logGeneratedAnswerCitationDocumentAttach","generatedAnswerCitationDocumentAttach","getBaseCustomEventRequest","triggerNotifyMetadata","Function","global","self","coveoanalytics","analytics","q","initEvents","otherEvents"],"mappings":"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","x_google_ignoreList":[7,8,9,10,11,12,13,14,15,16]}